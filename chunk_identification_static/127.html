<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>127</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    127
                    <a href="126.html">prev</a>
                    <a href="128.html">next</a>
                    <a href="127_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_ca7ad284b68b41fd53b2a9e24cafe6fadaee52e8_admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;ca7ad284b68b41fd53b2a9e24cafe6fadaee52e8:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;ca7ad284b68b41fd53b2a9e24cafe6fadaee52e8^1:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;ca7ad284b68b41fd53b2a9e24cafe6fadaee52e8^2:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;1d8f70a5cd049c3d229a6ef9441390c91fb57271:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18 package org.broadleafcommerce.openadmin.web.service;                                                     </span>
<span  style="">  19                                                                                                          </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  21 import org.apache.commons.collections.Predicate;                                                         </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  22 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  23 import org.apache.commons.lang.BooleanUtils;                                                             </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  24 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  25 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  26 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  27 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  28 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  29 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  30 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  31 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  32 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="">  33 import org.broadleafcommerce.common.i18n.service.TranslationService;                                     </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  34 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  35 import org.broadleafcommerce.common.media.domain.MediaDto;                                               </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  36 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  37 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  38 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  39 import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                      </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  40 import org.broadleafcommerce.common.presentation.client.LookupType;                                      </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  41 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  42 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  43 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="6163854737754492449" onmouseenter="enter('6163854737754492449');" onmouseout="out('6163854737754492449');" style="">  44 import org.broadleafcommerce.common.security.service.ExploitProtectionService;                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  45 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  46 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  47 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  48 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  49 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  50 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  51 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  52 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  53 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  54 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  55 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  56 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  57 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  58 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  59 import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                   </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  60 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  61 import org.broadleafcommerce.openadmin.dto.MapStructure;                                                 </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  62 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  63 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  64 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  65 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  66 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  67 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  68 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  69 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  70 import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                          </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  71 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                       </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  72 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;          </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  73 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                   </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  74 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;              </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  75 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  76 import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;   </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  77 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style="">  78 import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;        </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style="">  79 import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  80 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style="">  81 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;             </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  82 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style="">  83 import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                   </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  84 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  85 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style="">  86 import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style="">  87 import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                           </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style="">  88 import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style="">  89 import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                    </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style="">  90 import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                              </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style="">  91 import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                        </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style="">  92 import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                       </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  93 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  94 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style="">  95 import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                            </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  96 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  97 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style="">  98 import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                              </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style="">  99 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                      </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style=""> 100 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                  </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style=""> 101 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                     </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style=""> 102 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                 </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 103 import org.codehaus.jettison.json.JSONObject;                                                            </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 104 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 105 import org.springframework.context.MessageSource;                                                        </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 106 import org.springframework.context.NoSuchMessageException;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 107 import org.springframework.stereotype.Service;                                                           </span>
<span  style=""> 108                                                                                                          </span>
<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style=""> 109 import com.fasterxml.jackson.core.Version;                                                               </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style=""> 110 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style=""> 111 import com.fasterxml.jackson.databind.module.SimpleModule;                                               </span>
<span  style=""> 112                                                                                                          </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style=""> 113 import java.io.IOException;                                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 114 import java.math.BigDecimal;                                                                             </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style=""> 115 import java.text.DateFormat;                                                                             </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style=""> 116 import java.text.DateFormatSymbols;                                                                      </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style=""> 117 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style=""> 118 import java.text.NumberFormat;                                                                           </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style=""> 119 import java.text.ParseException;                                                                         </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 120 import java.text.SimpleDateFormat;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 121 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 122 import java.util.Arrays;                                                                                 </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 123 import java.util.Collections;                                                                            </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 124 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 125 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 126 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 127 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 128 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 129 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 130 import java.util.Set;                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 132 import javax.annotation.Resource;                                                                        </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style=""> 133 import javax.persistence.ManyToOne;                                                                      </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style=""> 134 import javax.persistence.OneToOne;                                                                       </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 135 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span  style=""> 136                                                                                                          </span>
<span  style=""> 137                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 138 /**                                                                                                      </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 139  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 140  */                                                                                                      </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 141 @Service(&quot;blFormBuilderService&quot;)                                                                         </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 142 public class FormBuilderServiceImpl implements FormBuilderService {                                      </span>
<span  style=""> 143                                                                                                          </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 144     private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                      </span>
<span  style=""> 145                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 146     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 147                                                                                                          </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 148     @Resource(name = &quot;blAdminEntityService&quot;)                                                             </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 149     protected AdminEntityService adminEntityService;                                                     </span>
<span  style=""> 150                                                                                                          </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 151     @Resource (name = &quot;blAdminNavigationService&quot;)                                                        </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 152     protected AdminNavigationService navigationService;                                                  </span>
<span  style=""> 153                                                                                                          </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 154     @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                    </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 155     protected FormBuilderExtensionManager extensionManager;                                              </span>
<span  style=""> 156                                                                                                          </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 157     @Resource(name=&quot;blEntityConfiguration&quot;)                                                              </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 158     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style=""> 159                                                                                                          </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 160     @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                       </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 161     protected SecurityVerifier adminRemoteSecurityService;                                               </span>
<span  style=""> 162                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 163     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 164     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 165                                                                                                          </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 166     @Resource(name = &quot;blMediaBuilderService&quot;)                                                            </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 167     protected MediaBuilderService mediaBuilderService;                                                   </span>
<span  style=""> 168                                                                                                          </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 169     @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                           </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 170     protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                        </span>
<span  style=""> 171                                                                                                          </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 172     @Resource(name = &quot;blAdminNavigationService&quot;)                                                         </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 173     protected AdminNavigationService adminNavigationService;                                             </span>
<span  style=""> 174                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 175     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 176     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 177                                                                                                          </span>
<span class="-8242037663383389708" onmouseenter="enter('-8242037663383389708');" onmouseout="out('-8242037663383389708');" style=""> 178     @Resource(name = &quot;blDynamicEntityDao&quot;)                                                               </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 179     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 180                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 181     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 182     protected LocaleService localeService;                                                               </span>
<span  style=""> 183                                                                                                          </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style=""> 184     @Resource(name = &quot;blTranslationService&quot;)                                                             </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style=""> 185     protected TranslationService translationService;                                                     </span>
<span  style=""> 186                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 187     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 188     protected boolean useTranslationSearch;                                                              </span>
<span  style=""> 189                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 190 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 191 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 192                                                                                                          </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 194             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 195     };                                                                                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 196                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 197     @Override                                                                                            </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 198     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 198     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SeðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 199             throws ServiceException {                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 200 =======                                                                                                  </span>
<span class="-4708283361541865346" onmouseenter="enter('-4708283361541865346');" onmouseout="out('-4708283361541865346');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201     @Resource(name = &quot;blExploitProtectionService&quot;)                                                       </span>
<span class="2624150081163085905" onmouseenter="enter('2624150081163085905');" onmouseout="out('2624150081163085905');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202     ExploitProtectionService exploitProtectionService;                                                   </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 203 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 204                                                                                                          </span>
<span class="8033614225945187624" onmouseenter="enter('8033614225945187624');" onmouseout="out('8033614225945187624');" style=""> 205     protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="-8766489859370232859" onmouseenter="enter('-8766489859370232859');" onmouseout="out('-8766489859370232859');" style=""> 206             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 207     };                                                                                                   </span>
<span  style=""> 208                                                                                                          </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style=""> 209     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style=""> 210             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 211     };                                                                                                   </span>
<span  style=""> 212                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 213     @Override                                                                                            </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 214     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 214     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SeðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 215             throws ServiceException {                                                                    </span>
<span  style=""> 216                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 217         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 218         ListGrid.Type type = ListGrid.Type.MAIN;                                                         </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 219         String idProperty = &quot;id&quot;;                                                                        </span>
<span  style=""> 220                                                                                                          </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 221         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 222         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 223         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 224             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 225                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span  style=""> 226                                                                                                          </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 227                 if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                  </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 228                     idProperty = fmd.getName();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229                 }                                                                                        </span>
<span  style=""> 230                                                                                                          </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 231                 if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                       </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 232                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 233                     Field hf = createHeaderField(p, fmd);                                                </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 234                     headerFields.add(hf);                                                                </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 235                     defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236                 }                                                                                        </span>
<span  style=""> 237                                                                                                          </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 238                 if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                    </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""><abbr title=" 239                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));"> 239                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmdðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242         }                                                                                                </span>
<span  style=""> 243                                                                                                          </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style=""> 244         if (useTranslationSearch) {                                                                      </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style=""> 245             getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246         }                                                                                                </span>
<span  style=""> 247                                                                                                          </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 248         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 248         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, ðŸ”µ</abbr></span>
<span  style=""> 249                                                                                                          </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 250         if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                    </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 251             // Set the first column to be able to link to the main entity                                </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 252             listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 253         } else {                                                                                         </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 254             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 254             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeiðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 255             message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;             </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 256             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257         }                                                                                                </span>
<span  style=""> 258                                                                                                          </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 259         Date c = new Date();                                                                             </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 260         String friendlyName = &quot;listGrid&quot; + c.getTime();                                                  </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 261         // Set up the filter builder params                                                              </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 262         listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 263         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 264         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 265         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 266             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 268         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 269         listGrid.setHideFriendlyName(true);                                                              </span>
<span  style=""> 270                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 271         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 272         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 273         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 274         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 275             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276         }                                                                                                </span>
<span  style=""> 277                                                                                                          </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 278         listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 279         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 280                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 281         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 282                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 283         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style=""><abbr title=" 286     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {"> 286     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFieldsðŸ”µ</abbr></span>
<span  style=""> 287                                                                                                          </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style=""> 288         TranslatedEntity translatedEntity;                                                               </span>
<span  style=""> 289                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 290         try {                                                                                            </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style=""> 291             translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                </span>
<span  style=""> 292                                                                                                          </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style=""> 293             FieldDTO localeField = new FieldDTO();                                                       </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style=""> 294             localeField.setId(&quot;translationLocale&quot;);                                                      </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style=""> 295             localeField.setLabel(&quot;Translation locale&quot;);                                                  </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style=""> 296             localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                  </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style=""> 297             localeField.setInput(&quot;select&quot;);                                                              </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style=""> 298             localeField.setType(&quot;string&quot;);                                                               </span>
<span  style=""> 299                                                                                                          </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title=" 300             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();"> 300             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span  style=""> 301                                                                                                          </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style=""> 302             Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                               </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style=""> 303             for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                        </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style=""> 304                 localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305             }                                                                                            </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style=""> 306             localeField.setValues((new JSONObject(localeMap)).toString());                               </span>
<span  style=""> 307                                                                                                          </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style=""> 308             defaultWrapperFields.add(localeField);                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 309         } catch (Exception e) {                                                                          </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style=""> 310             translatedEntity = null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312     }                                                                                                    </span>
<span  style=""> 313                                                                                                          </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 314     protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {             </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 315         FieldDTO fieldDTO = new FieldDTO();                                                              </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 316         //translate the label to display                                                                 </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 317         String label = field.getFriendlyName();                                                          </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 318         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 319         MessageSource messages = context.getMessageSource();                                             </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 320         if (messages != null) {                                                                          </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 321             label = messages.getMessage(label, null, label, context.getJavaLocale());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322         }                                                                                                </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 323         fieldDTO.setLabel(label);                                                                        </span>
<span  style=""> 324                                                                                                          </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 325         fieldDTO.setId(field.getName());                                                                 </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 326         if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                     </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 327             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 328         } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 329             fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                            </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 330         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 330         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || fieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 331             fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                         </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 332         } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                             </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 333             fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                         </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 334         } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                               </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 335             fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                     </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 336             fieldDTO.setInput(&quot;select&quot;);                                                                 </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 337             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 338             String[][] enumerationValues = fmd.getEnumerationValues ();                                  </span>
<span  style=""> 339                                                                                                          </span>
<span class="-4050759252301789248" onmouseenter="enter('-4050759252301789248');" onmouseout="out('-4050759252301789248');" style=""> 340             //not sure if we need to decode here or not...                                               </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style=""> 341             for(int i=0; i&lt; enumerationValues.length;i++){                                               </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""> 342                 enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343             }                                                                                            </span>
<span  style=""> 344                                                                                                          </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 345             Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                               </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 346             for (int i = 0; i &lt; enumerationValues.length; i++) {                                         </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 347                 enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span  style=""> 349                                                                                                          </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 350             fieldDTO.setValues(new JSONObject(enumMap).toString());                                      </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 351         } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                              </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 352             fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                       </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 353             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span  style=""> 354                                                                                                          </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 355             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 355             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 356             if (section != null) {                                                                       </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 357                 String sectionKey = section.getUrl().substring(1);                                       </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 358                 fieldDTO.setSelectizeSectionKey(sectionKey);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 359             } else {                                                                                     </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 360                 fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 362         } else {                                                                                         </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 363             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364         }                                                                                                </span>
<span  style=""> 365                                                                                                          </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 366         return fieldDTO;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367     }                                                                                                    </span>
<span  style=""> 368                                                                                                          </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 369     protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                              </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 370         Field hf;                                                                                        </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 371         if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                        </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 372                 fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                   </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 373                 fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                 </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 374                 fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                       </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 375             hf = new ComboField();                                                                       </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style=""> 376             String[][] enumerationValues = fmd.getEnumerationValues();                                   </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style=""> 377             for(int i=0; i&lt; enumerationValues.length;i++){                                               </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""> 378                 enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379             }                                                                                            </span>
<span class="4899380696599563483" onmouseenter="enter('4899380696599563483');" onmouseout="out('4899380696599563483');" style=""> 380             ((ComboField) hf).setOptions(enumerationValues);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 381         } else {                                                                                         </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 382             hf = new Field();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383         }                                                                                                </span>
<span  style=""> 384                                                                                                          </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 385         hf.withName(p.getName())                                                                         </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""><abbr title=" 386           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())"> 386           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getðŸ”µ</abbr></span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 387           .withOrder(fmd.getGridOrder())                                                                 </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 388           .withColumnWidth(fmd.getColumnWidth())                                                         </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 389           .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                   </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 390           .withForeignKeyClass(fmd.getForeignKeyClass())                                                 </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 391           .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                      </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""><abbr title=" 392           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())"> 392           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClassðŸ”µ</abbr></span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 393           .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 394         String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();            </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 395         hf.setFieldType(fieldType);                                                                      </span>
<span  style=""> 396                                                                                                          </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 397         return hf;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398     }                                                                                                    </span>
<span  style=""> 399                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 400     @Override                                                                                            </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""><abbr title=" 401     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field, "> 401     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property fieðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 402             String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 403             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 404         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 405         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 406         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 407         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 408             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 410         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 410         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 411                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 412         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 413         ListGrid.Type type = null;                                                                       </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 414         boolean editable = false;                                                                        </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 415         boolean sortable = false;                                                                        </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 416         boolean readOnly = false;                                                                        </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 417         boolean hideIdColumn = false;                                                                    </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 418         boolean canFilterAndSort = true;                                                                 </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 419         boolean modalSingleSelectable = false;                                                           </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 420         boolean modalMultiSelectable = false;                                                            </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 421         boolean selectize = false;                                                                       </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 422         boolean isMedia = false;                                                                         </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 423         boolean isLookup = false;                                                                        </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 424         String sortProperty = null;                                                                      </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 425         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 426         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span  style=""> 427                                                                                                          </span>
<span  style=""> 428                                                                                                          </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 429         String idProperty = &quot;id&quot;;                                                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 430         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 431             if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                  </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""><abbr title=" 432                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;"> 432                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;ðŸ”µ</abbr></span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 433                     //make sure it&#x27;s a property for this entity - not an association                     </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 434                     !property.getName().contains(&quot;.&quot;)) {                                                 </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 435                 idProperty = property.getName();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 436                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438         }                                                                                                </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""><abbr title=" 439         // Get the header fields for this list grid. Note that the header fields are different depending on the"> 439         // Get the header fields for this list grid. Note that the header fields are different depending ðŸ”µ</abbr></span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 440         // kind of field this is.                                                                        </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 441         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 442             readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                         </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 443             modalSingleSelectable = true;                                                                </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 444             for (Property p : cmd.getProperties()) {                                                     </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 445                 if (p.getMetadata() instanceof BasicFieldMetadata) {                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 446                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 447                                                                                                          </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 448                     if (SupportedFieldType.ID.equals(md.getFieldType())) {                               </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 449                         idProperty = md.getName();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450                     }                                                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 452                     if (md.isProminent() != null &amp;&amp; md.isProminent()                                     </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 453                             &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {  </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 454                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 455                         headerFields.add(hf);                                                            </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 456                         defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457                     }                                                                                    </span>
<span  style=""> 458                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 459                     if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                  </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 460                         Field f = createHeaderField(p, md);                                              </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 461                         wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464             }                                                                                            </span>
<span  style=""> 465                                                                                                          </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 466             type = ListGrid.Type.TO_ONE;                                                                 </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 467         } else if (fmd instanceof BasicCollectionMetadata) {                                             </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 468             BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                 </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 469             readOnly = !bcm.isMutable();                                                                 </span>
<span  style=""> 470                                                                                                          </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 471             if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                    </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 472                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473             }                                                                                            </span>
<span  style=""> 474                                                                                                          </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 475             if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                         </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 476                 Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                          </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 477                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 478                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 479                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 480                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 481                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 482                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 484             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 485                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 486                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 487                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 488                         if (md.isProminent() != null &amp;&amp; md.isProminent()                                 </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 489                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 489                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility()))ðŸ”µ</abbr></span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 490                             Field hf = createHeaderField(p, md);                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 491                             headerFields.add(hf);                                                        </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 492                             defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493                         }                                                                                </span>
<span  style=""> 494                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 495                         if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                              </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 496                             Field f = createHeaderField(p, md);                                          </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 497                             wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501             }                                                                                            </span>
<span  style=""> 502                                                                                                          </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 503             type = ListGrid.Type.BASIC;                                                                  </span>
<span  style=""> 504                                                                                                          </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 505             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 505             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equalðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 506                 editable = true;                                                                         </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 507             } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                  </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 508                 selectize = true;                                                                        </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 509                 modalSingleSelectable = true;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 510             } else {                                                                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 511                 modalSingleSelectable = true;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512             }                                                                                            </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 513             sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                    </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 514             if (sortable) {                                                                              </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 515                 sortProperty = bcm.getSortProperty();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516             }                                                                                            </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 517         } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 518             modalSingleSelectable = true;                                                                </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 519             readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                             </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 520             AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;               </span>
<span  style=""> 521                                                                                                          </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 522             if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {        </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 523                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524             }                                                                                            </span>
<span  style=""> 525                                                                                                          </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""><abbr title=" 526             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {"> 526             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())ðŸ”µ</abbr></span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 527                 selectize = true;                                                                        </span>
<span  style=""> 528                                                                                                          </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 529                 Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                        </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 530                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 531                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 532                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 533                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 534                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 535                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 537             } else {                                                                                     </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 538                 for (String fieldName : atcmd.getGridVisibleFields()) {                                  </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 539                     Property p = cmd.getPMap().get(fieldName);                                           </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 540                     if (p != null) {                                                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 541                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span  style=""> 542                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 543                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 544                         headerFields.add(hf);                                                            </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 545                         wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546                     }                                                                                    </span>
<span  style=""> 547                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549             }                                                                                            </span>
<span  style=""> 550                                                                                                          </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 551             type = ListGrid.Type.ADORNED;                                                                </span>
<span  style=""> 552                                                                                                          </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 553             if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                   </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 554                 editable = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555             }                                                                                            </span>
<span  style=""> 556                                                                                                          </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 557             AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()        </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""><abbr title=" 558                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);"> 558                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLISðŸ”µ</abbr></span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 559             sortable = StringUtils.isNotBlank(adornedList.getSortField());                               </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 560             if (sortable) {                                                                              </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 561                 sortProperty = adornedList.getSortField();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562             }                                                                                            </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 563         } else if (fmd instanceof MapMetadata) {                                                         </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 564             readOnly = !((MapMetadata) fmd).isMutable();                                                 </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 565             MapMetadata mmd = (MapMetadata) fmd;                                                         </span>
<span  style=""> 566                                                                                                          </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 567             Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                      </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 568             BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                            </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 569             keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                            </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 570             Field hf = createHeaderField(p2, keyMd);                                                     </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 571             headerFields.add(hf);                                                                        </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 572             wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                          </span>
<span  style=""> 573                                                                                                          </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 574             if (mmd.isSimpleValue()) {                                                                   </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 575                 Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                     </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 576                 BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();           </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 577                 valueMd.setFriendlyName(&quot;Value&quot;);                                                        </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 578                 hf = createHeaderField(valueProperty, valueMd);                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 579                 headerFields.add(hf);                                                                    </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 580                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                    </span>
<span  style=""> 581                                                                                                          </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 582                 idProperty = &quot;key&quot;;                                                                      </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 583                 hideIdColumn = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 584             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 585                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 586                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 587                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 588                         String valueClassName = mmd.getValueClassName();                                 </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 589                         if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                        </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 590                             Class&lt;?&gt; clazz;                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 591                             try {                                                                        </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 592                                 clazz = Class.forName(mmd.getValueClassName());                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 593                             } catch (ClassNotFoundException e) {                                         </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 594                                 throw ExceptionHelper.refineException(e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595                             }                                                                            </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 596                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 596                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.ðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 597                             ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);            </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 598                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 598                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.clasðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 599                                 valueClassName = manyToOne.targetEntity().getName();                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 600                             } else {                                                                     </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 601                                 OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);           </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 602                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 602                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.clðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 603                                     valueClassName = oneToOne.targetEntity().getName();                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                         }                                                                                </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 607                         if (md.getTargetClass().equals(valueClassName)) {                                </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 608                             if (md.isProminent() != null &amp;&amp; md.isProminent()                             </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 609                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 609                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibilityðŸ”µ</abbr></span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 610                                 hf = createHeaderField(p, md);                                           </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 611                                 headerFields.add(hf);                                                    </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 612                                 defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));        </span>
<span  style=""> 613                                                                                                          </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 614                                 // Is this a media listgrid                                              </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 615                                 if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                          </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 616                                     isMedia = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618                             }                                                                            </span>
<span  style=""> 619                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 620                             if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                          </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 621                                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626             }                                                                                            </span>
<span  style=""> 627                                                                                                          </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 628             type = ListGrid.Type.MAP;                                                                    </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 629             editable = true;                                                                             </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 630             canFilterAndSort = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631         }                                                                                                </span>
<span  style=""> 632                                                                                                          </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 633         String ceilingType = &quot;&quot;;                                                                         </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 634         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 635             ceilingType = cmd.getCeilingType();                                                          </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 636         } else if (fmd instanceof CollectionMetadata) {                                                  </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 637             ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638         }                                                                                                </span>
<span  style=""> 639                                                                                                          </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 640         if (CollectionUtils.isEmpty(headerFields)) {                                                     </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 641             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 641             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingTypðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 642                     StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                         </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""><abbr title=" 643             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {"> 643             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) ðŸ”µ</abbr></span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 644                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 644                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTaðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 645             } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {       </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 646                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 646                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 647             } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                       </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 648                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 648                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollectioðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 649             } else {                                                                                     </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 650                 message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651             }                                                                                            </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 652             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653         }                                                                                                </span>
<span  style=""> 654                                                                                                          </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 655         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 655         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrderðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 656         listGrid.setSubCollectionFieldName(field.getName());                                             </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 657         listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                 </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 658         if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                           </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 659             listGrid.setFriendlyName(field.getName());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660         }                                                                                                </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 661         listGrid.setContainingEntityId(containingEntityId);                                              </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 662         listGrid.setIsReadOnly(readOnly);                                                                </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 663         listGrid.setHideIdColumn(hideIdColumn);                                                          </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 664         listGrid.setCanFilterAndSort(canFilterAndSort);                                                  </span>
<span  style=""> 665                                                                                                          </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 666         // Set up the filter builder params                                                              </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 667         Date c = new Date();                                                                             </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 668         String friendlyName = field.getMetadata().getFriendlyName();                                     </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 669         String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                     </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 670         listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                              </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 671         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 672         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 673         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 674             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 676         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span  style=""> 677                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 678         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 679         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 680         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 681         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 682             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683         }                                                                                                </span>
<span  style=""> 684                                                                                                          </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 685         if (editable) {                                                                                  </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 686             listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687         }                                                                                                </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 688         if (readOnly) {                                                                                  </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 689             listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690         }                                                                                                </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 691         if (sortable) {                                                                                  </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 692             listGrid.setCanFilterAndSort(false);                                                         </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 693             listGrid.setIsSortable(true);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694         }                                                                                                </span>
<span  style=""> 695                                                                                                          </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 696         if (modalSingleSelectable) {                                                                     </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 697             if (readOnly) {                                                                              </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 698                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 698                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 699             } else {                                                                                     </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 700                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                        </span>
<span  style=""> 701                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703         }                                                                                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 704         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 705                                                                                                          </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 706         if (selectize) {                                                                                 </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 707             listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                       </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 708             listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709         }                                                                                                </span>
<span  style=""> 710                                                                                                          </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 711         if (modalMultiSelectable) {                                                                      </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 712             listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                             </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 713             listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714         }                                                                                                </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 715         listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                     </span>
<span  style=""> 716                                                                                                          </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 717         if (fmd.getManualFetch()) {                                                                      </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 718             listGrid.setManualFetch(true);                                                               </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 719             listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720         }                                                                                                </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 721         if (isMedia) {                                                                                   </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 722             listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723         }                                                                                                </span>
<span  style=""> 724                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 725         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 726                                                                                                          </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 727         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 727         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implemðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 728         if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                 </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 729             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 729             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 730             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 730             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguratiðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 731                 for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {      </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 732                     if (modifier.isQualified(data.getModifierType())) {                                  </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 733                         modifier.modifyListGrid(new EntityFormModifierRequest()                          </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 734                                 .withListGrid(listGrid)                                                  </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 735                                 .withConfiguration(data)                                                 </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 736                                 .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())    </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 737                                 .withRowLevelSecurityService(rowLevelSecurityService));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741         }                                                                                                </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 742         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 743     }                                                                                                    </span>
<span  style=""> 744                                                                                                          </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 745     protected String getMapKeyFriendlyName(Property property) {                                          </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 746         String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                      </span>
<span  style=""> 747                                                                                                          </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 748         return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749     }                                                                                                    </span>
<span  style=""> 750                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 751     @Override                                                                                            </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 752     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 752     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet dðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 753         String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                             </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 754             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 755         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 756         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 757         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 758         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 759             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 761         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 761         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 762                                                                                                          </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 763         Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                              </span>
<span  style=""> 764                                                                                                          </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 765         AdornedTargetList adornedList = ppr.getAdornedList();                                            </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 766         if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                             </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 767             &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null    </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 768             &amp;&amp; adornedList.getTargetIdProperty() != null) {                                              </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 769             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 769             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkeðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 770             result.put(&quot;linkedObjectId&quot;, containingEntityId);                                            </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 771             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 771             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772         }                                                                                                </span>
<span  style=""> 773                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 774         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775     }                                                                                                    </span>
<span  style=""> 776                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 777     @Override                                                                                            </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 778     public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {    </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 779         Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                    </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 780         List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                           </span>
<span  style=""> 781                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 782         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 783         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 784             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 785                 BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                            </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 786                 if (md.isProminent() != null &amp;&amp; md.isProminent()                                         </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 787                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {      </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 788                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 789                     headerFields.add(hf);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792         }                                                                                                </span>
<span  style=""> 793                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 794         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 795             Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                       </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 796             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 797                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 798                 if (p != null) {                                                                         </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 799                     selectizeOption.put(&quot;name&quot;, p.getValue());                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 800                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802             }                                                                                            </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 803             if (e.findProperty(&quot;id&quot;) != null) {                                                          </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 804                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                              </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 805             //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type  </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 806             } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                           </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 807                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808             }                                                                                            </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 809             if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                         </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 810                 selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811             }                                                                                            </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 812             options.add(selectizeOption);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 813         }                                                                                                </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 814         result.put(&quot;options&quot;, options);                                                                  </span>
<span  style=""> 815                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 816         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817     }                                                                                                    </span>
<span  style=""> 818                                                                                                          </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 819     protected String buildSelectizeUrl(ListGrid listGrid) {                                              </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 820         HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();  </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 821         String url = request.getContextPath();                                                           </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 822         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 822         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() :ðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 823         url += &quot;/&quot; + listGrid.getContainingEntityId();                                                   </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 824         url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                               </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 825         return url;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826     }                                                                                                    </span>
<span  style=""> 827                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 828     /**                                                                                                  </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 829      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 829      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, InteðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 830      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 831      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 832      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 833      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 834      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 835      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 836      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 837      * @param sectionCrumbs                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 838      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 839      */                                                                                                  </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 840     @Deprecated                                                                                          </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 841     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs, "> 841     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 842             String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {         </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""><abbr title=" 843        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);"> 843        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,nuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 844     }                                                                                                    </span>
<span  style=""> 845                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 846     /**                                                                                                  </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 847      * Populate a ListGrid with ListGridRecords.                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 848      *                                                                                                   </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 849      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 850      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 851      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 852      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 853      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 854      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 855      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 856      * @param sectionCrumbs                                                                              </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 857      * @param sortPropery                                                                                </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 858      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 859      */                                                                                                  </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 860     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 860     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 861             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 861             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, StringðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 862         // Create the list grid and set some basic attributes                                            </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 863         ListGrid listGrid = new ListGrid();                                                              </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 864         listGrid.setClassName(className);                                                                </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 865         listGrid.getHeaderFields().addAll(headerFields);                                                 </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 866         listGrid.setListGridType(type);                                                                  </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 867         listGrid.setSectionCrumbs(sectionCrumbs);                                                        </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 868         listGrid.setSectionKey(sectionKey);                                                              </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 869         listGrid.setOrder(order);                                                                        </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 870         listGrid.setIdProperty(idProperty);                                                              </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 871         listGrid.setStartIndex(drs.getStartIndex());                                                     </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 872         listGrid.setTotalRecords(drs.getTotalRecords());                                                 </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 873         listGrid.setPageSize(drs.getPageSize());                                                         </span>
<span  style=""> 874                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 875         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 876         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 876         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 877         if (section != null) {                                                                           </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 878             listGrid.setExternalEntitySectionKey(section.getUrl());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879         }                                                                                                </span>
<span  style=""> 880                                                                                                          </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 881         // format date list grid cells                                                                   </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 882         SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                          </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 883         DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                          </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 884         symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                             </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 885         formatter.setDateFormatSymbols(symbols);                                                         </span>
<span  style=""> 886                                                                                                          </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 887         // For each of the entities (rows) in the list grid, we need to build the associated             </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 888         // ListGridRecord and set the required fields on the record. These fields are the same ones      </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 889         // that are used for the header fields.                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 890         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 891             ListGridRecord record = new ListGridRecord();                                                </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 892             record.setListGrid(listGrid);                                                                </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 893             record.setDirty(e.isDirty());                                                                </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 894             record.setEntity(e);                                                                         </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 895             if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {            </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 896                 Property sort = e.findProperty(sortPropery);                                             </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 897                 record.setDisplayOrder(sort.getValue());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898             }                                                                                            </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 899             if (e.findProperty(&quot;hasError&quot;) != null) {                                                    </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 900                 Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());          </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 901                 record.setIsError(hasError);                                                             </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 902                 if (hasError) {                                                                          </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 903                     ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager        </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 904                             .getProxy().determineErrorMessageForEntity(e, record);                       </span>
<span  style=""> 905                                                                                                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 906                     if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {             </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 907                         record.setErrorKey(&quot;listgrid.record.error&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910             }                                                                                            </span>
<span  style=""> 911                                                                                                          </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 912             if (e.findProperty(&quot;progressStatus&quot;) != null) {                                              </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 913                 ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager            </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 914                         .getProxy().determineStatusMessageForEntity(e, record);                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 915                 if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                 </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 916                     record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                       </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 917                     record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919             }                                                                                            </span>
<span  style=""> 920                                                                                                          </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 921             if (e.findProperty(idProperty) != null) {                                                    </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 922                 record.setId(e.findProperty(idProperty).getValue());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923             }                                                                                            </span>
<span  style=""> 924                                                                                                          </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 925             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 926                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 927                 if (p != null) {                                                                         </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 928                     Field recordField = new Field().withName(headerField.getName())                      </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 929                             .withFriendlyName(headerField.getFriendlyName())                             </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 930                             .withOrder(p.getMetadata().getOrder());                                      </span>
<span  style=""> 931                                                                                                          </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 932                     if (headerField instanceof ComboField) {                                             </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 933                         recordField.setValue(((ComboField) headerField).getOption(p.getValue()));        </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 934                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 935                     } else {                                                                             </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 936                         if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 937                             try {                                                                        </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""><abbr title=" 938                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());"> 938                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue(ðŸ”µ</abbr></span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 939                                 String newValue = formatter.format(date);                                </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 940                                 recordField.setValue(newValue);                                          </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 941                             } catch (Exception ex) {                                                     </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 942                                 recordField.setValue(p.getValue());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943                             }                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 944                         } else {                                                                         </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 945                             recordField.setValue(p.getValue());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946                         }                                                                                </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 947                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 948                     }                                                                                    </span>
<span  style=""> 949                                                                                                          </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 950                     recordField.setDerived(isDerivedField(headerField, recordField, p));                 </span>
<span  style=""> 951                                                                                                          </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 952                     record.getFields().add(recordField);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954             }                                                                                            </span>
<span  style=""> 955                                                                                                          </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 956             if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                     </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 957                 Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);     </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""><abbr title=" 958                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());"> 958                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue()ðŸ”µ</abbr></span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 959                 record.getHiddenFields().add(hiddenField);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960             }                                                                                            </span>
<span  style=""> 961                                                                                                          </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 962             if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                  </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 963                 record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964             }                                                                                            </span>
<span  style=""> 965                                                                                                          </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 966             extensionManager.getProxy().modifyListGridRecord(className, record, e);                      </span>
<span  style=""> 967                                                                                                          </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 968             listGrid.getRecords().add(record);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969         }                                                                                                </span>
<span  style=""> 970                                                                                                          </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 971         if (drs.getFirstId() != null) {                                                                  </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 972             listGrid.setFirstId(drs.getFirstId());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973         }                                                                                                </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 974         if (drs.getLastId() != null) {                                                                   </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 975             listGrid.setLastId(drs.getLastId());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976         }                                                                                                </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 977         if (drs.getUpperCount() != null) {                                                               </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 978             listGrid.setUpperCount(drs.getUpperCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 979         }                                                                                                </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 980         if (drs.getLowerCount() != null) {                                                               </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 981             listGrid.setLowerCount(drs.getLowerCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982         }                                                                                                </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 983         if (drs.getFetchType() != null) {                                                                </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 984             listGrid.setFetchType(drs.getFetchType().toString());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985         }                                                                                                </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 986         if (drs.getTotalCountLessThanPageSize() != null) {                                               </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 987             listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988         }                                                                                                </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 989         if (drs.getPromptSearch() != null) {                                                             </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 990             listGrid.setPromptSearch(drs.getPromptSearch());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991         }                                                                                                </span>
<span  style=""> 992                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 993         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 994     }                                                                                                    </span>
<span  style=""> 995                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 996     /**                                                                                                  </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 997      * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 997      * Determines whether or not a particular field in a record is derived. By default this checks the {@ðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 998      * for the given Property to see if something on the backend has marked it as derived                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 999      *                                                                                                   </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style="">1000      * @param headerField the header for this recordField                                                </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style="">1001      * @param recordField the recordField being populated                                                </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style="">1002      * @param p the property that relates to this recordField                                            </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style="">1003      * @return whether or not this field is derived                                                      </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title="1004      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}">1004      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StringðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1005      */                                                                                                  </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style="">1006     protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                 </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style="">1007         return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1008     }                                                                                                    </span>
<span  style="">1009                                                                                                          </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style="">1010     protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {    </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style="">1011         List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                  </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style="">1012         List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                          </span>
<span  style="">1013                                                                                                          </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style="">1014         for (Property property : properties) {                                                           </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style="">1015             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style="">1016                 BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                    </span>
<span  style="">1017                                                                                                          </span>
<span  style="">1018                                                                                                          </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style="">1019                 if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {            </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""><abbr title="1020                     // Depending on visibility, field for the particular property is not created on the form">1020                     // Depending on visibility, field for the particular property is not created on the fðŸ”µ</abbr></span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style="">1021                     String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();</span>
<span  style="">1022                                                                                                          </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style="">1023                     // Create the field and set some basic attributes                                    </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style="">1024                     Field f;                                                                             </span>
<span  style="">1025                                                                                                          </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style="">1026                     if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())            </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style="">1027                             || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())      </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style="">1028                             || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())   </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style="">1029                             || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {      </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title="1030                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values">1030                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possiðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1031                         f = new ComboField();                                                            </span>
<span  style="">1032                                                                                                          </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style="">1033                         String[][] enumerationValues = fmd.getEnumerationValues();                       </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style="">1034                         for(int i=0; i&lt; enumerationValues.length;i++){                                   </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""><abbr title="1035                             enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);">1035                             enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1036                         }                                                                                </span>
<span class="5476416629756612876" onmouseenter="enter('5476416629756612876');" onmouseout="out('5476416629756612876');" style="">1037                         ((ComboField) f).setOptions(enumerationValues);                                  </span>
<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title="1038                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()">1038                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().boðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style="">1039                                 &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                          </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1040                             f.setIsVisible(false);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041                         }                                                                                </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style="">1042                     } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                   </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style="">1043                         f = new CodeField();                                                             </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style="">1044                     } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())               </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1045                             || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())          </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1046                             || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {     </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style="">1047                         // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields    </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style="">1048                         f = new RuleBuilderField();                                                      </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style="">1049                         ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);            </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style="">1050                         ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                        </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style="">1051                         ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                 </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style="">1052                         ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());          </span>
<span  style="">1053                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style="">1054                         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                       </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style="">1055                         ((RuleBuilderField) f).setJson(blankJsonString);                                 </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1056                         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1057                         if (dw != null) {                                                                </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style="">1058                             ((RuleBuilderField) f).setDataWrapper(dw);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059                         }                                                                                </span>
<span  style="">1060                                                                                                          </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1061                         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {               </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style="">1062                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                   </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1063                         } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) { </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style="">1064                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);            </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1065                         } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {   </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style="">1066                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067                         }                                                                                </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1068                     } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                        </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1069                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a ">1069                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1070                         // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1070                         // modal, so we&#x27;ll provision the combo field here. Available options will be set ðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1071                         // subsequent operation                                                          </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1072                         f = new ComboField();                                                            </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1073                     } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                  </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1074                         f = new MediaField();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1075                     } else {                                                                             </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1076                         // Create a default field since there was no specialized handler                 </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1077                         f = new Field();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078                     }                                                                                    </span>
<span  style="">1079                                                                                                          </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1080                     Boolean required = fmd.getRequiredOverride();                                        </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1081                     if (required == null) {                                                              </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1082                         required = fmd.getRequired();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083                     }                                                                                    </span>
<span  style="">1084                                                                                                          </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1085                     Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                          </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1086                     if (allowNoValueEnum != null) {                                                      </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1087                         f.setAllowNoValueEnumOption(allowNoValueEnum);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088                     }                                                                                    </span>
<span  style="">1089                                                                                                          </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1090                     f.withName(property.getName())                                                       </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1091                      .withFieldType(fieldType)                                                           </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1092                      .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                         </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1093                      .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                 </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1094                      .withOrder(fmd.getOrder())                                                          </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1095                      .withFriendlyName(fmd.getFriendlyName())                                            </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1096                      .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())        </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1097                      .withForeignKeyClass(fmd.getForeignKeyClass())                                      </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1098                      .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))           </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1099                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1099                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheriðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1100                      .withRequired(required)                                                             </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1101                      .withReadOnly(fmd.getReadOnly())                                                    </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1102                      .withTranslatable(fmd.getTranslatable())                                            </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style=""><abbr title="1103                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))">1103                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDðŸ”µ</abbr></span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1104                      .withLargeEntry(fmd.isLargeEntry())                                                 </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1105                      .withHint(fmd.getHint())                                                            </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1106                      .withTooltip(fmd.getTooltip())                                                      </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1107                      .withHelp(fmd.getHelpText())                                                        </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1108                      .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                               </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1109                      .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                      </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1110                      .withAssociatedFieldName(fmd.getAssociatedFieldName());                             </span>
<span  style="">1111                                                                                                          </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1112                     String defaultValue = fmd.getDefaultValue();                                         </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1113                     if (defaultValue != null) {                                                          </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1114                         defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                 </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1115                         f.withValue(defaultValue);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116                     }                                                                                    </span>
<span  style="">1117                                                                                                          </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1118                     if (StringUtils.isBlank(f.getFriendlyName())) {                                      </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1119                         f.setFriendlyName(f.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120                     }                                                                                    </span>
<span  style="">1121                                                                                                          </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1122                     // If is form hidden, set visible to false                                           </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1123                     if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {             </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1124                         f.setIsVisible(false);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125                     }                                                                                    </span>
<span  style="">1126                                                                                                          </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1127                     if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                        </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1128                         f.setIsVisible(true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129                     }                                                                                    </span>
<span  style="">1130                                                                                                          </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1131                     // Add the field to the appropriate FieldGroup                                       </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1132                     if (fmd.getGroup() == null) {                                                        </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1133                         homelessFields.add(f);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1134                     } else {                                                                             </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style=""><abbr title="1135                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());">1135                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136                     }                                                                                    </span>
<span  style="">1137                                                                                                          </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1138                     if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                          </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1139                         fieldsWithAssociations.add(f);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1143         }                                                                                                </span>
<span  style="">1144                                                                                                          </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1145         for (Field f : homelessFields) {                                                                 </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1146             ef.addField(cmd, f, null, null, null, null);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147         }                                                                                                </span>
<span  style="">1148                                                                                                          </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1149         for (Field f : fieldsWithAssociations) {                                                         </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1150             Field associatedField = findAssociatedField(ef, f);                                          </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1151             if (associatedField != null) {                                                               </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1152                 associatedField.setShouldRender(false);                                                  </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1153                 f.setAssociatedFieldName(associatedField.getName());                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1154             } else {                                                                                     </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1155                 f.setAssociatedFieldName(null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1156             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158     }                                                                                                    </span>
<span  style="">1159                                                                                                          </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1160     protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                 </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1161         if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                           </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1162             return fmd.getFieldComponentRendererTemplate();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163         }                                                                                                </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1164         return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165     }                                                                                                    </span>
<span  style="">1166                                                                                                          </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1167     protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                             </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1168         if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                       </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1169             return fmd.getGridFieldComponentRendererTemplate();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170         }                                                                                                </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style=""><abbr title="1171         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();">1171         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toStrinðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172     }                                                                                                    </span>
<span  style="">1173                                                                                                          </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1174     private Field findAssociatedField(EntityForm ef, Field f) {                                          </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1175         // Try on the parent object                                                                      </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1176         Field associatedField = ef.findField(f.getAssociatedFieldName());                                </span>
<span  style="">1177                                                                                                          </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1178         if (associatedField == null) {                                                                   </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1179             // Check the field&#x27;s path                                                                    </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1180             String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                          </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1181             String testPath = &quot;&quot;;                                                                        </span>
<span  style="">1182                                                                                                          </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1183             for (String path : fieldPathParts) {                                                         </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1184                 testPath += path + &quot;.&quot;;                                                                  </span>
<span  style="">1185                                                                                                          </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1186                 associatedField = ef.findField(testPath + f.getAssociatedFieldName());                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1187                 if (associatedField != null) {                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1188                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1189                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191         }                                                                                                </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1192         return associatedField;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1193     }                                                                                                    </span>
<span  style="">1194                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1195     /**                                                                                                  </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1196      * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,</span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1197      * it returns the foreignKeyClass.                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1198      *                                                                                                   </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1199      * @param foreignKeyClass the {@link String} class name                                              </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1200      * @return the admin section pathname                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1201      */                                                                                                  </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1202     protected String getAdminSectionPath(String foreignKeyClass) {                                       </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1203         if (foreignKeyClass != null) {                                                                   </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1204             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1204             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(fðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1205             return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1207         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1208     }                                                                                                    </span>
<span  style="">1209                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1210     /**                                                                                                  </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1211      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1211      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} iðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1212      *  the processed value of another tab.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1213      *                                                                                                   </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1214      * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where       </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style=""><abbr title="1215      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,">1215      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=ExamðŸ”µ</abbr></span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style=""><abbr title="1216      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.">1216      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; taðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1217      */                                                                                                  </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1218     protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {  </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1219         if (tabMetadataMap != null) {                                                                    </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1220             Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                     </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1221             for (String tabKey : tabMetadataKeySet) {                                                    </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1222                 TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                    </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style=""><abbr title="1223                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);">1223                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySeðŸ”µ</abbr></span>
<span  style="">1224                                                                                                          </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1225                 if (foundMatchingTab(unprocessedTabName)) {                                              </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1226                     if (!tabExists(ef, unprocessedTabName)) {                                            </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1227                         TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);        </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1228                         unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1230                 } else {                                                                                 </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1231                     if (tabExists(ef, tabKey)) {                                                         </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1232                         unprocessedTabName = tabKey;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1233                     } else {                                                                             </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1234                         unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236                 }                                                                                        </span>
<span  style="">1237                                                                                                          </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1238                 Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();               </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1239                 for (String groupKey : groupMetadataKeySet) {                                            </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1240                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1240                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocesseðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244     }                                                                                                    </span>
<span  style="">1245                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1246     /**                                                                                                  </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1247      * Search for any other tab on the target entity that has the same display value                     </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1248      *  as the value provided tab name.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1249      *                                                                                                   </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style=""><abbr title="1250      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.">1250      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message propeðŸ”µ</abbr></span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1251      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1251      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetaðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style=""><abbr title="1252      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return">1252      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method shoulðŸ”µ</abbr></span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1253      *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1254      *                                                                                                   </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style=""><abbr title="1255      * If a tab with the same display value cannot be found, then we should return null to indicate that there">1255      * If a tab with the same display value cannot be found, then we should return null to indicate that ðŸ”µ</abbr></span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1256      *  is no matching tab with the same processed tabName value.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1257      */                                                                                                  </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style=""><abbr title="1258     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {">1258     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySðŸ”µ</abbr></span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1259         for (String tabKey : tabMetadataKeySet) {                                                        </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1260             String tabName = tabMetadata.getTabName();                                                   </span>
<span  style="">1261                                                                                                          </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1262             if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                        </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1263                 return tabKey;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1264             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265         }                                                                                                </span>
<span  style="">1266                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1267         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268     }                                                                                                    </span>
<span  style="">1269                                                                                                          </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1270     protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1271         try {                                                                                            </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1272             String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);               </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style=""><abbr title="1273             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey);">1273             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateðŸ”µ</abbr></span>
<span  style="">1274                                                                                                          </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style=""><abbr title="1275             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);">1275             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidatðŸ”µ</abbr></span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1276         } catch (NoSuchMessageException e) {                                                             </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1277             LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                               </span>
<span  style="">1278                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1279             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1280         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281     }                                                                                                    </span>
<span  style="">1282                                                                                                          </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1283     protected boolean foundMatchingTab(String unprocessedTabName) {                                      </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1284         return (unprocessedTabName != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285     }                                                                                                    </span>
<span  style="">1286                                                                                                          </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1287     protected boolean tabExists(EntityForm ef, String tabKey) {                                          </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1288         return (ef.findTab(tabKey) != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289     }                                                                                                    </span>
<span  style="">1290                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1291     @Override                                                                                            </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1292     public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {           </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1293         String defaultValue = fmd.getDefaultValue();                                                     </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1294         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                  </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1295                 || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                      </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1296                 || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1297             return null;                                                                                 </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1298         } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1299             try {                                                                                        </span>
<span class="-6644487127041354154" onmouseenter="enter('-6644487127041354154');" onmouseout="out('-6644487127041354154');" style=""><abbr title="1300                 DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestContext.getBroadleafRequestContext().getJavaLocale());">1300                 DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestConðŸ”µ</abbr></span>
<span class="-7607248322995261618" onmouseenter="enter('-7607248322995261618');" onmouseout="out('-7607248322995261618');" style="">1301                 Number parse = numberFormat.parse(defaultValue);                                         </span>
<span class="677906070021081648" onmouseenter="enter('677906070021081648');" onmouseout="out('677906070021081648');" style="">1302             } catch (NumberFormatException | ParseException e) {                                         </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style=""><abbr title="1303                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);">1303                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1304                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1305                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306             }                                                                                            </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1307         } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                               </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1308                 || fieldType.equals(SupportedFieldType.MONEY.toString())) {                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1309             try {                                                                                        </span>
<span class="-6644487127041354154" onmouseenter="enter('-6644487127041354154');" onmouseout="out('-6644487127041354154');" style=""><abbr title="1310                 DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestContext.getBroadleafRequestContext().getJavaLocale());">1310                 DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestConðŸ”µ</abbr></span>
<span class="-3587356773982730962" onmouseenter="enter('-3587356773982730962');" onmouseout="out('-3587356773982730962');" style="">1311                 numberFormat.setParseBigDecimal(true);                                                   </span>
<span class="-7607248322995261618" onmouseenter="enter('-7607248322995261618');" onmouseout="out('-7607248322995261618');" style="">1312                 Number parse = numberFormat.parse(defaultValue);                                         </span>
<span class="677906070021081648" onmouseenter="enter('677906070021081648');" onmouseout="out('677906070021081648');" style="">1313             } catch (NumberFormatException | ParseException e) {                                         </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1314                 String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);        </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1315                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1316                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317             }                                                                                            </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1318         } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                            </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1319             if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)</span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style=""><abbr title="1320                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {">1320                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)ðŸ”µ</abbr></span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style=""><abbr title="1321                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);">1321                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1322                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1323                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324             }                                                                                            </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1325         } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                               </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1326             DateFormat format = FormatUtil.getDateFormat();                                              </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1327             if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                          </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1328                 defaultValue = format.format(new Date());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1329             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1330                 try {                                                                                    </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1331                     Date date = format.parse(defaultValue);                                              </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1332                     defaultValue = format.format(date);                                                  </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1333                 } catch (ParseException e) {                                                             </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1334                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1334                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1335                     LOG.debug(msg);                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1336                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1338             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339         }                                                                                                </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1340         return defaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1341     }                                                                                                    </span>
<span  style="">1342                                                                                                          </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style=""><abbr title="1343     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {">1343     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue)ðŸ”µ</abbr></span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1344         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot; ">1344         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot;ðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style=""><abbr title="1345                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;;">1345                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1346     }                                                                                                    </span>
<span  style="">1347                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1348     @Override                                                                                            </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1349     public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) { </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1350         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1351             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {               </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1352                 entityForm.removeField(p.getName());                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1353             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355     }                                                                                                    </span>
<span  style="">1356                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1357     @Override                                                                                            </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1358     public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)              </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1359             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1360         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1361         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1362         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1363     }                                                                                                    </span>
<span  style="">1364                                                                                                          </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1365     protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {               </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1366         if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                         </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1367             return sectionCrumbs.get(0).getSectionIdentifier();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1368         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1369             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371     }                                                                                                    </span>
<span  style="">1372                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1373     @Override                                                                                            </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1374     public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)   </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1375             throws ServiceException {                                                                    </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1376         ef.setCeilingEntityClassname(cmd.getCeilingType());                                              </span>
<span  style="">1377                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1378         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span  style="">1379                                                                                                          </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style=""><abbr title="1380         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),">1380         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType()ðŸ”µ</abbr></span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1381                 sectionIdentifier);                                                                      </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1382         if (section != null) {                                                                           </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1383             ef.setSectionKey(section.getUrl());                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1384         } else {                                                                                         </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1385             ef.setSectionKey(cmd.getCeilingType());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386         }                                                                                                </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1387         ef.setSectionCrumbsImpl(sectionCrumbs);                                                          </span>
<span  style="">1388                                                                                                          </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1389         setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                    </span>
<span  style="">1390                                                                                                          </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1391         setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                </span>
<span  style="">1392                                                                                                          </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1393         populateDropdownToOneFields(ef, cmd);                                                            </span>
<span  style="">1394                                                                                                          </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1395         extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396     }                                                                                                    </span>
<span  style="">1397                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1398     /**                                                                                                  </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1399      * This method is invoked when EntityForms are created and is meant to provide a hook to add         </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1400      * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically    </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1401      * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.         </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1402      * @param ef                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1403      */                                                                                                  </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1404     protected void addAdditionalFormActions(EntityForm ef) {                                             </span>
<span  style="">1405                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406     }                                                                                                    </span>
<span  style="">1407                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1408     @Override                                                                                            </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style=""><abbr title="1409     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)">1409     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbsðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1410             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1411         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1412         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1413         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1414         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1415         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1416     }                                                                                                    </span>
<span  style="">1417                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1418     @Override                                                                                            </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1419     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1419     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; seðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1420             throws ServiceException {                                                                    </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1421         // Get the empty form with appropriate fields                                                    </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1422         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span  style="">1423                                                                                                          </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1424         String idProperty = adminEntityService.getIdProperty(cmd);                                       </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1425         ef.setId(entity.findProperty(idProperty).getValue());                                            </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1426         ef.setEntityType(entity.getType()[0]);                                                           </span>
<span  style="">1427                                                                                                          </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1428         populateEntityFormFieldValues(cmd, entity, ef);                                                  </span>
<span  style="">1429                                                                                                          </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1430         Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1431         if (p != null) {                                                                                 </span>
<span class="-4711796121260791216" onmouseenter="enter('-4711796121260791216');" onmouseout="out('-4711796121260791216');" style="">1432             ef.setMainEntityName(exploitProtectionService.htmlDecode(p.getValue()));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433         }                                                                                                </span>
<span  style="">1434                                                                                                          </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1435         extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436     }                                                                                                    </span>
<span  style="">1437                                                                                                          </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style=""><abbr title="1438     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {">1438     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef)ðŸ”µ</abbr></span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1439         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1440             FieldMetadata fmd = p.getMetadata();                                                         </span>
<span  style="">1441                                                                                                          </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1442             if (shouldHideField(fmd, entity)) {                                                          </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1443                 if (fmd instanceof CollectionMetadata) {                                                 </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1444                     ef.removeListGrid(p.getName());                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1445                 } else {                                                                                 </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1446                     ef.removeField(p.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450     }                                                                                                    </span>
<span  style="">1451                                                                                                          </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1452     protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1453         if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1454             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455         }                                                                                                </span>
<span  style="">1456                                                                                                          </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1457         for (String property : fmd.getShowIfFieldEquals().keySet()) {                                    </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1458             List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                              </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1459             Property entityProp = entity.findProperty(property);                                         </span>
<span  style="">1460                                                                                                          </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1461             if (entityProp == null || values.contains(entityProp.getValue())) {                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1462                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1463             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1464         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1465         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466     }                                                                                                    </span>
<span  style="">1467                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1468     @Override                                                                                            </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1469     public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {         </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1470         // Set the appropriate property values                                                           </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1471         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1472             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1473                 BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                       </span>
<span  style="">1474                                                                                                          </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1475                 Property entityProp = entity.findProperty(p.getName());                                  </span>
<span  style="">1476                                                                                                          </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style=""><abbr title="1477                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());">1477                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibiliðŸ”µ</abbr></span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1478                 //always show special map fields                                                         </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1479                 if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                       </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1480                     explicitlyShown = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1481                 }                                                                                        </span>
<span  style="">1482                                                                                                          </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1483                 if (entityProp == null &amp;&amp; explicitlyShown) {                                             </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1484                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1485                     if (field != null) {                                                                 </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1486                         field.setValue(null);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487                     }                                                                                    </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1488                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1488                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getEðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1489                     ef.removeField(p.getName());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1490                 } else {                                                                                 </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1491                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1492                     if (field != null) {                                                                 </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1493                         if (entityProp != null) {                                                        </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1494                             //protect against null - can happen with password confirmation fields (i.e. admin user)">1494                             //protect against null - can happen with password confirmation fields (i.e. aðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1495                             field.setDirty(entityProp.getIsDirty());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496                         }                                                                                </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1497                         if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                       </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1498                                 || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME           </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1499                                 || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {      </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1500                             RuleBuilderField rbf = (RuleBuilderField) field;                             </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1501                             if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                  </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1502                                 String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();   </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1503                                 rbf.setJson(json);                                                       </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1504                                 DataWrapper dw = convertJsonToDataWrapper(json);                         </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1505                                 if (dw != null) {                                                        </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1506                                     rbf.setDataWrapper(dw);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1508                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509                         }                                                                                </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1510                         if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                        </span>
<span class="7143722617009606315" onmouseenter="enter('7143722617009606315');" onmouseout="out('7143722617009606315');" style="">1511                             field.setValue(exploitProtectionService.htmlDecode(entityProp.getValue()));  </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1512                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1513                             MediaField mf = (MediaField) field;                                          </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1514                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1514                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.gðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1515                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1515                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodeðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style=""><abbr title="1516                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1516                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldTyðŸ”µ</abbr></span>
<span class="4560611718808942912" onmouseenter="enter('4560611718808942912');" onmouseout="out('4560611718808942912');" style=""><abbr title="1517                             field.setValue((basicFM.isLargeEntry() != null &amp;&amp; basicFM.isLargeEntry()) ? entityProp.getValue() : exploitProtectionService.htmlDecode(entityProp.getValue()));">1517                             field.setValue((basicFM.isLargeEntry() != null &amp;&amp; basicFM.isLargeEntry()) ? eðŸ”µ</abbr></span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1518                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1520                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1524     }                                                                                                    </span>
<span  style="">1525                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1526     /**                                                                                                  </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1527      * When using Thymeleaf, we need to convert the JSON string back to                                  </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1528      * a DataWrapper object because Thymeleaf escapes JSON strings.                                      </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1529      * Thymeleaf uses it&#x27;s own object de-serializer                                                      </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1530      * see: https://github.com/thymeleaf/thymeleaf/issues/84                                             </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1531      * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                 </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1532      * @param json                                                                                       </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1533      * @return DataWrapper                                                                               </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1534      * @throws IOException                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1535      */                                                                                                  </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1536     protected DataWrapper convertJsonToDataWrapper(String json) {                                        </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1537         ObjectMapper mapper = new ObjectMapper();                                                        </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1538         DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                 </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1539         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1539         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, nuðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1540         module.addDeserializer(DataDTO.class, dtoDeserializer);                                          </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1541         mapper.registerModule(module);                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1542         try {                                                                                            </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1543             return mapper.readValue(json, DataWrapper.class);                                            </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1544         } catch (IOException e) {                                                                        </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1545             throw new RuntimeException(e);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547     }                                                                                                    </span>
<span  style="">1548                                                                                                          </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1549     protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1550             throws ServiceException {                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1551         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1552             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1553                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1554                 if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                      </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1555                         &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1556                     // Get the records                                                                   </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1557                     PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()            </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1558                             .withCeilingEntityClassname(fmd.getForeignKeyClass());                       </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style=""><abbr title="1559                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();">1559                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecoðŸ”µ</abbr></span>
<span  style="">1560                                                                                                          </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1561                     // Determine the id field                                                            </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1562                     String idProp = null;                                                                </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1563                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1563                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1564                     for (Property foreignP : foreignClassMd.getProperties()) {                           </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1565                         if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                      </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1566                             BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata(); </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1567                             if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {               </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1568                                 idProp = foreignP.getName();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1571                     }                                                                                    </span>
<span  style="">1572                                                                                                          </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1573                     if (idProp == null) {                                                                </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1574                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1574                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeigðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575                     }                                                                                    </span>
<span  style="">1576                                                                                                          </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1577                     // Determine the display field                                                       </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1578                     String displayProp = fmd.getLookupDisplayProperty();                                 </span>
<span  style="">1579                                                                                                          </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1580                     // Build the options map                                                             </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1581                     Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                       </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1582                     for (Entity row : rows) {                                                            </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1583                         Property prop = row.findProperty(displayProp);                                   </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1584                         if (prop == null) {                                                              </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1585                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; + ">1585                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + ðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1586                                     ef.getCeilingEntityClassname() + &quot;]&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1587                         } else {                                                                         </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1588                             String displayValue = prop.getDisplayValue();                                </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1589                             if (StringUtils.isBlank(displayValue)) {                                     </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1590                                 displayValue = prop.getValue();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1591                             }                                                                            </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1592                             options.put(row.findProperty(idProp).getValue(), displayValue);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594                     }                                                                                    </span>
<span  style="">1595                                                                                                          </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1596                     // Set the options on the entity field                                               </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1597                     ComboField cf = (ComboField) ef.findField(p.getName());                              </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1598                     cf.setOptions(options);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1599                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1602     }                                                                                                    </span>
<span  style="">1603                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1604     @Override                                                                                            </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1605     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1605     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; coðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1606             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1607         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1608         populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                           </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1609         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1610         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1611         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1612     }                                                                                                    </span>
<span  style="">1613                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1614     @Override                                                                                            </span>
<span class="8407616833525381833" onmouseenter="enter('8407616833525381833');" onmouseout="out('8407616833525381833');" style=""><abbr title="1615     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1615     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collecðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1616             throws ServiceException {                                                                    </span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1617         // Get the form with values for this entity                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1618         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span  style="">1619                                                                                                          </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1620         // Attach the sub-collection list grids and specialty UI support                                 </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1621         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1622             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1623                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624             }                                                                                            </span>
<span  style="">1625                                                                                                          </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1626             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1627                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1628             }                                                                                            </span>
<span  style="">1629                                                                                                          </span>
<span class="5057378952086585538" onmouseenter="enter('5057378952086585538');" onmouseout="out('5057378952086585538');" style="">1630             if (collectionRecords != null &amp;&amp; !collectionRecords.isEmpty()) {                             </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1631                 DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());             </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1632                 String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();         </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1633                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1633                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p,ðŸ”µ</abbr></span>
<span  style="">1634                                                                                                          </span>
<span class="-4703142262249660615" onmouseenter="enter('-4703142262249660615');" onmouseout="out('-4703142262249660615');" style="">1635                 CollectionMetadata md = ((CollectionMetadata) p.getMetadata());                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1636                 if (md instanceof BasicCollectionMetadata) {                                             </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style=""><abbr title="1637                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);">1637                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCruðŸ”µ</abbr></span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1638                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1638                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResuðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1639                     if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {              </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1640                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1640                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1641                         ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);     </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1642                         for (ClassTree entityType : entityTypes) {                                       </span>
<span class="-6085370745551409442" onmouseenter="enter('-6085370745551409442');" onmouseout="out('-6085370745551409442');" style="">1643                             ListGridAction ADD = new ListGridAction(ListGridAction.ADD)                  </span>
<span class="-8123842595880337680" onmouseenter="enter('-8123842595880337680');" onmouseout="out('-8123842595880337680');" style="">1644                                     .withButtonClass(AddMethodType.PERSIST_EMPTY==                       </span>
<span class="2458863346051852504" onmouseenter="enter('2458863346051852504');" onmouseout="out('2458863346051852504');" style=""><abbr title="1645                                             ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-empty&quot;:&quot;sub-list-grid-add&quot;)">1645                                             ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-gðŸ”µ</abbr></span>
<span class="625982968125452177" onmouseenter="enter('625982968125452177');" onmouseout="out('625982968125452177');" style="">1646                                     .withActionTargetEntity(entityType.getFullyQualifiedClassname())     </span>
<span class="1979584669038484989" onmouseenter="enter('1979584669038484989');" onmouseout="out('1979584669038484989');" style="">1647                                     .withUrlPostfix(&quot;/add&quot;)                                              </span>
<span class="-2605498948604397141" onmouseenter="enter('-2605498948604397141');" onmouseout="out('-2605498948604397141');" style="">1648                                     .withIconClass(&quot;fa fa-plus&quot;)                                         </span>
<span class="1382163113890128554" onmouseenter="enter('1382163113890128554');" onmouseout="out('1382163113890128554');" style=""><abbr title="1649                                     .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));">1649                                     .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyNamðŸ”µ</abbr></span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1650                             actionGroup.getListGridActions().add(0, ADD);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1651                         }                                                                                </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1652                         listGrid.addToolbarActionGroup(actionGroup);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1653                     } else {                                                                             </span>
<span class="-686829543212379321" onmouseenter="enter('-686829543212379321');" onmouseout="out('-686829543212379321');" style="">1654                         listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY==                </span>
<span class="452604423250167593" onmouseenter="enter('452604423250167593');" onmouseout="out('452604423250167593');" style=""><abbr title="1655                                 ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTY:DefaultListGridActions.ADD);">1655                                 ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1656                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1657                 } else {                                                                                 </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1658                     listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659                 }                                                                                        </span>
<span  style="">1660                                                                                                          </span>
<span class="1698654555130612252" onmouseenter="enter('1698654555130612252');" onmouseout="out('1698654555130612252');" style="">1661                 if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab())!=null) {           </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1662                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1663                 } else {                                                                                 </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1664                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1665                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1667         }                                                                                                </span>
<span  style="">1668                                                                                                          </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1669         if (CollectionUtils.isEmpty(ef.getActions())) {                                                  </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1670             ef.addAction(DefaultEntityFormActions.SAVE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671         }                                                                                                </span>
<span  style="">1672                                                                                                          </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1673         addDeleteActionIfAllowed(ef, cmd, entity);                                                       </span>
<span class="-1573379781634260780" onmouseenter="enter('-1573379781634260780');" onmouseout="out('-1573379781634260780');" style="">1674         addDuplicateActionIfAllowed(ef, cmd);                                                            </span>
<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1675         setReadOnlyState(ef, cmd, entity);                                                               </span>
<span  style="">1676                                                                                                          </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1677         // check for fields that should be hidden based on annotations                                   </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1678         setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                          </span>
<span  style="">1679                                                                                                          </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1680         extensionManager.getProxy().modifyDetailEntityForm(ef);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1681     }                                                                                                    </span>
<span  style="">1682                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1683     /**                                                                                                  </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1684      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1684      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/bðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1685      * delete an entity for the following cases:                                                         </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1686      * &lt;ol&gt;                                                                                              </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style=""><abbr title="1687      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by">1687      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represenðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1688      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1688      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1689      *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the       </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1690      *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1691      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1692      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1693      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1694      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1695      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1696      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1697      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1698      * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1699      */                                                                                                  </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1700     protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {   </span>
<span class="9176849152277833812" onmouseenter="enter('9176849152277833812');" onmouseout="out('9176849152277833812');" style="">1701         if (isDeletionAllowed(entityForm, cmd, entity)) {                                                </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="">1702             entityForm.addAction(DefaultEntityFormActions.DELETE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1703         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704     }                                                                                                    </span>
<span  style="">1705                                                                                                          </span>
<span class="1233024099247846166" onmouseenter="enter('1233024099247846166');" onmouseout="out('1233024099247846166');" style="">1706     protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd,            </span>
<span class="-5681436677530159700" onmouseenter="enter('-5681436677530159700');" onmouseout="out('-5681436677530159700');" style="">1707             final Entity entity) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1708         try {                                                                                            </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1709             String securityEntityClassname = getSecurityClassname(entityForm, cmd);                      </span>
<span class="-1437365640597623792" onmouseenter="enter('-1437365640597623792');" onmouseout="out('-1437365640597623792');" style="">1710             adminRemoteSecurityService                                                                   </span>
<span class="9049592859337879981" onmouseenter="enter('9049592859337879981');" onmouseout="out('9049592859337879981');" style="">1711                     .securityCheck(securityEntityClassname, EntityOperationType.REMOVE);                 </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1712         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1713             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1714                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1716         }                                                                                                </span>
<span  style="">1717                                                                                                          </span>
<span class="-6544480517582328932" onmouseenter="enter('-6544480517582328932');" onmouseout="out('-6544480517582328932');" style="">1718         final AdminUser persistentAdminUser = adminRemoteSecurityService.getPersistentAdminUser();       </span>
<span  style="">1719                                                                                                          </span>
<span class="-4253696723384610596" onmouseenter="enter('-4253696723384610596');" onmouseout="out('-4253696723384610596');" style="">1720         return rowLevelSecurityService.canUpdate(persistentAdminUser, entity)                            </span>
<span class="6878671858526625956" onmouseenter="enter('6878671858526625956');" onmouseout="out('6878671858526625956');" style="">1721                 &amp;&amp; rowLevelSecurityService.canRemove(persistentAdminUser, entity);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722     }                                                                                                    </span>
<span  style="">1723                                                                                                          </span>
<span class="8744244153887540139" onmouseenter="enter('8744244153887540139');" onmouseout="out('8744244153887540139');" style="">1724     protected void addDuplicateActionIfAllowed(final EntityForm entityForm,                              </span>
<span class="7968956867409491481" onmouseenter="enter('7968956867409491481');" onmouseout="out('7968956867409491481');" style="">1725             final ClassMetadata cmd) {                                                                   </span>
<span class="-4074855000497140283" onmouseenter="enter('-4074855000497140283');" onmouseout="out('-4074855000497140283');" style="">1726         if (isDuplicationAllowed(entityForm, cmd)) {                                                     </span>
<span class="6780575287202109079" onmouseenter="enter('6780575287202109079');" onmouseout="out('6780575287202109079');" style="">1727             entityForm.addAction(DefaultEntityFormActions.DUPLICATE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1728         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729     }                                                                                                    </span>
<span  style="">1730                                                                                                          </span>
<span class="2750172847360880677" onmouseenter="enter('2750172847360880677');" onmouseout="out('2750172847360880677');" style="">1731     protected boolean isDuplicationAllowed(final EntityForm entityForm, final ClassMetadata cmd) {       </span>
<span class="5761145246382260648" onmouseenter="enter('5761145246382260648');" onmouseout="out('5761145246382260648');" style="">1732         final String securityClassname = getSecurityClassname(entityForm, cmd);                          </span>
<span  style="">1733                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1734         try {                                                                                            </span>
<span class="7910151490387293712" onmouseenter="enter('7910151490387293712');" onmouseout="out('7910151490387293712');" style="">1735             adminRemoteSecurityService.securityCheck(securityClassname, EntityOperationType.ADD);        </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1736         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1737             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1738                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1739             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1740         }                                                                                                </span>
<span  style="">1741                                                                                                          </span>
<span class="3631252767096747840" onmouseenter="enter('3631252767096747840');" onmouseout="out('3631252767096747840');" style="">1742         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(securityClassname);                   </span>
<span  style="">1743                                                                                                          </span>
<span class="-7591397042021229268" onmouseenter="enter('-7591397042021229268');" onmouseout="out('-7591397042021229268');" style="">1744         return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp;                     </span>
<span class="5950039316725693002" onmouseenter="enter('5950039316725693002');" onmouseout="out('5950039316725693002');" style="">1745                 rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(),      </span>
<span class="-9091740986951777867" onmouseenter="enter('-9091740986951777867');" onmouseout="out('-9091740986951777867');" style="">1746                         securityClassname, cmd);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1747     }                                                                                                    </span>
<span  style="">1748                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1749     /**                                                                                                  </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1750      * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                        </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1751      * &lt;ol&gt;                                                                                              </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1752      *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                  </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1753      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1753      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class namðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1754      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1754      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style=""><abbr title="1755      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the">1755      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to ðŸ”µ</abbr></span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1756      *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1757      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1758      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1759      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1760      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1761      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1762      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1763      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1764      * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1765      */                                                                                                  </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1766     protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {           </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1767         boolean readOnly = true;                                                                         </span>
<span  style="">1768                                                                                                          </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1769         // If all of the fields are read only, we&#x27;ll mark the form as such                               </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1770         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1771             FieldMetadata fieldMetadata = property.getMetadata();                                        </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1772             if (fieldMetadata instanceof BasicFieldMetadata) {                                           </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1773                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1773                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetaðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1774                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1775                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1776                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1777             } else {                                                                                     </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1778                 readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                             </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1779                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1780                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1781                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1782             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783         }                                                                                                </span>
<span  style="">1784                                                                                                          </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1785         if (!readOnly) {                                                                                 </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1786             // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1786             // If the user does not have edit permissions, we will go ahead and make the form read only tðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1787             try {                                                                                        </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1788                 String securityEntityClassname = getSecurityClassname(entityForm, cmd);                  </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style=""><abbr title="1789                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);">1789                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDðŸ”µ</abbr></span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1790             } catch (ServiceException e) {                                                               </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1791                 if (e instanceof SecurityServiceException) {                                             </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1792                     readOnly = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1793                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1794             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1795         }                                                                                                </span>
<span  style="">1796                                                                                                          </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1797         // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1797         // if the normal admin security service has not deemed this readonly and the all of the propertieðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1798         // are not readonly, then check the row-level security                                           </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1799         if (!readOnly) {                                                                                 </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1800             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1800             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUsðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1801         }                                                                                                </span>
<span  style="">1802                                                                                                          </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1803         if (readOnly) {                                                                                  </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1804             entityForm.setReadOnly();                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1805             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1805             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement imðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1806             if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {             </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1807                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1807                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLeveðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1808                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1808                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1809                     for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {  </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1810                         if (modifier.isQualified(data.getModifierType())) {                              </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1811                             modifier.modifyEntityForm(new EntityFormModifierRequest()                    </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1812                                     .withEntityForm(entityForm)                                          </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1813                                     .withConfiguration(data)                                             </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1814                                     .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())</span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1815                                     .withEntity(entity)                                                  </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1816                                     .withRowLevelSecurityService(rowLevelSecurityService));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1817                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1818                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1819                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1820             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1822     }                                                                                                    </span>
<span  style="">1823                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1824     /**                                                                                                  </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1825      * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                 </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1826      * @param entityForm                                                                                 </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1827      * @param cmd                                                                                        </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1828      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1829      */                                                                                                  </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1830     protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                    </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1831         String securityEntityClassname = entityForm.getCeilingEntityClassname();                         </span>
<span  style="">1832                                                                                                          </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1833         if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                        </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1834             securityEntityClassname = cmd.getSecurityCeilingType();                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1835         } else {                                                                                         </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1836             if (entityForm.getDynamicFormInfos() != null) {                                              </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1837                 for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {           </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1838                     if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                      </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1839                         securityEntityClassname = info.getSecurityCeilingClassName();                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1840                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1842                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1843             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1844         }                                                                                                </span>
<span  style="">1845                                                                                                          </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1846         return securityEntityClassname;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1847     }                                                                                                    </span>
<span  style="">1848                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1849     @Override                                                                                            </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1850     public void populateEntityFormFields(EntityForm ef, Entity entity) {                                 </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1851         populateEntityFormFields(ef, entity, true, true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1852     }                                                                                                    </span>
<span  style="">1853                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1854     @Override                                                                                            </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style=""><abbr title="1855     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {">1855     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean popuðŸ”µ</abbr></span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1856         if (populateId) {                                                                                </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1857             ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1858         }                                                                                                </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1859         if (populateType) {                                                                              </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1860             ef.setEntityType(entity.getType()[0]);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1861         }                                                                                                </span>
<span  style="">1862                                                                                                          </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1863         for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                   </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1864             Property entityProp = entity.findProperty(entry.getKey());                                   </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1865             if (entityProp != null) {                                                                    </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1866                 entry.getValue().setValue(entityProp.getValue());                                        </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1867                 entry.getValue().setDisplayValue(entityProp.getDisplayValue());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1868             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1869         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1870     }                                                                                                    </span>
<span  style="">1871                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1872     @Override                                                                                            </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style=""><abbr title="1873     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {">1873     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedLiðŸ”µ</abbr></span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style=""><abbr title="1874         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());">1874         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdPropeðŸ”µ</abbr></span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1875         Property entityProp = entity.findProperty(ef.getIdProperty());                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1876         field.setValue(entityProp.getValue());                                                           </span>
<span  style="">1877                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1878         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1879             field = ef.findField(adornedList.getSortField());                                            </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1880             entityProp = entity.findProperty(adornedList.getSortField());                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1881             if (field != null &amp;&amp; entityProp != null) {                                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1882                 field.setValue(entityProp.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1883             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1884         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1885     }                                                                                                    </span>
<span  style="">1886                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1887     @Override                                                                                            </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1888     public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                              </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1889         Field field = ef.findField(&quot;priorKey&quot;);                                                          </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1890         Property entityProp = entity.findProperty(&quot;key&quot;);                                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1891         if (field != null &amp;&amp; entityProp != null) {                                                       </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1892             field.setValue(entityProp.getValue());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1893         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1894     }                                                                                                    </span>
<span  style="">1895                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1896     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1897     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1897     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style=""><abbr title="1898             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1898             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1899             throws ServiceException {                                                                    </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1900         EntityForm ef = createStandardAdornedEntityForm();                                               </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1901         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1901         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1902     }                                                                                                    </span>
<span  style="">1903                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1904     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1905     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1905     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1906             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1906             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1907             throws ServiceException {                                                                    </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1908         ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                 </span>
<span  style="">1909                                                                                                          </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1910         // Get the metadata for this adorned field                                                       </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1911         PersistencePackageRequest request = PersistencePackageRequest.adorned()                          </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1912                 .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                      </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1913                 .withAdornedList(adornedList)                                                            </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1914                 .withSectionCrumbs(sectionCrumbs);                                                       </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1915         request.setAddOperationInspect(isAdd);                                                           </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1916         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1916         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSðŸ”µ</abbr></span>
<span  style="">1917                                                                                                          </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1918         List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                         </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1919         if (isViewCollectionItem) {                                                                      </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1920             Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1921         } else {                                                                                         </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1922             // We want our entity form to only render the maintained adorned target fields               </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1923             for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1924                 Property p = collectionMetadata.getPMap().get(targetFieldName);                          </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1925                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1925                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadatðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1926                     ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);    </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1927                     entityFormProperties.add(p);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1928                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1929             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1930         }                                                                                                </span>
<span  style="">1931                                                                                                          </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1932         // Set the maintained fields on the form                                                         </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1933         setEntityFormFields(collectionMetadata, ef, entityFormProperties);                               </span>
<span  style="">1934                                                                                                          </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1935         // Add these two additional hidden fields that are required for persistence                      </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1936         Field f = new Field()                                                                            </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1937                 .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1938                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1939                 .withValue(parentId);                                                                    </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1940         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1941                                                                                                          </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1942         f = new Field()                                                                                  </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1943                 .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1944                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1945                 .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                              </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1946         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1947                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1948         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1949             f = new Field()                                                                              </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1950                     .withName(adornedList.getSortField())                                                </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1951                     .withFieldType(SupportedFieldType.HIDDEN.toString());                                </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1952             ef.addHiddenField(collectionMetadata, f);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1953         }                                                                                                </span>
<span  style="">1954                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1955         ef.setParentId(parentId);                                                                        </span>
<span  style="">1956                                                                                                          </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1957         extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                 </span>
<span  style="">1958                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1959         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1960     }                                                                                                    </span>
<span  style="">1961                                                                                                          </span>
<span  style="">1962                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1963     @Override                                                                                            </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1964     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1964     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1965             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1966         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1967         return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1968     }                                                                                                    </span>
<span  style="">1969                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1970     @Override                                                                                            </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1971     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1971     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1972             throws ServiceException {                                                                    </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1973         ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                           </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1974                 .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);        </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1975         ef.setEntityType(foreignKey.getForeignKeyClass());                                               </span>
<span  style="">1976                                                                                                          </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1977         Field keyField;                                                                                  </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1978         if (!mapMd.getForceFreeFormKeys()) {                                                             </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1979             // We will use a combo field to render the key choices                                       </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1980             ComboField temp = new ComboField();                                                          </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1981             temp.withName(&quot;key&quot;)                                                                         </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1982                     .withFieldType(&quot;combo_field&quot;)                                                        </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1983                     .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                        </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1984             if (mapMd.getKeys() != null) {                                                               </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1985                 // The keys can be explicitly set in the annotation...                                   </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1986                 temp.setOptions(mapMd.getKeys());                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1987             } else {                                                                                     </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1988                 // Or they could be based on a different entity                                          </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1989                 PersistencePackageRequest ppr = PersistencePackageRequest.standard()                     </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1990                         .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                 </span>
<span  style="">1991                                                                                                          </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1992                 DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();         </span>
<span  style="">1993                                                                                                          </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1994                 for (Entity entity : drs.getRecords()) {                                                 </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style=""><abbr title="1995                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();">1995                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getVaðŸ”µ</abbr></span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1996                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1996                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayFieldðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1997                     temp.putOption(keyValue, keyDisplayValue);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1998                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1999             }                                                                                            </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">2000             keyField = temp;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2001         } else {                                                                                         </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">2002             keyField = new Field().withName(&quot;key&quot;)                                                       </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">2003                                 .withFieldType(SupportedFieldType.STRING.toString())                     </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">2004                                 .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2005         }                                                                                                </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">2006         keyField.setRequired(true);                                                                      </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">2007         ef.addMapKeyField(cmd, keyField);                                                                </span>
<span  style="">2008                                                                                                          </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">2009         // Set the fields for this form                                                                  </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">2010         List&lt;Property&gt; mapFormProperties;                                                                </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">2011         if (mapMd.isSimpleValue()) {                                                                     </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">2012             ef.setIdProperty(&quot;key&quot;);                                                                     </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">2013             mapFormProperties = new ArrayList&lt;&gt;();                                                       </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">2014             Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                             </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">2015             mapFormProperties.add(valueProp);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2016         } else {                                                                                         </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">2017             String valueClassName = mapStructure.getValueClassName();                                    </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">2018             List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                </span>
<span  style="">2019                                                                                                          </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">2020             mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                     </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">2021             filterMapFormProperties(mapFormProperties, classNames);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2022         }                                                                                                </span>
<span  style="">2023                                                                                                          </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">2024         setEntityFormFields(cmd, ef, mapFormProperties);                                                 </span>
<span  style="">2025                                                                                                          </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">2026         Field f = new Field()                                                                            </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">2027                 .withName(&quot;priorKey&quot;)                                                                    </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">2028                 .withFieldType(SupportedFieldType.HIDDEN.toString());                                    </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">2029         ef.addHiddenField(cmd, f);                                                                       </span>
<span  style="">2030                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">2031         ef.setParentId(parentId);                                                                        </span>
<span  style="">2032                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2033         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2034     }                                                                                                    </span>
<span  style="">2035                                                                                                          </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">2036     protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                   </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">2037         PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);         </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">2038         List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2039         try {                                                                                            </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">2040             Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                          </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">2041             for (Class clazz : mapEntities) {                                                            </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">2042                 classNames.add(clazz.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2043             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">2044         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">2045             classNames.add(valueClassName);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2046         }                                                                                                </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">2047         return classNames;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2048     }                                                                                                    </span>
<span  style="">2049                                                                                                          </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style=""><abbr title="2050     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {">2050     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNameðŸ”µ</abbr></span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">2051         CollectionUtils.filter(mapFormProperties, new Predicate() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2052             @Override                                                                                    </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">2053             public boolean evaluate(Object object) {                                                     </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">2054                 Property p = (Property) object;                                                          </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">2055                 for (String availType : p.getMetadata().getAvailableToTypes()) {                         </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">2056                     if (classNames.contains(availType)) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2057                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2058                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2059                 }                                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2060                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2061             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2062         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2063     }                                                                                                    </span>
<span  style="">2064                                                                                                          </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">2065     protected EntityForm createStandardEntityForm() {                                                    </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2066         EntityForm ef = new EntityForm();                                                                </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">2067         ef.addAction(DefaultEntityFormActions.SAVE);                                                     </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2068         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2069     }                                                                                                    </span>
<span  style="">2070                                                                                                          </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">2071     protected EntityForm createStandardAdornedEntityForm() {                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2072         EntityForm ef = new EntityForm();                                                                </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">2073         ef.addAction(DefaultAdornedEntityFormActions.Add);                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2074         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2075     }                                                                                                    </span>
<span  style="">2076                                                                                                          </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">2077     protected VisibilityEnum[] getGridHiddenVisibilities() {                                             </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">2078         return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2079     }                                                                                                    </span>
<span  style="">2080                                                                                                          </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">2081     protected VisibilityEnum[] getFormHiddenVisibilities() {                                             </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">2082         return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2083     }                                                                                                    </span>
<span  style="">2084                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2085 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18 package org.broadleafcommerce.openadmin.web.service;                                                     </span>
<span  style="">  19                                                                                                          </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  21 import org.apache.commons.collections.Predicate;                                                         </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  22 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  23 import org.apache.commons.lang.BooleanUtils;                                                             </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  24 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  25 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  26 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  27 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  28 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  29 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  30 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  31 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  32 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="">  33 import org.broadleafcommerce.common.i18n.service.TranslationService;                                     </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  34 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  35 import org.broadleafcommerce.common.media.domain.MediaDto;                                               </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  36 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  37 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  38 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  39 import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                      </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  40 import org.broadleafcommerce.common.presentation.client.LookupType;                                      </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  41 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  42 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  43 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="6163854737754492449" onmouseenter="enter('6163854737754492449');" onmouseout="out('6163854737754492449');" style="">  44 import org.broadleafcommerce.common.security.service.ExploitProtectionService;                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  45 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  46 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  47 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  48 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  49 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  50 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  51 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  52 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  53 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  54 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  55 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  56 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  57 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  58 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  59 import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                   </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  60 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  61 import org.broadleafcommerce.openadmin.dto.MapStructure;                                                 </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  62 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  63 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  64 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  65 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  66 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  67 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  68 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  69 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  70 import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                          </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  71 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                       </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  72 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;          </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  73 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                   </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  74 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;              </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  75 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  76 import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;   </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  77 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style="">  78 import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;        </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style="">  79 import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  80 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style="">  81 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;             </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  82 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style="">  83 import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                   </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  84 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  85 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style="">  86 import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style="">  87 import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                           </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style="">  88 import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style="">  89 import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                    </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style="">  90 import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                              </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style="">  91 import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                        </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style="">  92 import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                       </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  93 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  94 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style="">  95 import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                            </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  96 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  97 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style="">  98 import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                              </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style="">  99 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                      </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style=""> 100 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                  </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style=""> 101 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                     </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style=""> 102 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                 </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 103 import org.codehaus.jettison.json.JSONObject;                                                            </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 104 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 105 import org.springframework.context.MessageSource;                                                        </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 106 import org.springframework.context.NoSuchMessageException;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 107 import org.springframework.stereotype.Service;                                                           </span>
<span  style=""> 108                                                                                                          </span>
<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style=""> 109 import com.fasterxml.jackson.core.Version;                                                               </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style=""> 110 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style=""> 111 import com.fasterxml.jackson.databind.module.SimpleModule;                                               </span>
<span  style=""> 112                                                                                                          </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style=""> 113 import java.io.IOException;                                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 114 import java.math.BigDecimal;                                                                             </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style=""> 115 import java.text.DateFormat;                                                                             </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style=""> 116 import java.text.DateFormatSymbols;                                                                      </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style=""> 117 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style=""> 118 import java.text.NumberFormat;                                                                           </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style=""> 119 import java.text.ParseException;                                                                         </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 120 import java.text.SimpleDateFormat;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 121 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 122 import java.util.Arrays;                                                                                 </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 123 import java.util.Collections;                                                                            </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 124 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 125 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 126 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 127 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 128 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 129 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 130 import java.util.Set;                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 132 import javax.annotation.Resource;                                                                        </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style=""> 133 import javax.persistence.ManyToOne;                                                                      </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style=""> 134 import javax.persistence.OneToOne;                                                                       </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 135 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span  style=""> 136                                                                                                          </span>
<span  style=""> 137                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 138 /**                                                                                                      </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 139  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 140  */                                                                                                      </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 141 @Service(&quot;blFormBuilderService&quot;)                                                                         </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 142 public class FormBuilderServiceImpl implements FormBuilderService {                                      </span>
<span  style=""> 143                                                                                                          </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 144     private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                      </span>
<span  style=""> 145                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 146     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 147                                                                                                          </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 148     @Resource(name = &quot;blAdminEntityService&quot;)                                                             </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 149     protected AdminEntityService adminEntityService;                                                     </span>
<span  style=""> 150                                                                                                          </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 151     @Resource (name = &quot;blAdminNavigationService&quot;)                                                        </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 152     protected AdminNavigationService navigationService;                                                  </span>
<span  style=""> 153                                                                                                          </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 154     @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                    </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 155     protected FormBuilderExtensionManager extensionManager;                                              </span>
<span  style=""> 156                                                                                                          </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 157     @Resource(name=&quot;blEntityConfiguration&quot;)                                                              </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 158     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style=""> 159                                                                                                          </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 160     @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                       </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 161     protected SecurityVerifier adminRemoteSecurityService;                                               </span>
<span  style=""> 162                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 163     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 164     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 165                                                                                                          </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 166     @Resource(name = &quot;blMediaBuilderService&quot;)                                                            </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 167     protected MediaBuilderService mediaBuilderService;                                                   </span>
<span  style=""> 168                                                                                                          </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 169     @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                           </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 170     protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                        </span>
<span  style=""> 171                                                                                                          </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 172     @Resource(name = &quot;blAdminNavigationService&quot;)                                                         </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 173     protected AdminNavigationService adminNavigationService;                                             </span>
<span  style=""> 174                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 175     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 176     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 177                                                                                                          </span>
<span class="-8242037663383389708" onmouseenter="enter('-8242037663383389708');" onmouseout="out('-8242037663383389708');" style=""> 178     @Resource(name = &quot;blDynamicEntityDao&quot;)                                                               </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 179     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 180                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 181     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 182     protected LocaleService localeService;                                                               </span>
<span  style=""> 183                                                                                                          </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style=""> 184     @Resource(name = &quot;blTranslationService&quot;)                                                             </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style=""> 185     protected TranslationService translationService;                                                     </span>
<span  style=""> 186                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 187     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 188     protected boolean useTranslationSearch;                                                              </span>
<span  style=""> 189                                                                                                          </span>
<span class="-4708283361541865346" onmouseenter="enter('-4708283361541865346');" onmouseout="out('-4708283361541865346');" style=""> 190     @Resource(name = &quot;blExploitProtectionService&quot;)                                                       </span>
<span class="2624150081163085905" onmouseenter="enter('2624150081163085905');" onmouseout="out('2624150081163085905');" style=""> 191     ExploitProtectionService exploitProtectionService;                                                   </span>
<span  style=""> 192                                                                                                          </span>
<span  style=""> 193                                                                                                          </span>
<span class="8033614225945187624" onmouseenter="enter('8033614225945187624');" onmouseout="out('8033614225945187624');" style=""> 194     protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="-8766489859370232859" onmouseenter="enter('-8766489859370232859');" onmouseout="out('-8766489859370232859');" style=""> 195             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 196     };                                                                                                   </span>
<span  style=""> 197                                                                                                          </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style=""> 198     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style=""> 199             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 200     };                                                                                                   </span>
<span  style=""> 201                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 202     @Override                                                                                            </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 203     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 203     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SeðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 204             throws ServiceException {                                                                    </span>
<span  style=""> 205                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 206         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 207         ListGrid.Type type = ListGrid.Type.MAIN;                                                         </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 208         String idProperty = &quot;id&quot;;                                                                        </span>
<span  style=""> 209                                                                                                          </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 210         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 211         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 212         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 213             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 214                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span  style=""> 215                                                                                                          </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 216                 if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                  </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 217                     idProperty = fmd.getName();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218                 }                                                                                        </span>
<span  style=""> 219                                                                                                          </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 220                 if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                       </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 221                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 222                     Field hf = createHeaderField(p, fmd);                                                </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 223                     headerFields.add(hf);                                                                </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 224                     defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225                 }                                                                                        </span>
<span  style=""> 226                                                                                                          </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 227                 if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                    </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""><abbr title=" 228                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));"> 228                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmdðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231         }                                                                                                </span>
<span  style=""> 232                                                                                                          </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style=""> 233         if (useTranslationSearch) {                                                                      </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style=""> 234             getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235         }                                                                                                </span>
<span  style=""> 236                                                                                                          </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 237         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 237         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, ðŸ”µ</abbr></span>
<span  style=""> 238                                                                                                          </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 239         if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                    </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 240             // Set the first column to be able to link to the main entity                                </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 241             listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 242         } else {                                                                                         </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 243             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 243             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeiðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 244             message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;             </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 245             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246         }                                                                                                </span>
<span  style=""> 247                                                                                                          </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 248         Date c = new Date();                                                                             </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 249         String friendlyName = &quot;listGrid&quot; + c.getTime();                                                  </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 250         // Set up the filter builder params                                                              </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 251         listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 252         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 253         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 254         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 255             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 257         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 258         listGrid.setHideFriendlyName(true);                                                              </span>
<span  style=""> 259                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 260         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 261         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 262         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 263         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 264             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265         }                                                                                                </span>
<span  style=""> 266                                                                                                          </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 267         listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 268         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 269                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 270         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 271                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 272         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style=""><abbr title=" 275     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {"> 275     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFieldsðŸ”µ</abbr></span>
<span  style=""> 276                                                                                                          </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style=""> 277         TranslatedEntity translatedEntity;                                                               </span>
<span  style=""> 278                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 279         try {                                                                                            </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style=""> 280             translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                </span>
<span  style=""> 281                                                                                                          </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style=""> 282             FieldDTO localeField = new FieldDTO();                                                       </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style=""> 283             localeField.setId(&quot;translationLocale&quot;);                                                      </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style=""> 284             localeField.setLabel(&quot;Translation locale&quot;);                                                  </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style=""> 285             localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                  </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style=""> 286             localeField.setInput(&quot;select&quot;);                                                              </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style=""> 287             localeField.setType(&quot;string&quot;);                                                               </span>
<span  style=""> 288                                                                                                          </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title=" 289             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();"> 289             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span  style=""> 290                                                                                                          </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style=""> 291             Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                               </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style=""> 292             for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                        </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style=""> 293                 localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294             }                                                                                            </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style=""> 295             localeField.setValues((new JSONObject(localeMap)).toString());                               </span>
<span  style=""> 296                                                                                                          </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style=""> 297             defaultWrapperFields.add(localeField);                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 298         } catch (Exception e) {                                                                          </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style=""> 299             translatedEntity = null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301     }                                                                                                    </span>
<span  style=""> 302                                                                                                          </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 303     protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {             </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 304         FieldDTO fieldDTO = new FieldDTO();                                                              </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 305         //translate the label to display                                                                 </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 306         String label = field.getFriendlyName();                                                          </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 307         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 308         MessageSource messages = context.getMessageSource();                                             </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 309         if (messages != null) {                                                                          </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 310             label = messages.getMessage(label, null, label, context.getJavaLocale());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311         }                                                                                                </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 312         fieldDTO.setLabel(label);                                                                        </span>
<span  style=""> 313                                                                                                          </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 314         fieldDTO.setId(field.getName());                                                                 </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 315         if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                     </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 316             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 317         } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 318             fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                            </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 319         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 319         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || fieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 320             fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                         </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 321         } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                             </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 322             fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                         </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 323         } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                               </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 324             fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                     </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 325             fieldDTO.setInput(&quot;select&quot;);                                                                 </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 326             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 327             String[][] enumerationValues = fmd.getEnumerationValues ();                                  </span>
<span  style=""> 328                                                                                                          </span>
<span class="-4050759252301789248" onmouseenter="enter('-4050759252301789248');" onmouseout="out('-4050759252301789248');" style=""> 329             //not sure if we need to decode here or not...                                               </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style=""> 330             for(int i=0; i&lt; enumerationValues.length;i++){                                               </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""> 331                 enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332             }                                                                                            </span>
<span  style=""> 333                                                                                                          </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 334             Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                               </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 335             for (int i = 0; i &lt; enumerationValues.length; i++) {                                         </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 336                 enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337             }                                                                                            </span>
<span  style=""> 338                                                                                                          </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 339             fieldDTO.setValues(new JSONObject(enumMap).toString());                                      </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 340         } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                              </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 341             fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                       </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 342             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span  style=""> 343                                                                                                          </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 344             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 344             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 345             if (section != null) {                                                                       </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 346                 String sectionKey = section.getUrl().substring(1);                                       </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 347                 fieldDTO.setSelectizeSectionKey(sectionKey);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 348             } else {                                                                                     </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 349                 fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 351         } else {                                                                                         </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 352             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353         }                                                                                                </span>
<span  style=""> 354                                                                                                          </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 355         return fieldDTO;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356     }                                                                                                    </span>
<span  style=""> 357                                                                                                          </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 358     protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                              </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 359         Field hf;                                                                                        </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 360         if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                        </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 361                 fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                   </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 362                 fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                 </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 363                 fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                       </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 364             hf = new ComboField();                                                                       </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style=""> 365             String[][] enumerationValues = fmd.getEnumerationValues();                                   </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style=""> 366             for(int i=0; i&lt; enumerationValues.length;i++){                                               </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""> 367                 enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368             }                                                                                            </span>
<span class="4899380696599563483" onmouseenter="enter('4899380696599563483');" onmouseout="out('4899380696599563483');" style=""> 369             ((ComboField) hf).setOptions(enumerationValues);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 370         } else {                                                                                         </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 371             hf = new Field();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372         }                                                                                                </span>
<span  style=""> 373                                                                                                          </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 374         hf.withName(p.getName())                                                                         </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""><abbr title=" 375           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())"> 375           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getðŸ”µ</abbr></span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 376           .withOrder(fmd.getGridOrder())                                                                 </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 377           .withColumnWidth(fmd.getColumnWidth())                                                         </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 378           .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                   </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 379           .withForeignKeyClass(fmd.getForeignKeyClass())                                                 </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 380           .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                      </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""><abbr title=" 381           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())"> 381           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClassðŸ”µ</abbr></span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 382           .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 383         String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();            </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 384         hf.setFieldType(fieldType);                                                                      </span>
<span  style=""> 385                                                                                                          </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 386         return hf;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span  style=""> 388                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 389     @Override                                                                                            </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""><abbr title=" 390     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field,"> 390     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property fieðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 391             String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 392             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 393         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 394         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 395         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 396         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 397             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 399         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 399         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 400                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 401         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 402         ListGrid.Type type = null;                                                                       </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 403         boolean editable = false;                                                                        </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 404         boolean sortable = false;                                                                        </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 405         boolean readOnly = false;                                                                        </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 406         boolean hideIdColumn = false;                                                                    </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 407         boolean canFilterAndSort = true;                                                                 </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 408         boolean modalSingleSelectable = false;                                                           </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 409         boolean modalMultiSelectable = false;                                                            </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 410         boolean selectize = false;                                                                       </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 411         boolean isMedia = false;                                                                         </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 412         boolean isLookup = false;                                                                        </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 413         String sortProperty = null;                                                                      </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 414         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 415         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span  style=""> 416                                                                                                          </span>
<span  style=""> 417                                                                                                          </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 418         String idProperty = &quot;id&quot;;                                                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 419         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 420             if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                  </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""><abbr title=" 421                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;"> 421                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;ðŸ”µ</abbr></span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 422                     //make sure it&#x27;s a property for this entity - not an association                     </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 423                     !property.getName().contains(&quot;.&quot;)) {                                                 </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 424                 idProperty = property.getName();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 425                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427         }                                                                                                </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""><abbr title=" 428         // Get the header fields for this list grid. Note that the header fields are different depending on the"> 428         // Get the header fields for this list grid. Note that the header fields are different depending ðŸ”µ</abbr></span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 429         // kind of field this is.                                                                        </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 430         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 431             readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                         </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 432             modalSingleSelectable = true;                                                                </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 433             for (Property p : cmd.getProperties()) {                                                     </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 434                 if (p.getMetadata() instanceof BasicFieldMetadata) {                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 435                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 436                                                                                                          </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 437                     if (SupportedFieldType.ID.equals(md.getFieldType())) {                               </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 438                         idProperty = md.getName();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439                     }                                                                                    </span>
<span  style=""> 440                                                                                                          </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 441                     if (md.isProminent() != null &amp;&amp; md.isProminent()                                     </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 442                             &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {  </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 443                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 444                         headerFields.add(hf);                                                            </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 445                         defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446                     }                                                                                    </span>
<span  style=""> 447                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 448                     if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                  </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 449                         Field f = createHeaderField(p, md);                                              </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 450                         wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453             }                                                                                            </span>
<span  style=""> 454                                                                                                          </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 455             type = ListGrid.Type.TO_ONE;                                                                 </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 456         } else if (fmd instanceof BasicCollectionMetadata) {                                             </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 457             BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                 </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 458             readOnly = !bcm.isMutable();                                                                 </span>
<span  style=""> 459                                                                                                          </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 460             if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                    </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 461                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462             }                                                                                            </span>
<span  style=""> 463                                                                                                          </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 464             if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                         </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 465                 Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                          </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 466                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 467                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 468                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 469                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 470                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 471                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 473             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 474                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 475                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 476                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 477                         if (md.isProminent() != null &amp;&amp; md.isProminent()                                 </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 478                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 478                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility()))ðŸ”µ</abbr></span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 479                             Field hf = createHeaderField(p, md);                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 480                             headerFields.add(hf);                                                        </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 481                             defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482                         }                                                                                </span>
<span  style=""> 483                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 484                         if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                              </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 485                             Field f = createHeaderField(p, md);                                          </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 486                             wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490             }                                                                                            </span>
<span  style=""> 491                                                                                                          </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 492             type = ListGrid.Type.BASIC;                                                                  </span>
<span  style=""> 493                                                                                                          </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 494             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 494             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equalðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 495                 editable = true;                                                                         </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 496             } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                  </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 497                 selectize = true;                                                                        </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 498                 modalSingleSelectable = true;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 499             } else {                                                                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 500                 modalSingleSelectable = true;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501             }                                                                                            </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 502             sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                    </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 503             if (sortable) {                                                                              </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 504                 sortProperty = bcm.getSortProperty();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505             }                                                                                            </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 506         } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 507             modalSingleSelectable = true;                                                                </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 508             readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                             </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 509             AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;               </span>
<span  style=""> 510                                                                                                          </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 511             if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {        </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 512                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513             }                                                                                            </span>
<span  style=""> 514                                                                                                          </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""><abbr title=" 515             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {"> 515             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())ðŸ”µ</abbr></span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 516                 selectize = true;                                                                        </span>
<span  style=""> 517                                                                                                          </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 518                 Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                        </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 519                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 520                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 521                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 522                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 523                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 524                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 526             } else {                                                                                     </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 527                 for (String fieldName : atcmd.getGridVisibleFields()) {                                  </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 528                     Property p = cmd.getPMap().get(fieldName);                                           </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 529                     if (p != null) {                                                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 530                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span  style=""> 531                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 532                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 533                         headerFields.add(hf);                                                            </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 534                         wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535                     }                                                                                    </span>
<span  style=""> 536                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538             }                                                                                            </span>
<span  style=""> 539                                                                                                          </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 540             type = ListGrid.Type.ADORNED;                                                                </span>
<span  style=""> 541                                                                                                          </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 542             if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                   </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 543                 editable = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544             }                                                                                            </span>
<span  style=""> 545                                                                                                          </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 546             AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()        </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""><abbr title=" 547                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);"> 547                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLISðŸ”µ</abbr></span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 548             sortable = StringUtils.isNotBlank(adornedList.getSortField());                               </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 549             if (sortable) {                                                                              </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 550                 sortProperty = adornedList.getSortField();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551             }                                                                                            </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 552         } else if (fmd instanceof MapMetadata) {                                                         </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 553             readOnly = !((MapMetadata) fmd).isMutable();                                                 </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 554             MapMetadata mmd = (MapMetadata) fmd;                                                         </span>
<span  style=""> 555                                                                                                          </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 556             Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                      </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 557             BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                            </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 558             keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                            </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 559             Field hf = createHeaderField(p2, keyMd);                                                     </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 560             headerFields.add(hf);                                                                        </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 561             wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                          </span>
<span  style=""> 562                                                                                                          </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 563             if (mmd.isSimpleValue()) {                                                                   </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 564                 Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                     </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 565                 BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();           </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 566                 valueMd.setFriendlyName(&quot;Value&quot;);                                                        </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 567                 hf = createHeaderField(valueProperty, valueMd);                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 568                 headerFields.add(hf);                                                                    </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 569                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                    </span>
<span  style=""> 570                                                                                                          </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 571                 idProperty = &quot;key&quot;;                                                                      </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 572                 hideIdColumn = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 573             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 574                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 575                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 576                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 577                         String valueClassName = mmd.getValueClassName();                                 </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 578                         if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                        </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 579                             Class&lt;?&gt; clazz;                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 580                             try {                                                                        </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 581                                 clazz = Class.forName(mmd.getValueClassName());                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 582                             } catch (ClassNotFoundException e) {                                         </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 583                                 throw ExceptionHelper.refineException(e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                             }                                                                            </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 585                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 585                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.ðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 586                             ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);            </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 587                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 587                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.clasðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 588                                 valueClassName = manyToOne.targetEntity().getName();                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 589                             } else {                                                                     </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 590                                 OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);           </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 591                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 591                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.clðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 592                                     valueClassName = oneToOne.targetEntity().getName();                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595                         }                                                                                </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 596                         if (md.getTargetClass().equals(valueClassName)) {                                </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 597                             if (md.isProminent() != null &amp;&amp; md.isProminent()                             </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 598                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 598                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibilityðŸ”µ</abbr></span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 599                                 hf = createHeaderField(p, md);                                           </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 600                                 headerFields.add(hf);                                                    </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 601                                 defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));        </span>
<span  style=""> 602                                                                                                          </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 603                                 // Is this a media listgrid                                              </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 604                                 if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                          </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 605                                     isMedia = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607                             }                                                                            </span>
<span  style=""> 608                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 609                             if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                          </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 610                                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615             }                                                                                            </span>
<span  style=""> 616                                                                                                          </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 617             type = ListGrid.Type.MAP;                                                                    </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 618             editable = true;                                                                             </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 619             canFilterAndSort = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620         }                                                                                                </span>
<span  style=""> 621                                                                                                          </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 622         String ceilingType = &quot;&quot;;                                                                         </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 623         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 624             ceilingType = cmd.getCeilingType();                                                          </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 625         } else if (fmd instanceof CollectionMetadata) {                                                  </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 626             ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 627         }                                                                                                </span>
<span  style=""> 628                                                                                                          </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 629         if (CollectionUtils.isEmpty(headerFields)) {                                                     </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 630             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 630             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingTypðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 631                     StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                         </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""><abbr title=" 632             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {"> 632             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) ðŸ”µ</abbr></span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 633                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 633                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTaðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 634             } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {       </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 635                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 635                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 636             } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                       </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 637                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 637                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollectioðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 638             } else {                                                                                     </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 639                 message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640             }                                                                                            </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 641             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642         }                                                                                                </span>
<span  style=""> 643                                                                                                          </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 644         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 644         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrderðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 645         listGrid.setSubCollectionFieldName(field.getName());                                             </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 646         listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                 </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 647         if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                           </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 648             listGrid.setFriendlyName(field.getName());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649         }                                                                                                </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 650         listGrid.setContainingEntityId(containingEntityId);                                              </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 651         listGrid.setIsReadOnly(readOnly);                                                                </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 652         listGrid.setHideIdColumn(hideIdColumn);                                                          </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 653         listGrid.setCanFilterAndSort(canFilterAndSort);                                                  </span>
<span  style=""> 654                                                                                                          </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 655         // Set up the filter builder params                                                              </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 656         Date c = new Date();                                                                             </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 657         String friendlyName = field.getMetadata().getFriendlyName();                                     </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 658         String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                     </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 659         listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                              </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 660         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 661         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 662         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 663             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 665         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span  style=""> 666                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 667         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 668         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 669         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 670         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 671             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672         }                                                                                                </span>
<span  style=""> 673                                                                                                          </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 674         if (editable) {                                                                                  </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 675             listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 676         }                                                                                                </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 677         if (readOnly) {                                                                                  </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 678             listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679         }                                                                                                </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 680         if (sortable) {                                                                                  </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 681             listGrid.setCanFilterAndSort(false);                                                         </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 682             listGrid.setIsSortable(true);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683         }                                                                                                </span>
<span  style=""> 684                                                                                                          </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 685         if (modalSingleSelectable) {                                                                     </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 686             if (readOnly) {                                                                              </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 687                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 687                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 688             } else {                                                                                     </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 689                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                        </span>
<span  style=""> 690                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692         }                                                                                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 693         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 694                                                                                                          </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 695         if (selectize) {                                                                                 </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 696             listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                       </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 697             listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698         }                                                                                                </span>
<span  style=""> 699                                                                                                          </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 700         if (modalMultiSelectable) {                                                                      </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 701             listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                             </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 702             listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703         }                                                                                                </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 704         listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                     </span>
<span  style=""> 705                                                                                                          </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 706         if (fmd.getManualFetch()) {                                                                      </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 707             listGrid.setManualFetch(true);                                                               </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 708             listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709         }                                                                                                </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 710         if (isMedia) {                                                                                   </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 711             listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712         }                                                                                                </span>
<span  style=""> 713                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 714         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 715                                                                                                          </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 716         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 716         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implemðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 717         if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                 </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 718             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 718             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 719             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 719             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguratiðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 720                 for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {      </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 721                     if (modifier.isQualified(data.getModifierType())) {                                  </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 722                         modifier.modifyListGrid(new EntityFormModifierRequest()                          </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 723                                 .withListGrid(listGrid)                                                  </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 724                                 .withConfiguration(data)                                                 </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 725                                 .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())    </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 726                                 .withRowLevelSecurityService(rowLevelSecurityService));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730         }                                                                                                </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 731         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732     }                                                                                                    </span>
<span  style=""> 733                                                                                                          </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 734     protected String getMapKeyFriendlyName(Property property) {                                          </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 735         String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                      </span>
<span  style=""> 736                                                                                                          </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 737         return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738     }                                                                                                    </span>
<span  style=""> 739                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 740     @Override                                                                                            </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 741     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 741     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet dðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 742         String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                             </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 743             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 744         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 745         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 746         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 747         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 748             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 750         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 750         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 751                                                                                                          </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 752         Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                              </span>
<span  style=""> 753                                                                                                          </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 754         AdornedTargetList adornedList = ppr.getAdornedList();                                            </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 755         if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                             </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 756             &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null    </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 757             &amp;&amp; adornedList.getTargetIdProperty() != null) {                                              </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 758             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 758             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkeðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 759             result.put(&quot;linkedObjectId&quot;, containingEntityId);                                            </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 760             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 760             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761         }                                                                                                </span>
<span  style=""> 762                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 763         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764     }                                                                                                    </span>
<span  style=""> 765                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 766     @Override                                                                                            </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 767     public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {    </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 768         Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                    </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 769         List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                           </span>
<span  style=""> 770                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 771         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 772         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 773             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 774                 BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                            </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 775                 if (md.isProminent() != null &amp;&amp; md.isProminent()                                         </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 776                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {      </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 777                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 778                     headerFields.add(hf);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781         }                                                                                                </span>
<span  style=""> 782                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 783         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 784             Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                       </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 785             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 786                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 787                 if (p != null) {                                                                         </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 788                     selectizeOption.put(&quot;name&quot;, p.getValue());                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 789                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791             }                                                                                            </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 792             if (e.findProperty(&quot;id&quot;) != null) {                                                          </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 793                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                              </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 794             //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type  </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 795             } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                           </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 796                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797             }                                                                                            </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 798             if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                         </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 799                 selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800             }                                                                                            </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 801             options.add(selectizeOption);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802         }                                                                                                </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 803         result.put(&quot;options&quot;, options);                                                                  </span>
<span  style=""> 804                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 805         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806     }                                                                                                    </span>
<span  style=""> 807                                                                                                          </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 808     protected String buildSelectizeUrl(ListGrid listGrid) {                                              </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 809         HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();  </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 810         String url = request.getContextPath();                                                           </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 811         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 811         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() :ðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 812         url += &quot;/&quot; + listGrid.getContainingEntityId();                                                   </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 813         url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                               </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 814         return url;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815     }                                                                                                    </span>
<span  style=""> 816                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 817     /**                                                                                                  </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 818      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 818      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, InteðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 819      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 820      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 821      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 822      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 823      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 824      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 825      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 826      * @param sectionCrumbs                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 827      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 828      */                                                                                                  </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 829     @Deprecated                                                                                          </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 830     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 830     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 831             String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {         </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""><abbr title=" 832        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);"> 832        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,nuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833     }                                                                                                    </span>
<span  style=""> 834                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 835     /**                                                                                                  </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 836      * Populate a ListGrid with ListGridRecords.                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 837      *                                                                                                   </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 838      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 839      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 840      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 841      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 842      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 843      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 844      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 845      * @param sectionCrumbs                                                                              </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 846      * @param sortPropery                                                                                </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 847      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 848      */                                                                                                  </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 849     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 849     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 850             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 850             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, StringðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 851         // Create the list grid and set some basic attributes                                            </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 852         ListGrid listGrid = new ListGrid();                                                              </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 853         listGrid.setClassName(className);                                                                </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 854         listGrid.getHeaderFields().addAll(headerFields);                                                 </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 855         listGrid.setListGridType(type);                                                                  </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 856         listGrid.setSectionCrumbs(sectionCrumbs);                                                        </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 857         listGrid.setSectionKey(sectionKey);                                                              </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 858         listGrid.setOrder(order);                                                                        </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 859         listGrid.setIdProperty(idProperty);                                                              </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 860         listGrid.setStartIndex(drs.getStartIndex());                                                     </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 861         listGrid.setTotalRecords(drs.getTotalRecords());                                                 </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 862         listGrid.setPageSize(drs.getPageSize());                                                         </span>
<span  style=""> 863                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 864         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 865         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 865         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 866         if (section != null) {                                                                           </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 867             listGrid.setExternalEntitySectionKey(section.getUrl());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868         }                                                                                                </span>
<span  style=""> 869                                                                                                          </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 870         // format date list grid cells                                                                   </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 871         SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                          </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 872         DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                          </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 873         symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                             </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 874         formatter.setDateFormatSymbols(symbols);                                                         </span>
<span  style=""> 875                                                                                                          </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 876         // For each of the entities (rows) in the list grid, we need to build the associated             </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 877         // ListGridRecord and set the required fields on the record. These fields are the same ones      </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 878         // that are used for the header fields.                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 879         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 880             ListGridRecord record = new ListGridRecord();                                                </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 881             record.setListGrid(listGrid);                                                                </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 882             record.setDirty(e.isDirty());                                                                </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 883             record.setEntity(e);                                                                         </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 884             if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {            </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 885                 Property sort = e.findProperty(sortPropery);                                             </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 886                 record.setDisplayOrder(sort.getValue());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887             }                                                                                            </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 888             if (e.findProperty(&quot;hasError&quot;) != null) {                                                    </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 889                 Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());          </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 890                 record.setIsError(hasError);                                                             </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 891                 if (hasError) {                                                                          </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 892                     ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager        </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 893                             .getProxy().determineErrorMessageForEntity(e, record);                       </span>
<span  style=""> 894                                                                                                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 895                     if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {             </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 896                         record.setErrorKey(&quot;listgrid.record.error&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899             }                                                                                            </span>
<span  style=""> 900                                                                                                          </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 901             if (e.findProperty(&quot;progressStatus&quot;) != null) {                                              </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 902                 ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager            </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 903                         .getProxy().determineStatusMessageForEntity(e, record);                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 904                 if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                 </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 905                     record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                       </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 906                     record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 907                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908             }                                                                                            </span>
<span  style=""> 909                                                                                                          </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 910             if (e.findProperty(idProperty) != null) {                                                    </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 911                 record.setId(e.findProperty(idProperty).getValue());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 912             }                                                                                            </span>
<span  style=""> 913                                                                                                          </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 914             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 915                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 916                 if (p != null) {                                                                         </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 917                     Field recordField = new Field().withName(headerField.getName())                      </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 918                             .withFriendlyName(headerField.getFriendlyName())                             </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 919                             .withOrder(p.getMetadata().getOrder());                                      </span>
<span  style=""> 920                                                                                                          </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 921                     if (headerField instanceof ComboField) {                                             </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 922                         recordField.setValue(((ComboField) headerField).getOption(p.getValue()));        </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 923                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 924                     } else {                                                                             </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 925                         if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 926                             try {                                                                        </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""><abbr title=" 927                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());"> 927                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue(ðŸ”µ</abbr></span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 928                                 String newValue = formatter.format(date);                                </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 929                                 recordField.setValue(newValue);                                          </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 930                             } catch (Exception ex) {                                                     </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 931                                 recordField.setValue(p.getValue());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932                             }                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 933                         } else {                                                                         </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 934                             recordField.setValue(p.getValue());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935                         }                                                                                </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 936                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937                     }                                                                                    </span>
<span  style=""> 938                                                                                                          </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 939                     recordField.setDerived(isDerivedField(headerField, recordField, p));                 </span>
<span  style=""> 940                                                                                                          </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 941                     record.getFields().add(recordField);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 942                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943             }                                                                                            </span>
<span  style=""> 944                                                                                                          </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 945             if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                     </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 946                 Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);     </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""><abbr title=" 947                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());"> 947                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue()ðŸ”µ</abbr></span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 948                 record.getHiddenFields().add(hiddenField);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949             }                                                                                            </span>
<span  style=""> 950                                                                                                          </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 951             if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                  </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 952                 record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953             }                                                                                            </span>
<span  style=""> 954                                                                                                          </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 955             extensionManager.getProxy().modifyListGridRecord(className, record, e);                      </span>
<span  style=""> 956                                                                                                          </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 957             listGrid.getRecords().add(record);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958         }                                                                                                </span>
<span  style=""> 959                                                                                                          </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 960         if (drs.getFirstId() != null) {                                                                  </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 961             listGrid.setFirstId(drs.getFirstId());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962         }                                                                                                </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 963         if (drs.getLastId() != null) {                                                                   </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 964             listGrid.setLastId(drs.getLastId());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965         }                                                                                                </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 966         if (drs.getUpperCount() != null) {                                                               </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 967             listGrid.setUpperCount(drs.getUpperCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968         }                                                                                                </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 969         if (drs.getLowerCount() != null) {                                                               </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 970             listGrid.setLowerCount(drs.getLowerCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971         }                                                                                                </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 972         if (drs.getFetchType() != null) {                                                                </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 973             listGrid.setFetchType(drs.getFetchType().toString());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974         }                                                                                                </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 975         if (drs.getTotalCountLessThanPageSize() != null) {                                               </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 976             listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977         }                                                                                                </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 978         if (drs.getPromptSearch() != null) {                                                             </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 979             listGrid.setPromptSearch(drs.getPromptSearch());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980         }                                                                                                </span>
<span  style=""> 981                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 982         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983     }                                                                                                    </span>
<span  style=""> 984                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 985     /**                                                                                                  </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 986      * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 986      * Determines whether or not a particular field in a record is derived. By default this checks the {@ðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 987      * for the given Property to see if something on the backend has marked it as derived                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 988      *                                                                                                   </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 989      * @param headerField the header for this recordField                                                </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 990      * @param recordField the recordField being populated                                                </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 991      * @param p the property that relates to this recordField                                            </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 992      * @return whether or not this field is derived                                                      </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 993      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 993      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StringðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 994      */                                                                                                  </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 995     protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                 </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 996         return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 997     }                                                                                                    </span>
<span  style=""> 998                                                                                                          </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 999     protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {    </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style="">1000         List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                  </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style="">1001         List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                          </span>
<span  style="">1002                                                                                                          </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style="">1003         for (Property property : properties) {                                                           </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style="">1004             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style="">1005                 BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                    </span>
<span  style="">1006                                                                                                          </span>
<span  style="">1007                                                                                                          </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style="">1008                 if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {            </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""><abbr title="1009                     // Depending on visibility, field for the particular property is not created on the form">1009                     // Depending on visibility, field for the particular property is not created on the fðŸ”µ</abbr></span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style="">1010                     String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();</span>
<span  style="">1011                                                                                                          </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style="">1012                     // Create the field and set some basic attributes                                    </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style="">1013                     Field f;                                                                             </span>
<span  style="">1014                                                                                                          </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style="">1015                     if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())            </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style="">1016                             || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())      </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style="">1017                             || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())   </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style="">1018                             || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {      </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title="1019                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values">1019                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possiðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1020                         f = new ComboField();                                                            </span>
<span  style="">1021                                                                                                          </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style="">1022                         String[][] enumerationValues = fmd.getEnumerationValues();                       </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style="">1023                         for(int i=0; i&lt; enumerationValues.length;i++){                                   </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""><abbr title="1024                             enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);">1024                             enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1025                         }                                                                                </span>
<span class="5476416629756612876" onmouseenter="enter('5476416629756612876');" onmouseout="out('5476416629756612876');" style="">1026                         ((ComboField) f).setOptions(enumerationValues);                                  </span>
<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title="1027                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()">1027                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().boðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style="">1028                                 &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                          </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1029                             f.setIsVisible(false);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1030                         }                                                                                </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style="">1031                     } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                   </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style="">1032                         f = new CodeField();                                                             </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style="">1033                     } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())               </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1034                             || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())          </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1035                             || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {     </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style="">1036                         // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields    </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style="">1037                         f = new RuleBuilderField();                                                      </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style="">1038                         ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);            </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style="">1039                         ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                        </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style="">1040                         ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                 </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style="">1041                         ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());          </span>
<span  style="">1042                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style="">1043                         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                       </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style="">1044                         ((RuleBuilderField) f).setJson(blankJsonString);                                 </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1045                         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1046                         if (dw != null) {                                                                </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style="">1047                             ((RuleBuilderField) f).setDataWrapper(dw);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048                         }                                                                                </span>
<span  style="">1049                                                                                                          </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1050                         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {               </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style="">1051                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                   </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1052                         } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) { </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style="">1053                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);            </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1054                         } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {   </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style="">1055                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056                         }                                                                                </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1057                     } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                        </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1058                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a">1058                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1059                         // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1059                         // modal, so we&#x27;ll provision the combo field here. Available options will be set ðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1060                         // subsequent operation                                                          </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1061                         f = new ComboField();                                                            </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1062                     } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                  </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1063                         f = new MediaField();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1064                     } else {                                                                             </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1065                         // Create a default field since there was no specialized handler                 </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1066                         f = new Field();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067                     }                                                                                    </span>
<span  style="">1068                                                                                                          </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1069                     Boolean required = fmd.getRequiredOverride();                                        </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1070                     if (required == null) {                                                              </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1071                         required = fmd.getRequired();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072                     }                                                                                    </span>
<span  style="">1073                                                                                                          </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1074                     Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                          </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1075                     if (allowNoValueEnum != null) {                                                      </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1076                         f.setAllowNoValueEnumOption(allowNoValueEnum);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077                     }                                                                                    </span>
<span  style="">1078                                                                                                          </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1079                     f.withName(property.getName())                                                       </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1080                      .withFieldType(fieldType)                                                           </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1081                      .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                         </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1082                      .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                 </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1083                      .withOrder(fmd.getOrder())                                                          </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1084                      .withFriendlyName(fmd.getFriendlyName())                                            </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1085                      .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())        </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1086                      .withForeignKeyClass(fmd.getForeignKeyClass())                                      </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1087                      .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))           </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1088                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1088                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheriðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1089                      .withRequired(required)                                                             </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1090                      .withReadOnly(fmd.getReadOnly())                                                    </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1091                      .withTranslatable(fmd.getTranslatable())                                            </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style=""><abbr title="1092                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))">1092                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDðŸ”µ</abbr></span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1093                      .withLargeEntry(fmd.isLargeEntry())                                                 </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1094                      .withHint(fmd.getHint())                                                            </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1095                      .withTooltip(fmd.getTooltip())                                                      </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1096                      .withHelp(fmd.getHelpText())                                                        </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1097                      .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                               </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1098                      .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                      </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1099                      .withAssociatedFieldName(fmd.getAssociatedFieldName());                             </span>
<span  style="">1100                                                                                                          </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1101                     String defaultValue = fmd.getDefaultValue();                                         </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1102                     if (defaultValue != null) {                                                          </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1103                         defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                 </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1104                         f.withValue(defaultValue);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105                     }                                                                                    </span>
<span  style="">1106                                                                                                          </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1107                     if (StringUtils.isBlank(f.getFriendlyName())) {                                      </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1108                         f.setFriendlyName(f.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109                     }                                                                                    </span>
<span  style="">1110                                                                                                          </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1111                     // If is form hidden, set visible to false                                           </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1112                     if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {             </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1113                         f.setIsVisible(false);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114                     }                                                                                    </span>
<span  style="">1115                                                                                                          </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1116                     if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                        </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1117                         f.setIsVisible(true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1118                     }                                                                                    </span>
<span  style="">1119                                                                                                          </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1120                     // Add the field to the appropriate FieldGroup                                       </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1121                     if (fmd.getGroup() == null) {                                                        </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1122                         homelessFields.add(f);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1123                     } else {                                                                             </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style=""><abbr title="1124                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());">1124                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125                     }                                                                                    </span>
<span  style="">1126                                                                                                          </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1127                     if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                          </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1128                         fieldsWithAssociations.add(f);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132         }                                                                                                </span>
<span  style="">1133                                                                                                          </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1134         for (Field f : homelessFields) {                                                                 </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1135             ef.addField(cmd, f, null, null, null, null);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136         }                                                                                                </span>
<span  style="">1137                                                                                                          </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1138         for (Field f : fieldsWithAssociations) {                                                         </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1139             Field associatedField = findAssociatedField(ef, f);                                          </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1140             if (associatedField != null) {                                                               </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1141                 associatedField.setShouldRender(false);                                                  </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1142                 f.setAssociatedFieldName(associatedField.getName());                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1143             } else {                                                                                     </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1144                 f.setAssociatedFieldName(null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147     }                                                                                                    </span>
<span  style="">1148                                                                                                          </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1149     protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                 </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1150         if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                           </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1151             return fmd.getFieldComponentRendererTemplate();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152         }                                                                                                </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1153         return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154     }                                                                                                    </span>
<span  style="">1155                                                                                                          </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1156     protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                             </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1157         if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                       </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1158             return fmd.getGridFieldComponentRendererTemplate();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159         }                                                                                                </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style=""><abbr title="1160         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();">1160         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toStrinðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1161     }                                                                                                    </span>
<span  style="">1162                                                                                                          </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1163     private Field findAssociatedField(EntityForm ef, Field f) {                                          </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1164         // Try on the parent object                                                                      </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1165         Field associatedField = ef.findField(f.getAssociatedFieldName());                                </span>
<span  style="">1166                                                                                                          </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1167         if (associatedField == null) {                                                                   </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1168             // Check the field&#x27;s path                                                                    </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1169             String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                          </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1170             String testPath = &quot;&quot;;                                                                        </span>
<span  style="">1171                                                                                                          </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1172             for (String path : fieldPathParts) {                                                         </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1173                 testPath += path + &quot;.&quot;;                                                                  </span>
<span  style="">1174                                                                                                          </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1175                 associatedField = ef.findField(testPath + f.getAssociatedFieldName());                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1176                 if (associatedField != null) {                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1177                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1178                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180         }                                                                                                </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1181         return associatedField;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1182     }                                                                                                    </span>
<span  style="">1183                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1184     /**                                                                                                  </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1185      * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,</span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1186      * it returns the foreignKeyClass.                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1187      *                                                                                                   </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1188      * @param foreignKeyClass the {@link String} class name                                              </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1189      * @return the admin section pathname                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1190      */                                                                                                  </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1191     protected String getAdminSectionPath(String foreignKeyClass) {                                       </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1192         if (foreignKeyClass != null) {                                                                   </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1193             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1193             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(fðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1194             return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1196         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197     }                                                                                                    </span>
<span  style="">1198                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1199     /**                                                                                                  </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1200      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1200      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} iðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1201      *  the processed value of another tab.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1202      *                                                                                                   </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1203      * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where       </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style=""><abbr title="1204      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,">1204      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=ExamðŸ”µ</abbr></span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style=""><abbr title="1205      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.">1205      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; taðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1206      */                                                                                                  </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1207     protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {  </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1208         if (tabMetadataMap != null) {                                                                    </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1209             Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                     </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1210             for (String tabKey : tabMetadataKeySet) {                                                    </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1211                 TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                    </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style=""><abbr title="1212                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);">1212                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySeðŸ”µ</abbr></span>
<span  style="">1213                                                                                                          </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1214                 if (foundMatchingTab(unprocessedTabName)) {                                              </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1215                     if (!tabExists(ef, unprocessedTabName)) {                                            </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1216                         TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);        </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1217                         unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1218                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1219                 } else {                                                                                 </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1220                     if (tabExists(ef, tabKey)) {                                                         </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1221                         unprocessedTabName = tabKey;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1222                     } else {                                                                             </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1223                         unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225                 }                                                                                        </span>
<span  style="">1226                                                                                                          </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1227                 Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();               </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1228                 for (String groupKey : groupMetadataKeySet) {                                            </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1229                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1229                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocesseðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233     }                                                                                                    </span>
<span  style="">1234                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1235     /**                                                                                                  </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1236      * Search for any other tab on the target entity that has the same display value                     </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1237      *  as the value provided tab name.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1238      *                                                                                                   </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style=""><abbr title="1239      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.">1239      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message propeðŸ”µ</abbr></span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1240      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1240      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetaðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style=""><abbr title="1241      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return">1241      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method shoulðŸ”µ</abbr></span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1242      *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1243      *                                                                                                   </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style=""><abbr title="1244      * If a tab with the same display value cannot be found, then we should return null to indicate that there">1244      * If a tab with the same display value cannot be found, then we should return null to indicate that ðŸ”µ</abbr></span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1245      *  is no matching tab with the same processed tabName value.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1246      */                                                                                                  </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style=""><abbr title="1247     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {">1247     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySðŸ”µ</abbr></span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1248         for (String tabKey : tabMetadataKeySet) {                                                        </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1249             String tabName = tabMetadata.getTabName();                                                   </span>
<span  style="">1250                                                                                                          </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1251             if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                        </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1252                 return tabKey;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254         }                                                                                                </span>
<span  style="">1255                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1256         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257     }                                                                                                    </span>
<span  style="">1258                                                                                                          </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1259     protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1260         try {                                                                                            </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1261             String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);               </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style=""><abbr title="1262             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey);">1262             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateðŸ”µ</abbr></span>
<span  style="">1263                                                                                                          </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style=""><abbr title="1264             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);">1264             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidatðŸ”µ</abbr></span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1265         } catch (NoSuchMessageException e) {                                                             </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1266             LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                               </span>
<span  style="">1267                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1268             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1269         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270     }                                                                                                    </span>
<span  style="">1271                                                                                                          </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1272     protected boolean foundMatchingTab(String unprocessedTabName) {                                      </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1273         return (unprocessedTabName != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274     }                                                                                                    </span>
<span  style="">1275                                                                                                          </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1276     protected boolean tabExists(EntityForm ef, String tabKey) {                                          </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1277         return (ef.findTab(tabKey) != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278     }                                                                                                    </span>
<span  style="">1279                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1280     @Override                                                                                            </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1281     public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {           </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1282         String defaultValue = fmd.getDefaultValue();                                                     </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1283         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                  </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1284                 || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                      </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1285                 || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1286             return null;                                                                                 </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1287         } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1288             try {                                                                                        </span>
<span class="-6644487127041354154" onmouseenter="enter('-6644487127041354154');" onmouseout="out('-6644487127041354154');" style=""><abbr title="1289                 DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestContext.getBroadleafRequestContext().getJavaLocale());">1289                 DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestConðŸ”µ</abbr></span>
<span class="-7607248322995261618" onmouseenter="enter('-7607248322995261618');" onmouseout="out('-7607248322995261618');" style="">1290                 Number parse = numberFormat.parse(defaultValue);                                         </span>
<span class="677906070021081648" onmouseenter="enter('677906070021081648');" onmouseout="out('677906070021081648');" style="">1291             } catch (NumberFormatException | ParseException e) {                                         </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style=""><abbr title="1292                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);">1292                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1293                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1294                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295             }                                                                                            </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1296         } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                               </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1297                 || fieldType.equals(SupportedFieldType.MONEY.toString())) {                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1298             try {                                                                                        </span>
<span class="-6644487127041354154" onmouseenter="enter('-6644487127041354154');" onmouseout="out('-6644487127041354154');" style=""><abbr title="1299                 DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestContext.getBroadleafRequestContext().getJavaLocale());">1299                 DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestConðŸ”µ</abbr></span>
<span class="-3587356773982730962" onmouseenter="enter('-3587356773982730962');" onmouseout="out('-3587356773982730962');" style="">1300                 numberFormat.setParseBigDecimal(true);                                                   </span>
<span class="-7607248322995261618" onmouseenter="enter('-7607248322995261618');" onmouseout="out('-7607248322995261618');" style="">1301                 Number parse = numberFormat.parse(defaultValue);                                         </span>
<span class="677906070021081648" onmouseenter="enter('677906070021081648');" onmouseout="out('677906070021081648');" style="">1302             } catch (NumberFormatException | ParseException e) {                                         </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1303                 String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);        </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1304                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1305                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306             }                                                                                            </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1307         } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                            </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1308             if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)</span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style=""><abbr title="1309                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {">1309                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)ðŸ”µ</abbr></span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style=""><abbr title="1310                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);">1310                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1311                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1312                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313             }                                                                                            </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1314         } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                               </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1315             DateFormat format = FormatUtil.getDateFormat();                                              </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1316             if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                          </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1317                 defaultValue = format.format(new Date());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1318             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1319                 try {                                                                                    </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1320                     Date date = format.parse(defaultValue);                                              </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1321                     defaultValue = format.format(date);                                                  </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1322                 } catch (ParseException e) {                                                             </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1323                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1323                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1324                     LOG.debug(msg);                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1325                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1326                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328         }                                                                                                </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1329         return defaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330     }                                                                                                    </span>
<span  style="">1331                                                                                                          </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style=""><abbr title="1332     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {">1332     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue)ðŸ”µ</abbr></span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1333         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot;">1333         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot;ðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style=""><abbr title="1334                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;;">1334                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335     }                                                                                                    </span>
<span  style="">1336                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1337     @Override                                                                                            </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1338     public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) { </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1339         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1340             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {               </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1341                 entityForm.removeField(p.getName());                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1342             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344     }                                                                                                    </span>
<span  style="">1345                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1346     @Override                                                                                            </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1347     public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)              </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1348             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1349         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1350         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1351         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352     }                                                                                                    </span>
<span  style="">1353                                                                                                          </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1354     protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {               </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1355         if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                         </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1356             return sectionCrumbs.get(0).getSectionIdentifier();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1357         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1358             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360     }                                                                                                    </span>
<span  style="">1361                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1362     @Override                                                                                            </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1363     public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)   </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1364             throws ServiceException {                                                                    </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1365         ef.setCeilingEntityClassname(cmd.getCeilingType());                                              </span>
<span  style="">1366                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1367         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span  style="">1368                                                                                                          </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style=""><abbr title="1369         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),">1369         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType()ðŸ”µ</abbr></span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1370                 sectionIdentifier);                                                                      </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1371         if (section != null) {                                                                           </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1372             ef.setSectionKey(section.getUrl());                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1373         } else {                                                                                         </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1374             ef.setSectionKey(cmd.getCeilingType());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375         }                                                                                                </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1376         ef.setSectionCrumbsImpl(sectionCrumbs);                                                          </span>
<span  style="">1377                                                                                                          </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1378         setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                    </span>
<span  style="">1379                                                                                                          </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1380         setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                </span>
<span  style="">1381                                                                                                          </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1382         populateDropdownToOneFields(ef, cmd);                                                            </span>
<span  style="">1383                                                                                                          </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1384         extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385     }                                                                                                    </span>
<span  style="">1386                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1387     /**                                                                                                  </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1388      * This method is invoked when EntityForms are created and is meant to provide a hook to add         </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1389      * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically    </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1390      * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.         </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1391      * @param ef                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1392      */                                                                                                  </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1393     protected void addAdditionalFormActions(EntityForm ef) {                                             </span>
<span  style="">1394                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395     }                                                                                                    </span>
<span  style="">1396                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1397     @Override                                                                                            </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style=""><abbr title="1398     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)">1398     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbsðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1399             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1400         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1401         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1402         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1403         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1404         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1405     }                                                                                                    </span>
<span  style="">1406                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1407     @Override                                                                                            </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1408     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1408     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; seðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1409             throws ServiceException {                                                                    </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1410         // Get the empty form with appropriate fields                                                    </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1411         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span  style="">1412                                                                                                          </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1413         String idProperty = adminEntityService.getIdProperty(cmd);                                       </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1414         ef.setId(entity.findProperty(idProperty).getValue());                                            </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1415         ef.setEntityType(entity.getType()[0]);                                                           </span>
<span  style="">1416                                                                                                          </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1417         populateEntityFormFieldValues(cmd, entity, ef);                                                  </span>
<span  style="">1418                                                                                                          </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1419         Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1420         if (p != null) {                                                                                 </span>
<span class="-4711796121260791216" onmouseenter="enter('-4711796121260791216');" onmouseout="out('-4711796121260791216');" style="">1421             ef.setMainEntityName(exploitProtectionService.htmlDecode(p.getValue()));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422         }                                                                                                </span>
<span  style="">1423                                                                                                          </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1424         extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425     }                                                                                                    </span>
<span  style="">1426                                                                                                          </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style=""><abbr title="1427     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {">1427     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef)ðŸ”µ</abbr></span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1428         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1429             FieldMetadata fmd = p.getMetadata();                                                         </span>
<span  style="">1430                                                                                                          </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1431             if (shouldHideField(fmd, entity)) {                                                          </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1432                 if (fmd instanceof CollectionMetadata) {                                                 </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1433                     ef.removeListGrid(p.getName());                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1434                 } else {                                                                                 </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1435                     ef.removeField(p.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439     }                                                                                                    </span>
<span  style="">1440                                                                                                          </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1441     protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1442         if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1443             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444         }                                                                                                </span>
<span  style="">1445                                                                                                          </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1446         for (String property : fmd.getShowIfFieldEquals().keySet()) {                                    </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1447             List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                              </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1448             Property entityProp = entity.findProperty(property);                                         </span>
<span  style="">1449                                                                                                          </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1450             if (entityProp == null || values.contains(entityProp.getValue())) {                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1451                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1454         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455     }                                                                                                    </span>
<span  style="">1456                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1457     @Override                                                                                            </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1458     public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {         </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1459         // Set the appropriate property values                                                           </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1460         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1461             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1462                 BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                       </span>
<span  style="">1463                                                                                                          </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1464                 Property entityProp = entity.findProperty(p.getName());                                  </span>
<span  style="">1465                                                                                                          </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style=""><abbr title="1466                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());">1466                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibiliðŸ”µ</abbr></span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1467                 //always show special map fields                                                         </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1468                 if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                       </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1469                     explicitlyShown = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                 }                                                                                        </span>
<span  style="">1471                                                                                                          </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1472                 if (entityProp == null &amp;&amp; explicitlyShown) {                                             </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1473                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1474                     if (field != null) {                                                                 </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1475                         field.setValue(null);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476                     }                                                                                    </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1477                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1477                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getEðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1478                     ef.removeField(p.getName());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1479                 } else {                                                                                 </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1480                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1481                     if (field != null) {                                                                 </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1482                         if (entityProp != null) {                                                        </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1483                             //protect against null - can happen with password confirmation fields (i.e. admin user)">1483                             //protect against null - can happen with password confirmation fields (i.e. aðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1484                             field.setDirty(entityProp.getIsDirty());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1485                         }                                                                                </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1486                         if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                       </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1487                                 || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME           </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1488                                 || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {      </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1489                             RuleBuilderField rbf = (RuleBuilderField) field;                             </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1490                             if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                  </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1491                                 String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();   </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1492                                 rbf.setJson(json);                                                       </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1493                                 DataWrapper dw = convertJsonToDataWrapper(json);                         </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1494                                 if (dw != null) {                                                        </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1495                                     rbf.setDataWrapper(dw);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498                         }                                                                                </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1499                         if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                        </span>
<span class="7143722617009606315" onmouseenter="enter('7143722617009606315');" onmouseout="out('7143722617009606315');" style="">1500                             field.setValue(exploitProtectionService.htmlDecode(entityProp.getValue()));  </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1501                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1502                             MediaField mf = (MediaField) field;                                          </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1503                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1503                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.gðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1504                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1504                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodeðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style=""><abbr title="1505                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1505                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldTyðŸ”µ</abbr></span>
<span class="4560611718808942912" onmouseenter="enter('4560611718808942912');" onmouseout="out('4560611718808942912');" style=""><abbr title="1506                             field.setValue((basicFM.isLargeEntry() != null &amp;&amp; basicFM.isLargeEntry()) ? entityProp.getValue() : exploitProtectionService.htmlDecode(entityProp.getValue()));">1506                             field.setValue((basicFM.isLargeEntry() != null &amp;&amp; basicFM.isLargeEntry()) ? eðŸ”µ</abbr></span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1507                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1508                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1513     }                                                                                                    </span>
<span  style="">1514                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1515     /**                                                                                                  </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1516      * When using Thymeleaf, we need to convert the JSON string back to                                  </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1517      * a DataWrapper object because Thymeleaf escapes JSON strings.                                      </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1518      * Thymeleaf uses it&#x27;s own object de-serializer                                                      </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1519      * see: https://github.com/thymeleaf/thymeleaf/issues/84                                             </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1520      * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                 </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1521      * @param json                                                                                       </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1522      * @return DataWrapper                                                                               </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1523      * @throws IOException                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1524      */                                                                                                  </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1525     protected DataWrapper convertJsonToDataWrapper(String json) {                                        </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1526         ObjectMapper mapper = new ObjectMapper();                                                        </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1527         DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                 </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1528         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1528         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, nuðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1529         module.addDeserializer(DataDTO.class, dtoDeserializer);                                          </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1530         mapper.registerModule(module);                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1531         try {                                                                                            </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1532             return mapper.readValue(json, DataWrapper.class);                                            </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1533         } catch (IOException e) {                                                                        </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1534             throw new RuntimeException(e);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536     }                                                                                                    </span>
<span  style="">1537                                                                                                          </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1538     protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1539             throws ServiceException {                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1540         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1541             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1542                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1543                 if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                      </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1544                         &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1545                     // Get the records                                                                   </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1546                     PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()            </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1547                             .withCeilingEntityClassname(fmd.getForeignKeyClass());                       </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style=""><abbr title="1548                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();">1548                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecoðŸ”µ</abbr></span>
<span  style="">1549                                                                                                          </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1550                     // Determine the id field                                                            </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1551                     String idProp = null;                                                                </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1552                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1552                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1553                     for (Property foreignP : foreignClassMd.getProperties()) {                           </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1554                         if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                      </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1555                             BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata(); </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1556                             if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {               </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1557                                 idProp = foreignP.getName();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560                     }                                                                                    </span>
<span  style="">1561                                                                                                          </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1562                     if (idProp == null) {                                                                </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1563                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1563                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeigðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1564                     }                                                                                    </span>
<span  style="">1565                                                                                                          </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1566                     // Determine the display field                                                       </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1567                     String displayProp = fmd.getLookupDisplayProperty();                                 </span>
<span  style="">1568                                                                                                          </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1569                     // Build the options map                                                             </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1570                     Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                       </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1571                     for (Entity row : rows) {                                                            </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1572                         Property prop = row.findProperty(displayProp);                                   </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1573                         if (prop == null) {                                                              </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1574                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; +">1574                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + ðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1575                                     ef.getCeilingEntityClassname() + &quot;]&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1576                         } else {                                                                         </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1577                             String displayValue = prop.getDisplayValue();                                </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1578                             if (StringUtils.isBlank(displayValue)) {                                     </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1579                                 displayValue = prop.getValue();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580                             }                                                                            </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1581                             options.put(row.findProperty(idProp).getValue(), displayValue);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1582                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1583                     }                                                                                    </span>
<span  style="">1584                                                                                                          </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1585                     // Set the options on the entity field                                               </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1586                     ComboField cf = (ComboField) ef.findField(p.getName());                              </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1587                     cf.setOptions(options);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1591     }                                                                                                    </span>
<span  style="">1592                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1593     @Override                                                                                            </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1594     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1594     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; coðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1595             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1596         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1597         populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                           </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1598         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1599         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1600         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601     }                                                                                                    </span>
<span  style="">1602                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1603     @Override                                                                                            </span>
<span class="8407616833525381833" onmouseenter="enter('8407616833525381833');" onmouseout="out('8407616833525381833');" style=""><abbr title="1604     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1604     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collecðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1605             throws ServiceException {                                                                    </span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1606         // Get the form with values for this entity                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1607         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span  style="">1608                                                                                                          </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1609         // Attach the sub-collection list grids and specialty UI support                                 </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1610         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1611             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1612                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1613             }                                                                                            </span>
<span  style="">1614                                                                                                          </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1615             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1616                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617             }                                                                                            </span>
<span  style="">1618                                                                                                          </span>
<span class="5057378952086585538" onmouseenter="enter('5057378952086585538');" onmouseout="out('5057378952086585538');" style="">1619             if (collectionRecords != null &amp;&amp; !collectionRecords.isEmpty()) {                             </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1620                 DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());             </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1621                 String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();         </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1622                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1622                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p,ðŸ”µ</abbr></span>
<span  style="">1623                                                                                                          </span>
<span class="-4703142262249660615" onmouseenter="enter('-4703142262249660615');" onmouseout="out('-4703142262249660615');" style="">1624                 CollectionMetadata md = ((CollectionMetadata) p.getMetadata());                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1625                 if (md instanceof BasicCollectionMetadata) {                                             </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style=""><abbr title="1626                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);">1626                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCruðŸ”µ</abbr></span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1627                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1627                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResuðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1628                     if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {              </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1629                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1629                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1630                         ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);     </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1631                         for (ClassTree entityType : entityTypes) {                                       </span>
<span class="-6085370745551409442" onmouseenter="enter('-6085370745551409442');" onmouseout="out('-6085370745551409442');" style="">1632                             ListGridAction ADD = new ListGridAction(ListGridAction.ADD)                  </span>
<span class="-8123842595880337680" onmouseenter="enter('-8123842595880337680');" onmouseout="out('-8123842595880337680');" style="">1633                                     .withButtonClass(AddMethodType.PERSIST_EMPTY==                       </span>
<span class="2458863346051852504" onmouseenter="enter('2458863346051852504');" onmouseout="out('2458863346051852504');" style=""><abbr title="1634                                             ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-empty&quot;:&quot;sub-list-grid-add&quot;)">1634                                             ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-gðŸ”µ</abbr></span>
<span class="625982968125452177" onmouseenter="enter('625982968125452177');" onmouseout="out('625982968125452177');" style="">1635                                     .withActionTargetEntity(entityType.getFullyQualifiedClassname())     </span>
<span class="1979584669038484989" onmouseenter="enter('1979584669038484989');" onmouseout="out('1979584669038484989');" style="">1636                                     .withUrlPostfix(&quot;/add&quot;)                                              </span>
<span class="-2605498948604397141" onmouseenter="enter('-2605498948604397141');" onmouseout="out('-2605498948604397141');" style="">1637                                     .withIconClass(&quot;fa fa-plus&quot;)                                         </span>
<span class="1382163113890128554" onmouseenter="enter('1382163113890128554');" onmouseout="out('1382163113890128554');" style=""><abbr title="1638                                     .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));">1638                                     .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyNamðŸ”µ</abbr></span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1639                             actionGroup.getListGridActions().add(0, ADD);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1640                         }                                                                                </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1641                         listGrid.addToolbarActionGroup(actionGroup);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1642                     } else {                                                                             </span>
<span class="-686829543212379321" onmouseenter="enter('-686829543212379321');" onmouseout="out('-686829543212379321');" style="">1643                         listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY==                </span>
<span class="452604423250167593" onmouseenter="enter('452604423250167593');" onmouseout="out('452604423250167593');" style=""><abbr title="1644                                 ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTY:DefaultListGridActions.ADD);">1644                                 ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1646                 } else {                                                                                 </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1647                     listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1648                 }                                                                                        </span>
<span  style="">1649                                                                                                          </span>
<span class="1698654555130612252" onmouseenter="enter('1698654555130612252');" onmouseout="out('1698654555130612252');" style="">1650                 if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab())!=null) {           </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1651                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1652                 } else {                                                                                 </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1653                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1654                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1655             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1656         }                                                                                                </span>
<span  style="">1657                                                                                                          </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1658         if (CollectionUtils.isEmpty(ef.getActions())) {                                                  </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1659             ef.addAction(DefaultEntityFormActions.SAVE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1660         }                                                                                                </span>
<span  style="">1661                                                                                                          </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1662         addDeleteActionIfAllowed(ef, cmd, entity);                                                       </span>
<span class="-1573379781634260780" onmouseenter="enter('-1573379781634260780');" onmouseout="out('-1573379781634260780');" style="">1663         addDuplicateActionIfAllowed(ef, cmd);                                                            </span>
<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1664         setReadOnlyState(ef, cmd, entity);                                                               </span>
<span  style="">1665                                                                                                          </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1666         // check for fields that should be hidden based on annotations                                   </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1667         setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                          </span>
<span  style="">1668                                                                                                          </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1669         extensionManager.getProxy().modifyDetailEntityForm(ef);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1670     }                                                                                                    </span>
<span  style="">1671                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1672     /**                                                                                                  </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1673      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1673      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/bðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1674      * delete an entity for the following cases:                                                         </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1675      * &lt;ol&gt;                                                                                              </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style=""><abbr title="1676      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by">1676      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represenðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1677      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1677      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1678      *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the       </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1679      *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1680      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1681      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1682      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1683      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1684      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1685      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1686      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1687      * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1688      */                                                                                                  </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1689     protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {   </span>
<span class="9176849152277833812" onmouseenter="enter('9176849152277833812');" onmouseout="out('9176849152277833812');" style="">1690         if (isDeletionAllowed(entityForm, cmd, entity)) {                                                </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="">1691             entityForm.addAction(DefaultEntityFormActions.DELETE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693     }                                                                                                    </span>
<span  style="">1694                                                                                                          </span>
<span class="1233024099247846166" onmouseenter="enter('1233024099247846166');" onmouseout="out('1233024099247846166');" style="">1695     protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd,            </span>
<span class="-5681436677530159700" onmouseenter="enter('-5681436677530159700');" onmouseout="out('-5681436677530159700');" style="">1696             final Entity entity) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1697         try {                                                                                            </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1698             String securityEntityClassname = getSecurityClassname(entityForm, cmd);                      </span>
<span class="-1437365640597623792" onmouseenter="enter('-1437365640597623792');" onmouseout="out('-1437365640597623792');" style="">1699             adminRemoteSecurityService                                                                   </span>
<span class="9049592859337879981" onmouseenter="enter('9049592859337879981');" onmouseout="out('9049592859337879981');" style="">1700                     .securityCheck(securityEntityClassname, EntityOperationType.REMOVE);                 </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1701         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1702             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1703                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705         }                                                                                                </span>
<span  style="">1706                                                                                                          </span>
<span class="-6544480517582328932" onmouseenter="enter('-6544480517582328932');" onmouseout="out('-6544480517582328932');" style="">1707         final AdminUser persistentAdminUser = adminRemoteSecurityService.getPersistentAdminUser();       </span>
<span  style="">1708                                                                                                          </span>
<span class="-4253696723384610596" onmouseenter="enter('-4253696723384610596');" onmouseout="out('-4253696723384610596');" style="">1709         return rowLevelSecurityService.canUpdate(persistentAdminUser, entity)                            </span>
<span class="6878671858526625956" onmouseenter="enter('6878671858526625956');" onmouseout="out('6878671858526625956');" style="">1710                 &amp;&amp; rowLevelSecurityService.canRemove(persistentAdminUser, entity);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711     }                                                                                                    </span>
<span  style="">1712                                                                                                          </span>
<span class="8744244153887540139" onmouseenter="enter('8744244153887540139');" onmouseout="out('8744244153887540139');" style="">1713     protected void addDuplicateActionIfAllowed(final EntityForm entityForm,                              </span>
<span class="7968956867409491481" onmouseenter="enter('7968956867409491481');" onmouseout="out('7968956867409491481');" style="">1714             final ClassMetadata cmd) {                                                                   </span>
<span class="-4074855000497140283" onmouseenter="enter('-4074855000497140283');" onmouseout="out('-4074855000497140283');" style="">1715         if (isDuplicationAllowed(entityForm, cmd)) {                                                     </span>
<span class="6780575287202109079" onmouseenter="enter('6780575287202109079');" onmouseout="out('6780575287202109079');" style="">1716             entityForm.addAction(DefaultEntityFormActions.DUPLICATE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1717         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1718     }                                                                                                    </span>
<span  style="">1719                                                                                                          </span>
<span class="2750172847360880677" onmouseenter="enter('2750172847360880677');" onmouseout="out('2750172847360880677');" style="">1720     protected boolean isDuplicationAllowed(final EntityForm entityForm, final ClassMetadata cmd) {       </span>
<span class="5761145246382260648" onmouseenter="enter('5761145246382260648');" onmouseout="out('5761145246382260648');" style="">1721         final String securityClassname = getSecurityClassname(entityForm, cmd);                          </span>
<span  style="">1722                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1723         try {                                                                                            </span>
<span class="7910151490387293712" onmouseenter="enter('7910151490387293712');" onmouseout="out('7910151490387293712');" style="">1724             adminRemoteSecurityService.securityCheck(securityClassname, EntityOperationType.ADD);        </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1725         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1726             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1727                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1728             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729         }                                                                                                </span>
<span  style="">1730                                                                                                          </span>
<span class="3631252767096747840" onmouseenter="enter('3631252767096747840');" onmouseout="out('3631252767096747840');" style="">1731         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(securityClassname);                   </span>
<span  style="">1732                                                                                                          </span>
<span class="-7591397042021229268" onmouseenter="enter('-7591397042021229268');" onmouseout="out('-7591397042021229268');" style="">1733         return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp;                     </span>
<span class="5950039316725693002" onmouseenter="enter('5950039316725693002');" onmouseout="out('5950039316725693002');" style="">1734                 rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(),      </span>
<span class="-9091740986951777867" onmouseenter="enter('-9091740986951777867');" onmouseout="out('-9091740986951777867');" style="">1735                         securityClassname, cmd);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1736     }                                                                                                    </span>
<span  style="">1737                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1738     /**                                                                                                  </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1739      * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                        </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1740      * &lt;ol&gt;                                                                                              </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1741      *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                  </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1742      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1742      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class namðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1743      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1743      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style=""><abbr title="1744      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the">1744      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to ðŸ”µ</abbr></span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1745      *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1746      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1747      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1748      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1749      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1750      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1751      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1752      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1753      * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1754      */                                                                                                  </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1755     protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {           </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1756         boolean readOnly = true;                                                                         </span>
<span  style="">1757                                                                                                          </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1758         // If all of the fields are read only, we&#x27;ll mark the form as such                               </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1759         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1760             FieldMetadata fieldMetadata = property.getMetadata();                                        </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1761             if (fieldMetadata instanceof BasicFieldMetadata) {                                           </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1762                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1762                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetaðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1763                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1764                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1765                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1766             } else {                                                                                     </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1767                 readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                             </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1768                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1769                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1770                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1771             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1772         }                                                                                                </span>
<span  style="">1773                                                                                                          </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1774         if (!readOnly) {                                                                                 </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1775             // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1775             // If the user does not have edit permissions, we will go ahead and make the form read only tðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1776             try {                                                                                        </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1777                 String securityEntityClassname = getSecurityClassname(entityForm, cmd);                  </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style=""><abbr title="1778                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);">1778                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDðŸ”µ</abbr></span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1779             } catch (ServiceException e) {                                                               </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1780                 if (e instanceof SecurityServiceException) {                                             </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1781                     readOnly = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1782                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784         }                                                                                                </span>
<span  style="">1785                                                                                                          </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1786         // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1786         // if the normal admin security service has not deemed this readonly and the all of the propertieðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1787         // are not readonly, then check the row-level security                                           </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1788         if (!readOnly) {                                                                                 </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1789             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1789             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUsðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1790         }                                                                                                </span>
<span  style="">1791                                                                                                          </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1792         if (readOnly) {                                                                                  </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1793             entityForm.setReadOnly();                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1794             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1794             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement imðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1795             if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {             </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1796                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1796                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLeveðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1797                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1797                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1798                     for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {  </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1799                         if (modifier.isQualified(data.getModifierType())) {                              </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1800                             modifier.modifyEntityForm(new EntityFormModifierRequest()                    </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1801                                     .withEntityForm(entityForm)                                          </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1802                                     .withConfiguration(data)                                             </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1803                                     .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())</span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1804                                     .withEntity(entity)                                                  </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1805                                     .withRowLevelSecurityService(rowLevelSecurityService));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1806                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1807                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1808                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1809             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1810         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1811     }                                                                                                    </span>
<span  style="">1812                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1813     /**                                                                                                  </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1814      * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                 </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1815      * @param entityForm                                                                                 </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1816      * @param cmd                                                                                        </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1817      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1818      */                                                                                                  </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1819     protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                    </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1820         String securityEntityClassname = entityForm.getCeilingEntityClassname();                         </span>
<span  style="">1821                                                                                                          </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1822         if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                        </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1823             securityEntityClassname = cmd.getSecurityCeilingType();                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1824         } else {                                                                                         </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1825             if (entityForm.getDynamicFormInfos() != null) {                                              </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1826                 for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {           </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1827                     if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                      </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1828                         securityEntityClassname = info.getSecurityCeilingClassName();                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1829                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1830                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1831                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1832             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1833         }                                                                                                </span>
<span  style="">1834                                                                                                          </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1835         return securityEntityClassname;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1836     }                                                                                                    </span>
<span  style="">1837                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1838     @Override                                                                                            </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1839     public void populateEntityFormFields(EntityForm ef, Entity entity) {                                 </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1840         populateEntityFormFields(ef, entity, true, true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841     }                                                                                                    </span>
<span  style="">1842                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1843     @Override                                                                                            </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style=""><abbr title="1844     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {">1844     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean popuðŸ”µ</abbr></span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1845         if (populateId) {                                                                                </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1846             ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1847         }                                                                                                </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1848         if (populateType) {                                                                              </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1849             ef.setEntityType(entity.getType()[0]);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1850         }                                                                                                </span>
<span  style="">1851                                                                                                          </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1852         for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                   </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1853             Property entityProp = entity.findProperty(entry.getKey());                                   </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1854             if (entityProp != null) {                                                                    </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1855                 entry.getValue().setValue(entityProp.getValue());                                        </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1856                 entry.getValue().setDisplayValue(entityProp.getDisplayValue());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1857             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1858         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1859     }                                                                                                    </span>
<span  style="">1860                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1861     @Override                                                                                            </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style=""><abbr title="1862     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {">1862     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedLiðŸ”µ</abbr></span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style=""><abbr title="1863         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());">1863         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdPropeðŸ”µ</abbr></span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1864         Property entityProp = entity.findProperty(ef.getIdProperty());                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1865         field.setValue(entityProp.getValue());                                                           </span>
<span  style="">1866                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1867         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1868             field = ef.findField(adornedList.getSortField());                                            </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1869             entityProp = entity.findProperty(adornedList.getSortField());                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1870             if (field != null &amp;&amp; entityProp != null) {                                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1871                 field.setValue(entityProp.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1872             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1873         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1874     }                                                                                                    </span>
<span  style="">1875                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1876     @Override                                                                                            </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1877     public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                              </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1878         Field field = ef.findField(&quot;priorKey&quot;);                                                          </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1879         Property entityProp = entity.findProperty(&quot;key&quot;);                                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1880         if (field != null &amp;&amp; entityProp != null) {                                                       </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1881             field.setValue(entityProp.getValue());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1882         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1883     }                                                                                                    </span>
<span  style="">1884                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1885     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1886     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1886     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style=""><abbr title="1887             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1887             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1888             throws ServiceException {                                                                    </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1889         EntityForm ef = createStandardAdornedEntityForm();                                               </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1890         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1890         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1891     }                                                                                                    </span>
<span  style="">1892                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1893     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1894     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1894     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1895             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1895             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1896             throws ServiceException {                                                                    </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1897         ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                 </span>
<span  style="">1898                                                                                                          </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1899         // Get the metadata for this adorned field                                                       </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1900         PersistencePackageRequest request = PersistencePackageRequest.adorned()                          </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1901                 .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                      </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1902                 .withAdornedList(adornedList)                                                            </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1903                 .withSectionCrumbs(sectionCrumbs);                                                       </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1904         request.setAddOperationInspect(isAdd);                                                           </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1905         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1905         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSðŸ”µ</abbr></span>
<span  style="">1906                                                                                                          </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1907         List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                         </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1908         if (isViewCollectionItem) {                                                                      </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1909             Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1910         } else {                                                                                         </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1911             // We want our entity form to only render the maintained adorned target fields               </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1912             for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1913                 Property p = collectionMetadata.getPMap().get(targetFieldName);                          </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1914                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1914                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadatðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1915                     ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);    </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1916                     entityFormProperties.add(p);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1917                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1918             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1919         }                                                                                                </span>
<span  style="">1920                                                                                                          </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1921         // Set the maintained fields on the form                                                         </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1922         setEntityFormFields(collectionMetadata, ef, entityFormProperties);                               </span>
<span  style="">1923                                                                                                          </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1924         // Add these two additional hidden fields that are required for persistence                      </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1925         Field f = new Field()                                                                            </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1926                 .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1927                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1928                 .withValue(parentId);                                                                    </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1929         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1930                                                                                                          </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1931         f = new Field()                                                                                  </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1932                 .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1933                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1934                 .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                              </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1935         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1936                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1937         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1938             f = new Field()                                                                              </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1939                     .withName(adornedList.getSortField())                                                </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1940                     .withFieldType(SupportedFieldType.HIDDEN.toString());                                </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1941             ef.addHiddenField(collectionMetadata, f);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1942         }                                                                                                </span>
<span  style="">1943                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1944         ef.setParentId(parentId);                                                                        </span>
<span  style="">1945                                                                                                          </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1946         extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                 </span>
<span  style="">1947                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1948         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1949     }                                                                                                    </span>
<span  style="">1950                                                                                                          </span>
<span  style="">1951                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1952     @Override                                                                                            </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1953     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1953     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1954             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1955         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1956         return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1957     }                                                                                                    </span>
<span  style="">1958                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1959     @Override                                                                                            </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1960     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1960     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1961             throws ServiceException {                                                                    </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1962         ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                           </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1963                 .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);        </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1964         ef.setEntityType(foreignKey.getForeignKeyClass());                                               </span>
<span  style="">1965                                                                                                          </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1966         Field keyField;                                                                                  </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1967         if (!mapMd.getForceFreeFormKeys()) {                                                             </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1968             // We will use a combo field to render the key choices                                       </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1969             ComboField temp = new ComboField();                                                          </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1970             temp.withName(&quot;key&quot;)                                                                         </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1971                     .withFieldType(&quot;combo_field&quot;)                                                        </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1972                     .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                        </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1973             if (mapMd.getKeys() != null) {                                                               </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1974                 // The keys can be explicitly set in the annotation...                                   </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1975                 temp.setOptions(mapMd.getKeys());                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1976             } else {                                                                                     </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1977                 // Or they could be based on a different entity                                          </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1978                 PersistencePackageRequest ppr = PersistencePackageRequest.standard()                     </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1979                         .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                 </span>
<span  style="">1980                                                                                                          </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1981                 DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();         </span>
<span  style="">1982                                                                                                          </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1983                 for (Entity entity : drs.getRecords()) {                                                 </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style=""><abbr title="1984                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();">1984                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getVaðŸ”µ</abbr></span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1985                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1985                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayFieldðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1986                     temp.putOption(keyValue, keyDisplayValue);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1987                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1988             }                                                                                            </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1989             keyField = temp;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1990         } else {                                                                                         </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1991             keyField = new Field().withName(&quot;key&quot;)                                                       </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1992                                 .withFieldType(SupportedFieldType.STRING.toString())                     </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1993                                 .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1994         }                                                                                                </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1995         keyField.setRequired(true);                                                                      </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1996         ef.addMapKeyField(cmd, keyField);                                                                </span>
<span  style="">1997                                                                                                          </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1998         // Set the fields for this form                                                                  </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1999         List&lt;Property&gt; mapFormProperties;                                                                </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">2000         if (mapMd.isSimpleValue()) {                                                                     </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">2001             ef.setIdProperty(&quot;key&quot;);                                                                     </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">2002             mapFormProperties = new ArrayList&lt;&gt;();                                                       </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">2003             Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                             </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">2004             mapFormProperties.add(valueProp);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2005         } else {                                                                                         </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">2006             String valueClassName = mapStructure.getValueClassName();                                    </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">2007             List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                </span>
<span  style="">2008                                                                                                          </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">2009             mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                     </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">2010             filterMapFormProperties(mapFormProperties, classNames);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2011         }                                                                                                </span>
<span  style="">2012                                                                                                          </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">2013         setEntityFormFields(cmd, ef, mapFormProperties);                                                 </span>
<span  style="">2014                                                                                                          </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">2015         Field f = new Field()                                                                            </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">2016                 .withName(&quot;priorKey&quot;)                                                                    </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">2017                 .withFieldType(SupportedFieldType.HIDDEN.toString());                                    </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">2018         ef.addHiddenField(cmd, f);                                                                       </span>
<span  style="">2019                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">2020         ef.setParentId(parentId);                                                                        </span>
<span  style="">2021                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2022         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2023     }                                                                                                    </span>
<span  style="">2024                                                                                                          </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">2025     protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                   </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">2026         PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);         </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">2027         List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2028         try {                                                                                            </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">2029             Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                          </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">2030             for (Class clazz : mapEntities) {                                                            </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">2031                 classNames.add(clazz.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2032             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">2033         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">2034             classNames.add(valueClassName);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2035         }                                                                                                </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">2036         return classNames;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2037     }                                                                                                    </span>
<span  style="">2038                                                                                                          </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style=""><abbr title="2039     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {">2039     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNameðŸ”µ</abbr></span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">2040         CollectionUtils.filter(mapFormProperties, new Predicate() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2041             @Override                                                                                    </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">2042             public boolean evaluate(Object object) {                                                     </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">2043                 Property p = (Property) object;                                                          </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">2044                 for (String availType : p.getMetadata().getAvailableToTypes()) {                         </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">2045                     if (classNames.contains(availType)) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2046                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2047                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2048                 }                                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2049                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2050             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2051         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2052     }                                                                                                    </span>
<span  style="">2053                                                                                                          </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">2054     protected EntityForm createStandardEntityForm() {                                                    </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2055         EntityForm ef = new EntityForm();                                                                </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">2056         ef.addAction(DefaultEntityFormActions.SAVE);                                                     </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2057         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2058     }                                                                                                    </span>
<span  style="">2059                                                                                                          </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">2060     protected EntityForm createStandardAdornedEntityForm() {                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2061         EntityForm ef = new EntityForm();                                                                </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">2062         ef.addAction(DefaultAdornedEntityFormActions.Add);                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2063         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2064     }                                                                                                    </span>
<span  style="">2065                                                                                                          </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">2066     protected VisibilityEnum[] getGridHiddenVisibilities() {                                             </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">2067         return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2068     }                                                                                                    </span>
<span  style="">2069                                                                                                          </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">2070     protected VisibilityEnum[] getFormHiddenVisibilities() {                                             </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">2071         return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2072     }                                                                                                    </span>
<span  style="">2073                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2074 }                                                                                                        </span>









</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18 package org.broadleafcommerce.openadmin.web.service;                                                     </span>
<span  style="">  19                                                                                                          </span>
<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style="">  20 import com.fasterxml.jackson.core.Version;                                                               </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  21 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style="">  22 import com.fasterxml.jackson.databind.module.SimpleModule;                                               </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  23 import java.io.IOException;                                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="">  24 import java.math.BigDecimal;                                                                             </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style="">  25 import java.text.DateFormat;                                                                             </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style="">  26 import java.text.DateFormatSymbols;                                                                      </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="">  27 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="">  28 import java.text.NumberFormat;                                                                           </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style="">  29 import java.text.ParseException;                                                                         </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="">  30 import java.text.SimpleDateFormat;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  31 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  32 import java.util.Arrays;                                                                                 </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  33 import java.util.Collections;                                                                            </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="">  34 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  35 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  36 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  37 import java.util.Locale;                                                                                 </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  38 import java.util.Map.Entry;                                                                              </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  39 import java.util.Map;                                                                                    </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  40 import java.util.Set;                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  41 import javax.annotation.Resource;                                                                        </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style="">  42 import javax.persistence.ManyToOne;                                                                      </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style="">  43 import javax.persistence.OneToOne;                                                                       </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style="">  44 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  45 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  46 import org.apache.commons.collections.Predicate;                                                         </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  47 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  48 import org.apache.commons.lang.BooleanUtils;                                                             </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  49 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  50 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  51 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  52 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  53 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  54 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  55 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  56 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  57 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="">  58 import org.broadleafcommerce.common.i18n.service.TranslationService;                                     </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  59 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  60 import org.broadleafcommerce.common.media.domain.MediaDto;                                               </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  61 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  62 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  63 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  64 import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                      </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  65 import org.broadleafcommerce.common.presentation.client.LookupType;                                      </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  66 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  67 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  68 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="6163854737754492449" onmouseenter="enter('6163854737754492449');" onmouseout="out('6163854737754492449');" style="">  69 import org.broadleafcommerce.common.security.service.ExploitProtectionService;                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  70 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  71 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  72 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  73 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  74 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  75 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  76 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  77 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  78 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  79 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  80 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  81 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  82 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  83 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  84 import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                   </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  85 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  86 import org.broadleafcommerce.openadmin.dto.MapStructure;                                                 </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  87 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  88 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  89 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  90 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  91 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  92 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  93 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  94 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  95 import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                          </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  96 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                       </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  97 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;          </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  98 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                   </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  99 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;              </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style=""> 100 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style=""> 101 import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;   </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style=""> 102 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style=""> 103 import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;        </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style=""> 104 import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style=""> 105 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style=""> 106 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;             </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style=""> 107 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style=""> 108 import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                   </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style=""> 109 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style=""> 110 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style=""> 111 import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style=""> 112 import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                           </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style=""> 113 import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style=""> 114 import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                    </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style=""> 115 import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                              </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style=""> 116 import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                        </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style=""> 117 import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                       </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style=""> 118 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style=""> 119 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style=""> 120 import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                            </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style=""> 121 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style=""> 122 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style=""> 123 import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                              </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style=""> 124 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                      </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style=""> 125 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                  </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style=""> 126 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                     </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style=""> 127 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                 </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 128 import org.codehaus.jettison.json.JSONObject;                                                            </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 129 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 130 import org.springframework.context.MessageSource;                                                        </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 131 import org.springframework.context.NoSuchMessageException;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 132 import org.springframework.stereotype.Service;                                                           </span>
<span  style=""> 133                                                                                                          </span>
<span  style=""> 134                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 135 /**                                                                                                      </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 136  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 137  */                                                                                                      </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 138 @Service(&quot;blFormBuilderService&quot;)                                                                         </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 139 public class FormBuilderServiceImpl implements FormBuilderService {                                      </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 140     private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                      </span>
<span  style=""> 141                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 142     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 143                                                                                                          </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 144     @Resource(name = &quot;blAdminEntityService&quot;)                                                             </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 145     protected AdminEntityService adminEntityService;                                                     </span>
<span  style=""> 146                                                                                                          </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 147     @Resource (name = &quot;blAdminNavigationService&quot;)                                                        </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 148     protected AdminNavigationService navigationService;                                                  </span>
<span  style=""> 149                                                                                                          </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 150     @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                    </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 151     protected FormBuilderExtensionManager extensionManager;                                              </span>
<span  style=""> 152                                                                                                          </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 153     @Resource(name=&quot;blEntityConfiguration&quot;)                                                              </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 154     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style=""> 155                                                                                                          </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 156     @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                       </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 157     protected SecurityVerifier adminRemoteSecurityService;                                               </span>
<span  style=""> 158                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 159     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 160     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 161                                                                                                          </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 162     @Resource(name = &quot;blMediaBuilderService&quot;)                                                            </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 163     protected MediaBuilderService mediaBuilderService;                                                   </span>
<span  style=""> 164                                                                                                          </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 165     @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                           </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 166     protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                        </span>
<span  style=""> 167                                                                                                          </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 168     @Resource(name = &quot;blAdminNavigationService&quot;)                                                         </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 169     protected AdminNavigationService adminNavigationService;                                             </span>
<span  style=""> 170                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 171     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 172     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 173                                                                                                          </span>
<span class="-8242037663383389708" onmouseenter="enter('-8242037663383389708');" onmouseout="out('-8242037663383389708');" style=""> 174     @Resource(name = &quot;blDynamicEntityDao&quot;)                                                               </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 175     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 176                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 177     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 178     protected LocaleService localeService;                                                               </span>
<span  style=""> 179                                                                                                          </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style=""> 180     @Resource(name = &quot;blTranslationService&quot;)                                                             </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style=""> 181     protected TranslationService translationService;                                                     </span>
<span  style=""> 182                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 183     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 184     protected boolean useTranslationSearch;                                                              </span>
<span  style=""> 185                                                                                                          </span>
<span class="-4708283361541865346" onmouseenter="enter('-4708283361541865346');" onmouseout="out('-4708283361541865346');" style=""> 186     @Resource(name = &quot;blExploitProtectionService&quot;)                                                       </span>
<span class="2624150081163085905" onmouseenter="enter('2624150081163085905');" onmouseout="out('2624150081163085905');" style=""> 187     ExploitProtectionService exploitProtectionService;                                                   </span>
<span  style=""> 188                                                                                                          </span>
<span class="-5561960695501016515" onmouseenter="enter('-5561960695501016515');" onmouseout="out('-5561960695501016515');" style=""><abbr title=" 189     protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[]{ VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN };"> 189     protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[]{ VisibilityEnðŸ”µ</abbr></span>
<span  style=""> 190                                                                                                          </span>
<span class="-3352897524275042262" onmouseenter="enter('-3352897524275042262');" onmouseout="out('-3352897524275042262');" style=""><abbr title=" 191     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[]{ VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN };"> 191     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[]{ VisibilityEnðŸ”µ</abbr></span>
<span  style=""> 192                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 193     @Override                                                                                            </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 194     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 194     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SeðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 195             throws ServiceException {                                                                    </span>
<span  style=""> 196                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 197         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 198         ListGrid.Type type = ListGrid.Type.MAIN;                                                         </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 199         String idProperty = &quot;id&quot;;                                                                        </span>
<span  style=""> 200                                                                                                          </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 201         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 202         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 203         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 204             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 205                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span  style=""> 206                                                                                                          </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 207                 if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                  </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 208                     idProperty = fmd.getName();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209                 }                                                                                        </span>
<span  style=""> 210                                                                                                          </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 211                 if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                       </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 212                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 213                     Field hf = createHeaderField(p, fmd);                                                </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 214                     headerFields.add(hf);                                                                </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 215                     defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216                 }                                                                                        </span>
<span  style=""> 217                                                                                                          </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 218                 if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                    </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""><abbr title=" 219                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));"> 219                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmdðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222         }                                                                                                </span>
<span  style=""> 223                                                                                                          </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style=""> 224         if (useTranslationSearch) {                                                                      </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style=""> 225             getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226         }                                                                                                </span>
<span  style=""> 227                                                                                                          </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 228         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 228         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, ðŸ”µ</abbr></span>
<span  style=""> 229                                                                                                          </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 230         if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                    </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 231             // Set the first column to be able to link to the main entity                                </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 232             listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 233         } else {                                                                                         </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 234             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 234             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeiðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 235             message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;             </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 236             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 239         Date c = new Date();                                                                             </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 240         String friendlyName = &quot;listGrid&quot; + c.getTime();                                                  </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 241         // Set up the filter builder params                                                              </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 242         listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 243         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 244         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 245         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 246             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 248         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 249         listGrid.setHideFriendlyName(true);                                                              </span>
<span  style=""> 250                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 251         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 252         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 253         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 254         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 255             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span  style=""> 257                                                                                                          </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 258         listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 259         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 260                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 261         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 262                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 263         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264     }                                                                                                    </span>
<span  style=""> 265                                                                                                          </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style=""><abbr title=" 266     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {"> 266     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFieldsðŸ”µ</abbr></span>
<span  style=""> 267                                                                                                          </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style=""> 268         TranslatedEntity translatedEntity;                                                               </span>
<span  style=""> 269                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 270         try {                                                                                            </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style=""> 271             translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                </span>
<span  style=""> 272                                                                                                          </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style=""> 273             FieldDTO localeField = new FieldDTO();                                                       </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style=""> 274             localeField.setId(&quot;translationLocale&quot;);                                                      </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style=""> 275             localeField.setLabel(&quot;Translation locale&quot;);                                                  </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style=""> 276             localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                  </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style=""> 277             localeField.setInput(&quot;select&quot;);                                                              </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style=""> 278             localeField.setType(&quot;string&quot;);                                                               </span>
<span  style=""> 279                                                                                                          </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title=" 280             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();"> 280             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span  style=""> 281                                                                                                          </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style=""> 282             Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                               </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style=""> 283             for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                        </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style=""> 284                 localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285             }                                                                                            </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style=""> 286             localeField.setValues((new JSONObject(localeMap)).toString());                               </span>
<span  style=""> 287                                                                                                          </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style=""> 288             defaultWrapperFields.add(localeField);                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 289         } catch (Exception e) {                                                                          </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style=""> 290             translatedEntity = null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292     }                                                                                                    </span>
<span  style=""> 293                                                                                                          </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 294     protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {             </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 295         FieldDTO fieldDTO = new FieldDTO();                                                              </span>
<span class="-1288929643362133945" onmouseenter="enter('-1288929643362133945');" onmouseout="out('-1288929643362133945');" style=""> 296         // translate the label to display                                                                </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 297         String label = field.getFriendlyName();                                                          </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 298         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 299         MessageSource messages = context.getMessageSource();                                             </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 300         if (messages != null) {                                                                          </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 301             label = messages.getMessage(label, null, label, context.getJavaLocale());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302         }                                                                                                </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 303         fieldDTO.setLabel(label);                                                                        </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 304         fieldDTO.setId(field.getName());                                                                 </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 305         if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                     </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 306             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 307         } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 308             fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                            </span>
<span class="-3296335872348606538" onmouseenter="enter('-3296335872348606538');" onmouseout="out('-3296335872348606538');" style=""><abbr title=" 309         } else if ((field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;)) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 309         } else if ((field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;)) || fieðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 310             fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                         </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 311         } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                             </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 312             fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                         </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 313         } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                               </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 314             fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                     </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 315             fieldDTO.setInput(&quot;select&quot;);                                                                 </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 316             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style=""> 317             String[][] enumerationValues = fmd.getEnumerationValues();                                   </span>
<span class="-3511863972891285319" onmouseenter="enter('-3511863972891285319');" onmouseout="out('-3511863972891285319');" style=""> 318             // not sure if we need to decode here or not...                                              </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 319             for (int i = 0; i &lt; enumerationValues.length; i++) {                                         </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""> 320                 enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321             }                                                                                            </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 322             Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                               </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 323             for (int i = 0; i &lt; enumerationValues.length; i++) {                                         </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 324                 enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325             }                                                                                            </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 326             fieldDTO.setValues(new JSONObject(enumMap).toString());                                      </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 327         } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                              </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 328             fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                       </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 329             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 330             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 330             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 331             if (section != null) {                                                                       </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 332                 String sectionKey = section.getUrl().substring(1);                                       </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 333                 fieldDTO.setSelectizeSectionKey(sectionKey);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 334             } else {                                                                                     </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 335                 fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 337         } else {                                                                                         </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 338             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339         }                                                                                                </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 340         return fieldDTO;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341     }                                                                                                    </span>
<span  style=""> 342                                                                                                          </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 343     protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                              </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 344         Field hf;                                                                                        </span>
<span class="2388840706922548432" onmouseenter="enter('2388840706922548432');" onmouseout="out('2388840706922548432');" style=""><abbr title=" 345         if (((fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) || fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION)) || fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION)) || fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {"> 345         if (((fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) || fmd.getFieldType().eqðŸ”µ</abbr></span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 346             hf = new ComboField();                                                                       </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style=""> 347             String[][] enumerationValues = fmd.getEnumerationValues();                                   </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 348             for (int i = 0; i &lt; enumerationValues.length; i++) {                                         </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""> 349                 enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350             }                                                                                            </span>
<span class="-6612434177992044079" onmouseenter="enter('-6612434177992044079');" onmouseout="out('-6612434177992044079');" style=""> 351             ((ComboField) (hf)).setOptions(enumerationValues);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 352         } else {                                                                                         </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 353             hf = new Field();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354         }                                                                                                </span>
<span class="-7946003785744548527" onmouseenter="enter('-7946003785744548527');" onmouseout="out('-7946003785744548527');" style=""><abbr title=" 355         hf.withName(p.getName()).withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName()).withOrder(fmd.getGridOrder()).withColumnWidth(fmd.getColumnWidth()).withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty()).withForeignKeyClass(fmd.getForeignKeyClass()).withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass())).withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass()).withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());"> 355         hf.withName(p.getName()).withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getðŸ”µ</abbr></span>
<span class="-1035023552833691243" onmouseenter="enter('-1035023552833691243');" onmouseout="out('-1035023552833691243');" style=""> 356         String fieldType = (fmd.getFieldType() == null) ? null : fmd.getFieldType().toString();          </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 357         hf.setFieldType(fieldType);                                                                      </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 358         return hf;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359     }                                                                                                    </span>
<span  style=""> 360                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 361     @Override                                                                                            </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""><abbr title=" 362     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field,"> 362     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property fieðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 363             String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 364             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 365         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 366         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 367         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 368         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 369             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 371         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 371         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 372                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 373         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 374         ListGrid.Type type = null;                                                                       </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 375         boolean editable = false;                                                                        </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 376         boolean sortable = false;                                                                        </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 377         boolean readOnly = false;                                                                        </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 378         boolean hideIdColumn = false;                                                                    </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 379         boolean canFilterAndSort = true;                                                                 </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 380         boolean modalSingleSelectable = false;                                                           </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 381         boolean modalMultiSelectable = false;                                                            </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 382         boolean selectize = false;                                                                       </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 383         boolean isMedia = false;                                                                         </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 384         boolean isLookup = false;                                                                        </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 385         String sortProperty = null;                                                                      </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 386         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 387         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span  style=""> 388                                                                                                          </span>
<span  style=""> 389                                                                                                          </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 390         String idProperty = &quot;id&quot;;                                                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 391         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 392             if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                  </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""><abbr title=" 393                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;"> 393                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;ðŸ”µ</abbr></span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 394                     //make sure it&#x27;s a property for this entity - not an association                     </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 395                     !property.getName().contains(&quot;.&quot;)) {                                                 </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 396                 idProperty = property.getName();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 397                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399         }                                                                                                </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""><abbr title=" 400         // Get the header fields for this list grid. Note that the header fields are different depending on the"> 400         // Get the header fields for this list grid. Note that the header fields are different depending ðŸ”µ</abbr></span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 401         // kind of field this is.                                                                        </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 402         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 403             readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                         </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 404             modalSingleSelectable = true;                                                                </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 405             for (Property p : cmd.getProperties()) {                                                     </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 406                 if (p.getMetadata() instanceof BasicFieldMetadata) {                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 407                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 408                                                                                                          </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 409                     if (SupportedFieldType.ID.equals(md.getFieldType())) {                               </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 410                         idProperty = md.getName();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                     }                                                                                    </span>
<span  style=""> 412                                                                                                          </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 413                     if (md.isProminent() != null &amp;&amp; md.isProminent()                                     </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 414                             &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {  </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 415                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 416                         headerFields.add(hf);                                                            </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 417                         defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                     }                                                                                    </span>
<span  style=""> 419                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 420                     if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                  </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 421                         Field f = createHeaderField(p, md);                                              </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 422                         wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425             }                                                                                            </span>
<span  style=""> 426                                                                                                          </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 427             type = ListGrid.Type.TO_ONE;                                                                 </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 428         } else if (fmd instanceof BasicCollectionMetadata) {                                             </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 429             BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                 </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 430             readOnly = !bcm.isMutable();                                                                 </span>
<span  style=""> 431                                                                                                          </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 432             if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                    </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 433                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434             }                                                                                            </span>
<span  style=""> 435                                                                                                          </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 436             if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                         </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 437                 Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                          </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 438                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 439                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 440                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 441                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 442                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 443                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 445             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 446                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 447                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 448                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 449                         if (md.isProminent() != null &amp;&amp; md.isProminent()                                 </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 450                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 450                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility()))ðŸ”µ</abbr></span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 451                             Field hf = createHeaderField(p, md);                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 452                             headerFields.add(hf);                                                        </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 453                             defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454                         }                                                                                </span>
<span  style=""> 455                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 456                         if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                              </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 457                             Field f = createHeaderField(p, md);                                          </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 458                             wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462             }                                                                                            </span>
<span  style=""> 463                                                                                                          </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 464             type = ListGrid.Type.BASIC;                                                                  </span>
<span  style=""> 465                                                                                                          </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 466             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 466             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equalðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 467                 editable = true;                                                                         </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 468             } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                  </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 469                 selectize = true;                                                                        </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 470                 modalSingleSelectable = true;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 471             } else {                                                                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 472                 modalSingleSelectable = true;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473             }                                                                                            </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 474             sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                    </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 475             if (sortable) {                                                                              </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 476                 sortProperty = bcm.getSortProperty();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477             }                                                                                            </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 478         } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 479             modalSingleSelectable = true;                                                                </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 480             readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                             </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 481             AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;               </span>
<span  style=""> 482                                                                                                          </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 483             if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {        </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 484                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485             }                                                                                            </span>
<span  style=""> 486                                                                                                          </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""><abbr title=" 487             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {"> 487             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())ðŸ”µ</abbr></span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 488                 selectize = true;                                                                        </span>
<span  style=""> 489                                                                                                          </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 490                 Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                        </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 491                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 492                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 493                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 494                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 495                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 496                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 498             } else {                                                                                     </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 499                 for (String fieldName : atcmd.getGridVisibleFields()) {                                  </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 500                     Property p = cmd.getPMap().get(fieldName);                                           </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 501                     if (p != null) {                                                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 502                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span  style=""> 503                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 504                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 505                         headerFields.add(hf);                                                            </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 506                         wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507                     }                                                                                    </span>
<span  style=""> 508                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510             }                                                                                            </span>
<span  style=""> 511                                                                                                          </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 512             type = ListGrid.Type.ADORNED;                                                                </span>
<span  style=""> 513                                                                                                          </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 514             if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                   </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 515                 editable = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516             }                                                                                            </span>
<span  style=""> 517                                                                                                          </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 518             AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()        </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""><abbr title=" 519                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);"> 519                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLISðŸ”µ</abbr></span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 520             sortable = StringUtils.isNotBlank(adornedList.getSortField());                               </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 521             if (sortable) {                                                                              </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 522                 sortProperty = adornedList.getSortField();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523             }                                                                                            </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 524         } else if (fmd instanceof MapMetadata) {                                                         </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 525             readOnly = !((MapMetadata) fmd).isMutable();                                                 </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 526             MapMetadata mmd = (MapMetadata) fmd;                                                         </span>
<span  style=""> 527                                                                                                          </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 528             Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                      </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 529             BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                            </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 530             keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                            </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 531             Field hf = createHeaderField(p2, keyMd);                                                     </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 532             headerFields.add(hf);                                                                        </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 533             wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                          </span>
<span  style=""> 534                                                                                                          </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 535             if (mmd.isSimpleValue()) {                                                                   </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 536                 Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                     </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 537                 BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();           </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 538                 valueMd.setFriendlyName(&quot;Value&quot;);                                                        </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 539                 hf = createHeaderField(valueProperty, valueMd);                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 540                 headerFields.add(hf);                                                                    </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 541                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                    </span>
<span  style=""> 542                                                                                                          </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 543                 idProperty = &quot;key&quot;;                                                                      </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 544                 hideIdColumn = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 545             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 546                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 547                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 548                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 549                         String valueClassName = mmd.getValueClassName();                                 </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 550                         if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                        </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 551                             Class&lt;?&gt; clazz;                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 552                             try {                                                                        </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 553                                 clazz = Class.forName(mmd.getValueClassName());                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 554                             } catch (ClassNotFoundException e) {                                         </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 555                                 throw ExceptionHelper.refineException(e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                             }                                                                            </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 557                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 557                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.ðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 558                             ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);            </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 559                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 559                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.clasðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 560                                 valueClassName = manyToOne.targetEntity().getName();                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 561                             } else {                                                                     </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 562                                 OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);           </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 563                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 563                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.clðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 564                                     valueClassName = oneToOne.targetEntity().getName();                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567                         }                                                                                </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 568                         if (md.getTargetClass().equals(valueClassName)) {                                </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 569                             if (md.isProminent() != null &amp;&amp; md.isProminent()                             </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 570                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 570                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibilityðŸ”µ</abbr></span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 571                                 hf = createHeaderField(p, md);                                           </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 572                                 headerFields.add(hf);                                                    </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 573                                 defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));        </span>
<span  style=""> 574                                                                                                          </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 575                                 // Is this a media listgrid                                              </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 576                                 if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                          </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 577                                     isMedia = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579                             }                                                                            </span>
<span  style=""> 580                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 581                             if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                          </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 582                                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587             }                                                                                            </span>
<span  style=""> 588                                                                                                          </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 589             type = ListGrid.Type.MAP;                                                                    </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 590             editable = true;                                                                             </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 591             canFilterAndSort = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592         }                                                                                                </span>
<span  style=""> 593                                                                                                          </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 594         String ceilingType = &quot;&quot;;                                                                         </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 595         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 596             ceilingType = cmd.getCeilingType();                                                          </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 597         } else if (fmd instanceof CollectionMetadata) {                                                  </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 598             ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599         }                                                                                                </span>
<span  style=""> 600                                                                                                          </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 601         if (CollectionUtils.isEmpty(headerFields)) {                                                     </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 602             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 602             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingTypðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 603                     StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                         </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""><abbr title=" 604             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {"> 604             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) ðŸ”µ</abbr></span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 605                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 605                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTaðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 606             } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {       </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 607                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 607                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 608             } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                       </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 609                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 609                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollectioðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 610             } else {                                                                                     </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 611                 message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612             }                                                                                            </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 613             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614         }                                                                                                </span>
<span  style=""> 615                                                                                                          </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 616         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 616         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrderðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 617         listGrid.setSubCollectionFieldName(field.getName());                                             </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 618         listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                 </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 619         if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                           </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 620             listGrid.setFriendlyName(field.getName());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621         }                                                                                                </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 622         listGrid.setContainingEntityId(containingEntityId);                                              </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 623         listGrid.setIsReadOnly(readOnly);                                                                </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 624         listGrid.setHideIdColumn(hideIdColumn);                                                          </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 625         listGrid.setCanFilterAndSort(canFilterAndSort);                                                  </span>
<span  style=""> 626                                                                                                          </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 627         // Set up the filter builder params                                                              </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 628         Date c = new Date();                                                                             </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 629         String friendlyName = field.getMetadata().getFriendlyName();                                     </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 630         String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                     </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 631         listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                              </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 632         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 633         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 634         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 635             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 637         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span  style=""> 638                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 639         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 640         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 641         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 642         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 643             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644         }                                                                                                </span>
<span  style=""> 645                                                                                                          </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 646         if (editable) {                                                                                  </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 647             listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648         }                                                                                                </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 649         if (readOnly) {                                                                                  </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 650             listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651         }                                                                                                </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 652         if (sortable) {                                                                                  </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 653             listGrid.setCanFilterAndSort(false);                                                         </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 654             listGrid.setIsSortable(true);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655         }                                                                                                </span>
<span  style=""> 656                                                                                                          </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 657         if (modalSingleSelectable) {                                                                     </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 658             if (readOnly) {                                                                              </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 659                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 659                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 660             } else {                                                                                     </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 661                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                        </span>
<span  style=""> 662                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664         }                                                                                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 665         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 666                                                                                                          </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 667         if (selectize) {                                                                                 </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 668             listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                       </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 669             listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670         }                                                                                                </span>
<span  style=""> 671                                                                                                          </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 672         if (modalMultiSelectable) {                                                                      </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 673             listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                             </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 674             listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675         }                                                                                                </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 676         listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                     </span>
<span  style=""> 677                                                                                                          </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 678         if (fmd.getManualFetch()) {                                                                      </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 679             listGrid.setManualFetch(true);                                                               </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 680             listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681         }                                                                                                </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 682         if (isMedia) {                                                                                   </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 683             listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684         }                                                                                                </span>
<span  style=""> 685                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 686         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 687                                                                                                          </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 688         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 688         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implemðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 689         if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                 </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 690             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 690             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 691             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 691             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguratiðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 692                 for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {      </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 693                     if (modifier.isQualified(data.getModifierType())) {                                  </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 694                         modifier.modifyListGrid(new EntityFormModifierRequest()                          </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 695                                 .withListGrid(listGrid)                                                  </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 696                                 .withConfiguration(data)                                                 </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 697                                 .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())    </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 698                                 .withRowLevelSecurityService(rowLevelSecurityService));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702         }                                                                                                </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 703         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704     }                                                                                                    </span>
<span  style=""> 705                                                                                                          </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 706     protected String getMapKeyFriendlyName(Property property) {                                          </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 707         String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                      </span>
<span  style=""> 708                                                                                                          </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 709         return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710     }                                                                                                    </span>
<span  style=""> 711                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 712     @Override                                                                                            </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 713     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 713     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet dðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 714         String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                             </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 715             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 716         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 717         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 718         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 719         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 720             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 722         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 722         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 723                                                                                                          </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 724         Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                              </span>
<span  style=""> 725                                                                                                          </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 726         AdornedTargetList adornedList = ppr.getAdornedList();                                            </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 727         if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                             </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 728             &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null    </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 729             &amp;&amp; adornedList.getTargetIdProperty() != null) {                                              </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 730             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 730             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkeðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 731             result.put(&quot;linkedObjectId&quot;, containingEntityId);                                            </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 732             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 732             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733         }                                                                                                </span>
<span  style=""> 734                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 735         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736     }                                                                                                    </span>
<span  style=""> 737                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 738     @Override                                                                                            </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 739     public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {    </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 740         Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                    </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 741         List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                           </span>
<span  style=""> 742                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 743         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 744         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 745             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 746                 BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                            </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 747                 if (md.isProminent() != null &amp;&amp; md.isProminent()                                         </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 748                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {      </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 749                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 750                     headerFields.add(hf);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753         }                                                                                                </span>
<span  style=""> 754                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 755         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 756             Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                       </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 757             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 758                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 759                 if (p != null) {                                                                         </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 760                     selectizeOption.put(&quot;name&quot;, p.getValue());                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 761                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763             }                                                                                            </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 764             if (e.findProperty(&quot;id&quot;) != null) {                                                          </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 765                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                              </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 766             //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type  </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 767             } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                           </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 768                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769             }                                                                                            </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 770             if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                         </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 771                 selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772             }                                                                                            </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 773             options.add(selectizeOption);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774         }                                                                                                </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 775         result.put(&quot;options&quot;, options);                                                                  </span>
<span  style=""> 776                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 777         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778     }                                                                                                    </span>
<span  style=""> 779                                                                                                          </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 780     protected String buildSelectizeUrl(ListGrid listGrid) {                                              </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 781         HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();  </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 782         String url = request.getContextPath();                                                           </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 783         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 783         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() :ðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 784         url += &quot;/&quot; + listGrid.getContainingEntityId();                                                   </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 785         url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                               </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 786         return url;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787     }                                                                                                    </span>
<span  style=""> 788                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 789     /**                                                                                                  </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 790      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 790      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, InteðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 791      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 792      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 793      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 794      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 795      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 796      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 797      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 798      * @param sectionCrumbs                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 799      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 800      */                                                                                                  </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 801     @Deprecated                                                                                          </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 802     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 802     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 803             String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {         </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""><abbr title=" 804        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);"> 804        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,nuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805     }                                                                                                    </span>
<span  style=""> 806                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 807     /**                                                                                                  </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 808      * Populate a ListGrid with ListGridRecords.                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 809      *                                                                                                   </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 810      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 811      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 812      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 813      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 814      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 815      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 816      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 817      * @param sectionCrumbs                                                                              </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 818      * @param sortPropery                                                                                </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 819      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 820      */                                                                                                  </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 821     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 821     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 822             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 822             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, StringðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 823         // Create the list grid and set some basic attributes                                            </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 824         ListGrid listGrid = new ListGrid();                                                              </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 825         listGrid.setClassName(className);                                                                </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 826         listGrid.getHeaderFields().addAll(headerFields);                                                 </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 827         listGrid.setListGridType(type);                                                                  </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 828         listGrid.setSectionCrumbs(sectionCrumbs);                                                        </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 829         listGrid.setSectionKey(sectionKey);                                                              </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 830         listGrid.setOrder(order);                                                                        </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 831         listGrid.setIdProperty(idProperty);                                                              </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 832         listGrid.setStartIndex(drs.getStartIndex());                                                     </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 833         listGrid.setTotalRecords(drs.getTotalRecords());                                                 </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 834         listGrid.setPageSize(drs.getPageSize());                                                         </span>
<span  style=""> 835                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 836         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 837         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 837         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 838         if (section != null) {                                                                           </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 839             listGrid.setExternalEntitySectionKey(section.getUrl());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840         }                                                                                                </span>
<span  style=""> 841                                                                                                          </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 842         // format date list grid cells                                                                   </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 843         SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                          </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 844         DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                          </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 845         symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                             </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 846         formatter.setDateFormatSymbols(symbols);                                                         </span>
<span  style=""> 847                                                                                                          </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 848         // For each of the entities (rows) in the list grid, we need to build the associated             </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 849         // ListGridRecord and set the required fields on the record. These fields are the same ones      </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 850         // that are used for the header fields.                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 851         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 852             ListGridRecord record = new ListGridRecord();                                                </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 853             record.setListGrid(listGrid);                                                                </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 854             record.setDirty(e.isDirty());                                                                </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 855             record.setEntity(e);                                                                         </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 856             if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {            </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 857                 Property sort = e.findProperty(sortPropery);                                             </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 858                 record.setDisplayOrder(sort.getValue());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859             }                                                                                            </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 860             if (e.findProperty(&quot;hasError&quot;) != null) {                                                    </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 861                 Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());          </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 862                 record.setIsError(hasError);                                                             </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 863                 if (hasError) {                                                                          </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 864                     ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager        </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 865                             .getProxy().determineErrorMessageForEntity(e, record);                       </span>
<span  style=""> 866                                                                                                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 867                     if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {             </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 868                         record.setErrorKey(&quot;listgrid.record.error&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871             }                                                                                            </span>
<span  style=""> 872                                                                                                          </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 873             if (e.findProperty(&quot;progressStatus&quot;) != null) {                                              </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 874                 ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager            </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 875                         .getProxy().determineStatusMessageForEntity(e, record);                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 876                 if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                 </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 877                     record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                       </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 878                     record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880             }                                                                                            </span>
<span  style=""> 881                                                                                                          </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 882             if (e.findProperty(idProperty) != null) {                                                    </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 883                 record.setId(e.findProperty(idProperty).getValue());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884             }                                                                                            </span>
<span  style=""> 885                                                                                                          </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 886             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 887                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 888                 if (p != null) {                                                                         </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 889                     Field recordField = new Field().withName(headerField.getName())                      </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 890                             .withFriendlyName(headerField.getFriendlyName())                             </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 891                             .withOrder(p.getMetadata().getOrder());                                      </span>
<span  style=""> 892                                                                                                          </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 893                     if (headerField instanceof ComboField) {                                             </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 894                         recordField.setValue(((ComboField) headerField).getOption(p.getValue()));        </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 895                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 896                     } else {                                                                             </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 897                         if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 898                             try {                                                                        </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""><abbr title=" 899                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());"> 899                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue(ðŸ”µ</abbr></span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 900                                 String newValue = formatter.format(date);                                </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 901                                 recordField.setValue(newValue);                                          </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 902                             } catch (Exception ex) {                                                     </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 903                                 recordField.setValue(p.getValue());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 904                             }                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 905                         } else {                                                                         </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 906                             recordField.setValue(p.getValue());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 907                         }                                                                                </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 908                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909                     }                                                                                    </span>
<span  style=""> 910                                                                                                          </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 911                     recordField.setDerived(isDerivedField(headerField, recordField, p));                 </span>
<span  style=""> 912                                                                                                          </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 913                     record.getFields().add(recordField);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 914                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915             }                                                                                            </span>
<span  style=""> 916                                                                                                          </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 917             if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                     </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 918                 Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);     </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""><abbr title=" 919                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());"> 919                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue()ðŸ”µ</abbr></span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 920                 record.getHiddenFields().add(hiddenField);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 921             }                                                                                            </span>
<span  style=""> 922                                                                                                          </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 923             if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                  </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 924                 record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925             }                                                                                            </span>
<span  style=""> 926                                                                                                          </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 927             extensionManager.getProxy().modifyListGridRecord(className, record, e);                      </span>
<span  style=""> 928                                                                                                          </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 929             listGrid.getRecords().add(record);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 930         }                                                                                                </span>
<span  style=""> 931                                                                                                          </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 932         if (drs.getFirstId() != null) {                                                                  </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 933             listGrid.setFirstId(drs.getFirstId());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934         }                                                                                                </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 935         if (drs.getLastId() != null) {                                                                   </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 936             listGrid.setLastId(drs.getLastId());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937         }                                                                                                </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 938         if (drs.getUpperCount() != null) {                                                               </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 939             listGrid.setUpperCount(drs.getUpperCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940         }                                                                                                </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 941         if (drs.getLowerCount() != null) {                                                               </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 942             listGrid.setLowerCount(drs.getLowerCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943         }                                                                                                </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 944         if (drs.getFetchType() != null) {                                                                </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 945             listGrid.setFetchType(drs.getFetchType().toString());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946         }                                                                                                </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 947         if (drs.getTotalCountLessThanPageSize() != null) {                                               </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 948             listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949         }                                                                                                </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 950         if (drs.getPromptSearch() != null) {                                                             </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 951             listGrid.setPromptSearch(drs.getPromptSearch());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952         }                                                                                                </span>
<span  style=""> 953                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 954         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955     }                                                                                                    </span>
<span  style=""> 956                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 957     /**                                                                                                  </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 958      * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 958      * Determines whether or not a particular field in a record is derived. By default this checks the {@ðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 959      * for the given Property to see if something on the backend has marked it as derived                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 960      *                                                                                                   </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 961      * @param headerField the header for this recordField                                                </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 962      * @param recordField the recordField being populated                                                </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 963      * @param p the property that relates to this recordField                                            </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 964      * @return whether or not this field is derived                                                      </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 965      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 965      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StringðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 966      */                                                                                                  </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 967     protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                 </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 968         return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969     }                                                                                                    </span>
<span  style=""> 970                                                                                                          </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 971     protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {    </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style=""> 972         List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                  </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style=""> 973         List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                          </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style=""> 974         for (Property property : properties) {                                                           </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 975             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="-7343619589398456522" onmouseenter="enter('-7343619589398456522');" onmouseout="out('-7343619589398456522');" style=""> 976                 BasicFieldMetadata fmd = ((BasicFieldMetadata) (property.getMetadata()));                </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style=""> 977                 if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {            </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""><abbr title=" 978                     // Depending on visibility, field for the particular property is not created on the form"> 978                     // Depending on visibility, field for the particular property is not created on the fðŸ”µ</abbr></span>
<span class="-1035023552833691243" onmouseenter="enter('-1035023552833691243');" onmouseout="out('-1035023552833691243');" style=""><abbr title=" 979                     String fieldType = (fmd.getFieldType() == null) ? null : fmd.getFieldType().toString();"> 979                     String fieldType = (fmd.getFieldType() == null) ? null : fmd.getFieldType().toString(ðŸ”µ</abbr></span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style=""> 980                     // Create the field and set some basic attributes                                    </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style=""> 981                     Field f;                                                                             </span>
<span class="610305553007397582" onmouseenter="enter('610305553007397582');" onmouseout="out('610305553007397582');" style=""><abbr title=" 982                     if (((fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString()) || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())) || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())) || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {"> 982                     if (((fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString()) || fieldTðŸ”µ</abbr></span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title=" 983                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values"> 983                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possiðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style=""> 984                         f = new ComboField();                                                            </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style=""> 985                         String[][] enumerationValues = fmd.getEnumerationValues();                       </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 986                         for (int i = 0; i &lt; enumerationValues.length; i++) {                             </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style=""><abbr title=" 987                             enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);"> 987                             enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988                         }                                                                                </span>
<span class="-8659869156674426174" onmouseenter="enter('-8659869156674426174');" onmouseout="out('-8659869156674426174');" style=""> 989                         ((ComboField) (f)).setOptions(enumerationValues);                                </span>
<span class="-8651577951838786515" onmouseenter="enter('-8651577951838786515');" onmouseout="out('-8651577951838786515');" style=""><abbr title=" 990                         if (((fmd.getHideEnumerationIfEmpty() != null) &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()) &amp;&amp; (((ComboField) (f)).getOptions().size() == 0)) {"> 990                         if (((fmd.getHideEnumerationIfEmpty() != null) &amp;&amp; fmd.getHideEnumerationIfEmpty()ðŸ”µ</abbr></span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style=""> 991                             f.setIsVisible(false);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992                         }                                                                                </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style=""> 993                     } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                   </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style=""> 994                         f = new CodeField();                                                             </span>
<span class="-9001210285151304164" onmouseenter="enter('-9001210285151304164');" onmouseout="out('-9001210285151304164');" style=""><abbr title=" 995                     } else if ((fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString()) || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {"> 995                     } else if ((fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString()) || fieldType.ðŸ”µ</abbr></span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style=""> 996                         // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields    </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style=""> 997                         f = new RuleBuilderField();                                                      </span>
<span class="6826676435636586753" onmouseenter="enter('6826676435636586753');" onmouseout="out('6826676435636586753');" style=""> 998                         ((RuleBuilderField) (f)).setJsonFieldName(property.getName() + &quot;Json&quot;);          </span>
<span class="-7641404527583018796" onmouseenter="enter('-7641404527583018796');" onmouseout="out('-7641404527583018796');" style=""> 999                         ((RuleBuilderField) (f)).setDataWrapper(new DataWrapper());                      </span>
<span class="2943321776118249961" onmouseenter="enter('2943321776118249961');" onmouseout="out('2943321776118249961');" style="">1000                         ((RuleBuilderField) (f)).setFieldBuilder(fmd.getRuleIdentifier());               </span>
<span class="-6875881627479298980" onmouseenter="enter('-6875881627479298980');" onmouseout="out('-6875881627479298980');" style="">1001                         ((RuleBuilderField) (f)).setDisplayType(fmd.getDisplayType().toString());        </span>
<span class="-3979456483013011463" onmouseenter="enter('-3979456483013011463');" onmouseout="out('-3979456483013011463');" style="">1002                         String blankJsonString = &quot;{\&quot;data\&quot;:[]}&quot;;                                        </span>
<span class="3752468085079019841" onmouseenter="enter('3752468085079019841');" onmouseout="out('3752468085079019841');" style="">1003                         ((RuleBuilderField) (f)).setJson(blankJsonString);                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1004                         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1005                         if (dw != null) {                                                                </span>
<span class="-3674741610574562015" onmouseenter="enter('-3674741610574562015');" onmouseout="out('-3674741610574562015');" style="">1006                             ((RuleBuilderField) (f)).setDataWrapper(dw);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1007                         }                                                                                </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1008                         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {               </span>
<span class="-5019557169479094230" onmouseenter="enter('-5019557169479094230');" onmouseout="out('-5019557169479094230');" style="">1009                             ((RuleBuilderField) (f)).setRuleType(&quot;rule-builder-simple&quot;);                 </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1010                         } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) { </span>
<span class="-1143080159963709822" onmouseenter="enter('-1143080159963709822');" onmouseout="out('-1143080159963709822');" style="">1011                             ((RuleBuilderField) (f)).setRuleType(&quot;rule-builder-with-quantity&quot;);          </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1012                         } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {   </span>
<span class="4461033094989113937" onmouseenter="enter('4461033094989113937');" onmouseout="out('4461033094989113937');" style="">1013                             ((RuleBuilderField) (f)).setRuleType(&quot;rule-builder-simple-time&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1014                         }                                                                                </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1015                     } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                        </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1016                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a">1016                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1017                         // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1017                         // modal, so we&#x27;ll provision the combo field here. Available options will be set ðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1018                         // subsequent operation                                                          </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1019                         f = new ComboField();                                                            </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1020                     } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                  </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1021                         f = new MediaField();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1022                     } else {                                                                             </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1023                         // Create a default field since there was no specialized handler                 </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1024                         f = new Field();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1025                     }                                                                                    </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1026                     Boolean required = fmd.getRequiredOverride();                                        </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1027                     if (required == null) {                                                              </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1028                         required = fmd.getRequired();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029                     }                                                                                    </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1030                     Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                          </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1031                     if (allowNoValueEnum != null) {                                                      </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1032                         f.setAllowNoValueEnumOption(allowNoValueEnum);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1033                     }                                                                                    </span>
<span class="-4597099582698910293" onmouseenter="enter('-4597099582698910293');" onmouseout="out('-4597099582698910293');" style=""><abbr title="1034                     f.withName(property.getName()).withFieldType(fieldType).withFieldComponentRenderer(getFieldComponentRenderer(fmd)).withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd)).withOrder(fmd.getOrder()).withFriendlyName(fmd.getFriendlyName()).withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty()).withForeignKeyClass(fmd.getForeignKeyClass()).withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass())).withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getInheritedFromType()).withRequired(required).withReadOnly(fmd.getReadOnly()).withTranslatable(fmd.getTranslatable()).withAlternateOrdering(((Boolean) (fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING)))).withLargeEntry(fmd.isLargeEntry()).withHint(fmd.getHint()).withTooltip(fmd.getTooltip()).withHelp(fmd.getHelpText()).withTypeaheadEnabled(fmd.getEnableTypeaheadLookup()).withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity()).withAssociatedFieldName(fmd.getAssociatedFieldName());">1034                     f.withName(property.getName()).withFieldType(fieldType).withFieldComponentRenderer(geðŸ”µ</abbr></span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1035                     String defaultValue = fmd.getDefaultValue();                                         </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1036                     if (defaultValue != null) {                                                          </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1037                         defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                 </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1038                         f.withValue(defaultValue);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039                     }                                                                                    </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1040                     if (StringUtils.isBlank(f.getFriendlyName())) {                                      </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1041                         f.setFriendlyName(f.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042                     }                                                                                    </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1043                     // If is form hidden, set visible to false                                           </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1044                     if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {             </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1045                         f.setIsVisible(false);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046                     }                                                                                    </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1047                     if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                        </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1048                         f.setIsVisible(true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049                     }                                                                                    </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1050                     // Add the field to the appropriate FieldGroup                                       </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1051                     if (fmd.getGroup() == null) {                                                        </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1052                         homelessFields.add(f);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1053                     } else {                                                                             </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style=""><abbr title="1054                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());">1054                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055                     }                                                                                    </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1056                     if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                          </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1057                         fieldsWithAssociations.add(f);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061         }                                                                                                </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1062         for (Field f : homelessFields) {                                                                 </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1063             ef.addField(cmd, f, null, null, null, null);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064         }                                                                                                </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1065         for (Field f : fieldsWithAssociations) {                                                         </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1066             Field associatedField = findAssociatedField(ef, f);                                          </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1067             if (associatedField != null) {                                                               </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1068                 associatedField.setShouldRender(false);                                                  </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1069                 f.setAssociatedFieldName(associatedField.getName());                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1070             } else {                                                                                     </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1071                 f.setAssociatedFieldName(null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074     }                                                                                                    </span>
<span  style="">1075                                                                                                          </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1076     protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                 </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1077         if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                           </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1078             return fmd.getFieldComponentRendererTemplate();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079         }                                                                                                </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1080         return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081     }                                                                                                    </span>
<span  style="">1082                                                                                                          </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1083     protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                             </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1084         if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                       </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1085             return fmd.getGridFieldComponentRendererTemplate();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086         }                                                                                                </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style=""><abbr title="1087         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();">1087         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toStrinðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088     }                                                                                                    </span>
<span  style="">1089                                                                                                          </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1090     private Field findAssociatedField(EntityForm ef, Field f) {                                          </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1091         // Try on the parent object                                                                      </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1092         Field associatedField = ef.findField(f.getAssociatedFieldName());                                </span>
<span  style="">1093                                                                                                          </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1094         if (associatedField == null) {                                                                   </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1095             // Check the field&#x27;s path                                                                    </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1096             String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                          </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1097             String testPath = &quot;&quot;;                                                                        </span>
<span  style="">1098                                                                                                          </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1099             for (String path : fieldPathParts) {                                                         </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1100                 testPath += path + &quot;.&quot;;                                                                  </span>
<span  style="">1101                                                                                                          </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1102                 associatedField = ef.findField(testPath + f.getAssociatedFieldName());                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1103                 if (associatedField != null) {                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1104                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107         }                                                                                                </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1108         return associatedField;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109     }                                                                                                    </span>
<span  style="">1110                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1111     /**                                                                                                  </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1112      * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,</span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1113      * it returns the foreignKeyClass.                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1114      *                                                                                                   </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1115      * @param foreignKeyClass the {@link String} class name                                              </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1116      * @return the admin section pathname                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1117      */                                                                                                  </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1118     protected String getAdminSectionPath(String foreignKeyClass) {                                       </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1119         if (foreignKeyClass != null) {                                                                   </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1120             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1120             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(fðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1121             return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1123         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124     }                                                                                                    </span>
<span  style="">1125                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1126     /**                                                                                                  </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1127      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1127      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} iðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1128      *  the processed value of another tab.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1129      *                                                                                                   </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1130      * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where       </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style=""><abbr title="1131      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,">1131      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=ExamðŸ”µ</abbr></span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style=""><abbr title="1132      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.">1132      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; taðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1133      */                                                                                                  </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1134     protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {  </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1135         if (tabMetadataMap != null) {                                                                    </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1136             Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                     </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1137             for (String tabKey : tabMetadataKeySet) {                                                    </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1138                 TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                    </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style=""><abbr title="1139                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);">1139                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySeðŸ”µ</abbr></span>
<span  style="">1140                                                                                                          </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1141                 if (foundMatchingTab(unprocessedTabName)) {                                              </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1142                     if (!tabExists(ef, unprocessedTabName)) {                                            </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1143                         TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);        </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1144                         unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1146                 } else {                                                                                 </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1147                     if (tabExists(ef, tabKey)) {                                                         </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1148                         unprocessedTabName = tabKey;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1149                     } else {                                                                             </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1150                         unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152                 }                                                                                        </span>
<span  style="">1153                                                                                                          </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1154                 Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();               </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1155                 for (String groupKey : groupMetadataKeySet) {                                            </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1156                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1156                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocesseðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160     }                                                                                                    </span>
<span  style="">1161                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1162     /**                                                                                                  </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1163      * Search for any other tab on the target entity that has the same display value                     </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1164      *  as the value provided tab name.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1165      *                                                                                                   </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style=""><abbr title="1166      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.">1166      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message propeðŸ”µ</abbr></span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1167      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1167      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetaðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style=""><abbr title="1168      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return">1168      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method shoulðŸ”µ</abbr></span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1169      *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1170      *                                                                                                   </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style=""><abbr title="1171      * If a tab with the same display value cannot be found, then we should return null to indicate that there">1171      * If a tab with the same display value cannot be found, then we should return null to indicate that ðŸ”µ</abbr></span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1172      *  is no matching tab with the same processed tabName value.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1173      */                                                                                                  </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style=""><abbr title="1174     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {">1174     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySðŸ”µ</abbr></span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1175         for (String tabKey : tabMetadataKeySet) {                                                        </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1176             String tabName = tabMetadata.getTabName();                                                   </span>
<span  style="">1177                                                                                                          </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1178             if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                        </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1179                 return tabKey;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181         }                                                                                                </span>
<span  style="">1182                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1183         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184     }                                                                                                    </span>
<span  style="">1185                                                                                                          </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1186     protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1187         try {                                                                                            </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1188             String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);               </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style=""><abbr title="1189             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey);">1189             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateðŸ”µ</abbr></span>
<span  style="">1190                                                                                                          </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style=""><abbr title="1191             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);">1191             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidatðŸ”µ</abbr></span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1192         } catch (NoSuchMessageException e) {                                                             </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1193             LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                               </span>
<span  style="">1194                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1195             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1196         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197     }                                                                                                    </span>
<span  style="">1198                                                                                                          </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1199     protected boolean foundMatchingTab(String unprocessedTabName) {                                      </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1200         return (unprocessedTabName != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201     }                                                                                                    </span>
<span  style="">1202                                                                                                          </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1203     protected boolean tabExists(EntityForm ef, String tabKey) {                                          </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1204         return (ef.findTab(tabKey) != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205     }                                                                                                    </span>
<span  style="">1206                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1207     @Override                                                                                            </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1208     public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {           </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1209         String defaultValue = fmd.getDefaultValue();                                                     </span>
<span class="-2620125464540996757" onmouseenter="enter('-2620125464540996757');" onmouseout="out('-2620125464540996757');" style=""><abbr title="1210         if ((fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString()) || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {">1210         if ((fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString()) || fieldType.equals(SupportedFieðŸ”µ</abbr></span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1211             return null;                                                                                 </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1212         } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1213             try {                                                                                        </span>
<span class="3595937231297748556" onmouseenter="enter('3595937231297748556');" onmouseout="out('3595937231297748556');" style=""><abbr title="1214                 DecimalFormat numberFormat = ((DecimalFormat) (NumberFormat.getInstance(BroadleafRequestContext.getBroadleafRequestContext().getJavaLocale())));">1214                 DecimalFormat numberFormat = ((DecimalFormat) (NumberFormat.getInstance(BroadleafRequestCðŸ”µ</abbr></span>
<span class="-7607248322995261618" onmouseenter="enter('-7607248322995261618');" onmouseout="out('-7607248322995261618');" style="">1215                 Number parse = numberFormat.parse(defaultValue);                                         </span>
<span class="-8531113023416043438" onmouseenter="enter('-8531113023416043438');" onmouseout="out('-8531113023416043438');" style="">1216             } catch (java.lang.NumberFormatException | ParseException e) {                               </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style=""><abbr title="1217                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);">1217                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1218                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1219                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220             }                                                                                            </span>
<span class="6975260055549939200" onmouseenter="enter('6975260055549939200');" onmouseout="out('6975260055549939200');" style=""><abbr title="1221         } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString()) || fieldType.equals(SupportedFieldType.MONEY.toString())) {">1221         } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString()) || fieldType.equals(SupportedFðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1222             try {                                                                                        </span>
<span class="3595937231297748556" onmouseenter="enter('3595937231297748556');" onmouseout="out('3595937231297748556');" style=""><abbr title="1223                 DecimalFormat numberFormat = ((DecimalFormat) (NumberFormat.getInstance(BroadleafRequestContext.getBroadleafRequestContext().getJavaLocale())));">1223                 DecimalFormat numberFormat = ((DecimalFormat) (NumberFormat.getInstance(BroadleafRequestCðŸ”µ</abbr></span>
<span class="-3587356773982730962" onmouseenter="enter('-3587356773982730962');" onmouseout="out('-3587356773982730962');" style="">1224                 numberFormat.setParseBigDecimal(true);                                                   </span>
<span class="-7607248322995261618" onmouseenter="enter('-7607248322995261618');" onmouseout="out('-7607248322995261618');" style="">1225                 Number parse = numberFormat.parse(defaultValue);                                         </span>
<span class="-8531113023416043438" onmouseenter="enter('-8531113023416043438');" onmouseout="out('-8531113023416043438');" style="">1226             } catch (java.lang.NumberFormatException | ParseException e) {                               </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1227                 String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);        </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1228                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1229                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230             }                                                                                            </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1231         } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                            </span>
<span class="-2231577691331690113" onmouseenter="enter('-2231577691331690113');" onmouseout="out('-2231577691331690113');" style=""><abbr title="1232             if ((((!defaultValue.toLowerCase().equals(&quot;true&quot;)) &amp;&amp; (!defaultValue.toLowerCase().equals(&quot;false&quot;))) &amp;&amp; (!defaultValue.toUpperCase().equals(&quot;Y&quot;))) &amp;&amp; (!defaultValue.toUpperCase().equals(&quot;N&quot;))) {">1232             if ((((!defaultValue.toLowerCase().equals(&quot;true&quot;)) &amp;&amp; (!defaultValue.toLowerCase().equals(&quot;faðŸ”µ</abbr></span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style=""><abbr title="1233                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);">1233                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1234                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1235                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236             }                                                                                            </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1237         } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                               </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1238             DateFormat format = FormatUtil.getDateFormat();                                              </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1239             if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                          </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1240                 defaultValue = format.format(new Date());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1241             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1242                 try {                                                                                    </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1243                     Date date = format.parse(defaultValue);                                              </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1244                     defaultValue = format.format(date);                                                  </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1245                 } catch (ParseException e) {                                                             </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1246                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1246                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1247                     LOG.debug(msg);                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1248                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1250             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1251         }                                                                                                </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1252         return defaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253     }                                                                                                    </span>
<span  style="">1254                                                                                                          </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style=""><abbr title="1255     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {">1255     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue)ðŸ”µ</abbr></span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1256         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot;">1256         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot;ðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style=""><abbr title="1257                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;;">1257                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258     }                                                                                                    </span>
<span  style="">1259                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1260     @Override                                                                                            </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1261     public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) { </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1262         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1263             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {               </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1264                 entityForm.removeField(p.getName());                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267     }                                                                                                    </span>
<span  style="">1268                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1269     @Override                                                                                            </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1270     public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)              </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1271             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1272         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1273         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1274         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1275     }                                                                                                    </span>
<span  style="">1276                                                                                                          </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1277     protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {               </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1278         if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                         </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1279             return sectionCrumbs.get(0).getSectionIdentifier();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1280         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1281             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283     }                                                                                                    </span>
<span  style="">1284                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1285     @Override                                                                                            </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1286     public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)   </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1287             throws ServiceException {                                                                    </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1288         ef.setCeilingEntityClassname(cmd.getCeilingType());                                              </span>
<span  style="">1289                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1290         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span  style="">1291                                                                                                          </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style=""><abbr title="1292         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),">1292         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType()ðŸ”µ</abbr></span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1293                 sectionIdentifier);                                                                      </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1294         if (section != null) {                                                                           </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1295             ef.setSectionKey(section.getUrl());                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1296         } else {                                                                                         </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1297             ef.setSectionKey(cmd.getCeilingType());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298         }                                                                                                </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1299         ef.setSectionCrumbsImpl(sectionCrumbs);                                                          </span>
<span  style="">1300                                                                                                          </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1301         setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                    </span>
<span  style="">1302                                                                                                          </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1303         setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                </span>
<span  style="">1304                                                                                                          </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1305         populateDropdownToOneFields(ef, cmd);                                                            </span>
<span  style="">1306                                                                                                          </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1307         extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308     }                                                                                                    </span>
<span  style="">1309                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1310     /**                                                                                                  </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1311      * This method is invoked when EntityForms are created and is meant to provide a hook to add         </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1312      * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically    </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1313      * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.         </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1314      * @param ef                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1315      */                                                                                                  </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1316     protected void addAdditionalFormActions(EntityForm ef) {                                             </span>
<span  style="">1317                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318     }                                                                                                    </span>
<span  style="">1319                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1320     @Override                                                                                            </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style=""><abbr title="1321     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)">1321     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbsðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1322             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1323         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1324         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1325         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1326         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1327         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328     }                                                                                                    </span>
<span  style="">1329                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1330     @Override                                                                                            </span>
<span class="8573589250450800886" onmouseenter="enter('8573589250450800886');" onmouseout="out('8573589250450800886');" style=""><abbr title="1331     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {">1331     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; seðŸ”µ</abbr></span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1332         // Get the empty form with appropriate fields                                                    </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1333         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1334         String idProperty = adminEntityService.getIdProperty(cmd);                                       </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1335         ef.setId(entity.findProperty(idProperty).getValue());                                            </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1336         ef.setEntityType(entity.getType()[0]);                                                           </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1337         populateEntityFormFieldValues(cmd, entity, ef);                                                  </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1338         Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1339         if (p != null) {                                                                                 </span>
<span class="-4711796121260791216" onmouseenter="enter('-4711796121260791216');" onmouseout="out('-4711796121260791216');" style="">1340             ef.setMainEntityName(exploitProtectionService.htmlDecode(p.getValue()));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1341         }                                                                                                </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1342         extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343     }                                                                                                    </span>
<span  style="">1344                                                                                                          </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style=""><abbr title="1345     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {">1345     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef)ðŸ”µ</abbr></span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1346         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1347             FieldMetadata fmd = p.getMetadata();                                                         </span>
<span  style="">1348                                                                                                          </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1349             if (shouldHideField(fmd, entity)) {                                                          </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1350                 if (fmd instanceof CollectionMetadata) {                                                 </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1351                     ef.removeListGrid(p.getName());                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1352                 } else {                                                                                 </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1353                     ef.removeField(p.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1356         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357     }                                                                                                    </span>
<span  style="">1358                                                                                                          </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1359     protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1360         if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1361             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1362         }                                                                                                </span>
<span  style="">1363                                                                                                          </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1364         for (String property : fmd.getShowIfFieldEquals().keySet()) {                                    </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1365             List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                              </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1366             Property entityProp = entity.findProperty(property);                                         </span>
<span  style="">1367                                                                                                          </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1368             if (entityProp == null || values.contains(entityProp.getValue())) {                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1369                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1372         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373     }                                                                                                    </span>
<span  style="">1374                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1375     @Override                                                                                            </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1376     public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {         </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1377         // Set the appropriate property values                                                           </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1378         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1379             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-8772536944278065431" onmouseenter="enter('-8772536944278065431');" onmouseout="out('-8772536944278065431');" style="">1380                 BasicFieldMetadata basicFM = ((BasicFieldMetadata) (p.getMetadata()));                   </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1381                 Property entityProp = entity.findProperty(p.getName());                                  </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style=""><abbr title="1382                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());">1382                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibiliðŸ”µ</abbr></span>
<span class="6784490744082544622" onmouseenter="enter('6784490744082544622');" onmouseout="out('6784490744082544622');" style="">1383                 // always show special map fields                                                        </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1384                 if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                       </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1385                     explicitlyShown = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386                 }                                                                                        </span>
<span class="-1062677642774357309" onmouseenter="enter('-1062677642774357309');" onmouseout="out('-1062677642774357309');" style="">1387                 if ((entityProp == null) &amp;&amp; explicitlyShown) {                                           </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1388                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1389                     if (field != null) {                                                                 </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1390                         field.setValue(null);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391                     }                                                                                    </span>
<span class="-8721284759380438173" onmouseenter="enter('-8721284759380438173');" onmouseout="out('-8721284759380438173');" style=""><abbr title="1392                 } else if ((entityProp == null) &amp;&amp; (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType()))) {">1392                 } else if ((entityProp == null) &amp;&amp; (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.gðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1393                     ef.removeField(p.getName());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1394                 } else {                                                                                 </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1395                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1396                     if (field != null) {                                                                 </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1397                         if (entityProp != null) {                                                        </span>
<span class="-6737350053493654606" onmouseenter="enter('-6737350053493654606');" onmouseout="out('-6737350053493654606');" style=""><abbr title="1398                             // protect against null - can happen with password confirmation fields (i.e. admin user)">1398                             // protect against null - can happen with password confirmation fields (i.e. ðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1399                             field.setDirty(entityProp.getIsDirty());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1400                         }                                                                                </span>
<span class="6448993857341408394" onmouseenter="enter('6448993857341408394');" onmouseout="out('6448993857341408394');" style=""><abbr title="1401                         if (((basicFM.getFieldType() == SupportedFieldType.RULE_SIMPLE) || (basicFM.getFieldType() == SupportedFieldType.RULE_SIMPLE_TIME)) || (basicFM.getFieldType() == SupportedFieldType.RULE_WITH_QUANTITY)) {">1401                         if (((basicFM.getFieldType() == SupportedFieldType.RULE_SIMPLE) || (basicFM.getFiðŸ”µ</abbr></span>
<span class="285745193669911943" onmouseenter="enter('285745193669911943');" onmouseout="out('285745193669911943');" style="">1402                             RuleBuilderField rbf = ((RuleBuilderField) (field));                         </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1403                             if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                  </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1404                                 String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();   </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1405                                 rbf.setJson(json);                                                       </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1406                                 DataWrapper dw = convertJsonToDataWrapper(json);                         </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1407                                 if (dw != null) {                                                        </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1408                                     rbf.setDataWrapper(dw);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1409                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411                         }                                                                                </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1412                         if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                        </span>
<span class="7143722617009606315" onmouseenter="enter('7143722617009606315');" onmouseout="out('7143722617009606315');" style="">1413                             field.setValue(exploitProtectionService.htmlDecode(entityProp.getValue()));  </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1414                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="3444799967200218565" onmouseenter="enter('3444799967200218565');" onmouseout="out('3444799967200218565');" style="">1415                             MediaField mf = ((MediaField) (field));                                      </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1416                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1416                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.gðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1417                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1417                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodeðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style=""><abbr title="1418                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1418                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldTyðŸ”µ</abbr></span>
<span class="-3562013668137858657" onmouseenter="enter('-3562013668137858657');" onmouseout="out('-3562013668137858657');" style=""><abbr title="1419                             field.setValue((basicFM.isLargeEntry() != null) &amp;&amp; basicFM.isLargeEntry() ? entityProp.getValue() : exploitProtectionService.htmlDecode(entityProp.getValue()));">1419                             field.setValue((basicFM.isLargeEntry() != null) &amp;&amp; basicFM.isLargeEntry() ? eðŸ”µ</abbr></span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1420                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1426     }                                                                                                    </span>
<span  style="">1427                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1428     /**                                                                                                  </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1429      * When using Thymeleaf, we need to convert the JSON string back to                                  </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1430      * a DataWrapper object because Thymeleaf escapes JSON strings.                                      </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1431      * Thymeleaf uses it&#x27;s own object de-serializer                                                      </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1432      * see: https://github.com/thymeleaf/thymeleaf/issues/84                                             </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1433      * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                 </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1434      * @param json                                                                                       </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1435      * @return DataWrapper                                                                               </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1436      * @throws IOException                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1437      */                                                                                                  </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1438     protected DataWrapper convertJsonToDataWrapper(String json) {                                        </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1439         ObjectMapper mapper = new ObjectMapper();                                                        </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1440         DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                 </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1441         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1441         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, nuðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1442         module.addDeserializer(DataDTO.class, dtoDeserializer);                                          </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1443         mapper.registerModule(module);                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1444         try {                                                                                            </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1445             return mapper.readValue(json, DataWrapper.class);                                            </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1446         } catch (IOException e) {                                                                        </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1447             throw new RuntimeException(e);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449     }                                                                                                    </span>
<span  style="">1450                                                                                                          </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1451     protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1452             throws ServiceException {                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1453         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1454             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1455                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1456                 if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                      </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1457                         &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1458                     // Get the records                                                                   </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1459                     PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()            </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1460                             .withCeilingEntityClassname(fmd.getForeignKeyClass());                       </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style=""><abbr title="1461                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();">1461                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecoðŸ”µ</abbr></span>
<span  style="">1462                                                                                                          </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1463                     // Determine the id field                                                            </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1464                     String idProp = null;                                                                </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1465                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1465                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1466                     for (Property foreignP : foreignClassMd.getProperties()) {                           </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1467                         if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                      </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1468                             BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata(); </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1469                             if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {               </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1470                                 idProp = foreignP.getName();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473                     }                                                                                    </span>
<span  style="">1474                                                                                                          </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1475                     if (idProp == null) {                                                                </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1476                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1476                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeigðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477                     }                                                                                    </span>
<span  style="">1478                                                                                                          </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1479                     // Determine the display field                                                       </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1480                     String displayProp = fmd.getLookupDisplayProperty();                                 </span>
<span  style="">1481                                                                                                          </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1482                     // Build the options map                                                             </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1483                     Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                       </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1484                     for (Entity row : rows) {                                                            </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1485                         Property prop = row.findProperty(displayProp);                                   </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1486                         if (prop == null) {                                                              </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1487                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; +">1487                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + ðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1488                                     ef.getCeilingEntityClassname() + &quot;]&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1489                         } else {                                                                         </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1490                             String displayValue = prop.getDisplayValue();                                </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1491                             if (StringUtils.isBlank(displayValue)) {                                     </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1492                                 displayValue = prop.getValue();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493                             }                                                                            </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1494                             options.put(row.findProperty(idProp).getValue(), displayValue);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1495                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496                     }                                                                                    </span>
<span  style="">1497                                                                                                          </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1498                     // Set the options on the entity field                                               </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1499                     ComboField cf = (ComboField) ef.findField(p.getName());                              </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1500                     cf.setOptions(options);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1502             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1503         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504     }                                                                                                    </span>
<span  style="">1505                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1506     @Override                                                                                            </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1507     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1507     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; coðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1508             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1509         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1510         populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                           </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1511         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1512         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1513         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1514     }                                                                                                    </span>
<span  style="">1515                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1516     @Override                                                                                            </span>
<span class="-2291192084967046521" onmouseenter="enter('-2291192084967046521');" onmouseout="out('-2291192084967046521');" style=""><abbr title="1517     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {">1517     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collecðŸ”µ</abbr></span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1518         // Get the form with values for this entity                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1519         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1520         // Attach the sub-collection list grids and specialty UI support                                 </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1521         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1522             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1523                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1524             }                                                                                            </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1525             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1526                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527             }                                                                                            </span>
<span class="-4369878938823349306" onmouseenter="enter('-4369878938823349306');" onmouseout="out('-4369878938823349306');" style="">1528             if ((collectionRecords != null) &amp;&amp; (!collectionRecords.isEmpty())) {                         </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1529                 DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());             </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1530                 String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();         </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1531                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1531                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p,ðŸ”µ</abbr></span>
<span class="1590765947089782318" onmouseenter="enter('1590765947089782318');" onmouseout="out('1590765947089782318');" style="">1532                 CollectionMetadata md = ((CollectionMetadata) (p.getMetadata()));                        </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1533                 if (md instanceof BasicCollectionMetadata) {                                             </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style=""><abbr title="1534                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);">1534                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCruðŸ”µ</abbr></span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1535                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1535                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResuðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1536                     if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {              </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1537                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1537                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1538                         ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);     </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1539                         for (ClassTree entityType : entityTypes) {                                       </span>
<span class="2001589726232325224" onmouseenter="enter('2001589726232325224');" onmouseout="out('2001589726232325224');" style=""><abbr title="1540                             ListGridAction ADD = new ListGridAction(ListGridAction.ADD).withButtonClass(AddMethodType.PERSIST_EMPTY == ((BasicCollectionMetadata) (md)).getAddMethodType() ? &quot;sub-list-grid-add-empty&quot; : &quot;sub-list-grid-add&quot;).withActionTargetEntity(entityType.getFullyQualifiedClassname()).withUrlPostfix(&quot;/add&quot;).withIconClass(&quot;fa fa-plus&quot;).withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));">1540                             ListGridAction ADD = new ListGridAction(ListGridAction.ADD).withButtonClass(AðŸ”µ</abbr></span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1541                             actionGroup.getListGridActions().add(0, ADD);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542                         }                                                                                </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1543                         listGrid.addToolbarActionGroup(actionGroup);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1544                     } else {                                                                             </span>
<span class="-8721883599444789816" onmouseenter="enter('-8721883599444789816');" onmouseout="out('-8721883599444789816');" style=""><abbr title="1545                         listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY == ((BasicCollectionMetadata) (md)).getAddMethodType() ? DefaultListGridActions.ADD_EMPTY : DefaultListGridActions.ADD);">1545                         listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY == ((BasicCollectðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1547                 } else {                                                                                 </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1548                     listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1549                 }                                                                                        </span>
<span class="-5636004434191694594" onmouseenter="enter('-5636004434191694594');" onmouseout="out('-5636004434191694594');" style="">1550                 if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab()) != null) {         </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1551                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1552                 } else {                                                                                 </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1553                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556         }                                                                                                </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1557         if (CollectionUtils.isEmpty(ef.getActions())) {                                                  </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1558             ef.addAction(DefaultEntityFormActions.SAVE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559         }                                                                                                </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1560         addDeleteActionIfAllowed(ef, cmd, entity);                                                       </span>
<span class="-1573379781634260780" onmouseenter="enter('-1573379781634260780');" onmouseout="out('-1573379781634260780');" style="">1561         addDuplicateActionIfAllowed(ef, cmd);                                                            </span>
<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1562         setReadOnlyState(ef, cmd, entity);                                                               </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1563         // check for fields that should be hidden based on annotations                                   </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1564         setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                          </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1565         extensionManager.getProxy().modifyDetailEntityForm(ef);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566     }                                                                                                    </span>
<span  style="">1567                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1568     /**                                                                                                  </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1569      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1569      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/bðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1570      * delete an entity for the following cases:                                                         </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1571      * &lt;ol&gt;                                                                                              </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style=""><abbr title="1572      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by">1572      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represenðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1573      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1573      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1574      *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the       </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1575      *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1576      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1577      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1578      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1579      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1580      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1581      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1582      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1583      * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1584      */                                                                                                  </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1585     protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {   </span>
<span class="9176849152277833812" onmouseenter="enter('9176849152277833812');" onmouseout="out('9176849152277833812');" style="">1586         if (isDeletionAllowed(entityForm, cmd, entity)) {                                                </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="">1587             entityForm.addAction(DefaultEntityFormActions.DELETE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589     }                                                                                                    </span>
<span  style="">1590                                                                                                          </span>
<span class="-2375440634479242577" onmouseenter="enter('-2375440634479242577');" onmouseout="out('-2375440634479242577');" style=""><abbr title="1591     protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd, final Entity entity) {">1591     protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd, final EntitðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1592         try {                                                                                            </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1593             String securityEntityClassname = getSecurityClassname(entityForm, cmd);                      </span>
<span class="-4824979268204802710" onmouseenter="enter('-4824979268204802710');" onmouseout="out('-4824979268204802710');" style=""><abbr title="1594             adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.REMOVE);">1594             adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.REMOVE)ðŸ”µ</abbr></span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1595         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1596             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1597                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1599         }                                                                                                </span>
<span class="-6544480517582328932" onmouseenter="enter('-6544480517582328932');" onmouseout="out('-6544480517582328932');" style="">1600         final AdminUser persistentAdminUser = adminRemoteSecurityService.getPersistentAdminUser();       </span>
<span class="589184337694528002" onmouseenter="enter('589184337694528002');" onmouseout="out('589184337694528002');" style=""><abbr title="1601         return rowLevelSecurityService.canUpdate(persistentAdminUser, entity) &amp;&amp; rowLevelSecurityService.canRemove(persistentAdminUser, entity);">1601         return rowLevelSecurityService.canUpdate(persistentAdminUser, entity) &amp;&amp; rowLevelSecurityService.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1602     }                                                                                                    </span>
<span  style="">1603                                                                                                          </span>
<span class="-2618384530695401271" onmouseenter="enter('-2618384530695401271');" onmouseout="out('-2618384530695401271');" style="">1604     protected void addDuplicateActionIfAllowed(final EntityForm entityForm, final ClassMetadata cmd) {   </span>
<span class="-4074855000497140283" onmouseenter="enter('-4074855000497140283');" onmouseout="out('-4074855000497140283');" style="">1605         if (isDuplicationAllowed(entityForm, cmd)) {                                                     </span>
<span class="6780575287202109079" onmouseenter="enter('6780575287202109079');" onmouseout="out('6780575287202109079');" style="">1606             entityForm.addAction(DefaultEntityFormActions.DUPLICATE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1608     }                                                                                                    </span>
<span  style="">1609                                                                                                          </span>
<span class="2750172847360880677" onmouseenter="enter('2750172847360880677');" onmouseout="out('2750172847360880677');" style="">1610     protected boolean isDuplicationAllowed(final EntityForm entityForm, final ClassMetadata cmd) {       </span>
<span class="5761145246382260648" onmouseenter="enter('5761145246382260648');" onmouseout="out('5761145246382260648');" style="">1611         final String securityClassname = getSecurityClassname(entityForm, cmd);                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1612         try {                                                                                            </span>
<span class="7910151490387293712" onmouseenter="enter('7910151490387293712');" onmouseout="out('7910151490387293712');" style="">1613             adminRemoteSecurityService.securityCheck(securityClassname, EntityOperationType.ADD);        </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1614         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1615             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1616                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1618         }                                                                                                </span>
<span class="3631252767096747840" onmouseenter="enter('3631252767096747840');" onmouseout="out('3631252767096747840');" style="">1619         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(securityClassname);                   </span>
<span class="-5333941689174751140" onmouseenter="enter('-5333941689174751140');" onmouseout="out('-5333941689174751140');" style=""><abbr title="1620         return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp; rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), securityClassname, cmd);">1620         return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp; rowLevelSecurityServðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1621     }                                                                                                    </span>
<span  style="">1622                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1623     /**                                                                                                  </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1624      * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                        </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1625      * &lt;ol&gt;                                                                                              </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1626      *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                  </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1627      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1627      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class namðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1628      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1628      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style=""><abbr title="1629      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the">1629      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to ðŸ”µ</abbr></span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1630      *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1631      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1632      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1633      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1634      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1635      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1636      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1637      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1638      * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1639      */                                                                                                  </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1640     protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {           </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1641         boolean readOnly = true;                                                                         </span>
<span  style="">1642                                                                                                          </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1643         // If all of the fields are read only, we&#x27;ll mark the form as such                               </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1644         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1645             FieldMetadata fieldMetadata = property.getMetadata();                                        </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1646             if (fieldMetadata instanceof BasicFieldMetadata) {                                           </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1647                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1647                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetaðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1648                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1649                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1650                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1651             } else {                                                                                     </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1652                 readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                             </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1653                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1654                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1655                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1656             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657         }                                                                                                </span>
<span  style="">1658                                                                                                          </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1659         if (!readOnly) {                                                                                 </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1660             // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1660             // If the user does not have edit permissions, we will go ahead and make the form read only tðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1661             try {                                                                                        </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1662                 String securityEntityClassname = getSecurityClassname(entityForm, cmd);                  </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style=""><abbr title="1663                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);">1663                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDðŸ”µ</abbr></span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1664             } catch (ServiceException e) {                                                               </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1665                 if (e instanceof SecurityServiceException) {                                             </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1666                     readOnly = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1667                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669         }                                                                                                </span>
<span  style="">1670                                                                                                          </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1671         // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1671         // if the normal admin security service has not deemed this readonly and the all of the propertieðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1672         // are not readonly, then check the row-level security                                           </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1673         if (!readOnly) {                                                                                 </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1674             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1674             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUsðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1675         }                                                                                                </span>
<span  style="">1676                                                                                                          </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1677         if (readOnly) {                                                                                  </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1678             entityForm.setReadOnly();                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1679             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1679             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement imðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1680             if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {             </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1681                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1681                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLeveðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1682                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1682                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1683                     for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {  </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1684                         if (modifier.isQualified(data.getModifierType())) {                              </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1685                             modifier.modifyEntityForm(new EntityFormModifierRequest()                    </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1686                                     .withEntityForm(entityForm)                                          </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1687                                     .withConfiguration(data)                                             </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1688                                     .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())</span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1689                                     .withEntity(entity)                                                  </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1690                                     .withRowLevelSecurityService(rowLevelSecurityService));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1694             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1695         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696     }                                                                                                    </span>
<span  style="">1697                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1698     /**                                                                                                  </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1699      * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                 </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1700      * @param entityForm                                                                                 </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1701      * @param cmd                                                                                        </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1702      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1703      */                                                                                                  </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1704     protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                    </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1705         String securityEntityClassname = entityForm.getCeilingEntityClassname();                         </span>
<span  style="">1706                                                                                                          </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1707         if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                        </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1708             securityEntityClassname = cmd.getSecurityCeilingType();                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1709         } else {                                                                                         </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1710             if (entityForm.getDynamicFormInfos() != null) {                                              </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1711                 for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {           </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1712                     if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                      </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1713                         securityEntityClassname = info.getSecurityCeilingClassName();                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1714                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1716                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1717             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1718         }                                                                                                </span>
<span  style="">1719                                                                                                          </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1720         return securityEntityClassname;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1721     }                                                                                                    </span>
<span  style="">1722                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1723     @Override                                                                                            </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1724     public void populateEntityFormFields(EntityForm ef, Entity entity) {                                 </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1725         populateEntityFormFields(ef, entity, true, true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1726     }                                                                                                    </span>
<span  style="">1727                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1728     @Override                                                                                            </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style=""><abbr title="1729     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {">1729     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean popuðŸ”µ</abbr></span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1730         if (populateId) {                                                                                </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1731             ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732         }                                                                                                </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1733         if (populateType) {                                                                              </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1734             ef.setEntityType(entity.getType()[0]);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735         }                                                                                                </span>
<span  style="">1736                                                                                                          </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1737         for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                   </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1738             Property entityProp = entity.findProperty(entry.getKey());                                   </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1739             if (entityProp != null) {                                                                    </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1740                 entry.getValue().setValue(entityProp.getValue());                                        </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1741                 entry.getValue().setDisplayValue(entityProp.getDisplayValue());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1742             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1743         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1744     }                                                                                                    </span>
<span  style="">1745                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1746     @Override                                                                                            </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style=""><abbr title="1747     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {">1747     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedLiðŸ”µ</abbr></span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style=""><abbr title="1748         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());">1748         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdPropeðŸ”µ</abbr></span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1749         Property entityProp = entity.findProperty(ef.getIdProperty());                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1750         field.setValue(entityProp.getValue());                                                           </span>
<span  style="">1751                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1752         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1753             field = ef.findField(adornedList.getSortField());                                            </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1754             entityProp = entity.findProperty(adornedList.getSortField());                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1755             if (field != null &amp;&amp; entityProp != null) {                                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1756                 field.setValue(entityProp.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1758         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1759     }                                                                                                    </span>
<span  style="">1760                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1761     @Override                                                                                            </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1762     public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                              </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1763         Field field = ef.findField(&quot;priorKey&quot;);                                                          </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1764         Property entityProp = entity.findProperty(&quot;key&quot;);                                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1765         if (field != null &amp;&amp; entityProp != null) {                                                       </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1766             field.setValue(entityProp.getValue());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1767         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1768     }                                                                                                    </span>
<span  style="">1769                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1770     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1771     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1771     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style=""><abbr title="1772             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1772             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1773             throws ServiceException {                                                                    </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1774         EntityForm ef = createStandardAdornedEntityForm();                                               </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1775         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1775         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1776     }                                                                                                    </span>
<span  style="">1777                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1778     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1779     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1779     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1780             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1780             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1781             throws ServiceException {                                                                    </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1782         ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                 </span>
<span  style="">1783                                                                                                          </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1784         // Get the metadata for this adorned field                                                       </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1785         PersistencePackageRequest request = PersistencePackageRequest.adorned()                          </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1786                 .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                      </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1787                 .withAdornedList(adornedList)                                                            </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1788                 .withSectionCrumbs(sectionCrumbs);                                                       </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1789         request.setAddOperationInspect(isAdd);                                                           </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1790         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1790         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSðŸ”µ</abbr></span>
<span  style="">1791                                                                                                          </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1792         List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                         </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1793         if (isViewCollectionItem) {                                                                      </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1794             Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1795         } else {                                                                                         </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1796             // We want our entity form to only render the maintained adorned target fields               </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1797             for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1798                 Property p = collectionMetadata.getPMap().get(targetFieldName);                          </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1799                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1799                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadatðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1800                     ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);    </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1801                     entityFormProperties.add(p);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1802                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1803             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1804         }                                                                                                </span>
<span  style="">1805                                                                                                          </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1806         // Set the maintained fields on the form                                                         </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1807         setEntityFormFields(collectionMetadata, ef, entityFormProperties);                               </span>
<span  style="">1808                                                                                                          </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1809         // Add these two additional hidden fields that are required for persistence                      </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1810         Field f = new Field()                                                                            </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1811                 .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1812                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1813                 .withValue(parentId);                                                                    </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1814         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1815                                                                                                          </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1816         f = new Field()                                                                                  </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1817                 .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1818                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1819                 .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                              </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1820         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1821                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1822         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1823             f = new Field()                                                                              </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1824                     .withName(adornedList.getSortField())                                                </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1825                     .withFieldType(SupportedFieldType.HIDDEN.toString());                                </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1826             ef.addHiddenField(collectionMetadata, f);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1827         }                                                                                                </span>
<span  style="">1828                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1829         ef.setParentId(parentId);                                                                        </span>
<span  style="">1830                                                                                                          </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1831         extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                 </span>
<span  style="">1832                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1833         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1834     }                                                                                                    </span>
<span  style="">1835                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1836     @Override                                                                                            </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1837     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1837     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1838             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1839         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1840         return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841     }                                                                                                    </span>
<span  style="">1842                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1843     @Override                                                                                            </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1844     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1844     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1845             throws ServiceException {                                                                    </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1846         ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                           </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1847                 .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);        </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1848         ef.setEntityType(foreignKey.getForeignKeyClass());                                               </span>
<span  style="">1849                                                                                                          </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1850         Field keyField;                                                                                  </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1851         if (!mapMd.getForceFreeFormKeys()) {                                                             </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1852             // We will use a combo field to render the key choices                                       </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1853             ComboField temp = new ComboField();                                                          </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1854             temp.withName(&quot;key&quot;)                                                                         </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1855                     .withFieldType(&quot;combo_field&quot;)                                                        </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1856                     .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                        </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1857             if (mapMd.getKeys() != null) {                                                               </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1858                 // The keys can be explicitly set in the annotation...                                   </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1859                 temp.setOptions(mapMd.getKeys());                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1860             } else {                                                                                     </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1861                 // Or they could be based on a different entity                                          </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1862                 PersistencePackageRequest ppr = PersistencePackageRequest.standard()                     </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1863                         .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                 </span>
<span  style="">1864                                                                                                          </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1865                 DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();         </span>
<span  style="">1866                                                                                                          </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1867                 for (Entity entity : drs.getRecords()) {                                                 </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style=""><abbr title="1868                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();">1868                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getVaðŸ”µ</abbr></span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1869                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1869                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayFieldðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1870                     temp.putOption(keyValue, keyDisplayValue);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1871                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1872             }                                                                                            </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1873             keyField = temp;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1874         } else {                                                                                         </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1875             keyField = new Field().withName(&quot;key&quot;)                                                       </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1876                                 .withFieldType(SupportedFieldType.STRING.toString())                     </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1877                                 .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1878         }                                                                                                </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1879         keyField.setRequired(true);                                                                      </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1880         ef.addMapKeyField(cmd, keyField);                                                                </span>
<span  style="">1881                                                                                                          </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1882         // Set the fields for this form                                                                  </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1883         List&lt;Property&gt; mapFormProperties;                                                                </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">1884         if (mapMd.isSimpleValue()) {                                                                     </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">1885             ef.setIdProperty(&quot;key&quot;);                                                                     </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">1886             mapFormProperties = new ArrayList&lt;&gt;();                                                       </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">1887             Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                             </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">1888             mapFormProperties.add(valueProp);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1889         } else {                                                                                         </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">1890             String valueClassName = mapStructure.getValueClassName();                                    </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">1891             List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                </span>
<span  style="">1892                                                                                                          </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">1893             mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                     </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">1894             filterMapFormProperties(mapFormProperties, classNames);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1895         }                                                                                                </span>
<span  style="">1896                                                                                                          </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">1897         setEntityFormFields(cmd, ef, mapFormProperties);                                                 </span>
<span  style="">1898                                                                                                          </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1899         Field f = new Field()                                                                            </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">1900                 .withName(&quot;priorKey&quot;)                                                                    </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1901                 .withFieldType(SupportedFieldType.HIDDEN.toString());                                    </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">1902         ef.addHiddenField(cmd, f);                                                                       </span>
<span  style="">1903                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1904         ef.setParentId(parentId);                                                                        </span>
<span  style="">1905                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1906         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1907     }                                                                                                    </span>
<span  style="">1908                                                                                                          </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">1909     protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                   </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">1910         PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);         </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">1911         List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1912         try {                                                                                            </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">1913             Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                          </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">1914             for (Class clazz : mapEntities) {                                                            </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">1915                 classNames.add(clazz.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1916             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">1917         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">1918             classNames.add(valueClassName);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1919         }                                                                                                </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">1920         return classNames;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1921     }                                                                                                    </span>
<span  style="">1922                                                                                                          </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style=""><abbr title="1923     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {">1923     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNameðŸ”µ</abbr></span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">1924         CollectionUtils.filter(mapFormProperties, new Predicate() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1925             @Override                                                                                    </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">1926             public boolean evaluate(Object object) {                                                     </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">1927                 Property p = (Property) object;                                                          </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">1928                 for (String availType : p.getMetadata().getAvailableToTypes()) {                         </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">1929                     if (classNames.contains(availType)) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1930                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1931                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1932                 }                                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1933                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1934             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1935         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1936     }                                                                                                    </span>
<span  style="">1937                                                                                                          </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">1938     protected EntityForm createStandardEntityForm() {                                                    </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">1939         EntityForm ef = new EntityForm();                                                                </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1940         ef.addAction(DefaultEntityFormActions.SAVE);                                                     </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1941         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1942     }                                                                                                    </span>
<span  style="">1943                                                                                                          </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">1944     protected EntityForm createStandardAdornedEntityForm() {                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">1945         EntityForm ef = new EntityForm();                                                                </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">1946         ef.addAction(DefaultAdornedEntityFormActions.Add);                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1947         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1948     }                                                                                                    </span>
<span  style="">1949                                                                                                          </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">1950     protected VisibilityEnum[] getGridHiddenVisibilities() {                                             </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">1951         return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1952     }                                                                                                    </span>
<span  style="">1953                                                                                                          </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">1954     protected VisibilityEnum[] getFormHiddenVisibilities() {                                             </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">1955         return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1956     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1957 }                                                                                                        </span>






























































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18  package org.broadleafcommerce.openadmin.web.service;                                                              </span>
<span  style="">  19                                                                                                                    </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  21  import org.apache.commons.collections.Predicate;                                                                  </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  22  import org.apache.commons.lang.ArrayUtils;                                                                        </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  23  import org.apache.commons.lang.BooleanUtils;                                                                      </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  24  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  25  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  26  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  27  import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                                 </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  28  import org.broadleafcommerce.common.exception.ExceptionHelper;                                                    </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  29  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  30  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  31  import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                          </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  32  import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                                 </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="">  33  import org.broadleafcommerce.common.i18n.service.TranslationService;                                              </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  34  import org.broadleafcommerce.common.locale.service.LocaleService;                                                 </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  35  import org.broadleafcommerce.common.media.domain.MediaDto;                                                        </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  36  import org.broadleafcommerce.common.persistence.EntityConfiguration;                                              </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  37 +import org.broadleafcommerce.common.persistence.EntityDuplicator;                                                 </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  38  import org.broadleafcommerce.common.presentation.client.AddMethodType;                                            </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  39  import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                               </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  40  import org.broadleafcommerce.common.presentation.client.LookupType;                                               </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  41  import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                           </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  42  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  43  import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                           </span>

<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  44  import org.broadleafcommerce.common.util.BLCMessageUtils;                                                         </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  45  import org.broadleafcommerce.common.util.FormatUtil;                                                              </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  46  import org.broadleafcommerce.common.util.StringUtil;                                                              </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  48  import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                                       </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  49  import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                                     </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  50  import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                               </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  51  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  52  import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                         </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  53  import org.broadleafcommerce.openadmin.dto.ClassTree;                                                             </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  54  import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                                    </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  55  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  56  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  57  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  58  import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                            </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  59  import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                           </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  60  import org.broadleafcommerce.openadmin.dto.MapStructure;                                                          </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  61  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  62  import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                          </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  63  import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                           </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                               </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  65  import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                                   </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  66  import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                                       </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  67  import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                          </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  68  import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                                </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  69  import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                                   </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  70  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                                </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  71  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;                   </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  72  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                            </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  73  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;                       </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  74  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                         </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  75  import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;            </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  76  import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                           </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style="">  77  import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;                 </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style="">  78  import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                         </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  79  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                             </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style="">  80  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;                      </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  81  import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;                  </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style="">  82  import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                            </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  83  import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                                 </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  84  import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                               </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style="">  85  import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                         </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style="">  86  import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                                    </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style="">  87  import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                         </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style="">  88  import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                             </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style="">  89  import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                                       </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style="">  90  import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                                 </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style="">  91  import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                                </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  92  import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                           </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  93  import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                                  </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style="">  94  import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                                     </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  95  import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                                </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  96  import org.broadleafcommerce.openadmin.web.form.entity.Field;                                                     </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style="">  97  import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                                       </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style="">  98  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                               </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style="">  99  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                           </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style=""> 100  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                              </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style=""> 101  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                          </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 102  import org.codehaus.jettison.json.JSONObject;                                                                     </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 103  import org.springframework.beans.factory.annotation.Value;                                                        </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 104  import org.springframework.context.MessageSource;                                                                 </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 105  import org.springframework.context.NoSuchMessageException;                                                        </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 106  import org.springframework.stereotype.Service;                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 107 +                                                                                                                  </span>
<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style=""> 108  import com.fasterxml.jackson.core.Version;                                                                        </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style=""> 109  import com.fasterxml.jackson.databind.ObjectMapper;                                                               </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style=""> 110  import com.fasterxml.jackson.databind.module.SimpleModule;                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +                                                                                                                  </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style=""> 112  import java.io.IOException;                                                                                       </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 113  import java.math.BigDecimal;                                                                                      </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style=""> 114  import java.text.DateFormat;                                                                                      </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style=""> 115  import java.text.DateFormatSymbols;                                                                               </span>


<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style=""> 116  import java.text.ParseException;                                                                                  </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 117  import java.text.SimpleDateFormat;                                                                                </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 118  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 119  import java.util.Arrays;                                                                                          </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 120  import java.util.Collections;                                                                                     </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 121  import java.util.Date;                                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 122  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 123  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 124  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 125  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 126  import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 127  import java.util.Set;                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 128 +                                                                                                                  </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 129  import javax.annotation.Resource;                                                                                 </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style=""> 130  import javax.persistence.ManyToOne;                                                                               </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style=""> 131  import javax.persistence.OneToOne;                                                                                </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 132  import javax.servlet.http.HttpServletRequest;                                                                     </span>
<span  style=""> 133                                                                                                                    </span>
<span  style=""> 134                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 135  /**                                                                                                               </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 136   * @author Andre Azzolini (apazzolini)                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 137   */                                                                                                               </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 138  @Service(&quot;blFormBuilderService&quot;)                                                                                  </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 139  public class FormBuilderServiceImpl implements FormBuilderService {                                               </span>
<span  style=""> 140                                                                                                                    </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 141      private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                               </span>
<span  style=""> 142                                                                                                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 143      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span  style=""> 144                                                                                                                    </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 145      @Resource(name = &quot;blAdminEntityService&quot;)                                                                      </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 146      protected AdminEntityService adminEntityService;                                                              </span>
<span  style=""> 147                                                                                                                    </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 148      @Resource (name = &quot;blAdminNavigationService&quot;)                                                                 </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 149      protected AdminNavigationService navigationService;                                                           </span>
<span  style=""> 150                                                                                                                    </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 151      @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                             </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 152      protected FormBuilderExtensionManager extensionManager;                                                       </span>
<span  style=""> 153                                                                                                                    </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 154      @Resource(name=&quot;blEntityConfiguration&quot;)                                                                       </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 155      protected EntityConfiguration entityConfiguration;                                                            </span>
<span  style=""> 156                                                                                                                    </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 157      @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                                </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 158      protected SecurityVerifier adminRemoteSecurityService;                                                        </span>
<span  style=""> 159                                                                                                                    </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 160      @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                                 </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 161      protected RowLevelSecurityService rowLevelSecurityService;                                                    </span>
<span  style=""> 162                                                                                                                    </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 163      @Resource(name = &quot;blMediaBuilderService&quot;)                                                                     </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 164      protected MediaBuilderService mediaBuilderService;                                                            </span>
<span  style=""> 165                                                                                                                    </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 166      @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                                    </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 167      protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                                 </span>
<span  style=""> 168                                                                                                                    </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 169      @Resource(name = &quot;blAdminNavigationService&quot;)                                                                  </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 170      protected AdminNavigationService adminNavigationService;                                                      </span>
<span  style=""> 171                                                                                                                    </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +    @Resource(name = &quot;blEntityDuplicator&quot;)                                                                        </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +    protected EntityDuplicator duplicator;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 174 +                                                                                                                  </span>
<span class="-8242037663383389708" onmouseenter="enter('-8242037663383389708');" onmouseout="out('-8242037663383389708');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +    @Resource(name = &quot;blDynamicEntityDao&quot;)                                                                        </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +    protected DynamicEntityDao dynamicEntityDao;                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 177 +                                                                                                                  </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 178      @Resource(name = &quot;blLocaleService&quot;)                                                                           </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 179      protected LocaleService localeService;                                                                        </span>
<span  style=""> 180                                                                                                                    </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style=""> 181      @Resource(name = &quot;blTranslationService&quot;)                                                                      </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style=""> 182      protected TranslationService translationService;                                                              </span>
<span  style=""> 183                                                                                                                    </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 184      @Value(&quot;${use.translation.search:false}&quot;)                                                                     </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 185      protected boolean useTranslationSearch;                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 186 +                                                                                                                  </span>
<span  style=""> 187                                                                                                                    </span>



<span class="8033614225945187624" onmouseenter="enter('8033614225945187624');" onmouseout="out('8033614225945187624');" style=""> 188      protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[] {                     </span>
<span class="-8766489859370232859" onmouseenter="enter('-8766489859370232859');" onmouseout="out('-8766489859370232859');" style=""> 189              VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 190      };                                                                                                            </span>
<span  style=""> 191                                                                                                                    </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style=""> 192      protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {                     </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style=""> 193              VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 194      };                                                                                                            </span>
<span  style=""> 195                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 196      @Override                                                                                                     </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 197      public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 197      public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 198              throws ServiceException {                                                                             </span>
<span  style=""> 199                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 200          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 201          ListGrid.Type type = ListGrid.Type.MAIN;                                                                  </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 202          String idProperty = &quot;id&quot;;                                                                                 </span>
<span  style=""> 203                                                                                                                    </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 204          FieldWrapper wrapper = new FieldWrapper();                                                                </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 205          ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 206          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 207              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 208                  BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                                    </span>
<span  style=""> 209                                                                                                                    </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 210                  if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                           </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 211                      idProperty = fmd.getName();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212                  }                                                                                                 </span>
<span  style=""> 213                                                                                                                    </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 214                  if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                                </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 215                          &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {              </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 216                      Field hf = createHeaderField(p, fmd);                                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 217                      headerFields.add(hf);                                                                         </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 218                      defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219                  }                                                                                                 </span>
<span  style=""> 220                                                                                                                    </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 221                  if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                             </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""> 222                      wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225          }                                                                                                         </span>
<span  style=""> 226                                                                                                                    </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style=""> 227          if (useTranslationSearch) {                                                                               </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style=""> 228              getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229          }                                                                                                         </span>
<span  style=""> 230                                                                                                                    </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 231          ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 231          ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idPropertðŸ”µ</abbr></span>
<span  style=""> 232                                                                                                                    </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 233          if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                             </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 234              // Set the first column to be able to link to the main entity                                         </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 235              listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 236          } else {                                                                                                  </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 237              String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 237              String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType(ðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 238              message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;                      </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 239              LOG.error(message);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240          }                                                                                                         </span>
<span  style=""> 241                                                                                                                    </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 242          Date c = new Date();                                                                                      </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 243          String friendlyName = &quot;listGrid&quot; + c.getTime();                                                           </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 244          // Set up the filter builder params                                                                       </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 245          listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                         </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 246          listGrid.setFriendlyName(friendlyName);                                                                   </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 247          listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                                  </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 248          if (CollectionUtils.isEmpty(wrapper.getFields())) {                                                       </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 249              wrapper.setFields(defaultWrapperFields);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250          }                                                                                                         </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 251          listGrid.setFieldWrapper(wrapper);                                                                        </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 252          listGrid.setHideFriendlyName(true);                                                                       </span>
<span  style=""> 253                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 254          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                                </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 255          listGrid.setJson(blankJsonString);                                                                        </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 256          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 257          if (dw != null) {                                                                                         </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 258              listGrid.setDataWrapper(dw);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259          }                                                                                                         </span>
<span  style=""> 260                                                                                                                    </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 261          listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                         </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 262          listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                                </span>
<span  style=""> 263                                                                                                                    </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 264          extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                            </span>
<span  style=""> 265                                                                                                                    </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 266          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267      }                                                                                                             </span>
<span  style=""> 268                                                                                                                    </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style=""> 269      private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {      </span>
<span  style=""> 270                                                                                                                    </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style=""> 271          TranslatedEntity translatedEntity;                                                                        </span>
<span  style=""> 272                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 273          try {                                                                                                     </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style=""> 274              translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                         </span>
<span  style=""> 275                                                                                                                    </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style=""> 276              FieldDTO localeField = new FieldDTO();                                                                </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style=""> 277              localeField.setId(&quot;translationLocale&quot;);                                                               </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style=""> 278              localeField.setLabel(&quot;Translation locale&quot;);                                                           </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style=""> 279              localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                           </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style=""> 280              localeField.setInput(&quot;select&quot;);                                                                       </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style=""> 281              localeField.setType(&quot;string&quot;);                                                                        </span>
<span  style=""> 282                                                                                                                    </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""> 283              List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();     </span>
<span  style=""> 284                                                                                                                    </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style=""> 285              Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                                        </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style=""> 286              for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                                 </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style=""> 287                  localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288              }                                                                                                     </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style=""> 289              localeField.setValues((new JSONObject(localeMap)).toString());                                        </span>
<span  style=""> 290                                                                                                                    </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style=""> 291              defaultWrapperFields.add(localeField);                                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 292          } catch (Exception e) {                                                                                   </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style=""> 293              translatedEntity = null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295      }                                                                                                             </span>
<span  style=""> 296                                                                                                                    </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 297      protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {                      </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 298          FieldDTO fieldDTO = new FieldDTO();                                                                       </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 299          //translate the label to display                                                                          </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 300          String label = field.getFriendlyName();                                                                   </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 301          BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();                   </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 302          MessageSource messages = context.getMessageSource();                                                      </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 303          if (messages != null) {                                                                                   </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 304              label = messages.getMessage(label, null, label, context.getJavaLocale());                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305          }                                                                                                         </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 306          fieldDTO.setLabel(label);                                                                                 </span>
<span  style=""> 307                                                                                                                    </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 308          fieldDTO.setId(field.getName());                                                                          </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 309          if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                              </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 310              fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                                     </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 311          } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                         </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 312              fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                                     </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 313          } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 313          } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 314              fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                                  </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 315          } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                                      </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 316              fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                                  </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 317          } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                                        </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 318              fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                              </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 319              fieldDTO.setInput(&quot;select&quot;);                                                                          </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 320              fieldDTO.setType(&quot;string&quot;);                                                                           </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 321              String[][] enumerationValues = fmd.getEnumerationValues ();                                           </span>






<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 322              Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                                        </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 323              for (int i = 0; i &lt; enumerationValues.length; i++) {                                                  </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 324                  enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325              }                                                                                                     </span>
<span  style=""> 326                                                                                                                    </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 327              fieldDTO.setValues(new JSONObject(enumMap).toString());                                               </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 328          } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                                       </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 329              fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                                </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 330              fieldDTO.setType(&quot;string&quot;);                                                                           </span>
<span  style=""> 331                                                                                                                    </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 332              AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 332              AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClaðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 333              if (section != null) {                                                                                </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 334                  String sectionKey = section.getUrl().substring(1);                                                </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 335                  fieldDTO.setSelectizeSectionKey(sectionKey);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 336              } else {                                                                                              </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 337                  fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 339          } else {                                                                                                  </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 340              fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341          }                                                                                                         </span>
<span  style=""> 342                                                                                                                    </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 343          return fieldDTO;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344      }                                                                                                             </span>
<span  style=""> 345                                                                                                                    </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 346      protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                                       </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 347          Field hf;                                                                                                 </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 348          if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                                 </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 349                  fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                            </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 350                  fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                          </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 351                  fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                                </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 352              hf = new ComboField();                                                                                </span>
<span class="5290847828500288961" onmouseenter="enter('5290847828500288961');" onmouseout="out('5290847828500288961');" style=""> 353              ((ComboField) hf).setOptions(fmd.getEnumerationValues());                                             </span>





<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 354          } else {                                                                                                  </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 355              hf = new Field();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356          }                                                                                                         </span>
<span  style=""> 357                                                                                                                    </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 358          hf.withName(p.getName())                                                                                  </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""> 359            .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())  </span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 360            .withOrder(fmd.getGridOrder())                                                                          </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 361            .withColumnWidth(fmd.getColumnWidth())                                                                  </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 362            .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                            </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 363            .withForeignKeyClass(fmd.getForeignKeyClass())                                                          </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 364            .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                               </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""> 365            .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())      </span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 366            .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                         </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 367          String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();                     </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 368          hf.setFieldType(fieldType);                                                                               </span>
<span  style=""> 369                                                                                                                    </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 370          return hf;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371      }                                                                                                             </span>
<span  style=""> 372                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 373      @Override                                                                                                     </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""> 374      public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field,      </span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 375              String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                                  </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 376              throws ServiceException {                                                                             </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 377          FieldMetadata fmd = field.getMetadata();                                                                  </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 378          // Get the class metadata for this particular field                                                       </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 379          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);               </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 380          if (field != null) {                                                                                      </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 381              ppr.setSectionEntityField(field.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382          }                                                                                                         </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""> 383          ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();    </span>
<span  style=""> 384                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 385          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 386          ListGrid.Type type = null;                                                                                </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 387          boolean editable = false;                                                                                 </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 388          boolean sortable = false;                                                                                 </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 389          boolean readOnly = false;                                                                                 </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 390          boolean hideIdColumn = false;                                                                             </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 391          boolean canFilterAndSort = true;                                                                          </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 392          boolean modalSingleSelectable = false;                                                                    </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 393          boolean modalMultiSelectable = false;                                                                     </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 394          boolean selectize = false;                                                                                </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 395          boolean isMedia = false;                                                                                  </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 396          boolean isLookup = false;                                                                                 </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 397          String sortProperty = null;                                                                               </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 398          FieldWrapper wrapper = new FieldWrapper();                                                                </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 399          ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                             </span>
<span  style=""> 400                                                                                                                    </span>
<span  style=""> 401                                                                                                                    </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 402          String idProperty = &quot;id&quot;;                                                                                 </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 403          for (Property property : cmd.getProperties()) {                                                           </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 404              if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                           </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""> 405                      SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;        </span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 406                      //make sure it&#x27;s a property for this entity - not an association                              </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 407                      !property.getName().contains(&quot;.&quot;)) {                                                          </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 408                  idProperty = property.getName();                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 409                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411          }                                                                                                         </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""> 412          // Get the header fields for this list grid. Note that the header fields are different depending on the   </span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 413          // kind of field this is.                                                                                 </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 414          if (fmd instanceof BasicFieldMetadata) {                                                                  </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 415              readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                                  </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 416              modalSingleSelectable = true;                                                                         </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 417              for (Property p : cmd.getProperties()) {                                                              </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 418                  if (p.getMetadata() instanceof BasicFieldMetadata) {                                              </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 419                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 420                                                                                                                    </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 421                      if (SupportedFieldType.ID.equals(md.getFieldType())) {                                        </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 422                          idProperty = md.getName();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                      }                                                                                             </span>
<span  style=""> 424                                                                                                                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 425                      if (md.isProminent() != null &amp;&amp; md.isProminent()                                              </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 426                              &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {           </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 427                          Field hf = createHeaderField(p, md);                                                      </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 428                          headerFields.add(hf);                                                                     </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 429                          defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430                      }                                                                                             </span>
<span  style=""> 431                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 432                      if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                           </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 433                          Field f = createHeaderField(p, md);                                                       </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 434                          wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437              }                                                                                                     </span>
<span  style=""> 438                                                                                                                    </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 439              type = ListGrid.Type.TO_ONE;                                                                          </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 440          } else if (fmd instanceof BasicCollectionMetadata) {                                                      </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 441              BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                          </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 442              readOnly = !bcm.isMutable();                                                                          </span>
<span  style=""> 443                                                                                                                    </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 444              if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                             </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 445                  isLookup = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446              }                                                                                                     </span>
<span  style=""> 447                                                                                                                    </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 448              if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                                  </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 449                  Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                                   </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 450                  if (p != null) {                                                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 451                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 452                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 453                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 454                      headerFields.add(hf);                                                                         </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 455                      wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 457              } else {                                                                                              </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 458                  for (Property p : cmd.getProperties()) {                                                          </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 459                      if (p.getMetadata() instanceof BasicFieldMetadata) {                                          </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 460                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 461                          if (md.isProminent() != null &amp;&amp; md.isProminent()                                          </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 462                                  &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {       </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 463                              Field hf = createHeaderField(p, md);                                                  </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 464                              headerFields.add(hf);                                                                 </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 465                              defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466                          }                                                                                         </span>
<span  style=""> 467                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 468                          if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                       </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 469                              Field f = createHeaderField(p, md);                                                   </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 470                              wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474              }                                                                                                     </span>
<span  style=""> 475                                                                                                                    </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 476              type = ListGrid.Type.BASIC;                                                                           </span>
<span  style=""> 477                                                                                                                    </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 478              if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 478              if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 479                  editable = true;                                                                                  </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 480              } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                           </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 481                  selectize = true;                                                                                 </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 482                  modalSingleSelectable = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 483              } else {                                                                                              </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 484                  modalSingleSelectable = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485              }                                                                                                     </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 486              sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                             </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 487              if (sortable) {                                                                                       </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 488                  sortProperty = bcm.getSortProperty();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489              }                                                                                                     </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 490          } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                              </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 491              modalSingleSelectable = true;                                                                         </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 492              readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                                      </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 493              AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;                        </span>
<span  style=""> 494                                                                                                                    </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 495              if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {                 </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 496                  isLookup = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497              }                                                                                                     </span>
<span  style=""> 498                                                                                                                    </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""> 499              if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {      </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 500                  selectize = true;                                                                                 </span>
<span  style=""> 501                                                                                                                    </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 502                  Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                                 </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 503                  if (p != null) {                                                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 504                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 505                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 506                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 507                      headerFields.add(hf);                                                                         </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 508                      wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 510              } else {                                                                                              </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 511                  for (String fieldName : atcmd.getGridVisibleFields()) {                                           </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 512                      Property p = cmd.getPMap().get(fieldName);                                                    </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 513                      if (p != null) {                                                                              </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 514                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span  style=""> 515                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 516                          Field hf = createHeaderField(p, md);                                                      </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 517                          headerFields.add(hf);                                                                     </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 518                          wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519                      }                                                                                             </span>
<span  style=""> 520                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522              }                                                                                                     </span>
<span  style=""> 523                                                                                                                    </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 524              type = ListGrid.Type.ADORNED;                                                                         </span>
<span  style=""> 525                                                                                                                    </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 526              if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                            </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 527                  editable = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528              }                                                                                                     </span>
<span  style=""> 529                                                                                                                    </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 530              AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()                 </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""> 531                      .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);      </span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 532              sortable = StringUtils.isNotBlank(adornedList.getSortField());                                        </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 533              if (sortable) {                                                                                       </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 534                  sortProperty = adornedList.getSortField();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535              }                                                                                                     </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 536          } else if (fmd instanceof MapMetadata) {                                                                  </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 537              readOnly = !((MapMetadata) fmd).isMutable();                                                          </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 538              MapMetadata mmd = (MapMetadata) fmd;                                                                  </span>
<span  style=""> 539                                                                                                                    </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 540              Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                               </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 541              BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                                     </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 542              keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                                     </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 543              Field hf = createHeaderField(p2, keyMd);                                                              </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 544              headerFields.add(hf);                                                                                 </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 545              wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                                   </span>
<span  style=""> 546                                                                                                                    </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 547              if (mmd.isSimpleValue()) {                                                                            </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 548                  Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                              </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 549                  BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();                    </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 550                  valueMd.setFriendlyName(&quot;Value&quot;);                                                                 </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 551                  hf = createHeaderField(valueProperty, valueMd);                                                   </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 552                  headerFields.add(hf);                                                                             </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 553                  wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                             </span>
<span  style=""> 554                                                                                                                    </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 555                  idProperty = &quot;key&quot;;                                                                               </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 556                  hideIdColumn = true;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 557              } else {                                                                                              </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 558                  for (Property p : cmd.getProperties()) {                                                          </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 559                      if (p.getMetadata() instanceof BasicFieldMetadata) {                                          </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 560                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 561                          String valueClassName = mmd.getValueClassName();                                          </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 562                          if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                                 </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 563                              Class&lt;?&gt; clazz;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 564                              try {                                                                                 </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 565                                  clazz = Class.forName(mmd.getValueClassName());                                   </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 566                              } catch (ClassNotFoundException e) {                                                  </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 567                                  throw ExceptionHelper.refineException(e);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568                              }                                                                                     </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 569                              java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 569                              java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 570                              ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);                     </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 571                              if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 571                              if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getNameðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 572                                  valueClassName = manyToOne.targetEntity().getName();                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 573                              } else {                                                                              </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 574                                  OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);                    </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 575                                  if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 575                                  if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getNaðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 576                                      valueClassName = oneToOne.targetEntity().getName();                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579                          }                                                                                         </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 580                          if (md.getTargetClass().equals(valueClassName)) {                                         </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 581                              if (md.isProminent() != null &amp;&amp; md.isProminent()                                      </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 582                                      &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {   </span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 583                                  hf = createHeaderField(p, md);                                                    </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 584                                  headerFields.add(hf);                                                             </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 585                                  defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span  style=""> 586                                                                                                                    </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 587                                  // Is this a media listgrid                                                       </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 588                                  if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                                   </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 589                                      isMedia = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591                              }                                                                                     </span>
<span  style=""> 592                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 593                              if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                   </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 594                                  wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599              }                                                                                                     </span>
<span  style=""> 600                                                                                                                    </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 601              type = ListGrid.Type.MAP;                                                                             </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 602              editable = true;                                                                                      </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 603              canFilterAndSort = false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604          }                                                                                                         </span>
<span  style=""> 605                                                                                                                    </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 606          String ceilingType = &quot;&quot;;                                                                                  </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 607          if (fmd instanceof BasicFieldMetadata) {                                                                  </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 608              ceilingType = cmd.getCeilingType();                                                                   </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 609          } else if (fmd instanceof CollectionMetadata) {                                                           </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 610              ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611          }                                                                                                         </span>
<span  style=""> 612                                                                                                                    </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 613          if (CollectionUtils.isEmpty(headerFields)) {                                                              </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 614              String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 614              String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; andðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 615                      StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                                  </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""> 616              if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {        </span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 617                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 617                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetColleðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 618              } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {                </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 619                  message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 619                  message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollectioðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 620              } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                                </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 621                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 621                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 622              } else {                                                                                              </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 623                  message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624              }                                                                                                     </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 625              LOG.error(message);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626          }                                                                                                         </span>
<span  style=""> 627                                                                                                                    </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 628          ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 628          ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 629          listGrid.setSubCollectionFieldName(field.getName());                                                      </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 630          listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                          </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 631          if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                                    </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 632              listGrid.setFriendlyName(field.getName());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633          }                                                                                                         </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 634          listGrid.setContainingEntityId(containingEntityId);                                                       </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 635          listGrid.setIsReadOnly(readOnly);                                                                         </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 636          listGrid.setHideIdColumn(hideIdColumn);                                                                   </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 637          listGrid.setCanFilterAndSort(canFilterAndSort);                                                           </span>
<span  style=""> 638                                                                                                                    </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 639          // Set up the filter builder params                                                                       </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 640          Date c = new Date();                                                                                      </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 641          String friendlyName = field.getMetadata().getFriendlyName();                                              </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 642          String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                              </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 643          listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                                       </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 644          listGrid.setFriendlyName(friendlyName);                                                                   </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 645          listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                                  </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 646          if (CollectionUtils.isEmpty(wrapper.getFields())) {                                                       </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 647              wrapper.setFields(defaultWrapperFields);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648          }                                                                                                         </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 649          listGrid.setFieldWrapper(wrapper);                                                                        </span>
<span  style=""> 650                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 651          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                                </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 652          listGrid.setJson(blankJsonString);                                                                        </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 653          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 654          if (dw != null) {                                                                                         </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 655              listGrid.setDataWrapper(dw);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656          }                                                                                                         </span>
<span  style=""> 657                                                                                                                    </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 658          if (editable) {                                                                                           </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 659              listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660          }                                                                                                         </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 661          if (readOnly) {                                                                                           </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 662              listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663          }                                                                                                         </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 664          if (sortable) {                                                                                           </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 665              listGrid.setCanFilterAndSort(false);                                                                  </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 666              listGrid.setIsSortable(true);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667          }                                                                                                         </span>
<span  style=""> 668                                                                                                                    </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 669          if (modalSingleSelectable) {                                                                              </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 670              if (readOnly) {                                                                                       </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 671                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 671                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(trðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 672              } else {                                                                                              </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 673                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                 </span>
<span  style=""> 674                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 676          }                                                                                                         </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 677          listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                                </span>
<span  style=""> 678                                                                                                                    </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 679          if (selectize) {                                                                                          </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 680              listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                                </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 681              listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682          }                                                                                                         </span>
<span  style=""> 683                                                                                                                    </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 684          if (modalMultiSelectable) {                                                                               </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 685              listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                                      </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 686              listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687          }                                                                                                         </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 688          listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                              </span>
<span  style=""> 689                                                                                                                    </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 690          if (fmd.getManualFetch()) {                                                                               </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 691              listGrid.setManualFetch(true);                                                                        </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 692              listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693          }                                                                                                         </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 694          if (isMedia) {                                                                                            </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 695              listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696          }                                                                                                         </span>
<span  style=""> 697                                                                                                                    </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 698          extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                            </span>
<span  style=""> 699                                                                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 700          //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 700          //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the ðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 701          if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                          </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 702              EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 702              EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 703              for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 703              for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getDatðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 704                  for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {               </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 705                      if (modifier.isQualified(data.getModifierType())) {                                           </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 706                          modifier.modifyListGrid(new EntityFormModifierRequest()                                   </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 707                                  .withListGrid(listGrid)                                                           </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 708                                  .withConfiguration(data)                                                          </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 709                                  .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())             </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 710                                  .withRowLevelSecurityService(rowLevelSecurityService));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714          }                                                                                                         </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 715          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716      }                                                                                                             </span>
<span  style=""> 717                                                                                                                    </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 718      protected String getMapKeyFriendlyName(Property property) {                                                   </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 719          String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                               </span>
<span  style=""> 720                                                                                                                    </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 721          return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722      }                                                                                                             </span>
<span  style=""> 723                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 724      @Override                                                                                                     </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 725      public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 725      public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, PropeðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 726          String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                                      </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 727              throws ServiceException {                                                                             </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 728          FieldMetadata fmd = field.getMetadata();                                                                  </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 729          // Get the class metadata for this particular field                                                       </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 730          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);               </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 731          if (field != null) {                                                                                      </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 732              ppr.setSectionEntityField(field.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733          }                                                                                                         </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""> 734          ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();    </span>
<span  style=""> 735                                                                                                                    </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 736          Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                                       </span>
<span  style=""> 737                                                                                                                    </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 738          AdornedTargetList adornedList = ppr.getAdornedList();                                                     </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 739          if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                                      </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 740              &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null             </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 741              &amp;&amp; adornedList.getTargetIdProperty() != null) {                                                       </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 742              result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 742              result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 743              result.put(&quot;linkedObjectId&quot;, containingEntityId);                                                     </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 744              result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 744              result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745          }                                                                                                         </span>
<span  style=""> 746                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 747          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 748      }                                                                                                             </span>
<span  style=""> 749                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 750      @Override                                                                                                     </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 751      public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {             </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 752          Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                             </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 753          List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                                    </span>
<span  style=""> 754                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 755          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 756          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 757              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 758                  BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                     </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 759                  if (md.isProminent() != null &amp;&amp; md.isProminent()                                                  </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 760                          &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {               </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 761                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 762                      headerFields.add(hf);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765          }                                                                                                         </span>
<span  style=""> 766                                                                                                                    </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 767          for (Entity e : drs.getRecords()) {                                                                       </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 768              Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                                </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 769              for (Field headerField : headerFields) {                                                              </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 770                  Property p = e.findProperty(headerField.getName());                                               </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 771                  if (p != null) {                                                                                  </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 772                      selectizeOption.put(&quot;name&quot;, p.getValue());                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 773                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775              }                                                                                                     </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 776              if (e.findProperty(&quot;id&quot;) != null) {                                                                   </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 777                  selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                                       </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 778              //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type           </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 779              } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                                    </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 780                  selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781              }                                                                                                     </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 782              if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                                  </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 783                  selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784              }                                                                                                     </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 785              options.add(selectizeOption);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786          }                                                                                                         </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 787          result.put(&quot;options&quot;, options);                                                                           </span>
<span  style=""> 788                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 789          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790      }                                                                                                             </span>
<span  style=""> 791                                                                                                                    </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 792      protected String buildSelectizeUrl(ListGrid listGrid) {                                                       </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 793          HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();           </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 794          String url = request.getContextPath();                                                                    </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 795          url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 795          url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + liðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 796          url += &quot;/&quot; + listGrid.getContainingEntityId();                                                            </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 797          url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                                        </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 798          return url;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799      }                                                                                                             </span>
<span  style=""> 800                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 801      /**                                                                                                           </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 802       * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 802       * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StriðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 803       * @param className                                                                                           </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 804       * @param headerFields                                                                                        </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 805       * @param type                                                                                                </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 806       * @param drs                                                                                                 </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 807       * @param sectionKey                                                                                          </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 808       * @param order                                                                                               </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 809       * @param idProperty                                                                                          </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 810       * @param sectionCrumbs                                                                                       </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 811       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 812       */                                                                                                           </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 813      @Deprecated                                                                                                   </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 814      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 814      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResulðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 815              String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {                  </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""> 816         return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817      }                                                                                                             </span>
<span  style=""> 818                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 819      /**                                                                                                           </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 820       * Populate a ListGrid with ListGridRecords.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 821       *                                                                                                            </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 822       * @param className                                                                                           </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 823       * @param headerFields                                                                                        </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 824       * @param type                                                                                                </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 825       * @param drs                                                                                                 </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 826       * @param sectionKey                                                                                          </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 827       * @param order                                                                                               </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 828       * @param idProperty                                                                                          </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 829       * @param sectionCrumbs                                                                                       </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 830       * @param sortPropery                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 831       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 832       */                                                                                                           </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 833      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 833      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResulðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 834              String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 834              String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 835          // Create the list grid and set some basic attributes                                                     </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 836          ListGrid listGrid = new ListGrid();                                                                       </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 837          listGrid.setClassName(className);                                                                         </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 838          listGrid.getHeaderFields().addAll(headerFields);                                                          </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 839          listGrid.setListGridType(type);                                                                           </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 840          listGrid.setSectionCrumbs(sectionCrumbs);                                                                 </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 841          listGrid.setSectionKey(sectionKey);                                                                       </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 842          listGrid.setOrder(order);                                                                                 </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 843          listGrid.setIdProperty(idProperty);                                                                       </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 844          listGrid.setStartIndex(drs.getStartIndex());                                                              </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 845          listGrid.setTotalRecords(drs.getTotalRecords());                                                          </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 846          listGrid.setPageSize(drs.getPageSize());                                                                  </span>
<span  style=""> 847                                                                                                                    </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 848          String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                              </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 849          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 849          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier)ðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 850          if (section != null) {                                                                                    </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 851              listGrid.setExternalEntitySectionKey(section.getUrl());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852          }                                                                                                         </span>
<span  style=""> 853                                                                                                                    </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 854          // format date list grid cells                                                                            </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 855          SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                                   </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 856          DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                                   </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 857          symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                                      </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 858          formatter.setDateFormatSymbols(symbols);                                                                  </span>
<span  style=""> 859                                                                                                                    </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 860          // For each of the entities (rows) in the list grid, we need to build the associated                      </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 861          // ListGridRecord and set the required fields on the record. These fields are the same ones               </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 862          // that are used for the header fields.                                                                   </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 863          for (Entity e : drs.getRecords()) {                                                                       </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 864              ListGridRecord record = new ListGridRecord();                                                         </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 865              record.setListGrid(listGrid);                                                                         </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 866              record.setDirty(e.isDirty());                                                                         </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 867              record.setEntity(e);                                                                                  </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 868              if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {                     </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 869                  Property sort = e.findProperty(sortPropery);                                                      </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 870                  record.setDisplayOrder(sort.getValue());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871              }                                                                                                     </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 872              if (e.findProperty(&quot;hasError&quot;) != null) {                                                             </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 873                  Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());                   </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 874                  record.setIsError(hasError);                                                                      </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 875                  if (hasError) {                                                                                   </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 876                      ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager                 </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 877                              .getProxy().determineErrorMessageForEntity(e, record);                                </span>
<span  style=""> 878                                                                                                                    </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 879                      if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                      </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 880                          record.setErrorKey(&quot;listgrid.record.error&quot;);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 882                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883              }                                                                                                     </span>
<span  style=""> 884                                                                                                                    </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 885              if (e.findProperty(&quot;progressStatus&quot;) != null) {                                                       </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 886                  ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager                     </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 887                          .getProxy().determineStatusMessageForEntity(e, record);                                   </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 888                  if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                          </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 889                      record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                                </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 890                      record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892              }                                                                                                     </span>
<span  style=""> 893                                                                                                                    </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 894              if (e.findProperty(idProperty) != null) {                                                             </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 895                  record.setId(e.findProperty(idProperty).getValue());                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896              }                                                                                                     </span>
<span  style=""> 897                                                                                                                    </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 898              for (Field headerField : headerFields) {                                                              </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 899                  Property p = e.findProperty(headerField.getName());                                               </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 900                  if (p != null) {                                                                                  </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 901                      Field recordField = new Field().withName(headerField.getName())                               </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 902                              .withFriendlyName(headerField.getFriendlyName())                                      </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 903                              .withOrder(p.getMetadata().getOrder());                                               </span>
<span  style=""> 904                                                                                                                    </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 905                      if (headerField instanceof ComboField) {                                                      </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 906                          recordField.setValue(((ComboField) headerField).getOption(p.getValue()));                 </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 907                          recordField.setDisplayValue(p.getDisplayValue());                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 908                      } else {                                                                                      </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 909                          if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 910                              try {                                                                                 </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""> 911                                  Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());      </span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 912                                  String newValue = formatter.format(date);                                         </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 913                                  recordField.setValue(newValue);                                                   </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 914                              } catch (Exception ex) {                                                              </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 915                                  recordField.setValue(p.getValue());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916                              }                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 917                          } else {                                                                                  </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 918                              recordField.setValue(p.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919                          }                                                                                         </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 920                          recordField.setDisplayValue(p.getDisplayValue());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 921                      }                                                                                             </span>
<span  style=""> 922                                                                                                                    </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 923                      recordField.setDerived(isDerivedField(headerField, recordField, p));                          </span>
<span  style=""> 924                                                                                                                    </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 925                      record.getFields().add(recordField);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927              }                                                                                                     </span>
<span  style=""> 928                                                                                                                    </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 929              if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                              </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 930                  Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""> 931                  hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());       </span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 932                  record.getHiddenFields().add(hiddenField);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933              }                                                                                                     </span>
<span  style=""> 934                                                                                                                    </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 935              if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                           </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 936                  record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937              }                                                                                                     </span>
<span  style=""> 938                                                                                                                    </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 939              extensionManager.getProxy().modifyListGridRecord(className, record, e);                               </span>
<span  style=""> 940                                                                                                                    </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 941              listGrid.getRecords().add(record);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 942          }                                                                                                         </span>
<span  style=""> 943                                                                                                                    </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 944          if (drs.getFirstId() != null) {                                                                           </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 945              listGrid.setFirstId(drs.getFirstId());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946          }                                                                                                         </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 947          if (drs.getLastId() != null) {                                                                            </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 948              listGrid.setLastId(drs.getLastId());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949          }                                                                                                         </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 950          if (drs.getUpperCount() != null) {                                                                        </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 951              listGrid.setUpperCount(drs.getUpperCount());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952          }                                                                                                         </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 953          if (drs.getLowerCount() != null) {                                                                        </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 954              listGrid.setLowerCount(drs.getLowerCount());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955          }                                                                                                         </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 956          if (drs.getFetchType() != null) {                                                                         </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 957              listGrid.setFetchType(drs.getFetchType().toString());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958          }                                                                                                         </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 959          if (drs.getTotalCountLessThanPageSize() != null) {                                                        </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 960              listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 961          }                                                                                                         </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 962          if (drs.getPromptSearch() != null) {                                                                      </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 963              listGrid.setPromptSearch(drs.getPromptSearch());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964          }                                                                                                         </span>
<span  style=""> 965                                                                                                                    </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 966          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 967      }                                                                                                             </span>
<span  style=""> 968                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 969      /**                                                                                                           </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 970       * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 970       * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasiðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 971       * for the given Property to see if something on the backend has marked it as derived                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 972       *                                                                                                            </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 973       * @param headerField the header for this recordField                                                         </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 974       * @param recordField the recordField being populated                                                         </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 975       * @param p the property that relates to this recordField                                                     </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 976       * @return whether or not this field is derived                                                               </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 977       * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 977       * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, SðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 978       */                                                                                                           </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 979      protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                          </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 980          return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981      }                                                                                                             </span>
<span  style=""> 982                                                                                                                    </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 983      protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {             </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style=""> 984          List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                           </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style=""> 985          List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                                   </span>
<span  style=""> 986                                                                                                                    </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style=""> 987          for (Property property : properties) {                                                                    </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 988              if (property.getMetadata() instanceof BasicFieldMetadata) {                                           </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style=""> 989                  BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                             </span>
<span  style=""> 990                                                                                                                    </span>
<span  style=""> 991                                                                                                                    </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style=""> 992                  if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {                     </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""> 993                      // Depending on visibility, field for the particular property is not created on the form      </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 994                      String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();         </span>
<span  style=""> 995                                                                                                                    </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style=""> 996                      // Create the field and set some basic attributes                                             </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style=""> 997                      Field f;                                                                                      </span>
<span  style=""> 998                                                                                                                    </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style=""> 999                      if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())                     </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style="">1000                              || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())               </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style="">1001                              || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())            </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style="">1002                              || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {               </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title="1003                          // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values">1003                          // We&#x27;re dealing with fields that should render as drop-downs, so set their possible valueðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1004                          f = new ComboField();                                                                     </span>
<span class="6120731816730172045" onmouseenter="enter('6120731816730172045');" onmouseout="out('6120731816730172045');" style="">1005                          ((ComboField) f).setOptions(fmd.getEnumerationValues());                                  </span>






<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title="1006                          if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()">1006                          if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValuðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style="">1007                                  &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                                   </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1008                              f.setIsVisible(false);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009                          }                                                                                         </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style="">1010                      } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                            </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style="">1011                          f = new CodeField();                                                                      </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style="">1012                      } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                        </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1013                              || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                   </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1014                              || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {              </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style="">1015                          // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields             </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style="">1016                          f = new RuleBuilderField();                                                               </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style="">1017                          ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);                     </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style="">1018                          ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                                 </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style="">1019                          ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                          </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style="">1020                          ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());                   </span>
<span  style="">1021                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style="">1022                          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style="">1023                          ((RuleBuilderField) f).setJson(blankJsonString);                                          </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1024                          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1025                          if (dw != null) {                                                                         </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style="">1026                              ((RuleBuilderField) f).setDataWrapper(dw);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1027                          }                                                                                         </span>
<span  style="">1028                                                                                                                    </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1029                          if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {                        </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style="">1030                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                            </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1031                          } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {          </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style="">1032                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);                     </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1033                          } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {            </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style="">1034                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035                          }                                                                                         </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1036                      } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                                 </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1037                          // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a">1037                          // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of inðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1038                          // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1038                          // modal, so we&#x27;ll provision the combo field here. Available options will be set as part oðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1039                          // subsequent operation                                                                   </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1040                          f = new ComboField();                                                                     </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1041                      } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                           </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1042                          f = new MediaField();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1043                      } else {                                                                                      </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1044                          // Create a default field since there was no specialized handler                          </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1045                          f = new Field();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046                      }                                                                                             </span>
<span  style="">1047                                                                                                                    </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1048                      Boolean required = fmd.getRequiredOverride();                                                 </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1049                      if (required == null) {                                                                       </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1050                          required = fmd.getRequired();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051                      }                                                                                             </span>
<span  style="">1052                                                                                                                    </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1053                      Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                                   </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1054                      if (allowNoValueEnum != null) {                                                               </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1055                          f.setAllowNoValueEnumOption(allowNoValueEnum);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056                      }                                                                                             </span>
<span  style="">1057                                                                                                                    </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1058                      f.withName(property.getName())                                                                </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1059                       .withFieldType(fieldType)                                                                    </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1060                       .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                                  </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1061                       .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                          </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1062                       .withOrder(fmd.getOrder())                                                                   </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1063                       .withFriendlyName(fmd.getFriendlyName())                                                     </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1064                       .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                 </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1065                       .withForeignKeyClass(fmd.getForeignKeyClass())                                               </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1066                       .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                    </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1067                       .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1067                       .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromTyðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1068                       .withRequired(required)                                                                      </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1069                       .withReadOnly(fmd.getReadOnly())                                                             </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1070                       .withTranslatable(fmd.getTranslatable())                                                     </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style="">1071                       .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))  </span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1072                       .withLargeEntry(fmd.isLargeEntry())                                                          </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1073                       .withHint(fmd.getHint())                                                                     </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1074                       .withTooltip(fmd.getTooltip())                                                               </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1075                       .withHelp(fmd.getHelpText())                                                                 </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1076                       .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                                        </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1077                       .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                               </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1078                       .withAssociatedFieldName(fmd.getAssociatedFieldName());                                      </span>
<span  style="">1079                                                                                                                    </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1080                      String defaultValue = fmd.getDefaultValue();                                                  </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1081                      if (defaultValue != null) {                                                                   </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1082                          defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                          </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1083                          f.withValue(defaultValue);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084                      }                                                                                             </span>
<span  style="">1085                                                                                                                    </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1086                      if (StringUtils.isBlank(f.getFriendlyName())) {                                               </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1087                          f.setFriendlyName(f.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088                      }                                                                                             </span>
<span  style="">1089                                                                                                                    </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1090                      // If is form hidden, set visible to false                                                    </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1091                      if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {                      </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1092                          f.setIsVisible(false);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093                      }                                                                                             </span>
<span  style="">1094                                                                                                                    </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1095                      if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                                 </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1096                          f.setIsVisible(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097                      }                                                                                             </span>
<span  style="">1098                                                                                                                    </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1099                      // Add the field to the appropriate FieldGroup                                                </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1100                      if (fmd.getGroup() == null) {                                                                 </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1101                          homelessFields.add(f);                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1102                      } else {                                                                                      </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style="">1103                          ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104                      }                                                                                             </span>
<span  style="">1105                                                                                                                    </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1106                      if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                                   </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1107                          fieldsWithAssociations.add(f);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111          }                                                                                                         </span>
<span  style="">1112                                                                                                                    </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1113          for (Field f : homelessFields) {                                                                          </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1114              ef.addField(cmd, f, null, null, null, null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115          }                                                                                                         </span>
<span  style="">1116                                                                                                                    </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1117          for (Field f : fieldsWithAssociations) {                                                                  </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1118              Field associatedField = findAssociatedField(ef, f);                                                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1119              if (associatedField != null) {                                                                        </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1120                  associatedField.setShouldRender(false);                                                           </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1121                  f.setAssociatedFieldName(associatedField.getName());                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1122              } else {                                                                                              </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1123                  f.setAssociatedFieldName(null);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126      }                                                                                                             </span>
<span  style="">1127                                                                                                                    </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1128      protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                          </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1129          if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                                    </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1130              return fmd.getFieldComponentRendererTemplate();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131          }                                                                                                         </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1132          return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1133      }                                                                                                             </span>
<span  style="">1134                                                                                                                    </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1135      protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                                      </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1136          if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                                </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1137              return fmd.getGridFieldComponentRendererTemplate();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138          }                                                                                                         </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style="">1139          return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140      }                                                                                                             </span>
<span  style="">1141                                                                                                                    </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1142      private Field findAssociatedField(EntityForm ef, Field f) {                                                   </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1143          // Try on the parent object                                                                               </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1144          Field associatedField = ef.findField(f.getAssociatedFieldName());                                         </span>
<span  style="">1145                                                                                                                    </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1146          if (associatedField == null) {                                                                            </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1147              // Check the field&#x27;s path                                                                             </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1148              String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                                   </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1149              String testPath = &quot;&quot;;                                                                                 </span>
<span  style="">1150                                                                                                                    </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1151              for (String path : fieldPathParts) {                                                                  </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1152                  testPath += path + &quot;.&quot;;                                                                           </span>
<span  style="">1153                                                                                                                    </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1154                  associatedField = ef.findField(testPath + f.getAssociatedFieldName());                            </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1155                  if (associatedField != null) {                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1156                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159          }                                                                                                         </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1160          return associatedField;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1161      }                                                                                                             </span>
<span  style="">1162                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1163      /**                                                                                                           </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1164       * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,         </span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1165       * it returns the foreignKeyClass.                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1166       *                                                                                                            </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1167       * @param foreignKeyClass the {@link String} class name                                                       </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1168       * @return the admin section pathname                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1169       */                                                                                                           </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1170      protected String getAdminSectionPath(String foreignKeyClass) {                                                </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1171          if (foreignKeyClass != null) {                                                                            </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1172              AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1172              AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1173              return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1175          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176      }                                                                                                             </span>
<span  style="">1177                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1178      /**                                                                                                           </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1179       * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1179       * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal tðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1180       *  the processed value of another tab.                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1181       *                                                                                                            </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1182       * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where                </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style="">1183       *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,    </span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style="">1184       *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1185       */                                                                                                           </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1186      protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {           </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1187          if (tabMetadataMap != null) {                                                                             </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1188              Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                              </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1189              for (String tabKey : tabMetadataKeySet) {                                                             </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1190                  TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                             </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style="">1191                  String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);      </span>
<span  style="">1192                                                                                                                    </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1193                  if (foundMatchingTab(unprocessedTabName)) {                                                       </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1194                      if (!tabExists(ef, unprocessedTabName)) {                                                     </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1195                          TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);                 </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1196                          unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1198                  } else {                                                                                          </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1199                      if (tabExists(ef, tabKey)) {                                                                  </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1200                          unprocessedTabName = tabKey;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1201                      } else {                                                                                      </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1202                          unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204                  }                                                                                                 </span>
<span  style="">1205                                                                                                                    </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1206                  Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();                        </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1207                  for (String groupKey : groupMetadataKeySet) {                                                     </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1208                      ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1208                      ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212      }                                                                                                             </span>
<span  style="">1213                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1214      /**                                                                                                           </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1215       * Search for any other tab on the target entity that has the same display value                              </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1216       *  as the value provided tab name.                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1217       *                                                                                                            </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style="">1218       * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.     </span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1219       *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1219       *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySeðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style="">1220       *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return </span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1221       *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1222       *                                                                                                            </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style="">1223       * If a tab with the same display value cannot be found, then we should return null to indicate that there    </span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1224       *  is no matching tab with the same processed tabName value.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1225       */                                                                                                           </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style="">1226      protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {    </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1227          for (String tabKey : tabMetadataKeySet) {                                                                 </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1228              String tabName = tabMetadata.getTabName();                                                            </span>
<span  style="">1229                                                                                                                    </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1230              if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                                 </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1231                  return tabKey;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233          }                                                                                                         </span>
<span  style="">1234                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1235          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236      }                                                                                                             </span>
<span  style="">1237                                                                                                                    </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1238      protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1239          try {                                                                                                     </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1240              String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);                        </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style="">1241              boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey); </span>
<span  style="">1242                                                                                                                    </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style="">1243              return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);</span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1244          } catch (NoSuchMessageException e) {                                                                      </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1245              LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                                        </span>
<span  style="">1246                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1247              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1248          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249      }                                                                                                             </span>
<span  style="">1250                                                                                                                    </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1251      protected boolean foundMatchingTab(String unprocessedTabName) {                                               </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1252          return (unprocessedTabName != null);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253      }                                                                                                             </span>
<span  style="">1254                                                                                                                    </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1255      protected boolean tabExists(EntityForm ef, String tabKey) {                                                   </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1256          return (ef.findTab(tabKey) != null);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257      }                                                                                                             </span>
<span  style="">1258                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1259      @Override                                                                                                     </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1260      public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {                    </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1261          String defaultValue = fmd.getDefaultValue();                                                              </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1262          if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                           </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1263                  || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                               </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1264                  || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1265              return null;                                                                                          </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1266          } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1267              try {                                                                                                 </span>
<span class="2272843703065247861" onmouseenter="enter('2272843703065247861');" onmouseout="out('2272843703065247861');" style="">1268                  Integer.parseInt(defaultValue);                                                                   </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1269              } catch (NumberFormatException  e) {                                                                  </span>



<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style="">1270                  String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);</span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1271                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1272                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273              }                                                                                                     </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1274          } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                                        </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1275                  || fieldType.equals(SupportedFieldType.MONEY.toString())) {                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1276              try {                                                                                                 </span>
<span class="6039577623543160332" onmouseenter="enter('6039577623543160332');" onmouseout="out('6039577623543160332');" style="">1277                  BigDecimal val = new BigDecimal(defaultValue);                                                    </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1278              } catch (NumberFormatException  e) {                                                                  </span>




<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1279                  String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);                 </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1280                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1281                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282              }                                                                                                     </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1283          } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                                     </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1284              if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)         </span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style="">1285                      &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {      </span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style="">1286                  String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);</span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1287                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1288                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289              }                                                                                                     </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1290          } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                                        </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1291              DateFormat format = FormatUtil.getDateFormat();                                                       </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1292              if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                                   </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1293                  defaultValue = format.format(new Date());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1294              } else {                                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1295                  try {                                                                                             </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1296                      Date date = format.parse(defaultValue);                                                       </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1297                      defaultValue = format.format(date);                                                           </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1298                  } catch (ParseException e) {                                                                      </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1299                      String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1299                      String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue)ðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1300                      LOG.debug(msg);                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1301                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304          }                                                                                                         </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1305          return defaultValue;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306      }                                                                                                             </span>
<span  style="">1307                                                                                                                    </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style="">1308      protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {       </span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1309          return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot;">1309          return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - FailedðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style="">1310                  + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311      }                                                                                                             </span>
<span  style="">1312                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1313      @Override                                                                                                     </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1314      public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) {          </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1315          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1316              if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {                        </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1317                  entityForm.removeField(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320      }                                                                                                             </span>
<span  style="">1321                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1322      @Override                                                                                                     </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1323      public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)                       </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1324              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1325          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1326          populateEntityForm(cmd, ef, sectionCrumbs);                                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1327          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328      }                                                                                                             </span>
<span  style="">1329                                                                                                                    </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1330      protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {                        </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1331          if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                                  </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1332              return sectionCrumbs.get(0).getSectionIdentifier();                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1333          } else {                                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1334              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1336      }                                                                                                             </span>
<span  style="">1337                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1338      @Override                                                                                                     </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1339      public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)            </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1340              throws ServiceException {                                                                             </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1341          ef.setCeilingEntityClassname(cmd.getCeilingType());                                                       </span>
<span  style="">1342                                                                                                                    </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1343          String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                              </span>
<span  style="">1344                                                                                                                    </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style="">1345          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),        </span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1346                  sectionIdentifier);                                                                               </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1347          if (section != null) {                                                                                    </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1348              ef.setSectionKey(section.getUrl());                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1349          } else {                                                                                                  </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1350              ef.setSectionKey(cmd.getCeilingType());                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351          }                                                                                                         </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1352          ef.setSectionCrumbsImpl(sectionCrumbs);                                                                   </span>
<span  style="">1353                                                                                                                    </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1354          setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                             </span>
<span  style="">1355                                                                                                                    </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1356          setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                         </span>
<span  style="">1357                                                                                                                    </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1358          populateDropdownToOneFields(ef, cmd);                                                                     </span>
<span  style="">1359                                                                                                                    </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1360          extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361      }                                                                                                             </span>
<span  style="">1362                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1363      /**                                                                                                           </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1364       * This method is invoked when EntityForms are created and is meant to provide a hook to add                  </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1365       * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically             </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1366       * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.                  </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1367       * @param ef                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1368       */                                                                                                           </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1369      protected void addAdditionalFormActions(EntityForm ef) {                                                      </span>
<span  style="">1370                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371      }                                                                                                             </span>
<span  style="">1372                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1373      @Override                                                                                                     </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style="">1374      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)        </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1375              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1376          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1377          populateEntityForm(cmd, entity, ef, sectionCrumbs);                                                       </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1378          addAdditionalFormActions(ef);                                                                             </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1379          extensionManager.getProxy().addAdditionalFormActions(ef);                                                 </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1380          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381      }                                                                                                             </span>
<span  style="">1382                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1383      @Override                                                                                                     </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1384      public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1384      public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1385              throws ServiceException {                                                                             </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1386          // Get the empty form with appropriate fields                                                             </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1387          populateEntityForm(cmd, ef, sectionCrumbs);                                                               </span>
<span  style="">1388                                                                                                                    </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1389          String idProperty = adminEntityService.getIdProperty(cmd);                                                </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1390          ef.setId(entity.findProperty(idProperty).getValue());                                                     </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1391          ef.setEntityType(entity.getType()[0]);                                                                    </span>
<span  style="">1392                                                                                                                    </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1393          populateEntityFormFieldValues(cmd, entity, ef);                                                           </span>
<span  style="">1394                                                                                                                    </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1395          Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);                       </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1396          if (p != null) {                                                                                          </span>
<span class="8443013364869289595" onmouseenter="enter('8443013364869289595');" onmouseout="out('8443013364869289595');" style="">1397              ef.setMainEntityName(p.getValue());                                                                   </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398          }                                                                                                         </span>
<span  style="">1399                                                                                                                    </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1400          extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401      }                                                                                                             </span>
<span  style="">1402                                                                                                                    </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style="">1403      protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {       </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1404          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1405              FieldMetadata fmd = p.getMetadata();                                                                  </span>
<span  style="">1406                                                                                                                    </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1407              if (shouldHideField(fmd, entity)) {                                                                   </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1408                  if (fmd instanceof CollectionMetadata) {                                                          </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1409                      ef.removeListGrid(p.getName());                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1410                  } else {                                                                                          </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1411                      ef.removeField(p.getName());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1414          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415      }                                                                                                             </span>
<span  style="">1416                                                                                                                    </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1417      protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                         </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1418          if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1419              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420          }                                                                                                         </span>
<span  style="">1421                                                                                                                    </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1422          for (String property : fmd.getShowIfFieldEquals().keySet()) {                                             </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1423              List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                                       </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1424              Property entityProp = entity.findProperty(property);                                                  </span>
<span  style="">1425                                                                                                                    </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1426              if (entityProp == null || values.contains(entityProp.getValue())) {                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1427                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1429          }                                                                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1430          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431      }                                                                                                             </span>
<span  style="">1432                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1433      @Override                                                                                                     </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1434      public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {                  </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1435          // Set the appropriate property values                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1436          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1437              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1438                  BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                                </span>
<span  style="">1439                                                                                                                    </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1440                  Property entityProp = entity.findProperty(p.getName());                                           </span>
<span  style="">1441                                                                                                                    </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style="">1442                  boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());   </span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1443                  //always show special map fields                                                                  </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1444                  if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                                </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1445                      explicitlyShown = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1446                  }                                                                                                 </span>
<span  style="">1447                                                                                                                    </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1448                  if (entityProp == null &amp;&amp; explicitlyShown) {                                                      </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1449                      Field field = ef.findField(p.getName());                                                      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1450                      if (field != null) {                                                                          </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1451                          field.setValue(null);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452                      }                                                                                             </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1453                  } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1453                  } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFiðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1454                      ef.removeField(p.getName());                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1455                  } else {                                                                                          </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1456                      Field field = ef.findField(p.getName());                                                      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1457                      if (field != null) {                                                                          </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1458                          if (entityProp != null) {                                                                 </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1459                              //protect against null - can happen with password confirmation fields (i.e. admin user)">1459                              //protect against null - can happen with password confirmation fields (i.e. admin userðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1460                              field.setDirty(entityProp.getIsDirty());                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461                          }                                                                                         </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1462                          if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                                </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1463                                  || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME                    </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1464                                  || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {               </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1465                              RuleBuilderField rbf = (RuleBuilderField) field;                                      </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1466                              if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                           </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1467                                  String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();            </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1468                                  rbf.setJson(json);                                                                </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1469                                  DataWrapper dw = convertJsonToDataWrapper(json);                                  </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1470                                  if (dw != null) {                                                                 </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1471                                      rbf.setDataWrapper(dw);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1474                          }                                                                                         </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1475                          if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                                 </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1476                              field.setValue(entityProp.getValue());                                                </span>

<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1477                              field.setDisplayValue(entityProp.getDisplayValue());                                  </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1478                              MediaField mf = (MediaField) field;                                                   </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1479                              Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1479                              Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(),ðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1480                              mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1480                              mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(),ðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style="">1481                          } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) { </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1482                              field.setValue(entityProp.getValue());                                                </span>

<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1483                              field.setDisplayValue(entityProp.getDisplayValue());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1485                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489      }                                                                                                             </span>
<span  style="">1490                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1491      /**                                                                                                           </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1492       * When using Thymeleaf, we need to convert the JSON string back to                                           </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1493       * a DataWrapper object because Thymeleaf escapes JSON strings.                                               </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1494       * Thymeleaf uses it&#x27;s own object de-serializer                                                               </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1495       * see: https://github.com/thymeleaf/thymeleaf/issues/84                                                      </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1496       * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                          </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1497       * @param json                                                                                                </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1498       * @return DataWrapper                                                                                        </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1499       * @throws IOException                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1500       */                                                                                                           </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1501      protected DataWrapper convertJsonToDataWrapper(String json) {                                                 </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1502          ObjectMapper mapper = new ObjectMapper();                                                                 </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1503          DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                          </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1504          SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1504          SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null)ðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1505          module.addDeserializer(DataDTO.class, dtoDeserializer);                                                   </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1506          mapper.registerModule(module);                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1507          try {                                                                                                     </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1508              return mapper.readValue(json, DataWrapper.class);                                                     </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1509          } catch (IOException e) {                                                                                 </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1510              throw new RuntimeException(e);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512      }                                                                                                             </span>
<span  style="">1513                                                                                                                    </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1514      protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                                  </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1515              throws ServiceException {                                                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1516          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1517              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1518                  BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                                    </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1519                  if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                               </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1520                          &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {              </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1521                      // Get the records                                                                            </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1522                      PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()                     </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1523                              .withCeilingEntityClassname(fmd.getForeignKeyClass());                                </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style="">1524                      Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();   </span>
<span  style="">1525                                                                                                                    </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1526                      // Determine the id field                                                                     </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1527                      String idProp = null;                                                                         </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1528                      ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1528                      ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1529                      for (Property foreignP : foreignClassMd.getProperties()) {                                    </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1530                          if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                               </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1531                              BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata();          </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1532                              if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {                        </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1533                                  idProp = foreignP.getName();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536                      }                                                                                             </span>
<span  style="">1537                                                                                                                    </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1538                      if (idProp == null) {                                                                         </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1539                          throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1539                          throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClassðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1540                      }                                                                                             </span>
<span  style="">1541                                                                                                                    </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1542                      // Determine the display field                                                                </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1543                      String displayProp = fmd.getLookupDisplayProperty();                                          </span>
<span  style="">1544                                                                                                                    </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1545                      // Build the options map                                                                      </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1546                      Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                                </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1547                      for (Entity row : rows) {                                                                     </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1548                          Property prop = row.findProperty(displayProp);                                            </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1549                          if (prop == null) {                                                                       </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1550                              LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; +">1550                              LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1551                                      ef.getCeilingEntityClassname() + &quot;]&quot;);                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1552                          } else {                                                                                  </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1553                              String displayValue = prop.getDisplayValue();                                         </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1554                              if (StringUtils.isBlank(displayValue)) {                                              </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1555                                  displayValue = prop.getValue();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556                              }                                                                                     </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1557                              options.put(row.findProperty(idProp).getValue(), displayValue);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559                      }                                                                                             </span>
<span  style="">1560                                                                                                                    </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1561                      // Set the options on the entity field                                                        </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1562                      ComboField cf = (ComboField) ef.findField(p.getName());                                       </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1563                      cf.setOptions(options);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1564                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567      }                                                                                                             </span>
<span  style="">1568                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1569      @Override                                                                                                     </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1570      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1570      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1571              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1572          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1573          populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                                    </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1574          addAdditionalFormActions(ef);                                                                             </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1575          extensionManager.getProxy().addAdditionalFormActions(ef);                                                 </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1576          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577      }                                                                                                             </span>
<span  style="">1578                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1579      @Override                                                                                                     </span>
<span class="8407616833525381833" onmouseenter="enter('8407616833525381833');" onmouseout="out('8407616833525381833');" style=""><abbr title="1580      public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1580      public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecorðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1581              throws ServiceException {                                                                             </span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1582          // Get the form with values for this entity                                                               </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1583          populateEntityForm(cmd, entity, ef, sectionCrumbs);                                                       </span>
<span  style="">1584                                                                                                                    </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1585          // Attach the sub-collection list grids and specialty UI support                                          </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1586          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1587              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1588                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589              }                                                                                                     </span>
<span  style="">1590                                                                                                                    </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1591              if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1592                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593              }                                                                                                     </span>
<span  style="">1594                                                                                                                    </span>
<span class="5057378952086585538" onmouseenter="enter('5057378952086585538');" onmouseout="out('5057378952086585538');" style="">1595              if (collectionRecords != null &amp;&amp; !collectionRecords.isEmpty()) {                                      </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1596                  DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());                      </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1597                  String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();                  </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1598                  ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1598                  ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSeðŸ”µ</abbr></span>
<span  style="">1599                                                                                                                    </span>
<span class="-4703142262249660615" onmouseenter="enter('-4703142262249660615');" onmouseout="out('-4703142262249660615');" style="">1600                  CollectionMetadata md = ((CollectionMetadata) p.getMetadata());                                   </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1601                  if (md instanceof BasicCollectionMetadata) {                                                      </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style="">1602                      PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);    </span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1603                      ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1603                      ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().gðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1604                      if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {                       </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1605                          List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1605                          List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTreeðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1606                          ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);              </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1607                          for (ClassTree entityType : entityTypes) {                                                </span>
<span class="-6085370745551409442" onmouseenter="enter('-6085370745551409442');" onmouseout="out('-6085370745551409442');" style="">1608                              ListGridAction ADD = new ListGridAction(ListGridAction.ADD)                           </span>
<span class="-8123842595880337680" onmouseenter="enter('-8123842595880337680');" onmouseout="out('-8123842595880337680');" style="">1609                                      .withButtonClass(AddMethodType.PERSIST_EMPTY==                                </span>
<span class="2458863346051852504" onmouseenter="enter('2458863346051852504');" onmouseout="out('2458863346051852504');" style=""><abbr title="1610                                              ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-empty&quot;:&quot;sub-list-grid-add&quot;)">1610                                              ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-eðŸ”µ</abbr></span>
<span class="625982968125452177" onmouseenter="enter('625982968125452177');" onmouseout="out('625982968125452177');" style="">1611                                      .withActionTargetEntity(entityType.getFullyQualifiedClassname())              </span>
<span class="1979584669038484989" onmouseenter="enter('1979584669038484989');" onmouseout="out('1979584669038484989');" style="">1612                                      .withUrlPostfix(&quot;/add&quot;)                                                       </span>
<span class="-2605498948604397141" onmouseenter="enter('-2605498948604397141');" onmouseout="out('-2605498948604397141');" style="">1613                                      .withIconClass(&quot;fa fa-plus&quot;)                                                  </span>
<span class="1382163113890128554" onmouseenter="enter('1382163113890128554');" onmouseout="out('1382163113890128554');" style="">1614                                      .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));   </span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1615                              actionGroup.getListGridActions().add(0, ADD);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616                          }                                                                                         </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1617                          listGrid.addToolbarActionGroup(actionGroup);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1618                      } else {                                                                                      </span>
<span class="-686829543212379321" onmouseenter="enter('-686829543212379321');" onmouseout="out('-686829543212379321');" style="">1619                          listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY==                         </span>
<span class="452604423250167593" onmouseenter="enter('452604423250167593');" onmouseout="out('452604423250167593');" style=""><abbr title="1620                                  ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTY:DefaultListGridActions.ADD);">1620                                  ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTYðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1621                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1622                  } else {                                                                                          </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1623                      listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624                  }                                                                                                 </span>
<span  style="">1625                                                                                                                    </span>
<span class="1698654555130612252" onmouseenter="enter('1698654555130612252');" onmouseout="out('1698654555130612252');" style="">1626                  if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab())!=null) {                    </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1627                      ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1628                  } else {                                                                                          </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1629                      ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1630                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1632          }                                                                                                         </span>
<span  style="">1633                                                                                                                    </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1634          if (CollectionUtils.isEmpty(ef.getActions())) {                                                           </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1635              ef.addAction(DefaultEntityFormActions.SAVE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1636          }                                                                                                         </span>
<span  style="">1637                                                                                                                    </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1638          addDeleteActionIfAllowed(ef, cmd, entity);                                                                </span>
<span class="-1573379781634260780" onmouseenter="enter('-1573379781634260780');" onmouseout="out('-1573379781634260780');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1639 +        addDuplicateActionIfAllowed(ef, cmd);                                                                     </span>
<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1640          setReadOnlyState(ef, cmd, entity);                                                                        </span>
<span  style="">1641                                                                                                                    </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1642          // check for fields that should be hidden based on annotations                                            </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1643          setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                                   </span>
<span  style="">1644                                                                                                                    </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1645          extensionManager.getProxy().modifyDetailEntityForm(ef);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646      }                                                                                                             </span>
<span  style="">1647                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1648      /**                                                                                                           </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1649       * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1649       * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The usðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1650       * delete an entity for the following cases:                                                                  </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1651       * &lt;ol&gt;                                                                                                       </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style="">1652       *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by   </span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style="">1653       *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;       </span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1654       *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the                </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1655       *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                         </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1656       * &lt;/ol&gt;                                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1657       *                                                                                                            </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1658       * @param entityForm the form being generated                                                                 </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1659       * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;                        </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1660       * @param entity the entity being edited                                                                      </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1661       * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                                   </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1662       * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                              </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1663       * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1664       */                                                                                                           </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1665      protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {            </span>
<span class="-19082107155128737" onmouseenter="enter('-19082107155128737');" onmouseout="out('-19082107155128737');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1666 -        boolean canDelete = true;                                                                                 </span>
<span class="9176849152277833812" onmouseenter="enter('9176849152277833812');" onmouseout="out('9176849152277833812');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1667 +        if (isDeletionAllowed(entityForm, cmd, entity)) {                                                         </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1668 +            entityForm.addAction(DefaultEntityFormActions.DELETE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1669 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1670 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1671 +                                                                                                                  </span>
<span class="1233024099247846166" onmouseenter="enter('1233024099247846166');" onmouseout="out('1233024099247846166');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1672 +    protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd,                     </span>
<span class="-5681436677530159700" onmouseenter="enter('-5681436677530159700');" onmouseout="out('-5681436677530159700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1673 +            final Entity entity) {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1674          try {                                                                                                     </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1675              String securityEntityClassname = getSecurityClassname(entityForm, cmd);                               </span>
<span class="-4824979268204802710" onmouseenter="enter('-4824979268204802710');" onmouseout="out('-4824979268204802710');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1676 -            adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.REMOVE);        </span>
<span class="-1437365640597623792" onmouseenter="enter('-1437365640597623792');" onmouseout="out('-1437365640597623792');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1677 +            adminRemoteSecurityService                                                                            </span>
<span class="9049592859337879981" onmouseenter="enter('9049592859337879981');" onmouseout="out('9049592859337879981');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1678 +                    .securityCheck(securityEntityClassname, EntityOperationType.REMOVE);                          </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1679          } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1680              if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-8314772345016591645" onmouseenter="enter('-8314772345016591645');" onmouseout="out('-8314772345016591645');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1681 -                canDelete = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1682 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1683 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1684 -                                                                                                                  </span>
<span class="-179728255711330045" onmouseenter="enter('-179728255711330045');" onmouseout="out('-179728255711330045');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1685 -        // If I cannot update a record then I certainly cannot delete it either                                   </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1686 -        if (canDelete) {                                                                                          </span>
<span class="9060467924077423602" onmouseenter="enter('9060467924077423602');" onmouseout="out('9060467924077423602');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1687 -            canDelete = rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1687 -            canDelete = rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1688 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1689 -                                                                                                                  </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1690 -        if (canDelete) {                                                                                          </span>
<span class="-6969811342559492698" onmouseenter="enter('-6969811342559492698');" onmouseout="out('-6969811342559492698');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1691 -            canDelete = rowLevelSecurityService.canRemove(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1691 -            canDelete = rowLevelSecurityService.canRemove(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1692 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1693 -                                                                                                                  </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1694 -        if (canDelete) {                                                                                          </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1695 -            entityForm.addAction(DefaultEntityFormActions.DELETE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1696 -        }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1697 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1698 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1699 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1700 +                                                                                                                  </span>
<span class="-6544480517582328932" onmouseenter="enter('-6544480517582328932');" onmouseout="out('-6544480517582328932');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1701 +        final AdminUser persistentAdminUser = adminRemoteSecurityService.getPersistentAdminUser();                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1702 +                                                                                                                  </span>
<span class="-4253696723384610596" onmouseenter="enter('-4253696723384610596');" onmouseout="out('-4253696723384610596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1703 +        return rowLevelSecurityService.canUpdate(persistentAdminUser, entity)                                     </span>
<span class="6878671858526625956" onmouseenter="enter('6878671858526625956');" onmouseout="out('6878671858526625956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1704 +                &amp;&amp; rowLevelSecurityService.canRemove(persistentAdminUser, entity);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1705 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1706 +                                                                                                                  </span>
<span class="8744244153887540139" onmouseenter="enter('8744244153887540139');" onmouseout="out('8744244153887540139');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1707 +    protected void addDuplicateActionIfAllowed(final EntityForm entityForm,                                       </span>
<span class="7968956867409491481" onmouseenter="enter('7968956867409491481');" onmouseout="out('7968956867409491481');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1708 +            final ClassMetadata cmd) {                                                                            </span>
<span class="-4074855000497140283" onmouseenter="enter('-4074855000497140283');" onmouseout="out('-4074855000497140283');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1709 +        if (isDuplicationAllowed(entityForm, cmd)) {                                                              </span>
<span class="6780575287202109079" onmouseenter="enter('6780575287202109079');" onmouseout="out('6780575287202109079');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1710 +            entityForm.addAction(DefaultEntityFormActions.DUPLICATE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1711 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1712 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1713 +                                                                                                                  </span>
<span class="2750172847360880677" onmouseenter="enter('2750172847360880677');" onmouseout="out('2750172847360880677');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1714 +    protected boolean isDuplicationAllowed(final EntityForm entityForm, final ClassMetadata cmd) {                </span>
<span class="5761145246382260648" onmouseenter="enter('5761145246382260648');" onmouseout="out('5761145246382260648');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1715 +        final String securityClassname = getSecurityClassname(entityForm, cmd);                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1716 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1717 +        try {                                                                                                     </span>
<span class="7910151490387293712" onmouseenter="enter('7910151490387293712');" onmouseout="out('7910151490387293712');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1718 +            adminRemoteSecurityService.securityCheck(securityClassname, EntityOperationType.ADD);                 </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1719 +        } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1720 +            if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1721 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1722 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1723 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1724 +                                                                                                                  </span>
<span class="3631252767096747840" onmouseenter="enter('3631252767096747840');" onmouseout="out('3631252767096747840');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1725 +        final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(securityClassname);                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1726 +                                                                                                                  </span>
<span class="-7591397042021229268" onmouseenter="enter('-7591397042021229268');" onmouseout="out('-7591397042021229268');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1727 +        return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp;                              </span>
<span class="5950039316725693002" onmouseenter="enter('5950039316725693002');" onmouseout="out('5950039316725693002');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1728 +                rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(),               </span>
<span class="-9091740986951777867" onmouseenter="enter('-9091740986951777867');" onmouseout="out('-9091740986951777867');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1729 +                        securityClassname, cmd);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1730      }                                                                                                             </span>
<span  style="">1731                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1732      /**                                                                                                           </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1733       * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                                 </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1734       * &lt;ol&gt;                                                                                                       </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1735       *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                           </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1736       *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1736       *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represeðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style="">1737       *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;       </span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style="">1738       *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the      </span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1739       *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                         </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1740       * &lt;/ol&gt;                                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1741       *                                                                                                            </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1742       * @param entityForm the form being generated                                                                 </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1743       * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;                        </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1744       * @param entity the entity being edited                                                                      </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1745       * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                                   </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1746       * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                              </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1747       * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1748       */                                                                                                           </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1749      protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {                    </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1750          boolean readOnly = true;                                                                                  </span>
<span  style="">1751                                                                                                                    </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1752          // If all of the fields are read only, we&#x27;ll mark the form as such                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1753          for (Property property : cmd.getProperties()) {                                                           </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1754              FieldMetadata fieldMetadata = property.getMetadata();                                                 </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1755              if (fieldMetadata instanceof BasicFieldMetadata) {                                                    </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1756                  readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1756                  readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1757                  if (!readOnly) {                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1758                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1759                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1760              } else {                                                                                              </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1761                  readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                                      </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1762                  if (!readOnly) {                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1763                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1764                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1765              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1766          }                                                                                                         </span>
<span  style="">1767                                                                                                                    </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1768          if (!readOnly) {                                                                                          </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1769              // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1769              // If the user does not have edit permissions, we will go ahead and make the form read only to preventðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1770              try {                                                                                                 </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1771                  String securityEntityClassname = getSecurityClassname(entityForm, cmd);                           </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style="">1772                  adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);    </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1773              } catch (ServiceException e) {                                                                        </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1774                  if (e instanceof SecurityServiceException) {                                                      </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1775                      readOnly = true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1776                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1777              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778          }                                                                                                         </span>
<span  style="">1779                                                                                                                    </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1780          // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1780          // if the normal admin security service has not deemed this readonly and the all of the properties on the ðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1781          // are not readonly, then check the row-level security                                                    </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1782          if (!readOnly) {                                                                                          </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1783              readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1783              readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784          }                                                                                                         </span>
<span  style="">1785                                                                                                                    </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1786          if (readOnly) {                                                                                           </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1787              entityForm.setReadOnly();                                                                             </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1788              //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1788              //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements ðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1789              if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                      </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1790                  EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1790                  EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1791                  for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1791                  for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.geðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1792                      for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {           </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1793                          if (modifier.isQualified(data.getModifierType())) {                                       </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1794                              modifier.modifyEntityForm(new EntityFormModifierRequest()                             </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1795                                      .withEntityForm(entityForm)                                                   </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1796                                      .withConfiguration(data)                                                      </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1797                                      .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())         </span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1798                                      .withEntity(entity)                                                           </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1799                                      .withRowLevelSecurityService(rowLevelSecurityService));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1800                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1801                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1802                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1803              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1804          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1805      }                                                                                                             </span>
<span  style="">1806                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1807      /**                                                                                                           </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1808       * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                          </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1809       * @param entityForm                                                                                          </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1810       * @param cmd                                                                                                 </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1811       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1812       */                                                                                                           </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1813      protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                             </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1814          String securityEntityClassname = entityForm.getCeilingEntityClassname();                                  </span>
<span  style="">1815                                                                                                                    </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1816          if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                                 </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1817              securityEntityClassname = cmd.getSecurityCeilingType();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1818          } else {                                                                                                  </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1819              if (entityForm.getDynamicFormInfos() != null) {                                                       </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1820                  for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {                    </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1821                      if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                               </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1822                          securityEntityClassname = info.getSecurityCeilingClassName();                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1823                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1824                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1825                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1826              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1827          }                                                                                                         </span>
<span  style="">1828                                                                                                                    </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1829          return securityEntityClassname;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1830      }                                                                                                             </span>
<span  style="">1831                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1832      @Override                                                                                                     </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1833      public void populateEntityFormFields(EntityForm ef, Entity entity) {                                          </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1834          populateEntityFormFields(ef, entity, true, true);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1835      }                                                                                                             </span>
<span  style="">1836                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1837      @Override                                                                                                     </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style="">1838      public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {</span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1839          if (populateId) {                                                                                         </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1840              ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841          }                                                                                                         </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1842          if (populateType) {                                                                                       </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1843              ef.setEntityType(entity.getType()[0]);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1844          }                                                                                                         </span>
<span  style="">1845                                                                                                                    </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1846          for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                            </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1847              Property entityProp = entity.findProperty(entry.getKey());                                            </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1848              if (entityProp != null) {                                                                             </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1849                  entry.getValue().setValue(entityProp.getValue());                                                 </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1850                  entry.getValue().setDisplayValue(entityProp.getDisplayValue());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1851              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1852          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1853      }                                                                                                             </span>
<span  style="">1854                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1855      @Override                                                                                                     </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style="">1856      public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {    </span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style="">1857          Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());  </span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1858          Property entityProp = entity.findProperty(ef.getIdProperty());                                            </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1859          field.setValue(entityProp.getValue());                                                                    </span>
<span  style="">1860                                                                                                                    </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1861          if (StringUtils.isNotBlank(adornedList.getSortField())) {                                                 </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1862              field = ef.findField(adornedList.getSortField());                                                     </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1863              entityProp = entity.findProperty(adornedList.getSortField());                                         </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1864              if (field != null &amp;&amp; entityProp != null) {                                                            </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1865                  field.setValue(entityProp.getValue());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1866              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1867          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1868      }                                                                                                             </span>
<span  style="">1869                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1870      @Override                                                                                                     </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1871      public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                                       </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1872          Field field = ef.findField(&quot;priorKey&quot;);                                                                   </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1873          Property entityProp = entity.findProperty(&quot;key&quot;);                                                         </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1874          if (field != null &amp;&amp; entityProp != null) {                                                                </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1875              field.setValue(entityProp.getValue());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1876          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1877      }                                                                                                             </span>
<span  style="">1878                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1879      @Override                                                                                                     </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1880      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1880      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedLisðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style="">1881              String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)       </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1882              throws ServiceException {                                                                             </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1883          EntityForm ef = createStandardAdornedEntityForm();                                                        </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1884          return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1884          return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1885      }                                                                                                             </span>
<span  style="">1886                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1887      @Override                                                                                                     </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1888      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1888      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedLisðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1889              String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1889              String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, booleaðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1890              throws ServiceException {                                                                             </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1891          ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                          </span>
<span  style="">1892                                                                                                                    </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1893          // Get the metadata for this adorned field                                                                </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1894          PersistencePackageRequest request = PersistencePackageRequest.adorned()                                   </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1895                  .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                               </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1896                  .withAdornedList(adornedList)                                                                     </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1897                  .withSectionCrumbs(sectionCrumbs);                                                                </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1898          request.setAddOperationInspect(isAdd);                                                                    </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1899          ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1899          ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getCðŸ”µ</abbr></span>
<span  style="">1900                                                                                                                    </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1901          List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                                  </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1902          if (isViewCollectionItem) {                                                                               </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1903              Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1904          } else {                                                                                                  </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1905              // We want our entity form to only render the maintained adorned target fields                        </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1906              for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                         </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1907                  Property p = collectionMetadata.getPMap().get(targetFieldName);                                   </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1908                  if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1908                  if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1909                      ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);             </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1910                      entityFormProperties.add(p);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1911                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1912              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1913          }                                                                                                         </span>
<span  style="">1914                                                                                                                    </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1915          // Set the maintained fields on the form                                                                  </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1916          setEntityFormFields(collectionMetadata, ef, entityFormProperties);                                        </span>
<span  style="">1917                                                                                                                    </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1918          // Add these two additional hidden fields that are required for persistence                               </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1919          Field f = new Field()                                                                                     </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1920                  .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())            </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1921                  .withFieldType(SupportedFieldType.HIDDEN.toString())                                              </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1922                  .withValue(parentId);                                                                             </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1923          ef.addHiddenField(collectionMetadata, f);                                                                 </span>
<span  style="">1924                                                                                                                    </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1925          f = new Field()                                                                                           </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1926                  .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())            </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1927                  .withFieldType(SupportedFieldType.HIDDEN.toString())                                              </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1928                  .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                                       </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1929          ef.addHiddenField(collectionMetadata, f);                                                                 </span>
<span  style="">1930                                                                                                                    </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1931          if (StringUtils.isNotBlank(adornedList.getSortField())) {                                                 </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1932              f = new Field()                                                                                       </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1933                      .withName(adornedList.getSortField())                                                         </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1934                      .withFieldType(SupportedFieldType.HIDDEN.toString());                                         </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1935              ef.addHiddenField(collectionMetadata, f);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1936          }                                                                                                         </span>
<span  style="">1937                                                                                                                    </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1938          ef.setParentId(parentId);                                                                                 </span>
<span  style="">1939                                                                                                                    </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1940          extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                          </span>
<span  style="">1941                                                                                                                    </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1942          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1943      }                                                                                                             </span>
<span  style="">1944                                                                                                                    </span>
<span  style="">1945                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1946      @Override                                                                                                     </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1947      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1947      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String pðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1948              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1949          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1950          return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1951      }                                                                                                             </span>
<span  style="">1952                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1953      @Override                                                                                                     </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1954      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1954      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String pðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1955              throws ServiceException {                                                                             </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1956          ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                                    </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1957                  .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);                 </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1958          ef.setEntityType(foreignKey.getForeignKeyClass());                                                        </span>
<span  style="">1959                                                                                                                    </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1960          Field keyField;                                                                                           </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1961          if (!mapMd.getForceFreeFormKeys()) {                                                                      </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1962              // We will use a combo field to render the key choices                                                </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1963              ComboField temp = new ComboField();                                                                   </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1964              temp.withName(&quot;key&quot;)                                                                                  </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1965                      .withFieldType(&quot;combo_field&quot;)                                                                 </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1966                      .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                                 </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1967              if (mapMd.getKeys() != null) {                                                                        </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1968                  // The keys can be explicitly set in the annotation...                                            </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1969                  temp.setOptions(mapMd.getKeys());                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1970              } else {                                                                                              </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1971                  // Or they could be based on a different entity                                                   </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1972                  PersistencePackageRequest ppr = PersistencePackageRequest.standard()                              </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1973                          .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                          </span>
<span  style="">1974                                                                                                                    </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1975                  DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();                  </span>
<span  style="">1976                                                                                                                    </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1977                  for (Entity entity : drs.getRecords()) {                                                          </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style="">1978                      String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();   </span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1979                      String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1979                      String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getVaðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1980                      temp.putOption(keyValue, keyDisplayValue);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1981                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1982              }                                                                                                     </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1983              keyField = temp;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1984          } else {                                                                                                  </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1985              keyField = new Field().withName(&quot;key&quot;)                                                                </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1986                                  .withFieldType(SupportedFieldType.STRING.toString())                              </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1987                                  .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1988          }                                                                                                         </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1989          keyField.setRequired(true);                                                                               </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1990          ef.addMapKeyField(cmd, keyField);                                                                         </span>
<span  style="">1991                                                                                                                    </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1992          // Set the fields for this form                                                                           </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1993          List&lt;Property&gt; mapFormProperties;                                                                         </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">1994          if (mapMd.isSimpleValue()) {                                                                              </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">1995              ef.setIdProperty(&quot;key&quot;);                                                                              </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">1996              mapFormProperties = new ArrayList&lt;&gt;();                                                                </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">1997              Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                                      </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">1998              mapFormProperties.add(valueProp);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1999          } else {                                                                                                  </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">2000              String valueClassName = mapStructure.getValueClassName();                                             </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">2001              List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                         </span>
<span  style="">2002                                                                                                                    </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">2003              mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                              </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">2004              filterMapFormProperties(mapFormProperties, classNames);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2005          }                                                                                                         </span>
<span  style="">2006                                                                                                                    </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">2007          setEntityFormFields(cmd, ef, mapFormProperties);                                                          </span>
<span  style="">2008                                                                                                                    </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">2009          Field f = new Field()                                                                                     </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">2010                  .withName(&quot;priorKey&quot;)                                                                             </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">2011                  .withFieldType(SupportedFieldType.HIDDEN.toString());                                             </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">2012          ef.addHiddenField(cmd, f);                                                                                </span>
<span  style="">2013                                                                                                                    </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">2014          ef.setParentId(parentId);                                                                                 </span>
<span  style="">2015                                                                                                                    </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2016          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2017      }                                                                                                             </span>
<span  style="">2018                                                                                                                    </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">2019      protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                            </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">2020          PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);                  </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">2021          List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2022          try {                                                                                                     </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">2023              Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                                   </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">2024              for (Class clazz : mapEntities) {                                                                     </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">2025                  classNames.add(clazz.getName());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2026              }                                                                                                     </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">2027          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">2028              classNames.add(valueClassName);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2029          }                                                                                                         </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">2030          return classNames;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2031      }                                                                                                             </span>
<span  style="">2032                                                                                                                    </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style="">2033      protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {     </span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">2034          CollectionUtils.filter(mapFormProperties, new Predicate() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2035              @Override                                                                                             </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">2036              public boolean evaluate(Object object) {                                                              </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">2037                  Property p = (Property) object;                                                                   </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">2038                  for (String availType : p.getMetadata().getAvailableToTypes()) {                                  </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">2039                      if (classNames.contains(availType)) {                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2040                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2041                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2042                  }                                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2043                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2044              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2045          });                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2046      }                                                                                                             </span>
<span  style="">2047                                                                                                                    </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">2048      protected EntityForm createStandardEntityForm() {                                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2049          EntityForm ef = new EntityForm();                                                                         </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">2050          ef.addAction(DefaultEntityFormActions.SAVE);                                                              </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2051          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2052      }                                                                                                             </span>
<span  style="">2053                                                                                                                    </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">2054      protected EntityForm createStandardAdornedEntityForm() {                                                      </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2055          EntityForm ef = new EntityForm();                                                                         </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">2056          ef.addAction(DefaultAdornedEntityFormActions.Add);                                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2057          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2058      }                                                                                                             </span>
<span  style="">2059                                                                                                                    </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">2060      protected VisibilityEnum[] getGridHiddenVisibilities() {                                                      </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">2061          return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2062      }                                                                                                             </span>
<span  style="">2063                                                                                                                    </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">2064      protected VisibilityEnum[] getFormHiddenVisibilities() {                                                      </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">2065          return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2066      }                                                                                                             </span>
<span  style="">2067                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2068  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18  package org.broadleafcommerce.openadmin.web.service;                                                              </span>
<span  style="">  19                                                                                                                    </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  21  import org.apache.commons.collections.Predicate;                                                                  </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  22  import org.apache.commons.lang.ArrayUtils;                                                                        </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  23  import org.apache.commons.lang.BooleanUtils;                                                                      </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  24  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  25  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  26  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  27  import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                                 </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  28  import org.broadleafcommerce.common.exception.ExceptionHelper;                                                    </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  29  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  30  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  31  import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                          </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  32  import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                                 </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="">  33  import org.broadleafcommerce.common.i18n.service.TranslationService;                                              </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  34  import org.broadleafcommerce.common.locale.service.LocaleService;                                                 </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  35  import org.broadleafcommerce.common.media.domain.MediaDto;                                                        </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  36  import org.broadleafcommerce.common.persistence.EntityConfiguration;                                              </span>

<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  37  import org.broadleafcommerce.common.presentation.client.AddMethodType;                                            </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  38  import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                               </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  39  import org.broadleafcommerce.common.presentation.client.LookupType;                                               </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  40  import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                           </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  41  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  42  import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                           </span>
<span class="6163854737754492449" onmouseenter="enter('6163854737754492449');" onmouseout="out('6163854737754492449');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  43 +import org.broadleafcommerce.common.security.service.ExploitProtectionService;                                    </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  44  import org.broadleafcommerce.common.util.BLCMessageUtils;                                                         </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  45  import org.broadleafcommerce.common.util.FormatUtil;                                                              </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  46  import org.broadleafcommerce.common.util.StringUtil;                                                              </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  48  import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                                       </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  49  import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                                     </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  50  import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                               </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  51  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  52  import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                         </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  53  import org.broadleafcommerce.openadmin.dto.ClassTree;                                                             </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  54  import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                                    </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  55  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  56  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  57  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  58  import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                            </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  59  import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                           </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  60  import org.broadleafcommerce.openadmin.dto.MapStructure;                                                          </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  61  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  62  import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                          </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  63  import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                           </span>

<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  64  import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                                   </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  65  import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                                       </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  66  import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                          </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  67  import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                                </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  68  import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                                   </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  69  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                                </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  70  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;                   </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  71  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                            </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  72  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;                       </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  73  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                         </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  74  import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;            </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  75  import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                           </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style="">  76  import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;                 </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style="">  77  import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                         </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  78  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                             </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style="">  79  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;                      </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  80  import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;                  </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style="">  81  import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                            </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  82  import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                                 </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  83  import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                               </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style="">  84  import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                         </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style="">  85  import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                                    </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style="">  86  import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                         </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style="">  87  import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                             </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style="">  88  import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                                       </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style="">  89  import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                                 </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style="">  90  import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                                </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  91  import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                           </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  92  import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                                  </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style="">  93  import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                                     </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  94  import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                                </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  95  import org.broadleafcommerce.openadmin.web.form.entity.Field;                                                     </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style="">  96  import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                                       </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style="">  97  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                               </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style="">  98  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                           </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style="">  99  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                              </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style=""> 100  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                          </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 101  import org.codehaus.jettison.json.JSONObject;                                                                     </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 102  import org.springframework.beans.factory.annotation.Value;                                                        </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 103  import org.springframework.context.MessageSource;                                                                 </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 104  import org.springframework.context.NoSuchMessageException;                                                        </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 105  import org.springframework.stereotype.Service;                                                                    </span>

<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style=""> 106  import com.fasterxml.jackson.core.Version;                                                                        </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style=""> 107  import com.fasterxml.jackson.databind.ObjectMapper;                                                               </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style=""> 108  import com.fasterxml.jackson.databind.module.SimpleModule;                                                        </span>

<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style=""> 109  import java.io.IOException;                                                                                       </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 110  import java.math.BigDecimal;                                                                                      </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style=""> 111  import java.text.DateFormat;                                                                                      </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style=""> 112  import java.text.DateFormatSymbols;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 113 +import java.text.DecimalFormat;                                                                                   </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 114 +import java.text.NumberFormat;                                                                                    </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style=""> 115  import java.text.ParseException;                                                                                  </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 116  import java.text.SimpleDateFormat;                                                                                </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 117  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 118  import java.util.Arrays;                                                                                          </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 119  import java.util.Collections;                                                                                     </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 120  import java.util.Date;                                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 121  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 122  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 123  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 124  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 125  import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 126  import java.util.Set;                                                                                             </span>

<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 127  import javax.annotation.Resource;                                                                                 </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style=""> 128  import javax.persistence.ManyToOne;                                                                               </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style=""> 129  import javax.persistence.OneToOne;                                                                                </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 130  import javax.servlet.http.HttpServletRequest;                                                                     </span>
<span  style=""> 131                                                                                                                    </span>
<span  style=""> 132                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 133  /**                                                                                                               </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 134   * @author Andre Azzolini (apazzolini)                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 135   */                                                                                                               </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 136  @Service(&quot;blFormBuilderService&quot;)                                                                                  </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 137  public class FormBuilderServiceImpl implements FormBuilderService {                                               </span>
<span  style=""> 138                                                                                                                    </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 139      private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                               </span>
<span  style=""> 140                                                                                                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 141      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span  style=""> 142                                                                                                                    </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 143      @Resource(name = &quot;blAdminEntityService&quot;)                                                                      </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 144      protected AdminEntityService adminEntityService;                                                              </span>
<span  style=""> 145                                                                                                                    </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 146      @Resource (name = &quot;blAdminNavigationService&quot;)                                                                 </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 147      protected AdminNavigationService navigationService;                                                           </span>
<span  style=""> 148                                                                                                                    </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 149      @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                             </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 150      protected FormBuilderExtensionManager extensionManager;                                                       </span>
<span  style=""> 151                                                                                                                    </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 152      @Resource(name=&quot;blEntityConfiguration&quot;)                                                                       </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 153      protected EntityConfiguration entityConfiguration;                                                            </span>
<span  style=""> 154                                                                                                                    </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 155      @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                                </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 156      protected SecurityVerifier adminRemoteSecurityService;                                                        </span>
<span  style=""> 157                                                                                                                    </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 158      @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                                 </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 159      protected RowLevelSecurityService rowLevelSecurityService;                                                    </span>
<span  style=""> 160                                                                                                                    </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 161      @Resource(name = &quot;blMediaBuilderService&quot;)                                                                     </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 162      protected MediaBuilderService mediaBuilderService;                                                            </span>
<span  style=""> 163                                                                                                                    </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 164      @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                                    </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 165      protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                                 </span>
<span  style=""> 166                                                                                                                    </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 167      @Resource(name = &quot;blAdminNavigationService&quot;)                                                                  </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 168      protected AdminNavigationService adminNavigationService;                                                      </span>
<span  style=""> 169                                                                                                                    </span>






<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 170      @Resource(name = &quot;blLocaleService&quot;)                                                                           </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 171      protected LocaleService localeService;                                                                        </span>
<span  style=""> 172                                                                                                                    </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style=""> 173      @Resource(name = &quot;blTranslationService&quot;)                                                                      </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style=""> 174      protected TranslationService translationService;                                                              </span>
<span  style=""> 175                                                                                                                    </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 176      @Value(&quot;${use.translation.search:false}&quot;)                                                                     </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 177      protected boolean useTranslationSearch;                                                                       </span>

<span  style=""> 178                                                                                                                    </span>
<span class="-4708283361541865346" onmouseenter="enter('-4708283361541865346');" onmouseout="out('-4708283361541865346');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 179 +    @Resource(name = &quot;blExploitProtectionService&quot;)                                                                </span>
<span class="2624150081163085905" onmouseenter="enter('2624150081163085905');" onmouseout="out('2624150081163085905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 180 +    ExploitProtectionService exploitProtectionService;                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 181 +                                                                                                                  </span>
<span class="8033614225945187624" onmouseenter="enter('8033614225945187624');" onmouseout="out('8033614225945187624');" style=""> 182      protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[] {                     </span>
<span class="-8766489859370232859" onmouseenter="enter('-8766489859370232859');" onmouseout="out('-8766489859370232859');" style=""> 183              VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 184      };                                                                                                            </span>
<span  style=""> 185                                                                                                                    </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style=""> 186      protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {                     </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style=""> 187              VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 188      };                                                                                                            </span>
<span  style=""> 189                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190      @Override                                                                                                     </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 191      public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 191      public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 192              throws ServiceException {                                                                             </span>
<span  style=""> 193                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 194          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 195          ListGrid.Type type = ListGrid.Type.MAIN;                                                                  </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 196          String idProperty = &quot;id&quot;;                                                                                 </span>
<span  style=""> 197                                                                                                                    </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 198          FieldWrapper wrapper = new FieldWrapper();                                                                </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 199          ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 200          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 201              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 202                  BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                                    </span>
<span  style=""> 203                                                                                                                    </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 204                  if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                           </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 205                      idProperty = fmd.getName();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206                  }                                                                                                 </span>
<span  style=""> 207                                                                                                                    </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 208                  if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                                </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 209                          &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {              </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 210                      Field hf = createHeaderField(p, fmd);                                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 211                      headerFields.add(hf);                                                                         </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 212                      defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213                  }                                                                                                 </span>
<span  style=""> 214                                                                                                                    </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 215                  if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                             </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""> 216                      wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219          }                                                                                                         </span>
<span  style=""> 220                                                                                                                    </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style=""> 221          if (useTranslationSearch) {                                                                               </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style=""> 222              getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223          }                                                                                                         </span>
<span  style=""> 224                                                                                                                    </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 225          ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 225          ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idPropertðŸ”µ</abbr></span>
<span  style=""> 226                                                                                                                    </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 227          if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                             </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 228              // Set the first column to be able to link to the main entity                                         </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 229              listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 230          } else {                                                                                                  </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 231              String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 231              String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType(ðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 232              message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;                      </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 233              LOG.error(message);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234          }                                                                                                         </span>
<span  style=""> 235                                                                                                                    </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 236          Date c = new Date();                                                                                      </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 237          String friendlyName = &quot;listGrid&quot; + c.getTime();                                                           </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 238          // Set up the filter builder params                                                                       </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 239          listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                         </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 240          listGrid.setFriendlyName(friendlyName);                                                                   </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 241          listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                                  </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 242          if (CollectionUtils.isEmpty(wrapper.getFields())) {                                                       </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 243              wrapper.setFields(defaultWrapperFields);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244          }                                                                                                         </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 245          listGrid.setFieldWrapper(wrapper);                                                                        </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 246          listGrid.setHideFriendlyName(true);                                                                       </span>
<span  style=""> 247                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 248          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                                </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 249          listGrid.setJson(blankJsonString);                                                                        </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 250          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 251          if (dw != null) {                                                                                         </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 252              listGrid.setDataWrapper(dw);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253          }                                                                                                         </span>
<span  style=""> 254                                                                                                                    </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 255          listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                         </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 256          listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                                </span>
<span  style=""> 257                                                                                                                    </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 258          extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                            </span>
<span  style=""> 259                                                                                                                    </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 260          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261      }                                                                                                             </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style=""> 263      private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {      </span>
<span  style=""> 264                                                                                                                    </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style=""> 265          TranslatedEntity translatedEntity;                                                                        </span>
<span  style=""> 266                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 267          try {                                                                                                     </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style=""> 268              translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                         </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style=""> 270              FieldDTO localeField = new FieldDTO();                                                                </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style=""> 271              localeField.setId(&quot;translationLocale&quot;);                                                               </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style=""> 272              localeField.setLabel(&quot;Translation locale&quot;);                                                           </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style=""> 273              localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                           </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style=""> 274              localeField.setInput(&quot;select&quot;);                                                                       </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style=""> 275              localeField.setType(&quot;string&quot;);                                                                        </span>
<span  style=""> 276                                                                                                                    </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""> 277              List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();     </span>
<span  style=""> 278                                                                                                                    </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style=""> 279              Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                                        </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style=""> 280              for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                                 </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style=""> 281                  localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282              }                                                                                                     </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style=""> 283              localeField.setValues((new JSONObject(localeMap)).toString());                                        </span>
<span  style=""> 284                                                                                                                    </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style=""> 285              defaultWrapperFields.add(localeField);                                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 286          } catch (Exception e) {                                                                                   </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style=""> 287              translatedEntity = null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289      }                                                                                                             </span>
<span  style=""> 290                                                                                                                    </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 291      protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {                      </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 292          FieldDTO fieldDTO = new FieldDTO();                                                                       </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 293          //translate the label to display                                                                          </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 294          String label = field.getFriendlyName();                                                                   </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 295          BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();                   </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 296          MessageSource messages = context.getMessageSource();                                                      </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 297          if (messages != null) {                                                                                   </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 298              label = messages.getMessage(label, null, label, context.getJavaLocale());                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299          }                                                                                                         </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 300          fieldDTO.setLabel(label);                                                                                 </span>
<span  style=""> 301                                                                                                                    </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 302          fieldDTO.setId(field.getName());                                                                          </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 303          if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                              </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 304              fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                                     </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 305          } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                         </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 306              fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                                     </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 307          } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 307          } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 308              fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                                  </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 309          } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                                      </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 310              fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                                  </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 311          } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                                        </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 312              fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                              </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 313              fieldDTO.setInput(&quot;select&quot;);                                                                          </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 314              fieldDTO.setType(&quot;string&quot;);                                                                           </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 315              String[][] enumerationValues = fmd.getEnumerationValues ();                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 316 +                                                                                                                  </span>
<span class="-4050759252301789248" onmouseenter="enter('-4050759252301789248');" onmouseout="out('-4050759252301789248');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 317 +            //not sure if we need to decode here or not...                                                        </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 318 +            for(int i=0; i&lt; enumerationValues.length;i++){                                                        </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 319 +                enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 320 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 321 +                                                                                                                  </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 322              Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                                        </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 323              for (int i = 0; i &lt; enumerationValues.length; i++) {                                                  </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 324                  enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325              }                                                                                                     </span>
<span  style=""> 326                                                                                                                    </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 327              fieldDTO.setValues(new JSONObject(enumMap).toString());                                               </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 328          } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                                       </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 329              fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                                </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 330              fieldDTO.setType(&quot;string&quot;);                                                                           </span>
<span  style=""> 331                                                                                                                    </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 332              AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 332              AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClaðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 333              if (section != null) {                                                                                </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 334                  String sectionKey = section.getUrl().substring(1);                                                </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 335                  fieldDTO.setSelectizeSectionKey(sectionKey);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 336              } else {                                                                                              </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 337                  fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 339          } else {                                                                                                  </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 340              fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341          }                                                                                                         </span>
<span  style=""> 342                                                                                                                    </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 343          return fieldDTO;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344      }                                                                                                             </span>
<span  style=""> 345                                                                                                                    </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 346      protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                                       </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 347          Field hf;                                                                                                 </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 348          if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                                 </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 349                  fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                            </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 350                  fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                          </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 351                  fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                                </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 352              hf = new ComboField();                                                                                </span>
<span class="5290847828500288961" onmouseenter="enter('5290847828500288961');" onmouseout="out('5290847828500288961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 353 -            ((ComboField) hf).setOptions(fmd.getEnumerationValues());                                             </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 354 +            String[][] enumerationValues = fmd.getEnumerationValues();                                            </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 355 +            for(int i=0; i&lt; enumerationValues.length;i++){                                                        </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 356 +                enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 357 +            }                                                                                                     </span>
<span class="4899380696599563483" onmouseenter="enter('4899380696599563483');" onmouseout="out('4899380696599563483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 358 +            ((ComboField) hf).setOptions(enumerationValues);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 359          } else {                                                                                                  </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 360              hf = new Field();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361          }                                                                                                         </span>
<span  style=""> 362                                                                                                                    </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 363          hf.withName(p.getName())                                                                                  </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""> 364            .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())  </span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 365            .withOrder(fmd.getGridOrder())                                                                          </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 366            .withColumnWidth(fmd.getColumnWidth())                                                                  </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 367            .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                            </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 368            .withForeignKeyClass(fmd.getForeignKeyClass())                                                          </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 369            .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                               </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""> 370            .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())      </span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 371            .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                         </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 372          String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();                     </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 373          hf.setFieldType(fieldType);                                                                               </span>
<span  style=""> 374                                                                                                                    </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 375          return hf;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376      }                                                                                                             </span>
<span  style=""> 377                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 378      @Override                                                                                                     </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""> 379      public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field,      </span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 380              String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                                  </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 381              throws ServiceException {                                                                             </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 382          FieldMetadata fmd = field.getMetadata();                                                                  </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 383          // Get the class metadata for this particular field                                                       </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 384          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);               </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 385          if (field != null) {                                                                                      </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 386              ppr.setSectionEntityField(field.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387          }                                                                                                         </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""> 388          ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();    </span>
<span  style=""> 389                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 390          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 391          ListGrid.Type type = null;                                                                                </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 392          boolean editable = false;                                                                                 </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 393          boolean sortable = false;                                                                                 </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 394          boolean readOnly = false;                                                                                 </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 395          boolean hideIdColumn = false;                                                                             </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 396          boolean canFilterAndSort = true;                                                                          </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 397          boolean modalSingleSelectable = false;                                                                    </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 398          boolean modalMultiSelectable = false;                                                                     </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 399          boolean selectize = false;                                                                                </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 400          boolean isMedia = false;                                                                                  </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 401          boolean isLookup = false;                                                                                 </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 402          String sortProperty = null;                                                                               </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 403          FieldWrapper wrapper = new FieldWrapper();                                                                </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 404          ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                             </span>
<span  style=""> 405                                                                                                                    </span>
<span  style=""> 406                                                                                                                    </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 407          String idProperty = &quot;id&quot;;                                                                                 </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 408          for (Property property : cmd.getProperties()) {                                                           </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 409              if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                           </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""> 410                      SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;        </span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 411                      //make sure it&#x27;s a property for this entity - not an association                              </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 412                      !property.getName().contains(&quot;.&quot;)) {                                                          </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 413                  idProperty = property.getName();                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 414                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416          }                                                                                                         </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""> 417          // Get the header fields for this list grid. Note that the header fields are different depending on the   </span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 418          // kind of field this is.                                                                                 </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 419          if (fmd instanceof BasicFieldMetadata) {                                                                  </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 420              readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                                  </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 421              modalSingleSelectable = true;                                                                         </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 422              for (Property p : cmd.getProperties()) {                                                              </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 423                  if (p.getMetadata() instanceof BasicFieldMetadata) {                                              </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 424                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 425                                                                                                                    </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 426                      if (SupportedFieldType.ID.equals(md.getFieldType())) {                                        </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 427                          idProperty = md.getName();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428                      }                                                                                             </span>
<span  style=""> 429                                                                                                                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 430                      if (md.isProminent() != null &amp;&amp; md.isProminent()                                              </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 431                              &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {           </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 432                          Field hf = createHeaderField(p, md);                                                      </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 433                          headerFields.add(hf);                                                                     </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 434                          defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435                      }                                                                                             </span>
<span  style=""> 436                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 437                      if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                           </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 438                          Field f = createHeaderField(p, md);                                                       </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 439                          wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442              }                                                                                                     </span>
<span  style=""> 443                                                                                                                    </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 444              type = ListGrid.Type.TO_ONE;                                                                          </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 445          } else if (fmd instanceof BasicCollectionMetadata) {                                                      </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 446              BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                          </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 447              readOnly = !bcm.isMutable();                                                                          </span>
<span  style=""> 448                                                                                                                    </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 449              if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                             </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 450                  isLookup = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451              }                                                                                                     </span>
<span  style=""> 452                                                                                                                    </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 453              if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                                  </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 454                  Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                                   </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 455                  if (p != null) {                                                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 456                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 457                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 458                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 459                      headerFields.add(hf);                                                                         </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 460                      wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 462              } else {                                                                                              </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 463                  for (Property p : cmd.getProperties()) {                                                          </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 464                      if (p.getMetadata() instanceof BasicFieldMetadata) {                                          </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 465                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 466                          if (md.isProminent() != null &amp;&amp; md.isProminent()                                          </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 467                                  &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {       </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 468                              Field hf = createHeaderField(p, md);                                                  </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 469                              headerFields.add(hf);                                                                 </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 470                              defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471                          }                                                                                         </span>
<span  style=""> 472                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 473                          if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                       </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 474                              Field f = createHeaderField(p, md);                                                   </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 475                              wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 478                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479              }                                                                                                     </span>
<span  style=""> 480                                                                                                                    </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 481              type = ListGrid.Type.BASIC;                                                                           </span>
<span  style=""> 482                                                                                                                    </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 483              if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 483              if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 484                  editable = true;                                                                                  </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 485              } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                           </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 486                  selectize = true;                                                                                 </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 487                  modalSingleSelectable = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 488              } else {                                                                                              </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 489                  modalSingleSelectable = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490              }                                                                                                     </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 491              sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                             </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 492              if (sortable) {                                                                                       </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 493                  sortProperty = bcm.getSortProperty();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494              }                                                                                                     </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 495          } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                              </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 496              modalSingleSelectable = true;                                                                         </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 497              readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                                      </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 498              AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;                        </span>
<span  style=""> 499                                                                                                                    </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 500              if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {                 </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 501                  isLookup = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502              }                                                                                                     </span>
<span  style=""> 503                                                                                                                    </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""> 504              if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {      </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 505                  selectize = true;                                                                                 </span>
<span  style=""> 506                                                                                                                    </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 507                  Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                                 </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 508                  if (p != null) {                                                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 509                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 510                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 511                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 512                      headerFields.add(hf);                                                                         </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 513                      wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 515              } else {                                                                                              </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 516                  for (String fieldName : atcmd.getGridVisibleFields()) {                                           </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 517                      Property p = cmd.getPMap().get(fieldName);                                                    </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 518                      if (p != null) {                                                                              </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 519                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span  style=""> 520                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 521                          Field hf = createHeaderField(p, md);                                                      </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 522                          headerFields.add(hf);                                                                     </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 523                          wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524                      }                                                                                             </span>
<span  style=""> 525                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527              }                                                                                                     </span>
<span  style=""> 528                                                                                                                    </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 529              type = ListGrid.Type.ADORNED;                                                                         </span>
<span  style=""> 530                                                                                                                    </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 531              if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                            </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 532                  editable = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533              }                                                                                                     </span>
<span  style=""> 534                                                                                                                    </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 535              AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()                 </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""> 536                      .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);      </span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 537              sortable = StringUtils.isNotBlank(adornedList.getSortField());                                        </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 538              if (sortable) {                                                                                       </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 539                  sortProperty = adornedList.getSortField();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540              }                                                                                                     </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 541          } else if (fmd instanceof MapMetadata) {                                                                  </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 542              readOnly = !((MapMetadata) fmd).isMutable();                                                          </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 543              MapMetadata mmd = (MapMetadata) fmd;                                                                  </span>
<span  style=""> 544                                                                                                                    </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 545              Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                               </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 546              BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                                     </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 547              keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                                     </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 548              Field hf = createHeaderField(p2, keyMd);                                                              </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 549              headerFields.add(hf);                                                                                 </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 550              wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                                   </span>
<span  style=""> 551                                                                                                                    </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 552              if (mmd.isSimpleValue()) {                                                                            </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 553                  Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                              </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 554                  BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();                    </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 555                  valueMd.setFriendlyName(&quot;Value&quot;);                                                                 </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 556                  hf = createHeaderField(valueProperty, valueMd);                                                   </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 557                  headerFields.add(hf);                                                                             </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 558                  wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                             </span>
<span  style=""> 559                                                                                                                    </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 560                  idProperty = &quot;key&quot;;                                                                               </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 561                  hideIdColumn = true;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 562              } else {                                                                                              </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 563                  for (Property p : cmd.getProperties()) {                                                          </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 564                      if (p.getMetadata() instanceof BasicFieldMetadata) {                                          </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 565                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 566                          String valueClassName = mmd.getValueClassName();                                          </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 567                          if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                                 </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 568                              Class&lt;?&gt; clazz;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 569                              try {                                                                                 </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 570                                  clazz = Class.forName(mmd.getValueClassName());                                   </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 571                              } catch (ClassNotFoundException e) {                                                  </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 572                                  throw ExceptionHelper.refineException(e);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573                              }                                                                                     </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 574                              java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 574                              java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 575                              ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);                     </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 576                              if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 576                              if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getNameðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 577                                  valueClassName = manyToOne.targetEntity().getName();                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 578                              } else {                                                                              </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 579                                  OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);                    </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 580                                  if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 580                                  if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getNaðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 581                                      valueClassName = oneToOne.targetEntity().getName();                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 582                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                          }                                                                                         </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 585                          if (md.getTargetClass().equals(valueClassName)) {                                         </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 586                              if (md.isProminent() != null &amp;&amp; md.isProminent()                                      </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 587                                      &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {   </span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 588                                  hf = createHeaderField(p, md);                                                    </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 589                                  headerFields.add(hf);                                                             </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 590                                  defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span  style=""> 591                                                                                                                    </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 592                                  // Is this a media listgrid                                                       </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 593                                  if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                                   </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 594                                      isMedia = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596                              }                                                                                     </span>
<span  style=""> 597                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 598                              if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                   </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 599                                  wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604              }                                                                                                     </span>
<span  style=""> 605                                                                                                                    </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 606              type = ListGrid.Type.MAP;                                                                             </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 607              editable = true;                                                                                      </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 608              canFilterAndSort = false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609          }                                                                                                         </span>
<span  style=""> 610                                                                                                                    </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 611          String ceilingType = &quot;&quot;;                                                                                  </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 612          if (fmd instanceof BasicFieldMetadata) {                                                                  </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 613              ceilingType = cmd.getCeilingType();                                                                   </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 614          } else if (fmd instanceof CollectionMetadata) {                                                           </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 615              ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616          }                                                                                                         </span>
<span  style=""> 617                                                                                                                    </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 618          if (CollectionUtils.isEmpty(headerFields)) {                                                              </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 619              String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 619              String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; andðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 620                      StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                                  </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""> 621              if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {        </span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 622                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 622                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetColleðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 623              } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {                </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 624                  message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 624                  message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollectioðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 625              } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                                </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 626                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 626                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 627              } else {                                                                                              </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 628                  message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629              }                                                                                                     </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 630              LOG.error(message);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631          }                                                                                                         </span>
<span  style=""> 632                                                                                                                    </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 633          ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 633          ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 634          listGrid.setSubCollectionFieldName(field.getName());                                                      </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 635          listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                          </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 636          if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                                    </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 637              listGrid.setFriendlyName(field.getName());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638          }                                                                                                         </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 639          listGrid.setContainingEntityId(containingEntityId);                                                       </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 640          listGrid.setIsReadOnly(readOnly);                                                                         </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 641          listGrid.setHideIdColumn(hideIdColumn);                                                                   </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 642          listGrid.setCanFilterAndSort(canFilterAndSort);                                                           </span>
<span  style=""> 643                                                                                                                    </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 644          // Set up the filter builder params                                                                       </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 645          Date c = new Date();                                                                                      </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 646          String friendlyName = field.getMetadata().getFriendlyName();                                              </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 647          String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                              </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 648          listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                                       </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 649          listGrid.setFriendlyName(friendlyName);                                                                   </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 650          listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                                  </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 651          if (CollectionUtils.isEmpty(wrapper.getFields())) {                                                       </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 652              wrapper.setFields(defaultWrapperFields);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653          }                                                                                                         </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 654          listGrid.setFieldWrapper(wrapper);                                                                        </span>
<span  style=""> 655                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 656          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                                </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 657          listGrid.setJson(blankJsonString);                                                                        </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 658          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 659          if (dw != null) {                                                                                         </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 660              listGrid.setDataWrapper(dw);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661          }                                                                                                         </span>
<span  style=""> 662                                                                                                                    </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 663          if (editable) {                                                                                           </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 664              listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665          }                                                                                                         </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 666          if (readOnly) {                                                                                           </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 667              listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668          }                                                                                                         </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 669          if (sortable) {                                                                                           </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 670              listGrid.setCanFilterAndSort(false);                                                                  </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 671              listGrid.setIsSortable(true);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672          }                                                                                                         </span>
<span  style=""> 673                                                                                                                    </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 674          if (modalSingleSelectable) {                                                                              </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 675              if (readOnly) {                                                                                       </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 676                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 676                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(trðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 677              } else {                                                                                              </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 678                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                 </span>
<span  style=""> 679                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681          }                                                                                                         </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 682          listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                                </span>
<span  style=""> 683                                                                                                                    </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 684          if (selectize) {                                                                                          </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 685              listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                                </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 686              listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687          }                                                                                                         </span>
<span  style=""> 688                                                                                                                    </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 689          if (modalMultiSelectable) {                                                                               </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 690              listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                                      </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 691              listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692          }                                                                                                         </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 693          listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                              </span>
<span  style=""> 694                                                                                                                    </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 695          if (fmd.getManualFetch()) {                                                                               </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 696              listGrid.setManualFetch(true);                                                                        </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 697              listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698          }                                                                                                         </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 699          if (isMedia) {                                                                                            </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 700              listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701          }                                                                                                         </span>
<span  style=""> 702                                                                                                                    </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 703          extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                            </span>
<span  style=""> 704                                                                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 705          //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 705          //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the ðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 706          if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                          </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 707              EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 707              EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 708              for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 708              for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getDatðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 709                  for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {               </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 710                      if (modifier.isQualified(data.getModifierType())) {                                           </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 711                          modifier.modifyListGrid(new EntityFormModifierRequest()                                   </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 712                                  .withListGrid(listGrid)                                                           </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 713                                  .withConfiguration(data)                                                          </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 714                                  .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())             </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 715                                  .withRowLevelSecurityService(rowLevelSecurityService));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719          }                                                                                                         </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 720          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721      }                                                                                                             </span>
<span  style=""> 722                                                                                                                    </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 723      protected String getMapKeyFriendlyName(Property property) {                                                   </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 724          String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                               </span>
<span  style=""> 725                                                                                                                    </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 726          return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727      }                                                                                                             </span>
<span  style=""> 728                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 729      @Override                                                                                                     </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 730      public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 730      public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, PropeðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 731          String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                                      </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 732              throws ServiceException {                                                                             </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 733          FieldMetadata fmd = field.getMetadata();                                                                  </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 734          // Get the class metadata for this particular field                                                       </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 735          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);               </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 736          if (field != null) {                                                                                      </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 737              ppr.setSectionEntityField(field.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738          }                                                                                                         </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""> 739          ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();    </span>
<span  style=""> 740                                                                                                                    </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 741          Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                                       </span>
<span  style=""> 742                                                                                                                    </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 743          AdornedTargetList adornedList = ppr.getAdornedList();                                                     </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 744          if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                                      </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 745              &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null             </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 746              &amp;&amp; adornedList.getTargetIdProperty() != null) {                                                       </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 747              result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 747              result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 748              result.put(&quot;linkedObjectId&quot;, containingEntityId);                                                     </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 749              result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 749              result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750          }                                                                                                         </span>
<span  style=""> 751                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 752          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753      }                                                                                                             </span>
<span  style=""> 754                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 755      @Override                                                                                                     </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 756      public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {             </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 757          Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                             </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 758          List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                                    </span>
<span  style=""> 759                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 760          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 761          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 762              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 763                  BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                     </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 764                  if (md.isProminent() != null &amp;&amp; md.isProminent()                                                  </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 765                          &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {               </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 766                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 767                      headerFields.add(hf);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770          }                                                                                                         </span>
<span  style=""> 771                                                                                                                    </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 772          for (Entity e : drs.getRecords()) {                                                                       </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 773              Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                                </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 774              for (Field headerField : headerFields) {                                                              </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 775                  Property p = e.findProperty(headerField.getName());                                               </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 776                  if (p != null) {                                                                                  </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 777                      selectizeOption.put(&quot;name&quot;, p.getValue());                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 778                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780              }                                                                                                     </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 781              if (e.findProperty(&quot;id&quot;) != null) {                                                                   </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 782                  selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                                       </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 783              //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type           </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 784              } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                                    </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 785                  selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786              }                                                                                                     </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 787              if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                                  </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 788                  selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789              }                                                                                                     </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 790              options.add(selectizeOption);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791          }                                                                                                         </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 792          result.put(&quot;options&quot;, options);                                                                           </span>
<span  style=""> 793                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 794          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795      }                                                                                                             </span>
<span  style=""> 796                                                                                                                    </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 797      protected String buildSelectizeUrl(ListGrid listGrid) {                                                       </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 798          HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();           </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 799          String url = request.getContextPath();                                                                    </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 800          url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 800          url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + liðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 801          url += &quot;/&quot; + listGrid.getContainingEntityId();                                                            </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 802          url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                                        </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 803          return url;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804      }                                                                                                             </span>
<span  style=""> 805                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 806      /**                                                                                                           </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 807       * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 807       * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StriðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 808       * @param className                                                                                           </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 809       * @param headerFields                                                                                        </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 810       * @param type                                                                                                </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 811       * @param drs                                                                                                 </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 812       * @param sectionKey                                                                                          </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 813       * @param order                                                                                               </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 814       * @param idProperty                                                                                          </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 815       * @param sectionCrumbs                                                                                       </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 816       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 817       */                                                                                                           </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 818      @Deprecated                                                                                                   </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 819      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 819      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResulðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 820              String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {                  </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""> 821         return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 822      }                                                                                                             </span>
<span  style=""> 823                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 824      /**                                                                                                           </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 825       * Populate a ListGrid with ListGridRecords.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 826       *                                                                                                            </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 827       * @param className                                                                                           </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 828       * @param headerFields                                                                                        </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 829       * @param type                                                                                                </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 830       * @param drs                                                                                                 </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 831       * @param sectionKey                                                                                          </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 832       * @param order                                                                                               </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 833       * @param idProperty                                                                                          </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 834       * @param sectionCrumbs                                                                                       </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 835       * @param sortPropery                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 836       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 837       */                                                                                                           </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 838      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 838      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResulðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 839              String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 839              String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 840          // Create the list grid and set some basic attributes                                                     </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 841          ListGrid listGrid = new ListGrid();                                                                       </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 842          listGrid.setClassName(className);                                                                         </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 843          listGrid.getHeaderFields().addAll(headerFields);                                                          </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 844          listGrid.setListGridType(type);                                                                           </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 845          listGrid.setSectionCrumbs(sectionCrumbs);                                                                 </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 846          listGrid.setSectionKey(sectionKey);                                                                       </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 847          listGrid.setOrder(order);                                                                                 </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 848          listGrid.setIdProperty(idProperty);                                                                       </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 849          listGrid.setStartIndex(drs.getStartIndex());                                                              </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 850          listGrid.setTotalRecords(drs.getTotalRecords());                                                          </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 851          listGrid.setPageSize(drs.getPageSize());                                                                  </span>
<span  style=""> 852                                                                                                                    </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 853          String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                              </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 854          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 854          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier)ðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 855          if (section != null) {                                                                                    </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 856              listGrid.setExternalEntitySectionKey(section.getUrl());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857          }                                                                                                         </span>
<span  style=""> 858                                                                                                                    </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 859          // format date list grid cells                                                                            </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 860          SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                                   </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 861          DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                                   </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 862          symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                                      </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 863          formatter.setDateFormatSymbols(symbols);                                                                  </span>
<span  style=""> 864                                                                                                                    </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 865          // For each of the entities (rows) in the list grid, we need to build the associated                      </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 866          // ListGridRecord and set the required fields on the record. These fields are the same ones               </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 867          // that are used for the header fields.                                                                   </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 868          for (Entity e : drs.getRecords()) {                                                                       </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 869              ListGridRecord record = new ListGridRecord();                                                         </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 870              record.setListGrid(listGrid);                                                                         </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 871              record.setDirty(e.isDirty());                                                                         </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 872              record.setEntity(e);                                                                                  </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 873              if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {                     </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 874                  Property sort = e.findProperty(sortPropery);                                                      </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 875                  record.setDisplayOrder(sort.getValue());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876              }                                                                                                     </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 877              if (e.findProperty(&quot;hasError&quot;) != null) {                                                             </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 878                  Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());                   </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 879                  record.setIsError(hasError);                                                                      </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 880                  if (hasError) {                                                                                   </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 881                      ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager                 </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 882                              .getProxy().determineErrorMessageForEntity(e, record);                                </span>
<span  style=""> 883                                                                                                                    </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 884                      if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                      </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 885                          record.setErrorKey(&quot;listgrid.record.error&quot;);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888              }                                                                                                     </span>
<span  style=""> 889                                                                                                                    </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 890              if (e.findProperty(&quot;progressStatus&quot;) != null) {                                                       </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 891                  ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager                     </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 892                          .getProxy().determineStatusMessageForEntity(e, record);                                   </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 893                  if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                          </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 894                      record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                                </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 895                      record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897              }                                                                                                     </span>
<span  style=""> 898                                                                                                                    </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 899              if (e.findProperty(idProperty) != null) {                                                             </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 900                  record.setId(e.findProperty(idProperty).getValue());                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901              }                                                                                                     </span>
<span  style=""> 902                                                                                                                    </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 903              for (Field headerField : headerFields) {                                                              </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 904                  Property p = e.findProperty(headerField.getName());                                               </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 905                  if (p != null) {                                                                                  </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 906                      Field recordField = new Field().withName(headerField.getName())                               </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 907                              .withFriendlyName(headerField.getFriendlyName())                                      </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 908                              .withOrder(p.getMetadata().getOrder());                                               </span>
<span  style=""> 909                                                                                                                    </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 910                      if (headerField instanceof ComboField) {                                                      </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 911                          recordField.setValue(((ComboField) headerField).getOption(p.getValue()));                 </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 912                          recordField.setDisplayValue(p.getDisplayValue());                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 913                      } else {                                                                                      </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 914                          if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 915                              try {                                                                                 </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""> 916                                  Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());      </span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 917                                  String newValue = formatter.format(date);                                         </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 918                                  recordField.setValue(newValue);                                                   </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 919                              } catch (Exception ex) {                                                              </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 920                                  recordField.setValue(p.getValue());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 921                              }                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 922                          } else {                                                                                  </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 923                              recordField.setValue(p.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924                          }                                                                                         </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 925                          recordField.setDisplayValue(p.getDisplayValue());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926                      }                                                                                             </span>
<span  style=""> 927                                                                                                                    </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 928                      recordField.setDerived(isDerivedField(headerField, recordField, p));                          </span>
<span  style=""> 929                                                                                                                    </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 930                      record.getFields().add(recordField);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932              }                                                                                                     </span>
<span  style=""> 933                                                                                                                    </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 934              if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                              </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 935                  Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""> 936                  hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());       </span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 937                  record.getHiddenFields().add(hiddenField);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 938              }                                                                                                     </span>
<span  style=""> 939                                                                                                                    </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 940              if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                           </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 941                  record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 942              }                                                                                                     </span>
<span  style=""> 943                                                                                                                    </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 944              extensionManager.getProxy().modifyListGridRecord(className, record, e);                               </span>
<span  style=""> 945                                                                                                                    </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 946              listGrid.getRecords().add(record);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947          }                                                                                                         </span>
<span  style=""> 948                                                                                                                    </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 949          if (drs.getFirstId() != null) {                                                                           </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 950              listGrid.setFirstId(drs.getFirstId());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951          }                                                                                                         </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 952          if (drs.getLastId() != null) {                                                                            </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 953              listGrid.setLastId(drs.getLastId());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954          }                                                                                                         </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 955          if (drs.getUpperCount() != null) {                                                                        </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 956              listGrid.setUpperCount(drs.getUpperCount());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957          }                                                                                                         </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 958          if (drs.getLowerCount() != null) {                                                                        </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 959              listGrid.setLowerCount(drs.getLowerCount());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960          }                                                                                                         </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 961          if (drs.getFetchType() != null) {                                                                         </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 962              listGrid.setFetchType(drs.getFetchType().toString());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 963          }                                                                                                         </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 964          if (drs.getTotalCountLessThanPageSize() != null) {                                                        </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 965              listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966          }                                                                                                         </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 967          if (drs.getPromptSearch() != null) {                                                                      </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 968              listGrid.setPromptSearch(drs.getPromptSearch());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969          }                                                                                                         </span>
<span  style=""> 970                                                                                                                    </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 971          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 972      }                                                                                                             </span>
<span  style=""> 973                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 974      /**                                                                                                           </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 975       * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 975       * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasiðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 976       * for the given Property to see if something on the backend has marked it as derived                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 977       *                                                                                                            </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 978       * @param headerField the header for this recordField                                                         </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 979       * @param recordField the recordField being populated                                                         </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 980       * @param p the property that relates to this recordField                                                     </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 981       * @return whether or not this field is derived                                                               </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 982       * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 982       * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, SðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 983       */                                                                                                           </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 984      protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                          </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 985          return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986      }                                                                                                             </span>
<span  style=""> 987                                                                                                                    </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 988      protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {             </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style=""> 989          List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                           </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style=""> 990          List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                                   </span>
<span  style=""> 991                                                                                                                    </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style=""> 992          for (Property property : properties) {                                                                    </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 993              if (property.getMetadata() instanceof BasicFieldMetadata) {                                           </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style=""> 994                  BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                             </span>
<span  style=""> 995                                                                                                                    </span>
<span  style=""> 996                                                                                                                    </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style=""> 997                  if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {                     </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""> 998                      // Depending on visibility, field for the particular property is not created on the form      </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 999                      String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();         </span>
<span  style="">1000                                                                                                                    </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style="">1001                      // Create the field and set some basic attributes                                             </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style="">1002                      Field f;                                                                                      </span>
<span  style="">1003                                                                                                                    </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style="">1004                      if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())                     </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style="">1005                              || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())               </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style="">1006                              || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())            </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style="">1007                              || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {               </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title="1008                          // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values">1008                          // We&#x27;re dealing with fields that should render as drop-downs, so set their possible valueðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1009                          f = new ComboField();                                                                     </span>
<span class="6120731816730172045" onmouseenter="enter('6120731816730172045');" onmouseout="out('6120731816730172045');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1010 -                        ((ComboField) f).setOptions(fmd.getEnumerationValues());                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1011 +                                                                                                                  </span>
<span class="3133859004952794945" onmouseenter="enter('3133859004952794945');" onmouseout="out('3133859004952794945');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1012 +                        String[][] enumerationValues = fmd.getEnumerationValues();                                </span>
<span class="6230892989028145451" onmouseenter="enter('6230892989028145451');" onmouseout="out('6230892989028145451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1013 +                        for(int i=0; i&lt; enumerationValues.length;i++){                                            </span>
<span class="-4796188217766381598" onmouseenter="enter('-4796188217766381598');" onmouseout="out('-4796188217766381598');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1014 +                            enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1]);">1014 +                            enumerationValues[i][1] = exploitProtectionService.htmlDecode(enumerationValues[i][1])ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1015 +                        }                                                                                         </span>
<span class="5476416629756612876" onmouseenter="enter('5476416629756612876');" onmouseout="out('5476416629756612876');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1016 +                        ((ComboField) f).setOptions(enumerationValues);                                           </span>
<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title="1017                          if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()">1017                          if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValuðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style="">1018                                  &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                                   </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1019                              f.setIsVisible(false);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020                          }                                                                                         </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style="">1021                      } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                            </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style="">1022                          f = new CodeField();                                                                      </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style="">1023                      } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                        </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1024                              || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                   </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1025                              || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {              </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style="">1026                          // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields             </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style="">1027                          f = new RuleBuilderField();                                                               </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style="">1028                          ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);                     </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style="">1029                          ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                                 </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style="">1030                          ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                          </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style="">1031                          ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());                   </span>
<span  style="">1032                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style="">1033                          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style="">1034                          ((RuleBuilderField) f).setJson(blankJsonString);                                          </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1035                          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1036                          if (dw != null) {                                                                         </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style="">1037                              ((RuleBuilderField) f).setDataWrapper(dw);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038                          }                                                                                         </span>
<span  style="">1039                                                                                                                    </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1040                          if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {                        </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style="">1041                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                            </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1042                          } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {          </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style="">1043                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);                     </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1044                          } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {            </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style="">1045                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046                          }                                                                                         </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1047                      } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                                 </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1048                          // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a">1048                          // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of inðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1049                          // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1049                          // modal, so we&#x27;ll provision the combo field here. Available options will be set as part oðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1050                          // subsequent operation                                                                   </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1051                          f = new ComboField();                                                                     </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1052                      } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                           </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1053                          f = new MediaField();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1054                      } else {                                                                                      </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1055                          // Create a default field since there was no specialized handler                          </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1056                          f = new Field();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057                      }                                                                                             </span>
<span  style="">1058                                                                                                                    </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1059                      Boolean required = fmd.getRequiredOverride();                                                 </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1060                      if (required == null) {                                                                       </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1061                          required = fmd.getRequired();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062                      }                                                                                             </span>
<span  style="">1063                                                                                                                    </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1064                      Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                                   </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1065                      if (allowNoValueEnum != null) {                                                               </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1066                          f.setAllowNoValueEnumOption(allowNoValueEnum);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067                      }                                                                                             </span>
<span  style="">1068                                                                                                                    </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1069                      f.withName(property.getName())                                                                </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1070                       .withFieldType(fieldType)                                                                    </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1071                       .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                                  </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1072                       .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                          </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1073                       .withOrder(fmd.getOrder())                                                                   </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1074                       .withFriendlyName(fmd.getFriendlyName())                                                     </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1075                       .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                 </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1076                       .withForeignKeyClass(fmd.getForeignKeyClass())                                               </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1077                       .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                    </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1078                       .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1078                       .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromTyðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1079                       .withRequired(required)                                                                      </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1080                       .withReadOnly(fmd.getReadOnly())                                                             </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1081                       .withTranslatable(fmd.getTranslatable())                                                     </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style="">1082                       .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))  </span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1083                       .withLargeEntry(fmd.isLargeEntry())                                                          </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1084                       .withHint(fmd.getHint())                                                                     </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1085                       .withTooltip(fmd.getTooltip())                                                               </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1086                       .withHelp(fmd.getHelpText())                                                                 </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1087                       .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                                        </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1088                       .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                               </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1089                       .withAssociatedFieldName(fmd.getAssociatedFieldName());                                      </span>
<span  style="">1090                                                                                                                    </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1091                      String defaultValue = fmd.getDefaultValue();                                                  </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1092                      if (defaultValue != null) {                                                                   </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1093                          defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                          </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1094                          f.withValue(defaultValue);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095                      }                                                                                             </span>
<span  style="">1096                                                                                                                    </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1097                      if (StringUtils.isBlank(f.getFriendlyName())) {                                               </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1098                          f.setFriendlyName(f.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099                      }                                                                                             </span>
<span  style="">1100                                                                                                                    </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1101                      // If is form hidden, set visible to false                                                    </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1102                      if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {                      </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1103                          f.setIsVisible(false);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104                      }                                                                                             </span>
<span  style="">1105                                                                                                                    </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1106                      if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                                 </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1107                          f.setIsVisible(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108                      }                                                                                             </span>
<span  style="">1109                                                                                                                    </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1110                      // Add the field to the appropriate FieldGroup                                                </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1111                      if (fmd.getGroup() == null) {                                                                 </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1112                          homelessFields.add(f);                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1113                      } else {                                                                                      </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style="">1114                          ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115                      }                                                                                             </span>
<span  style="">1116                                                                                                                    </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1117                      if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                                   </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1118                          fieldsWithAssociations.add(f);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122          }                                                                                                         </span>
<span  style="">1123                                                                                                                    </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1124          for (Field f : homelessFields) {                                                                          </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1125              ef.addField(cmd, f, null, null, null, null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126          }                                                                                                         </span>
<span  style="">1127                                                                                                                    </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1128          for (Field f : fieldsWithAssociations) {                                                                  </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1129              Field associatedField = findAssociatedField(ef, f);                                                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1130              if (associatedField != null) {                                                                        </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1131                  associatedField.setShouldRender(false);                                                           </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1132                  f.setAssociatedFieldName(associatedField.getName());                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1133              } else {                                                                                              </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1134                  f.setAssociatedFieldName(null);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137      }                                                                                                             </span>
<span  style="">1138                                                                                                                    </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1139      protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                          </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1140          if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                                    </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1141              return fmd.getFieldComponentRendererTemplate();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142          }                                                                                                         </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1143          return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144      }                                                                                                             </span>
<span  style="">1145                                                                                                                    </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1146      protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                                      </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1147          if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                                </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1148              return fmd.getGridFieldComponentRendererTemplate();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149          }                                                                                                         </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style="">1150          return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151      }                                                                                                             </span>
<span  style="">1152                                                                                                                    </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1153      private Field findAssociatedField(EntityForm ef, Field f) {                                                   </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1154          // Try on the parent object                                                                               </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1155          Field associatedField = ef.findField(f.getAssociatedFieldName());                                         </span>
<span  style="">1156                                                                                                                    </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1157          if (associatedField == null) {                                                                            </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1158              // Check the field&#x27;s path                                                                             </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1159              String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                                   </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1160              String testPath = &quot;&quot;;                                                                                 </span>
<span  style="">1161                                                                                                                    </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1162              for (String path : fieldPathParts) {                                                                  </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1163                  testPath += path + &quot;.&quot;;                                                                           </span>
<span  style="">1164                                                                                                                    </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1165                  associatedField = ef.findField(testPath + f.getAssociatedFieldName());                            </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1166                  if (associatedField != null) {                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1167                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170          }                                                                                                         </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1171          return associatedField;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172      }                                                                                                             </span>
<span  style="">1173                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1174      /**                                                                                                           </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1175       * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,         </span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1176       * it returns the foreignKeyClass.                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1177       *                                                                                                            </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1178       * @param foreignKeyClass the {@link String} class name                                                       </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1179       * @return the admin section pathname                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1180       */                                                                                                           </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1181      protected String getAdminSectionPath(String foreignKeyClass) {                                                </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1182          if (foreignKeyClass != null) {                                                                            </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1183              AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1183              AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1184              return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1186          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187      }                                                                                                             </span>
<span  style="">1188                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1189      /**                                                                                                           </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1190       * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1190       * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal tðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1191       *  the processed value of another tab.                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1192       *                                                                                                            </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1193       * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where                </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style="">1194       *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,    </span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style="">1195       *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1196       */                                                                                                           </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1197      protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {           </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1198          if (tabMetadataMap != null) {                                                                             </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1199              Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                              </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1200              for (String tabKey : tabMetadataKeySet) {                                                             </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1201                  TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                             </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style="">1202                  String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);      </span>
<span  style="">1203                                                                                                                    </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1204                  if (foundMatchingTab(unprocessedTabName)) {                                                       </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1205                      if (!tabExists(ef, unprocessedTabName)) {                                                     </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1206                          TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);                 </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1207                          unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1208                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1209                  } else {                                                                                          </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1210                      if (tabExists(ef, tabKey)) {                                                                  </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1211                          unprocessedTabName = tabKey;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1212                      } else {                                                                                      </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1213                          unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1214                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1215                  }                                                                                                 </span>
<span  style="">1216                                                                                                                    </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1217                  Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();                        </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1218                  for (String groupKey : groupMetadataKeySet) {                                                     </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1219                      ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1219                      ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1222          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1223      }                                                                                                             </span>
<span  style="">1224                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1225      /**                                                                                                           </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1226       * Search for any other tab on the target entity that has the same display value                              </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1227       *  as the value provided tab name.                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1228       *                                                                                                            </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style="">1229       * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.     </span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1230       *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1230       *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySeðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style="">1231       *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return </span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1232       *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1233       *                                                                                                            </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style="">1234       * If a tab with the same display value cannot be found, then we should return null to indicate that there    </span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1235       *  is no matching tab with the same processed tabName value.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1236       */                                                                                                           </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style="">1237      protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {    </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1238          for (String tabKey : tabMetadataKeySet) {                                                                 </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1239              String tabName = tabMetadata.getTabName();                                                            </span>
<span  style="">1240                                                                                                                    </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1241              if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                                 </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1242                  return tabKey;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244          }                                                                                                         </span>
<span  style="">1245                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1246          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247      }                                                                                                             </span>
<span  style="">1248                                                                                                                    </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1249      protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1250          try {                                                                                                     </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1251              String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);                        </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style="">1252              boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey); </span>
<span  style="">1253                                                                                                                    </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style="">1254              return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);</span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1255          } catch (NoSuchMessageException e) {                                                                      </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1256              LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                                        </span>
<span  style="">1257                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1258              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1259          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260      }                                                                                                             </span>
<span  style="">1261                                                                                                                    </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1262      protected boolean foundMatchingTab(String unprocessedTabName) {                                               </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1263          return (unprocessedTabName != null);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1264      }                                                                                                             </span>
<span  style="">1265                                                                                                                    </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1266      protected boolean tabExists(EntityForm ef, String tabKey) {                                                   </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1267          return (ef.findTab(tabKey) != null);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268      }                                                                                                             </span>
<span  style="">1269                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1270      @Override                                                                                                     </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1271      public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {                    </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1272          String defaultValue = fmd.getDefaultValue();                                                              </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1273          if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                           </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1274                  || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                               </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1275                  || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1276              return null;                                                                                          </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1277          } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1278              try {                                                                                                 </span>
<span class="2272843703065247861" onmouseenter="enter('2272843703065247861');" onmouseout="out('2272843703065247861');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1279 -                Integer.parseInt(defaultValue);                                                                   </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1280 -            } catch (NumberFormatException  e) {                                                                  </span>
<span class="-6644487127041354154" onmouseenter="enter('-6644487127041354154');" onmouseout="out('-6644487127041354154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1281 +                DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestContext.getBroadleafRequestContext().getJavaLocale());">1281 +                DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestContext.getBðŸ”µ</abbr></span>
<span class="-7607248322995261618" onmouseenter="enter('-7607248322995261618');" onmouseout="out('-7607248322995261618');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1282 +                Number parse = numberFormat.parse(defaultValue);                                                  </span>
<span class="677906070021081648" onmouseenter="enter('677906070021081648');" onmouseout="out('677906070021081648');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1283 +            } catch (NumberFormatException | ParseException e) {                                                  </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style="">1284                  String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);</span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1285                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1286                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287              }                                                                                                     </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1288          } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                                        </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1289                  || fieldType.equals(SupportedFieldType.MONEY.toString())) {                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1290              try {                                                                                                 </span>
<span class="6039577623543160332" onmouseenter="enter('6039577623543160332');" onmouseout="out('6039577623543160332');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1291 -                BigDecimal val = new BigDecimal(defaultValue);                                                    </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1292 -            } catch (NumberFormatException  e) {                                                                  </span>
<span class="-6644487127041354154" onmouseenter="enter('-6644487127041354154');" onmouseout="out('-6644487127041354154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1293 +                DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestContext.getBroadleafRequestContext().getJavaLocale());">1293 +                DecimalFormat numberFormat = (DecimalFormat) NumberFormat.getInstance(BroadleafRequestContext.getBðŸ”µ</abbr></span>
<span class="-3587356773982730962" onmouseenter="enter('-3587356773982730962');" onmouseout="out('-3587356773982730962');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1294 +                numberFormat.setParseBigDecimal(true);                                                            </span>
<span class="-7607248322995261618" onmouseenter="enter('-7607248322995261618');" onmouseout="out('-7607248322995261618');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1295 +                Number parse = numberFormat.parse(defaultValue);                                                  </span>
<span class="677906070021081648" onmouseenter="enter('677906070021081648');" onmouseout="out('677906070021081648');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1296 +            } catch (NumberFormatException | ParseException e) {                                                  </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1297                  String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);                 </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1298                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1299                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300              }                                                                                                     </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1301          } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                                     </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1302              if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)         </span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style="">1303                      &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {      </span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style="">1304                  String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);</span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1305                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1306                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1307              }                                                                                                     </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1308          } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                                        </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1309              DateFormat format = FormatUtil.getDateFormat();                                                       </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1310              if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                                   </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1311                  defaultValue = format.format(new Date());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1312              } else {                                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1313                  try {                                                                                             </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1314                      Date date = format.parse(defaultValue);                                                       </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1315                      defaultValue = format.format(date);                                                           </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1316                  } catch (ParseException e) {                                                                      </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1317                      String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1317                      String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue)ðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1318                      LOG.debug(msg);                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1319                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1322          }                                                                                                         </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1323          return defaultValue;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324      }                                                                                                             </span>
<span  style="">1325                                                                                                                    </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style="">1326      protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {       </span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1327          return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot;">1327          return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - FailedðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style="">1328                  + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329      }                                                                                                             </span>
<span  style="">1330                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1331      @Override                                                                                                     </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1332      public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) {          </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1333          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1334              if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {                        </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1335                  entityForm.removeField(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1336              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1338      }                                                                                                             </span>
<span  style="">1339                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1340      @Override                                                                                                     </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1341      public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)                       </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1342              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1343          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1344          populateEntityForm(cmd, ef, sectionCrumbs);                                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1345          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1346      }                                                                                                             </span>
<span  style="">1347                                                                                                                    </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1348      protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {                        </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1349          if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                                  </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1350              return sectionCrumbs.get(0).getSectionIdentifier();                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1351          } else {                                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1352              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1353          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354      }                                                                                                             </span>
<span  style="">1355                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1356      @Override                                                                                                     </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1357      public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)            </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1358              throws ServiceException {                                                                             </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1359          ef.setCeilingEntityClassname(cmd.getCeilingType());                                                       </span>
<span  style="">1360                                                                                                                    </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1361          String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                              </span>
<span  style="">1362                                                                                                                    </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style="">1363          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),        </span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1364                  sectionIdentifier);                                                                               </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1365          if (section != null) {                                                                                    </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1366              ef.setSectionKey(section.getUrl());                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1367          } else {                                                                                                  </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1368              ef.setSectionKey(cmd.getCeilingType());                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369          }                                                                                                         </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1370          ef.setSectionCrumbsImpl(sectionCrumbs);                                                                   </span>
<span  style="">1371                                                                                                                    </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1372          setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                             </span>
<span  style="">1373                                                                                                                    </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1374          setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                         </span>
<span  style="">1375                                                                                                                    </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1376          populateDropdownToOneFields(ef, cmd);                                                                     </span>
<span  style="">1377                                                                                                                    </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1378          extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379      }                                                                                                             </span>
<span  style="">1380                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1381      /**                                                                                                           </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1382       * This method is invoked when EntityForms are created and is meant to provide a hook to add                  </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1383       * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically             </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1384       * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.                  </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1385       * @param ef                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1386       */                                                                                                           </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1387      protected void addAdditionalFormActions(EntityForm ef) {                                                      </span>
<span  style="">1388                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389      }                                                                                                             </span>
<span  style="">1390                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1391      @Override                                                                                                     </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style="">1392      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)        </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1393              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1394          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1395          populateEntityForm(cmd, entity, ef, sectionCrumbs);                                                       </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1396          addAdditionalFormActions(ef);                                                                             </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1397          extensionManager.getProxy().addAdditionalFormActions(ef);                                                 </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1398          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1399      }                                                                                                             </span>
<span  style="">1400                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1401      @Override                                                                                                     </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1402      public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1402      public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1403              throws ServiceException {                                                                             </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1404          // Get the empty form with appropriate fields                                                             </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1405          populateEntityForm(cmd, ef, sectionCrumbs);                                                               </span>
<span  style="">1406                                                                                                                    </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1407          String idProperty = adminEntityService.getIdProperty(cmd);                                                </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1408          ef.setId(entity.findProperty(idProperty).getValue());                                                     </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1409          ef.setEntityType(entity.getType()[0]);                                                                    </span>
<span  style="">1410                                                                                                                    </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1411          populateEntityFormFieldValues(cmd, entity, ef);                                                           </span>
<span  style="">1412                                                                                                                    </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1413          Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);                       </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1414          if (p != null) {                                                                                          </span>
<span class="8443013364869289595" onmouseenter="enter('8443013364869289595');" onmouseout="out('8443013364869289595');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1415 -            ef.setMainEntityName(p.getValue());                                                                   </span>
<span class="-4711796121260791216" onmouseenter="enter('-4711796121260791216');" onmouseout="out('-4711796121260791216');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1416 +            ef.setMainEntityName(exploitProtectionService.htmlDecode(p.getValue()));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417          }                                                                                                         </span>
<span  style="">1418                                                                                                                    </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1419          extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420      }                                                                                                             </span>
<span  style="">1421                                                                                                                    </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style="">1422      protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {       </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1423          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1424              FieldMetadata fmd = p.getMetadata();                                                                  </span>
<span  style="">1425                                                                                                                    </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1426              if (shouldHideField(fmd, entity)) {                                                                   </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1427                  if (fmd instanceof CollectionMetadata) {                                                          </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1428                      ef.removeListGrid(p.getName());                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1429                  } else {                                                                                          </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1430                      ef.removeField(p.getName());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1432              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434      }                                                                                                             </span>
<span  style="">1435                                                                                                                    </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1436      protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                         </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1437          if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1438              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439          }                                                                                                         </span>
<span  style="">1440                                                                                                                    </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1441          for (String property : fmd.getShowIfFieldEquals().keySet()) {                                             </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1442              List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                                       </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1443              Property entityProp = entity.findProperty(property);                                                  </span>
<span  style="">1444                                                                                                                    </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1445              if (entityProp == null || values.contains(entityProp.getValue())) {                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1446                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448          }                                                                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1449          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450      }                                                                                                             </span>
<span  style="">1451                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1452      @Override                                                                                                     </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1453      public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {                  </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1454          // Set the appropriate property values                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1455          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1456              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1457                  BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                                </span>
<span  style="">1458                                                                                                                    </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1459                  Property entityProp = entity.findProperty(p.getName());                                           </span>
<span  style="">1460                                                                                                                    </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style="">1461                  boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());   </span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1462                  //always show special map fields                                                                  </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1463                  if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                                </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1464                      explicitlyShown = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465                  }                                                                                                 </span>
<span  style="">1466                                                                                                                    </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1467                  if (entityProp == null &amp;&amp; explicitlyShown) {                                                      </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1468                      Field field = ef.findField(p.getName());                                                      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1469                      if (field != null) {                                                                          </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1470                          field.setValue(null);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471                      }                                                                                             </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1472                  } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1472                  } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFiðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1473                      ef.removeField(p.getName());                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1474                  } else {                                                                                          </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1475                      Field field = ef.findField(p.getName());                                                      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1476                      if (field != null) {                                                                          </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1477                          if (entityProp != null) {                                                                 </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1478                              //protect against null - can happen with password confirmation fields (i.e. admin user)">1478                              //protect against null - can happen with password confirmation fields (i.e. admin userðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1479                              field.setDirty(entityProp.getIsDirty());                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480                          }                                                                                         </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1481                          if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                                </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1482                                  || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME                    </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1483                                  || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {               </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1484                              RuleBuilderField rbf = (RuleBuilderField) field;                                      </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1485                              if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                           </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1486                                  String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();            </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1487                                  rbf.setJson(json);                                                                </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1488                                  DataWrapper dw = convertJsonToDataWrapper(json);                                  </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1489                                  if (dw != null) {                                                                 </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1490                                      rbf.setDataWrapper(dw);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1491                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493                          }                                                                                         </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1494                          if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                                 </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1495 -                            field.setValue(entityProp.getValue());                                                </span>
<span class="7143722617009606315" onmouseenter="enter('7143722617009606315');" onmouseout="out('7143722617009606315');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1496 +                            field.setValue(exploitProtectionService.htmlDecode(entityProp.getValue()));           </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1497                              field.setDisplayValue(entityProp.getDisplayValue());                                  </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1498                              MediaField mf = (MediaField) field;                                                   </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1499                              Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1499                              Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(),ðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1500                              mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1500                              mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(),ðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style="">1501                          } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) { </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1502 -                            field.setValue(entityProp.getValue());                                                </span>
<span class="4560611718808942912" onmouseenter="enter('4560611718808942912');" onmouseout="out('4560611718808942912');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1503 +                            field.setValue((basicFM.isLargeEntry() != null &amp;&amp; basicFM.isLargeEntry()) ? entityProp.getValue() : exploitProtectionService.htmlDecode(entityProp.getValue()));">1503 +                            field.setValue((basicFM.isLargeEntry() != null &amp;&amp; basicFM.isLargeEntry()) ? entityPropðŸ”µ</abbr></span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1504                              field.setDisplayValue(entityProp.getDisplayValue());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1506                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1508              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510      }                                                                                                             </span>
<span  style="">1511                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1512      /**                                                                                                           </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1513       * When using Thymeleaf, we need to convert the JSON string back to                                           </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1514       * a DataWrapper object because Thymeleaf escapes JSON strings.                                               </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1515       * Thymeleaf uses it&#x27;s own object de-serializer                                                               </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1516       * see: https://github.com/thymeleaf/thymeleaf/issues/84                                                      </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1517       * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                          </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1518       * @param json                                                                                                </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1519       * @return DataWrapper                                                                                        </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1520       * @throws IOException                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1521       */                                                                                                           </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1522      protected DataWrapper convertJsonToDataWrapper(String json) {                                                 </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1523          ObjectMapper mapper = new ObjectMapper();                                                                 </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1524          DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                          </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1525          SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1525          SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null)ðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1526          module.addDeserializer(DataDTO.class, dtoDeserializer);                                                   </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1527          mapper.registerModule(module);                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1528          try {                                                                                                     </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1529              return mapper.readValue(json, DataWrapper.class);                                                     </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1530          } catch (IOException e) {                                                                                 </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1531              throw new RuntimeException(e);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533      }                                                                                                             </span>
<span  style="">1534                                                                                                                    </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1535      protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                                  </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1536              throws ServiceException {                                                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1537          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1538              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1539                  BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                                    </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1540                  if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                               </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1541                          &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {              </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1542                      // Get the records                                                                            </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1543                      PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()                     </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1544                              .withCeilingEntityClassname(fmd.getForeignKeyClass());                                </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style="">1545                      Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();   </span>
<span  style="">1546                                                                                                                    </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1547                      // Determine the id field                                                                     </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1548                      String idProp = null;                                                                         </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1549                      ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1549                      ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1550                      for (Property foreignP : foreignClassMd.getProperties()) {                                    </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1551                          if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                               </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1552                              BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata();          </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1553                              if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {                        </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1554                                  idProp = foreignP.getName();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1557                      }                                                                                             </span>
<span  style="">1558                                                                                                                    </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1559                      if (idProp == null) {                                                                         </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1560                          throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1560                          throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClassðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1561                      }                                                                                             </span>
<span  style="">1562                                                                                                                    </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1563                      // Determine the display field                                                                </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1564                      String displayProp = fmd.getLookupDisplayProperty();                                          </span>
<span  style="">1565                                                                                                                    </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1566                      // Build the options map                                                                      </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1567                      Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                                </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1568                      for (Entity row : rows) {                                                                     </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1569                          Property prop = row.findProperty(displayProp);                                            </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1570                          if (prop == null) {                                                                       </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1571                              LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; +">1571                              LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1572                                      ef.getCeilingEntityClassname() + &quot;]&quot;);                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1573                          } else {                                                                                  </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1574                              String displayValue = prop.getDisplayValue();                                         </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1575                              if (StringUtils.isBlank(displayValue)) {                                              </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1576                                  displayValue = prop.getValue();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577                              }                                                                                     </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1578                              options.put(row.findProperty(idProp).getValue(), displayValue);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580                      }                                                                                             </span>
<span  style="">1581                                                                                                                    </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1582                      // Set the options on the entity field                                                        </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1583                      ComboField cf = (ComboField) ef.findField(p.getName());                                       </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1584                      cf.setOptions(options);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588      }                                                                                                             </span>
<span  style="">1589                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1590      @Override                                                                                                     </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1591      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1591      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1592              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1593          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1594          populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                                    </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1595          addAdditionalFormActions(ef);                                                                             </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1596          extensionManager.getProxy().addAdditionalFormActions(ef);                                                 </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1597          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598      }                                                                                                             </span>
<span  style="">1599                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1600      @Override                                                                                                     </span>
<span class="8407616833525381833" onmouseenter="enter('8407616833525381833');" onmouseout="out('8407616833525381833');" style=""><abbr title="1601      public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1601      public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecorðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1602              throws ServiceException {                                                                             </span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1603          // Get the form with values for this entity                                                               </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1604          populateEntityForm(cmd, entity, ef, sectionCrumbs);                                                       </span>
<span  style="">1605                                                                                                                    </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1606          // Attach the sub-collection list grids and specialty UI support                                          </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1607          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1608              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1609                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1610              }                                                                                                     </span>
<span  style="">1611                                                                                                                    </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1612              if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1613                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1614              }                                                                                                     </span>
<span  style="">1615                                                                                                                    </span>
<span class="5057378952086585538" onmouseenter="enter('5057378952086585538');" onmouseout="out('5057378952086585538');" style="">1616              if (collectionRecords != null &amp;&amp; !collectionRecords.isEmpty()) {                                      </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1617                  DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());                      </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1618                  String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();                  </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1619                  ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1619                  ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSeðŸ”µ</abbr></span>
<span  style="">1620                                                                                                                    </span>
<span class="-4703142262249660615" onmouseenter="enter('-4703142262249660615');" onmouseout="out('-4703142262249660615');" style="">1621                  CollectionMetadata md = ((CollectionMetadata) p.getMetadata());                                   </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1622                  if (md instanceof BasicCollectionMetadata) {                                                      </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style="">1623                      PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);    </span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1624                      ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1624                      ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().gðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1625                      if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {                       </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1626                          List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1626                          List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTreeðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1627                          ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);              </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1628                          for (ClassTree entityType : entityTypes) {                                                </span>
<span class="-6085370745551409442" onmouseenter="enter('-6085370745551409442');" onmouseout="out('-6085370745551409442');" style="">1629                              ListGridAction ADD = new ListGridAction(ListGridAction.ADD)                           </span>
<span class="-8123842595880337680" onmouseenter="enter('-8123842595880337680');" onmouseout="out('-8123842595880337680');" style="">1630                                      .withButtonClass(AddMethodType.PERSIST_EMPTY==                                </span>
<span class="2458863346051852504" onmouseenter="enter('2458863346051852504');" onmouseout="out('2458863346051852504');" style=""><abbr title="1631                                              ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-empty&quot;:&quot;sub-list-grid-add&quot;)">1631                                              ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-eðŸ”µ</abbr></span>
<span class="625982968125452177" onmouseenter="enter('625982968125452177');" onmouseout="out('625982968125452177');" style="">1632                                      .withActionTargetEntity(entityType.getFullyQualifiedClassname())              </span>
<span class="1979584669038484989" onmouseenter="enter('1979584669038484989');" onmouseout="out('1979584669038484989');" style="">1633                                      .withUrlPostfix(&quot;/add&quot;)                                                       </span>
<span class="-2605498948604397141" onmouseenter="enter('-2605498948604397141');" onmouseout="out('-2605498948604397141');" style="">1634                                      .withIconClass(&quot;fa fa-plus&quot;)                                                  </span>
<span class="1382163113890128554" onmouseenter="enter('1382163113890128554');" onmouseout="out('1382163113890128554');" style="">1635                                      .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));   </span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1636                              actionGroup.getListGridActions().add(0, ADD);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1637                          }                                                                                         </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1638                          listGrid.addToolbarActionGroup(actionGroup);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1639                      } else {                                                                                      </span>
<span class="-686829543212379321" onmouseenter="enter('-686829543212379321');" onmouseout="out('-686829543212379321');" style="">1640                          listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY==                         </span>
<span class="452604423250167593" onmouseenter="enter('452604423250167593');" onmouseout="out('452604423250167593');" style=""><abbr title="1641                                  ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTY:DefaultListGridActions.ADD);">1641                                  ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTYðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1642                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1643                  } else {                                                                                          </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1644                      listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645                  }                                                                                                 </span>
<span  style="">1646                                                                                                                    </span>
<span class="1698654555130612252" onmouseenter="enter('1698654555130612252');" onmouseout="out('1698654555130612252');" style="">1647                  if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab())!=null) {                    </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1648                      ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1649                  } else {                                                                                          </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1650                      ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1651                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1652              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1653          }                                                                                                         </span>
<span  style="">1654                                                                                                                    </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1655          if (CollectionUtils.isEmpty(ef.getActions())) {                                                           </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1656              ef.addAction(DefaultEntityFormActions.SAVE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657          }                                                                                                         </span>
<span  style="">1658                                                                                                                    </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1659          addDeleteActionIfAllowed(ef, cmd, entity);                                                                </span>

<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1660          setReadOnlyState(ef, cmd, entity);                                                                        </span>
<span  style="">1661                                                                                                                    </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1662          // check for fields that should be hidden based on annotations                                            </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1663          setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                                   </span>
<span  style="">1664                                                                                                                    </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1665          extensionManager.getProxy().modifyDetailEntityForm(ef);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666      }                                                                                                             </span>
<span  style="">1667                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1668      /**                                                                                                           </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1669       * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1669       * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The usðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1670       * delete an entity for the following cases:                                                                  </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1671       * &lt;ol&gt;                                                                                                       </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style="">1672       *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by   </span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style="">1673       *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;       </span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1674       *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the                </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1675       *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                         </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1676       * &lt;/ol&gt;                                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1677       *                                                                                                            </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1678       * @param entityForm the form being generated                                                                 </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1679       * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;                        </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1680       * @param entity the entity being edited                                                                      </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1681       * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                                   </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1682       * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                              </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1683       * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1684       */                                                                                                           </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1685      protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {            </span>
<span class="-19082107155128737" onmouseenter="enter('-19082107155128737');" onmouseout="out('-19082107155128737');" style="">1686          boolean canDelete = true;                                                                                 </span>







<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1687          try {                                                                                                     </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1688              String securityEntityClassname = getSecurityClassname(entityForm, cmd);                               </span>
<span class="-4824979268204802710" onmouseenter="enter('-4824979268204802710');" onmouseout="out('-4824979268204802710');" style="">1689              adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.REMOVE);        </span>


<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1690          } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1691              if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-8314772345016591645" onmouseenter="enter('-8314772345016591645');" onmouseout="out('-8314772345016591645');" style="">1692                  canDelete = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1694          }                                                                                                         </span>
<span  style="">1695                                                                                                                    </span>
<span class="-179728255711330045" onmouseenter="enter('-179728255711330045');" onmouseout="out('-179728255711330045');" style="">1696          // If I cannot update a record then I certainly cannot delete it either                                   </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="">1697          if (canDelete) {                                                                                          </span>
<span class="9060467924077423602" onmouseenter="enter('9060467924077423602');" onmouseout="out('9060467924077423602');" style=""><abbr title="1698              canDelete = rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1698              canDelete = rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699          }                                                                                                         </span>
<span  style="">1700                                                                                                                    </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="">1701          if (canDelete) {                                                                                          </span>
<span class="-6969811342559492698" onmouseenter="enter('-6969811342559492698');" onmouseout="out('-6969811342559492698');" style=""><abbr title="1702              canDelete = rowLevelSecurityService.canRemove(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1702              canDelete = rowLevelSecurityService.canRemove(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1703          }                                                                                                         </span>
<span  style="">1704                                                                                                                    </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="">1705          if (canDelete) {                                                                                          </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="">1706              entityForm.addAction(DefaultEntityFormActions.DELETE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1707          }                                                                                                         </span>

































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1708      }                                                                                                             </span>
<span  style="">1709                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1710      /**                                                                                                           </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1711       * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                                 </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1712       * &lt;ol&gt;                                                                                                       </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1713       *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                           </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1714       *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1714       *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represeðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style="">1715       *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;       </span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style="">1716       *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the      </span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1717       *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                         </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1718       * &lt;/ol&gt;                                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1719       *                                                                                                            </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1720       * @param entityForm the form being generated                                                                 </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1721       * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;                        </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1722       * @param entity the entity being edited                                                                      </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1723       * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                                   </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1724       * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                              </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1725       * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1726       */                                                                                                           </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1727      protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {                    </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1728          boolean readOnly = true;                                                                                  </span>
<span  style="">1729                                                                                                                    </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1730          // If all of the fields are read only, we&#x27;ll mark the form as such                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1731          for (Property property : cmd.getProperties()) {                                                           </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1732              FieldMetadata fieldMetadata = property.getMetadata();                                                 </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1733              if (fieldMetadata instanceof BasicFieldMetadata) {                                                    </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1734                  readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1734                  readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1735                  if (!readOnly) {                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1736                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1737                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1738              } else {                                                                                              </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1739                  readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                                      </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1740                  if (!readOnly) {                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1741                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1742                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1743              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1744          }                                                                                                         </span>
<span  style="">1745                                                                                                                    </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1746          if (!readOnly) {                                                                                          </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1747              // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1747              // If the user does not have edit permissions, we will go ahead and make the form read only to preventðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1748              try {                                                                                                 </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1749                  String securityEntityClassname = getSecurityClassname(entityForm, cmd);                           </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style="">1750                  adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);    </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1751              } catch (ServiceException e) {                                                                        </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1752                  if (e instanceof SecurityServiceException) {                                                      </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1753                      readOnly = true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1754                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1755              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1756          }                                                                                                         </span>
<span  style="">1757                                                                                                                    </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1758          // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1758          // if the normal admin security service has not deemed this readonly and the all of the properties on the ðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1759          // are not readonly, then check the row-level security                                                    </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1760          if (!readOnly) {                                                                                          </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1761              readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1761              readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1762          }                                                                                                         </span>
<span  style="">1763                                                                                                                    </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1764          if (readOnly) {                                                                                           </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1765              entityForm.setReadOnly();                                                                             </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1766              //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1766              //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements ðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1767              if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                      </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1768                  EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1768                  EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1769                  for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1769                  for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.geðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1770                      for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {           </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1771                          if (modifier.isQualified(data.getModifierType())) {                                       </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1772                              modifier.modifyEntityForm(new EntityFormModifierRequest()                             </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1773                                      .withEntityForm(entityForm)                                                   </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1774                                      .withConfiguration(data)                                                      </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1775                                      .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())         </span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1776                                      .withEntity(entity)                                                           </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1777                                      .withRowLevelSecurityService(rowLevelSecurityService));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1779                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1781              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1782          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783      }                                                                                                             </span>
<span  style="">1784                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1785      /**                                                                                                           </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1786       * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                          </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1787       * @param entityForm                                                                                          </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1788       * @param cmd                                                                                                 </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1789       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1790       */                                                                                                           </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1791      protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                             </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1792          String securityEntityClassname = entityForm.getCeilingEntityClassname();                                  </span>
<span  style="">1793                                                                                                                    </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1794          if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                                 </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1795              securityEntityClassname = cmd.getSecurityCeilingType();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1796          } else {                                                                                                  </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1797              if (entityForm.getDynamicFormInfos() != null) {                                                       </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1798                  for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {                    </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1799                      if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                               </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1800                          securityEntityClassname = info.getSecurityCeilingClassName();                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1801                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1802                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1803                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1804              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1805          }                                                                                                         </span>
<span  style="">1806                                                                                                                    </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1807          return securityEntityClassname;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1808      }                                                                                                             </span>
<span  style="">1809                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1810      @Override                                                                                                     </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1811      public void populateEntityFormFields(EntityForm ef, Entity entity) {                                          </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1812          populateEntityFormFields(ef, entity, true, true);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1813      }                                                                                                             </span>
<span  style="">1814                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1815      @Override                                                                                                     </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style="">1816      public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {</span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1817          if (populateId) {                                                                                         </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1818              ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1819          }                                                                                                         </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1820          if (populateType) {                                                                                       </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1821              ef.setEntityType(entity.getType()[0]);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1822          }                                                                                                         </span>
<span  style="">1823                                                                                                                    </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1824          for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                            </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1825              Property entityProp = entity.findProperty(entry.getKey());                                            </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1826              if (entityProp != null) {                                                                             </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1827                  entry.getValue().setValue(entityProp.getValue());                                                 </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1828                  entry.getValue().setDisplayValue(entityProp.getDisplayValue());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1829              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1830          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1831      }                                                                                                             </span>
<span  style="">1832                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1833      @Override                                                                                                     </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style="">1834      public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {    </span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style="">1835          Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());  </span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1836          Property entityProp = entity.findProperty(ef.getIdProperty());                                            </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1837          field.setValue(entityProp.getValue());                                                                    </span>
<span  style="">1838                                                                                                                    </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1839          if (StringUtils.isNotBlank(adornedList.getSortField())) {                                                 </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1840              field = ef.findField(adornedList.getSortField());                                                     </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1841              entityProp = entity.findProperty(adornedList.getSortField());                                         </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1842              if (field != null &amp;&amp; entityProp != null) {                                                            </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1843                  field.setValue(entityProp.getValue());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1844              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1845          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1846      }                                                                                                             </span>
<span  style="">1847                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1848      @Override                                                                                                     </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1849      public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                                       </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1850          Field field = ef.findField(&quot;priorKey&quot;);                                                                   </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1851          Property entityProp = entity.findProperty(&quot;key&quot;);                                                         </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1852          if (field != null &amp;&amp; entityProp != null) {                                                                </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1853              field.setValue(entityProp.getValue());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1854          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1855      }                                                                                                             </span>
<span  style="">1856                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1857      @Override                                                                                                     </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1858      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1858      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedLisðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style="">1859              String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)       </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1860              throws ServiceException {                                                                             </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1861          EntityForm ef = createStandardAdornedEntityForm();                                                        </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1862          return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1862          return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1863      }                                                                                                             </span>
<span  style="">1864                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1865      @Override                                                                                                     </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1866      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1866      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedLisðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1867              String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1867              String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, booleaðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1868              throws ServiceException {                                                                             </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1869          ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                          </span>
<span  style="">1870                                                                                                                    </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1871          // Get the metadata for this adorned field                                                                </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1872          PersistencePackageRequest request = PersistencePackageRequest.adorned()                                   </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1873                  .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                               </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1874                  .withAdornedList(adornedList)                                                                     </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1875                  .withSectionCrumbs(sectionCrumbs);                                                                </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1876          request.setAddOperationInspect(isAdd);                                                                    </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1877          ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1877          ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getCðŸ”µ</abbr></span>
<span  style="">1878                                                                                                                    </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1879          List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                                  </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1880          if (isViewCollectionItem) {                                                                               </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1881              Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1882          } else {                                                                                                  </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1883              // We want our entity form to only render the maintained adorned target fields                        </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1884              for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                         </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1885                  Property p = collectionMetadata.getPMap().get(targetFieldName);                                   </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1886                  if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1886                  if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1887                      ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);             </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1888                      entityFormProperties.add(p);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1889                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1890              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1891          }                                                                                                         </span>
<span  style="">1892                                                                                                                    </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1893          // Set the maintained fields on the form                                                                  </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1894          setEntityFormFields(collectionMetadata, ef, entityFormProperties);                                        </span>
<span  style="">1895                                                                                                                    </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1896          // Add these two additional hidden fields that are required for persistence                               </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1897          Field f = new Field()                                                                                     </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1898                  .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())            </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1899                  .withFieldType(SupportedFieldType.HIDDEN.toString())                                              </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1900                  .withValue(parentId);                                                                             </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1901          ef.addHiddenField(collectionMetadata, f);                                                                 </span>
<span  style="">1902                                                                                                                    </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1903          f = new Field()                                                                                           </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1904                  .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())            </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1905                  .withFieldType(SupportedFieldType.HIDDEN.toString())                                              </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1906                  .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                                       </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1907          ef.addHiddenField(collectionMetadata, f);                                                                 </span>
<span  style="">1908                                                                                                                    </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1909          if (StringUtils.isNotBlank(adornedList.getSortField())) {                                                 </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1910              f = new Field()                                                                                       </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1911                      .withName(adornedList.getSortField())                                                         </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1912                      .withFieldType(SupportedFieldType.HIDDEN.toString());                                         </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1913              ef.addHiddenField(collectionMetadata, f);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1914          }                                                                                                         </span>
<span  style="">1915                                                                                                                    </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1916          ef.setParentId(parentId);                                                                                 </span>
<span  style="">1917                                                                                                                    </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1918          extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                          </span>
<span  style="">1919                                                                                                                    </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1920          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1921      }                                                                                                             </span>
<span  style="">1922                                                                                                                    </span>
<span  style="">1923                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1924      @Override                                                                                                     </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1925      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1925      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String pðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1926              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1927          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1928          return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1929      }                                                                                                             </span>
<span  style="">1930                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1931      @Override                                                                                                     </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1932      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1932      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String pðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1933              throws ServiceException {                                                                             </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1934          ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                                    </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1935                  .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);                 </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1936          ef.setEntityType(foreignKey.getForeignKeyClass());                                                        </span>
<span  style="">1937                                                                                                                    </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1938          Field keyField;                                                                                           </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1939          if (!mapMd.getForceFreeFormKeys()) {                                                                      </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1940              // We will use a combo field to render the key choices                                                </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1941              ComboField temp = new ComboField();                                                                   </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1942              temp.withName(&quot;key&quot;)                                                                                  </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1943                      .withFieldType(&quot;combo_field&quot;)                                                                 </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1944                      .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                                 </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1945              if (mapMd.getKeys() != null) {                                                                        </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1946                  // The keys can be explicitly set in the annotation...                                            </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1947                  temp.setOptions(mapMd.getKeys());                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1948              } else {                                                                                              </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1949                  // Or they could be based on a different entity                                                   </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1950                  PersistencePackageRequest ppr = PersistencePackageRequest.standard()                              </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1951                          .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                          </span>
<span  style="">1952                                                                                                                    </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1953                  DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();                  </span>
<span  style="">1954                                                                                                                    </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1955                  for (Entity entity : drs.getRecords()) {                                                          </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style="">1956                      String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();   </span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1957                      String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1957                      String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getVaðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1958                      temp.putOption(keyValue, keyDisplayValue);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1959                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1960              }                                                                                                     </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1961              keyField = temp;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1962          } else {                                                                                                  </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1963              keyField = new Field().withName(&quot;key&quot;)                                                                </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1964                                  .withFieldType(SupportedFieldType.STRING.toString())                              </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1965                                  .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1966          }                                                                                                         </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1967          keyField.setRequired(true);                                                                               </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1968          ef.addMapKeyField(cmd, keyField);                                                                         </span>
<span  style="">1969                                                                                                                    </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1970          // Set the fields for this form                                                                           </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1971          List&lt;Property&gt; mapFormProperties;                                                                         </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">1972          if (mapMd.isSimpleValue()) {                                                                              </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">1973              ef.setIdProperty(&quot;key&quot;);                                                                              </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">1974              mapFormProperties = new ArrayList&lt;&gt;();                                                                </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">1975              Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                                      </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">1976              mapFormProperties.add(valueProp);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1977          } else {                                                                                                  </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">1978              String valueClassName = mapStructure.getValueClassName();                                             </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">1979              List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                         </span>
<span  style="">1980                                                                                                                    </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">1981              mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                              </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">1982              filterMapFormProperties(mapFormProperties, classNames);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1983          }                                                                                                         </span>
<span  style="">1984                                                                                                                    </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">1985          setEntityFormFields(cmd, ef, mapFormProperties);                                                          </span>
<span  style="">1986                                                                                                                    </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1987          Field f = new Field()                                                                                     </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">1988                  .withName(&quot;priorKey&quot;)                                                                             </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1989                  .withFieldType(SupportedFieldType.HIDDEN.toString());                                             </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">1990          ef.addHiddenField(cmd, f);                                                                                </span>
<span  style="">1991                                                                                                                    </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1992          ef.setParentId(parentId);                                                                                 </span>
<span  style="">1993                                                                                                                    </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1994          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1995      }                                                                                                             </span>
<span  style="">1996                                                                                                                    </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">1997      protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                            </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">1998          PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);                  </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">1999          List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2000          try {                                                                                                     </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">2001              Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                                   </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">2002              for (Class clazz : mapEntities) {                                                                     </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">2003                  classNames.add(clazz.getName());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2004              }                                                                                                     </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">2005          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">2006              classNames.add(valueClassName);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2007          }                                                                                                         </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">2008          return classNames;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2009      }                                                                                                             </span>
<span  style="">2010                                                                                                                    </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style="">2011      protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {     </span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">2012          CollectionUtils.filter(mapFormProperties, new Predicate() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2013              @Override                                                                                             </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">2014              public boolean evaluate(Object object) {                                                              </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">2015                  Property p = (Property) object;                                                                   </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">2016                  for (String availType : p.getMetadata().getAvailableToTypes()) {                                  </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">2017                      if (classNames.contains(availType)) {                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2018                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2019                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2020                  }                                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2021                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2022              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2023          });                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2024      }                                                                                                             </span>
<span  style="">2025                                                                                                                    </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">2026      protected EntityForm createStandardEntityForm() {                                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2027          EntityForm ef = new EntityForm();                                                                         </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">2028          ef.addAction(DefaultEntityFormActions.SAVE);                                                              </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2029          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2030      }                                                                                                             </span>
<span  style="">2031                                                                                                                    </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">2032      protected EntityForm createStandardAdornedEntityForm() {                                                      </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2033          EntityForm ef = new EntityForm();                                                                         </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">2034          ef.addAction(DefaultAdornedEntityFormActions.Add);                                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2035          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2036      }                                                                                                             </span>
<span  style="">2037                                                                                                                    </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">2038      protected VisibilityEnum[] getGridHiddenVisibilities() {                                                      </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">2039          return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2040      }                                                                                                             </span>
<span  style="">2041                                                                                                                    </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">2042      protected VisibilityEnum[] getFormHiddenVisibilities() {                                                      </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">2043          return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2044      }                                                                                                             </span>
<span  style="">2045                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2046  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            