<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>198</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    198
                    <a href="197.html">prev</a>
                    <a href="199.html">next</a>
                    <a href="198_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_e4727686fab15d32b637ad00e2fb97ee08385f68_core/broadleaf-framework-web/src/main/java/org/broadleafcommerce/core/web/controller/account/BroadleafManageWishlistController.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;e4727686fab15d32b637ad00e2fb97ee08385f68:core/broadleaf-framework-web/src/main/java/org/broadleafcommerce/core/web/controller/account/BroadleafManageWishlistController.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;e4727686fab15d32b637ad00e2fb97ee08385f68^1:core/broadleaf-framework-web/src/main/java/org/broadleafcommerce/core/web/controller/account/BroadleafManageWishlistController.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;e4727686fab15d32b637ad00e2fb97ee08385f68^2:core/broadleaf-framework-web/src/main/java/org/broadleafcommerce/core/web/controller/account/BroadleafManageWishlistController.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;113e25fdcc3a25d2deb5d2509e5681d82c3a687d:core/broadleaf-framework-web/src/main/java/org/broadleafcommerce/core/web/controller/account/BroadleafManageWishlistController.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 /*
   2  * #%L
   3  * BroadleafCommerce Framework Web
   4  * %%
   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce
   6  * %%
   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  10  * the Broadleaf End User License Agreement (EULA), Version 1.1
  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  12  * shall apply.
  13  * 
<abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr>
<abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr>
  16  * #L%
  17  */
  18 package org.broadleafcommerce.core.web.controller.account;
  19 
  20 import org.broadleafcommerce.core.order.domain.Order;
  21 import org.broadleafcommerce.core.order.domain.OrderItem;
  22 import org.broadleafcommerce.core.order.service.call.OrderItemRequestDTO;
  23 import org.broadleafcommerce.core.order.service.exception.AddToCartException;
  24 import org.broadleafcommerce.core.order.service.exception.RemoveFromCartException;
  25 import org.broadleafcommerce.core.order.service.exception.UpdateCartException;
  26 import org.broadleafcommerce.core.pricing.service.exception.PricingException;
  27 import org.broadleafcommerce.profile.web.core.CustomerState;
  28 import org.springframework.ui.Model;
  29 
  30 import java.io.IOException;
  31 import java.util.List;
  32 
  33 import javax.servlet.http.HttpServletRequest;
  34 import javax.servlet.http.HttpServletResponse;
  35 
  36 /**
  37  * The controller responsible for wishlist management activities, including
  38  * viewing a wishlist, moving items from the wishlist to the cart, and
  39  * removing items from the wishlist
  40  *
  41  *
  42  * @author jfridye
  43  */
  44 public class BroadleafManageWishlistController extends AbstractAccountController {
  45     
  46     protected static String accountWishlistView = &quot;account/manageWishlist&quot;;
  47     protected static String accountWishlistRedirect = &quot;redirect:/account/wishlist&quot;;
  48 
  49     public String add(HttpServletRequest request, HttpServletResponse response, Model model,
  50 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  51                       OrderItemRequestDTO itemRequest, String wishlistName) throws IOException, AddToCartException, PricingException  {">  51                       OrderItemRequestDTO itemRequest, String wishlistName) throws IOException, AddToCartðŸ”µ</abbr></span>
  52 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  53     public String add(HttpServletRequest request, HttpServletResponse response, Model model,</span>
  54 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  55                       OrderItemRequestDTO  itemRequest, String wishlistName) throws IOException, AddToCartException, PricingException  {">  55                       OrderItemRequestDTO  itemRequest, String wishlistName) throws IOException, AddToCarðŸ”µ</abbr></span>
  56 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
<abbr title="  57         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));">  57         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(rðŸ”µ</abbr>
  58 
  59         if (wishlist == null) {
<abbr title="  60             wishlist = orderService.createNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));">  60             wishlist = orderService.createNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(rðŸ”µ</abbr>
  61         }
  62         
  63         wishlist = orderService.addItem(wishlist.getId(), itemRequest, false);
  64         wishlist = orderService.save(wishlist, true);
  65 
  66         return getAccountWishlistRedirect();
  67     }
  68     
  69     public String viewWishlist(HttpServletRequest request, HttpServletResponse response, Model model,
  70             String wishlistName) {
<abbr title="  71         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  71         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  72         model.addAttribute(&quot;wishlist&quot;, wishlist);
  73         return getAccountWishlistView();
  74     }
  75 
<abbr title="  76     public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, Model model, String wishlistName,">  76     public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr>
<abbr title="  77                                  OrderItemRequestDTO itemRequest) throws IOException, UpdateCartException, PricingException, RemoveFromCartException {">  77                                  OrderItemRequestDTO itemRequest) throws IOException, UpdateCartExceptionðŸ”µ</abbr>
<abbr title="  78         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  78         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  79 
  80         wishlist = orderService.updateItemQuantity(wishlist.getId(), itemRequest, true);
  81         wishlist = orderService.save(wishlist, false);
  82 
  83         model.addAttribute(&quot;wishlist&quot;, wishlist);
  84         return getAccountWishlistView();
  85     }
  86 
<abbr title="  87     public String removeItemFromWishlist(HttpServletRequest request, HttpServletResponse response, Model model,">  87     public String removeItemFromWishlist(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr>
  88             String wishlistName, Long itemId) throws RemoveFromCartException {
<abbr title="  89         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  89         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  90         
  91         orderService.removeItem(wishlist.getId(), itemId, false);
  92 
  93         model.addAttribute(&quot;wishlist&quot;, wishlist);
  94         return getAccountWishlistRedirect();
  95     }
  96 
  97     public String moveItemToCart(HttpServletRequest request, HttpServletResponse response, Model model, 
<abbr title="  98             String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PricingException {">  98             String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PrðŸ”µ</abbr>
<abbr title="  99         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  99         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
 100         List&lt;OrderItem&gt; orderItems = wishlist.getOrderItems();
 101 
 102         OrderItem orderItem = null;
 103         for (OrderItem item : orderItems) {
 104             if (orderItemId.equals(item.getId())) {
 105                 orderItem = item;
 106                 break;
 107             }
 108         }
 109 
 110         if (orderItem != null) {
 111             Order cartOrder = orderService.addItemFromNamedOrder(wishlist, orderItem, false);
 112             cartOrder = orderService.save(cartOrder, true);
 113         } else {
 114             throw new IllegalArgumentException(&quot;The item id provided was not found in the wishlist&quot;);
 115         }
 116 
 117         model.addAttribute(&quot;wishlist&quot;, wishlist);
 118 
 119         return getAccountWishlistRedirect();
 120     }
 121     
 122     public String moveListToCart(HttpServletRequest request, HttpServletResponse response, Model model, 
 123             String wishlistName) throws RemoveFromCartException, AddToCartException, PricingException {
<abbr title=" 124         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());"> 124         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
 125         
 126         Order cartOrder = orderService.addAllItemsFromNamedOrder(wishlist, false);
 127         cartOrder = orderService.save(cartOrder, true);
 128         model.addAttribute(&quot;wishlist&quot;, wishlist);
 129         return getAccountWishlistRedirect();
 130     }
 131 
 132     public String getAccountWishlistView() {
 133         return accountWishlistView;
 134     }
 135     
 136     public String getAccountWishlistRedirect() {
 137         return accountWishlistRedirect;
 138     }
 139 
 140 }</pre></td>
                            <td><pre>   1 /*
   2  * #%L
   3  * BroadleafCommerce Framework Web
   4  * %%
   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce
   6  * %%
   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  10  * the Broadleaf End User License Agreement (EULA), Version 1.1
  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  12  * shall apply.
  13  *
<abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr>
<abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr>
  16  * #L%
  17  */
  18 package org.broadleafcommerce.core.web.controller.account;
  19 
  20 import org.broadleafcommerce.core.order.domain.Order;
  21 import org.broadleafcommerce.core.order.domain.OrderItem;
  22 import org.broadleafcommerce.core.order.service.call.OrderItemRequestDTO;
  23 import org.broadleafcommerce.core.order.service.exception.AddToCartException;
  24 import org.broadleafcommerce.core.order.service.exception.RemoveFromCartException;
  25 import org.broadleafcommerce.core.order.service.exception.UpdateCartException;
  26 import org.broadleafcommerce.core.pricing.service.exception.PricingException;
  27 import org.broadleafcommerce.profile.web.core.CustomerState;
  28 import org.springframework.ui.Model;
  29 
  30 import java.io.IOException;
  31 import java.util.List;
  32 
  33 import javax.servlet.http.HttpServletRequest;
  34 import javax.servlet.http.HttpServletResponse;
  35 
  36 /**
  37  * The controller responsible for wishlist management activities, including
  38  * viewing a wishlist, moving items from the wishlist to the cart, and
  39  * removing items from the wishlist
  40  *
  41  *
  42  * @author jfridye
  43  */
  44 public class BroadleafManageWishlistController extends AbstractAccountController {
  45 
  46     protected static String accountWishlistView = &quot;account/manageWishlist&quot;;
  47     protected static String accountWishlistRedirect = &quot;redirect:/account/wishlist&quot;;
  48 
  49     public String add(HttpServletRequest request, HttpServletResponse response, Model model,
<abbr title="  50                       OrderItemRequestDTO itemRequest, String wishlistName) throws IOException, AddToCartException, PricingException  {">  50                       OrderItemRequestDTO itemRequest, String wishlistName) throws IOException, AddToCartðŸ”µ</abbr>
<abbr title="  51         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));">  51         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(rðŸ”µ</abbr>
  52 
  53         if (wishlist == null) {
<abbr title="  54             wishlist = orderService.createNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));">  54             wishlist = orderService.createNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(rðŸ”µ</abbr>
  55         }
  56 
  57         wishlist = orderService.addItem(wishlist.getId(), itemRequest, false);
  58         wishlist = orderService.save(wishlist, true);
  59 
  60         return getAccountWishlistRedirect();
  61     }
  62 
  63     public String viewWishlist(HttpServletRequest request, HttpServletResponse response, Model model,
  64             String wishlistName) {
<abbr title="  65         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  65         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  66         model.addAttribute(&quot;wishlist&quot;, wishlist);
  67         return getAccountWishlistView();
  68     }
  69 
<abbr title="  70     public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, Model model, String wishlistName,">  70     public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr>
<abbr title="  71                                  OrderItemRequestDTO itemRequest) throws IOException, UpdateCartException, PricingException, RemoveFromCartException {">  71                                  OrderItemRequestDTO itemRequest) throws IOException, UpdateCartExceptionðŸ”µ</abbr>
<abbr title="  72         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  72         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  73 
  74         wishlist = orderService.updateItemQuantity(wishlist.getId(), itemRequest, true);
  75         wishlist = orderService.save(wishlist, false);
  76 
  77         model.addAttribute(&quot;wishlist&quot;, wishlist);
  78         return getAccountWishlistView();
  79     }
  80 
<abbr title="  81     public String removeItemFromWishlist(HttpServletRequest request, HttpServletResponse response, Model model,">  81     public String removeItemFromWishlist(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr>
  82             String wishlistName, Long itemId) throws RemoveFromCartException {
<abbr title="  83         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  83         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  84 
  85         orderService.removeItem(wishlist.getId(), itemId, false);
  86 
  87         model.addAttribute(&quot;wishlist&quot;, wishlist);
  88         return getAccountWishlistRedirect();
  89     }
  90 
  91     public String moveItemToCart(HttpServletRequest request, HttpServletResponse response, Model model,
<abbr title="  92             String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PricingException {">  92             String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PrðŸ”µ</abbr>
<abbr title="  93         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  93         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  94         List&lt;OrderItem&gt; orderItems = wishlist.getOrderItems();
  95 
  96         OrderItem orderItem = null;
  97         for (OrderItem item : orderItems) {
  98             if (orderItemId.equals(item.getId())) {
  99                 orderItem = item;
 100                 break;
 101             }
 102         }
 103 
 104         if (orderItem != null) {
 105             Order cartOrder = orderService.addItemFromNamedOrder(wishlist, orderItem, false);
 106             cartOrder = orderService.save(cartOrder, true);
 107         } else {
 108             throw new IllegalArgumentException(&quot;The item id provided was not found in the wishlist&quot;);
 109         }
 110 
 111         model.addAttribute(&quot;wishlist&quot;, wishlist);
 112 
 113         return getAccountWishlistRedirect();
 114     }
 115 
 116     public String moveListToCart(HttpServletRequest request, HttpServletResponse response, Model model,
 117             String wishlistName) throws RemoveFromCartException, AddToCartException, PricingException {
<abbr title=" 118         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());"> 118         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
 119 
 120         Order cartOrder = orderService.addAllItemsFromNamedOrder(wishlist, false);
 121         cartOrder = orderService.save(cartOrder, true);
 122         model.addAttribute(&quot;wishlist&quot;, wishlist);
 123         return getAccountWishlistRedirect();
 124     }
 125 
 126     public String getAccountWishlistView() {
 127         return accountWishlistView;
 128     }
 129 
 130     public String getAccountWishlistRedirect() {
 131         return accountWishlistRedirect;
 132     }
 133 
 134 }
 
 
 
 
 </pre></td>
                            <td><pre>   1 /*
   2  * #%L
   3  * BroadleafCommerce Framework Web
   4  * %%
   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce
   6  * %%
   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  10  * the Broadleaf End User License Agreement (EULA), Version 1.1
  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  12  * shall apply.
  13  *
<abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr>
<abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr>
  16  * #L%
  17  */
  18 package org.broadleafcommerce.core.web.controller.account;
  19 
  20 import java.io.IOException;
  21 import java.util.List;
  22 import javax.servlet.http.HttpServletRequest;
  23 import javax.servlet.http.HttpServletResponse;
  24 import org.broadleafcommerce.core.order.domain.Order;
  25 import org.broadleafcommerce.core.order.domain.OrderItem;
  26 import org.broadleafcommerce.core.order.service.call.OrderItemRequestDTO;
  27 import org.broadleafcommerce.core.order.service.exception.AddToCartException;
  28 import org.broadleafcommerce.core.order.service.exception.RemoveFromCartException;
  29 import org.broadleafcommerce.core.order.service.exception.UpdateCartException;
  30 import org.broadleafcommerce.core.pricing.service.exception.PricingException;
  31 import org.broadleafcommerce.profile.web.core.CustomerState;
  32 import org.springframework.ui.Model;
  33 
  34 
  35 /**
  36  * The controller responsible for wishlist management activities, including
  37  * viewing a wishlist, moving items from the wishlist to the cart, and
  38  * removing items from the wishlist
  39  *
  40  *
  41  * @author jfridye
  42  */
  43 public class BroadleafManageWishlistController extends AbstractAccountController {
  44     protected static String accountWishlistView = &quot;account/manageWishlist&quot;;
  45 
  46     protected static String accountWishlistRedirect = &quot;redirect:/account/wishlist&quot;;
  47 
<abbr title="  48     public String add(HttpServletRequest request, HttpServletResponse response, Model model, OrderItemRequestDTO itemRequest, String wishlistName) throws IOException, AddToCartException, PricingException {">  48     public String add(HttpServletRequest request, HttpServletResponse response, Model model, OrderItemReqðŸ”µ</abbr>
<abbr title="  49         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));">  49         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(rðŸ”µ</abbr>
  50         if (wishlist == null) {
<abbr title="  51             wishlist = orderService.createNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));">  51             wishlist = orderService.createNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(rðŸ”µ</abbr>
  52         }
  53         wishlist = orderService.addItem(wishlist.getId(), itemRequest, false);
  54         wishlist = orderService.save(wishlist, true);
  55         return getAccountWishlistRedirect();
  56     }
  57 
  58     public String viewWishlist(HttpServletRequest request, HttpServletResponse response, Model model,
  59             String wishlistName) {
<abbr title="  60         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  60         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  61         model.addAttribute(&quot;wishlist&quot;, wishlist);
  62         return getAccountWishlistView();
  63     }
  64 
<abbr title="  65     public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, Model model, String wishlistName,">  65     public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr>
<abbr title="  66                                  OrderItemRequestDTO itemRequest) throws IOException, UpdateCartException, PricingException, RemoveFromCartException {">  66                                  OrderItemRequestDTO itemRequest) throws IOException, UpdateCartExceptionðŸ”µ</abbr>
<abbr title="  67         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  67         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  68 
  69         wishlist = orderService.updateItemQuantity(wishlist.getId(), itemRequest, true);
  70         wishlist = orderService.save(wishlist, false);
  71 
  72         model.addAttribute(&quot;wishlist&quot;, wishlist);
  73         return getAccountWishlistView();
  74     }
  75 
<abbr title="  76     public String removeItemFromWishlist(HttpServletRequest request, HttpServletResponse response, Model model,">  76     public String removeItemFromWishlist(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr>
  77             String wishlistName, Long itemId) throws RemoveFromCartException {
<abbr title="  78         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  78         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  79 
  80         orderService.removeItem(wishlist.getId(), itemId, false);
  81 
  82         model.addAttribute(&quot;wishlist&quot;, wishlist);
  83         return getAccountWishlistRedirect();
  84     }
  85 
  86     public String moveItemToCart(HttpServletRequest request, HttpServletResponse response, Model model,
<abbr title="  87             String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PricingException {">  87             String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PrðŸ”µ</abbr>
<abbr title="  88         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());">  88         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
  89         List&lt;OrderItem&gt; orderItems = wishlist.getOrderItems();
  90 
  91         OrderItem orderItem = null;
  92         for (OrderItem item : orderItems) {
  93             if (orderItemId.equals(item.getId())) {
  94                 orderItem = item;
  95                 break;
  96             }
  97         }
  98 
  99         if (orderItem != null) {
 100             Order cartOrder = orderService.addItemFromNamedOrder(wishlist, orderItem, false);
 101             cartOrder = orderService.save(cartOrder, true);
 102         } else {
 103             throw new IllegalArgumentException(&quot;The item id provided was not found in the wishlist&quot;);
 104         }
 105 
 106         model.addAttribute(&quot;wishlist&quot;, wishlist);
 107 
 108         return getAccountWishlistRedirect();
 109     }
 110 
 111     public String moveListToCart(HttpServletRequest request, HttpServletResponse response, Model model,
 112             String wishlistName) throws RemoveFromCartException, AddToCartException, PricingException {
<abbr title=" 113         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());"> 113         Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer()ðŸ”µ</abbr>
 114 
 115         Order cartOrder = orderService.addAllItemsFromNamedOrder(wishlist, false);
 116         cartOrder = orderService.save(cartOrder, true);
 117         model.addAttribute(&quot;wishlist&quot;, wishlist);
 118         return getAccountWishlistRedirect();
 119     }
 120 
 121     public String getAccountWishlistView() {
 122         return accountWishlistView;
 123     }
 124 
 125     public String getAccountWishlistRedirect() {
 126         return accountWishlistRedirect;
 127     }
 128 }
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre>   1  /*
   2   * #%L
   3   * BroadleafCommerce Framework Web
   4   * %%
   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce
   6   * %%
   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  10   * the Broadleaf End User License Agreement (EULA), Version 1.1
  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  12   * shall apply.
  13   *
<abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr>
  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.
  16   * #L%
  17   */
  18  package org.broadleafcommerce.core.web.controller.account;
  19  
  20  import org.broadleafcommerce.core.order.domain.Order;
  21  import org.broadleafcommerce.core.order.domain.OrderItem;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  22 -import org.broadleafcommerce.core.order.service.call.AddToCartItem;</span>
  23  import org.broadleafcommerce.core.order.service.call.OrderItemRequestDTO;
  24  import org.broadleafcommerce.core.order.service.exception.AddToCartException;
  25  import org.broadleafcommerce.core.order.service.exception.RemoveFromCartException;
  26  import org.broadleafcommerce.core.order.service.exception.UpdateCartException;
  27  import org.broadleafcommerce.core.pricing.service.exception.PricingException;
  28  import org.broadleafcommerce.profile.web.core.CustomerState;
  29  import org.springframework.ui.Model;
  30  
  31  import java.io.IOException;
  32  import java.util.List;
  33  
  34  import javax.servlet.http.HttpServletRequest;
  35  import javax.servlet.http.HttpServletResponse;
  36  
  37  /**
  38   * The controller responsible for wishlist management activities, including
  39   * viewing a wishlist, moving items from the wishlist to the cart, and
  40   * removing items from the wishlist
  41   *
  42   *
  43   * @author jfridye
  44   */
  45  public class BroadleafManageWishlistController extends AbstractAccountController {
  46  
  47      protected static String accountWishlistView = &quot;account/manageWishlist&quot;;
  48      protected static String accountWishlistRedirect = &quot;redirect:/account/wishlist&quot;;
  49  
  50      public String add(HttpServletRequest request, HttpServletResponse response, Model model,
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title="  51 -            AddToCartItem itemRequest, String wishlistName) throws IOException, AddToCartException, PricingException  {">  51 -            AddToCartItem itemRequest, String wishlistName) throws IOException, AddToCartException, PricingExceptiðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  52 +                      OrderItemRequestDTO itemRequest, String wishlistName) throws IOException, AddToCartException, PricingException  {">  52 +                      OrderItemRequestDTO itemRequest, String wishlistName) throws IOException, AddToCartExceptionðŸ”µ</abbr></span>
  53          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));
  54  
  55          if (wishlist == null) {
  56              wishlist = orderService.createNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));
  57          }
  58  
  59          wishlist = orderService.addItem(wishlist.getId(), itemRequest, false);
  60          wishlist = orderService.save(wishlist, true);
  61  
  62          return getAccountWishlistRedirect();
  63      }
  64  
  65      public String viewWishlist(HttpServletRequest request, HttpServletResponse response, Model model,
  66              String wishlistName) {
  67          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
  68          model.addAttribute(&quot;wishlist&quot;, wishlist);
  69          return getAccountWishlistView();
  70      }
  71  
<abbr title="  72      public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, Model model, String wishlistName,">  72      public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, Model model, ðŸ”µ</abbr>
<abbr title="  73                                   OrderItemRequestDTO itemRequest) throws IOException, UpdateCartException, PricingException, RemoveFromCartException {">  73                                   OrderItemRequestDTO itemRequest) throws IOException, UpdateCartException, PricingðŸ”µ</abbr>
  74          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
  75  
  76          wishlist = orderService.updateItemQuantity(wishlist.getId(), itemRequest, true);
  77          wishlist = orderService.save(wishlist, false);
  78  
  79          model.addAttribute(&quot;wishlist&quot;, wishlist);
  80          return getAccountWishlistView();
  81      }
  82  
  83      public String removeItemFromWishlist(HttpServletRequest request, HttpServletResponse response, Model model,
  84              String wishlistName, Long itemId) throws RemoveFromCartException {
  85          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
  86  
  87          orderService.removeItem(wishlist.getId(), itemId, false);
  88  
  89          model.addAttribute(&quot;wishlist&quot;, wishlist);
  90          return getAccountWishlistRedirect();
  91      }
  92  
  93      public String moveItemToCart(HttpServletRequest request, HttpServletResponse response, Model model,
<abbr title="  94              String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PricingException {">  94              String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PricingExceðŸ”µ</abbr>
  95          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
  96          List&lt;OrderItem&gt; orderItems = wishlist.getOrderItems();
  97  
  98          OrderItem orderItem = null;
  99          for (OrderItem item : orderItems) {
 100              if (orderItemId.equals(item.getId())) {
 101                  orderItem = item;
 102                  break;
 103              }
 104          }
 105  
 106          if (orderItem != null) {
 107              Order cartOrder = orderService.addItemFromNamedOrder(wishlist, orderItem, false);
 108              cartOrder = orderService.save(cartOrder, true);
 109          } else {
 110              throw new IllegalArgumentException(&quot;The item id provided was not found in the wishlist&quot;);
 111          }
 112  
 113          model.addAttribute(&quot;wishlist&quot;, wishlist);
 114  
 115          return getAccountWishlistRedirect();
 116      }
 117  
 118      public String moveListToCart(HttpServletRequest request, HttpServletResponse response, Model model,
 119              String wishlistName) throws RemoveFromCartException, AddToCartException, PricingException {
 120          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
 121  
 122          Order cartOrder = orderService.addAllItemsFromNamedOrder(wishlist, false);
 123          cartOrder = orderService.save(cartOrder, true);
 124          model.addAttribute(&quot;wishlist&quot;, wishlist);
 125          return getAccountWishlistRedirect();
 126      }
 127  
 128      public String getAccountWishlistView() {
 129          return accountWishlistView;
 130      }
 131  
 132      public String getAccountWishlistRedirect() {
 133          return accountWishlistRedirect;
 134      }
 135  
 136  }</pre></td>
                            <td><pre>   1  /*
   2   * #%L
   3   * BroadleafCommerce Framework Web
   4   * %%
   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce
   6   * %%
   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  10   * the Broadleaf End User License Agreement (EULA), Version 1.1
  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  12   * shall apply.
  13   *
<abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr>
  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.
  16   * #L%
  17   */
  18  package org.broadleafcommerce.core.web.controller.account;
  19  
  20  import org.broadleafcommerce.core.order.domain.Order;
  21  import org.broadleafcommerce.core.order.domain.OrderItem;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  22 -import org.broadleafcommerce.core.order.service.call.AddToCartItem;</span>
  23  import org.broadleafcommerce.core.order.service.call.OrderItemRequestDTO;
  24  import org.broadleafcommerce.core.order.service.exception.AddToCartException;
  25  import org.broadleafcommerce.core.order.service.exception.RemoveFromCartException;
  26  import org.broadleafcommerce.core.order.service.exception.UpdateCartException;
  27  import org.broadleafcommerce.core.pricing.service.exception.PricingException;
  28  import org.broadleafcommerce.profile.web.core.CustomerState;
  29  import org.springframework.ui.Model;
  30  
  31  import java.io.IOException;
  32  import java.util.List;
  33  
  34  import javax.servlet.http.HttpServletRequest;
  35  import javax.servlet.http.HttpServletResponse;
  36  
  37  /**
  38   * The controller responsible for wishlist management activities, including
  39   * viewing a wishlist, moving items from the wishlist to the cart, and
  40   * removing items from the wishlist
  41   *
  42   *
  43   * @author jfridye
  44   */
  45  public class BroadleafManageWishlistController extends AbstractAccountController {
  46  
  47      protected static String accountWishlistView = &quot;account/manageWishlist&quot;;
  48      protected static String accountWishlistRedirect = &quot;redirect:/account/wishlist&quot;;
  49  
  50      public String add(HttpServletRequest request, HttpServletResponse response, Model model,
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title="  51 -            AddToCartItem itemRequest, String wishlistName) throws IOException, AddToCartException, PricingException  {">  51 -            AddToCartItem itemRequest, String wishlistName) throws IOException, AddToCartException, PricingExceptiðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  52 +                      OrderItemRequestDTO  itemRequest, String wishlistName) throws IOException, AddToCartException, PricingException  {">  52 +                      OrderItemRequestDTO  itemRequest, String wishlistName) throws IOException, AddToCartExceptioðŸ”µ</abbr></span>
  53          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));
  54  
  55          if (wishlist == null) {
  56              wishlist = orderService.createNamedOrderForCustomer(wishlistName, CustomerState.getCustomer(request));
  57          }
  58  
  59          wishlist = orderService.addItem(wishlist.getId(), itemRequest, false);
  60          wishlist = orderService.save(wishlist, true);
  61  
  62          return getAccountWishlistRedirect();
  63      }
  64  
  65      public String viewWishlist(HttpServletRequest request, HttpServletResponse response, Model model,
  66              String wishlistName) {
  67          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
  68          model.addAttribute(&quot;wishlist&quot;, wishlist);
  69          return getAccountWishlistView();
  70      }
  71  
<abbr title="  72      public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, Model model, String wishlistName,">  72      public String updateQuantityInWishlist(HttpServletRequest request, HttpServletResponse response, Model model, ðŸ”µ</abbr>
<abbr title="  73                                   OrderItemRequestDTO itemRequest) throws IOException, UpdateCartException, PricingException, RemoveFromCartException {">  73                                   OrderItemRequestDTO itemRequest) throws IOException, UpdateCartException, PricingðŸ”µ</abbr>
  74          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
  75  
  76          wishlist = orderService.updateItemQuantity(wishlist.getId(), itemRequest, true);
  77          wishlist = orderService.save(wishlist, false);
  78  
  79          model.addAttribute(&quot;wishlist&quot;, wishlist);
  80          return getAccountWishlistView();
  81      }
  82  
  83      public String removeItemFromWishlist(HttpServletRequest request, HttpServletResponse response, Model model,
  84              String wishlistName, Long itemId) throws RemoveFromCartException {
  85          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
  86  
  87          orderService.removeItem(wishlist.getId(), itemId, false);
  88  
  89          model.addAttribute(&quot;wishlist&quot;, wishlist);
  90          return getAccountWishlistRedirect();
  91      }
  92  
  93      public String moveItemToCart(HttpServletRequest request, HttpServletResponse response, Model model,
<abbr title="  94              String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PricingException {">  94              String wishlistName, Long orderItemId) throws RemoveFromCartException, AddToCartException, PricingExceðŸ”µ</abbr>
  95          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
  96          List&lt;OrderItem&gt; orderItems = wishlist.getOrderItems();
  97  
  98          OrderItem orderItem = null;
  99          for (OrderItem item : orderItems) {
 100              if (orderItemId.equals(item.getId())) {
 101                  orderItem = item;
 102                  break;
 103              }
 104          }
 105  
 106          if (orderItem != null) {
 107              Order cartOrder = orderService.addItemFromNamedOrder(wishlist, orderItem, false);
 108              cartOrder = orderService.save(cartOrder, true);
 109          } else {
 110              throw new IllegalArgumentException(&quot;The item id provided was not found in the wishlist&quot;);
 111          }
 112  
 113          model.addAttribute(&quot;wishlist&quot;, wishlist);
 114  
 115          return getAccountWishlistRedirect();
 116      }
 117  
 118      public String moveListToCart(HttpServletRequest request, HttpServletResponse response, Model model,
 119              String wishlistName) throws RemoveFromCartException, AddToCartException, PricingException {
 120          Order wishlist = orderService.findNamedOrderForCustomer(wishlistName, CustomerState.getCustomer());
 121  
 122          Order cartOrder = orderService.addAllItemsFromNamedOrder(wishlist, false);
 123          cartOrder = orderService.save(cartOrder, true);
 124          model.addAttribute(&quot;wishlist&quot;, wishlist);
 125          return getAccountWishlistRedirect();
 126      }
 127  
 128      public String getAccountWishlistView() {
 129          return accountWishlistView;
 130      }
 131  
 132      public String getAccountWishlistRedirect() {
 133          return accountWishlistRedirect;
 134      }
 135  
 136  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            