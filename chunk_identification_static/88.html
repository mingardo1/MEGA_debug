<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>88</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    88
                    <a href="87.html">prev</a>
                    <a href="89.html">next</a>
                    <a href="88_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_37826f373652ce82466012d4d60a2e81bd4d0feb_Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;37826f373652ce82466012d4d60a2e81bd4d0feb:Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;37826f373652ce82466012d4d60a2e81bd4d0feb^1:Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;37826f373652ce82466012d4d60a2e81bd4d0feb^2:Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;33d6f073222f84b537dac4c128bca96cbd16118f:Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [j]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   3 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   4 import android.os.Bundle;                                                                                </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">   5 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">   6 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">   7 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">   8 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">   9 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  10 import android.view.ViewGroup;                                                                           </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  11 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  12 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  13 import android.webkit.WebViewClient;                                                                     </span>
<span  style="">  14                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  15 import androidx.annotation.NonNull;                                                                      </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  16 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  17 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="3871271816129224755" onmouseenter="enter('3871271816129224755');" onmouseout="out('3871271816129224755');" style="">  18 import androidx.fragment.app.FragmentActivity;                                                           </span>
<span  style="">  19                                                                                                          </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  20 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  21 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  22 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  23 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  24 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  25 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  26 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  27 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  28 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  29 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="">  30 import com.commonsware.cwac.anddown.AndDown;                                                             </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  31 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  32 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  33 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span  style="">  34                                                                                                          </span>
<span class="-9136849050553086203" onmouseenter="enter('-9136849050553086203');" onmouseout="out('-9136849050553086203');" style="">  35 import java.lang.ref.SoftReference;                                                                      </span>
<span  style="">  36                                                                                                          </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  37 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  38                                                                                                          </span>
<span class="-1294991214119301931" onmouseenter="enter('-1294991214119301931');" onmouseout="out('-1294991214119301931');" style="">  39 public class NoteMarkdownFragment extends Fragment implements Bucket.Listener&lt;Note&gt; {                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  40     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  41                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  42     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  43     private Note mNote;                                                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="">  44     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="">  45     private WebView mMarkdown;                                                                           </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style="">  46     private boolean mIsLoadingNote;                                                                      </span>
<span  style="">  47                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style="">  49     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="7034917290488384671" onmouseenter="enter('7034917290488384671');" onmouseout="out('7034917290488384671');" style="">  50         inflater.inflate(R.menu.note_markdown, menu);                                                    </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style="">  51         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span  style="">  52                                                                                                          </span>
<span class="-8377308209077836358" onmouseenter="enter('-8377308209077836358');" onmouseout="out('-8377308209077836358');" style="">  53         DrawableUtils.tintMenuWithAttribute(                                                             </span>
<span class="-1922245487729536443" onmouseenter="enter('-1922245487729536443');" onmouseout="out('-1922245487729536443');" style="">  54             requireContext(),                                                                            </span>
<span class="2802851135583918911" onmouseenter="enter('2802851135583918911');" onmouseout="out('2802851135583918911');" style="">  55             menu,                                                                                        </span>
<span class="-2842695662732271949" onmouseenter="enter('-2842695662732271949');" onmouseout="out('-2842695662732271949');" style="">  56             R.attr.toolbarIconColor                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">  57         );                                                                                               </span>
<span  style="">  58                                                                                                          </span>
<span class="-2756778567974340724" onmouseenter="enter('-2756778567974340724');" onmouseout="out('-2756778567974340724');" style="">  59         for (int i = 0; i &lt; menu.size(); i++) {                                                          </span>
<span class="9102652859734412479" onmouseenter="enter('9102652859734412479');" onmouseout="out('9102652859734412479');" style="">  60             MenuItem item = menu.getItem(i);                                                             </span>
<span class="6288253845963077021" onmouseenter="enter('6288253845963077021');" onmouseout="out('6288253845963077021');" style="">  61             DrawableUtils.setMenuItemAlpha(item, 0.3);  // 0.3 is 30% opacity.                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62         }                                                                                                </span>
<span  style="">  63                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">  64         if (mNote != null) {                                                                             </span>
<span class="-6829067213176119658" onmouseenter="enter('-6829067213176119658');" onmouseout="out('-6829067213176119658');" style="">  65             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_info);                              </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style="">  66             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style="">  67             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span  style="">  68                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="">  69             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style="">  70                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  71             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style="">  72                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  73             }                                                                                            </span>
<span  style="">  74                                                                                                          </span>
<span class="-6442626485066357897" onmouseenter="enter('-6442626485066357897');" onmouseout="out('-6442626485066357897');" style="">  75             DrawableUtils.tintMenuItemWithAttribute(getActivity(), trashItem, R.attr.toolbarIconColor);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76         }                                                                                                </span>
<span  style="">  77                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style="">  78         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79     }                                                                                                    </span>
<span  style="">  80                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  81     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title="  82     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {">  82     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="536061208326466715" onmouseenter="enter('536061208326466715');" onmouseout="out('536061208326466715');" style="">  83         AppLog.add(Type.SCREEN, &quot;Created (NoteMarkdownFragment)&quot;);                                       </span>
<span class="-6182689483737118349" onmouseenter="enter('-6182689483737118349');" onmouseout="out('-6182689483737118349');" style="">  84         mNotesBucket = ((Simplenote) requireActivity().getApplication()).getNotesBucket();               </span>
<span  style="">  85                                                                                                          </span>
<span class="-981035472147970089" onmouseenter="enter('-981035472147970089');" onmouseout="out('-981035472147970089');" style="">  86         // Load note if we were passed an ID.                                                            </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="">  87         Bundle arguments = getArguments();                                                               </span>
<span  style="">  88                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="">  89         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="">  90             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style="">  91             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92         }                                                                                                </span>
<span  style="">  93                                                                                                          </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style="">  94         setHasOptionsMenu(true);                                                                         </span>
<span class="7650276599659021163" onmouseenter="enter('7650276599659021163');" onmouseout="out('7650276599659021163');" style="">  95         View layout;                                                                                     </span>
<span  style="">  96                                                                                                          </span>
<span class="-1005326724349715830" onmouseenter="enter('-1005326724349715830');" onmouseout="out('-1005326724349715830');" style="">  97         if (BrowserUtils.isWebViewInstalled(requireContext())) {                                         </span>
<span class="-4734724703035025703" onmouseenter="enter('-4734724703035025703');" onmouseout="out('-4734724703035025703');" style="">  98             layout = inflater.inflate(R.layout.fragment_note_markdown, container, false);                </span>
<span class="-71913177359136438" onmouseenter="enter('-71913177359136438');" onmouseout="out('-71913177359136438');" style="">  99             mMarkdown = layout.findViewById(R.id.markdown);                                              </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style=""> 100             mMarkdown.setWebViewClient(                                                                  </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style=""> 101                 new WebViewClient() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 102                     @Override                                                                            </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style=""> 103                     public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){   </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 104                         String url = request.getUrl().toString();                                        </span>
<span  style=""> 105                                                                                                          </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style=""> 106                         if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                   </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""><abbr title=" 107                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 107                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 108                         } else {                                                                         </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 109                             BrowserUtils.launchBrowserOrShowError(requireContext(), url);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110                         }                                                                                </span>
<span  style=""> 111                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 112                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114                 }                                                                                        </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 115 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 116             }                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 117         );                                                                                               </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 118         mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext())); </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 119 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120             }                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121         );                                                                                               </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122         mCss = ThemeUtils.isLightTheme(requireContext())                                                 </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123             ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                    </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124             : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                    </span>
<span class="-6718836449165012481" onmouseenter="enter('-6718836449165012481');" onmouseout="out('-6718836449165012481');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 125         return layout;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 129     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 130         switch (item.getItemId()) {                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131             case android.R.id.home:                                                                      </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140                     return false;                                                                        </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 141 =======                                                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 142             );                                                                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 143             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 144                 ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 145                 : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 146         } else {                                                                                         </span>
<span class="824226046488103793" onmouseenter="enter('824226046488103793');" onmouseout="out('824226046488103793');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 147             layout = inflater.inflate(R.layout.fragment_note_error, container, false);                   </span>
<span class="4154857411582064154" onmouseenter="enter('4154857411582064154');" onmouseout="out('4154857411582064154');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 148             layout.findViewById(R.id.error).setVisibility(View.VISIBLE);                                 </span>
<span class="8150143839592336677" onmouseenter="enter('8150143839592336677');" onmouseout="out('8150143839592336677');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149             layout.findViewById(R.id.button).setOnClickListener(                                         </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 150                 new View.OnClickListener() {                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 151                     @Override                                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 152                     public void onClick(View v) {                                                        </span>
<span class="-6437015632434493624" onmouseenter="enter('-6437015632434493624');" onmouseout="out('-6437015632434493624');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 153                         BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEW);"> 153                         BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEWðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155                 }                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 157         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 158                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 159 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-6718836449165012481" onmouseenter="enter('-6718836449165012481');" onmouseout="out('-6718836449165012481');" style=""> 160         return layout;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161     }                                                                                                    </span>
<span  style=""> 162                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 163     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 164     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 165         switch (item.getItemId()) {                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 166             case android.R.id.home:                                                                      </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 167                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 168                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169                 }                                                                                        </span>
<span  style=""> 170                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 171                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 172                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 173             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 174                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 175                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176                 }                                                                                        </span>
<span  style=""> 177                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 178                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 179                 return true;                                                                             </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 180             case R.id.menu_copy_internal:                                                                </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 181                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 182                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183                 }                                                                                        </span>
<span  style=""> 184                                                                                                          </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 185                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 185                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitleðŸ”µ</abbr></span>
<span class="-1969547816529952145" onmouseenter="enter('-1969547816529952145');" onmouseout="out('-1969547816529952145');" style=""> 186                     Snackbar.make(mMarkdown, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 187                 } else {                                                                                 </span>
<span class="-8785267208974710977" onmouseenter="enter('-8785267208974710977');" onmouseout="out('-8785267208974710977');" style=""> 188                     Snackbar.make(mMarkdown, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189                 }                                                                                        </span>
<span  style=""> 190                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 191                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 192             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 193                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195     }                                                                                                    </span>
<span  style=""> 196                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 197     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 198         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 199         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200     }                                                                                                    </span>
<span  style=""> 201                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 202     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 203     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="3359289055940257871" onmouseenter="enter('3359289055940257871');" onmouseout="out('3359289055940257871');" style=""> 204         // Disable trash action until note is loaded.                                                    </span>
<span class="-6997755512109212930" onmouseenter="enter('-6997755512109212930');" onmouseout="out('-6997755512109212930');" style=""> 205         menu.findItem(R.id.menu_trash).setEnabled(!mIsLoadingNote);                                      </span>
<span  style=""> 206                                                                                                          </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 207         MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                 </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 208         MenuItem publishItem = menu.findItem(R.id.menu_publish);                                         </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 209         MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 210         MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                       </span>
<span class="3808692790991764081" onmouseenter="enter('3808692790991764081');" onmouseout="out('3808692790991764081');" style=""> 211         MenuItem copyLinkInternalItem = menu.findItem(R.id.menu_copy_internal);                          </span>
<span  style=""> 212                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 213         if (mNote != null) {                                                                             </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 214             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 215             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 216             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217         }                                                                                                </span>
<span  style=""> 218                                                                                                          </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 219         pinItem.setEnabled(false);                                                                       </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 220         publishItem.setEnabled(false);                                                                   </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 221         copyLinkItem.setEnabled(false);                                                                  </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 222         markdownItem.setEnabled(false);                                                                  </span>
<span class="5485601103916041556" onmouseenter="enter('5485601103916041556');" onmouseout="out('5485601103916041556');" style=""> 223         copyLinkInternalItem.setEnabled(true);                                                           </span>
<span  style=""> 224                                                                                                          </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 225         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226     }                                                                                                    </span>
<span  style=""> 227                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 228     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 229     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 230         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 231         mNotesBucket.removeListener(this);                                                               </span>
<span class="-722641886353457714" onmouseenter="enter('-722641886353457714');" onmouseout="out('-722641886353457714');" style=""> 232         AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteMarkdownFragment)&quot;);                    </span>
<span class="-2497681893087030534" onmouseenter="enter('-2497681893087030534');" onmouseout="out('-2497681893087030534');" style=""> 233         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteMarkdownFragment)&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234     }                                                                                                    </span>
<span  style=""> 235                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 236     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 237     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 238         super.onResume();                                                                                </span>
<span class="6569679696158291720" onmouseenter="enter('6569679696158291720');" onmouseout="out('6569679696158291720');" style=""> 239         checkWebView();                                                                                  </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 240         mNotesBucket.addListener(this);                                                                  </span>
<span class="-864929968357224004" onmouseenter="enter('-864929968357224004');" onmouseout="out('-864929968357224004');" style=""> 241         AppLog.add(Type.SYNC, &quot;Added note bucket listener (NoteMarkdownFragment)&quot;);                      </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 242         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="-801732108510700804" onmouseenter="enter('-801732108510700804');" onmouseout="out('-801732108510700804');" style=""> 243         AppLog.add(Type.SCREEN, &quot;Resumed (NoteMarkdownFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244     }                                                                                                    </span>
<span  style=""> 245                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 246     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 247     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248     }                                                                                                    </span>
<span  style=""> 249                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 250     @Override                                                                                            </span>
<span class="-1660268234445911218" onmouseenter="enter('-1660268234445911218');" onmouseout="out('-1660268234445911218');" style=""> 251     public void onDeleteObject(Bucket&lt;Note&gt; bucket, Note note) {                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252     }                                                                                                    </span>
<span  style=""> 253                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 254     @Override                                                                                            </span>
<span class="7988016775193413808" onmouseenter="enter('7988016775193413808');" onmouseout="out('7988016775193413808');" style=""> 255     public void onNetworkChange(Bucket&lt;Note&gt; bucket, Bucket.ChangeType type, String key) {               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256     }                                                                                                    </span>
<span  style=""> 257                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 258     @Override                                                                                            </span>
<span class="-3176015151927698771" onmouseenter="enter('-3176015151927698771');" onmouseout="out('-3176015151927698771');" style=""> 259     public void onSaveObject(Bucket&lt;Note&gt; bucket, Note note) {                                           </span>
<span class="-6335499192552625484" onmouseenter="enter('-6335499192552625484');" onmouseout="out('-6335499192552625484');" style=""> 260         if (note.equals(mNote)) {                                                                        </span>
<span class="2737653741393130317" onmouseenter="enter('2737653741393130317');" onmouseout="out('2737653741393130317');" style=""> 261             mNote = note;                                                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 262             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263         }                                                                                                </span>
<span  style=""> 264                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style=""> 265         AppLog.add(                                                                                      </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style=""> 266             Type.SYNC,                                                                                   </span>
<span class="2539944630544033834" onmouseenter="enter('2539944630544033834');" onmouseout="out('2539944630544033834');" style=""> 267             &quot;Saved note callback in NoteMarkdownFragment (ID: &quot; + note.getSimperiumKey() +               </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style=""> 268                 &quot; / Title: &quot; + note.getTitle() +                                                         </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style=""> 269                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                    </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style=""> 270                 &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 271         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272     }                                                                                                    </span>
<span  style=""> 273                                                                                                          </span>
<span class="-3335709862144116823" onmouseenter="enter('-3335709862144116823');" onmouseout="out('-3335709862144116823');" style=""> 274     private void checkWebView() {                                                                        </span>
<span class="8465657679158471583" onmouseenter="enter('8465657679158471583');" onmouseout="out('8465657679158471583');" style=""> 275         // When a WebView is installed and mMarkdown is null, a WebView was not installed when the       </span>
<span class="-933414265337799871" onmouseenter="enter('-933414265337799871');" onmouseout="out('-933414265337799871');" style=""> 276         // fragment was created.  So, open the note again to show the markdown preview.                  </span>
<span class="3887236659967554986" onmouseenter="enter('3887236659967554986');" onmouseout="out('3887236659967554986');" style=""> 277         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown == null) {                    </span>
<span class="5771666766706489927" onmouseenter="enter('5771666766706489927');" onmouseout="out('5771666766706489927');" style=""> 278             SimplenoteLinkify.openNote(requireActivity(), mNote.getSimperiumKey());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280     }                                                                                                    </span>
<span  style=""> 281                                                                                                          </span>
<span class="-7586955142242224862" onmouseenter="enter('-7586955142242224862');" onmouseout="out('-7586955142242224862');" style=""> 282     public void updateMarkdown(String text) {                                                            </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 283         if (mMarkdown != null) {                                                                         </span>
<span class="230805297842547942" onmouseenter="enter('230805297842547942');" onmouseout="out('230805297842547942');" style=""><abbr title=" 284             mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 284             mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286     }                                                                                                    </span>
<span  style=""> 287                                                                                                          </span>
<span class="2030146575069313446" onmouseenter="enter('2030146575069313446');" onmouseout="out('2030146575069313446');" style=""> 288     public static String getMarkdownFormattedContent(String cssContent, String sourceContent) {          </span>
<span class="2513493116501019750" onmouseenter="enter('2513493116501019750');" onmouseout="out('2513493116501019750');" style=""> 289         String header = &quot;&lt;html&gt;&lt;head&gt;&quot; +                                                                 </span>
<span class="3824471566064848514" onmouseenter="enter('3824471566064848514');" onmouseout="out('3824471566064848514');" style=""> 290                 &quot;&lt;link href=\&quot;https://fonts.googleapis.com/css?family=Noto+Serif\&quot; rel=\&quot;stylesheet\&quot;&gt;&quot; +</span>
<span class="-7278806205357860133" onmouseenter="enter('-7278806205357860133');" onmouseout="out('-7278806205357860133');" style=""> 291                 cssContent + &quot;&lt;/head&gt;&lt;body&gt;&quot;;                                                            </span>
<span  style=""> 292                                                                                                          </span>
<span class="-7895704813465822381" onmouseenter="enter('-7895704813465822381');" onmouseout="out('-7895704813465822381');" style=""> 293         String parsedMarkdown = new AndDown().markdownToHtml(                                            </span>
<span class="-6798947733513459772" onmouseenter="enter('-6798947733513459772');" onmouseout="out('-6798947733513459772');" style=""> 294                 sourceContent,                                                                           </span>
<span class="3839523846389915820" onmouseenter="enter('3839523846389915820');" onmouseout="out('3839523846389915820');" style=""> 295                 AndDown.HOEDOWN_EXT_STRIKETHROUGH | AndDown.HOEDOWN_EXT_FENCED_CODE |                    </span>
<span class="-2106863865776834087" onmouseenter="enter('-2106863865776834087');" onmouseout="out('-2106863865776834087');" style=""> 296                         AndDown.HOEDOWN_EXT_QUOTE | AndDown.HOEDOWN_EXT_TABLES,                          </span>
<span class="2055569359879886267" onmouseenter="enter('2055569359879886267');" onmouseout="out('2055569359879886267');" style=""> 297                 AndDown.HOEDOWN_HTML_ESCAPE                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 298         );                                                                                               </span>
<span  style=""> 299                                                                                                          </span>
<span class="1394645348869203401" onmouseenter="enter('1394645348869203401');" onmouseout="out('1394645348869203401');" style=""> 300         // Set auto alignment for lists, tables, and quotes based on language of start.                  </span>
<span class="7103750820259129737" onmouseenter="enter('7103750820259129737');" onmouseout="out('7103750820259129737');" style=""> 301         parsedMarkdown = parsedMarkdown                                                                  </span>
<span class="9207196088150204550" onmouseenter="enter('9207196088150204550');" onmouseout="out('9207196088150204550');" style=""> 302                 .replaceAll(&quot;&lt;ol&gt;&quot;, &quot;&lt;ol dir=\&quot;auto\&quot;&gt;&quot;)                                                 </span>
<span class="-7451241365596184853" onmouseenter="enter('-7451241365596184853');" onmouseout="out('-7451241365596184853');" style=""> 303                 .replaceAll(&quot;&lt;ul&gt;&quot;, &quot;&lt;ul dir=\&quot;auto\&quot;&gt;&quot;)                                                 </span>
<span class="3367018575773062425" onmouseenter="enter('3367018575773062425');" onmouseout="out('3367018575773062425');" style=""> 304                 .replaceAll(&quot;&lt;table&gt;&quot;, &quot;&lt;table dir=\&quot;auto\&quot;&gt;&quot;)                                           </span>
<span class="-4396081985590836307" onmouseenter="enter('-4396081985590836307');" onmouseout="out('-4396081985590836307');" style=""> 305                 .replaceAll(&quot;&lt;blockquote&gt;&quot;, &quot;&lt;blockquote dir=\&quot;auto\&quot;&gt;&quot;);                                </span>
<span  style=""> 306                                                                                                          </span>
<span class="-1969760236692593587" onmouseenter="enter('-1969760236692593587');" onmouseout="out('-1969760236692593587');" style=""> 307         return header + &quot;&lt;div class=\&quot;note-detail-markdown\&quot;&gt;&quot; + parsedMarkdown +                        </span>
<span class="-997374659678670563" onmouseenter="enter('-997374659678670563');" onmouseout="out('-997374659678670563');" style=""> 308                 &quot;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309     }                                                                                                    </span>
<span  style=""> 310                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style=""> 311     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="1448652766919907439" onmouseenter="enter('1448652766919907439');" onmouseout="out('1448652766919907439');" style=""> 312         private SoftReference&lt;NoteMarkdownFragment&gt; mNoteMarkdownFragmentReference;                      </span>
<span  style=""> 313                                                                                                          </span>
<span class="-8419210300923433889" onmouseenter="enter('-8419210300923433889');" onmouseout="out('-8419210300923433889');" style=""> 314         private LoadNoteTask(NoteMarkdownFragment context) {                                             </span>
<span class="2363516871652359654" onmouseenter="enter('2363516871652359654');" onmouseout="out('2363516871652359654');" style=""> 315             mNoteMarkdownFragmentReference = new SoftReference&lt;&gt;(context);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316         }                                                                                                </span>
<span  style=""> 317                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 318         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 319         protected void onPreExecute() {                                                                  </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 320             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style=""> 321             fragment.mIsLoadingNote = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322         }                                                                                                </span>
<span  style=""> 323                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 324         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 325         protected Void doInBackground(String... args) {                                                  </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 326             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-1155301544955899202" onmouseenter="enter('-1155301544955899202');" onmouseout="out('-1155301544955899202');" style=""> 327             FragmentActivity activity = fragment.getActivity();                                          </span>
<span  style=""> 328                                                                                                          </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 329             if (activity == null) {                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 330                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331             }                                                                                            </span>
<span  style=""> 332                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 333             String noteID = args[0];                                                                     </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 334             Simplenote application = (Simplenote) activity.getApplication();                             </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 335             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style=""> 336                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 337             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style=""> 338                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style=""> 339             } catch (BucketObjectMissingException exception) {                                           </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 340                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341             }                                                                                            </span>
<span  style=""> 342                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 343             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344         }                                                                                                </span>
<span  style=""> 345                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 346         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 347         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 348             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style=""> 349             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style=""> 350             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   3 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   4 import android.os.Bundle;                                                                                </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">   5 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">   6 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">   7 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">   8 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">   9 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  10 import android.view.ViewGroup;                                                                           </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  11 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  12 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  13 import android.webkit.WebViewClient;                                                                     </span>
<span  style="">  14                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  15 import androidx.annotation.NonNull;                                                                      </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  16 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  17 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="3871271816129224755" onmouseenter="enter('3871271816129224755');" onmouseout="out('3871271816129224755');" style="">  18 import androidx.fragment.app.FragmentActivity;                                                           </span>
<span  style="">  19                                                                                                          </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  20 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  21 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  22 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  23 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  24 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  25 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  26 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  27 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  28 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  29 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="">  30 import com.commonsware.cwac.anddown.AndDown;                                                             </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  31 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  32 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  33 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span  style="">  34                                                                                                          </span>
<span class="-9136849050553086203" onmouseenter="enter('-9136849050553086203');" onmouseout="out('-9136849050553086203');" style="">  35 import java.lang.ref.SoftReference;                                                                      </span>
<span  style="">  36                                                                                                          </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  37 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  38                                                                                                          </span>
<span class="-1294991214119301931" onmouseenter="enter('-1294991214119301931');" onmouseout="out('-1294991214119301931');" style="">  39 public class NoteMarkdownFragment extends Fragment implements Bucket.Listener&lt;Note&gt; {                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  40     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  41                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  42     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  43     private Note mNote;                                                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="">  44     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="">  45     private WebView mMarkdown;                                                                           </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style="">  46     private boolean mIsLoadingNote;                                                                      </span>
<span  style="">  47                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style="">  49     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="7034917290488384671" onmouseenter="enter('7034917290488384671');" onmouseout="out('7034917290488384671');" style="">  50         inflater.inflate(R.menu.note_markdown, menu);                                                    </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style="">  51         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span  style="">  52                                                                                                          </span>
<span class="-8377308209077836358" onmouseenter="enter('-8377308209077836358');" onmouseout="out('-8377308209077836358');" style="">  53         DrawableUtils.tintMenuWithAttribute(                                                             </span>
<span class="-1922245487729536443" onmouseenter="enter('-1922245487729536443');" onmouseout="out('-1922245487729536443');" style="">  54             requireContext(),                                                                            </span>
<span class="2802851135583918911" onmouseenter="enter('2802851135583918911');" onmouseout="out('2802851135583918911');" style="">  55             menu,                                                                                        </span>
<span class="-2842695662732271949" onmouseenter="enter('-2842695662732271949');" onmouseout="out('-2842695662732271949');" style="">  56             R.attr.toolbarIconColor                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">  57         );                                                                                               </span>
<span  style="">  58                                                                                                          </span>
<span class="-2756778567974340724" onmouseenter="enter('-2756778567974340724');" onmouseout="out('-2756778567974340724');" style="">  59         for (int i = 0; i &lt; menu.size(); i++) {                                                          </span>
<span class="9102652859734412479" onmouseenter="enter('9102652859734412479');" onmouseout="out('9102652859734412479');" style="">  60             MenuItem item = menu.getItem(i);                                                             </span>
<span class="6288253845963077021" onmouseenter="enter('6288253845963077021');" onmouseout="out('6288253845963077021');" style="">  61             DrawableUtils.setMenuItemAlpha(item, 0.3);  // 0.3 is 30% opacity.                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62         }                                                                                                </span>
<span  style="">  63                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">  64         if (mNote != null) {                                                                             </span>
<span class="-6829067213176119658" onmouseenter="enter('-6829067213176119658');" onmouseout="out('-6829067213176119658');" style="">  65             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_info);                              </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style="">  66             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style="">  67             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span  style="">  68                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="">  69             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style="">  70                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  71             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style="">  72                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  73             }                                                                                            </span>
<span  style="">  74                                                                                                          </span>
<span class="-6442626485066357897" onmouseenter="enter('-6442626485066357897');" onmouseout="out('-6442626485066357897');" style="">  75             DrawableUtils.tintMenuItemWithAttribute(getActivity(), trashItem, R.attr.toolbarIconColor);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76         }                                                                                                </span>
<span  style="">  77                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style="">  78         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79     }                                                                                                    </span>
<span  style="">  80                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  81     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title="  82     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {">  82     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="536061208326466715" onmouseenter="enter('536061208326466715');" onmouseout="out('536061208326466715');" style="">  83         AppLog.add(Type.SCREEN, &quot;Created (NoteMarkdownFragment)&quot;);                                       </span>
<span class="-6182689483737118349" onmouseenter="enter('-6182689483737118349');" onmouseout="out('-6182689483737118349');" style="">  84         mNotesBucket = ((Simplenote) requireActivity().getApplication()).getNotesBucket();               </span>
<span  style="">  85                                                                                                          </span>
<span class="-981035472147970089" onmouseenter="enter('-981035472147970089');" onmouseout="out('-981035472147970089');" style="">  86         // Load note if we were passed an ID.                                                            </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="">  87         Bundle arguments = getArguments();                                                               </span>
<span  style="">  88                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="">  89         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="">  90             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style="">  91             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92         }                                                                                                </span>
<span  style="">  93                                                                                                          </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style="">  94         setHasOptionsMenu(true);                                                                         </span>
<span class="7650276599659021163" onmouseenter="enter('7650276599659021163');" onmouseout="out('7650276599659021163');" style="">  95         View layout;                                                                                     </span>
<span  style="">  96                                                                                                          </span>
<span class="-1005326724349715830" onmouseenter="enter('-1005326724349715830');" onmouseout="out('-1005326724349715830');" style="">  97         if (BrowserUtils.isWebViewInstalled(requireContext())) {                                         </span>
<span class="-4734724703035025703" onmouseenter="enter('-4734724703035025703');" onmouseout="out('-4734724703035025703');" style="">  98             layout = inflater.inflate(R.layout.fragment_note_markdown, container, false);                </span>
<span class="-71913177359136438" onmouseenter="enter('-71913177359136438');" onmouseout="out('-71913177359136438');" style="">  99         mMarkdown = layout.findViewById(R.id.markdown);                                                  </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style=""> 100         mMarkdown.setWebViewClient(                                                                      </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style=""> 101             new WebViewClient() {                                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 102                 @Override                                                                                </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style=""> 103                 public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){       </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 104                     String url = request.getUrl().toString();                                            </span>
<span  style=""> 105                                                                                                          </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style=""> 106                     if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                       </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""><abbr title=" 107                         SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 107                         SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX,ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 108                     } else {                                                                             </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 109                         BrowserUtils.launchBrowserOrShowError(requireContext(), url);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110                     }                                                                                    </span>
<span  style=""> 111                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 112                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114             }                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 115         );                                                                                               </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 116 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 117         mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext())); </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 118 ||||||| BASE                                                                                             </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119         mCss = ThemeUtils.isLightTheme(requireContext())                                                 </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120             ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                    </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121             : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                    </span>
<span class="-6718836449165012481" onmouseenter="enter('-6718836449165012481');" onmouseout="out('-6718836449165012481');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122         return layout;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 124 =======                                                                                                  </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 125             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126                 ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127                 : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128         } else {                                                                                         </span>
<span class="824226046488103793" onmouseenter="enter('824226046488103793');" onmouseout="out('824226046488103793');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 129             layout = inflater.inflate(R.layout.fragment_note_error, container, false);                   </span>
<span class="4154857411582064154" onmouseenter="enter('4154857411582064154');" onmouseout="out('4154857411582064154');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 130             layout.findViewById(R.id.error).setVisibility(View.VISIBLE);                                 </span>
<span class="8150143839592336677" onmouseenter="enter('8150143839592336677');" onmouseout="out('8150143839592336677');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 131             layout.findViewById(R.id.button).setOnClickListener(                                         </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 132                 new View.OnClickListener() {                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133                     @Override                                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 134                     public void onClick(View v) {                                                        </span>
<span class="-6437015632434493624" onmouseenter="enter('-6437015632434493624');" onmouseout="out('-6437015632434493624');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 135                         BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEW);"> 135                         BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEWðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 136                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 137                 }                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 138             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 139         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 140                                                                                                          </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 141 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-6718836449165012481" onmouseenter="enter('-6718836449165012481');" onmouseout="out('-6718836449165012481');" style=""> 142         return layout;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143     }                                                                                                    </span>
<span  style=""> 144                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 145     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 146     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 147         switch (item.getItemId()) {                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 148             case android.R.id.home:                                                                      </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 149                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 150                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151                 }                                                                                        </span>
<span  style=""> 152                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 153                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 154                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 155             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 156                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 157                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158                 }                                                                                        </span>
<span  style=""> 159                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 160                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 161                 return true;                                                                             </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 162             case R.id.menu_copy_internal:                                                                </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 163                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 164                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165                 }                                                                                        </span>
<span  style=""> 166                                                                                                          </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 167                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 167                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitleðŸ”µ</abbr></span>
<span class="-1969547816529952145" onmouseenter="enter('-1969547816529952145');" onmouseout="out('-1969547816529952145');" style=""> 168                     Snackbar.make(mMarkdown, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 169                 } else {                                                                                 </span>
<span class="-8785267208974710977" onmouseenter="enter('-8785267208974710977');" onmouseout="out('-8785267208974710977');" style=""> 170                     Snackbar.make(mMarkdown, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171                 }                                                                                        </span>
<span  style=""> 172                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 173                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 174             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 175                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177     }                                                                                                    </span>
<span  style=""> 178                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 179     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 180         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 181         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182     }                                                                                                    </span>
<span  style=""> 183                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 184     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 185     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="3359289055940257871" onmouseenter="enter('3359289055940257871');" onmouseout="out('3359289055940257871');" style=""> 186         // Disable trash action until note is loaded.                                                    </span>
<span class="-6997755512109212930" onmouseenter="enter('-6997755512109212930');" onmouseout="out('-6997755512109212930');" style=""> 187         menu.findItem(R.id.menu_trash).setEnabled(!mIsLoadingNote);                                      </span>
<span  style=""> 188                                                                                                          </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 189         MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                 </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 190         MenuItem publishItem = menu.findItem(R.id.menu_publish);                                         </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 191         MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 192         MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                       </span>
<span class="3808692790991764081" onmouseenter="enter('3808692790991764081');" onmouseout="out('3808692790991764081');" style=""> 193         MenuItem copyLinkInternalItem = menu.findItem(R.id.menu_copy_internal);                          </span>
<span  style=""> 194                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 195         if (mNote != null) {                                                                             </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 196             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 197             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 198             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199         }                                                                                                </span>
<span  style=""> 200                                                                                                          </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 201         pinItem.setEnabled(false);                                                                       </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 202         publishItem.setEnabled(false);                                                                   </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 203         copyLinkItem.setEnabled(false);                                                                  </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 204         markdownItem.setEnabled(false);                                                                  </span>
<span class="5485601103916041556" onmouseenter="enter('5485601103916041556');" onmouseout="out('5485601103916041556');" style=""> 205         copyLinkInternalItem.setEnabled(true);                                                           </span>
<span  style=""> 206                                                                                                          </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 207         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208     }                                                                                                    </span>
<span  style=""> 209                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 210     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 211     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 212         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 213         mNotesBucket.removeListener(this);                                                               </span>
<span class="-722641886353457714" onmouseenter="enter('-722641886353457714');" onmouseout="out('-722641886353457714');" style=""> 214         AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteMarkdownFragment)&quot;);                    </span>
<span class="-2497681893087030534" onmouseenter="enter('-2497681893087030534');" onmouseout="out('-2497681893087030534');" style=""> 215         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteMarkdownFragment)&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216     }                                                                                                    </span>
<span  style=""> 217                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 218     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 219     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 220         super.onResume();                                                                                </span>
<span class="6569679696158291720" onmouseenter="enter('6569679696158291720');" onmouseout="out('6569679696158291720');" style=""> 221         checkWebView();                                                                                  </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 222         mNotesBucket.addListener(this);                                                                  </span>
<span class="-864929968357224004" onmouseenter="enter('-864929968357224004');" onmouseout="out('-864929968357224004');" style=""> 223         AppLog.add(Type.SYNC, &quot;Added note bucket listener (NoteMarkdownFragment)&quot;);                      </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 224         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="-801732108510700804" onmouseenter="enter('-801732108510700804');" onmouseout="out('-801732108510700804');" style=""> 225         AppLog.add(Type.SCREEN, &quot;Resumed (NoteMarkdownFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226     }                                                                                                    </span>
<span  style=""> 227                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 228     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 229     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 232     @Override                                                                                            </span>
<span class="-1660268234445911218" onmouseenter="enter('-1660268234445911218');" onmouseout="out('-1660268234445911218');" style=""> 233     public void onDeleteObject(Bucket&lt;Note&gt; bucket, Note note) {                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234     }                                                                                                    </span>
<span  style=""> 235                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 236     @Override                                                                                            </span>
<span class="7988016775193413808" onmouseenter="enter('7988016775193413808');" onmouseout="out('7988016775193413808');" style=""> 237     public void onNetworkChange(Bucket&lt;Note&gt; bucket, Bucket.ChangeType type, String key) {               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238     }                                                                                                    </span>
<span  style=""> 239                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 240     @Override                                                                                            </span>
<span class="-3176015151927698771" onmouseenter="enter('-3176015151927698771');" onmouseout="out('-3176015151927698771');" style=""> 241     public void onSaveObject(Bucket&lt;Note&gt; bucket, Note note) {                                           </span>
<span class="-6335499192552625484" onmouseenter="enter('-6335499192552625484');" onmouseout="out('-6335499192552625484');" style=""> 242         if (note.equals(mNote)) {                                                                        </span>
<span class="2737653741393130317" onmouseenter="enter('2737653741393130317');" onmouseout="out('2737653741393130317');" style=""> 243             mNote = note;                                                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 244             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245         }                                                                                                </span>
<span  style=""> 246                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style=""> 247         AppLog.add(                                                                                      </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style=""> 248             Type.SYNC,                                                                                   </span>
<span class="2539944630544033834" onmouseenter="enter('2539944630544033834');" onmouseout="out('2539944630544033834');" style=""> 249             &quot;Saved note callback in NoteMarkdownFragment (ID: &quot; + note.getSimperiumKey() +               </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style=""> 250                 &quot; / Title: &quot; + note.getTitle() +                                                         </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style=""> 251                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                    </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style=""> 252                 &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 253         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254     }                                                                                                    </span>
<span  style=""> 255                                                                                                          </span>
<span class="-3335709862144116823" onmouseenter="enter('-3335709862144116823');" onmouseout="out('-3335709862144116823');" style=""> 256     private void checkWebView() {                                                                        </span>
<span class="8465657679158471583" onmouseenter="enter('8465657679158471583');" onmouseout="out('8465657679158471583');" style=""> 257         // When a WebView is installed and mMarkdown is null, a WebView was not installed when the       </span>
<span class="-933414265337799871" onmouseenter="enter('-933414265337799871');" onmouseout="out('-933414265337799871');" style=""> 258         // fragment was created.  So, open the note again to show the markdown preview.                  </span>
<span class="3887236659967554986" onmouseenter="enter('3887236659967554986');" onmouseout="out('3887236659967554986');" style=""> 259         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown == null) {                    </span>
<span class="5771666766706489927" onmouseenter="enter('5771666766706489927');" onmouseout="out('5771666766706489927');" style=""> 260             SimplenoteLinkify.openNote(requireActivity(), mNote.getSimperiumKey());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262     }                                                                                                    </span>
<span  style=""> 263                                                                                                          </span>
<span class="-7586955142242224862" onmouseenter="enter('-7586955142242224862');" onmouseout="out('-7586955142242224862');" style=""> 264     public void updateMarkdown(String text) {                                                            </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 265         if (mMarkdown != null) {                                                                         </span>
<span class="230805297842547942" onmouseenter="enter('230805297842547942');" onmouseout="out('230805297842547942');" style=""><abbr title=" 266         mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 266         mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utf-8&quot;ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268     }                                                                                                    </span>
<span  style=""> 269                                                                                                          </span>
<span class="2030146575069313446" onmouseenter="enter('2030146575069313446');" onmouseout="out('2030146575069313446');" style=""> 270     public static String getMarkdownFormattedContent(String cssContent, String sourceContent) {          </span>
<span class="2513493116501019750" onmouseenter="enter('2513493116501019750');" onmouseout="out('2513493116501019750');" style=""> 271         String header = &quot;&lt;html&gt;&lt;head&gt;&quot; +                                                                 </span>
<span class="3824471566064848514" onmouseenter="enter('3824471566064848514');" onmouseout="out('3824471566064848514');" style=""> 272                 &quot;&lt;link href=\&quot;https://fonts.googleapis.com/css?family=Noto+Serif\&quot; rel=\&quot;stylesheet\&quot;&gt;&quot; +</span>
<span class="-7278806205357860133" onmouseenter="enter('-7278806205357860133');" onmouseout="out('-7278806205357860133');" style=""> 273                 cssContent + &quot;&lt;/head&gt;&lt;body&gt;&quot;;                                                            </span>
<span  style=""> 274                                                                                                          </span>
<span class="-7895704813465822381" onmouseenter="enter('-7895704813465822381');" onmouseout="out('-7895704813465822381');" style=""> 275         String parsedMarkdown = new AndDown().markdownToHtml(                                            </span>
<span class="-6798947733513459772" onmouseenter="enter('-6798947733513459772');" onmouseout="out('-6798947733513459772');" style=""> 276                 sourceContent,                                                                           </span>
<span class="3839523846389915820" onmouseenter="enter('3839523846389915820');" onmouseout="out('3839523846389915820');" style=""> 277                 AndDown.HOEDOWN_EXT_STRIKETHROUGH | AndDown.HOEDOWN_EXT_FENCED_CODE |                    </span>
<span class="-2106863865776834087" onmouseenter="enter('-2106863865776834087');" onmouseout="out('-2106863865776834087');" style=""> 278                         AndDown.HOEDOWN_EXT_QUOTE | AndDown.HOEDOWN_EXT_TABLES,                          </span>
<span class="2055569359879886267" onmouseenter="enter('2055569359879886267');" onmouseout="out('2055569359879886267');" style=""> 279                 AndDown.HOEDOWN_HTML_ESCAPE                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 280         );                                                                                               </span>
<span  style=""> 281                                                                                                          </span>
<span class="1394645348869203401" onmouseenter="enter('1394645348869203401');" onmouseout="out('1394645348869203401');" style=""> 282         // Set auto alignment for lists, tables, and quotes based on language of start.                  </span>
<span class="7103750820259129737" onmouseenter="enter('7103750820259129737');" onmouseout="out('7103750820259129737');" style=""> 283         parsedMarkdown = parsedMarkdown                                                                  </span>
<span class="9207196088150204550" onmouseenter="enter('9207196088150204550');" onmouseout="out('9207196088150204550');" style=""> 284                 .replaceAll(&quot;&lt;ol&gt;&quot;, &quot;&lt;ol dir=\&quot;auto\&quot;&gt;&quot;)                                                 </span>
<span class="-7451241365596184853" onmouseenter="enter('-7451241365596184853');" onmouseout="out('-7451241365596184853');" style=""> 285                 .replaceAll(&quot;&lt;ul&gt;&quot;, &quot;&lt;ul dir=\&quot;auto\&quot;&gt;&quot;)                                                 </span>
<span class="3367018575773062425" onmouseenter="enter('3367018575773062425');" onmouseout="out('3367018575773062425');" style=""> 286                 .replaceAll(&quot;&lt;table&gt;&quot;, &quot;&lt;table dir=\&quot;auto\&quot;&gt;&quot;)                                           </span>
<span class="-4396081985590836307" onmouseenter="enter('-4396081985590836307');" onmouseout="out('-4396081985590836307');" style=""> 287                 .replaceAll(&quot;&lt;blockquote&gt;&quot;, &quot;&lt;blockquote dir=\&quot;auto\&quot;&gt;&quot;);                                </span>
<span  style=""> 288                                                                                                          </span>
<span class="-1969760236692593587" onmouseenter="enter('-1969760236692593587');" onmouseout="out('-1969760236692593587');" style=""> 289         return header + &quot;&lt;div class=\&quot;note-detail-markdown\&quot;&gt;&quot; + parsedMarkdown +                        </span>
<span class="-997374659678670563" onmouseenter="enter('-997374659678670563');" onmouseout="out('-997374659678670563');" style=""> 290                 &quot;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291     }                                                                                                    </span>
<span  style=""> 292                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style=""> 293     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="1448652766919907439" onmouseenter="enter('1448652766919907439');" onmouseout="out('1448652766919907439');" style=""> 294         private SoftReference&lt;NoteMarkdownFragment&gt; mNoteMarkdownFragmentReference;                      </span>
<span  style=""> 295                                                                                                          </span>
<span class="-8419210300923433889" onmouseenter="enter('-8419210300923433889');" onmouseout="out('-8419210300923433889');" style=""> 296         private LoadNoteTask(NoteMarkdownFragment context) {                                             </span>
<span class="2363516871652359654" onmouseenter="enter('2363516871652359654');" onmouseout="out('2363516871652359654');" style=""> 297             mNoteMarkdownFragmentReference = new SoftReference&lt;&gt;(context);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298         }                                                                                                </span>
<span  style=""> 299                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 300         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 301         protected void onPreExecute() {                                                                  </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 302             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style=""> 303             fragment.mIsLoadingNote = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span  style=""> 305                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 306         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 307         protected Void doInBackground(String... args) {                                                  </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 308             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-1155301544955899202" onmouseenter="enter('-1155301544955899202');" onmouseout="out('-1155301544955899202');" style=""> 309             FragmentActivity activity = fragment.getActivity();                                          </span>
<span  style=""> 310                                                                                                          </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 311             if (activity == null) {                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 312                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313             }                                                                                            </span>
<span  style=""> 314                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 315             String noteID = args[0];                                                                     </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 316             Simplenote application = (Simplenote) activity.getApplication();                             </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 317             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style=""> 318                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 319             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style=""> 320                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style=""> 321             } catch (BucketObjectMissingException exception) {                                           </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 322                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323             }                                                                                            </span>
<span  style=""> 324                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 325             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326         }                                                                                                </span>
<span  style=""> 327                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 328         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 329         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 330             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style=""> 331             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style=""> 332             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335 }                                                                                                        </span>
















</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   3 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   4 import android.os.Bundle;                                                                                </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">   5 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">   6 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">   7 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">   8 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">   9 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  10 import android.view.ViewGroup;                                                                           </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  11 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  12 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  13 import android.webkit.WebViewClient;                                                                     </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  14 import androidx.annotation.NonNull;                                                                      </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  15 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  16 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="3871271816129224755" onmouseenter="enter('3871271816129224755');" onmouseout="out('3871271816129224755');" style="">  17 import androidx.fragment.app.FragmentActivity;                                                           </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  18 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  19 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  20 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  21 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  22 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  23 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  24 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  25 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  26 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  27 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="">  28 import com.commonsware.cwac.anddown.AndDown;                                                             </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  29 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  30 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  31 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-9136849050553086203" onmouseenter="enter('-9136849050553086203');" onmouseout="out('-9136849050553086203');" style="">  32 import java.lang.ref.SoftReference;                                                                      </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  33 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  34                                                                                                          </span>
<span  style="">  35                                                                                                          </span>
<span class="-1294991214119301931" onmouseenter="enter('-1294991214119301931');" onmouseout="out('-1294991214119301931');" style="">  36 public class NoteMarkdownFragment extends Fragment implements Bucket.Listener&lt;Note&gt; {                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  37     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  38                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  39     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style="">  40                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  41     private Note mNote;                                                                                  </span>
<span  style="">  42                                                                                                          </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="">  43     private String mCss;                                                                                 </span>
<span  style="">  44                                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="">  45     private WebView mMarkdown;                                                                           </span>
<span  style="">  46                                                                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style="">  47     private boolean mIsLoadingNote;                                                                      </span>
<span  style="">  48                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  49     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style="">  50     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="7034917290488384671" onmouseenter="enter('7034917290488384671');" onmouseout="out('7034917290488384671');" style="">  51         inflater.inflate(R.menu.note_markdown, menu);                                                    </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style="">  52         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span  style="">  53                                                                                                          </span>
<span class="-8377308209077836358" onmouseenter="enter('-8377308209077836358');" onmouseout="out('-8377308209077836358');" style="">  54         DrawableUtils.tintMenuWithAttribute(                                                             </span>
<span class="-1922245487729536443" onmouseenter="enter('-1922245487729536443');" onmouseout="out('-1922245487729536443');" style="">  55             requireContext(),                                                                            </span>
<span class="2802851135583918911" onmouseenter="enter('2802851135583918911');" onmouseout="out('2802851135583918911');" style="">  56             menu,                                                                                        </span>
<span class="-2842695662732271949" onmouseenter="enter('-2842695662732271949');" onmouseout="out('-2842695662732271949');" style="">  57             R.attr.toolbarIconColor                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">  58         );                                                                                               </span>
<span  style="">  59                                                                                                          </span>
<span class="-2756778567974340724" onmouseenter="enter('-2756778567974340724');" onmouseout="out('-2756778567974340724');" style="">  60         for (int i = 0; i &lt; menu.size(); i++) {                                                          </span>
<span class="9102652859734412479" onmouseenter="enter('9102652859734412479');" onmouseout="out('9102652859734412479');" style="">  61             MenuItem item = menu.getItem(i);                                                             </span>
<span class="6288253845963077021" onmouseenter="enter('6288253845963077021');" onmouseout="out('6288253845963077021');" style="">  62             DrawableUtils.setMenuItemAlpha(item, 0.3);  // 0.3 is 30% opacity.                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63         }                                                                                                </span>
<span  style="">  64                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">  65         if (mNote != null) {                                                                             </span>
<span class="-6829067213176119658" onmouseenter="enter('-6829067213176119658');" onmouseout="out('-6829067213176119658');" style="">  66             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_info);                              </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style="">  67             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style="">  68             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span  style="">  69                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="">  70             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style="">  71                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  72             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style="">  73                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74             }                                                                                            </span>
<span  style="">  75                                                                                                          </span>
<span class="-6442626485066357897" onmouseenter="enter('-6442626485066357897');" onmouseout="out('-6442626485066357897');" style="">  76             DrawableUtils.tintMenuItemWithAttribute(getActivity(), trashItem, R.attr.toolbarIconColor);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  77         }                                                                                                </span>
<span  style="">  78                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style="">  79         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80     }                                                                                                    </span>
<span  style="">  81                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  82     @Override                                                                                            </span>
<span class="-5467678769290806465" onmouseenter="enter('-5467678769290806465');" onmouseout="out('-5467678769290806465');" style="">  83     public View onCreateView(@NonNull                                                                    </span>
<span class="-2940382649904418396" onmouseenter="enter('-2940382649904418396');" onmouseout="out('-2940382649904418396');" style="">  84     LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {                           </span>
<span class="536061208326466715" onmouseenter="enter('536061208326466715');" onmouseout="out('536061208326466715');" style="">  85         AppLog.add(Type.SCREEN, &quot;Created (NoteMarkdownFragment)&quot;);                                       </span>
<span class="2001559668871747426" onmouseenter="enter('2001559668871747426');" onmouseout="out('2001559668871747426');" style="">  86         mNotesBucket = ((Simplenote) (requireActivity().getApplication())).getNotesBucket();             </span>
<span class="-981035472147970089" onmouseenter="enter('-981035472147970089');" onmouseout="out('-981035472147970089');" style="">  87         // Load note if we were passed an ID.                                                            </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="">  88         Bundle arguments = getArguments();                                                               </span>
<span class="4011393863908935220" onmouseenter="enter('4011393863908935220');" onmouseout="out('4011393863908935220');" style="">  89         if ((arguments != null) &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                 </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="">  90             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style="">  91             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92         }                                                                                                </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style="">  93         setHasOptionsMenu(true);                                                                         </span>
<span class="7650276599659021163" onmouseenter="enter('7650276599659021163');" onmouseout="out('7650276599659021163');" style="">  94         View layout;                                                                                     </span>
<span class="-1005326724349715830" onmouseenter="enter('-1005326724349715830');" onmouseout="out('-1005326724349715830');" style="">  95         if (BrowserUtils.isWebViewInstalled(requireContext())) {                                         </span>
<span class="-4734724703035025703" onmouseenter="enter('-4734724703035025703');" onmouseout="out('-4734724703035025703');" style="">  96             layout = inflater.inflate(R.layout.fragment_note_markdown, container, false);                </span>
<span class="-71913177359136438" onmouseenter="enter('-71913177359136438');" onmouseout="out('-71913177359136438');" style="">  97             mMarkdown = layout.findViewById(R.id.markdown);                                              </span>
<span class="1363245066851978300" onmouseenter="enter('1363245066851978300');" onmouseout="out('1363245066851978300');" style="">  98             mMarkdown.setWebViewClient(new WebViewClient() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  99                 @Override                                                                                </span>
<span class="-7741512549281860073" onmouseenter="enter('-7741512549281860073');" onmouseout="out('-7741512549281860073');" style=""> 100                 public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) {      </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 101                     String url = request.getUrl().toString();                                            </span>
<span class="-2285634234159712436" onmouseenter="enter('-2285634234159712436');" onmouseout="out('-2285634234159712436');" style=""> 102                     if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)) {                      </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""><abbr title=" 103                         SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 103                         SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX,ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 104                     } else {                                                                             </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 105                         BrowserUtils.launchBrowserOrShowError(requireContext(), url);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 107                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 109             });                                                                                          </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style=""><abbr title=" 110             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));"> 110             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 111         } else {                                                                                         </span>
<span class="824226046488103793" onmouseenter="enter('824226046488103793');" onmouseout="out('824226046488103793');" style=""> 112             layout = inflater.inflate(R.layout.fragment_note_error, container, false);                   </span>
<span class="4154857411582064154" onmouseenter="enter('4154857411582064154');" onmouseout="out('4154857411582064154');" style=""> 113             layout.findViewById(R.id.error).setVisibility(View.VISIBLE);                                 </span>
<span class="6092611811992741367" onmouseenter="enter('6092611811992741367');" onmouseout="out('6092611811992741367');" style=""> 114             layout.findViewById(R.id.button).setOnClickListener(new View.OnClickListener() {             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 115                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 116                 public void onClick(View v) {                                                            </span>
<span class="-6437015632434493624" onmouseenter="enter('-6437015632434493624');" onmouseout="out('-6437015632434493624');" style=""> 117                     BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEW);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 119             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120         }                                                                                                </span>
<span class="-6718836449165012481" onmouseenter="enter('-6718836449165012481');" onmouseout="out('-6718836449165012481');" style=""> 121         return layout;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122     }                                                                                                    </span>
<span  style=""> 123                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 124     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 125     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 126         switch (item.getItemId()) {                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 127             case android.R.id.home:                                                                      </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 128                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 129                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130                 }                                                                                        </span>
<span  style=""> 131                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 132                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 133                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 134             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 135                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 136                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137                 }                                                                                        </span>
<span  style=""> 138                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 139                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 140                 return true;                                                                             </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 141             case R.id.menu_copy_internal:                                                                </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 142                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 143                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144                 }                                                                                        </span>
<span  style=""> 145                                                                                                          </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 146                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 146                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitleðŸ”µ</abbr></span>
<span class="-1969547816529952145" onmouseenter="enter('-1969547816529952145');" onmouseout="out('-1969547816529952145');" style=""> 147                     Snackbar.make(mMarkdown, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 148                 } else {                                                                                 </span>
<span class="-8785267208974710977" onmouseenter="enter('-8785267208974710977');" onmouseout="out('-8785267208974710977');" style=""> 149                     Snackbar.make(mMarkdown, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150                 }                                                                                        </span>
<span  style=""> 151                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 152                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 153             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 154                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span  style=""> 157                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 158     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 159         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 160         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161     }                                                                                                    </span>
<span  style=""> 162                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 163     @Override                                                                                            </span>
<span class="-2786825431481165783" onmouseenter="enter('-2786825431481165783');" onmouseout="out('-2786825431481165783');" style=""> 164     public void onPrepareOptionsMenu(@NonNull                                                            </span>
<span class="8749414831992096703" onmouseenter="enter('8749414831992096703');" onmouseout="out('8749414831992096703');" style=""> 165     Menu menu) {                                                                                         </span>
<span class="3359289055940257871" onmouseenter="enter('3359289055940257871');" onmouseout="out('3359289055940257871');" style=""> 166         // Disable trash action until note is loaded.                                                    </span>
<span class="-6997755512109212930" onmouseenter="enter('-6997755512109212930');" onmouseout="out('-6997755512109212930');" style=""> 167         menu.findItem(R.id.menu_trash).setEnabled(!mIsLoadingNote);                                      </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 168         MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                 </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 169         MenuItem publishItem = menu.findItem(R.id.menu_publish);                                         </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 170         MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 171         MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                       </span>
<span class="3808692790991764081" onmouseenter="enter('3808692790991764081');" onmouseout="out('3808692790991764081');" style=""> 172         MenuItem copyLinkInternalItem = menu.findItem(R.id.menu_copy_internal);                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 173         if (mNote != null) {                                                                             </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 174             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 175             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 176             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177         }                                                                                                </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 178         pinItem.setEnabled(false);                                                                       </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 179         publishItem.setEnabled(false);                                                                   </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 180         copyLinkItem.setEnabled(false);                                                                  </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 181         markdownItem.setEnabled(false);                                                                  </span>
<span class="5485601103916041556" onmouseenter="enter('5485601103916041556');" onmouseout="out('5485601103916041556');" style=""> 182         copyLinkInternalItem.setEnabled(true);                                                           </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 183         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184     }                                                                                                    </span>
<span  style=""> 185                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 186     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 187     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 188         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 189         mNotesBucket.removeListener(this);                                                               </span>
<span class="-722641886353457714" onmouseenter="enter('-722641886353457714');" onmouseout="out('-722641886353457714');" style=""> 190         AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteMarkdownFragment)&quot;);                    </span>
<span class="-2497681893087030534" onmouseenter="enter('-2497681893087030534');" onmouseout="out('-2497681893087030534');" style=""> 191         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteMarkdownFragment)&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192     }                                                                                                    </span>
<span  style=""> 193                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 194     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 195     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 196         super.onResume();                                                                                </span>
<span class="6569679696158291720" onmouseenter="enter('6569679696158291720');" onmouseout="out('6569679696158291720');" style=""> 197         checkWebView();                                                                                  </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 198         mNotesBucket.addListener(this);                                                                  </span>
<span class="-864929968357224004" onmouseenter="enter('-864929968357224004');" onmouseout="out('-864929968357224004');" style=""> 199         AppLog.add(Type.SYNC, &quot;Added note bucket listener (NoteMarkdownFragment)&quot;);                      </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 200         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="-801732108510700804" onmouseenter="enter('-801732108510700804');" onmouseout="out('-801732108510700804');" style=""> 201         AppLog.add(Type.SCREEN, &quot;Resumed (NoteMarkdownFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 204     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 205     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206     }                                                                                                    </span>
<span  style=""> 207                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 208     @Override                                                                                            </span>
<span class="-1660268234445911218" onmouseenter="enter('-1660268234445911218');" onmouseout="out('-1660268234445911218');" style=""> 209     public void onDeleteObject(Bucket&lt;Note&gt; bucket, Note note) {                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210     }                                                                                                    </span>
<span  style=""> 211                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 212     @Override                                                                                            </span>
<span class="7988016775193413808" onmouseenter="enter('7988016775193413808');" onmouseout="out('7988016775193413808');" style=""> 213     public void onNetworkChange(Bucket&lt;Note&gt; bucket, Bucket.ChangeType type, String key) {               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214     }                                                                                                    </span>
<span  style=""> 215                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 216     @Override                                                                                            </span>
<span class="-3176015151927698771" onmouseenter="enter('-3176015151927698771');" onmouseout="out('-3176015151927698771');" style=""> 217     public void onSaveObject(Bucket&lt;Note&gt; bucket, Note note) {                                           </span>
<span class="-6335499192552625484" onmouseenter="enter('-6335499192552625484');" onmouseout="out('-6335499192552625484');" style=""> 218         if (note.equals(mNote)) {                                                                        </span>
<span class="2737653741393130317" onmouseenter="enter('2737653741393130317');" onmouseout="out('2737653741393130317');" style=""> 219             mNote = note;                                                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 220             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221         }                                                                                                </span>
<span  style=""> 222                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style=""> 223         AppLog.add(                                                                                      </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style=""> 224             Type.SYNC,                                                                                   </span>
<span class="2539944630544033834" onmouseenter="enter('2539944630544033834');" onmouseout="out('2539944630544033834');" style=""> 225             &quot;Saved note callback in NoteMarkdownFragment (ID: &quot; + note.getSimperiumKey() +               </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style=""> 226                 &quot; / Title: &quot; + note.getTitle() +                                                         </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style=""> 227                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                    </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style=""> 228                 &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 229         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="-3335709862144116823" onmouseenter="enter('-3335709862144116823');" onmouseout="out('-3335709862144116823');" style=""> 232     private void checkWebView() {                                                                        </span>
<span class="8465657679158471583" onmouseenter="enter('8465657679158471583');" onmouseout="out('8465657679158471583');" style=""> 233         // When a WebView is installed and mMarkdown is null, a WebView was not installed when the       </span>
<span class="-933414265337799871" onmouseenter="enter('-933414265337799871');" onmouseout="out('-933414265337799871');" style=""> 234         // fragment was created.  So, open the note again to show the markdown preview.                  </span>
<span class="3887236659967554986" onmouseenter="enter('3887236659967554986');" onmouseout="out('3887236659967554986');" style=""> 235         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown == null) {                    </span>
<span class="5771666766706489927" onmouseenter="enter('5771666766706489927');" onmouseout="out('5771666766706489927');" style=""> 236             SimplenoteLinkify.openNote(requireActivity(), mNote.getSimperiumKey());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238     }                                                                                                    </span>
<span  style=""> 239                                                                                                          </span>
<span class="-7586955142242224862" onmouseenter="enter('-7586955142242224862');" onmouseout="out('-7586955142242224862');" style=""> 240     public void updateMarkdown(String text) {                                                            </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 241         if (mMarkdown != null) {                                                                         </span>
<span class="230805297842547942" onmouseenter="enter('230805297842547942');" onmouseout="out('230805297842547942');" style=""><abbr title=" 242             mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 242             mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244     }                                                                                                    </span>
<span  style=""> 245                                                                                                          </span>
<span class="2030146575069313446" onmouseenter="enter('2030146575069313446');" onmouseout="out('2030146575069313446');" style=""> 246     public static String getMarkdownFormattedContent(String cssContent, String sourceContent) {          </span>
<span class="2513493116501019750" onmouseenter="enter('2513493116501019750');" onmouseout="out('2513493116501019750');" style=""> 247         String header = &quot;&lt;html&gt;&lt;head&gt;&quot; +                                                                 </span>
<span class="3824471566064848514" onmouseenter="enter('3824471566064848514');" onmouseout="out('3824471566064848514');" style=""> 248                 &quot;&lt;link href=\&quot;https://fonts.googleapis.com/css?family=Noto+Serif\&quot; rel=\&quot;stylesheet\&quot;&gt;&quot; +</span>
<span class="-7278806205357860133" onmouseenter="enter('-7278806205357860133');" onmouseout="out('-7278806205357860133');" style=""> 249                 cssContent + &quot;&lt;/head&gt;&lt;body&gt;&quot;;                                                            </span>
<span  style=""> 250                                                                                                          </span>
<span class="-7895704813465822381" onmouseenter="enter('-7895704813465822381');" onmouseout="out('-7895704813465822381');" style=""> 251         String parsedMarkdown = new AndDown().markdownToHtml(                                            </span>
<span class="-6798947733513459772" onmouseenter="enter('-6798947733513459772');" onmouseout="out('-6798947733513459772');" style=""> 252                 sourceContent,                                                                           </span>
<span class="3839523846389915820" onmouseenter="enter('3839523846389915820');" onmouseout="out('3839523846389915820');" style=""> 253                 AndDown.HOEDOWN_EXT_STRIKETHROUGH | AndDown.HOEDOWN_EXT_FENCED_CODE |                    </span>
<span class="-2106863865776834087" onmouseenter="enter('-2106863865776834087');" onmouseout="out('-2106863865776834087');" style=""> 254                         AndDown.HOEDOWN_EXT_QUOTE | AndDown.HOEDOWN_EXT_TABLES,                          </span>
<span class="2055569359879886267" onmouseenter="enter('2055569359879886267');" onmouseout="out('2055569359879886267');" style=""> 255                 AndDown.HOEDOWN_HTML_ESCAPE                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 256         );                                                                                               </span>
<span  style=""> 257                                                                                                          </span>
<span class="1394645348869203401" onmouseenter="enter('1394645348869203401');" onmouseout="out('1394645348869203401');" style=""> 258         // Set auto alignment for lists, tables, and quotes based on language of start.                  </span>
<span class="7103750820259129737" onmouseenter="enter('7103750820259129737');" onmouseout="out('7103750820259129737');" style=""> 259         parsedMarkdown = parsedMarkdown                                                                  </span>
<span class="9207196088150204550" onmouseenter="enter('9207196088150204550');" onmouseout="out('9207196088150204550');" style=""> 260                 .replaceAll(&quot;&lt;ol&gt;&quot;, &quot;&lt;ol dir=\&quot;auto\&quot;&gt;&quot;)                                                 </span>
<span class="-7451241365596184853" onmouseenter="enter('-7451241365596184853');" onmouseout="out('-7451241365596184853');" style=""> 261                 .replaceAll(&quot;&lt;ul&gt;&quot;, &quot;&lt;ul dir=\&quot;auto\&quot;&gt;&quot;)                                                 </span>
<span class="3367018575773062425" onmouseenter="enter('3367018575773062425');" onmouseout="out('3367018575773062425');" style=""> 262                 .replaceAll(&quot;&lt;table&gt;&quot;, &quot;&lt;table dir=\&quot;auto\&quot;&gt;&quot;)                                           </span>
<span class="-4396081985590836307" onmouseenter="enter('-4396081985590836307');" onmouseout="out('-4396081985590836307');" style=""> 263                 .replaceAll(&quot;&lt;blockquote&gt;&quot;, &quot;&lt;blockquote dir=\&quot;auto\&quot;&gt;&quot;);                                </span>
<span  style=""> 264                                                                                                          </span>
<span class="-1969760236692593587" onmouseenter="enter('-1969760236692593587');" onmouseout="out('-1969760236692593587');" style=""> 265         return header + &quot;&lt;div class=\&quot;note-detail-markdown\&quot;&gt;&quot; + parsedMarkdown +                        </span>
<span class="-997374659678670563" onmouseenter="enter('-997374659678670563');" onmouseout="out('-997374659678670563');" style=""> 266                 &quot;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267     }                                                                                                    </span>
<span  style=""> 268                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style=""> 269     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="1448652766919907439" onmouseenter="enter('1448652766919907439');" onmouseout="out('1448652766919907439');" style=""> 270         private SoftReference&lt;NoteMarkdownFragment&gt; mNoteMarkdownFragmentReference;                      </span>
<span  style=""> 271                                                                                                          </span>
<span class="-8419210300923433889" onmouseenter="enter('-8419210300923433889');" onmouseout="out('-8419210300923433889');" style=""> 272         private LoadNoteTask(NoteMarkdownFragment context) {                                             </span>
<span class="2363516871652359654" onmouseenter="enter('2363516871652359654');" onmouseout="out('2363516871652359654');" style=""> 273             mNoteMarkdownFragmentReference = new SoftReference&lt;&gt;(context);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274         }                                                                                                </span>
<span  style=""> 275                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 276         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 277         protected void onPreExecute() {                                                                  </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 278             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style=""> 279             fragment.mIsLoadingNote = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280         }                                                                                                </span>
<span  style=""> 281                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 282         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 283         protected Void doInBackground(String... args) {                                                  </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 284             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-1155301544955899202" onmouseenter="enter('-1155301544955899202');" onmouseout="out('-1155301544955899202');" style=""> 285             FragmentActivity activity = fragment.getActivity();                                          </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 286             if (activity == null) {                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 287                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288             }                                                                                            </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 289             String noteID = args[0];                                                                     </span>
<span class="3849441011104911255" onmouseenter="enter('3849441011104911255');" onmouseout="out('3849441011104911255');" style=""> 290             Simplenote application = ((Simplenote) (activity.getApplication()));                         </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 291             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 292             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style=""> 293                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style=""> 294             } catch (BucketObjectMissingException exception) {                                           </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 295                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 297             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298         }                                                                                                </span>
<span  style=""> 299                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 300         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 301         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 302             NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                        </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style=""> 303             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style=""> 304             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307 }                                                                                                        </span>












































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   3  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   4  import android.os.Bundle;                                                                                         </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">   5  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">   6  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">   7  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">   8  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">   9  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  10  import android.view.ViewGroup;                                                                                    </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  11  import android.webkit.WebResourceRequest;                                                                         </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  12  import android.webkit.WebView;                                                                                    </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  13  import android.webkit.WebViewClient;                                                                              </span>
<span  style="">  14                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  15  import androidx.annotation.NonNull;                                                                               </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  16  import androidx.core.view.MenuCompat;                                                                             </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  17  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="3871271816129224755" onmouseenter="enter('3871271816129224755');" onmouseout="out('3871271816129224755');" style="">  18  import androidx.fragment.app.FragmentActivity;                                                                    </span>
<span  style="">  19                                                                                                                    </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  20  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  21  import com.automattic.simplenote.utils.AppLog;                                                                    </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  22  import com.automattic.simplenote.utils.AppLog.Type;                                                               </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  23  import com.automattic.simplenote.utils.BrowserUtils;                                                              </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  24  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  25  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  26  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  27  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  28  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  29  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="">  30  import com.commonsware.cwac.anddown.AndDown;                                                                      </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  31  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  32  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  33  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span  style="">  34                                                                                                                    </span>
<span class="-9136849050553086203" onmouseenter="enter('-9136849050553086203');" onmouseout="out('-9136849050553086203');" style="">  35  import java.lang.ref.SoftReference;                                                                               </span>
<span  style="">  36                                                                                                                    </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  37  import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                           </span>
<span  style="">  38                                                                                                                    </span>
<span class="-1294991214119301931" onmouseenter="enter('-1294991214119301931');" onmouseout="out('-1294991214119301931');" style="">  39  public class NoteMarkdownFragment extends Fragment implements Bucket.Listener&lt;Note&gt; {                             </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  40      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span  style="">  41                                                                                                                    </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  42      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  43      private Note mNote;                                                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="">  44      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="">  45      private WebView mMarkdown;                                                                                    </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style="">  46      private boolean mIsLoadingNote;                                                                               </span>
<span  style="">  47                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style="">  49      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="7034917290488384671" onmouseenter="enter('7034917290488384671');" onmouseout="out('7034917290488384671');" style="">  50          inflater.inflate(R.menu.note_markdown, menu);                                                             </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style="">  51          MenuCompat.setGroupDividerEnabled(menu, true);                                                            </span>
<span  style="">  52                                                                                                                    </span>
<span class="-8377308209077836358" onmouseenter="enter('-8377308209077836358');" onmouseout="out('-8377308209077836358');" style="">  53          DrawableUtils.tintMenuWithAttribute(                                                                      </span>
<span class="-1922245487729536443" onmouseenter="enter('-1922245487729536443');" onmouseout="out('-1922245487729536443');" style="">  54              requireContext(),                                                                                     </span>
<span class="2802851135583918911" onmouseenter="enter('2802851135583918911');" onmouseout="out('2802851135583918911');" style="">  55              menu,                                                                                                 </span>
<span class="-2842695662732271949" onmouseenter="enter('-2842695662732271949');" onmouseout="out('-2842695662732271949');" style="">  56              R.attr.toolbarIconColor                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">  57          );                                                                                                        </span>
<span  style="">  58                                                                                                                    </span>
<span class="-2756778567974340724" onmouseenter="enter('-2756778567974340724');" onmouseout="out('-2756778567974340724');" style="">  59          for (int i = 0; i &lt; menu.size(); i++) {                                                                   </span>
<span class="9102652859734412479" onmouseenter="enter('9102652859734412479');" onmouseout="out('9102652859734412479');" style="">  60              MenuItem item = menu.getItem(i);                                                                      </span>
<span class="6288253845963077021" onmouseenter="enter('6288253845963077021');" onmouseout="out('6288253845963077021');" style="">  61              DrawableUtils.setMenuItemAlpha(item, 0.3);  // 0.3 is 30% opacity.                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62          }                                                                                                         </span>
<span  style="">  63                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">  64          if (mNote != null) {                                                                                      </span>
<span class="-6829067213176119658" onmouseenter="enter('-6829067213176119658');" onmouseout="out('-6829067213176119658');" style="">  65              MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_info);                                       </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style="">  66              viewPublishedNoteItem.setVisible(true);                                                               </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style="">  67              MenuItem trashItem = menu.findItem(R.id.menu_trash);                                                  </span>
<span  style="">  68                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="">  69              if (mNote.isDeleted()) {                                                                              </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style="">  70                  trashItem.setTitle(R.string.restore);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  71              } else {                                                                                              </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style="">  72                  trashItem.setTitle(R.string.trash);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  73              }                                                                                                     </span>
<span  style="">  74                                                                                                                    </span>
<span class="-6442626485066357897" onmouseenter="enter('-6442626485066357897');" onmouseout="out('-6442626485066357897');" style="">  75              DrawableUtils.tintMenuItemWithAttribute(getActivity(), trashItem, R.attr.toolbarIconColor);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76          }                                                                                                         </span>
<span  style="">  77                                                                                                                    </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style="">  78          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79      }                                                                                                             </span>
<span  style="">  80                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  81      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style="">  82      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="536061208326466715" onmouseenter="enter('536061208326466715');" onmouseout="out('536061208326466715');" style="">  83          AppLog.add(Type.SCREEN, &quot;Created (NoteMarkdownFragment)&quot;);                                                </span>
<span class="-6182689483737118349" onmouseenter="enter('-6182689483737118349');" onmouseout="out('-6182689483737118349');" style="">  84          mNotesBucket = ((Simplenote) requireActivity().getApplication()).getNotesBucket();                        </span>
<span  style="">  85                                                                                                                    </span>
<span class="-981035472147970089" onmouseenter="enter('-981035472147970089');" onmouseout="out('-981035472147970089');" style="">  86          // Load note if we were passed an ID.                                                                     </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="">  87          Bundle arguments = getArguments();                                                                        </span>
<span  style="">  88                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="">  89          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="">  90              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style="">  91              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92          }                                                                                                         </span>
<span  style="">  93                                                                                                                    </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style="">  94          setHasOptionsMenu(true);                                                                                  </span>
<span class="6164426386764094453" onmouseenter="enter('6164426386764094453');" onmouseout="out('6164426386764094453');" style="">  95          View layout = inflater.inflate(R.layout.fragment_note_markdown, container, false);                        </span>
<span class="-71913177359136438" onmouseenter="enter('-71913177359136438');" onmouseout="out('-71913177359136438');" style="">  96          mMarkdown = layout.findViewById(R.id.markdown);                                                           </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style="">  97          mMarkdown.setWebViewClient(                                                                               </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style="">  98              new WebViewClient() {                                                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  99                  @Override                                                                                         </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style=""> 100                  public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){                </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 101                      String url = request.getUrl().toString();                                                     </span>
<span  style=""> 102                                                                                                                    </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style=""> 103                      if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                                </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""> 104                          SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 105                      } else {                                                                                      </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 106                          BrowserUtils.launchBrowserOrShowError(requireContext(), url);                             </span>


















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107                      }                                                                                             </span>
<span  style=""> 108                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 109                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111              }                                                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 112          );                                                                                                        </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 113 -        mCss = ThemeUtils.isLightTheme(requireContext())                                                          </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 114 -            ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                             </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 115 -            : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                             </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +        mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));          </span>

















<span class="-6718836449165012481" onmouseenter="enter('-6718836449165012481');" onmouseout="out('-6718836449165012481');" style=""> 117          return layout;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118      }                                                                                                             </span>
<span  style=""> 119                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 120      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 121      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 122          switch (item.getItemId()) {                                                                               </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 123              case android.R.id.home:                                                                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 124                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 125                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126                  }                                                                                                 </span>
<span  style=""> 127                                                                                                                    </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 128                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 129                  return true;                                                                                      </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 130              case R.id.menu_trash:                                                                                 </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 131                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 132                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133                  }                                                                                                 </span>
<span  style=""> 134                                                                                                                    </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 135                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 136                  return true;                                                                                      </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 137              case R.id.menu_copy_internal:                                                                         </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 138                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 139                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140                  }                                                                                                 </span>
<span  style=""> 141                                                                                                                    </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 142                  if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 142                  if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.geðŸ”µ</abbr></span>
<span class="-1969547816529952145" onmouseenter="enter('-1969547816529952145');" onmouseout="out('-1969547816529952145');" style=""> 143                      Snackbar.make(mMarkdown, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 144                  } else {                                                                                          </span>
<span class="-8785267208974710977" onmouseenter="enter('-8785267208974710977');" onmouseout="out('-8785267208974710977');" style=""> 145                      Snackbar.make(mMarkdown, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146                  }                                                                                                 </span>
<span  style=""> 147                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 148                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 149              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 150                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152      }                                                                                                             </span>
<span  style=""> 153                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 154      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 155          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 156          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157      }                                                                                                             </span>
<span  style=""> 158                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159      @Override                                                                                                     </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 160      public void onPrepareOptionsMenu(@NonNull Menu menu) {                                                        </span>
<span class="-690855974314230871" onmouseenter="enter('-690855974314230871');" onmouseout="out('-690855974314230871');" style=""> 161          // Disable share and delete actions until note is loaded.                                                 </span>
<span class="1474151461246039894" onmouseenter="enter('1474151461246039894');" onmouseout="out('1474151461246039894');" style=""> 162          if (mIsLoadingNote) {                                                                                     </span>
<span class="2312221319952771602" onmouseenter="enter('2312221319952771602');" onmouseout="out('2312221319952771602');" style=""> 163              menu.findItem(R.id.menu_trash).setEnabled(false);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 164          } else {                                                                                                  </span>
<span class="4050107358875467583" onmouseenter="enter('4050107358875467583');" onmouseout="out('4050107358875467583');" style=""> 165              menu.findItem(R.id.menu_trash).setEnabled(true);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166          }                                                                                                         </span>


<span  style=""> 167                                                                                                                    </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 168          MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                          </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 169          MenuItem publishItem = menu.findItem(R.id.menu_publish);                                                  </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 170          MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                                    </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 171          MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                                </span>
<span class="3808692790991764081" onmouseenter="enter('3808692790991764081');" onmouseout="out('3808692790991764081');" style=""> 172          MenuItem copyLinkInternalItem = menu.findItem(R.id.menu_copy_internal);                                   </span>
<span  style=""> 173                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 174          if (mNote != null) {                                                                                      </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 175              pinItem.setChecked(mNote.isPinned());                                                                 </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 176              publishItem.setChecked(mNote.isPublished());                                                          </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 177              markdownItem.setChecked(mNote.isMarkdownEnabled());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178          }                                                                                                         </span>
<span  style=""> 179                                                                                                                    </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 180          pinItem.setEnabled(false);                                                                                </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 181          publishItem.setEnabled(false);                                                                            </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 182          copyLinkItem.setEnabled(false);                                                                           </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 183          markdownItem.setEnabled(false);                                                                           </span>
<span class="5485601103916041556" onmouseenter="enter('5485601103916041556');" onmouseout="out('5485601103916041556');" style=""> 184          copyLinkInternalItem.setEnabled(true);                                                                    </span>
<span  style=""> 185                                                                                                                    </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 186          super.onPrepareOptionsMenu(menu);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187      }                                                                                                             </span>
<span  style=""> 188                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 189      @Override                                                                                                     </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 190      public void onDestroy() {                                                                                     </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 191          super.onDestroy();                                                                                        </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 192          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 193          mNotesBucket.stop();                                                                                      </span>
<span class="-1353190363754857147" onmouseenter="enter('-1353190363754857147');" onmouseout="out('-1353190363754857147');" style=""> 194          AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteMarkdownFragment)&quot;);                                      </span>

<span class="-2497681893087030534" onmouseenter="enter('-2497681893087030534');" onmouseout="out('-2497681893087030534');" style=""> 195          AppLog.add(Type.SCREEN, &quot;Destroyed (NoteMarkdownFragment)&quot;);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196      }                                                                                                             </span>
<span  style=""> 197                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 198      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 199      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 200          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 201          mNotesBucket.start();                                                                                     </span>
<span class="-5621039100128359554" onmouseenter="enter('-5621039100128359554');" onmouseout="out('-5621039100128359554');" style=""> 202          AppLog.add(Type.SYNC, &quot;Started note bucket (NoteMarkdownFragment)&quot;);                                      </span>

<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 203          mNotesBucket.addListener(this);                                                                           </span>

<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 204          AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                                  </span>
<span class="-801732108510700804" onmouseenter="enter('-801732108510700804');" onmouseout="out('-801732108510700804');" style=""> 205          AppLog.add(Type.SCREEN, &quot;Resumed (NoteMarkdownFragment)&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206      }                                                                                                             </span>
<span  style=""> 207                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 208      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 209      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210      }                                                                                                             </span>
<span  style=""> 211                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 212      @Override                                                                                                     </span>
<span class="-1660268234445911218" onmouseenter="enter('-1660268234445911218');" onmouseout="out('-1660268234445911218');" style=""> 213      public void onDeleteObject(Bucket&lt;Note&gt; bucket, Note note) {                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214      }                                                                                                             </span>
<span  style=""> 215                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 216      @Override                                                                                                     </span>
<span class="7988016775193413808" onmouseenter="enter('7988016775193413808');" onmouseout="out('7988016775193413808');" style=""> 217      public void onNetworkChange(Bucket&lt;Note&gt; bucket, Bucket.ChangeType type, String key) {                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218      }                                                                                                             </span>
<span  style=""> 219                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 220      @Override                                                                                                     </span>
<span class="-3176015151927698771" onmouseenter="enter('-3176015151927698771');" onmouseout="out('-3176015151927698771');" style=""> 221      public void onSaveObject(Bucket&lt;Note&gt; bucket, Note note) {                                                    </span>
<span class="-6335499192552625484" onmouseenter="enter('-6335499192552625484');" onmouseout="out('-6335499192552625484');" style=""> 222          if (note.equals(mNote)) {                                                                                 </span>
<span class="2737653741393130317" onmouseenter="enter('2737653741393130317');" onmouseout="out('2737653741393130317');" style=""> 223              mNote = note;                                                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 224              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225          }                                                                                                         </span>
<span  style=""> 226                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style=""> 227          AppLog.add(                                                                                               </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style=""> 228              Type.SYNC,                                                                                            </span>
<span class="2539944630544033834" onmouseenter="enter('2539944630544033834');" onmouseout="out('2539944630544033834');" style=""> 229              &quot;Saved note callback in NoteMarkdownFragment (ID: &quot; + note.getSimperiumKey() +                        </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style=""> 230                  &quot; / Title: &quot; + note.getTitle() +                                                                  </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style=""> 231                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                             </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style=""> 232                  &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 233          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234      }                                                                                                             </span>
<span  style=""> 235                                                                                                                    </span>








<span class="-7586955142242224862" onmouseenter="enter('-7586955142242224862');" onmouseout="out('-7586955142242224862');" style=""> 236      public void updateMarkdown(String text) {                                                                     </span>
<span class="230805297842547942" onmouseenter="enter('230805297842547942');" onmouseout="out('230805297842547942');" style=""> 237          mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utf-8&quot;, null); </span>



<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238      }                                                                                                             </span>
<span  style=""> 239                                                                                                                    </span>
<span class="2030146575069313446" onmouseenter="enter('2030146575069313446');" onmouseout="out('2030146575069313446');" style=""> 240      public static String getMarkdownFormattedContent(String cssContent, String sourceContent) {                   </span>
<span class="2513493116501019750" onmouseenter="enter('2513493116501019750');" onmouseout="out('2513493116501019750');" style=""> 241          String header = &quot;&lt;html&gt;&lt;head&gt;&quot; +                                                                          </span>
<span class="3824471566064848514" onmouseenter="enter('3824471566064848514');" onmouseout="out('3824471566064848514');" style=""> 242                  &quot;&lt;link href=\&quot;https://fonts.googleapis.com/css?family=Noto+Serif\&quot; rel=\&quot;stylesheet\&quot;&gt;&quot; +         </span>
<span class="-7278806205357860133" onmouseenter="enter('-7278806205357860133');" onmouseout="out('-7278806205357860133');" style=""> 243                  cssContent + &quot;&lt;/head&gt;&lt;body&gt;&quot;;                                                                     </span>
<span  style=""> 244                                                                                                                    </span>
<span class="-7895704813465822381" onmouseenter="enter('-7895704813465822381');" onmouseout="out('-7895704813465822381');" style=""> 245          String parsedMarkdown = new AndDown().markdownToHtml(                                                     </span>
<span class="-6798947733513459772" onmouseenter="enter('-6798947733513459772');" onmouseout="out('-6798947733513459772');" style=""> 246                  sourceContent,                                                                                    </span>
<span class="3839523846389915820" onmouseenter="enter('3839523846389915820');" onmouseout="out('3839523846389915820');" style=""> 247                  AndDown.HOEDOWN_EXT_STRIKETHROUGH | AndDown.HOEDOWN_EXT_FENCED_CODE |                             </span>
<span class="-2106863865776834087" onmouseenter="enter('-2106863865776834087');" onmouseout="out('-2106863865776834087');" style=""> 248                          AndDown.HOEDOWN_EXT_QUOTE | AndDown.HOEDOWN_EXT_TABLES,                                   </span>
<span class="2055569359879886267" onmouseenter="enter('2055569359879886267');" onmouseout="out('2055569359879886267');" style=""> 249                  AndDown.HOEDOWN_HTML_ESCAPE                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 250          );                                                                                                        </span>
<span  style=""> 251                                                                                                                    </span>
<span class="1394645348869203401" onmouseenter="enter('1394645348869203401');" onmouseout="out('1394645348869203401');" style=""> 252          // Set auto alignment for lists, tables, and quotes based on language of start.                           </span>
<span class="7103750820259129737" onmouseenter="enter('7103750820259129737');" onmouseout="out('7103750820259129737');" style=""> 253          parsedMarkdown = parsedMarkdown                                                                           </span>
<span class="9207196088150204550" onmouseenter="enter('9207196088150204550');" onmouseout="out('9207196088150204550');" style=""> 254                  .replaceAll(&quot;&lt;ol&gt;&quot;, &quot;&lt;ol dir=\&quot;auto\&quot;&gt;&quot;)                                                          </span>
<span class="-7451241365596184853" onmouseenter="enter('-7451241365596184853');" onmouseout="out('-7451241365596184853');" style=""> 255                  .replaceAll(&quot;&lt;ul&gt;&quot;, &quot;&lt;ul dir=\&quot;auto\&quot;&gt;&quot;)                                                          </span>
<span class="3367018575773062425" onmouseenter="enter('3367018575773062425');" onmouseout="out('3367018575773062425');" style=""> 256                  .replaceAll(&quot;&lt;table&gt;&quot;, &quot;&lt;table dir=\&quot;auto\&quot;&gt;&quot;)                                                    </span>
<span class="-4396081985590836307" onmouseenter="enter('-4396081985590836307');" onmouseout="out('-4396081985590836307');" style=""> 257                  .replaceAll(&quot;&lt;blockquote&gt;&quot;, &quot;&lt;blockquote dir=\&quot;auto\&quot;&gt;&quot;);                                         </span>
<span  style=""> 258                                                                                                                    </span>
<span class="-1969760236692593587" onmouseenter="enter('-1969760236692593587');" onmouseout="out('-1969760236692593587');" style=""> 259          return header + &quot;&lt;div class=\&quot;note-detail-markdown\&quot;&gt;&quot; + parsedMarkdown +                                 </span>
<span class="-997374659678670563" onmouseenter="enter('-997374659678670563');" onmouseout="out('-997374659678670563');" style=""> 260                  &quot;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261      }                                                                                                             </span>
<span  style=""> 262                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style=""> 263      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="1448652766919907439" onmouseenter="enter('1448652766919907439');" onmouseout="out('1448652766919907439');" style=""> 264          private SoftReference&lt;NoteMarkdownFragment&gt; mNoteMarkdownFragmentReference;                               </span>
<span  style=""> 265                                                                                                                    </span>
<span class="-8419210300923433889" onmouseenter="enter('-8419210300923433889');" onmouseout="out('-8419210300923433889');" style=""> 266          private LoadNoteTask(NoteMarkdownFragment context) {                                                      </span>
<span class="2363516871652359654" onmouseenter="enter('2363516871652359654');" onmouseout="out('2363516871652359654');" style=""> 267              mNoteMarkdownFragmentReference = new SoftReference&lt;&gt;(context);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268          }                                                                                                         </span>
<span  style=""> 269                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 270          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 271          protected void onPreExecute() {                                                                           </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 272              NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                                 </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style=""> 273              fragment.mIsLoadingNote = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274          }                                                                                                         </span>
<span  style=""> 275                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 276          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 277          protected Void doInBackground(String... args) {                                                           </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 278              NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                                 </span>
<span class="-1155301544955899202" onmouseenter="enter('-1155301544955899202');" onmouseout="out('-1155301544955899202');" style=""> 279              FragmentActivity activity = fragment.getActivity();                                                   </span>
<span  style=""> 280                                                                                                                    </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 281              if (activity == null) {                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 282                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283              }                                                                                                     </span>
<span  style=""> 284                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 285              String noteID = args[0];                                                                              </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 286              Simplenote application = (Simplenote) activity.getApplication();                                      </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 287              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style=""> 288                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 289              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style=""> 290                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style=""> 291              } catch (BucketObjectMissingException exception) {                                                    </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 292                  // TODO: Handle a missing note                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293              }                                                                                                     </span>
<span  style=""> 294                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 295              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296          }                                                                                                         </span>
<span  style=""> 297                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 298          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 299          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 300              NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                                 </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style=""> 301              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style=""> 302              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   3  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   4  import android.os.Bundle;                                                                                         </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">   5  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">   6  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">   7  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">   8  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">   9  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  10  import android.view.ViewGroup;                                                                                    </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  11  import android.webkit.WebResourceRequest;                                                                         </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  12  import android.webkit.WebView;                                                                                    </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  13  import android.webkit.WebViewClient;                                                                              </span>
<span  style="">  14                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  15  import androidx.annotation.NonNull;                                                                               </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  16  import androidx.core.view.MenuCompat;                                                                             </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  17  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="3871271816129224755" onmouseenter="enter('3871271816129224755');" onmouseout="out('3871271816129224755');" style="">  18  import androidx.fragment.app.FragmentActivity;                                                                    </span>
<span  style="">  19                                                                                                                    </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  20  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  21  import com.automattic.simplenote.utils.AppLog;                                                                    </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  22  import com.automattic.simplenote.utils.AppLog.Type;                                                               </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  23  import com.automattic.simplenote.utils.BrowserUtils;                                                              </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  24  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  25  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  26  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  27  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  28  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  29  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="">  30  import com.commonsware.cwac.anddown.AndDown;                                                                      </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  31  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  32  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  33  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span  style="">  34                                                                                                                    </span>
<span class="-9136849050553086203" onmouseenter="enter('-9136849050553086203');" onmouseout="out('-9136849050553086203');" style="">  35  import java.lang.ref.SoftReference;                                                                               </span>
<span  style="">  36                                                                                                                    </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  37  import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                           </span>
<span  style="">  38                                                                                                                    </span>
<span class="-1294991214119301931" onmouseenter="enter('-1294991214119301931');" onmouseout="out('-1294991214119301931');" style="">  39  public class NoteMarkdownFragment extends Fragment implements Bucket.Listener&lt;Note&gt; {                             </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  40      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span  style="">  41                                                                                                                    </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  42      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  43      private Note mNote;                                                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="">  44      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="">  45      private WebView mMarkdown;                                                                                    </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style="">  46      private boolean mIsLoadingNote;                                                                               </span>
<span  style="">  47                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style="">  49      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="7034917290488384671" onmouseenter="enter('7034917290488384671');" onmouseout="out('7034917290488384671');" style="">  50          inflater.inflate(R.menu.note_markdown, menu);                                                             </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style="">  51          MenuCompat.setGroupDividerEnabled(menu, true);                                                            </span>
<span  style="">  52                                                                                                                    </span>
<span class="-8377308209077836358" onmouseenter="enter('-8377308209077836358');" onmouseout="out('-8377308209077836358');" style="">  53          DrawableUtils.tintMenuWithAttribute(                                                                      </span>
<span class="-1922245487729536443" onmouseenter="enter('-1922245487729536443');" onmouseout="out('-1922245487729536443');" style="">  54              requireContext(),                                                                                     </span>
<span class="2802851135583918911" onmouseenter="enter('2802851135583918911');" onmouseout="out('2802851135583918911');" style="">  55              menu,                                                                                                 </span>
<span class="-2842695662732271949" onmouseenter="enter('-2842695662732271949');" onmouseout="out('-2842695662732271949');" style="">  56              R.attr.toolbarIconColor                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">  57          );                                                                                                        </span>
<span  style="">  58                                                                                                                    </span>
<span class="-2756778567974340724" onmouseenter="enter('-2756778567974340724');" onmouseout="out('-2756778567974340724');" style="">  59          for (int i = 0; i &lt; menu.size(); i++) {                                                                   </span>
<span class="9102652859734412479" onmouseenter="enter('9102652859734412479');" onmouseout="out('9102652859734412479');" style="">  60              MenuItem item = menu.getItem(i);                                                                      </span>
<span class="6288253845963077021" onmouseenter="enter('6288253845963077021');" onmouseout="out('6288253845963077021');" style="">  61              DrawableUtils.setMenuItemAlpha(item, 0.3);  // 0.3 is 30% opacity.                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62          }                                                                                                         </span>
<span  style="">  63                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">  64          if (mNote != null) {                                                                                      </span>
<span class="-6829067213176119658" onmouseenter="enter('-6829067213176119658');" onmouseout="out('-6829067213176119658');" style="">  65              MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_info);                                       </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style="">  66              viewPublishedNoteItem.setVisible(true);                                                               </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style="">  67              MenuItem trashItem = menu.findItem(R.id.menu_trash);                                                  </span>
<span  style="">  68                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="">  69              if (mNote.isDeleted()) {                                                                              </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style="">  70                  trashItem.setTitle(R.string.restore);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  71              } else {                                                                                              </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style="">  72                  trashItem.setTitle(R.string.trash);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  73              }                                                                                                     </span>
<span  style="">  74                                                                                                                    </span>
<span class="-6442626485066357897" onmouseenter="enter('-6442626485066357897');" onmouseout="out('-6442626485066357897');" style="">  75              DrawableUtils.tintMenuItemWithAttribute(getActivity(), trashItem, R.attr.toolbarIconColor);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76          }                                                                                                         </span>
<span  style="">  77                                                                                                                    </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style="">  78          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79      }                                                                                                             </span>
<span  style="">  80                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  81      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style="">  82      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="536061208326466715" onmouseenter="enter('536061208326466715');" onmouseout="out('536061208326466715');" style="">  83          AppLog.add(Type.SCREEN, &quot;Created (NoteMarkdownFragment)&quot;);                                                </span>
<span class="-6182689483737118349" onmouseenter="enter('-6182689483737118349');" onmouseout="out('-6182689483737118349');" style="">  84          mNotesBucket = ((Simplenote) requireActivity().getApplication()).getNotesBucket();                        </span>
<span  style="">  85                                                                                                                    </span>
<span class="-981035472147970089" onmouseenter="enter('-981035472147970089');" onmouseout="out('-981035472147970089');" style="">  86          // Load note if we were passed an ID.                                                                     </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="">  87          Bundle arguments = getArguments();                                                                        </span>
<span  style="">  88                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="">  89          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="">  90              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style="">  91              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92          }                                                                                                         </span>
<span  style="">  93                                                                                                                    </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style="">  94          setHasOptionsMenu(true);                                                                                  </span>
<span class="6164426386764094453" onmouseenter="enter('6164426386764094453');" onmouseout="out('6164426386764094453');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  95 -        View layout = inflater.inflate(R.layout.fragment_note_markdown, container, false);                        </span>
<span class="-71913177359136438" onmouseenter="enter('-71913177359136438');" onmouseout="out('-71913177359136438');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  96 -        mMarkdown = layout.findViewById(R.id.markdown);                                                           </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  97 -        mMarkdown.setWebViewClient(                                                                               </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  98 -            new WebViewClient() {                                                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  99 -                @Override                                                                                         </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 100 -                public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){                </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 101 -                    String url = request.getUrl().toString();                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 102 -                                                                                                                  </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 103 -                    if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                                </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 104 -                        SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 105 -                    } else {                                                                                      </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 106 -                        BrowserUtils.launchBrowserOrShowError(requireContext(), url);                             </span>
<span class="7650276599659021163" onmouseenter="enter('7650276599659021163');" onmouseout="out('7650276599659021163');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 107 +        View layout;                                                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 108 +                                                                                                                  </span>
<span class="-1005326724349715830" onmouseenter="enter('-1005326724349715830');" onmouseout="out('-1005326724349715830');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 109 +        if (BrowserUtils.isWebViewInstalled(requireContext())) {                                                  </span>
<span class="-4734724703035025703" onmouseenter="enter('-4734724703035025703');" onmouseout="out('-4734724703035025703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 110 +            layout = inflater.inflate(R.layout.fragment_note_markdown, container, false);                         </span>
<span class="-71913177359136438" onmouseenter="enter('-71913177359136438');" onmouseout="out('-71913177359136438');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +            mMarkdown = layout.findViewById(R.id.markdown);                                                       </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 112 +            mMarkdown.setWebViewClient(                                                                           </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 113 +                new WebViewClient() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 114 +                    @Override                                                                                     </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 115 +                    public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){            </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +                        String url = request.getUrl().toString();                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +                                                                                                                  </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +                        if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                            </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 119 +                            SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 119 +                            SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;))ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +                        } else {                                                                                  </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 121 +                            BrowserUtils.launchBrowserOrShowError(requireContext(), url);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 122 +                        }                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 123 +                                                                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +                        return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125                      }                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 126 -                                                                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 127 -                    return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 128 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 129 -            }                                                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 130 -        );                                                                                                        </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 131 -        mCss = ThemeUtils.isLightTheme(requireContext())                                                          </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 132 -            ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                             </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 133 -            : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +                }                                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +            );                                                                                                    </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +            mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 137 +                ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                         </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 138 +                : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 139 +        } else {                                                                                                  </span>
<span class="824226046488103793" onmouseenter="enter('824226046488103793');" onmouseout="out('824226046488103793');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 140 +            layout = inflater.inflate(R.layout.fragment_note_error, container, false);                            </span>
<span class="4154857411582064154" onmouseenter="enter('4154857411582064154');" onmouseout="out('4154857411582064154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 141 +            layout.findViewById(R.id.error).setVisibility(View.VISIBLE);                                          </span>
<span class="8150143839592336677" onmouseenter="enter('8150143839592336677');" onmouseout="out('8150143839592336677');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 142 +            layout.findViewById(R.id.button).setOnClickListener(                                                  </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 143 +                new View.OnClickListener() {                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 144 +                    @Override                                                                                     </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 145 +                    public void onClick(View v) {                                                                 </span>
<span class="-6437015632434493624" onmouseenter="enter('-6437015632434493624');" onmouseout="out('-6437015632434493624');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 146 +                        BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEW);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 147 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 148 +                }                                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +            );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 150 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 151 +                                                                                                                  </span>
<span class="-6718836449165012481" onmouseenter="enter('-6718836449165012481');" onmouseout="out('-6718836449165012481');" style=""> 152          return layout;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153      }                                                                                                             </span>
<span  style=""> 154                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 155      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 156      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 157          switch (item.getItemId()) {                                                                               </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 158              case android.R.id.home:                                                                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 159                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 160                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161                  }                                                                                                 </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 163                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 164                  return true;                                                                                      </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 165              case R.id.menu_trash:                                                                                 </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 166                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 167                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168                  }                                                                                                 </span>
<span  style=""> 169                                                                                                                    </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 170                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 171                  return true;                                                                                      </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 172              case R.id.menu_copy_internal:                                                                         </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 173                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 174                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175                  }                                                                                                 </span>
<span  style=""> 176                                                                                                                    </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 177                  if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 177                  if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.geðŸ”µ</abbr></span>
<span class="-1969547816529952145" onmouseenter="enter('-1969547816529952145');" onmouseout="out('-1969547816529952145');" style=""> 178                      Snackbar.make(mMarkdown, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 179                  } else {                                                                                          </span>
<span class="-8785267208974710977" onmouseenter="enter('-8785267208974710977');" onmouseout="out('-8785267208974710977');" style=""> 180                      Snackbar.make(mMarkdown, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181                  }                                                                                                 </span>
<span  style=""> 182                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 183                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 184              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 185                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187      }                                                                                                             </span>
<span  style=""> 188                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 189      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 190          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 191          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192      }                                                                                                             </span>
<span  style=""> 193                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 194      @Override                                                                                                     </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 195      public void onPrepareOptionsMenu(@NonNull Menu menu) {                                                        </span>
<span class="-690855974314230871" onmouseenter="enter('-690855974314230871');" onmouseout="out('-690855974314230871');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 196 -        // Disable share and delete actions until note is loaded.                                                 </span>
<span class="1474151461246039894" onmouseenter="enter('1474151461246039894');" onmouseout="out('1474151461246039894');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 197 -        if (mIsLoadingNote) {                                                                                     </span>
<span class="2312221319952771602" onmouseenter="enter('2312221319952771602');" onmouseout="out('2312221319952771602');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 198 -            menu.findItem(R.id.menu_trash).setEnabled(false);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 199 -        } else {                                                                                                  </span>
<span class="4050107358875467583" onmouseenter="enter('4050107358875467583');" onmouseout="out('4050107358875467583');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 200 -            menu.findItem(R.id.menu_trash).setEnabled(true);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 201 -        }                                                                                                         </span>
<span class="3359289055940257871" onmouseenter="enter('3359289055940257871');" onmouseout="out('3359289055940257871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 202 +        // Disable trash action until note is loaded.                                                             </span>
<span class="-6997755512109212930" onmouseenter="enter('-6997755512109212930');" onmouseout="out('-6997755512109212930');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 203 +        menu.findItem(R.id.menu_trash).setEnabled(!mIsLoadingNote);                                               </span>
<span  style=""> 204                                                                                                                    </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 205          MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                          </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 206          MenuItem publishItem = menu.findItem(R.id.menu_publish);                                                  </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 207          MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                                    </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 208          MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                                </span>
<span class="3808692790991764081" onmouseenter="enter('3808692790991764081');" onmouseout="out('3808692790991764081');" style=""> 209          MenuItem copyLinkInternalItem = menu.findItem(R.id.menu_copy_internal);                                   </span>
<span  style=""> 210                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 211          if (mNote != null) {                                                                                      </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 212              pinItem.setChecked(mNote.isPinned());                                                                 </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 213              publishItem.setChecked(mNote.isPublished());                                                          </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 214              markdownItem.setChecked(mNote.isMarkdownEnabled());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215          }                                                                                                         </span>
<span  style=""> 216                                                                                                                    </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 217          pinItem.setEnabled(false);                                                                                </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 218          publishItem.setEnabled(false);                                                                            </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 219          copyLinkItem.setEnabled(false);                                                                           </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 220          markdownItem.setEnabled(false);                                                                           </span>
<span class="5485601103916041556" onmouseenter="enter('5485601103916041556');" onmouseout="out('5485601103916041556');" style=""> 221          copyLinkInternalItem.setEnabled(true);                                                                    </span>
<span  style=""> 222                                                                                                                    </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 223          super.onPrepareOptionsMenu(menu);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224      }                                                                                                             </span>
<span  style=""> 225                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 226      @Override                                                                                                     </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 227      public void onDestroy() {                                                                                     </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 228          super.onDestroy();                                                                                        </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 229          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 230 -        mNotesBucket.stop();                                                                                      </span>
<span class="-1353190363754857147" onmouseenter="enter('-1353190363754857147');" onmouseout="out('-1353190363754857147');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 231 -        AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteMarkdownFragment)&quot;);                                      </span>
<span class="-722641886353457714" onmouseenter="enter('-722641886353457714');" onmouseout="out('-722641886353457714');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 232 +        AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteMarkdownFragment)&quot;);                             </span>
<span class="-2497681893087030534" onmouseenter="enter('-2497681893087030534');" onmouseout="out('-2497681893087030534');" style=""> 233          AppLog.add(Type.SCREEN, &quot;Destroyed (NoteMarkdownFragment)&quot;);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234      }                                                                                                             </span>
<span  style=""> 235                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 236      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 237      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 238          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 239 -        mNotesBucket.start();                                                                                     </span>
<span class="-5621039100128359554" onmouseenter="enter('-5621039100128359554');" onmouseout="out('-5621039100128359554');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 240 -        AppLog.add(Type.SYNC, &quot;Started note bucket (NoteMarkdownFragment)&quot;);                                      </span>
<span class="6569679696158291720" onmouseenter="enter('6569679696158291720');" onmouseout="out('6569679696158291720');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 241 +        checkWebView();                                                                                           </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 242          mNotesBucket.addListener(this);                                                                           </span>
<span class="-864929968357224004" onmouseenter="enter('-864929968357224004');" onmouseout="out('-864929968357224004');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 243 +        AppLog.add(Type.SYNC, &quot;Added note bucket listener (NoteMarkdownFragment)&quot;);                               </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 244          AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                                  </span>
<span class="-801732108510700804" onmouseenter="enter('-801732108510700804');" onmouseout="out('-801732108510700804');" style=""> 245          AppLog.add(Type.SCREEN, &quot;Resumed (NoteMarkdownFragment)&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246      }                                                                                                             </span>
<span  style=""> 247                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 248      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style=""> 249      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250      }                                                                                                             </span>
<span  style=""> 251                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 252      @Override                                                                                                     </span>
<span class="-1660268234445911218" onmouseenter="enter('-1660268234445911218');" onmouseout="out('-1660268234445911218');" style=""> 253      public void onDeleteObject(Bucket&lt;Note&gt; bucket, Note note) {                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254      }                                                                                                             </span>
<span  style=""> 255                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 256      @Override                                                                                                     </span>
<span class="7988016775193413808" onmouseenter="enter('7988016775193413808');" onmouseout="out('7988016775193413808');" style=""> 257      public void onNetworkChange(Bucket&lt;Note&gt; bucket, Bucket.ChangeType type, String key) {                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258      }                                                                                                             </span>
<span  style=""> 259                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 260      @Override                                                                                                     </span>
<span class="-3176015151927698771" onmouseenter="enter('-3176015151927698771');" onmouseout="out('-3176015151927698771');" style=""> 261      public void onSaveObject(Bucket&lt;Note&gt; bucket, Note note) {                                                    </span>
<span class="-6335499192552625484" onmouseenter="enter('-6335499192552625484');" onmouseout="out('-6335499192552625484');" style=""> 262          if (note.equals(mNote)) {                                                                                 </span>
<span class="2737653741393130317" onmouseenter="enter('2737653741393130317');" onmouseout="out('2737653741393130317');" style=""> 263              mNote = note;                                                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 264              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265          }                                                                                                         </span>
<span  style=""> 266                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style=""> 267          AppLog.add(                                                                                               </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style=""> 268              Type.SYNC,                                                                                            </span>
<span class="2539944630544033834" onmouseenter="enter('2539944630544033834');" onmouseout="out('2539944630544033834');" style=""> 269              &quot;Saved note callback in NoteMarkdownFragment (ID: &quot; + note.getSimperiumKey() +                        </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style=""> 270                  &quot; / Title: &quot; + note.getTitle() +                                                                  </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style=""> 271                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                             </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style=""> 272                  &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 273          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274      }                                                                                                             </span>
<span  style=""> 275                                                                                                                    </span>
<span class="-3335709862144116823" onmouseenter="enter('-3335709862144116823');" onmouseout="out('-3335709862144116823');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 276 +    private void checkWebView() {                                                                                 </span>
<span class="8465657679158471583" onmouseenter="enter('8465657679158471583');" onmouseout="out('8465657679158471583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 277 +        // When a WebView is installed and mMarkdown is null, a WebView was not installed when the                </span>
<span class="-933414265337799871" onmouseenter="enter('-933414265337799871');" onmouseout="out('-933414265337799871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 278 +        // fragment was created.  So, open the note again to show the markdown preview.                           </span>
<span class="3887236659967554986" onmouseenter="enter('3887236659967554986');" onmouseout="out('3887236659967554986');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 279 +        if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown == null) {                             </span>
<span class="5771666766706489927" onmouseenter="enter('5771666766706489927');" onmouseout="out('5771666766706489927');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 280 +            SimplenoteLinkify.openNote(requireActivity(), mNote.getSimperiumKey());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 281 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 282 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 283 +                                                                                                                  </span>
<span class="-7586955142242224862" onmouseenter="enter('-7586955142242224862');" onmouseout="out('-7586955142242224862');" style=""> 284      public void updateMarkdown(String text) {                                                                     </span>
<span class="230805297842547942" onmouseenter="enter('230805297842547942');" onmouseout="out('230805297842547942');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 285 -        mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utf-8&quot;, null); </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 286 +        if (mMarkdown != null) {                                                                                  </span>
<span class="230805297842547942" onmouseenter="enter('230805297842547942');" onmouseout="out('230805297842547942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 287 +            mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 287 +            mMarkdown.loadDataWithBaseURL(null, getMarkdownFormattedContent(mCss, text), &quot;text/html&quot;, &quot;utf-8&quot;, nulðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 288 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289      }                                                                                                             </span>
<span  style=""> 290                                                                                                                    </span>
<span class="2030146575069313446" onmouseenter="enter('2030146575069313446');" onmouseout="out('2030146575069313446');" style=""> 291      public static String getMarkdownFormattedContent(String cssContent, String sourceContent) {                   </span>
<span class="2513493116501019750" onmouseenter="enter('2513493116501019750');" onmouseout="out('2513493116501019750');" style=""> 292          String header = &quot;&lt;html&gt;&lt;head&gt;&quot; +                                                                          </span>
<span class="3824471566064848514" onmouseenter="enter('3824471566064848514');" onmouseout="out('3824471566064848514');" style=""> 293                  &quot;&lt;link href=\&quot;https://fonts.googleapis.com/css?family=Noto+Serif\&quot; rel=\&quot;stylesheet\&quot;&gt;&quot; +         </span>
<span class="-7278806205357860133" onmouseenter="enter('-7278806205357860133');" onmouseout="out('-7278806205357860133');" style=""> 294                  cssContent + &quot;&lt;/head&gt;&lt;body&gt;&quot;;                                                                     </span>
<span  style=""> 295                                                                                                                    </span>
<span class="-7895704813465822381" onmouseenter="enter('-7895704813465822381');" onmouseout="out('-7895704813465822381');" style=""> 296          String parsedMarkdown = new AndDown().markdownToHtml(                                                     </span>
<span class="-6798947733513459772" onmouseenter="enter('-6798947733513459772');" onmouseout="out('-6798947733513459772');" style=""> 297                  sourceContent,                                                                                    </span>
<span class="3839523846389915820" onmouseenter="enter('3839523846389915820');" onmouseout="out('3839523846389915820');" style=""> 298                  AndDown.HOEDOWN_EXT_STRIKETHROUGH | AndDown.HOEDOWN_EXT_FENCED_CODE |                             </span>
<span class="-2106863865776834087" onmouseenter="enter('-2106863865776834087');" onmouseout="out('-2106863865776834087');" style=""> 299                          AndDown.HOEDOWN_EXT_QUOTE | AndDown.HOEDOWN_EXT_TABLES,                                   </span>
<span class="2055569359879886267" onmouseenter="enter('2055569359879886267');" onmouseout="out('2055569359879886267');" style=""> 300                  AndDown.HOEDOWN_HTML_ESCAPE                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 301          );                                                                                                        </span>
<span  style=""> 302                                                                                                                    </span>
<span class="1394645348869203401" onmouseenter="enter('1394645348869203401');" onmouseout="out('1394645348869203401');" style=""> 303          // Set auto alignment for lists, tables, and quotes based on language of start.                           </span>
<span class="7103750820259129737" onmouseenter="enter('7103750820259129737');" onmouseout="out('7103750820259129737');" style=""> 304          parsedMarkdown = parsedMarkdown                                                                           </span>
<span class="9207196088150204550" onmouseenter="enter('9207196088150204550');" onmouseout="out('9207196088150204550');" style=""> 305                  .replaceAll(&quot;&lt;ol&gt;&quot;, &quot;&lt;ol dir=\&quot;auto\&quot;&gt;&quot;)                                                          </span>
<span class="-7451241365596184853" onmouseenter="enter('-7451241365596184853');" onmouseout="out('-7451241365596184853');" style=""> 306                  .replaceAll(&quot;&lt;ul&gt;&quot;, &quot;&lt;ul dir=\&quot;auto\&quot;&gt;&quot;)                                                          </span>
<span class="3367018575773062425" onmouseenter="enter('3367018575773062425');" onmouseout="out('3367018575773062425');" style=""> 307                  .replaceAll(&quot;&lt;table&gt;&quot;, &quot;&lt;table dir=\&quot;auto\&quot;&gt;&quot;)                                                    </span>
<span class="-4396081985590836307" onmouseenter="enter('-4396081985590836307');" onmouseout="out('-4396081985590836307');" style=""> 308                  .replaceAll(&quot;&lt;blockquote&gt;&quot;, &quot;&lt;blockquote dir=\&quot;auto\&quot;&gt;&quot;);                                         </span>
<span  style=""> 309                                                                                                                    </span>
<span class="-1969760236692593587" onmouseenter="enter('-1969760236692593587');" onmouseout="out('-1969760236692593587');" style=""> 310          return header + &quot;&lt;div class=\&quot;note-detail-markdown\&quot;&gt;&quot; + parsedMarkdown +                                 </span>
<span class="-997374659678670563" onmouseenter="enter('-997374659678670563');" onmouseout="out('-997374659678670563');" style=""> 311                  &quot;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312      }                                                                                                             </span>
<span  style=""> 313                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style=""> 314      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="1448652766919907439" onmouseenter="enter('1448652766919907439');" onmouseout="out('1448652766919907439');" style=""> 315          private SoftReference&lt;NoteMarkdownFragment&gt; mNoteMarkdownFragmentReference;                               </span>
<span  style=""> 316                                                                                                                    </span>
<span class="-8419210300923433889" onmouseenter="enter('-8419210300923433889');" onmouseout="out('-8419210300923433889');" style=""> 317          private LoadNoteTask(NoteMarkdownFragment context) {                                                      </span>
<span class="2363516871652359654" onmouseenter="enter('2363516871652359654');" onmouseout="out('2363516871652359654');" style=""> 318              mNoteMarkdownFragmentReference = new SoftReference&lt;&gt;(context);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319          }                                                                                                         </span>
<span  style=""> 320                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 321          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 322          protected void onPreExecute() {                                                                           </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 323              NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                                 </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style=""> 324              fragment.mIsLoadingNote = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325          }                                                                                                         </span>
<span  style=""> 326                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 327          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 328          protected Void doInBackground(String... args) {                                                           </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 329              NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                                 </span>
<span class="-1155301544955899202" onmouseenter="enter('-1155301544955899202');" onmouseout="out('-1155301544955899202');" style=""> 330              FragmentActivity activity = fragment.getActivity();                                                   </span>
<span  style=""> 331                                                                                                                    </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 332              if (activity == null) {                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 333                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334              }                                                                                                     </span>
<span  style=""> 335                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 336              String noteID = args[0];                                                                              </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 337              Simplenote application = (Simplenote) activity.getApplication();                                      </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 338              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style=""> 339                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 340              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style=""> 341                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style=""> 342              } catch (BucketObjectMissingException exception) {                                                    </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 343                  // TODO: Handle a missing note                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344              }                                                                                                     </span>
<span  style=""> 345                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 346              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347          }                                                                                                         </span>
<span  style=""> 348                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 349          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 350          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-9026401310780460469" onmouseenter="enter('-9026401310780460469');" onmouseout="out('-9026401310780460469');" style=""> 351              NoteMarkdownFragment fragment = mNoteMarkdownFragmentReference.get();                                 </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style=""> 352              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style=""> 353              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            