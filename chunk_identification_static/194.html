<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>194</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    194
                    <a href="193.html">prev</a>
                    <a href="195.html">next</a>
                    <a href="194_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_f6b200b2a988ba1c8c9bdce1f9018ade9b322480_Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;f6b200b2a988ba1c8c9bdce1f9018ade9b322480:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;f6b200b2a988ba1c8c9bdce1f9018ade9b322480^1:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;f6b200b2a988ba1c8c9bdce1f9018ade9b322480^2:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;9e22297053412e6b042d92d1d612bb91cc42a7e0:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b], [bs], [bsj], [bs], [bsj], [bs], [bsj], [bsj]], subset: [[b], [b], [bs], [bsj], [bs], [bsj], [bs], [bsj], [bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7 import android.content.Intent;                                                                           </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   8 import android.database.Cursor;                                                                          </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  10 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  12 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  13 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  14 import android.os.Handler;                                                                               </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  15 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="7113341696390925527" onmouseenter="enter('7113341696390925527');" onmouseout="out('7113341696390925527');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  16 import android.support.design.widget.Snackbar;                                                           </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  17 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  18 import android.os.Handler;                                                                               </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  19 =======                                                                                                  </span>
<span class="1235021250095752497" onmouseenter="enter('1235021250095752497');" onmouseout="out('1235021250095752497');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  20 import android.support.v4.app.Fragment;                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  21 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="6292606154682534015" onmouseenter="enter('6292606154682534015');" onmouseout="out('6292606154682534015');" style="">  22 import android.support.v7.app.AppCompatActivity;                                                         </span>
<span class="-8226814767277370585" onmouseenter="enter('-8226814767277370585');" onmouseout="out('-8226814767277370585');" style="">  23 import android.support.v7.view.ActionMode;                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  24 import android.text.Editable;                                                                            </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  25 import android.text.Spanned;                                                                             </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  26 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  27 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  28 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  29 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  30 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  31 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  32 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  33 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  34 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  35 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  36 import android.view.ViewGroup;                                                                           </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  37 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  38 import android.webkit.WebView;                                                                           </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  39 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  40 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  41 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  42 import android.widget.Toast;                                                                             </span>
<span  style="">  43                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  44 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  45 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  46 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  47 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  48 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  49 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  50 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  51 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  52 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  53 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="">  54 import com.automattic.simplenote.utils.SnackbarUtils;                                                    </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  55 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  56 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  57 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  58 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  59 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  60 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  61 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="-6478088126414832186" onmouseenter="enter('-6478088126414832186');" onmouseout="out('-6478088126414832186');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67 import com.kennyc.bottomsheet.BottomSheet;                                                               </span>
<span class="7570874020288718322" onmouseenter="enter('7570874020288718322');" onmouseout="out('7570874020288718322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68 import com.kennyc.bottomsheet.BottomSheetListener;                                                       </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  71 =======                                                                                                  </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  72 import com.commonsware.cwac.anddown.AndDown;                                                             </span>
<span class="-6478088126414832186" onmouseenter="enter('-6478088126414832186');" onmouseout="out('-6478088126414832186');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  73 import com.kennyc.bottomsheet.BottomSheet;                                                               </span>
<span class="7570874020288718322" onmouseenter="enter('7570874020288718322');" onmouseout="out('7570874020288718322');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  74 import com.kennyc.bottomsheet.BottomSheetListener;                                                       </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  75 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  76 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  77 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  78 import com.simperium.client.Query;                                                                       </span>
<span  style="">  79                                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  80 import java.util.Calendar;                                                                               </span>
<span  style="">  81                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  82 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  83         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  84         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  85         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  86         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-1616372346803851838" onmouseenter="enter('-1616372346803851838');" onmouseout="out('-1616372346803851838');" style="">  87         InfoBottomSheetDialog.InfoSheetListener {                                                        </span>
<span  style="">  88                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  89     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  90     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  91     static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="7675482774590431252" onmouseenter="enter('7675482774590431252');" onmouseout="out('7675482774590431252');" style="">  92     static public final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  93     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  94     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  95 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  96     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  97     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  98 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="7280890691619564888" onmouseenter="enter('7280890691619564888');" onmouseout="out('7280890691619564888');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  99 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListener, View.OnFocusChangeListener, SimplenoteEditText.OnSelectionChangedListener {">  99 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddeðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103     static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105     private static final int MAX_REVISIONS = 30;                                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107     private Note mNote;                                                                                  </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 111 =======                                                                                                  </span>
<span class="4572903639827164119" onmouseenter="enter('4572903639827164119');" onmouseout="out('4572903639827164119');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 112     public static final int THEME_LIGHT = 0;                                                             </span>
<span class="6287065810722210354" onmouseenter="enter('6287065810722210354');" onmouseout="out('6287065810722210354');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 113     public static final int THEME_DARK = 1;                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 114 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 115                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 116     private Note mNote;                                                                                  </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 117     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style=""> 118                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 119     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style=""> 120     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span  style=""> 121                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 122     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 123     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 124     private Handler mHistoryTimeoutHandler;                                                              </span>
<span  style=""> 125                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 126     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 127     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 128 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="275494556225166536" onmouseenter="enter('275494556225166536');" onmouseout="out('275494556225166536');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 129     private boolean mIsNewNote, mIsLoadingNote;                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 130 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="2185363042559783972" onmouseenter="enter('2185363042559783972');" onmouseout="out('2185363042559783972');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131     private SeekBar mHistorySeekBar;                                                                     </span>
<span class="5153068566955290700" onmouseenter="enter('5153068566955290700');" onmouseout="out('5153068566955290700');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132     private BottomSheet mBottomSheet;                                                                    </span>
<span class="-5532628574218846387" onmouseenter="enter('-5532628574218846387');" onmouseout="out('-5532628574218846387');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133     private TextView mHistoryDate;                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134                                                                                                          </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135     private ToggleButton mPinButton;                                                                     </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138     private Handler mPublishTimeoutHandler;                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="3983635637410949309" onmouseenter="enter('3983635637410949309');" onmouseout="out('3983635637410949309');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142     private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton;                                    </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 148 =======                                                                                                  </span>
<span class="8299144298417847580" onmouseenter="enter('8299144298417847580');" onmouseout="out('8299144298417847580');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 149     private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton, mIsMarkdownEnabled, mIsMarkdownEnabledGlobal;"> 149     private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton, mIsMarkdownEnabled, mIsMarkdownEnabðŸ”µ</abbr></span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 150 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 151     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 152     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 153     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 154     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 155     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-6925628041030715987" onmouseenter="enter('-6925628041030715987');" onmouseout="out('-6925628041030715987');" style=""> 156     private Drawable mEmailIcon, mWebIcon, mMapIcon, mCallIcon;                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 157     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 158     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 159     private int mCurrentCursorPosition;                                                                  </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 160 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="7045155254268917571" onmouseenter="enter('7045155254268917571');" onmouseout="out('7045155254268917571');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 161     private String mLastContentString;                                                                   </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 162                                                                                                          </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 163     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 164     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 165     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 166                                                                                                          </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 167     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 168 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 169     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="3983635637410949309" onmouseenter="enter('3983635637410949309');" onmouseout="out('3983635637410949309');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 170     private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton;                                    </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 172     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 173     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 174     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 175     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-2809999858206249165" onmouseenter="enter('-2809999858206249165');" onmouseout="out('-2809999858206249165');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 176     private int mEmailIconResId, mWebIconResId, mMapIconResId, mCallIconResId;                           </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 177     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 178     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179     private int mCurrentCursorPosition;                                                                  </span>
<span class="2386861943840741326" onmouseenter="enter('2386861943840741326');" onmouseout="out('2386861943840741326');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180     private ArrayList&lt;Note&gt; mNoteRevisionsList;                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 184      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 185      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 186     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 187     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 188                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 189 =======                                                                                                  </span>
<span class="2386861943840741326" onmouseenter="enter('2386861943840741326');" onmouseout="out('2386861943840741326');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 190     private ArrayList&lt;Note&gt; mNoteRevisionsList;                                                          </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 191     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 192     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 193     private WebView mMarkdown;                                                                           </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 194 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 195                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 196     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 197      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 198      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 199      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 200     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201     }                                                                                                    </span>
<span  style=""> 202                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 203     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 204     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 205         super.onCreate(savedInstanceState);                                                              </span>
<span  style=""> 206                                                                                                          </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 207         if (getActivity() != null) {                                                                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 208             Simplenote currentApp = (Simplenote) getActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 209             mNotesBucket = currentApp.getNotesBucket();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210         }                                                                                                </span>
<span  style=""> 211                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 212         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 212         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style=""><abbr title=" 213         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 213         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style=""><abbr title=" 214         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 214         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, RðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style=""><abbr title=" 215         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 215         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, RðŸ”µ</abbr></span>
<span  style=""> 216                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 217         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 218         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 219         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 220                                                                                                          </span>
<span class="-6036514116585965367" onmouseenter="enter('-6036514116585965367');" onmouseout="out('-6036514116585965367');" style=""> 221         mLastContentString = &quot;&quot;;                                                                         </span>
<span  style=""> 222                                                                                                          </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 223         mMatchHighlighter = new TextHighlighter(getActivity(),                                           </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 224                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 224                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 225         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 226             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 227             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 228                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 229                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 230                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231             }                                                                                            </span>
<span  style=""> 232                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 233             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 234             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 235                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 236                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237             }                                                                                            </span>
<span  style=""> 238                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 239             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 240             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 241                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242             }                                                                                            </span>
<span  style=""> 243                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 244             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 245             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 246                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 247                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 248                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 249                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 250                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 251                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 252                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 253                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 254                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 255                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 255                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.forðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 256                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 258         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259     }                                                                                                    </span>
<span  style=""> 260                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 261     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 262     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 263         setHasOptionsMenu(true);                                                                         </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 264         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 265         mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));              </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 266         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 267         mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                 </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 268         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 269         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span  style=""> 270                                                                                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 271         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style=""> 272                                                                                                          </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 273         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 274         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 275             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 276 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="8823595637372647509" onmouseenter="enter('8823595637372647509');" onmouseout="out('8823595637372647509');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 277             getActivity().invalidateOptionsMenu();                                                       </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 278 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 279                                                                                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 280         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 281                                                                                                          </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 282         mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                               </span>
<span class="-6233419192957625397" onmouseenter="enter('-6233419192957625397');" onmouseout="out('-6233419192957625397');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 283         mPinButton.setOnClickListener(new View.OnClickListener() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 284             @Override                                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 285             public void onClick(View v) {                                                                </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 286                 if (mPinButton.isChecked()) {                                                            </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 287                     // Friendly message to the user as to what this button does.                         </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 288                     Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 289                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 290             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 291         });                                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 292                                                                                                          </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 293         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 294         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 295             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 296         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 297                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 298         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 299                                                                                                          </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 300         // Load note if we were passed a note Id                                                         </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 301         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 302         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 303             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 304             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 305                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 306             }                                                                                            </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 307             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 308             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 309         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 310                                                                                                          </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 311 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 312 	}                                                                                                       </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 313 =======                                                                                                  </span>
<span class="4785891395116813196" onmouseenter="enter('4785891395116813196');" onmouseout="out('4785891395116813196');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 314             mMarkdown = (WebView) rootView.findViewById(R.id.markdown);                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 315                                                                                                          </span>
<span class="8669746627669403722" onmouseenter="enter('8669746627669403722');" onmouseout="out('8669746627669403722');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 316             switch (PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_THEME, THEME_LIGHT)) {            </span>
<span class="-1862280279846167044" onmouseenter="enter('-1862280279846167044');" onmouseout="out('-1862280279846167044');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 317                 case THEME_DARK:                                                                         </span>
<span class="2431268192882105499" onmouseenter="enter('2431268192882105499');" onmouseout="out('2431268192882105499');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 318                     mCss = &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;dark.css\&quot; /&gt;&quot;;            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 319                     break;                                                                               </span>
<span class="-539754023432181399" onmouseenter="enter('-539754023432181399');" onmouseout="out('-539754023432181399');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 320                 case THEME_LIGHT:                                                                        </span>
<span class="4484195514752522265" onmouseenter="enter('4484195514752522265');" onmouseout="out('4484195514752522265');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 321                     mCss = &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;light.css\&quot; /&gt;&quot;;           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 322                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 323             }                                                                                            </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 324 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325         }                                                                                                </span>
<span  style=""> 326                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 327         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style=""> 328                                                                                                          </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 329         // Load note if we were passed a note Id                                                         </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 330         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 331         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 332             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 333             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 334                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335             }                                                                                            </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 336             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 337             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338         }                                                                                                </span>
<span  style=""> 339                                                                                                          </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 340 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341 	}                                                                                                       </span>
<span  style=""> 342                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 343     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 344     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 345         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 346         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 347         mNotesBucket.addListener(this);                                                                  </span>
<span  style=""> 348                                                                                                          </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 349         mTagView.setOnTagAddedListener(this);                                                            </span>
<span  style=""> 350                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 351         if (mContentEditText != null) {                                                                  </span>
<span class="-4898136971195212464" onmouseenter="enter('-4898136971195212464');" onmouseout="out('-4898136971195212464');" style=""><abbr title=" 352             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_FONT_SIZE, 14));"> 352             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354     }                                                                                                    </span>
<span  style=""> 355                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 356     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 357     public void onPause() {                                                                              </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 358         mNotesBucket.removeListener(this);                                                               </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 359         // Hide soft keyboard if it is showing...                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 360         if (getActivity() != null) {                                                                     </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 361             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 361             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 362             if (inputMethodManager != null) {                                                            </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 363                 inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365         }                                                                                                </span>
<span  style=""> 366                                                                                                          </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 367         // Delete the note if it is new and has empty fields                                             </span>
<span class="-2219905285758853631" onmouseenter="enter('-2219905285758853631');" onmouseout="out('-2219905285758853631');" style=""> 368         if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty()) {                                              </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 369             mNote.delete();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 370         } else {                                                                                         </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 371             saveNote();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372         }                                                                                                </span>
<span  style=""> 373                                                                                                          </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 374         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 375                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 376         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 377             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378         }                                                                                                </span>
<span  style=""> 379                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 380         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 381             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382         }                                                                                                </span>
<span  style=""> 383                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 384         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 385             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386         }                                                                                                </span>
<span  style=""> 387                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 388         mHighlighter.stop();                                                                             </span>
<span  style=""> 389                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 390         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391     }                                                                                                    </span>
<span  style=""> 392                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 393     @Override                                                                                            </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style=""> 394     public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                  </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style=""><abbr title=" 395         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {"> 395         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 396             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397         }                                                                                                </span>
<span  style=""> 398                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 399         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 400                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 401         if (mNote != null) {                                                                             </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 402             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                         </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 403             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 404                                                                                                          </span>
<span class="-2352342880963919129" onmouseenter="enter('-2352342880963919129');" onmouseout="out('-2352342880963919129');" style=""> 405             if (mIsMarkdownEnabledGlobal) {                                                              </span>
<span class="4614931194864693025" onmouseenter="enter('4614931194864693025');" onmouseout="out('4614931194864693025');" style=""> 406                 MenuItem markdownEnableItem = menu.findItem(R.id.menu_markdown_enable);                  </span>
<span class="-2633107343982386844" onmouseenter="enter('-2633107343982386844');" onmouseout="out('-2633107343982386844');" style=""> 407                 markdownEnableItem.setChecked(mNote.isMarkdownEnabled());                                </span>
<span class="3477449218696725297" onmouseenter="enter('3477449218696725297');" onmouseout="out('3477449218696725297');" style=""> 408                 markdownEnableItem.setVisible(true);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409             }                                                                                            </span>
<span  style=""> 410                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 411             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 412             if (mNote.isDeleted())                                                                       </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 413                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 414             else                                                                                         </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 415                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416         }                                                                                                </span>
<span  style=""> 417                                                                                                          </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style=""> 418         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);             </span>
<span  style=""> 419                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 420         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421     }                                                                                                    </span>
<span  style=""> 422                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 423     @Override                                                                                            </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style=""> 424     public boolean onOptionsItemSelected(MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 425         switch (item.getItemId()) {                                                                      </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 426             case R.id.menu_view_info:                                                                    </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 427                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 428                 return true;                                                                             </span>
<span  style=""> 429                                                                                                          </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 430             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 431                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 432                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 433             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 434                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 435                 return true;                                                                             </span>
<span class="-2326571002560832814" onmouseenter="enter('-2326571002560832814');" onmouseout="out('-2326571002560832814');" style=""> 436             case R.id.menu_markdown_enable:                                                              </span>
<span class="2366870288831262173" onmouseenter="enter('2366870288831262173');" onmouseout="out('2366870288831262173');" style=""> 437                 mIsMarkdownEnabled = !item.isChecked();                                                  </span>
<span class="1180540947331910458" onmouseenter="enter('1180540947331910458');" onmouseout="out('1180540947331910458');" style=""> 438                 item.setChecked(mIsMarkdownEnabled);                                                     </span>
<span  style=""> 439                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 440                 if (mIsMarkdownEnabled) {                                                                </span>
<span class="-6508659890551353976" onmouseenter="enter('-6508659890551353976');" onmouseout="out('-6508659890551353976');" style=""> 441                     ((NoteEditorActivity) getActivity()).showTabs();                                     </span>
<span  style=""> 442                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 443                     if (mNoteMarkdownFragment == null) {                                                 </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 444                         // Get markdown fragment and update content                                      </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 445                         mNoteMarkdownFragment =                                                          </span>
<span class="-8313285091182637202" onmouseenter="enter('-8313285091182637202');" onmouseout="out('-8313285091182637202');" style=""> 446                                 ((NoteEditorActivity) getActivity()).getNoteMarkdownFragment();          </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style=""> 447                         mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 449                 } else {                                                                                 </span>
<span class="-2274167655435036909" onmouseenter="enter('-2274167655435036909');" onmouseout="out('-2274167655435036909');" style=""> 450                     ((NoteEditorActivity) getActivity()).hideTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                 }                                                                                        </span>
<span  style=""> 452                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 453                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 454             case R.id.menu_delete:                                                                       </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 455                 if (!isAdded()) return false;                                                            </span>
<span  style=""> 456                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 457                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 458                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 459             case android.R.id.home:                                                                      </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 460                 if (!isAdded()) return false;                                                            </span>
<span  style=""> 461                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 462                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 463                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 464             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 465                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467     }                                                                                                    </span>
<span  style=""> 468                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 469 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 470     private void deleteNote() {                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 471         if (mNote != null) {                                                                             </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 472             mNote.setDeleted(!mNote.isDeleted());                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 473             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 474             mNote.save();                                                                                </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 475             Intent resultIntent = new Intent();                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 476             if (mNote.isDeleted()) {                                                                     </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 477                 resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 478             }                                                                                            </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 479             getActivity().setResult(Activity.RESULT_OK, resultIntent);                                   </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 480 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 481                             &quot;action_bar_share_button&quot;                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 482                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 483                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 484                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 485             case R.id.menu_delete:                                                                       </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 486                 if (!isAdded()) return false;                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 487                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 488                 if (mNote != null) {                                                                     </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 489                     mNote.setDeleted(!mNote.isDeleted());                                                </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 490                     mNote.setModificationDate(Calendar.getInstance());                                   </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 491                     mNote.save();                                                                        </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 492                     Intent resultIntent = new Intent();                                                  </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 493                     if (mNote.isDeleted()) {                                                             </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 494                         resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 495                     }                                                                                    </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 496                     getActivity().setResult(Activity.RESULT_OK, resultIntent);                           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 497                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 498                     AnalyticsTracker.track(                                                              </span>
<span class="272006350020544349" onmouseenter="enter('272006350020544349');" onmouseout="out('272006350020544349');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 499                             AnalyticsTracker.Stat.EDITOR_NOTE_DELETED,                                   </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 500                             AnalyticsTracker.CATEGORY_NOTE,                                              </span>
<span class="-6954849474356068168" onmouseenter="enter('-6954849474356068168');" onmouseout="out('-6954849474356068168');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 501                             &quot;trash_menu_item&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 502                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 503                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 504                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 505                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 506                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 507             case android.R.id.home:                                                                      </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 508                 if (!isAdded()) return false;                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 509                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 510                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 511                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 512             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 513                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 514         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 515     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 516                                                                                                          </span>
<span class="8271468180839847847" onmouseenter="enter('8271468180839847847');" onmouseout="out('8271468180839847847');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 517     // show a popup view from the info action bar item                                                   </span>
<span class="301694884727727095" onmouseenter="enter('301694884727727095');" onmouseout="out('301694884727727095');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 518     private void showInfoPopup(View view) {                                                              </span>
<span class="-8824124309160747557" onmouseenter="enter('-8824124309160747557');" onmouseout="out('-8824124309160747557');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 519         if (!isAdded() || view == null) return;                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 520                                                                                                          </span>
<span class="-6163322818153177863" onmouseenter="enter('-6163322818153177863');" onmouseout="out('-6163322818153177863');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 521         if (mInfoPopupWindow == null) {                                                                  </span>
<span class="6416634994496998699" onmouseenter="enter('6416634994496998699');" onmouseout="out('6416634994496998699');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 522             mInfoPopupWindow = new PopupWindow(getActivity());                                           </span>
<span class="-7704183450622301834" onmouseenter="enter('-7704183450622301834');" onmouseout="out('-7704183450622301834');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 523             mInfoPopupWindow.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);                          </span>
<span class="-3987029803100381492" onmouseenter="enter('-3987029803100381492');" onmouseout="out('-3987029803100381492');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 524             mInfoPopupWindow.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);                         </span>
<span class="-8327124619089985465" onmouseenter="enter('-8327124619089985465');" onmouseout="out('-8327124619089985465');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 525             mInfoPopupWindow.setBackgroundDrawable(new ColorDrawable(0));                                </span>
<span class="3466073935356821559" onmouseenter="enter('3466073935356821559');" onmouseout="out('3466073935356821559');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 526             mInfoPopupWindow.setOutsideTouchable(true);                                                  </span>
<span class="-1875471742113799055" onmouseenter="enter('-1875471742113799055');" onmouseout="out('-1875471742113799055');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 527             mInfoPopupWindow.setFocusable(true);                                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 528                                                                                                          </span>
<span class="5212568524712573915" onmouseenter="enter('5212568524712573915');" onmouseout="out('5212568524712573915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 529             LayoutInflater inflater = LayoutInflater.from(getActivity());                                </span>
<span class="-7758049233010801507" onmouseenter="enter('-7758049233010801507');" onmouseout="out('-7758049233010801507');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 530             View popupView = inflater.inflate(R.layout.popup_info, null);                                </span>
<span class="536077715701124131" onmouseenter="enter('536077715701124131');" onmouseout="out('536077715701124131');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 531             mInfoPopupWindow.setContentView(popupView);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 532         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 533                                                                                                          </span>
<span class="-4651993534606395663" onmouseenter="enter('-4651993534606395663');" onmouseout="out('-4651993534606395663');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 534         updateInfoPopup();                                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 535                                                                                                          </span>
<span class="4487253113225225144" onmouseenter="enter('4487253113225225144');" onmouseout="out('4487253113225225144');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 536         mInfoPopupWindow.showAsDropDown(view);                                                           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 537                                                                                                          </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 538         // Request revisions for the current note                                                        </span>
<span class="762034941650544962" onmouseenter="enter('762034941650544962');" onmouseout="out('762034941650544962');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 539         mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mRevisionsRequestCallbacks);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 540     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 541                                                                                                          </span>
<span class="-8758077771583595367" onmouseenter="enter('-8758077771583595367');" onmouseout="out('-8758077771583595367');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 542     // update the content of the popupview                                                               </span>
<span class="-7181846678873590508" onmouseenter="enter('-7181846678873590508');" onmouseout="out('-7181846678873590508');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 543     private void updateInfoPopup() {                                                                     </span>
<span class="-8697403400729029020" onmouseenter="enter('-8697403400729029020');" onmouseout="out('-8697403400729029020');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 544         if (mInfoPopupWindow == null || mInfoPopupWindow.getContentView() == null) return;               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 545                                                                                                          </span>
<span class="3837773520867540996" onmouseenter="enter('3837773520867540996');" onmouseout="out('3837773520867540996');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 546         View popupView = mInfoPopupWindow.getContentView();                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 547                                                                                                          </span>
<span class="-5563348291777194716" onmouseenter="enter('-5563348291777194716');" onmouseout="out('-5563348291777194716');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 548         View publishButton = popupView.findViewById(R.id.publish_note_button);                           </span>
<span class="4581310412057978293" onmouseenter="enter('4581310412057978293');" onmouseout="out('4581310412057978293');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 549         TextView publishButtonTextView = (TextView)popupView.findViewById(R.id.publish_note_button_text);</span>
<span class="-6410915739065156574" onmouseenter="enter('-6410915739065156574');" onmouseout="out('-6410915739065156574');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 550         ImageView publishButtonIcon = (ImageView)popupView.findViewById(R.id.publish_note_button_icon);  </span>
<span class="-6918482493044946592" onmouseenter="enter('-6918482493044946592');" onmouseout="out('-6918482493044946592');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 551         TextView publishTextView = (TextView) popupView.findViewById(R.id.publish_url_textview);         </span>
<span class="1038347291336054559" onmouseenter="enter('1038347291336054559');" onmouseout="out('1038347291336054559');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 552         TextView wordCountTextView = (TextView) popupView.findViewById(R.id.word_count);                 </span>
<span class="-7977646551049898553" onmouseenter="enter('-7977646551049898553');" onmouseout="out('-7977646551049898553');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 553         ImageButton publishCopyButton = (ImageButton) popupView.findViewById(R.id.publish_copy_url);     </span>
<span class="7101383467626352915" onmouseenter="enter('7101383467626352915');" onmouseout="out('7101383467626352915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 554         ImageButton publishShareButton = (ImageButton) popupView.findViewById(R.id.publish_share_url);   </span>
<span class="3150325744662714786" onmouseenter="enter('3150325744662714786');" onmouseout="out('3150325744662714786');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 555         View actionsView = popupView.findViewById(R.id.publish_actions);                                 </span>
<span class="5489608530057038062" onmouseenter="enter('5489608530057038062');" onmouseout="out('5489608530057038062');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 556         final View historyButton = popupView.findViewById(R.id.history_button);                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 557                                                                                                          </span>
<span class="1432622249676412210" onmouseenter="enter('1432622249676412210');" onmouseout="out('1432622249676412210');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 558         final ViewSwitcher viewSwitcher = (ViewSwitcher) popupView.findViewById(R.id.publish_view_switcher);"> 558         final ViewSwitcher viewSwitcher = (ViewSwitcher) popupView.findViewById(R.id.publish_view_switcheðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 559                                                                                                          </span>
<span class="-7759606836018483289" onmouseenter="enter('-7759606836018483289');" onmouseout="out('-7759606836018483289');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 560         publishButton.setOnClickListener(new View.OnClickListener() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 561             @Override                                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 562             public void onClick(View v) {                                                                </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 563                 if (mNote != null) {                                                                     </span>
<span class="5563864695602119989" onmouseenter="enter('5563864695602119989');" onmouseout="out('5563864695602119989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 564                     boolean newPublishedStatus = !mNote.isPublished();                                   </span>
<span class="-3191807331109519265" onmouseenter="enter('-3191807331109519265');" onmouseout="out('-3191807331109519265');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 565                     mNote.setPublished(newPublishedStatus);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 566                     mNote.save();                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 567                                                                                                          </span>
<span class="-6566894946886815467" onmouseenter="enter('-6566894946886815467');" onmouseout="out('-6566894946886815467');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 568                     if (viewSwitcher.getDisplayedChild() == 0) {                                         </span>
<span class="1964540099195163034" onmouseenter="enter('1964540099195163034');" onmouseout="out('1964540099195163034');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 569                         viewSwitcher.showNext();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 570                     }                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 571                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 572                     // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium           </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 573 =======                                                                                                  </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 574     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 575         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 576     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 577                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 578     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 579         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 580     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 581                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 582     protected void showMarkdown() {                                                                      </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 583         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 584     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 585                                                                                                          </span>
<span class="8271468180839847847" onmouseenter="enter('8271468180839847847');" onmouseout="out('8271468180839847847');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 586     // show a popup view from the info action bar item                                                   </span>
<span class="301694884727727095" onmouseenter="enter('301694884727727095');" onmouseout="out('301694884727727095');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 587     private void showInfoPopup(View view) {                                                              </span>
<span class="-8824124309160747557" onmouseenter="enter('-8824124309160747557');" onmouseout="out('-8824124309160747557');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 588         if (!isAdded() || view == null) return;                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 589 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 590                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 591             AnalyticsTracker.track(                                                                      </span>
<span class="272006350020544349" onmouseenter="enter('272006350020544349');" onmouseout="out('272006350020544349');" style=""> 592                     AnalyticsTracker.Stat.EDITOR_NOTE_DELETED,                                           </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 593                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-6954849474356068168" onmouseenter="enter('-6954849474356068168');" onmouseout="out('-6954849474356068168');" style=""> 594                     &quot;trash_menu_item&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 595             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596         }                                                                                                </span>
<span  style=""> 597                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 598         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599     }                                                                                                    </span>
<span  style=""> 600                                                                                                          </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 601     private void shareNote() {                                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 602         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 603             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 604             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 605             AnalyticsTracker.track(                                                                      </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 606                     AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                    </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 607                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 608                     &quot;action_bar_share_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 609             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611     }                                                                                                    </span>
<span  style=""> 612                                                                                                          </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 613     private void showHistory() {                                                                         </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 614         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 615             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 616             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 617             showHistorySheet();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618         }                                                                                                </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style=""> 619         else {                                                                                           </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 620             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622     }                                                                                                    </span>
<span  style=""> 623                                                                                                          </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 624     private void showInfo() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 625         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 626             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 627             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 628             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630     }                                                                                                    </span>
<span  style=""> 631                                                                                                          </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 632     private boolean noteIsEmpty() {                                                                      </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 633         return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634     }                                                                                                    </span>
<span  style=""> 635                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 636     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 637         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 638                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 639         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style=""> 640             mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                               </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""> 641                     new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643     }                                                                                                    </span>
<span  style=""> 644                                                                                                          </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 645     public void setNote(String noteID){                                                                  </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 646         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647     }                                                                                                    </span>
<span  style=""> 648                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 649     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 650         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 651             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 652                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 653         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 654                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 655         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 656             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 657         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 658             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659         }                                                                                                </span>
<span  style=""> 660                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 661         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 662         if (mNote != null) {                                                                             </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 663             if (mIsNewNote &amp;&amp; noteIsEmpty())                                                             </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 664                 mNote.delete();                                                                          </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 665             else if (mNote != null)                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 666                 saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667         }                                                                                                </span>
<span  style=""> 668                                                                                                          </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 669         new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670     }                                                                                                    </span>
<span  style=""> 671                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 672     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 673         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 674         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 675         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 676     }                                                                                                    </span>
<span  style=""> 677                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 678     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 679         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 680             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 681                                                                                                          </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 682             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 682             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span  style=""> 683                                                                                                          </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 684             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 685                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 686             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 687                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 688                 mNote.save();                                                                            </span>
<span  style=""> 689                                                                                                          </span>
<span class="-5094013145931261947" onmouseenter="enter('-5094013145931261947');" onmouseout="out('-5094013145931261947');" style=""><abbr title=" 690                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) {"> 690                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 691                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693             }                                                                                            </span>
<span  style=""> 694                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 695             afterTextChanged(mContentEditText.getText());                                                </span>
<span  style=""> 696                                                                                                          </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 697             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699     }                                                                                                    </span>
<span  style=""> 700                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 701     private void updateTagList() {                                                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 702         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 703         if (activity == null) return;                                                                    </span>
<span  style=""> 704                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 705         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 706         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707     }                                                                                                    </span>
<span  style=""> 708                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 709     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 710         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 711         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 712         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 713         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 714         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 715         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 716         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 717         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 718                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 719         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 720                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 721         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 722                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 723         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 724         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 725             return newText.length();                                                                     </span>
<span  style=""> 726                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 727         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 728         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 729                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 730         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 731             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 731             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 732             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 732             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 733         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 734             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735         }                                                                                                </span>
<span  style=""> 736                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 737         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 738         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 739             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 740                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 741         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 742         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 743     }                                                                                                    </span>
<span  style=""> 744                                                                                                          </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 745     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 746         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 747         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 748             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 750     };                                                                                                   </span>
<span  style=""> 751                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 752     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 753     public void onTagsChanged(String tagString) {                                                        </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 754         if (mNote == null || !isAdded()) return;                                                         </span>
<span  style=""> 755                                                                                                          </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 756         if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 757             AnalyticsTracker.track(                                                                      </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 758                     AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                              </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 759                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 760                     &quot;tag_added_to_note&quot;                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 761             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762         }                                                                                                </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style=""> 763         else {                                                                                           </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 764             AnalyticsTracker.track(                                                                      </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 765                     AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 766                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 767                     &quot;tag_removed_from_note&quot;                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 768             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769         }                                                                                                </span>
<span  style=""> 770                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 771         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 772         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 773         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 774         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775     }                                                                                                    </span>
<span  style=""> 776                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 777     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 778     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 779         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780     }                                                                                                    </span>
<span  style=""> 781                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 782     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 783     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="2514214199025893024" onmouseenter="enter('2514214199025893024');" onmouseout="out('2514214199025893024');" style=""> 784         // check that the content has really changed (line spacing fix)                                  </span>
<span class="6844133105735349548" onmouseenter="enter('6844133105735349548');" onmouseout="out('6844133105735349548');" style=""> 785         if (!mLastContentString.equals(editable.toString())) {                                           </span>
<span class="-6397051223762453255" onmouseenter="enter('-6397051223762453255');" onmouseout="out('-6397051223762453255');" style=""> 786             mLastContentString = editable.toString();                                                    </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 787             setTitleSpan(editable);                                                                      </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 788             attemptAutoList(editable);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790     }                                                                                                    </span>
<span  style=""> 791                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 792     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 793     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span  style=""> 794                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 795         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 796         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 797             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 798             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799         }                                                                                                </span>
<span  style=""> 800                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 801         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 802         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 803             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 804             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806     }                                                                                                    </span>
<span  style=""> 807                                                                                                          </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 808     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 809         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 810         // Remove any existing size spans                                                                </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 811         RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 812         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 813             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 815         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 816         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 817             return;                                                                                      </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 818         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 818         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span  style=""> 819                                                                                                          </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style=""> 820         fixLineSpacing();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821     }                                                                                                    </span>
<span  style=""> 822                                                                                                          </span>
<span class="7193322245360440607" onmouseenter="enter('7193322245360440607');" onmouseout="out('7193322245360440607');" style=""> 823     // Fix for a line spacing bug                                                                        </span>
<span class="1109641776173301717" onmouseenter="enter('1109641776173301717');" onmouseout="out('1109641776173301717');" style=""> 824     // https://code.google.com/p/android/issues/detail?id=78706                                          </span>
<span class="4063573973446204119" onmouseenter="enter('4063573973446204119');" onmouseout="out('4063573973446204119');" style=""> 825     private void fixLineSpacing() {                                                                      </span>
<span class="7589713459723827226" onmouseenter="enter('7589713459723827226');" onmouseout="out('7589713459723827226');" style=""> 826         mContentEditText.setLineSpacing(8, 1);                                                           </span>
<span class="-5617495624819001565" onmouseenter="enter('-5617495624819001565');" onmouseout="out('-5617495624819001565');" style=""> 827         int startSelection = mContentEditText.getSelectionStart();                                       </span>
<span class="-3810514162346969633" onmouseenter="enter('-3810514162346969633');" onmouseout="out('-3810514162346969633');" style=""> 828         mContentEditText.setText(mContentEditText.getText());                                            </span>
<span class="-3363651382695067315" onmouseenter="enter('-3363651382695067315');" onmouseout="out('-3363651382695067315');" style=""> 829         mContentEditText.setSelection(startSelection);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830     }                                                                                                    </span>
<span  style=""> 831                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 832     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 833         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 834         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 835         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 836         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837     }                                                                                                    </span>
<span  style=""> 838                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 839     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 840         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 841             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842         }                                                                                                </span>
<span  style=""> 843                                                                                                          </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 844         new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845     }                                                                                                    </span>
<span  style=""> 846                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 847     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 848         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 849             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 850             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 851             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 852             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 853                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 854         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 855             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 856                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858     }                                                                                                    </span>
<span  style=""> 859                                                                                                          </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 860     public void setIsNewNote(boolean isNewNote) {                                                        </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 861         this.mIsNewNote = isNewNote;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862     }                                                                                                    </span>
<span  style=""> 863                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 864     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 865     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 866         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 867             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 868             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 869                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 872     }                                                                                                    </span>
<span  style=""> 873                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 874     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 875         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876     }                                                                                                    </span>
<span  style=""> 877                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 878     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 879         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 880             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 881         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 882             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884     }                                                                                                    </span>
<span  style=""> 885                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 886     private String getNoteTagsString() {                                                                 </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 887         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 888             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 889         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 890             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892     }                                                                                                    </span>
<span  style=""> 893                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 894     /**                                                                                                  </span>
<span class="-5383409035208064059" onmouseenter="enter('-5383409035208064059');" onmouseout="out('-5383409035208064059');" style=""> 895      *  Share bottom sheet callbacks                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 896      */                                                                                                  </span>
<span  style=""> 897                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 898     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style=""> 899     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 900         publishNote();                                                                                   </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 901         mShareBottomSheet.dismiss();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902     }                                                                                                    </span>
<span  style=""> 903                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 904     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style=""> 905     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 906         unpublishNote();                                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 907         mShareBottomSheet.dismiss();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908     }                                                                                                    </span>
<span  style=""> 909                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 910     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style=""> 911     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style=""> 912         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913     }                                                                                                    </span>
<span  style=""> 914                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 915     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style=""> 916     public void onShareDismissed() {                                                                     </span>
<span  style=""> 917                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918     }                                                                                                    </span>
<span  style=""> 919                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 920     /**                                                                                                  </span>
<span class="5481029743273605403" onmouseenter="enter('5481029743273605403');" onmouseout="out('5481029743273605403');" style=""> 921      *  History bottom sheet listeners                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 922      */                                                                                                  </span>
<span  style=""> 923                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 924     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style=""> 925     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 926         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 927         mHistoryBottomSheet.dismiss();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928     }                                                                                                    </span>
<span  style=""> 929                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 930     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style=""> 931     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 932         mHistoryBottomSheet.dismiss();                                                                   </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 933         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934     }                                                                                                    </span>
<span  style=""> 935                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 936     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style=""> 937     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style=""> 938         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 939             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940         }                                                                                                </span>
<span  style=""> 941                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 942         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 943             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945     }                                                                                                    </span>
<span  style=""> 946                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 947     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style=""> 948     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style=""> 949         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 950     }                                                                                                    </span>
<span  style=""> 951                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 952     /**                                                                                                  </span>
<span class="377242332922771021" onmouseenter="enter('377242332922771021');" onmouseout="out('377242332922771021');" style=""> 953      *  Info bottom sheet listeners                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 954      */                                                                                                  </span>
<span  style=""> 955                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 956     @Override                                                                                            </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style=""> 957     public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                           </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style=""> 958         NoteUtils.setNotePin(mNote, isSwitchedOn);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959     }                                                                                                    </span>
<span  style=""> 960                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 961     @Override                                                                                            </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style=""> 962     public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                      </span>
<span  style=""> 963                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964     }                                                                                                    </span>
<span  style=""> 965                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 966     @Override                                                                                            </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style=""> 967     public void onInfoCopyLinkClicked() {                                                                </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style=""> 968         copyToClipboard(mNote.getPublishedUrl());                                                        </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 969         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 970     }                                                                                                    </span>
<span  style=""> 971                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 972     @Override                                                                                            </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style=""> 973     public void onInfoShareLinkClicked() {                                                               </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style=""> 974         mInfoBottomSheet.dismiss();                                                                      </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 975         showShareSheet();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976     }                                                                                                    </span>
<span  style=""> 977                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 978     @Override                                                                                            </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style=""> 979     public void onInfoDismissed() {                                                                      </span>
<span  style=""> 980                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981     }                                                                                                    </span>
<span  style=""> 982                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 983     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 984                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 985         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 986         protected void onPreExecute() {                                                                  </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 987             mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                         </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 988             mIsLoadingNote = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989         }                                                                                                </span>
<span  style=""> 990                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 991         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 992         protected Void doInBackground(String... args) {                                                  </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 993             if (getActivity() == null) {                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 994                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995             }                                                                                            </span>
<span  style=""> 996                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 997             String noteID = args[0];                                                                     </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 998             Simplenote application = (Simplenote) getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 999             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1000             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style="">1001                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1002                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style="">1003                 if (getActivity() instanceof NotesActivity) {                                            </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style="">1004                     ((NotesActivity) getActivity()).setCurrentNote(mNote);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005                 }                                                                                        </span>
<span  style="">1006                                                                                                          </span>
<span class="1542207993914056140" onmouseenter="enter('1542207993914056140');" onmouseout="out('1542207993914056140');" style="">1007                 // Set markdown flag for global setting                                                  </span>
<span class="-7484741784406029144" onmouseenter="enter('-7484741784406029144');" onmouseout="out('-7484741784406029144');" style=""><abbr title="1008                 mIsMarkdownEnabledGlobal = PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_MARKDOWN_ENABLED, false);">1008                 mIsMarkdownEnabledGlobal = PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_MARKDOWN_EðŸ”µ</abbr></span>
<span  style="">1009                                                                                                          </span>
<span class="4338974049574039690" onmouseenter="enter('4338974049574039690');" onmouseout="out('4338974049574039690');" style="">1010                 // Set markdown flag for current note                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1011                 if (mNote != null) {                                                                     </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style="">1012                     mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1014             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style="">1015                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1017             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1018         }                                                                                                </span>
<span  style="">1019                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1020         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1021         protected void onPostExecute(Void nada) {                                                        </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style="">1022             if (getActivity() == null || getActivity().isFinishing())                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1023                 return;                                                                                  </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style="">1024             refreshContent(false);                                                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style="">1025             if (mMatchOffsets != null) {                                                                 </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title="1026                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1026                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style="">1027                 mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028             }                                                                                            </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style="">1029             mContentEditText.addTextChangedListener(NoteEditorFragment.this);                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style="">1030             if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                         </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1031                 // Show soft keyboard                                                                    </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style="">1032                 mContentEditText.requestFocus();                                                         </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1033                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1034                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1035                     public void run() {                                                                  </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title="1036                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1036                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSysðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style="">1037                         if (inputMethodManager != null)                                                  </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style="">1038                             inputMethodManager.showSoftInput(mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1040                 }, 100);                                                                                 </span>
<span  style="">1041                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042             }                                                                                            </span>
<span  style="">1043                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1044             // Show tabs if markdown is enabled globally, for current note, and not tablet landscape     </span>
<span class="-1816707351539259697" onmouseenter="enter('-1816707351539259697');" onmouseout="out('-1816707351539259697');" style="">1045             if (mIsMarkdownEnabledGlobal &amp;&amp; mIsMarkdownEnabled) {                                        </span>
<span class="2228506470236232496" onmouseenter="enter('2228506470236232496');" onmouseout="out('2228506470236232496');" style="">1046                 // Get markdown view and update content                                                  </span>
<span class="4041585114564499395" onmouseenter="enter('4041585114564499395');" onmouseout="out('4041585114564499395');" style="">1047                 if (DisplayUtils.isLargeScreenLandscape(getActivity())) {                                </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style="">1048                     mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                       </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""><abbr title="1049                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);">1049                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, nðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1050                 } else {                                                                                 </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style="">1051                     mNoteMarkdownFragment =                                                              </span>
<span class="-8313285091182637202" onmouseenter="enter('-8313285091182637202');" onmouseout="out('-8313285091182637202');" style="">1052                             ((NoteEditorActivity) getActivity()).getNoteMarkdownFragment();              </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style="">1053                     mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1054                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055             }                                                                                            </span>
<span  style="">1056                                                                                                          </span>
<span class="8823595637372647509" onmouseenter="enter('8823595637372647509');" onmouseout="out('8823595637372647509');" style="">1057             getActivity().invalidateOptionsMenu();                                                       </span>
<span  style="">1058                                                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1059             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span  style="">1060                                                                                                          </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style="">1061             mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063     }                                                                                                    </span>
<span  style="">1064                                                                                                          </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style="">1065     private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                     </span>
<span  style="">1066                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1067         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1068         protected Void doInBackground(Void... args) {                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1069             saveNote();                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1070             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1071         }                                                                                                </span>
<span  style="">1072                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1073         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1074         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style="">1075             if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                 </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1076                 // Update links                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1077                 SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                               </span>
<span  style="">1078                                                                                                          </span>
<span class="8451817895915811073" onmouseenter="enter('8451817895915811073');" onmouseout="out('8451817895915811073');" style="">1079                 // Update markdown fragment                                                              </span>
<span class="4041585114564499395" onmouseenter="enter('4041585114564499395');" onmouseout="out('4041585114564499395');" style="">1080                 if (DisplayUtils.isLargeScreenLandscape(getActivity())) {                                </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style="">1081                     mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                       </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""><abbr title="1082                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);">1082                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, nðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1083                 } else {                                                                                 </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style="">1084                     mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088     }                                                                                                    </span>
<span  style="">1089                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1090 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1091     private void saveNote() {                                                                            </span>
<span class="8202353742932995245" onmouseenter="enter('8202353742932995245');" onmouseout="out('8202353742932995245');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1092         if (mNote == null || (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {         </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1093 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1094             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1095                                                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1096             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1097                                                                                                          </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1098             mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1099         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1100     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1101                                                                                                          </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1102     private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                     </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1103                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1104         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1105         protected Void doInBackground(Void... args) {                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1106             saveNote();                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1107             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1108         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1109                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1110         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1111         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1112             if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                 </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1113                 // Update links                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1114                 SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1115             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1116         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1117     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1118                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1119     private void saveNote() {                                                                            </span>
<span class="-2414246363966835945" onmouseenter="enter('-2414246363966835945');" onmouseout="out('-2414246363966835945');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1120         if (mNote == null || (mBottomSheet != null &amp;&amp; mBottomSheet.isShowing())) {                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1121             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1122         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1123                                                                                                          </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1124         String content = getNoteContentString();                                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1125         String tagString = getNoteTagsString();                                                          </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1126         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                       </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1127             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1128             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1129             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1130             // Send pinned event to google analytics if changed                                          </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1131             mNote.setPinned(mPinButton.isChecked());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1132             mNote.save();                                                                                </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1133             if (getActivity() != null) {                                                                 </span>
<span class="9119823558701234173" onmouseenter="enter('9119823558701234173');" onmouseout="out('9119823558701234173');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1134                 if (mNote.isPinned() != mPinButton.isChecked()) {                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1135                     AnalyticsTracker.track(                                                              </span>
<span class="6973099362194796934" onmouseenter="enter('6973099362194796934');" onmouseout="out('6973099362194796934');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1136                             mPinButton.isChecked() ? AnalyticsTracker.Stat.EDITOR_NOTE_PINNED :          </span>
<span class="-7220998596328413851" onmouseenter="enter('-7220998596328413851');" onmouseout="out('-7220998596328413851');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1137                                     AnalyticsTracker.Stat.EDITOR_NOTE_UNPINNED,                          </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1138                             AnalyticsTracker.CATEGORY_NOTE,                                              </span>
<span class="5441361990485968371" onmouseenter="enter('5441361990485968371');" onmouseout="out('5441361990485968371');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1139                             &quot;pin_button&quot;                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1140                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1141                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1142                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1143                 AnalyticsTracker.track(                                                                  </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1144                         AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1145                         AnalyticsTracker.CATEGORY_NOTE,                                                  </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1146                         &quot;editor_save&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1147                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1148             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1149         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1150     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1151                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1152     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1153     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1154                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1155         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1156         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1157         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1158             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1159             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1160             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1161                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1162                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1163                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1164                 if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1165                     mode.setTitleOptionalHint(false);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1166                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1167             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1168             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1169         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1170                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1171         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1172         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1173         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1174         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1175             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1176         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1177                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1178         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1179         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1180         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1181             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1182                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1183                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1184                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1185                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1186                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1187                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1188                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1189                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1190                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1191                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1192                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1193                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1194                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1195                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1196                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1197                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);">1197                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(ConðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1198                         ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);   </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1199                         clipboard.setPrimaryClip(clip);                                                  </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1200                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();">1200                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1201                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1202                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1203                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1204                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1205                     if (mLinkText != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1206                         try {                                                                            </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1207                             Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);         </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1208                             shareIntent.setType(&quot;text/plain&quot;);                                           </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1209                             shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);          </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1210                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));">1210                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.stðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1211                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1212                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1213                         }                                                                                </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1214 =======                                                                                                  </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1215     protected void saveNote() {                                                                          </span>
<span class="-2414246363966835945" onmouseenter="enter('-2414246363966835945');" onmouseout="out('-2414246363966835945');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1216         if (mNote == null || (mBottomSheet != null &amp;&amp; mBottomSheet.isShowing())) {                       </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1217 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1218             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1219         }                                                                                                </span>
<span  style="">1220                                                                                                          </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style="">1221         String content = getNoteContentString();                                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1222         String tagString = getNoteTagsString();                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1223 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="3263351027592661332" onmouseenter="enter('3263351027592661332');" onmouseout="out('3263351027592661332');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1224         if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned())) {                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1225 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1226                                                                                                          </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1227     private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                     </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1228                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1229         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1230         protected Void doInBackground(Void... args) {                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1231             saveNote();                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1232             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1233         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1234                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1235         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1236         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1237             if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                 </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1238                 // Update links                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1239                 SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1240             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1241         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1242     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1243                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1244     private void saveNote() {                                                                            </span>
<span class="-2414246363966835945" onmouseenter="enter('-2414246363966835945');" onmouseout="out('-2414246363966835945');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1245         if (mNote == null || (mBottomSheet != null &amp;&amp; mBottomSheet.isShowing())) {                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1246             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1247         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1248                                                                                                          </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1249         String content = getNoteContentString();                                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1250         String tagString = getNoteTagsString();                                                          </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1251         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                       </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1252             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1253             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1254             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1255             // Send pinned event to google analytics if changed                                          </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1256             mNote.setPinned(mPinButton.isChecked());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1257             mNote.save();                                                                                </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1258             if (getActivity() != null) {                                                                 </span>
<span class="9119823558701234173" onmouseenter="enter('9119823558701234173');" onmouseout="out('9119823558701234173');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1259                 if (mNote.isPinned() != mPinButton.isChecked()) {                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1260                     AnalyticsTracker.track(                                                              </span>
<span class="6973099362194796934" onmouseenter="enter('6973099362194796934');" onmouseout="out('6973099362194796934');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1261                             mPinButton.isChecked() ? AnalyticsTracker.Stat.EDITOR_NOTE_PINNED :          </span>
<span class="-7220998596328413851" onmouseenter="enter('-7220998596328413851');" onmouseout="out('-7220998596328413851');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1262                                     AnalyticsTracker.Stat.EDITOR_NOTE_UNPINNED,                          </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1263                             AnalyticsTracker.CATEGORY_NOTE,                                              </span>
<span class="5441361990485968371" onmouseenter="enter('5441361990485968371');" onmouseout="out('5441361990485968371');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1264                             &quot;pin_button&quot;                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1265                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1266                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1267                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1268                 AnalyticsTracker.track(                                                                  </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1269                         AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1270                         AnalyticsTracker.CATEGORY_NOTE,                                                  </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1271                         &quot;editor_save&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1272                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1273             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1274         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1275     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1276                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1277     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1278     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1279                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1280         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1281         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1282         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1283             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1284             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1285             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1286                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1287                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1288                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1289                 if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1290                     mode.setTitleOptionalHint(false);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1291                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1292             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1293             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1294         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1295                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1296         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1297         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1298         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1299         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1300             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1301         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1302                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1303         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1304         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1305         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1306             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1307                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1308                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1309                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1310                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1311                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1312                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1313                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1314                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1315                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1316                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1317                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1318                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1319                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1320                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1321                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1322                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);">1322                         ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(ConðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1323                         ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);   </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1324                         clipboard.setPrimaryClip(clip);                                                  </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1325                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();">1325                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1326                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1327                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1328                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1329                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1330                     if (mLinkText != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1331                         try {                                                                            </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1332                             Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);         </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1333                             shareIntent.setType(&quot;text/plain&quot;);                                           </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1334                             shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);          </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1335                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));">1335                             startActivity(Intent.createChooser(shareIntent, getResources().getString(R.stðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1336                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1337                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1338                         }                                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1339                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1340                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1341                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1342                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1343                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1344             }                                                                                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1345 =======                                                                                                  </span>
<span class="-9180039163235450589" onmouseenter="enter('-9180039163235450589');" onmouseout="out('-9180039163235450589');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1346         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked(), mIsMarkdownEnabled)) {   </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1347 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1348             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1349             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1350             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1351             mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style="">1352             // Send pinned event to google analytics if changed                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1353             mNote.save();                                                                                </span>
<span  style="">1354                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1355             AnalyticsTracker.track(                                                                      </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="">1356                     AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1357                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1358                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1359             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361     }                                                                                                    </span>
<span  style="">1362                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style="">1363     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style="">1364     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span  style="">1365                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style="">1366         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1367         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style="">1368         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style="">1369             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style="">1370             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style="">1371             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style="">1372                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style="">1373                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style="">1374                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style="">1375                 if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style="">1376                     mode.setTitleOptionalHint(false);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377                 }                                                                                        </span>
<span  style="">1378                                                                                                          </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style="">1379                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1381             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382         }                                                                                                </span>
<span  style="">1383                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style="">1384         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style="">1385         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1386         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style="">1387         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style="">1388             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389         }                                                                                                </span>
<span  style="">1390                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style="">1391         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1392         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style="">1393         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style="">1394             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style="">1395                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style="">1396                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1397                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style="">1398                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style="">1399                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style="">1400                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style="">1401                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1402                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1403                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style="">1405                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1407                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style="">1408                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style="">1409                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style="">1410                         copyToClipboard(mLinkText);                                                      </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title="1411                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();">1411                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="">1412                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1414                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style="">1415                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style="">1416                     if (mLinkText != null) {                                                             </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style="">1417                         showShareSheet();                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="">1418                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1420                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">1421                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1422                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424         }                                                                                                </span>
<span  style="">1425                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style="">1426         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1427         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style="">1428         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1429             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1431     };                                                                                                   </span>
<span  style="">1432                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1433     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1434     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1435     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1436     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1437         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1438             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1439             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1440                 return;                                                                                  </span>
<span  style="">1441                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1442             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1443             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1444                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1445                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1446                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1446                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1447                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1448                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1449                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1450                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451                 }                                                                                        </span>
<span  style="">1452                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1453                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1454                 if (getActivity() != null) {                                                             </span>
<span class="7722450347844852596" onmouseenter="enter('7722450347844852596');" onmouseout="out('7722450347844852596');" style=""><abbr title="1455                     mActionMode = ((AppCompatActivity)getActivity()).startSupportActionMode(mActionModeCallback);">1455                     mActionMode = ((AppCompatActivity)getActivity()).startSupportActionMode(mActionModeCaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1456                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1457                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458                     }                                                                                    </span>
<span  style="">1459                                                                                                          </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1460                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1462             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1463                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1464                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1466         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1467             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1468             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470     }                                                                                                    </span>
<span  style="">1471                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1472     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1473         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1474             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1475                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1476                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1477             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1478                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1479                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1480             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1481                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1482                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1483             } else {                                                                                     </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="">1484                 mViewLinkMenuItem.setIcon(mWebIcon);                                                     </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1485                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488     }                                                                                                    </span>
<span  style="">1489                                                                                                          </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style="">1490     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style="">1491     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1492         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1493         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1494             if (!isAdded()) return;                                                                      </span>
<span  style="">1495                                                                                                          </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1496             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1497                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1498                 public void run() {                                                                      </span>
<span  style="">1499                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style="">1500                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1501                     mNote.save();                                                                        </span>
<span  style="">1502                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style="">1503                     updatePublishedState(false);                                                         </span>
<span  style="">1504                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1506             });                                                                                          </span>
<span  style="">1507                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1508         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1509     };                                                                                                   </span>
<span  style="">1510                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style="">1511     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style="">1512     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1513         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1514         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1515             if (!isAdded()) return;                                                                      </span>
<span  style="">1516                                                                                                          </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1517             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1518                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1519                 public void run() {                                                                      </span>
<span  style="">1520                                                                                                          </span>
<span class="6844751493350163385" onmouseenter="enter('6844751493350163385');" onmouseout="out('6844751493350163385');" style="">1521                     if (mHistoryBottomSheet.isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {     </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1522                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style="">1523                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1524                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1525                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1526             });                                                                                          </span>
<span  style="">1527                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1529     };                                                                                                   </span>
<span  style="">1530                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1531     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1532         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1533             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1534             mNote.save();                                                                                </span>
<span  style="">1535                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1536             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1537             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1538                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1539             AnalyticsTracker.track(                                                                      </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="">1540                     (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                        </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="">1541                             AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                               </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1542                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1543                     &quot;publish_note_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1544             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546     }                                                                                                    </span>
<span  style="">1547                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1548     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span  style="">1549                                                                                                          </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1550         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1551             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552         }                                                                                                </span>
<span  style="">1553                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1554         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1555         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1556                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1557         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1558             if (mNote.isPublished()) {                                                                   </span>
<span class="-7688080222453146357" onmouseenter="enter('-7688080222453146357');" onmouseout="out('-7688080222453146357');" style="">1559                 SnackbarUtils.showSnackbar(getActivity(), R.string.publish_successful,                   </span>
<span class="1517681013250933454" onmouseenter="enter('1517681013250933454');" onmouseout="out('1517681013250933454');" style="">1560                         R.color.simplenote_positive_green,                                               </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1561                         Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1562                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1563                             public void onClick(View v) {                                                </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1564                                 unpublishNote();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1566                         });                                                                              </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1567                 copyToClipboard(mNote.getPublishedUrl());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1568             } else {                                                                                     </span>
<span class="-153294762762717121" onmouseenter="enter('-153294762762717121');" onmouseout="out('-153294762762717121');" style="">1569                 SnackbarUtils.showSnackbar(getActivity(), R.string.unpublish_successful,                 </span>
<span class="8669465432699610879" onmouseenter="enter('8669465432699610879');" onmouseout="out('8669465432699610879');" style="">1570                         R.color.simplenote_negative_red,                                                 </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1571                         Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1572                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1573                             public void onClick(View v) {                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1574                                 publishNote();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1576                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1578         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1579             if (mNote.isPublished()) {                                                                   </span>
<span class="3959102095641312076" onmouseenter="enter('3959102095641312076');" onmouseout="out('3959102095641312076');" style="">1580                 SnackbarUtils.showSnackbar(getActivity(), R.string.unpublish_error,                      </span>
<span class="131095352187516196" onmouseenter="enter('131095352187516196');" onmouseout="out('131095352187516196');" style="">1581                         R.color.simplenote_negative_red, Snackbar.LENGTH_LONG);                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1582             } else {                                                                                     </span>
<span class="-2257940760039104199" onmouseenter="enter('-2257940760039104199');" onmouseout="out('-2257940760039104199');" style="">1583                 SnackbarUtils.showSnackbar(getActivity(), R.string.publish_error,                        </span>
<span class="131095352187516196" onmouseenter="enter('131095352187516196');" onmouseout="out('131095352187516196');" style="">1584                         R.color.simplenote_negative_red, Snackbar.LENGTH_LONG);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587     }                                                                                                    </span>
<span  style="">1588                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1589     private void publishNote() {                                                                         </span>
<span  style="">1590                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1591         if (isAdded()) {                                                                                 </span>
<span class="-3919291052884701924" onmouseenter="enter('-3919291052884701924');" onmouseout="out('-3919291052884701924');" style="">1592             mPublishingSnackbar = SnackbarUtils.showSnackbar(getActivity(), R.string.publishing,         </span>
<span class="-1976946684900965607" onmouseenter="enter('-1976946684900965607');" onmouseout="out('-1976946684900965607');" style="">1593                     R.color.simplenote_blue, Snackbar.LENGTH_INDEFINITE);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594         }                                                                                                </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1595         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1596     }                                                                                                    </span>
<span  style="">1597                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1598     private void unpublishNote() {                                                                       </span>
<span  style="">1599                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1600         if (isAdded()) {                                                                                 </span>
<span class="-7608597247223762409" onmouseenter="enter('-7608597247223762409');" onmouseout="out('-7608597247223762409');" style="">1601             mPublishingSnackbar = SnackbarUtils.showSnackbar(getActivity(), R.string.unpublishing,       </span>
<span class="-1976946684900965607" onmouseenter="enter('-1976946684900965607');" onmouseout="out('-1976946684900965607');" style="">1602                     R.color.simplenote_blue, Snackbar.LENGTH_INDEFINITE);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1603         }                                                                                                </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1604         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1605     }                                                                                                    </span>
<span  style="">1606                                                                                                          </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1607     private void copyToClipboard(String text) {                                                          </span>
<span class="4796955211675373396" onmouseenter="enter('4796955211675373396');" onmouseout="out('4796955211675373396');" style=""><abbr title="1608         ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SERVICE);">1608         ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_ðŸ”µ</abbr></span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1609         ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                       </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1610         clipboard.setPrimaryClip(clip);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1611     }                                                                                                    </span>
<span  style="">1612                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1613     private void showShareSheet() {                                                                      </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1614         if (isAdded()) {                                                                                 </span>
<span class="-7649938693804610664" onmouseenter="enter('-7649938693804610664');" onmouseout="out('-7649938693804610664');" style="">1615             if (mShareBottomSheet == null) {                                                             </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style="">1616                 mShareBottomSheet = new ShareBottomSheetDialog(this, this);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617             }                                                                                            </span>
<span class="-5706261914377124016" onmouseenter="enter('-5706261914377124016');" onmouseout="out('-5706261914377124016');" style="">1618             mShareBottomSheet.show(mNote);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620     }                                                                                                    </span>
<span  style="">1621                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1622     private void showInfoSheet() {                                                                       </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1623         if (isAdded()) {                                                                                 </span>
<span class="-1884243309106371316" onmouseenter="enter('-1884243309106371316');" onmouseout="out('-1884243309106371316');" style="">1624             if (mInfoBottomSheet == null) {                                                              </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style="">1625                 mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1626             }                                                                                            </span>
<span class="-9107266656084872702" onmouseenter="enter('-9107266656084872702');" onmouseout="out('-9107266656084872702');" style="">1627             mInfoBottomSheet.show(mNote);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1628         }                                                                                                </span>
<span  style="">1629                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1630     }                                                                                                    </span>
<span  style="">1631                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1632     private void showHistorySheet() {                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1633         if (isAdded()) {                                                                                 </span>
<span class="-2356271684565414206" onmouseenter="enter('-2356271684565414206');" onmouseout="out('-2356271684565414206');" style="">1634             if (mHistoryBottomSheet == null) {                                                           </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style="">1635                 mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1636             }                                                                                            </span>
<span  style="">1637                                                                                                          </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1638             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1639             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1639             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1640             saveNote();                                                                                  </span>
<span  style="">1641                                                                                                          </span>
<span class="-8018381336008501546" onmouseenter="enter('-8018381336008501546');" onmouseout="out('-8018381336008501546');" style="">1642             mHistoryBottomSheet.show(mNote);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1643         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1644     }                                                                                                    </span>
<span  style="">1645                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1646     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1647      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1648      */                                                                                                  </span>
<span  style="">1649                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1650     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1651     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1652                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1653     }                                                                                                    </span>
<span  style="">1654                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1655     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1656     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1656     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1657         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1658             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1659                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1660                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1661                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1662                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1663                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1664                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1665                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1666                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1667                                 }                                                                        </span>
<span  style="">1668                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1669                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1670                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1672                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1673                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1674                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1675                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1676                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679     }                                                                                                    </span>
<span  style="">1680                                                                                                          </span>
<span  style="">1681                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1682     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1683     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1684         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1685     }                                                                                                    </span>
<span  style="">1686                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1687     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1688     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1689         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1690         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1691             return;                                                                                      </span>
<span  style="">1692                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1693         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1694         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1695             return;                                                                                      </span>
<span  style="">1696                                                                                                          </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style="">1697         note.setContent(getNoteContentString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7 import android.content.Intent;                                                                           </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   8 import android.database.Cursor;                                                                          </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  10 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  12 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  13 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  14 import android.os.Handler;                                                                               </span>
<span class="7113341696390925527" onmouseenter="enter('7113341696390925527');" onmouseout="out('7113341696390925527');" style="">  15 import android.support.design.widget.Snackbar;                                                           </span>
<span class="1235021250095752497" onmouseenter="enter('1235021250095752497');" onmouseout="out('1235021250095752497');" style="">  16 import android.support.v4.app.Fragment;                                                                  </span>
<span class="6292606154682534015" onmouseenter="enter('6292606154682534015');" onmouseout="out('6292606154682534015');" style="">  17 import android.support.v7.app.AppCompatActivity;                                                         </span>
<span class="-8226814767277370585" onmouseenter="enter('-8226814767277370585');" onmouseout="out('-8226814767277370585');" style="">  18 import android.support.v7.view.ActionMode;                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  19 import android.text.Editable;                                                                            </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  20 import android.text.Spanned;                                                                             </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  21 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  22 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  23 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  24 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  25 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  26 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  27 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  28 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  29 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  30 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  31 import android.view.ViewGroup;                                                                           </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  32 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  33 import android.webkit.WebView;                                                                           </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  34 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  35 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  36 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  37 import android.widget.Toast;                                                                             </span>
<span  style="">  38                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  39 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  40 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  41 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  42 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  43 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  44 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  45 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  46 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  47 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  48 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="">  49 import com.automattic.simplenote.utils.SnackbarUtils;                                                    </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  50 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  51 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  52 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  53 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  54 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="">  55 import com.commonsware.cwac.anddown.AndDown;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  56 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  57 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  58 import com.simperium.client.Query;                                                                       </span>
<span  style="">  59                                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  60 import java.util.Calendar;                                                                               </span>
<span  style="">  61                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  62 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  63         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  64         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  65         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  66         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-1616372346803851838" onmouseenter="enter('-1616372346803851838');" onmouseout="out('-1616372346803851838');" style="">  67         InfoBottomSheetDialog.InfoSheetListener {                                                        </span>
<span  style="">  68                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  69     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  70     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  71     static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="7675482774590431252" onmouseenter="enter('7675482774590431252');" onmouseout="out('7675482774590431252');" style="">  72     static public final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  73     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  74     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="">  75     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="">  76     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="4572903639827164119" onmouseenter="enter('4572903639827164119');" onmouseout="out('4572903639827164119');" style="">  77     public static final int THEME_LIGHT = 0;                                                             </span>
<span class="6287065810722210354" onmouseenter="enter('6287065810722210354');" onmouseout="out('6287065810722210354');" style="">  78     public static final int THEME_DARK = 1;                                                              </span>
<span  style="">  79                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  80     private Note mNote;                                                                                  </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  81     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style="">  82                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  83     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  84     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span  style="">  85                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  86     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style="">  87     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style="">  88     private Handler mHistoryTimeoutHandler;                                                              </span>
<span  style="">  89                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  90     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  91     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  92 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="275494556225166536" onmouseenter="enter('275494556225166536');" onmouseout="out('275494556225166536');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  93 private boolean mIsNewNote, mIsLoadingNote;                                                              </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  94 ||||||| BASE                                                                                             </span>
<span class="3983635637410949309" onmouseenter="enter('3983635637410949309');" onmouseout="out('3983635637410949309');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95 private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton;                                        </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  96 =======                                                                                                  </span>
<span class="8299144298417847580" onmouseenter="enter('8299144298417847580');" onmouseout="out('8299144298417847580');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  97 private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton, mIsMarkdownEnabled, mIsMarkdownEnabledGlobal;">  97 private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton, mIsMarkdownEnabled, mIsMarkdownEnabledGðŸ”µ</abbr></span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  98 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span  style="">  99                                                                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 100     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 101     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 102     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 103     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 104     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-6925628041030715987" onmouseenter="enter('-6925628041030715987');" onmouseout="out('-6925628041030715987');" style=""> 105     private Drawable mEmailIcon, mWebIcon, mMapIcon, mCallIcon;                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 106     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 107     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 108     private int mCurrentCursorPosition;                                                                  </span>
<span class="7045155254268917571" onmouseenter="enter('7045155254268917571');" onmouseout="out('7045155254268917571');" style=""> 109     private String mLastContentString;                                                                   </span>
<span  style=""> 110                                                                                                          </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 111     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 112     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 113     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 115     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 116     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 117     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 118     private WebView mMarkdown;                                                                           </span>
<span  style=""> 119                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 120     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 121      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 122      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 123      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 124     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125     }                                                                                                    </span>
<span  style=""> 126                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 127     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 128     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 129         super.onCreate(savedInstanceState);                                                              </span>
<span  style=""> 130                                                                                                          </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 131         if (getActivity() != null) {                                                                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 132             Simplenote currentApp = (Simplenote) getActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 133             mNotesBucket = currentApp.getNotesBucket();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134         }                                                                                                </span>
<span  style=""> 135                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 136         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 136         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style=""><abbr title=" 137         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 137         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style=""><abbr title=" 138         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 138         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, RðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style=""><abbr title=" 139         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 139         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, RðŸ”µ</abbr></span>
<span  style=""> 140                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 141         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 142         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 143         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 144                                                                                                          </span>
<span class="-6036514116585965367" onmouseenter="enter('-6036514116585965367');" onmouseout="out('-6036514116585965367');" style=""> 145         mLastContentString = &quot;&quot;;                                                                         </span>
<span  style=""> 146                                                                                                          </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 147         mMatchHighlighter = new TextHighlighter(getActivity(),                                           </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 148                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 148                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 149         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 150             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 151             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 152                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 153                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 154                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155             }                                                                                            </span>
<span  style=""> 156                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 158             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 159                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 160                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161             }                                                                                            </span>
<span  style=""> 162                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 163             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 164             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 165                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166             }                                                                                            </span>
<span  style=""> 167                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 168             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 169             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 170                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 171                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 172                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 173                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 174                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 175                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 176                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 177                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 178                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 179                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 179                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.forðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 180                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 182         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 185     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 186     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 187         setHasOptionsMenu(true);                                                                         </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 188         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 189         mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));              </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 190         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 191         mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                 </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 192         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 193         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span  style=""> 194                                                                                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 195         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style=""> 196                                                                                                          </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 197         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 198         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 199             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 200 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="8823595637372647509" onmouseenter="enter('8823595637372647509');" onmouseout="out('8823595637372647509');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 201             getActivity().invalidateOptionsMenu();                                                       </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 202 ||||||| BASE                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 203             public void onClick(View v) {                                                                </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 204                 if (mPinButton.isChecked()) {                                                            </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 205                     // Friendly message to the user as to what this button does.                         </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 206                     Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 207                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 208             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 209         });                                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 210                                                                                                          </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 211         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 212         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 213             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 214         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 215                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 216         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 217                                                                                                          </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 218         // Load note if we were passed a note Id                                                         </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 219         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 220         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 221             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 222             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 223                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 224 =======                                                                                                  </span>
<span class="4785891395116813196" onmouseenter="enter('4785891395116813196');" onmouseout="out('4785891395116813196');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 225             mMarkdown = (WebView) rootView.findViewById(R.id.markdown);                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 226                                                                                                          </span>
<span class="8669746627669403722" onmouseenter="enter('8669746627669403722');" onmouseout="out('8669746627669403722');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 227             switch (PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_THEME, THEME_LIGHT)) {            </span>
<span class="-1862280279846167044" onmouseenter="enter('-1862280279846167044');" onmouseout="out('-1862280279846167044');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 228                 case THEME_DARK:                                                                         </span>
<span class="2431268192882105499" onmouseenter="enter('2431268192882105499');" onmouseout="out('2431268192882105499');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 229                     mCss = &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;dark.css\&quot; /&gt;&quot;;            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 230                     break;                                                                               </span>
<span class="-539754023432181399" onmouseenter="enter('-539754023432181399');" onmouseout="out('-539754023432181399');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 231                 case THEME_LIGHT:                                                                        </span>
<span class="4484195514752522265" onmouseenter="enter('4484195514752522265');" onmouseout="out('4484195514752522265');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 232                     mCss = &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;light.css\&quot; /&gt;&quot;;           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 233                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 234             }                                                                                            </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 235 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236         }                                                                                                </span>
<span  style=""> 237                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 238         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style=""> 239                                                                                                          </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 240         // Load note if we were passed a note Id                                                         </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 241         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 242         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 243             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 244             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 245                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246             }                                                                                            </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 247             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 248             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249         }                                                                                                </span>
<span  style=""> 250                                                                                                          </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 251 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252 	}                                                                                                       </span>
<span  style=""> 253                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 254     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 255     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 256         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 257         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 258         mNotesBucket.addListener(this);                                                                  </span>
<span  style=""> 259                                                                                                          </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 260         mTagView.setOnTagAddedListener(this);                                                            </span>
<span  style=""> 261                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 262         if (mContentEditText != null) {                                                                  </span>
<span class="-4898136971195212464" onmouseenter="enter('-4898136971195212464');" onmouseout="out('-4898136971195212464');" style=""><abbr title=" 263             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_FONT_SIZE, 14));"> 263             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265     }                                                                                                    </span>
<span  style=""> 266                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 267     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 268     public void onPause() {                                                                              </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 269         mNotesBucket.removeListener(this);                                                               </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 270         // Hide soft keyboard if it is showing...                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 271         if (getActivity() != null) {                                                                     </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 272             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 272             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 273             if (inputMethodManager != null) {                                                            </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 274                 inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276         }                                                                                                </span>
<span  style=""> 277                                                                                                          </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 278         // Delete the note if it is new and has empty fields                                             </span>
<span class="-2219905285758853631" onmouseenter="enter('-2219905285758853631');" onmouseout="out('-2219905285758853631');" style=""> 279         if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty()) {                                              </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 280             mNote.delete();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 281         } else {                                                                                         </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 282             saveNote();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283         }                                                                                                </span>
<span  style=""> 284                                                                                                          </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 285         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 286                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 287         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 288             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289         }                                                                                                </span>
<span  style=""> 290                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 291         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 292             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span  style=""> 294                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 295         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 296             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297         }                                                                                                </span>
<span  style=""> 298                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 299         mHighlighter.stop();                                                                             </span>
<span  style=""> 300                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 301         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302     }                                                                                                    </span>
<span  style=""> 303                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 304     @Override                                                                                            </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style=""> 305     public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                  </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style=""><abbr title=" 306         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {"> 306         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 307             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308         }                                                                                                </span>
<span  style=""> 309                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 310         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 311                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 312         if (mNote != null) {                                                                             </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 313             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                         </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 314             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 315                                                                                                          </span>
<span class="-2352342880963919129" onmouseenter="enter('-2352342880963919129');" onmouseout="out('-2352342880963919129');" style=""> 316             if (mIsMarkdownEnabledGlobal) {                                                              </span>
<span class="4614931194864693025" onmouseenter="enter('4614931194864693025');" onmouseout="out('4614931194864693025');" style=""> 317                 MenuItem markdownEnableItem = menu.findItem(R.id.menu_markdown_enable);                  </span>
<span class="-2633107343982386844" onmouseenter="enter('-2633107343982386844');" onmouseout="out('-2633107343982386844');" style=""> 318                 markdownEnableItem.setChecked(mNote.isMarkdownEnabled());                                </span>
<span class="3477449218696725297" onmouseenter="enter('3477449218696725297');" onmouseout="out('3477449218696725297');" style=""> 319                 markdownEnableItem.setVisible(true);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320             }                                                                                            </span>
<span  style=""> 321                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 322             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 323             if (mNote.isDeleted())                                                                       </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 324                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 325             else                                                                                         </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 326                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327         }                                                                                                </span>
<span  style=""> 328                                                                                                          </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style=""> 329         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);             </span>
<span  style=""> 330                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 331         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332     }                                                                                                    </span>
<span  style=""> 333                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 334     @Override                                                                                            </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style=""> 335     public boolean onOptionsItemSelected(MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 336         switch (item.getItemId()) {                                                                      </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 337             case R.id.menu_view_info:                                                                    </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 338                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 339                 return true;                                                                             </span>
<span  style=""> 340                                                                                                          </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 341             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 342                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 343                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 344             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 345                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 346                 return true;                                                                             </span>
<span class="-2326571002560832814" onmouseenter="enter('-2326571002560832814');" onmouseout="out('-2326571002560832814');" style=""> 347             case R.id.menu_markdown_enable:                                                              </span>
<span class="2366870288831262173" onmouseenter="enter('2366870288831262173');" onmouseout="out('2366870288831262173');" style=""> 348                 mIsMarkdownEnabled = !item.isChecked();                                                  </span>
<span class="1180540947331910458" onmouseenter="enter('1180540947331910458');" onmouseout="out('1180540947331910458');" style=""> 349                 item.setChecked(mIsMarkdownEnabled);                                                     </span>
<span  style=""> 350                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 351                 if (mIsMarkdownEnabled) {                                                                </span>
<span class="-6508659890551353976" onmouseenter="enter('-6508659890551353976');" onmouseout="out('-6508659890551353976');" style=""> 352                     ((NoteEditorActivity) getActivity()).showTabs();                                     </span>
<span  style=""> 353                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 354                     if (mNoteMarkdownFragment == null) {                                                 </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 355                         // Get markdown fragment and update content                                      </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 356                         mNoteMarkdownFragment =                                                          </span>
<span class="-8313285091182637202" onmouseenter="enter('-8313285091182637202');" onmouseout="out('-8313285091182637202');" style=""> 357                                 ((NoteEditorActivity) getActivity()).getNoteMarkdownFragment();          </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style=""> 358                         mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 360                 } else {                                                                                 </span>
<span class="-2274167655435036909" onmouseenter="enter('-2274167655435036909');" onmouseout="out('-2274167655435036909');" style=""> 361                     ((NoteEditorActivity) getActivity()).hideTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362                 }                                                                                        </span>
<span  style=""> 363                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 364                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 365             case R.id.menu_delete:                                                                       </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 366                 if (!isAdded()) return false;                                                            </span>
<span  style=""> 367                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 368                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 369                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 370             case android.R.id.home:                                                                      </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 371                 if (!isAdded()) return false;                                                            </span>
<span  style=""> 372                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 373                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 374                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 375             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 376                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378     }                                                                                                    </span>
<span  style=""> 379                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 380     private void deleteNote() {                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 381         if (mNote != null) {                                                                             </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style=""> 382             mNote.setDeleted(!mNote.isDeleted());                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 383             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 384             mNote.save();                                                                                </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style=""> 385             Intent resultIntent = new Intent();                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 386             if (mNote.isDeleted()) {                                                                     </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style=""> 387                 resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388             }                                                                                            </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style=""> 389             getActivity().setResult(Activity.RESULT_OK, resultIntent);                                   </span>
<span  style=""> 390                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 391             AnalyticsTracker.track(                                                                      </span>
<span class="272006350020544349" onmouseenter="enter('272006350020544349');" onmouseout="out('272006350020544349');" style=""> 392                     AnalyticsTracker.Stat.EDITOR_NOTE_DELETED,                                           </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 393                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-6954849474356068168" onmouseenter="enter('-6954849474356068168');" onmouseout="out('-6954849474356068168');" style=""> 394                     &quot;trash_menu_item&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 395             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396         }                                                                                                </span>
<span  style=""> 397                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 398         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399     }                                                                                                    </span>
<span  style=""> 400                                                                                                          </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 401     private void shareNote() {                                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 402         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 403             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 404             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 405             AnalyticsTracker.track(                                                                      </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 406                     AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                    </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 407                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 408                     &quot;action_bar_share_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 409             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411     }                                                                                                    </span>
<span  style=""> 412                                                                                                          </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 413     private void showHistory() {                                                                         </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 414         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 415             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 416             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 417             showHistorySheet();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418         }                                                                                                </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style=""> 419         else {                                                                                           </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 420             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422     }                                                                                                    </span>
<span  style=""> 423                                                                                                          </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 424     private void showInfo() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 425         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 426             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 427             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 428             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430     }                                                                                                    </span>
<span  style=""> 431                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 432     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 433         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434     }                                                                                                    </span>
<span  style=""> 435                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 436     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 437         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438     }                                                                                                    </span>
<span  style=""> 439                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 440     protected void showMarkdown() {                                                                      </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 441         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442     }                                                                                                    </span>
<span  style=""> 443                                                                                                          </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 444     private boolean noteIsEmpty() {                                                                      </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 445         return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446     }                                                                                                    </span>
<span  style=""> 447                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 448     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 449         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 451         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style=""> 452             mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                               </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""> 453                     new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455     }                                                                                                    </span>
<span  style=""> 456                                                                                                          </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 457     public void setNote(String noteID){                                                                  </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 458         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459     }                                                                                                    </span>
<span  style=""> 460                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 461     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 462         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 463             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 464                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 465         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 466                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 467         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 468             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 469         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 470             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471         }                                                                                                </span>
<span  style=""> 472                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 473         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 474         if (mNote != null) {                                                                             </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 475             if (mIsNewNote &amp;&amp; noteIsEmpty())                                                             </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 476                 mNote.delete();                                                                          </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 477             else if (mNote != null)                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 478                 saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479         }                                                                                                </span>
<span  style=""> 480                                                                                                          </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 481         new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482     }                                                                                                    </span>
<span  style=""> 483                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 484     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 485         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 486         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 487         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488     }                                                                                                    </span>
<span  style=""> 489                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 490     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 491         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 492             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 493                                                                                                          </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 494             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 494             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span  style=""> 495                                                                                                          </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 496             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 497                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 498             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 499                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 500                 mNote.save();                                                                            </span>
<span  style=""> 501                                                                                                          </span>
<span class="-5094013145931261947" onmouseenter="enter('-5094013145931261947');" onmouseout="out('-5094013145931261947');" style=""><abbr title=" 502                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) {"> 502                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 503                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505             }                                                                                            </span>
<span  style=""> 506                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 507             afterTextChanged(mContentEditText.getText());                                                </span>
<span  style=""> 508                                                                                                          </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 509             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511     }                                                                                                    </span>
<span  style=""> 512                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 513     private void updateTagList() {                                                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 514         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 515         if (activity == null) return;                                                                    </span>
<span  style=""> 516                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 517         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 518         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519     }                                                                                                    </span>
<span  style=""> 520                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 521     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 522         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 523         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 524         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 525         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 526         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 527         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 528         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 529         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 530                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 531         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 532                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 533         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 534                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 535         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 536         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 537             return newText.length();                                                                     </span>
<span  style=""> 538                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 539         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 540         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 541                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 542         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 543             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 543             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 544             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 544             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 545         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 546             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547         }                                                                                                </span>
<span  style=""> 548                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 549         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 550         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 551             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 552                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 553         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 554         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555     }                                                                                                    </span>
<span  style=""> 556                                                                                                          </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 557     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 558         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 559         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 560             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 562     };                                                                                                   </span>
<span  style=""> 563                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 564     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 565     public void onTagsChanged(String tagString) {                                                        </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 566         if (mNote == null || !isAdded()) return;                                                         </span>
<span  style=""> 567                                                                                                          </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 568         if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 569             AnalyticsTracker.track(                                                                      </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 570                     AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                              </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 571                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 572                     &quot;tag_added_to_note&quot;                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 573             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574         }                                                                                                </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style=""> 575         else {                                                                                           </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 576             AnalyticsTracker.track(                                                                      </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 577                     AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 578                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 579                     &quot;tag_removed_from_note&quot;                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 580             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581         }                                                                                                </span>
<span  style=""> 582                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 583         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 584         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 585         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 586         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587     }                                                                                                    </span>
<span  style=""> 588                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 589     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 590     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 591         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592     }                                                                                                    </span>
<span  style=""> 593                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 594     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 595     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="2514214199025893024" onmouseenter="enter('2514214199025893024');" onmouseout="out('2514214199025893024');" style=""> 596         // check that the content has really changed (line spacing fix)                                  </span>
<span class="6844133105735349548" onmouseenter="enter('6844133105735349548');" onmouseout="out('6844133105735349548');" style=""> 597         if (!mLastContentString.equals(editable.toString())) {                                           </span>
<span class="-6397051223762453255" onmouseenter="enter('-6397051223762453255');" onmouseout="out('-6397051223762453255');" style=""> 598             mLastContentString = editable.toString();                                                    </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 599         setTitleSpan(editable);                                                                          </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 600         attemptAutoList(editable);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602     }                                                                                                    </span>
<span  style=""> 603                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 604     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 605     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span  style=""> 606                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 607         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 608         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 609             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 610             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611         }                                                                                                </span>
<span  style=""> 612                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 613         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 614         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 615             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 616             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618     }                                                                                                    </span>
<span  style=""> 619                                                                                                          </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 620     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 621         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 622         // Remove any existing size spans                                                                </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 623         RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 624         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 625             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 627         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 628         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 629             return;                                                                                      </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 630         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 630         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span  style=""> 631                                                                                                          </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style=""> 632         fixLineSpacing();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633     }                                                                                                    </span>
<span  style=""> 634                                                                                                          </span>
<span class="7193322245360440607" onmouseenter="enter('7193322245360440607');" onmouseout="out('7193322245360440607');" style=""> 635     // Fix for a line spacing bug                                                                        </span>
<span class="1109641776173301717" onmouseenter="enter('1109641776173301717');" onmouseout="out('1109641776173301717');" style=""> 636     // https://code.google.com/p/android/issues/detail?id=78706                                          </span>
<span class="4063573973446204119" onmouseenter="enter('4063573973446204119');" onmouseout="out('4063573973446204119');" style=""> 637     private void fixLineSpacing() {                                                                      </span>
<span class="7589713459723827226" onmouseenter="enter('7589713459723827226');" onmouseout="out('7589713459723827226');" style=""> 638         mContentEditText.setLineSpacing(8, 1);                                                           </span>
<span class="-5617495624819001565" onmouseenter="enter('-5617495624819001565');" onmouseout="out('-5617495624819001565');" style=""> 639         int startSelection = mContentEditText.getSelectionStart();                                       </span>
<span class="-3810514162346969633" onmouseenter="enter('-3810514162346969633');" onmouseout="out('-3810514162346969633');" style=""> 640         mContentEditText.setText(mContentEditText.getText());                                            </span>
<span class="-3363651382695067315" onmouseenter="enter('-3363651382695067315');" onmouseout="out('-3363651382695067315');" style=""> 641         mContentEditText.setSelection(startSelection);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642     }                                                                                                    </span>
<span  style=""> 643                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 644     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 645         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 646         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 647         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 648         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649     }                                                                                                    </span>
<span  style=""> 650                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 651     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 652         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 653             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654         }                                                                                                </span>
<span  style=""> 655                                                                                                          </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 656         new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657     }                                                                                                    </span>
<span  style=""> 658                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 659     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 660         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 661             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 662             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 663             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 664             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 665                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 666         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 667             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 668                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670     }                                                                                                    </span>
<span  style=""> 671                                                                                                          </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 672     public void setIsNewNote(boolean isNewNote) {                                                        </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 673         this.mIsNewNote = isNewNote;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674     }                                                                                                    </span>
<span  style=""> 675                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 676     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 677     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 678         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 679             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 680             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 681                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684     }                                                                                                    </span>
<span  style=""> 685                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 686     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 687         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688     }                                                                                                    </span>
<span  style=""> 689                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 690     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 691         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 692             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 693         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 694             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696     }                                                                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 698     private String getNoteTagsString() {                                                                 </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 699         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 700             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 701         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 702             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704     }                                                                                                    </span>
<span  style=""> 705                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 706     /**                                                                                                  </span>
<span class="-5383409035208064059" onmouseenter="enter('-5383409035208064059');" onmouseout="out('-5383409035208064059');" style=""> 707      *  Share bottom sheet callbacks                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 708      */                                                                                                  </span>
<span  style=""> 709                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 710     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style=""> 711     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 712         publishNote();                                                                                   </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 713         mShareBottomSheet.dismiss();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714     }                                                                                                    </span>
<span  style=""> 715                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 716     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style=""> 717     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 718         unpublishNote();                                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 719         mShareBottomSheet.dismiss();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720     }                                                                                                    </span>
<span  style=""> 721                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 722     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style=""> 723     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style=""> 724         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725     }                                                                                                    </span>
<span  style=""> 726                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 727     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style=""> 728     public void onShareDismissed() {                                                                     </span>
<span  style=""> 729                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730     }                                                                                                    </span>
<span  style=""> 731                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 732     /**                                                                                                  </span>
<span class="5481029743273605403" onmouseenter="enter('5481029743273605403');" onmouseout="out('5481029743273605403');" style=""> 733      *  History bottom sheet listeners                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 734      */                                                                                                  </span>
<span  style=""> 735                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 736     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style=""> 737     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 738         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 739         mHistoryBottomSheet.dismiss();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740     }                                                                                                    </span>
<span  style=""> 741                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 742     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style=""> 743     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 744         mHistoryBottomSheet.dismiss();                                                                   </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 745         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746     }                                                                                                    </span>
<span  style=""> 747                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 748     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style=""> 749     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style=""> 750         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 751             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752         }                                                                                                </span>
<span  style=""> 753                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 754         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 755             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 756         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757     }                                                                                                    </span>
<span  style=""> 758                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 759     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style=""> 760     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style=""> 761         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762     }                                                                                                    </span>
<span  style=""> 763                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 764     /**                                                                                                  </span>
<span class="377242332922771021" onmouseenter="enter('377242332922771021');" onmouseout="out('377242332922771021');" style=""> 765      *  Info bottom sheet listeners                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 766      */                                                                                                  </span>
<span  style=""> 767                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 768     @Override                                                                                            </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style=""> 769     public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                           </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style=""> 770         NoteUtils.setNotePin(mNote, isSwitchedOn);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771     }                                                                                                    </span>
<span  style=""> 772                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 773     @Override                                                                                            </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style=""> 774     public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                      </span>
<span  style=""> 775                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776     }                                                                                                    </span>
<span  style=""> 777                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 778     @Override                                                                                            </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style=""> 779     public void onInfoCopyLinkClicked() {                                                                </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style=""> 780         copyToClipboard(mNote.getPublishedUrl());                                                        </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 781         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782     }                                                                                                    </span>
<span  style=""> 783                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 784     @Override                                                                                            </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style=""> 785     public void onInfoShareLinkClicked() {                                                               </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style=""> 786         mInfoBottomSheet.dismiss();                                                                      </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 787         showShareSheet();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788     }                                                                                                    </span>
<span  style=""> 789                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 790     @Override                                                                                            </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style=""> 791     public void onInfoDismissed() {                                                                      </span>
<span  style=""> 792                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793     }                                                                                                    </span>
<span  style=""> 794                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 795     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 796                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 797         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 798         protected void onPreExecute() {                                                                  </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 799             mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                         </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 800             mIsLoadingNote = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801         }                                                                                                </span>
<span  style=""> 802                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 803         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 804         protected Void doInBackground(String... args) {                                                  </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 805             if (getActivity() == null) {                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 806                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807             }                                                                                            </span>
<span  style=""> 808                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 809             String noteID = args[0];                                                                     </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 810             Simplenote application = (Simplenote) getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 811             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 812             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 813                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 814                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 815                 if (getActivity() instanceof NotesActivity) {                                            </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style=""> 816                     ((NotesActivity) getActivity()).setCurrentNote(mNote);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817                 }                                                                                        </span>
<span  style=""> 818                                                                                                          </span>
<span class="1542207993914056140" onmouseenter="enter('1542207993914056140');" onmouseout="out('1542207993914056140');" style=""> 819                 // Set markdown flag for global setting                                                  </span>
<span class="-7484741784406029144" onmouseenter="enter('-7484741784406029144');" onmouseout="out('-7484741784406029144');" style=""><abbr title=" 820                 mIsMarkdownEnabledGlobal = PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_MARKDOWN_ENABLED, false);"> 820                 mIsMarkdownEnabledGlobal = PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_MARKDOWN_EðŸ”µ</abbr></span>
<span  style=""> 821                                                                                                          </span>
<span class="4338974049574039690" onmouseenter="enter('4338974049574039690');" onmouseout="out('4338974049574039690');" style=""> 822                 // Set markdown flag for current note                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 823                 if (mNote != null) {                                                                     </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 824                     mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 826             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 827                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 829             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830         }                                                                                                </span>
<span  style=""> 831                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 832         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 833         protected void onPostExecute(Void nada) {                                                        </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style=""> 834             if (getActivity() == null || getActivity().isFinishing())                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 835                 return;                                                                                  </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 836             refreshContent(false);                                                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 837             if (mMatchOffsets != null) {                                                                 </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 838                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 838                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 839                 mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840             }                                                                                            </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 841             mContentEditText.addTextChangedListener(NoteEditorFragment.this);                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 842             if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                         </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 843                 // Show soft keyboard                                                                    </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 844                 mContentEditText.requestFocus();                                                         </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 845                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 846                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 847                     public void run() {                                                                  </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 848                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 848                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSysðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 849                         if (inputMethodManager != null)                                                  </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 850                             inputMethodManager.showSoftInput(mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 852                 }, 100);                                                                                 </span>
<span  style=""> 853                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 854             }                                                                                            </span>
<span  style=""> 855                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style=""> 856             // Show tabs if markdown is enabled globally, for current note, and not tablet landscape     </span>
<span class="-1816707351539259697" onmouseenter="enter('-1816707351539259697');" onmouseout="out('-1816707351539259697');" style=""> 857             if (mIsMarkdownEnabledGlobal &amp;&amp; mIsMarkdownEnabled) {                                        </span>
<span class="2228506470236232496" onmouseenter="enter('2228506470236232496');" onmouseout="out('2228506470236232496');" style=""> 858                 // Get markdown view and update content                                                  </span>
<span class="4041585114564499395" onmouseenter="enter('4041585114564499395');" onmouseout="out('4041585114564499395');" style=""> 859                 if (DisplayUtils.isLargeScreenLandscape(getActivity())) {                                </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style=""> 860                     mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                       </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""><abbr title=" 861                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 861                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, nðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 862                 } else {                                                                                 </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 863                     mNoteMarkdownFragment =                                                              </span>
<span class="-8313285091182637202" onmouseenter="enter('-8313285091182637202');" onmouseout="out('-8313285091182637202');" style=""> 864                             ((NoteEditorActivity) getActivity()).getNoteMarkdownFragment();              </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style=""> 865                     mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867             }                                                                                            </span>
<span  style=""> 868                                                                                                          </span>
<span class="8823595637372647509" onmouseenter="enter('8823595637372647509');" onmouseout="out('8823595637372647509');" style=""> 869             getActivity().invalidateOptionsMenu();                                                       </span>
<span  style=""> 870                                                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 871             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span  style=""> 872                                                                                                          </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 873             mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 874         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875     }                                                                                                    </span>
<span  style=""> 876                                                                                                          </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 877     private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                     </span>
<span  style=""> 878                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 879         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 880         protected Void doInBackground(Void... args) {                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 881             saveNote();                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 882             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883         }                                                                                                </span>
<span  style=""> 884                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 885         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 886         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style=""> 887             if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                 </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style=""> 888                 // Update links                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 889                 SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                               </span>
<span  style=""> 890                                                                                                          </span>
<span class="8451817895915811073" onmouseenter="enter('8451817895915811073');" onmouseout="out('8451817895915811073');" style=""> 891                 // Update markdown fragment                                                              </span>
<span class="4041585114564499395" onmouseenter="enter('4041585114564499395');" onmouseout="out('4041585114564499395');" style=""> 892                 if (DisplayUtils.isLargeScreenLandscape(getActivity())) {                                </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style=""> 893                     mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                       </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""><abbr title=" 894                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 894                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, nðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 895                 } else {                                                                                 </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style=""> 896                     mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900     }                                                                                                    </span>
<span  style=""> 901                                                                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 902 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 903 private void saveNote() {                                                                                </span>
<span class="8202353742932995245" onmouseenter="enter('8202353742932995245');" onmouseout="out('8202353742932995245');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 904         if (mNote == null || (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {         </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 905 ||||||| BASE                                                                                             </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 906 private void saveNote() {                                                                                </span>
<span class="-2414246363966835945" onmouseenter="enter('-2414246363966835945');" onmouseout="out('-2414246363966835945');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 907         if (mNote == null || (mBottomSheet != null &amp;&amp; mBottomSheet.isShowing())) {                       </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 908 =======                                                                                                  </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 909 protected void saveNote() {                                                                              </span>
<span class="-2414246363966835945" onmouseenter="enter('-2414246363966835945');" onmouseout="out('-2414246363966835945');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 910         if (mNote == null || (mBottomSheet != null &amp;&amp; mBottomSheet.isShowing())) {                       </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 911 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 912             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913         }                                                                                                </span>
<span  style=""> 914                                                                                                          </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style=""> 915         String content = getNoteContentString();                                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 916         String tagString = getNoteTagsString();                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 917 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="3263351027592661332" onmouseenter="enter('3263351027592661332');" onmouseout="out('3263351027592661332');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 918         if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned())) {                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 919 ||||||| BASE                                                                                             </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 920         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                       </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 921 =======                                                                                                  </span>
<span class="-9180039163235450589" onmouseenter="enter('-9180039163235450589');" onmouseout="out('-9180039163235450589');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 922         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked(), mIsMarkdownEnabled)) {   </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 923 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 924             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 925             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 926             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style=""> 927             mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 928             // Send pinned event to google analytics if changed                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 929             mNote.save();                                                                                </span>
<span  style=""> 930                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 931                 AnalyticsTracker.track(                                                                  </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style=""> 932                         AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 933                         AnalyticsTracker.CATEGORY_NOTE,                                                  </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style=""> 934                         &quot;editor_save&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 935                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937         }                                                                                                </span>
<span  style=""> 938                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 939     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 940     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span  style=""> 941                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 942         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 943         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 944         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 945             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 946             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 947             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 948                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 949                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 950                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style=""> 951                 if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 952                     mode.setTitleOptionalHint(false);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953                 }                                                                                        </span>
<span  style=""> 954                                                                                                          </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style=""> 955                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 957             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958         }                                                                                                </span>
<span  style=""> 959                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 960         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 961         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 962         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 963         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 964             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965         }                                                                                                </span>
<span  style=""> 966                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 967         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 968         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 969         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 970             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 971                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 972                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 973                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 974                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 975                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 976                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 977                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 978                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 979                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 981                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 983                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 984                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 985                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style=""> 986                         copyToClipboard(mLinkText);                                                      </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title=" 987                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 987                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 988                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 990                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 991                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 992                     if (mLinkText != null) {                                                             </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 993                         showShareSheet();                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 994                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 996                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 997                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 998                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000         }                                                                                                </span>
<span  style="">1001                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style="">1002         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1003         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style="">1004         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1005             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1007     };                                                                                                   </span>
<span  style="">1008                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1009     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1010     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1011     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1012     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1013         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1014             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1015             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1016                 return;                                                                                  </span>
<span  style="">1017                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1018             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1019             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1020                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1021                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1022                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1022                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1023                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1024                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1025                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1026                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1027                 }                                                                                        </span>
<span  style="">1028                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1029                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1030                 if (getActivity() != null) {                                                             </span>
<span class="7722450347844852596" onmouseenter="enter('7722450347844852596');" onmouseout="out('7722450347844852596');" style=""><abbr title="1031                     mActionMode = ((AppCompatActivity)getActivity()).startSupportActionMode(mActionModeCallback);">1031                     mActionMode = ((AppCompatActivity)getActivity()).startSupportActionMode(mActionModeCaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1032                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1033                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1034                     }                                                                                    </span>
<span  style="">1035                                                                                                          </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1036                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1037                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1038             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1039                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1040                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1042         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1043             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1044             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046     }                                                                                                    </span>
<span  style="">1047                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1048     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1049         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1050             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1051                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1052                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1053             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1054                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1055                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1056             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1057                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1058                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1059             } else {                                                                                     </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="">1060                 mViewLinkMenuItem.setIcon(mWebIcon);                                                     </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1061                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064     }                                                                                                    </span>
<span  style="">1065                                                                                                          </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style="">1066     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style="">1067     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1068         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1069         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1070             if (!isAdded()) return;                                                                      </span>
<span  style="">1071                                                                                                          </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1072             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1073                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1074                 public void run() {                                                                      </span>
<span  style="">1075                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style="">1076                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1077                     mNote.save();                                                                        </span>
<span  style="">1078                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style="">1079                     updatePublishedState(false);                                                         </span>
<span  style="">1080                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1082             });                                                                                          </span>
<span  style="">1083                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1085     };                                                                                                   </span>
<span  style="">1086                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style="">1087     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style="">1088     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1089         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1090         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1091             if (!isAdded()) return;                                                                      </span>
<span  style="">1092                                                                                                          </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1093             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1094                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1095                 public void run() {                                                                      </span>
<span  style="">1096                                                                                                          </span>
<span class="6844751493350163385" onmouseenter="enter('6844751493350163385');" onmouseout="out('6844751493350163385');" style="">1097                     if (mHistoryBottomSheet.isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {     </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1098                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style="">1099                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1102             });                                                                                          </span>
<span  style="">1103                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1105     };                                                                                                   </span>
<span  style="">1106                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1107     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1108         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1109             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1110             mNote.save();                                                                                </span>
<span  style="">1111                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1112             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1113             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1114                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1115             AnalyticsTracker.track(                                                                      </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="">1116                     (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                        </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="">1117                             AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                               </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1118                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1119                     &quot;publish_note_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1120             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122     }                                                                                                    </span>
<span  style="">1123                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1124     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span  style="">1125                                                                                                          </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1126         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1127             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128         }                                                                                                </span>
<span  style="">1129                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1130         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1131         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1132                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1133         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1134             if (mNote.isPublished()) {                                                                   </span>
<span class="-7688080222453146357" onmouseenter="enter('-7688080222453146357');" onmouseout="out('-7688080222453146357');" style="">1135                 SnackbarUtils.showSnackbar(getActivity(), R.string.publish_successful,                   </span>
<span class="1517681013250933454" onmouseenter="enter('1517681013250933454');" onmouseout="out('1517681013250933454');" style="">1136                         R.color.simplenote_positive_green,                                               </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1137                         Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1138                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1139                             public void onClick(View v) {                                                </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1140                                 unpublishNote();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1142                         });                                                                              </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1143                 copyToClipboard(mNote.getPublishedUrl());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1144             } else {                                                                                     </span>
<span class="-153294762762717121" onmouseenter="enter('-153294762762717121');" onmouseout="out('-153294762762717121');" style="">1145                 SnackbarUtils.showSnackbar(getActivity(), R.string.unpublish_successful,                 </span>
<span class="8669465432699610879" onmouseenter="enter('8669465432699610879');" onmouseout="out('8669465432699610879');" style="">1146                         R.color.simplenote_negative_red,                                                 </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1147                         Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1148                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1149                             public void onClick(View v) {                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1150                                 publishNote();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1152                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1154         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1155             if (mNote.isPublished()) {                                                                   </span>
<span class="3959102095641312076" onmouseenter="enter('3959102095641312076');" onmouseout="out('3959102095641312076');" style="">1156                 SnackbarUtils.showSnackbar(getActivity(), R.string.unpublish_error,                      </span>
<span class="131095352187516196" onmouseenter="enter('131095352187516196');" onmouseout="out('131095352187516196');" style="">1157                         R.color.simplenote_negative_red, Snackbar.LENGTH_LONG);                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1158             } else {                                                                                     </span>
<span class="-2257940760039104199" onmouseenter="enter('-2257940760039104199');" onmouseout="out('-2257940760039104199');" style="">1159                 SnackbarUtils.showSnackbar(getActivity(), R.string.publish_error,                        </span>
<span class="131095352187516196" onmouseenter="enter('131095352187516196');" onmouseout="out('131095352187516196');" style="">1160                         R.color.simplenote_negative_red, Snackbar.LENGTH_LONG);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1161             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163     }                                                                                                    </span>
<span  style="">1164                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1165     private void publishNote() {                                                                         </span>
<span  style="">1166                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1167         if (isAdded()) {                                                                                 </span>
<span class="-3919291052884701924" onmouseenter="enter('-3919291052884701924');" onmouseout="out('-3919291052884701924');" style="">1168             mPublishingSnackbar = SnackbarUtils.showSnackbar(getActivity(), R.string.publishing,         </span>
<span class="-1976946684900965607" onmouseenter="enter('-1976946684900965607');" onmouseout="out('-1976946684900965607');" style="">1169                     R.color.simplenote_blue, Snackbar.LENGTH_INDEFINITE);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170         }                                                                                                </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1171         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172     }                                                                                                    </span>
<span  style="">1173                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1174     private void unpublishNote() {                                                                       </span>
<span  style="">1175                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1176         if (isAdded()) {                                                                                 </span>
<span class="-7608597247223762409" onmouseenter="enter('-7608597247223762409');" onmouseout="out('-7608597247223762409');" style="">1177             mPublishingSnackbar = SnackbarUtils.showSnackbar(getActivity(), R.string.unpublishing,       </span>
<span class="-1976946684900965607" onmouseenter="enter('-1976946684900965607');" onmouseout="out('-1976946684900965607');" style="">1178                     R.color.simplenote_blue, Snackbar.LENGTH_INDEFINITE);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179         }                                                                                                </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1180         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181     }                                                                                                    </span>
<span  style="">1182                                                                                                          </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1183     private void copyToClipboard(String text) {                                                          </span>
<span class="4796955211675373396" onmouseenter="enter('4796955211675373396');" onmouseout="out('4796955211675373396');" style=""><abbr title="1184         ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SERVICE);">1184         ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_ðŸ”µ</abbr></span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1185         ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                       </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1186         clipboard.setPrimaryClip(clip);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187     }                                                                                                    </span>
<span  style="">1188                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1189     private void showShareSheet() {                                                                      </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1190         if (isAdded()) {                                                                                 </span>
<span class="-7649938693804610664" onmouseenter="enter('-7649938693804610664');" onmouseout="out('-7649938693804610664');" style="">1191             if (mShareBottomSheet == null) {                                                             </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style="">1192                 mShareBottomSheet = new ShareBottomSheetDialog(this, this);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1193             }                                                                                            </span>
<span class="-5706261914377124016" onmouseenter="enter('-5706261914377124016');" onmouseout="out('-5706261914377124016');" style="">1194             mShareBottomSheet.show(mNote);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1196     }                                                                                                    </span>
<span  style="">1197                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1198     private void showInfoSheet() {                                                                       </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1199         if (isAdded()) {                                                                                 </span>
<span class="-1884243309106371316" onmouseenter="enter('-1884243309106371316');" onmouseout="out('-1884243309106371316');" style="">1200             if (mInfoBottomSheet == null) {                                                              </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style="">1201                 mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202             }                                                                                            </span>
<span class="-9107266656084872702" onmouseenter="enter('-9107266656084872702');" onmouseout="out('-9107266656084872702');" style="">1203             mInfoBottomSheet.show(mNote);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204         }                                                                                                </span>
<span  style="">1205                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206     }                                                                                                    </span>
<span  style="">1207                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1208     private void showHistorySheet() {                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1209         if (isAdded()) {                                                                                 </span>
<span class="-2356271684565414206" onmouseenter="enter('-2356271684565414206');" onmouseout="out('-2356271684565414206');" style="">1210             if (mHistoryBottomSheet == null) {                                                           </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style="">1211                 mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212                 }                                                                                        </span>
<span  style="">1213                                                                                                          </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1214             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1215             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1215             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1216             saveNote();                                                                                  </span>
<span  style="">1217                                                                                                          </span>
<span class="-8018381336008501546" onmouseenter="enter('-8018381336008501546');" onmouseout="out('-8018381336008501546');" style="">1218             mHistoryBottomSheet.show(mNote);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1219             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220     }                                                                                                    </span>
<span  style="">1221                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1222     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1223      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1224      */                                                                                                  </span>
<span  style="">1225                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1226     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1227     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1228                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229     }                                                                                                    </span>
<span  style="">1230                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1231     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1232     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1232     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1233         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1234             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1235                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1236                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1237                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1238                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1239                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1240                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1241                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1242                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243                                 }                                                                        </span>
<span  style="">1244                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1245                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1246                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1248                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1250                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1251                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1252                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255     }                                                                                                    </span>
<span  style="">1256                                                                                                          </span>
<span  style="">1257                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1258     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1259     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1260         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1261     }                                                                                                    </span>
<span  style="">1262                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1263     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1264     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1265         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1266         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1267             return;                                                                                      </span>
<span  style="">1268                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1269         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1270         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1271             return;                                                                                      </span>
<span  style="">1272                                                                                                          </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style="">1273         note.setContent(getNoteContentString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1275 }                                                                                                        </span>






































































































































































































































































































































































































































</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7 import android.content.Intent;                                                                           </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   8 import android.database.Cursor;                                                                          </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  10 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  12 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  13 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  14 import android.os.Handler;                                                                               </span>
<span class="7113341696390925527" onmouseenter="enter('7113341696390925527');" onmouseout="out('7113341696390925527');" style="">  15 import android.support.design.widget.Snackbar;                                                           </span>
<span class="1235021250095752497" onmouseenter="enter('1235021250095752497');" onmouseout="out('1235021250095752497');" style="">  16 import android.support.v4.app.Fragment;                                                                  </span>
<span class="6292606154682534015" onmouseenter="enter('6292606154682534015');" onmouseout="out('6292606154682534015');" style="">  17 import android.support.v7.app.AppCompatActivity;                                                         </span>
<span class="-8226814767277370585" onmouseenter="enter('-8226814767277370585');" onmouseout="out('-8226814767277370585');" style="">  18 import android.support.v7.view.ActionMode;                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  19 import android.text.Editable;                                                                            </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  20 import android.text.Spanned;                                                                             </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  21 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  22 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  23 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  24 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  25 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  26 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  27 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  28 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  29 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  30 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  31 import android.view.ViewGroup;                                                                           </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  32 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  33 import android.webkit.WebView;                                                                           </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  34 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  35 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  36 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  37 import android.widget.Toast;                                                                             </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  38 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  39 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  40 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  41 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  42 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  43 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  44 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  45 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  46 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  47 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="">  48 import com.automattic.simplenote.utils.SnackbarUtils;                                                    </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  49 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  50 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  51 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  52 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  53 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="">  54 import com.commonsware.cwac.anddown.AndDown;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  55 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  56 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  57 import com.simperium.client.Query;                                                                       </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  58 import java.util.Calendar;                                                                               </span>
<span  style="">  59                                                                                                          </span>
<span  style="">  60                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  61 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  62         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  63         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  64         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  65         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-1616372346803851838" onmouseenter="enter('-1616372346803851838');" onmouseout="out('-1616372346803851838');" style="">  66         InfoBottomSheetDialog.InfoSheetListener {                                                        </span>
<span  style="">  67                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  68     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  69     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  70     static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="7675482774590431252" onmouseenter="enter('7675482774590431252');" onmouseout="out('7675482774590431252');" style="">  71     static public final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  72     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  73     private static final int MAX_REVISIONS = 30;                                                         </span>
<span  style="">  74                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style="">  75 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  76     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  77     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  78                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  79 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  80 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">  80 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  81 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  82                                                                                                          </span>
<span class="4572903639827164119" onmouseenter="enter('4572903639827164119');" onmouseout="out('4572903639827164119');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  83     public static final int THEME_LIGHT = 0;                                                             </span>
<span class="6287065810722210354" onmouseenter="enter('6287065810722210354');" onmouseout="out('6287065810722210354');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84     public static final int THEME_DARK = 1;                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style="">  86 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style="">  87                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  88     private Note mNote;                                                                                  </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  89     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style="">  90                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  91     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  92     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span  style="">  93                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  94     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style="">  95     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style="">  96     private Handler mHistoryTimeoutHandler;                                                              </span>
<span  style="">  97                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  98     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  99     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span  style=""> 100                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 101 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="275494556225166536" onmouseenter="enter('275494556225166536');" onmouseout="out('275494556225166536');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 102     private boolean mIsNewNote, mIsLoadingNote;                                                          </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 103                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 104 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 105 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 105 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 106 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 107                                                                                                          </span>
<span class="8299144298417847580" onmouseenter="enter('8299144298417847580');" onmouseout="out('8299144298417847580');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 108     private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton, mIsMarkdownEnabled, mIsMarkdownEnabledGlobal;"> 108     private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton, mIsMarkdownEnabled, mIsMarkdownEnabðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 109                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 110 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 111     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 112     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 113     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 114     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 115     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-6925628041030715987" onmouseenter="enter('-6925628041030715987');" onmouseout="out('-6925628041030715987');" style=""> 116     private Drawable mEmailIcon, mWebIcon, mMapIcon, mCallIcon;                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 117     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 118     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 119     private int mCurrentCursorPosition;                                                                  </span>
<span  style=""> 120                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 121 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="7045155254268917571" onmouseenter="enter('7045155254268917571');" onmouseout="out('7045155254268917571');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 122     private String mLastContentString;                                                                   </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 123                                                                                                          </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 124     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 125     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 126     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 127                                                                                                          </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 128     private Snackbar mPublishingSnackbar;                                                                </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 129                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 130 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 131 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 131 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 132 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133                                                                                                          </span>
<span class="2386861943840741326" onmouseenter="enter('2386861943840741326');" onmouseout="out('2386861943840741326');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 134     private ArrayList&lt;Note&gt; mNoteRevisionsList;                                                          </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 135     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 136     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 137     private WebView mMarkdown;                                                                           </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 138                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 139 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style=""> 140                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 141     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 142      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 143      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 144      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 145     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146     }                                                                                                    </span>
<span  style=""> 147                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 148     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 149     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 150         super.onCreate(savedInstanceState);                                                              </span>
<span  style=""> 151                                                                                                          </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 152         if (getActivity() != null) {                                                                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 153             Simplenote currentApp = (Simplenote) getActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 154             mNotesBucket = currentApp.getNotesBucket();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155         }                                                                                                </span>
<span  style=""> 156                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 157         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 157         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style=""><abbr title=" 158         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 158         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style=""><abbr title=" 159         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 159         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, RðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style=""><abbr title=" 160         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 160         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, RðŸ”µ</abbr></span>
<span  style=""> 161                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 162         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 163         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 164         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 165                                                                                                          </span>
<span class="-6036514116585965367" onmouseenter="enter('-6036514116585965367');" onmouseout="out('-6036514116585965367');" style=""> 166         mLastContentString = &quot;&quot;;                                                                         </span>
<span  style=""> 167                                                                                                          </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 168         mMatchHighlighter = new TextHighlighter(getActivity(),                                           </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 169                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 169                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 170         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 172             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 173                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 174                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 175                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176             }                                                                                            </span>
<span  style=""> 177                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 178             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 179             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 180                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 181                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182             }                                                                                            </span>
<span  style=""> 183                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 184             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 185             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 186                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187             }                                                                                            </span>
<span  style=""> 188                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 189             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 190             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 191                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 192                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 193                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 194                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 195                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 196                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 197                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 198                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 199                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 200                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 200                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.forðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 201                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 203         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204     }                                                                                                    </span>
<span  style=""> 205                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 207     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 208         setHasOptionsMenu(true);                                                                         </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 209         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 210         mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));              </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 211         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 212         mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                 </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 213         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 214         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span  style=""> 215                                                                                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 216         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style=""> 217                                                                                                          </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 218         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 219         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 220             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span  style=""> 221                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 222 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="8823595637372647509" onmouseenter="enter('8823595637372647509');" onmouseout="out('8823595637372647509');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 223             getActivity().invalidateOptionsMenu();                                                       </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 224                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 225 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 226 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 226 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 227 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 228                                                                                                          </span>
<span class="4785891395116813196" onmouseenter="enter('4785891395116813196');" onmouseout="out('4785891395116813196');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 229             mMarkdown = (WebView) rootView.findViewById(R.id.markdown);                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 230                                                                                                          </span>
<span class="8669746627669403722" onmouseenter="enter('8669746627669403722');" onmouseout="out('8669746627669403722');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 231             switch (PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_THEME, THEME_LIGHT)) {            </span>
<span class="-1862280279846167044" onmouseenter="enter('-1862280279846167044');" onmouseout="out('-1862280279846167044');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 232                 case THEME_DARK:                                                                         </span>
<span class="2431268192882105499" onmouseenter="enter('2431268192882105499');" onmouseout="out('2431268192882105499');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 233                     mCss = &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;dark.css\&quot; /&gt;&quot;;            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 234                     break;                                                                               </span>
<span class="-539754023432181399" onmouseenter="enter('-539754023432181399');" onmouseout="out('-539754023432181399');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 235                 case THEME_LIGHT:                                                                        </span>
<span class="4484195514752522265" onmouseenter="enter('4484195514752522265');" onmouseout="out('4484195514752522265');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 236                     mCss = &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;light.css\&quot; /&gt;&quot;;           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 237                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 238             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 239                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 240 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241         }                                                                                                </span>
<span  style=""> 242                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 243         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style=""> 244                                                                                                          </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 245         // Load note if we were passed a note Id                                                         </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 246         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 247         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 248             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 249             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 250                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251             }                                                                                            </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 252             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                   </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 253             setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254         }                                                                                                </span>
<span  style=""> 255                                                                                                          </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 256 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257 	}                                                                                                       </span>
<span  style=""> 258                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 259     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 260     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 261         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 262         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 263         mNotesBucket.addListener(this);                                                                  </span>
<span  style=""> 264                                                                                                          </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 265         mTagView.setOnTagAddedListener(this);                                                            </span>
<span  style=""> 266                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 267         if (mContentEditText != null) {                                                                  </span>
<span class="-4898136971195212464" onmouseenter="enter('-4898136971195212464');" onmouseout="out('-4898136971195212464');" style=""><abbr title=" 268             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_FONT_SIZE, 14));"> 268             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270     }                                                                                                    </span>
<span  style=""> 271                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 272     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 273     public void onPause() {                                                                              </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 274         mNotesBucket.removeListener(this);                                                               </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 275         // Hide soft keyboard if it is showing...                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 276         if (getActivity() != null) {                                                                     </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 277             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 277             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 278             if (inputMethodManager != null) {                                                            </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 279                 inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281         }                                                                                                </span>
<span  style=""> 282                                                                                                          </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 283         // Delete the note if it is new and has empty fields                                             </span>
<span class="-2219905285758853631" onmouseenter="enter('-2219905285758853631');" onmouseout="out('-2219905285758853631');" style=""> 284         if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty()) {                                              </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 285             mNote.delete();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 286         } else {                                                                                         </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 287             saveNote();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288         }                                                                                                </span>
<span  style=""> 289                                                                                                          </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 290         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 291                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 292         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 293             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294         }                                                                                                </span>
<span  style=""> 295                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 296         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 297             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298         }                                                                                                </span>
<span  style=""> 299                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 300         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 301             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302         }                                                                                                </span>
<span  style=""> 303                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 304         mHighlighter.stop();                                                                             </span>
<span  style=""> 305                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 306         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307     }                                                                                                    </span>
<span  style=""> 308                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 309     @Override                                                                                            </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style=""> 310     public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                  </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style=""><abbr title=" 311         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {"> 311         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 312             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313         }                                                                                                </span>
<span  style=""> 314                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 315         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 316                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 317         if (mNote != null) {                                                                             </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 318             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                         </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 319             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 320                                                                                                          </span>
<span class="-2352342880963919129" onmouseenter="enter('-2352342880963919129');" onmouseout="out('-2352342880963919129');" style=""> 321             if (mIsMarkdownEnabledGlobal) {                                                              </span>
<span class="4614931194864693025" onmouseenter="enter('4614931194864693025');" onmouseout="out('4614931194864693025');" style=""> 322                 MenuItem markdownEnableItem = menu.findItem(R.id.menu_markdown_enable);                  </span>
<span class="-2633107343982386844" onmouseenter="enter('-2633107343982386844');" onmouseout="out('-2633107343982386844');" style=""> 323                 markdownEnableItem.setChecked(mNote.isMarkdownEnabled());                                </span>
<span class="3477449218696725297" onmouseenter="enter('3477449218696725297');" onmouseout="out('3477449218696725297');" style=""> 324                 markdownEnableItem.setVisible(true);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325             }                                                                                            </span>
<span  style=""> 326                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 327             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 328             if (mNote.isDeleted())                                                                       </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 329                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 330             else                                                                                         </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 331                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332         }                                                                                                </span>
<span  style=""> 333                                                                                                          </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style=""> 334         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);             </span>
<span  style=""> 335                                                                                                          </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 336         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337     }                                                                                                    </span>
<span  style=""> 338                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 339     @Override                                                                                            </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style=""> 340     public boolean onOptionsItemSelected(MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 341         switch (item.getItemId()) {                                                                      </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 342             case R.id.menu_view_info:                                                                    </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 343                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 344                 return true;                                                                             </span>
<span  style=""> 345                                                                                                          </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 346             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 347                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 348                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 349             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 350                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 351                 return true;                                                                             </span>
<span class="-2326571002560832814" onmouseenter="enter('-2326571002560832814');" onmouseout="out('-2326571002560832814');" style=""> 352             case R.id.menu_markdown_enable:                                                              </span>
<span class="2366870288831262173" onmouseenter="enter('2366870288831262173');" onmouseout="out('2366870288831262173');" style=""> 353                 mIsMarkdownEnabled = !item.isChecked();                                                  </span>
<span class="1180540947331910458" onmouseenter="enter('1180540947331910458');" onmouseout="out('1180540947331910458');" style=""> 354                 item.setChecked(mIsMarkdownEnabled);                                                     </span>
<span  style=""> 355                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 356                 if (mIsMarkdownEnabled) {                                                                </span>
<span class="-6508659890551353976" onmouseenter="enter('-6508659890551353976');" onmouseout="out('-6508659890551353976');" style=""> 357                     ((NoteEditorActivity) getActivity()).showTabs();                                     </span>
<span  style=""> 358                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 359                     if (mNoteMarkdownFragment == null) {                                                 </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 360                         // Get markdown fragment and update content                                      </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 361                         mNoteMarkdownFragment =                                                          </span>
<span class="-8313285091182637202" onmouseenter="enter('-8313285091182637202');" onmouseout="out('-8313285091182637202');" style=""> 362                                 ((NoteEditorActivity) getActivity()).getNoteMarkdownFragment();          </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style=""> 363                         mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 365                 } else {                                                                                 </span>
<span class="-2274167655435036909" onmouseenter="enter('-2274167655435036909');" onmouseout="out('-2274167655435036909');" style=""> 366                     ((NoteEditorActivity) getActivity()).hideTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367                 }                                                                                        </span>
<span  style=""> 368                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 369                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 370             case R.id.menu_delete:                                                                       </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 371                 if (!isAdded()) return false;                                                            </span>
<span  style=""> 372                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 373                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 374                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 375             case android.R.id.home:                                                                      </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 376                 if (!isAdded()) return false;                                                            </span>
<span  style=""> 377                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 378                 getActivity().finish();                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 379                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 380             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 381                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383     }                                                                                                    </span>
<span  style=""> 384                                                                                                          </span>
<span  style=""> 385                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 386 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 387     private void deleteNote() {                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 388         if (mNote != null) {                                                                             </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 389             mNote.setDeleted(!mNote.isDeleted());                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 390             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 391             mNote.save();                                                                                </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 392             Intent resultIntent = new Intent();                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 393             if (mNote.isDeleted()) {                                                                     </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 394                 resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 395             }                                                                                            </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 396             getActivity().setResult(Activity.RESULT_OK, resultIntent);                                   </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 397                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 398 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 399 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 399 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 400 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 401                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 402     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 403         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 404     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 405                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 406     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 407         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 408     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 409                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 410     protected void showMarkdown() {                                                                      </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 411         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 412     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 413                                                                                                          </span>
<span class="8271468180839847847" onmouseenter="enter('8271468180839847847');" onmouseout="out('8271468180839847847');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 414     // show a popup view from the info action bar item                                                   </span>
<span class="301694884727727095" onmouseenter="enter('301694884727727095');" onmouseout="out('301694884727727095');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 415     private void showInfoPopup(View view) {                                                              </span>
<span class="-8824124309160747557" onmouseenter="enter('-8824124309160747557');" onmouseout="out('-8824124309160747557');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 416         if (!isAdded() || view == null) return;                                                          </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 417                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 418 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style=""> 419                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 420             AnalyticsTracker.track(                                                                      </span>
<span class="272006350020544349" onmouseenter="enter('272006350020544349');" onmouseout="out('272006350020544349');" style=""> 421                     AnalyticsTracker.Stat.EDITOR_NOTE_DELETED,                                           </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 422                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-6954849474356068168" onmouseenter="enter('-6954849474356068168');" onmouseout="out('-6954849474356068168');" style=""> 423                     &quot;trash_menu_item&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 424             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425         }                                                                                                </span>
<span  style=""> 426                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 427         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428     }                                                                                                    </span>
<span  style=""> 429                                                                                                          </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 430     private void shareNote() {                                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 431         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 432             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 433             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 434             AnalyticsTracker.track(                                                                      </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 435                     AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                    </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 436                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 437                     &quot;action_bar_share_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 438             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440     }                                                                                                    </span>
<span  style=""> 441                                                                                                          </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 442     private void showHistory() {                                                                         </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 443         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 444             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 445             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 446             showHistorySheet();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447         }                                                                                                </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style=""> 448         else {                                                                                           </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 449             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451     }                                                                                                    </span>
<span  style=""> 452                                                                                                          </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 453     private void showInfo() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 454         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 455             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 456             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 457             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459     }                                                                                                    </span>
<span  style=""> 460                                                                                                          </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 461     private boolean noteIsEmpty() {                                                                      </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 462         return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463     }                                                                                                    </span>
<span  style=""> 464                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 465     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 466         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 467                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 468         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style=""> 469             mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                               </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""> 470                     new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472     }                                                                                                    </span>
<span  style=""> 473                                                                                                          </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 474     public void setNote(String noteID){                                                                  </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 475         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476     }                                                                                                    </span>
<span  style=""> 477                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 478     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 479         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 480             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 481                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 482         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 483                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 484         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 485             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 486         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 487             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488         }                                                                                                </span>
<span  style=""> 489                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 490         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 491         if (mNote != null) {                                                                             </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 492             if (mIsNewNote &amp;&amp; noteIsEmpty())                                                             </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 493                 mNote.delete();                                                                          </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 494             else if (mNote != null)                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 495                 saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496         }                                                                                                </span>
<span  style=""> 497                                                                                                          </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 498         new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499     }                                                                                                    </span>
<span  style=""> 500                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 501     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 502         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 503         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 504         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505     }                                                                                                    </span>
<span  style=""> 506                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 507     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 508         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 509             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 510                                                                                                          </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 511             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 511             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span  style=""> 512                                                                                                          </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 513             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 514                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 515             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 516                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 517                 mNote.save();                                                                            </span>
<span  style=""> 518                                                                                                          </span>
<span class="-5094013145931261947" onmouseenter="enter('-5094013145931261947');" onmouseout="out('-5094013145931261947');" style=""><abbr title=" 519                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) {"> 519                 if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 520                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522             }                                                                                            </span>
<span  style=""> 523                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 524             afterTextChanged(mContentEditText.getText());                                                </span>
<span  style=""> 525                                                                                                          </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 526             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528     }                                                                                                    </span>
<span  style=""> 529                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 530     private void updateTagList() {                                                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 531         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 532         if (activity == null) return;                                                                    </span>
<span  style=""> 533                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 534         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 535         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536     }                                                                                                    </span>
<span  style=""> 537                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 538     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 539         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 540         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 541         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 542         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 543         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 544         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 545         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 546         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 547                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 548         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 549                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 550         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 551                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 552         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 553         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 554             return newText.length();                                                                     </span>
<span  style=""> 555                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 556         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 557         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 558                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 559         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 560             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 560             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 561             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 561             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 562         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 563             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564         }                                                                                                </span>
<span  style=""> 565                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 566         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 567         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 568             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 569                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 570         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 571         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572     }                                                                                                    </span>
<span  style=""> 573                                                                                                          </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 574     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 575         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 576         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 577             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 579     };                                                                                                   </span>
<span  style=""> 580                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 581     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 582     public void onTagsChanged(String tagString) {                                                        </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 583         if (mNote == null || !isAdded()) return;                                                         </span>
<span  style=""> 584                                                                                                          </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 585         if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 586             AnalyticsTracker.track(                                                                      </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 587                     AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                              </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 588                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 589                     &quot;tag_added_to_note&quot;                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 590             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591         }                                                                                                </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style=""> 592         else {                                                                                           </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 593             AnalyticsTracker.track(                                                                      </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 594                     AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 595                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 596                     &quot;tag_removed_from_note&quot;                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 597             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598         }                                                                                                </span>
<span  style=""> 599                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 600         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 601         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 602         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 603         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604     }                                                                                                    </span>
<span  style=""> 605                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 606     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 607     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 608         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609     }                                                                                                    </span>
<span  style=""> 610                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 611     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 612     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="2514214199025893024" onmouseenter="enter('2514214199025893024');" onmouseout="out('2514214199025893024');" style=""> 613         // check that the content has really changed (line spacing fix)                                  </span>
<span class="6844133105735349548" onmouseenter="enter('6844133105735349548');" onmouseout="out('6844133105735349548');" style=""> 614         if (!mLastContentString.equals(editable.toString())) {                                           </span>
<span class="-6397051223762453255" onmouseenter="enter('-6397051223762453255');" onmouseout="out('-6397051223762453255');" style=""> 615             mLastContentString = editable.toString();                                                    </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 616             setTitleSpan(editable);                                                                      </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 617             attemptAutoList(editable);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619     }                                                                                                    </span>
<span  style=""> 620                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 621     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 622     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span  style=""> 623                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 624         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 625         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 626             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 627             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628         }                                                                                                </span>
<span  style=""> 629                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 630         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 631         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 632             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 633             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635     }                                                                                                    </span>
<span  style=""> 636                                                                                                          </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 637     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 638         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 639         // Remove any existing size spans                                                                </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 640         RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 641         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 642             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 644         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 645         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 646             return;                                                                                      </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 647         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 647         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span  style=""> 648                                                                                                          </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style=""> 649         fixLineSpacing();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="7193322245360440607" onmouseenter="enter('7193322245360440607');" onmouseout="out('7193322245360440607');" style=""> 652     // Fix for a line spacing bug                                                                        </span>
<span class="1109641776173301717" onmouseenter="enter('1109641776173301717');" onmouseout="out('1109641776173301717');" style=""> 653     // https://code.google.com/p/android/issues/detail?id=78706                                          </span>
<span class="4063573973446204119" onmouseenter="enter('4063573973446204119');" onmouseout="out('4063573973446204119');" style=""> 654     private void fixLineSpacing() {                                                                      </span>
<span class="7589713459723827226" onmouseenter="enter('7589713459723827226');" onmouseout="out('7589713459723827226');" style=""> 655         mContentEditText.setLineSpacing(8, 1);                                                           </span>
<span class="-5617495624819001565" onmouseenter="enter('-5617495624819001565');" onmouseout="out('-5617495624819001565');" style=""> 656         int startSelection = mContentEditText.getSelectionStart();                                       </span>
<span class="-3810514162346969633" onmouseenter="enter('-3810514162346969633');" onmouseout="out('-3810514162346969633');" style=""> 657         mContentEditText.setText(mContentEditText.getText());                                            </span>
<span class="-3363651382695067315" onmouseenter="enter('-3363651382695067315');" onmouseout="out('-3363651382695067315');" style=""> 658         mContentEditText.setSelection(startSelection);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659     }                                                                                                    </span>
<span  style=""> 660                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 661     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 662         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 663         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 664         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 665         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666     }                                                                                                    </span>
<span  style=""> 667                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 668     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 669         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 670             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671         }                                                                                                </span>
<span  style=""> 672                                                                                                          </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 673         new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674     }                                                                                                    </span>
<span  style=""> 675                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 676     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 677         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 678             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 679             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 680             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 681             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 682                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 683         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 684             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 685                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687     }                                                                                                    </span>
<span  style=""> 688                                                                                                          </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 689     public void setIsNewNote(boolean isNewNote) {                                                        </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 690         this.mIsNewNote = isNewNote;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691     }                                                                                                    </span>
<span  style=""> 692                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 693     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 694     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 695         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 696             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 697             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 698                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701     }                                                                                                    </span>
<span  style=""> 702                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 703     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 704         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705     }                                                                                                    </span>
<span  style=""> 706                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 707     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 708         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 709             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 710         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 711             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713     }                                                                                                    </span>
<span  style=""> 714                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 715     private String getNoteTagsString() {                                                                 </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 716         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 717             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 718         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 719             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721     }                                                                                                    </span>
<span  style=""> 722                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 723     /**                                                                                                  </span>
<span class="-5383409035208064059" onmouseenter="enter('-5383409035208064059');" onmouseout="out('-5383409035208064059');" style=""> 724      *  Share bottom sheet callbacks                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 725      */                                                                                                  </span>
<span  style=""> 726                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 727     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style=""> 728     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 729         publishNote();                                                                                   </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 730         mShareBottomSheet.dismiss();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731     }                                                                                                    </span>
<span  style=""> 732                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 733     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style=""> 734     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 735         unpublishNote();                                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 736         mShareBottomSheet.dismiss();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737     }                                                                                                    </span>
<span  style=""> 738                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 739     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style=""> 740     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style=""> 741         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742     }                                                                                                    </span>
<span  style=""> 743                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 744     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style=""> 745     public void onShareDismissed() {                                                                     </span>
<span  style=""> 746                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747     }                                                                                                    </span>
<span  style=""> 748                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 749     /**                                                                                                  </span>
<span class="5481029743273605403" onmouseenter="enter('5481029743273605403');" onmouseout="out('5481029743273605403');" style=""> 750      *  History bottom sheet listeners                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 751      */                                                                                                  </span>
<span  style=""> 752                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 753     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style=""> 754     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 755         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 756         mHistoryBottomSheet.dismiss();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757     }                                                                                                    </span>
<span  style=""> 758                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 759     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style=""> 760     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 761         mHistoryBottomSheet.dismiss();                                                                   </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 762         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763     }                                                                                                    </span>
<span  style=""> 764                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 765     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style=""> 766     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style=""> 767         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 768             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769         }                                                                                                </span>
<span  style=""> 770                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 771         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 772             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774     }                                                                                                    </span>
<span  style=""> 775                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 776     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style=""> 777     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style=""> 778         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779     }                                                                                                    </span>
<span  style=""> 780                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 781     /**                                                                                                  </span>
<span class="377242332922771021" onmouseenter="enter('377242332922771021');" onmouseout="out('377242332922771021');" style=""> 782      *  Info bottom sheet listeners                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 783      */                                                                                                  </span>
<span  style=""> 784                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 785     @Override                                                                                            </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style=""> 786     public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                           </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style=""> 787         NoteUtils.setNotePin(mNote, isSwitchedOn);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788     }                                                                                                    </span>
<span  style=""> 789                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 790     @Override                                                                                            </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style=""> 791     public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                      </span>
<span  style=""> 792                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793     }                                                                                                    </span>
<span  style=""> 794                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 795     @Override                                                                                            </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style=""> 796     public void onInfoCopyLinkClicked() {                                                                </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style=""> 797         copyToClipboard(mNote.getPublishedUrl());                                                        </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 798         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799     }                                                                                                    </span>
<span  style=""> 800                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 801     @Override                                                                                            </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style=""> 802     public void onInfoShareLinkClicked() {                                                               </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style=""> 803         mInfoBottomSheet.dismiss();                                                                      </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 804         showShareSheet();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805     }                                                                                                    </span>
<span  style=""> 806                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 807     @Override                                                                                            </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style=""> 808     public void onInfoDismissed() {                                                                      </span>
<span  style=""> 809                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810     }                                                                                                    </span>
<span  style=""> 811                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 812     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 813                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 814         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 815         protected void onPreExecute() {                                                                  </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 816             mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                         </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 817             mIsLoadingNote = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818         }                                                                                                </span>
<span  style=""> 819                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 820         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 821         protected Void doInBackground(String... args) {                                                  </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 822             if (getActivity() == null) {                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 823                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824             }                                                                                            </span>
<span  style=""> 825                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 826             String noteID = args[0];                                                                     </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 827             Simplenote application = (Simplenote) getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 828             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 829             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 830                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 831                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 832                 if (getActivity() instanceof NotesActivity) {                                            </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style=""> 833                     ((NotesActivity) getActivity()).setCurrentNote(mNote);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834                 }                                                                                        </span>
<span  style=""> 835                                                                                                          </span>
<span class="1542207993914056140" onmouseenter="enter('1542207993914056140');" onmouseout="out('1542207993914056140');" style=""> 836                 // Set markdown flag for global setting                                                  </span>
<span class="-7484741784406029144" onmouseenter="enter('-7484741784406029144');" onmouseout="out('-7484741784406029144');" style=""><abbr title=" 837                 mIsMarkdownEnabledGlobal = PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_MARKDOWN_ENABLED, false);"> 837                 mIsMarkdownEnabledGlobal = PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_MARKDOWN_EðŸ”µ</abbr></span>
<span  style=""> 838                                                                                                          </span>
<span class="4338974049574039690" onmouseenter="enter('4338974049574039690');" onmouseout="out('4338974049574039690');" style=""> 839                 // Set markdown flag for current note                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 840                 if (mNote != null) {                                                                     </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 841                     mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 843             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 844                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 846             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847         }                                                                                                </span>
<span  style=""> 848                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 849         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 850         protected void onPostExecute(Void nada) {                                                        </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style=""> 851             if (getActivity() == null || getActivity().isFinishing())                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 852                 return;                                                                                  </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 853             refreshContent(false);                                                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 854             if (mMatchOffsets != null) {                                                                 </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 855                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 855                 int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 856                 mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857             }                                                                                            </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 858             mContentEditText.addTextChangedListener(NoteEditorFragment.this);                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 859             if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                         </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 860                 // Show soft keyboard                                                                    </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 861                 mContentEditText.requestFocus();                                                         </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 862                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 863                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 864                     public void run() {                                                                  </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 865                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 865                         InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSysðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 866                         if (inputMethodManager != null)                                                  </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 867                             inputMethodManager.showSoftInput(mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 869                 }, 100);                                                                                 </span>
<span  style=""> 870                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871             }                                                                                            </span>
<span  style=""> 872                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style=""> 873             // Show tabs if markdown is enabled globally, for current note, and not tablet landscape     </span>
<span class="-1816707351539259697" onmouseenter="enter('-1816707351539259697');" onmouseout="out('-1816707351539259697');" style=""> 874             if (mIsMarkdownEnabledGlobal &amp;&amp; mIsMarkdownEnabled) {                                        </span>
<span class="2228506470236232496" onmouseenter="enter('2228506470236232496');" onmouseout="out('2228506470236232496');" style=""> 875                 // Get markdown view and update content                                                  </span>
<span class="4041585114564499395" onmouseenter="enter('4041585114564499395');" onmouseout="out('4041585114564499395');" style=""> 876                 if (DisplayUtils.isLargeScreenLandscape(getActivity())) {                                </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style=""> 877                     mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                       </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""><abbr title=" 878                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 878                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, nðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 879                 } else {                                                                                 </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 880                     mNoteMarkdownFragment =                                                              </span>
<span class="-8313285091182637202" onmouseenter="enter('-8313285091182637202');" onmouseout="out('-8313285091182637202');" style=""> 881                             ((NoteEditorActivity) getActivity()).getNoteMarkdownFragment();              </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style=""> 882                     mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884             }                                                                                            </span>
<span  style=""> 885                                                                                                          </span>
<span class="8823595637372647509" onmouseenter="enter('8823595637372647509');" onmouseout="out('8823595637372647509');" style=""> 886             getActivity().invalidateOptionsMenu();                                                       </span>
<span  style=""> 887                                                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 888             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span  style=""> 889                                                                                                          </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 890             mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892     }                                                                                                    </span>
<span  style=""> 893                                                                                                          </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 894     private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                     </span>
<span  style=""> 895                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 896         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 897         protected Void doInBackground(Void... args) {                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 898             saveNote();                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 899             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900         }                                                                                                </span>
<span  style=""> 901                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 902         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 903         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style=""> 904             if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                 </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style=""> 905                 // Update links                                                                          </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 906                 SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                               </span>
<span  style=""> 907                                                                                                          </span>
<span class="8451817895915811073" onmouseenter="enter('8451817895915811073');" onmouseout="out('8451817895915811073');" style=""> 908                 // Update markdown fragment                                                              </span>
<span class="4041585114564499395" onmouseenter="enter('4041585114564499395');" onmouseout="out('4041585114564499395');" style=""> 909                 if (DisplayUtils.isLargeScreenLandscape(getActivity())) {                                </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style=""> 910                     mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                       </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style=""><abbr title=" 911                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 911                             new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, nðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 912                 } else {                                                                                 </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style=""> 913                     mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 914                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917     }                                                                                                    </span>
<span  style=""> 918                                                                                                          </span>
<span  style=""> 919                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 920 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 921     private void saveNote() {                                                                            </span>
<span class="8202353742932995245" onmouseenter="enter('8202353742932995245');" onmouseout="out('8202353742932995245');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 922         if (mNote == null || (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {         </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 923                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 924 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 925 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 925 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 926 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 927                                                                                                          </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 928     protected void saveNote() {                                                                          </span>
<span class="-2414246363966835945" onmouseenter="enter('-2414246363966835945');" onmouseout="out('-2414246363966835945');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 929         if (mNote == null || (mBottomSheet != null &amp;&amp; mBottomSheet.isShowing())) {                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 930                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 931 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 932             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933         }                                                                                                </span>
<span  style=""> 934                                                                                                          </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style=""> 935         String content = getNoteContentString();                                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 936         String tagString = getNoteTagsString();                                                          </span>
<span  style=""> 937                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 938 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="3263351027592661332" onmouseenter="enter('3263351027592661332');" onmouseout="out('3263351027592661332');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 939         if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned())) {                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 940                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 941 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 942 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 942 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 943 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 944                                                                                                          </span>
<span class="-9180039163235450589" onmouseenter="enter('-9180039163235450589');" onmouseout="out('-9180039163235450589');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 945         if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked(), mIsMarkdownEnabled)) {   </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 946                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 947 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 948             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 949             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 950             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style=""> 951             mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 952             // Send pinned event to google analytics if changed                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 953             mNote.save();                                                                                </span>
<span  style=""> 954                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 955             AnalyticsTracker.track(                                                                      </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style=""> 956                     AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 957                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style=""> 958                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 959             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 961     }                                                                                                    </span>
<span  style=""> 962                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 963     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 964     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span  style=""> 965                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 966         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 967         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 968         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 969             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 970             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 971             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 972                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 973                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 974                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style=""> 975                 if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 976                     mode.setTitleOptionalHint(false);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977                 }                                                                                        </span>
<span  style=""> 978                                                                                                          </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style=""> 979                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 981             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982         }                                                                                                </span>
<span  style=""> 983                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 984         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 985         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 986         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 987         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 988             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989         }                                                                                                </span>
<span  style=""> 990                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 991         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 992         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 993         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 994             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 995                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 996                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 997                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 998                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 999                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style="">1000                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style="">1001                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1002                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1003                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style="">1005                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1007                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style="">1008                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style="">1009                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style="">1010                         copyToClipboard(mLinkText);                                                      </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""><abbr title="1011                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();">1011                         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="">1012                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1014                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style="">1015                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style="">1016                     if (mLinkText != null) {                                                             </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style="">1017                         showShareSheet();                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="">1018                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1019                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1020                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">1021                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1022                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1023             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1024         }                                                                                                </span>
<span  style="">1025                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style="">1026         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1027         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style="">1028         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1029             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1030         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1031     };                                                                                                   </span>
<span  style="">1032                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1033     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1034     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1035     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1036     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1037         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1038             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1039             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1040                 return;                                                                                  </span>
<span  style="">1041                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1042             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1043             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1044                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1045                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1046                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1046                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1047                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1048                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1049                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1050                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051                 }                                                                                        </span>
<span  style="">1052                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1053                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1054                 if (getActivity() != null) {                                                             </span>
<span class="7722450347844852596" onmouseenter="enter('7722450347844852596');" onmouseout="out('7722450347844852596');" style=""><abbr title="1055                     mActionMode = ((AppCompatActivity)getActivity()).startSupportActionMode(mActionModeCallback);">1055                     mActionMode = ((AppCompatActivity)getActivity()).startSupportActionMode(mActionModeCaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1056                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1057                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058                     }                                                                                    </span>
<span  style="">1059                                                                                                          </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1060                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1062             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1063                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1064                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1066         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1067             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1068             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070     }                                                                                                    </span>
<span  style="">1071                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1072     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1073         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1074             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1075                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1076                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1077             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1078                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1079                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1080             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1081                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1082                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1083             } else {                                                                                     </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="">1084                 mViewLinkMenuItem.setIcon(mWebIcon);                                                     </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1085                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088     }                                                                                                    </span>
<span  style="">1089                                                                                                          </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style="">1090     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style="">1091     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1092         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1093         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1094             if (!isAdded()) return;                                                                      </span>
<span  style="">1095                                                                                                          </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1096             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1097                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1098                 public void run() {                                                                      </span>
<span  style="">1099                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style="">1100                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1101                     mNote.save();                                                                        </span>
<span  style="">1102                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style="">1103                     updatePublishedState(false);                                                         </span>
<span  style="">1104                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1106             });                                                                                          </span>
<span  style="">1107                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1109     };                                                                                                   </span>
<span  style="">1110                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style="">1111     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style="">1112     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1113         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1114         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1115             if (!isAdded()) return;                                                                      </span>
<span  style="">1116                                                                                                          </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1117             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1118                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1119                 public void run() {                                                                      </span>
<span  style="">1120                                                                                                          </span>
<span class="6844751493350163385" onmouseenter="enter('6844751493350163385');" onmouseout="out('6844751493350163385');" style="">1121                     if (mHistoryBottomSheet.isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {     </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1122                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style="">1123                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1126             });                                                                                          </span>
<span  style="">1127                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1129     };                                                                                                   </span>
<span  style="">1130                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1131     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1132         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1133             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1134             mNote.save();                                                                                </span>
<span  style="">1135                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1136             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1137             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1138                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1139             AnalyticsTracker.track(                                                                      </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="">1140                     (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                        </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="">1141                             AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                               </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1142                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1143                     &quot;publish_note_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1144             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146     }                                                                                                    </span>
<span  style="">1147                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1148     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span  style="">1149                                                                                                          </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1150         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1151             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152         }                                                                                                </span>
<span  style="">1153                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1154         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1155         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1156                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1157         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1158             if (mNote.isPublished()) {                                                                   </span>
<span class="-7688080222453146357" onmouseenter="enter('-7688080222453146357');" onmouseout="out('-7688080222453146357');" style="">1159                 SnackbarUtils.showSnackbar(getActivity(), R.string.publish_successful,                   </span>
<span class="1517681013250933454" onmouseenter="enter('1517681013250933454');" onmouseout="out('1517681013250933454');" style="">1160                         R.color.simplenote_positive_green,                                               </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1161                         Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1162                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1163                             public void onClick(View v) {                                                </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1164                                 unpublishNote();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1166                         });                                                                              </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1167                 copyToClipboard(mNote.getPublishedUrl());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1168             } else {                                                                                     </span>
<span class="-153294762762717121" onmouseenter="enter('-153294762762717121');" onmouseout="out('-153294762762717121');" style="">1169                 SnackbarUtils.showSnackbar(getActivity(), R.string.unpublish_successful,                 </span>
<span class="8669465432699610879" onmouseenter="enter('8669465432699610879');" onmouseout="out('8669465432699610879');" style="">1170                         R.color.simplenote_negative_red,                                                 </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1171                         Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1172                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1173                             public void onClick(View v) {                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1174                                 publishNote();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1176                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1178         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1179             if (mNote.isPublished()) {                                                                   </span>
<span class="3959102095641312076" onmouseenter="enter('3959102095641312076');" onmouseout="out('3959102095641312076');" style="">1180                 SnackbarUtils.showSnackbar(getActivity(), R.string.unpublish_error,                      </span>
<span class="131095352187516196" onmouseenter="enter('131095352187516196');" onmouseout="out('131095352187516196');" style="">1181                         R.color.simplenote_negative_red, Snackbar.LENGTH_LONG);                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1182             } else {                                                                                     </span>
<span class="-2257940760039104199" onmouseenter="enter('-2257940760039104199');" onmouseout="out('-2257940760039104199');" style="">1183                 SnackbarUtils.showSnackbar(getActivity(), R.string.publish_error,                        </span>
<span class="131095352187516196" onmouseenter="enter('131095352187516196');" onmouseout="out('131095352187516196');" style="">1184                         R.color.simplenote_negative_red, Snackbar.LENGTH_LONG);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187     }                                                                                                    </span>
<span  style="">1188                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1189     private void publishNote() {                                                                         </span>
<span  style="">1190                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1191         if (isAdded()) {                                                                                 </span>
<span class="-3919291052884701924" onmouseenter="enter('-3919291052884701924');" onmouseout="out('-3919291052884701924');" style="">1192             mPublishingSnackbar = SnackbarUtils.showSnackbar(getActivity(), R.string.publishing,         </span>
<span class="-1976946684900965607" onmouseenter="enter('-1976946684900965607');" onmouseout="out('-1976946684900965607');" style="">1193                     R.color.simplenote_blue, Snackbar.LENGTH_INDEFINITE);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194         }                                                                                                </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1195         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1196     }                                                                                                    </span>
<span  style="">1197                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1198     private void unpublishNote() {                                                                       </span>
<span  style="">1199                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1200         if (isAdded()) {                                                                                 </span>
<span class="-7608597247223762409" onmouseenter="enter('-7608597247223762409');" onmouseout="out('-7608597247223762409');" style="">1201             mPublishingSnackbar = SnackbarUtils.showSnackbar(getActivity(), R.string.unpublishing,       </span>
<span class="-1976946684900965607" onmouseenter="enter('-1976946684900965607');" onmouseout="out('-1976946684900965607');" style="">1202                     R.color.simplenote_blue, Snackbar.LENGTH_INDEFINITE);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203         }                                                                                                </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1204         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205     }                                                                                                    </span>
<span  style="">1206                                                                                                          </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1207     private void copyToClipboard(String text) {                                                          </span>
<span class="4796955211675373396" onmouseenter="enter('4796955211675373396');" onmouseout="out('4796955211675373396');" style=""><abbr title="1208         ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SERVICE);">1208         ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_ðŸ”µ</abbr></span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1209         ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                       </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1210         clipboard.setPrimaryClip(clip);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211     }                                                                                                    </span>
<span  style="">1212                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1213     private void showShareSheet() {                                                                      </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1214         if (isAdded()) {                                                                                 </span>
<span class="-7649938693804610664" onmouseenter="enter('-7649938693804610664');" onmouseout="out('-7649938693804610664');" style="">1215             if (mShareBottomSheet == null) {                                                             </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style="">1216                 mShareBottomSheet = new ShareBottomSheetDialog(this, this);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1217             }                                                                                            </span>
<span class="-5706261914377124016" onmouseenter="enter('-5706261914377124016');" onmouseout="out('-5706261914377124016');" style="">1218             mShareBottomSheet.show(mNote);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1219         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220     }                                                                                                    </span>
<span  style="">1221                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1222     private void showInfoSheet() {                                                                       </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1223         if (isAdded()) {                                                                                 </span>
<span class="-1884243309106371316" onmouseenter="enter('-1884243309106371316');" onmouseout="out('-1884243309106371316');" style="">1224             if (mInfoBottomSheet == null) {                                                              </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style="">1225                 mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226             }                                                                                            </span>
<span class="-9107266656084872702" onmouseenter="enter('-9107266656084872702');" onmouseout="out('-9107266656084872702');" style="">1227             mInfoBottomSheet.show(mNote);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228         }                                                                                                </span>
<span  style="">1229                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230     }                                                                                                    </span>
<span  style="">1231                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1232     private void showHistorySheet() {                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1233         if (isAdded()) {                                                                                 </span>
<span class="-2356271684565414206" onmouseenter="enter('-2356271684565414206');" onmouseout="out('-2356271684565414206');" style="">1234             if (mHistoryBottomSheet == null) {                                                           </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style="">1235                 mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236             }                                                                                            </span>
<span  style="">1237                                                                                                          </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1238             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1239             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1239             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1240             saveNote();                                                                                  </span>
<span  style="">1241                                                                                                          </span>
<span class="-8018381336008501546" onmouseenter="enter('-8018381336008501546');" onmouseout="out('-8018381336008501546');" style="">1242             mHistoryBottomSheet.show(mNote);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244     }                                                                                                    </span>
<span  style="">1245                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1246     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1247      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1248      */                                                                                                  </span>
<span  style="">1249                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1250     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1251     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1252                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253     }                                                                                                    </span>
<span  style="">1254                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1255     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1256     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1256     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1257         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1258             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1259                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1260                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1261                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1262                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1263                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1264                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1265                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1266                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267                                 }                                                                        </span>
<span  style="">1268                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1269                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1270                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1272                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1274                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1275                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279     }                                                                                                    </span>
<span  style="">1280                                                                                                          </span>
<span  style="">1281                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1282     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1283     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1284         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285     }                                                                                                    </span>
<span  style="">1286                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1287     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1288     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1289         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1290         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1291             return;                                                                                      </span>
<span  style="">1292                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1293         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1294         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1295             return;                                                                                      </span>
<span  style="">1296                                                                                                          </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style="">1297         note.setContent(getNoteContentString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299 }                                                                                                        </span>














































































































































































































































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4  import android.app.Fragment;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   5  import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   6  import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   7  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   8  import android.content.Intent;                                                                                    </span>
<span class="-840652079464298178" onmouseenter="enter('-840652079464298178');" onmouseout="out('-840652079464298178');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   9 -import android.content.res.TypedArray;                                                                            </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  10  import android.database.Cursor;                                                                                   </span>
<span class="1216741051675613788" onmouseenter="enter('1216741051675613788');" onmouseout="out('1216741051675613788');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  11 -import android.graphics.drawable.ColorDrawable;                                                                   </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  12 +import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  13  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  14  import android.os.AsyncTask;                                                                                      </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  15  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  16  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  17  import android.os.Handler;                                                                                        </span>
<span class="7113341696390925527" onmouseenter="enter('7113341696390925527');" onmouseout="out('7113341696390925527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  18 +import android.support.design.widget.Snackbar;                                                                    </span>
<span class="6292606154682534015" onmouseenter="enter('6292606154682534015');" onmouseout="out('6292606154682534015');" style="">  19  import android.support.v7.app.AppCompatActivity;                                                                  </span>
<span class="-8226814767277370585" onmouseenter="enter('-8226814767277370585');" onmouseout="out('-8226814767277370585');" style="">  20  import android.support.v7.view.ActionMode;                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  21  import android.text.Editable;                                                                                     </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  22  import android.text.Spanned;                                                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  23  import android.text.TextWatcher;                                                                                  </span>
<span class="8343381593784914756" onmouseenter="enter('8343381593784914756');" onmouseout="out('8343381593784914756');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  24 -import android.text.format.DateUtils;                                                                             </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  25  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  26  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  27  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  28  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  29  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  30  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  31  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  32  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  33  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  34  import android.view.ViewGroup;                                                                                    </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  35 -import android.view.WindowManager;                                                                                </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  36  import android.view.inputmethod.InputMethodManager;                                                               </span>

<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  37  import android.widget.CursorAdapter;                                                                              </span>
<span class="-7136991092569948508" onmouseenter="enter('-7136991092569948508');" onmouseout="out('-7136991092569948508');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  38 -import android.widget.ImageButton;                                                                                </span>
<span class="-8478546344938881111" onmouseenter="enter('-8478546344938881111');" onmouseout="out('-8478546344938881111');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  39 -import android.widget.ImageView;                                                                                  </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  40  import android.widget.LinearLayout;                                                                               </span>
<span class="842268080202249770" onmouseenter="enter('842268080202249770');" onmouseout="out('842268080202249770');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  41 -import android.widget.PopupWindow;                                                                                </span>
<span class="5812243973891360848" onmouseenter="enter('5812243973891360848');" onmouseout="out('5812243973891360848');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  42 -import android.widget.SeekBar;                                                                                    </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  43  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  44  import android.widget.Toast;                                                                                      </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  45 -import android.widget.ToggleButton;                                                                               </span>
<span class="737425360271515900" onmouseenter="enter('737425360271515900');" onmouseout="out('737425360271515900');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  46 -import android.widget.ViewSwitcher;                                                                               </span>
<span  style="">  47                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  48  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  49  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  50  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  51  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  52  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  53 +import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  54  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 +import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  56  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  57  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +import com.automattic.simplenote.utils.SnackbarUtils;                                                             </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  59  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  60  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  61  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  62  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  63  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>

<span class="-6478088126414832186" onmouseenter="enter('-6478088126414832186');" onmouseout="out('-6478088126414832186');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  64 -import com.kennyc.bottomsheet.BottomSheet;                                                                        </span>
<span class="7570874020288718322" onmouseenter="enter('7570874020288718322');" onmouseout="out('7570874020288718322');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  65 -import com.kennyc.bottomsheet.BottomSheetListener;                                                                </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  66  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  67  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  68  import com.simperium.client.Query;                                                                                </span>
<span  style="">  69                                                                                                                    </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  70 -import org.json.JSONObject;                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  71 -                                                                                                                  </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  72 -import java.text.NumberFormat;                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  73 -import java.util.ArrayList;                                                                                       </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  74  import java.util.Calendar;                                                                                        </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  75 -import java.util.Map;                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  76 -                                                                                                                  </span>
<span class="7280890691619564888" onmouseenter="enter('7280890691619564888');" onmouseout="out('7280890691619564888');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="  77 -public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListener, View.OnFocusChangeListener, SimplenoteEditText.OnSelectionChangedListener {">  77 -public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListenerðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  78 +                                                                                                                  </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  79 +public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  80 +        TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  81 +        SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  82 +        ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  83 +        HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="-1616372346803851838" onmouseenter="enter('-1616372346803851838');" onmouseout="out('-1616372346803851838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  84 +        InfoBottomSheetDialog.InfoSheetListener {                                                                 </span>
<span  style="">  85                                                                                                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  86      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  87      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  88      static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>

<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  89      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  90      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  91 +    private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +    private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span  style="">  93                                                                                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  94      private Note mNote;                                                                                           </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  95      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span  style="">  96                                                                                                                    </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  97      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  98      private TagsMultiAutoCompleteTextView mTagView;                                                               </span>
<span class="5165556704755836097" onmouseenter="enter('5165556704755836097');" onmouseout="out('5165556704755836097');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  99 -    private PopupWindow mInfoPopupWindow;                                                                         </span>
<span class="2151569111334383868" onmouseenter="enter('2151569111334383868');" onmouseout="out('2151569111334383868');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 100 -    private View mHistoryView;                                                                                    </span>
<span class="2185363042559783972" onmouseenter="enter('2185363042559783972');" onmouseout="out('2185363042559783972');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 101 -    private SeekBar mHistorySeekBar;                                                                              </span>
<span class="5153068566955290700" onmouseenter="enter('5153068566955290700');" onmouseout="out('5153068566955290700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 102 -    private BottomSheet mBottomSheet;                                                                             </span>
<span class="-5532628574218846387" onmouseenter="enter('-5532628574218846387');" onmouseout="out('-5532628574218846387');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 103 -    private TextView mHistoryDate;                                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 104 -                                                                                                                  </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 105 -    private ToggleButton mPinButton;                                                                              </span>
<span  style=""> 106                                                                                                                    </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 107      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 108      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 109 +    private Handler mHistoryTimeoutHandler;                                                                       </span>
<span  style=""> 110                                                                                                                    </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 111      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 112      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="3983635637410949309" onmouseenter="enter('3983635637410949309');" onmouseout="out('3983635637410949309');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 113 -    private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton;                                             </span>
<span class="275494556225166536" onmouseenter="enter('275494556225166536');" onmouseout="out('275494556225166536');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 114 +    private boolean mIsNewNote, mIsLoadingNote;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 115      private ActionMode mActionMode;                                                                               </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 116      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 117      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 118      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 119      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-2809999858206249165" onmouseenter="enter('-2809999858206249165');" onmouseout="out('-2809999858206249165');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 120 -    private int mEmailIconResId, mWebIconResId, mMapIconResId, mCallIconResId;                                    </span>
<span class="-6925628041030715987" onmouseenter="enter('-6925628041030715987');" onmouseout="out('-6925628041030715987');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 121 +    private Drawable mEmailIcon, mWebIcon, mMapIcon, mCallIcon;                                                   </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 122      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 123      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 124      private int mCurrentCursorPosition;                                                                           </span>
<span class="2386861943840741326" onmouseenter="enter('2386861943840741326');" onmouseout="out('2386861943840741326');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 125 -    private ArrayList&lt;Note&gt; mNoteRevisionsList;                                                                   </span>
<span class="7045155254268917571" onmouseenter="enter('7045155254268917571');" onmouseout="out('7045155254268917571');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 126 +    private String mLastContentString;                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 127 +                                                                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 128 +    private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 129 +    private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 130 +    private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 131 +                                                                                                                  </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +    private Snackbar mPublishingSnackbar;                                                                         </span>
<span  style=""> 133                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 134      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 135       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 136       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 137       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 138      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139      }                                                                                                             </span>
<span  style=""> 140                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 141      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 142      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 143          super.onCreate(savedInstanceState);                                                                       </span>
<span  style=""> 144                                                                                                                    </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 145          if (getActivity() != null) {                                                                              </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 146              Simplenote currentApp = (Simplenote) getActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 147              mNotesBucket = currentApp.getNotesBucket();                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 148 -                                                                                                                  </span>
<span class="6390134422937918444" onmouseenter="enter('6390134422937918444');" onmouseout="out('6390134422937918444');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 149 -            TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionBarIconWeb, R.attr.actionBarIconMap, R.attr.actionBarIconCall});"> 149 -            TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionðŸ”µ</abbr></span>
<span class="-368005650607593546" onmouseenter="enter('-368005650607593546');" onmouseout="out('-368005650607593546');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 150 -            if (a != null) {                                                                                      </span>
<span class="156477903530707073" onmouseenter="enter('156477903530707073');" onmouseout="out('156477903530707073');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 151 -                mEmailIconResId = a.getResourceId(0, 0);                                                          </span>
<span class="2237960387607406884" onmouseenter="enter('2237960387607406884');" onmouseout="out('2237960387607406884');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 152 -                mWebIconResId = a.getResourceId(1, 0);                                                            </span>
<span class="-2587404817224189880" onmouseenter="enter('-2587404817224189880');" onmouseout="out('-2587404817224189880');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 153 -                mMapIconResId = a.getResourceId(2, 0);                                                            </span>
<span class="7397862531502718567" onmouseenter="enter('7397862531502718567');" onmouseout="out('7397862531502718567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 154 -                mCallIconResId = a.getResourceId(3, 0);                                                           </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 155 -                a.recycle();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 156 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 157 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 158 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 159 +                                                                                                                  </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 160 +        mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 160 +        mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 161 +        mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 161 +        mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attrðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 162 +        mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 162 +        mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 163 +        mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 163 +        mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actðŸ”µ</abbr></span>
<span  style=""> 164                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 165          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 166          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +        mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +                                                                                                                  </span>
<span class="-6036514116585965367" onmouseenter="enter('-6036514116585965367');" onmouseout="out('-6036514116585965367');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +        mLastContentString = &quot;&quot;;                                                                                  </span>
<span  style=""> 170                                                                                                                    </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 171          mMatchHighlighter = new TextHighlighter(getActivity(),                                                    </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 172                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 173          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 174              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 175              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 176                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 177                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 178                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179              }                                                                                                     </span>
<span  style=""> 180                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 181              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 182              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 183                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 184                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185              }                                                                                                     </span>
<span  style=""> 186                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 187              @Override                                                                                             </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 188              public CharSequence convertToString(Cursor cursor){                                                   </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 189                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190              }                                                                                                     </span>
<span  style=""> 191                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 192              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 193              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 194                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 195                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 196                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 197                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 198                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 199                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 200                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 201                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 202                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 203                  if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 203                  if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%ðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 204                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 206          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207      }                                                                                                             </span>
<span  style=""> 208                                                                                                                    </span>
<span  style=""> 209                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 210      @Override                                                                                                     </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 211      public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {           </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 212          setHasOptionsMenu(true);                                                                                  </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 213          View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                        </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 214          mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));                       </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 215          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 216          mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                          </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 217          mTagView.setTokenizer(new SpaceTokenizer());                                                              </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 218          mTagView.setOnFocusChangeListener(this);                                                                  </span>
<span  style=""> 219                                                                                                                    </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 220          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span  style=""> 221                                                                                                                    </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 222 -        mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                                        </span>
<span class="-6233419192957625397" onmouseenter="enter('-6233419192957625397');" onmouseout="out('-6233419192957625397');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 223 -        mPinButton.setOnClickListener(new View.OnClickListener() {                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 224 -            @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 225 -            public void onClick(View v) {                                                                         </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 226 -                if (mPinButton.isChecked()) {                                                                     </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 227 -                    // Friendly message to the user as to what this button does.                                  </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 228 -                    Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 229 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 230 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 231 -        });                                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 232 -                                                                                                                  </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 233          mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                                </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 234          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 235              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="8823595637372647509" onmouseenter="enter('8823595637372647509');" onmouseout="out('8823595637372647509');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 236 +            getActivity().invalidateOptionsMenu();                                                                </span>









<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237          }                                                                                                         </span>
<span  style=""> 238                                                                                                                    </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 239          mTagView.setAdapter(mAutocompleteAdapter);                                                                </span>
<span  style=""> 240                                                                                                                    </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 241          // Load note if we were passed a note Id                                                                  </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 242          Bundle arguments = getArguments();                                                                        </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 243          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 244              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 245              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 246                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247              }                                                                                                     </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 248              new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                            </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 249              setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250          }                                                                                                         </span>
<span  style=""> 251                                                                                                                    </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 252  		return rootView;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253  	}                                                                                                                </span>
<span  style=""> 254                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 255      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 256      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 257          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 258          mNotesBucket.start();                                                                                     </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 259          mNotesBucket.addListener(this);                                                                           </span>
<span  style=""> 260                                                                                                                    </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 261          mTagView.setOnTagAddedListener(this);                                                                     </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 263          if (mContentEditText != null) {                                                                           </span>
<span class="-999020196626820400" onmouseenter="enter('-999020196626820400');" onmouseout="out('-999020196626820400');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 264 -            mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_FONT_SIZE, 18));"> 264 -            mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtilsðŸ”µ</abbr></span>
<span class="-4898136971195212464" onmouseenter="enter('-4898136971195212464');" onmouseout="out('-4898136971195212464');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 265 +            mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_FONT_SIZE, 14));"> 265 +            mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtilsðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267      }                                                                                                             </span>
<span  style=""> 268                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 269      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 270      public void onPause() {                                                                                       </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 271          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 272          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 273          if (getActivity() != null) {                                                                              </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 274              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 274              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 275              if (inputMethodManager != null) {                                                                     </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 276                  inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278          }                                                                                                         </span>
<span  style=""> 279                                                                                                                    </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 280          // Delete the note if it is new and has empty fields                                                      </span>
<span class="-2219905285758853631" onmouseenter="enter('-2219905285758853631');" onmouseout="out('-2219905285758853631');" style=""> 281          if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty()) {                                                       </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 282              mNote.delete();                                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 283          } else {                                                                                                  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 284              saveNote();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285          }                                                                                                         </span>
<span  style=""> 286                                                                                                                    </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 287          mTagView.setOnTagAddedListener(null);                                                                     </span>
<span  style=""> 288                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 289          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 290              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291          }                                                                                                         </span>
<span  style=""> 292                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 293          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 294              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295          }                                                                                                         </span>
<span  style=""> 296                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 297 +        if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 298 +            mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 299 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 300 +                                                                                                                  </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 301          mHighlighter.stop();                                                                                      </span>
<span  style=""> 302                                                                                                                    </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 303          super.onPause();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304      }                                                                                                             </span>
<span  style=""> 305                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 306      @Override                                                                                                     </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style=""> 307      public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                           </span>
<span class="-47684643030935164" onmouseenter="enter('-47684643030935164');" onmouseout="out('-47684643030935164');" style=""> 308          if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity())) {                                   </span>

<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 309              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310          }                                                                                                         </span>
<span  style=""> 311                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 312          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span  style=""> 313                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 314          if (mNote != null) {                                                                                      </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 315              MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                                  </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 316              viewPublishedNoteItem.setVisible(true);                                                               </span>






<span  style=""> 317                                                                                                                    </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 318              MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);                     </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 319              if (mNote.isDeleted())                                                                                </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 320                  trashItem.setTitle(R.string.undelete);                                                            </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 321              else                                                                                                  </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 322                  trashItem.setTitle(R.string.delete);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323          }                                                                                                         </span>
<span  style=""> 324                                                                                                                    </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +        DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 326 +                                                                                                                  </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 327          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328      }                                                                                                             </span>
<span  style=""> 329                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 330      @Override                                                                                                     </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style=""> 331      public boolean onOptionsItemSelected(MenuItem item) {                                                         </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 332          switch (item.getItemId()) {                                                                               </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 333              case R.id.menu_view_info:                                                                             </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 334 -                if (mNote != null) {                                                                              </span>
<span class="-5974815457760504487" onmouseenter="enter('-5974815457760504487');" onmouseout="out('-5974815457760504487');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 335 -                    View menuItemView = getActivity().findViewById(R.id.menu_view_info);                          </span>
<span class="2497222703395221844" onmouseenter="enter('2497222703395221844');" onmouseout="out('2497222703395221844');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 336 -                    showInfoPopup(menuItemView);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 337 -                }                                                                                                 </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 338 +                showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 339 +                return true;                                                                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 340 +                                                                                                                  </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 341 +            case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 342 +                showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 343                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 344              case R.id.menu_share:                                                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 345 -                if (mNote != null) {                                                                              </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 346 -                    Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                          </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 347 -                    shareIntent.setType(&quot;text/plain&quot;);                                                            </span>
<span class="2565640458837084796" onmouseenter="enter('2565640458837084796');" onmouseout="out('2565640458837084796');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 348 -                    shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mNote.getContent());                  </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 349 -                    startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 349 -                    startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note))ðŸ”µ</abbr></span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 350 -                    AnalyticsTracker.track(                                                                       </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 351 -                            AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 352 -                            AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 353 -                            &quot;action_bar_share_button&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 354 -                    );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 355 -                }                                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 356 +                shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 357                  return true;                                                                                      </span>


















<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 358              case R.id.menu_delete:                                                                                </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 359                  if (!isAdded()) return false;                                                                     </span>
<span  style=""> 360                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 361 -                if (mNote != null) {                                                                              </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 362 -                    mNote.setDeleted(!mNote.isDeleted());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 363 -                    mNote.setModificationDate(Calendar.getInstance());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 364 -                    mNote.save();                                                                                 </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 365 -                    Intent resultIntent = new Intent();                                                           </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 366 -                    if (mNote.isDeleted()) {                                                                      </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 367 -                        resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 368 -                    }                                                                                             </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 369 -                    getActivity().setResult(Activity.RESULT_OK, resultIntent);                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 370 -                                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 371 -                    AnalyticsTracker.track(                                                                       </span>
<span class="272006350020544349" onmouseenter="enter('272006350020544349');" onmouseout="out('272006350020544349');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 372 -                            AnalyticsTracker.Stat.EDITOR_NOTE_DELETED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 373 -                            AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="-6954849474356068168" onmouseenter="enter('-6954849474356068168');" onmouseout="out('-6954849474356068168');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 374 -                            &quot;trash_menu_item&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 375 -                    );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 376 -                }                                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 377 -                                                                                                                  </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 378 -                getActivity().finish();                                                                           </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 379 +                deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 380                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 381              case android.R.id.home:                                                                               </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 382                  if (!isAdded()) return false;                                                                     </span>
<span  style=""> 383                                                                                                                    </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 384                  getActivity().finish();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 385                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 386              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 387                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388          }                                                                                                         </span>












<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389      }                                                                                                             </span>
<span  style=""> 390                                                                                                                    </span>
<span class="8271468180839847847" onmouseenter="enter('8271468180839847847');" onmouseout="out('8271468180839847847');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 391 -    // show a popup view from the info action bar item                                                            </span>
<span class="301694884727727095" onmouseenter="enter('301694884727727095');" onmouseout="out('301694884727727095');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 392 -    private void showInfoPopup(View view) {                                                                       </span>
<span class="-8824124309160747557" onmouseenter="enter('-8824124309160747557');" onmouseout="out('-8824124309160747557');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 393 -        if (!isAdded() || view == null) return;                                                                   </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 394 -                                                                                                                  </span>
<span class="-6163322818153177863" onmouseenter="enter('-6163322818153177863');" onmouseout="out('-6163322818153177863');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 395 -        if (mInfoPopupWindow == null) {                                                                           </span>
<span class="6416634994496998699" onmouseenter="enter('6416634994496998699');" onmouseout="out('6416634994496998699');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 396 -            mInfoPopupWindow = new PopupWindow(getActivity());                                                    </span>
<span class="-7704183450622301834" onmouseenter="enter('-7704183450622301834');" onmouseout="out('-7704183450622301834');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 397 -            mInfoPopupWindow.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);                                   </span>
<span class="-3987029803100381492" onmouseenter="enter('-3987029803100381492');" onmouseout="out('-3987029803100381492');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 398 -            mInfoPopupWindow.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);                                  </span>
<span class="-8327124619089985465" onmouseenter="enter('-8327124619089985465');" onmouseout="out('-8327124619089985465');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 399 -            mInfoPopupWindow.setBackgroundDrawable(new ColorDrawable(0));                                         </span>
<span class="3466073935356821559" onmouseenter="enter('3466073935356821559');" onmouseout="out('3466073935356821559');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 400 -            mInfoPopupWindow.setOutsideTouchable(true);                                                           </span>
<span class="-1875471742113799055" onmouseenter="enter('-1875471742113799055');" onmouseout="out('-1875471742113799055');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 401 -            mInfoPopupWindow.setFocusable(true);                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 402 -                                                                                                                  </span>
<span class="5212568524712573915" onmouseenter="enter('5212568524712573915');" onmouseout="out('5212568524712573915');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 403 -            LayoutInflater inflater = LayoutInflater.from(getActivity());                                         </span>
<span class="-7758049233010801507" onmouseenter="enter('-7758049233010801507');" onmouseout="out('-7758049233010801507');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 404 -            View popupView = inflater.inflate(R.layout.popup_info, null);                                         </span>
<span class="536077715701124131" onmouseenter="enter('536077715701124131');" onmouseout="out('536077715701124131');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 405 -            mInfoPopupWindow.setContentView(popupView);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 406 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 407 -                                                                                                                  </span>
<span class="-4651993534606395663" onmouseenter="enter('-4651993534606395663');" onmouseout="out('-4651993534606395663');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 408 -        updateInfoPopup();                                                                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 409 -                                                                                                                  </span>
<span class="4487253113225225144" onmouseenter="enter('4487253113225225144');" onmouseout="out('4487253113225225144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 410 -        mInfoPopupWindow.showAsDropDown(view);                                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 411 -                                                                                                                  </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 412 -        // Request revisions for the current note                                                                 </span>
<span class="762034941650544962" onmouseenter="enter('762034941650544962');" onmouseout="out('762034941650544962');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 413 -        mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mRevisionsRequestCallbacks);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 414 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 415 -                                                                                                                  </span>
<span class="-8758077771583595367" onmouseenter="enter('-8758077771583595367');" onmouseout="out('-8758077771583595367');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 416 -    // update the content of the popupview                                                                        </span>
<span class="-7181846678873590508" onmouseenter="enter('-7181846678873590508');" onmouseout="out('-7181846678873590508');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 417 -    private void updateInfoPopup() {                                                                              </span>
<span class="-8697403400729029020" onmouseenter="enter('-8697403400729029020');" onmouseout="out('-8697403400729029020');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 418 -        if (mInfoPopupWindow == null || mInfoPopupWindow.getContentView() == null) return;                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 419 -                                                                                                                  </span>
<span class="3837773520867540996" onmouseenter="enter('3837773520867540996');" onmouseout="out('3837773520867540996');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 420 -        View popupView = mInfoPopupWindow.getContentView();                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 421 -                                                                                                                  </span>
<span class="-5563348291777194716" onmouseenter="enter('-5563348291777194716');" onmouseout="out('-5563348291777194716');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 422 -        View publishButton = popupView.findViewById(R.id.publish_note_button);                                    </span>
<span class="4581310412057978293" onmouseenter="enter('4581310412057978293');" onmouseout="out('4581310412057978293');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 423 -        TextView publishButtonTextView = (TextView)popupView.findViewById(R.id.publish_note_button_text);         </span>
<span class="-6410915739065156574" onmouseenter="enter('-6410915739065156574');" onmouseout="out('-6410915739065156574');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 424 -        ImageView publishButtonIcon = (ImageView)popupView.findViewById(R.id.publish_note_button_icon);           </span>
<span class="-6918482493044946592" onmouseenter="enter('-6918482493044946592');" onmouseout="out('-6918482493044946592');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 425 -        TextView publishTextView = (TextView) popupView.findViewById(R.id.publish_url_textview);                  </span>
<span class="1038347291336054559" onmouseenter="enter('1038347291336054559');" onmouseout="out('1038347291336054559');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 426 -        TextView wordCountTextView = (TextView) popupView.findViewById(R.id.word_count);                          </span>
<span class="-7977646551049898553" onmouseenter="enter('-7977646551049898553');" onmouseout="out('-7977646551049898553');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 427 -        ImageButton publishCopyButton = (ImageButton) popupView.findViewById(R.id.publish_copy_url);              </span>
<span class="7101383467626352915" onmouseenter="enter('7101383467626352915');" onmouseout="out('7101383467626352915');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 428 -        ImageButton publishShareButton = (ImageButton) popupView.findViewById(R.id.publish_share_url);            </span>
<span class="3150325744662714786" onmouseenter="enter('3150325744662714786');" onmouseout="out('3150325744662714786');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 429 -        View actionsView = popupView.findViewById(R.id.publish_actions);                                          </span>
<span class="5489608530057038062" onmouseenter="enter('5489608530057038062');" onmouseout="out('5489608530057038062');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 430 -        final View historyButton = popupView.findViewById(R.id.history_button);                                   </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 431 -                                                                                                                  </span>
<span class="1432622249676412210" onmouseenter="enter('1432622249676412210');" onmouseout="out('1432622249676412210');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 432 -        final ViewSwitcher viewSwitcher = (ViewSwitcher) popupView.findViewById(R.id.publish_view_switcher);      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 433 -                                                                                                                  </span>
<span class="-7759606836018483289" onmouseenter="enter('-7759606836018483289');" onmouseout="out('-7759606836018483289');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 434 -        publishButton.setOnClickListener(new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 435 -            @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 436 -            public void onClick(View v) {                                                                         </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 437 -                if (mNote != null) {                                                                              </span>
<span class="5563864695602119989" onmouseenter="enter('5563864695602119989');" onmouseout="out('5563864695602119989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 438 -                    boolean newPublishedStatus = !mNote.isPublished();                                            </span>
<span class="-3191807331109519265" onmouseenter="enter('-3191807331109519265');" onmouseout="out('-3191807331109519265');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 439 -                    mNote.setPublished(newPublishedStatus);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 440 -                    mNote.save();                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 441 -                                                                                                                  </span>
<span class="-6566894946886815467" onmouseenter="enter('-6566894946886815467');" onmouseout="out('-6566894946886815467');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 442 -                    if (viewSwitcher.getDisplayedChild() == 0) {                                                  </span>
<span class="1964540099195163034" onmouseenter="enter('1964540099195163034');" onmouseout="out('1964540099195163034');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 443 -                        viewSwitcher.showNext();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 444 -                    }                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 445 -                                                                                                                  </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 446 -                    // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                    </span>
<span class="-4829904289357833951" onmouseenter="enter('-4829904289357833951');" onmouseout="out('-4829904289357833951');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 447 -                    mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, 20000);                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 448 -                                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 449 -                    AnalyticsTracker.track(                                                                       </span>
<span class="-964751905852229606" onmouseenter="enter('-964751905852229606');" onmouseout="out('-964751905852229606');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 450 -                            (newPublishedStatus) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                  </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 451 -                            AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 452 -                            AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 453 -                            &quot;publish_note_button&quot;                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 454 -                    );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 455 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 456 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 457 -        });                                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 458 -                                                                                                                  </span>
<span class="4045844893437359317" onmouseenter="enter('4045844893437359317');" onmouseout="out('4045844893437359317');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 459 -        publishTextView.setOnClickListener(new View.OnClickListener() {                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 460 -            @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 461 -            public void onClick(View v) {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 462 -                try {                                                                                             </span>
<span class="-8142976939479350202" onmouseenter="enter('-8142976939479350202');" onmouseout="out('-8142976939479350202');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 463 -                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(mNote.getPublishedUrl())));            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 464 -                    AnalyticsTracker.track(                                                                       </span>
<span class="-7226020036200642301" onmouseenter="enter('-7226020036200642301');" onmouseout="out('-7226020036200642301');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 465 -                            AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED_URL_PRESSED,                              </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 466 -                            AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="2700792918893123401" onmouseenter="enter('2700792918893123401');" onmouseout="out('2700792918893123401');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 467 -                            &quot;publish_note_url_button&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 468 -                    );                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 469 -                } catch (Exception e) {                                                                           </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 470 -                    e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 471 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 472 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 473 -        });                                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 474 -                                                                                                                  </span>
<span class="-6950650320634084190" onmouseenter="enter('-6950650320634084190');" onmouseout="out('-6950650320634084190');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 475 -        publishCopyButton.setOnClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 476 -            @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 477 -            public void onClick(View v) {                                                                         </span>
<span class="4796955211675373396" onmouseenter="enter('4796955211675373396');" onmouseout="out('4796955211675373396');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 478 -                ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 478 -                ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SðŸ”µ</abbr></span>
<span class="-7278433972965562810" onmouseenter="enter('-7278433972965562810');" onmouseout="out('-7278433972965562810');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 479 -                ClipData clip = ClipData.newPlainText(getString(R.string.app_name), mNote.getPublishedUrl());     </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 480 -                clipboard.setPrimaryClip(clip);                                                                   </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 481 -                Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 482 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 483 -        });                                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 484 -                                                                                                                  </span>
<span class="7858974346508965340" onmouseenter="enter('7858974346508965340');" onmouseout="out('7858974346508965340');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 485 -        publishShareButton.setOnClickListener(new View.OnClickListener() {                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 486 -            @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 487 -            public void onClick(View v) {                                                                         </span>
<span class="-1084258541936962831" onmouseenter="enter('-1084258541936962831');" onmouseout="out('-1084258541936962831');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 488 -                Intent i = new Intent(Intent.ACTION_SEND);                                                        </span>
<span class="-4820203166518762252" onmouseenter="enter('-4820203166518762252');" onmouseout="out('-4820203166518762252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 489 -                i.setType(&quot;text/plain&quot;);                                                                          </span>
<span class="-6000923337939610903" onmouseenter="enter('-6000923337939610903');" onmouseout="out('-6000923337939610903');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 490 -                i.putExtra(Intent.EXTRA_TEXT, mNote.getPublishedUrl());                                           </span>
<span class="3733331565586339944" onmouseenter="enter('3733331565586339944');" onmouseout="out('3733331565586339944');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 491 -                startActivity(Intent.createChooser(i, getString(R.string.share_url)));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 492 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 493 -        });                                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 494 -                                                                                                                  </span>
<span class="-2067876314787213528" onmouseenter="enter('-2067876314787213528');" onmouseout="out('-2067876314787213528');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 495 -        updateWordCount(wordCountTextView);                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 496 -                                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 497 -        if (mNote.isPublished()) {                                                                                </span>
<span class="-8174565940676304202" onmouseenter="enter('-8174565940676304202');" onmouseout="out('-8174565940676304202');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 498 -            publishButtonTextView.setText(getString(R.string.published));                                         </span>
<span class="8297531220637406295" onmouseenter="enter('8297531220637406295');" onmouseout="out('8297531220637406295');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 499 -            publishButtonIcon.setVisibility(View.VISIBLE);                                                        </span>
<span class="-2988513566372186325" onmouseenter="enter('-2988513566372186325');" onmouseout="out('-2988513566372186325');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 500 -            publishTextView.setText(mNote.getPublishedUrl());                                                     </span>
<span class="6413899042811805294" onmouseenter="enter('6413899042811805294');" onmouseout="out('6413899042811805294');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 501 -            actionsView.setVisibility(View.VISIBLE);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 502 -        } else {                                                                                                  </span>
<span class="843719504642786212" onmouseenter="enter('843719504642786212');" onmouseout="out('843719504642786212');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 503 -            publishButtonTextView.setText(getString(R.string.publish));                                           </span>
<span class="-2250731724671553485" onmouseenter="enter('-2250731724671553485');" onmouseout="out('-2250731724671553485');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 504 -            publishButtonIcon.setVisibility(View.GONE);                                                           </span>
<span class="1035970444036754268" onmouseenter="enter('1035970444036754268');" onmouseout="out('1035970444036754268');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 505 -            actionsView.setVisibility(View.GONE);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 506 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 507 -                                                                                                                  </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 508 -        Simplenote currentApp = (Simplenote) getActivity().getApplication();                                      </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 509 -        if (currentApp.getSimperium().needsAuthorization()) {                                                     </span>
<span class="5338357254244494547" onmouseenter="enter('5338357254244494547');" onmouseout="out('5338357254244494547');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 510 -            viewSwitcher.setVisibility(View.GONE);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 511 -        } else {                                                                                                  </span>
<span class="4598892846854382425" onmouseenter="enter('4598892846854382425');" onmouseout="out('4598892846854382425');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 512 -            viewSwitcher.setVisibility(View.VISIBLE);                                                             </span>
<span class="3959257289291069285" onmouseenter="enter('3959257289291069285');" onmouseout="out('3959257289291069285');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 513 -            if (viewSwitcher.getDisplayedChild() == 1) {                                                          </span>
<span class="-7472993052671010203" onmouseenter="enter('-7472993052671010203');" onmouseout="out('-7472993052671010203');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 514 -                viewSwitcher.showPrevious();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 515 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 516 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 517 -                                                                                                                  </span>
<span class="673144038622160482" onmouseenter="enter('673144038622160482');" onmouseout="out('673144038622160482');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 518 -        historyButton.setEnabled(mNote.getVersion() &gt; 1);                                                         </span>
<span class="8924867735831646745" onmouseenter="enter('8924867735831646745');" onmouseout="out('8924867735831646745');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 519 -        if (historyButton.isEnabled()) {                                                                          </span>
<span class="3960051769731363435" onmouseenter="enter('3960051769731363435');" onmouseout="out('3960051769731363435');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 520 -            historyButton.setAlpha(1.0f);                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 521 -        } else {                                                                                                  </span>
<span class="7526820438800264068" onmouseenter="enter('7526820438800264068');" onmouseout="out('7526820438800264068');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 522 -            historyButton.setAlpha(0.5f);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 523 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 524 -                                                                                                                  </span>
<span class="-2736155227408152467" onmouseenter="enter('-2736155227408152467');" onmouseout="out('-2736155227408152467');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 525 -        historyButton.setOnClickListener(new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 526 -            @Override                                                                                             </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 527 -            public void onClick(View view) {                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 528 -                saveNote();                                                                                       </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 529 -                showHistorySheet();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 530 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 531 -        });                                                                                                       </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 532 +    private void deleteNote() {                                                                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 533 +        if (mNote != null) {                                                                                      </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 534 +            mNote.setDeleted(!mNote.isDeleted());                                                                 </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 535 +            mNote.setModificationDate(Calendar.getInstance());                                                    </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 536 +            mNote.save();                                                                                         </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 537 +            Intent resultIntent = new Intent();                                                                   </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 538 +            if (mNote.isDeleted()) {                                                                              </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 539 +                resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 540 +            }                                                                                                     </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 541 +            getActivity().setResult(Activity.RESULT_OK, resultIntent);                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 542 +                                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 543 +            AnalyticsTracker.track(                                                                               </span>
<span class="272006350020544349" onmouseenter="enter('272006350020544349');" onmouseout="out('272006350020544349');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 544 +                    AnalyticsTracker.Stat.EDITOR_NOTE_DELETED,                                                    </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 545 +                    AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="-6954849474356068168" onmouseenter="enter('-6954849474356068168');" onmouseout="out('-6954849474356068168');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 546 +                    &quot;trash_menu_item&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 547 +            );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 548 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 549 +                                                                                                                  </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 550 +        getActivity().finish();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 551 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 552 +                                                                                                                  </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 553 +    private void shareNote() {                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 554 +        if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 555 +            mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 556 +            showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 557 +            AnalyticsTracker.track(                                                                               </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 558 +                    AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                             </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 559 +                    AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 560 +                    &quot;action_bar_share_button&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 561 +            );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 562 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 563 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 564 +                                                                                                                  </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 565 +    private void showHistory() {                                                                                  </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 566 +        if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 567 +            mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 568 +            mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 569 +            showHistorySheet();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 570 +        }                                                                                                         </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 571 +        else {                                                                                                    </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 572 +            Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 573 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 574 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 575 +                                                                                                                  </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 576 +    private void showInfo() {                                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 577 +        if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 578 +            mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 579 +            saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 580 +            showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 581 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 582      }                                                                                                             </span>
<span  style=""> 583                                                                                                                    </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 584      private boolean noteIsEmpty() {                                                                               </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 585          return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586      }                                                                                                             </span>
<span  style=""> 587                                                                                                                    </span>









<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 588      public void setNote(String noteID){                                                                           </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 589          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590      }                                                                                                             </span>
<span  style=""> 591                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 592      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 593          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 594              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span  style=""> 595                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 596          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 597                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 598          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 599              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 600          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 601              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602          }                                                                                                         </span>
<span  style=""> 603                                                                                                                    </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 604          // If we have a note already (on a tablet in landscape), save the note.                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 605          if (mNote != null) {                                                                                      </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 606              if (mIsNewNote &amp;&amp; noteIsEmpty())                                                                      </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 607                  mNote.delete();                                                                                   </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 608              else if (mNote != null)                                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 609                  saveNote();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610          }                                                                                                         </span>
<span  style=""> 611                                                                                                                    </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 612          new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613      }                                                                                                             </span>
<span  style=""> 614                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 615      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 616          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 617          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 618          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619      }                                                                                                             </span>
<span  style=""> 620                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 621      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 622          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 623              // Restore the cursor position if possible.                                                           </span>
<span  style=""> 624                                                                                                                    </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 625              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 625              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span  style=""> 626                                                                                                                    </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 627              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 628                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 629              if (isNoteUpdate) {                                                                                   </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 630                  // Save the note so any local changes get synced                                                  </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 631                  mNote.save();                                                                                     </span>
<span  style=""> 632                                                                                                                    </span>
<span class="-5094013145931261947" onmouseenter="enter('-5094013145931261947');" onmouseout="out('-5094013145931261947');" style=""> 633                  if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) {        </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 634                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636              }                                                                                                     </span>
<span  style=""> 637                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 638              afterTextChanged(mContentEditText.getText());                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 639 -                                                                                                                  </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 640 -            mPinButton.setChecked(mNote.isPinned());                                                              </span>
<span  style=""> 641                                                                                                                    </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 642              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644      }                                                                                                             </span>
<span  style=""> 645                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 646      private void updateTagList() {                                                                                </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 647          Activity activity = getActivity();                                                                        </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 648          if (activity == null) return;                                                                             </span>
<span  style=""> 649                                                                                                                    </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 650          // Populate this note&#x27;s tags in the tagView                                                               </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 651          mTagView.setChips(mNote.getTagString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652      }                                                                                                             </span>
<span  style=""> 653                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 654      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 655          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 656          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 657          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 658          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 659          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 660          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 661          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 662          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 663                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 664          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 665                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 666          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 667                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 668          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 669          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 670              return newText.length();                                                                              </span>
<span  style=""> 671                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 672          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 673          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 674                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 675          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 676              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 676              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 677              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 677              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 678          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 679              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680          }                                                                                                         </span>
<span  style=""> 681                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 682          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 683          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 684              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 685                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 686          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 687          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688      }                                                                                                             </span>
<span  style=""> 689                                                                                                                    </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 690      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 691          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 692          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 693              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 695      };                                                                                                            </span>
<span  style=""> 696                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 697      @Override                                                                                                     </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 698      public void onTagsChanged(String tagString) {                                                                 </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 699          if (mNote == null || !isAdded()) return;                                                                  </span>
<span  style=""> 700                                                                                                                    </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 701          if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 702              AnalyticsTracker.track(                                                                               </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 703                      AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                                       </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 704                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 705                      &quot;tag_added_to_note&quot;                                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 706              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707          }                                                                                                         </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style=""> 708          else {                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 709              AnalyticsTracker.track(                                                                               </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 710                      AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 711                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 712                      &quot;tag_removed_from_note&quot;                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 713              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714          }                                                                                                         </span>
<span  style=""> 715                                                                                                                    </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 716          mNote.setTagString(tagString);                                                                            </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 717          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 718          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 719          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720      }                                                                                                             </span>
<span  style=""> 721                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 722      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 723      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 724          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725      }                                                                                                             </span>
<span  style=""> 726                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 727      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 728      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 729 -        setTitleSpan(editable);                                                                                   </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 730 -        attemptAutoList(editable);                                                                                </span>
<span class="2514214199025893024" onmouseenter="enter('2514214199025893024');" onmouseout="out('2514214199025893024');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 731 +        // check that the content has really changed (line spacing fix)                                           </span>
<span class="6844133105735349548" onmouseenter="enter('6844133105735349548');" onmouseout="out('6844133105735349548');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 732 +        if (!mLastContentString.equals(editable.toString())) {                                                    </span>
<span class="-6397051223762453255" onmouseenter="enter('-6397051223762453255');" onmouseout="out('-6397051223762453255');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 733 +            mLastContentString = editable.toString();                                                             </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 734 +            setTitleSpan(editable);                                                                               </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 735 +            attemptAutoList(editable);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 736 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737      }                                                                                                             </span>
<span  style=""> 738                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 739      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 740      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span  style=""> 741                                                                                                                    </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 742          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 743          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 744              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 745              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746          }                                                                                                         </span>
<span  style=""> 747                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 748          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 749          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 750              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 751              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753      }                                                                                                             </span>
<span  style=""> 754                                                                                                                    </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 755      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 756          // Set the note title to be a larger size                                                                 </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 757          // Remove any existing size spans                                                                         </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 758          RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);               </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 759          for (RelativeSizeSpan span : spans) {                                                                     </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 760              editable.removeSpan(span);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761          }                                                                                                         </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 762          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 763          if (newLinePosition == 0)                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 764              return;                                                                                               </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 765          editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 765          editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.lengtðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 766 +                                                                                                                  </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 767 +        fixLineSpacing();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 768 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 769 +                                                                                                                  </span>
<span class="7193322245360440607" onmouseenter="enter('7193322245360440607');" onmouseout="out('7193322245360440607');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 770 +    // Fix for a line spacing bug                                                                                 </span>
<span class="1109641776173301717" onmouseenter="enter('1109641776173301717');" onmouseout="out('1109641776173301717');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 771 +    // https://code.google.com/p/android/issues/detail?id=78706                                                   </span>
<span class="4063573973446204119" onmouseenter="enter('4063573973446204119');" onmouseout="out('4063573973446204119');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 772 +    private void fixLineSpacing() {                                                                               </span>
<span class="7589713459723827226" onmouseenter="enter('7589713459723827226');" onmouseout="out('7589713459723827226');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 773 +        mContentEditText.setLineSpacing(8, 1);                                                                    </span>
<span class="-5617495624819001565" onmouseenter="enter('-5617495624819001565');" onmouseout="out('-5617495624819001565');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 774 +        int startSelection = mContentEditText.getSelectionStart();                                                </span>
<span class="-3810514162346969633" onmouseenter="enter('-3810514162346969633');" onmouseout="out('-3810514162346969633');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 775 +        mContentEditText.setText(mContentEditText.getText());                                                     </span>
<span class="-3363651382695067315" onmouseenter="enter('-3363651382695067315');" onmouseout="out('-3363651382695067315');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 776 +        mContentEditText.setSelection(startSelection);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777      }                                                                                                             </span>
<span  style=""> 778                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 779      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 780          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 781          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 782          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 783          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784      }                                                                                                             </span>
<span  style=""> 785                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 786      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 787          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 788              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789          }                                                                                                         </span>
<span  style=""> 790                                                                                                                    </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 791          new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792      }                                                                                                             </span>
<span  style=""> 793                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 794      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 795          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 796              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 797              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 798              mTagView.setText(&quot;&quot;);                                                                                 </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 799              if (mPlaceholderView != null)                                                                         </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 800                  mPlaceholderView.setVisibility(View.VISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 801          } else {                                                                                                  </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 802              if (mPlaceholderView != null)                                                                         </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 803                  mPlaceholderView.setVisibility(View.GONE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805      }                                                                                                             </span>
<span  style=""> 806                                                                                                                    </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 807      public void setIsNewNote(boolean isNewNote) {                                                                 </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 808          this.mIsNewNote = isNewNote;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809      }                                                                                                             </span>
<span  style=""> 810                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 811      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 812      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 813          if (!hasFocus) {                                                                                          </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 814              String tagString = getNoteTagsString().trim();                                                        </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 815              if (tagString.length() &gt; 0) {                                                                         </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 816                  mTagView.setChips(tagString);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819      }                                                                                                             </span>
<span  style=""> 820                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 821      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 822          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823      }                                                                                                             </span>
<span  style=""> 824                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 825      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 826          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 827              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 828          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 829              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831      }                                                                                                             </span>
<span  style=""> 832                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 833      private String getNoteTagsString() {                                                                          </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 834          if (mTagView == null || mTagView.getText() == null) {                                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 835              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 836          } else {                                                                                                  </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 837              return mTagView.getText().toString();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 839 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 840 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 841 +    /**                                                                                                           </span>
<span class="-5383409035208064059" onmouseenter="enter('-5383409035208064059');" onmouseout="out('-5383409035208064059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 842 +     *  Share bottom sheet callbacks                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 843 +     */                                                                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 844 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 845 +    @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 846 +    public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 847 +        publishNote();                                                                                            </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 848 +        mShareBottomSheet.dismiss();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 849 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 850 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 851 +    @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 852 +    public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 853 +        unpublishNote();                                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 854 +        mShareBottomSheet.dismiss();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 855 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 856 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 857 +    @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 858 +    public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 859 +        Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 860 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 861 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 862 +    @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 863 +    public void onShareDismissed() {                                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 864 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 865 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 866 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 867 +    /**                                                                                                           </span>
<span class="5481029743273605403" onmouseenter="enter('5481029743273605403');" onmouseout="out('5481029743273605403');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 868 +     *  History bottom sheet listeners                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 869 +     */                                                                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 870 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 871 +    @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 872 +    public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 873 +        mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 874 +        mHistoryBottomSheet.dismiss();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 875 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 876 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 877 +    @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 878 +    public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 879 +        mHistoryBottomSheet.dismiss();                                                                            </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 880 +        saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 881 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 882 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 883 +    @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 884 +    public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 885 +        if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 886 +            mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 887 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 888 +                                                                                                                  </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 889 +        if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 890 +            mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 891 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 892 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 893 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 894 +    @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 895 +    public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 896 +        mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 897 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 898 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 899 +    /**                                                                                                           </span>
<span class="377242332922771021" onmouseenter="enter('377242332922771021');" onmouseout="out('377242332922771021');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 900 +     *  Info bottom sheet listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 901 +     */                                                                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 902 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 903 +    @Override                                                                                                     </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 904 +    public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                                    </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 905 +        NoteUtils.setNotePin(mNote, isSwitchedOn);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 906 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 907 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 908 +    @Override                                                                                                     </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 909 +    public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 910 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 911 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 912 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 913 +    @Override                                                                                                     </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 914 +    public void onInfoCopyLinkClicked() {                                                                         </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 915 +        copyToClipboard(mNote.getPublishedUrl());                                                                 </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 916 +        Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 917 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 918 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 919 +    @Override                                                                                                     </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 920 +    public void onInfoShareLinkClicked() {                                                                        </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 921 +        mInfoBottomSheet.dismiss();                                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 922 +        showShareSheet();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 923 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 924 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 925 +    @Override                                                                                                     </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 926 +    public void onInfoDismissed() {                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 927 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928      }                                                                                                             </span>
<span  style=""> 929                                                                                                                    </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 930      private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                            </span>
<span  style=""> 931                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 932          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 933          protected void onPreExecute() {                                                                           </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 934              mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                                  </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 935              mIsLoadingNote = true;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936          }                                                                                                         </span>
<span  style=""> 937                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 938          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 939          protected Void doInBackground(String... args) {                                                           </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 940              if (getActivity() == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 941                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 942              }                                                                                                     </span>
<span  style=""> 943                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 944              String noteID = args[0];                                                                              </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 945              Simplenote application = (Simplenote) getActivity().getApplication();                                 </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 946              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 947              try {                                                                                                 </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 948                  mNote = notesBucket.get(noteID);                                                                  </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 949                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 950                  if (getActivity() instanceof NotesActivity) {                                                     </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style=""> 951                      ((NotesActivity) getActivity()).setCurrentNote(mNote);                                        </span>








<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 953              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 954                  // TODO: Handle a missing note                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 956              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957          }                                                                                                         </span>
<span  style=""> 958                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 959          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 960          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style=""> 961              if (getActivity() == null || getActivity().isFinishing())                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 962                  return;                                                                                           </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 963              refreshContent(false);                                                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 964              if (mMatchOffsets != null) {                                                                          </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 965                  int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 965                  int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 966                  mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 967              }                                                                                                     </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 968              mContentEditText.addTextChangedListener(NoteEditorFragment.this);                                     </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 969              if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                                  </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 970                  // Show soft keyboard                                                                             </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 971                  mContentEditText.requestFocus();                                                                  </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 972                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 973                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 974                      public void run() {                                                                           </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 975                          InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 975                          InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServicðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 976                          if (inputMethodManager != null)                                                           </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 977                              inputMethodManager.showSoftInput(mContentEditText, 0);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 978                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 979                  }, 100);                                                                                          </span>
<span  style=""> 980                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981              }                                                                                                     </span>
<span  style=""> 982                                                                                                                    </span>















<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 983              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span  style=""> 984                                                                                                                    </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 985              mIsLoadingNote = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987      }                                                                                                             </span>
<span  style=""> 988                                                                                                                    </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 989      private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                              </span>
<span  style=""> 990                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 991          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 992          protected Void doInBackground(Void... args) {                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 993              saveNote();                                                                                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 994              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995          }                                                                                                         </span>
<span  style=""> 996                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 997          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 998          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style=""> 999              if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                          </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1000                  // Update links                                                                                   </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1001                  SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004      }                                                                                                             </span>
<span  style="">1005                                                                                                                    </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1006      private void saveNote() {                                                                                     </span>













<span class="-2414246363966835945" onmouseenter="enter('-2414246363966835945');" onmouseout="out('-2414246363966835945');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1007 -        if (mNote == null || (mBottomSheet != null &amp;&amp; mBottomSheet.isShowing())) {                                </span>
<span class="8202353742932995245" onmouseenter="enter('8202353742932995245');" onmouseout="out('8202353742932995245');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1008 +        if (mNote == null || (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1009              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010          }                                                                                                         </span>
<span  style="">1011                                                                                                                    </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style="">1012          String content = getNoteContentString();                                                                  </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1013          String tagString = getNoteTagsString();                                                                   </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1014 -        if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                                </span>
<span class="3263351027592661332" onmouseenter="enter('3263351027592661332');" onmouseout="out('3263351027592661332');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1015 +        if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned())) {                                      </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1016              mNote.setContent(content);                                                                            </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1017              mNote.setTagString(tagString);                                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1018              mNote.setModificationDate(Calendar.getInstance());                                                    </span>

<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style="">1019              // Send pinned event to google analytics if changed                                                   </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1020 -            mNote.setPinned(mPinButton.isChecked());                                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1021              mNote.save();                                                                                         </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1022 -            if (getActivity() != null) {                                                                          </span>
<span class="9119823558701234173" onmouseenter="enter('9119823558701234173');" onmouseout="out('9119823558701234173');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1023 -                if (mNote.isPinned() != mPinButton.isChecked()) {                                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1024 -                    AnalyticsTracker.track(                                                                       </span>
<span class="6973099362194796934" onmouseenter="enter('6973099362194796934');" onmouseout="out('6973099362194796934');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1025 -                            mPinButton.isChecked() ? AnalyticsTracker.Stat.EDITOR_NOTE_PINNED :                   </span>
<span class="-7220998596328413851" onmouseenter="enter('-7220998596328413851');" onmouseout="out('-7220998596328413851');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1026 -                                    AnalyticsTracker.Stat.EDITOR_NOTE_UNPINNED,                                   </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1027 -                            AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="5441361990485968371" onmouseenter="enter('5441361990485968371');" onmouseout="out('5441361990485968371');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1028 -                            &quot;pin_button&quot;                                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1029 -                    );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1030 -                }                                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1031 -                                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1032 -                AnalyticsTracker.track(                                                                           </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1033 -                        AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                                 </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1034 -                        AnalyticsTracker.CATEGORY_NOTE,                                                           </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1035 -                        &quot;editor_save&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1036 -                );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1037 -            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1038 +                                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1039 +            AnalyticsTracker.track(                                                                               </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1040 +                    AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1041 +                    AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1042 +                    &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1043 +            );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045      }                                                                                                             </span>
<span  style="">1046                                                                                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style="">1047      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style="">1048      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span  style="">1049                                                                                                                    </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style="">1050          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1051          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style="">1052          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style="">1053              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style="">1054              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style="">1055              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style="">1056                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style="">1057                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style="">1058                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style="">1059                  if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                         </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style="">1060                      mode.setTitleOptionalHint(false);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061                  }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1062 +                                                                                                                  </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1063 +                DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064              }                                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1065              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066          }                                                                                                         </span>
<span  style="">1067                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style="">1068          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style="">1069          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1070          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style="">1071          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style="">1072              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073          }                                                                                                         </span>
<span  style="">1074                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style="">1075          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1076          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style="">1077          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style="">1078              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style="">1079                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style="">1080                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1081                          try {                                                                                     </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style="">1082                              Uri uri = Uri.parse(mLinkUrl);                                                        </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style="">1083                              Intent i = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style="">1084                              i.setData(uri);                                                                       </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style="">1085                              startActivity(i);                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1086                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1087                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088                          }                                                                                         </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style="">1089                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1090                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1091                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style="">1092                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style="">1093                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1094 -                        ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);">1094 -                        ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1095 -                        ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);            </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1096 -                        clipboard.setPrimaryClip(clip);                                                           </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1097 +                        copyToClipboard(mLinkText);                                                               </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style="">1098                          Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();</span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="">1099                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1101                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style="">1102                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style="">1103                      if (mLinkText != null) {                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1104 -                        try {                                                                                     </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1105 -                            Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                  </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1106 -                            shareIntent.setType(&quot;text/plain&quot;);                                                    </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1107 -                            shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);                   </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1108 -                            startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));">1108 -                            startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.sharðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1109 -                        } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1110 -                            e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1111 -                        }                                                                                         </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1112 +                        showShareSheet();                                                                         </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="">1113                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1115                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">1116                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1117                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1118              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119          }                                                                                                         </span>
<span  style="">1120                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style="">1121          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1122          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style="">1123          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1124              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1126      };                                                                                                            </span>
<span  style="">1127                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1128      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1129      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1130      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1131      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1132          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1133              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1134              if (noteContent == null)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1135                  return;                                                                                           </span>
<span  style="">1136                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1137              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1138              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1139                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1140                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1141                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1141                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1142                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1143                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1144                      setLinkMenuItem();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1145                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146                  }                                                                                                 </span>
<span  style="">1147                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1148                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1149                  if (getActivity() != null) {                                                                      </span>
<span class="7722450347844852596" onmouseenter="enter('7722450347844852596');" onmouseout="out('7722450347844852596');" style="">1150                      mActionMode = ((AppCompatActivity)getActivity()).startSupportActionMode(mActionModeCallback); </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1151                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1152                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153                      }                                                                                             </span>
<span  style="">1154                                                                                                                    </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1155                      setLinkMenuItem();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1156                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1157              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1158                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1159                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1161          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1162              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1163              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165      }                                                                                                             </span>
<span  style="">1166                                                                                                                    </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1167      private void setLinkMenuItem() {                                                                              </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1168          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1169              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="4608769072092705594" onmouseenter="enter('4608769072092705594');" onmouseout="out('4608769072092705594');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1170 -                mViewLinkMenuItem.setIcon(mCallIconResId);                                                        </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1171 +                mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1172                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1173              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="112818067677115399" onmouseenter="enter('112818067677115399');" onmouseout="out('112818067677115399');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1174 -                mViewLinkMenuItem.setIcon(mEmailIconResId);                                                       </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1175 +                mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1176                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1177              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-5464734295170160558" onmouseenter="enter('-5464734295170160558');" onmouseout="out('-5464734295170160558');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1178 -                mViewLinkMenuItem.setIcon(mMapIconResId);                                                         </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1179 +                mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1180                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1181              } else {                                                                                              </span>
<span class="-4632312324298999235" onmouseenter="enter('-4632312324298999235');" onmouseout="out('-4632312324298999235');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1182 -                mViewLinkMenuItem.setIcon(mWebIconResId);                                                         </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1183 +                mViewLinkMenuItem.setIcon(mWebIcon);                                                              </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1184                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187      }                                                                                                             </span>
<span  style="">1188                                                                                                                    </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style="">1189      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style="">1190      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1191          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1192          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1193              if (!isAdded()) return;                                                                               </span>
<span  style="">1194                                                                                                                    </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1195              getActivity().runOnUiThread(new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1196                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1197                  public void run() {                                                                               </span>
<span class="-46541338249551852" onmouseenter="enter('-46541338249551852');" onmouseout="out('-46541338249551852');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1198 -                    Toast.makeText(                                                                               </span>
<span class="1251951171853107838" onmouseenter="enter('1251951171853107838');" onmouseout="out('1251951171853107838');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1199 -                            getActivity(),                                                                        </span>
<span class="112353621179497368" onmouseenter="enter('112353621179497368');" onmouseout="out('112353621179497368');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1200 -                            mNote.isPublished() ? R.string.publish_error : R.string.unpublish_error,              </span>
<span class="-5464445565121122409" onmouseenter="enter('-5464445565121122409');" onmouseout="out('-5464445565121122409');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1201 -                            Toast.LENGTH_SHORT                                                                    </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1202 -                    ).show();                                                                                     </span>
<span  style="">1203                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style="">1204                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1205                      mNote.save();                                                                                 </span>
<span  style="">1206                                                                                                                    </span>
<span class="-4813280994160595323" onmouseenter="enter('-4813280994160595323');" onmouseout="out('-4813280994160595323');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1207 -                    if (mInfoPopupWindow != null &amp;&amp; mInfoPopupWindow.isShowing()) {                               </span>
<span class="-6944825779591395660" onmouseenter="enter('-6944825779591395660');" onmouseout="out('-6944825779591395660');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1208 -                        ViewSwitcher viewSwitcher = (ViewSwitcher)mInfoPopupWindow.getContentView().findViewById(R.id.publish_view_switcher);">1208 -                        ViewSwitcher viewSwitcher = (ViewSwitcher)mInfoPopupWindow.getContentView().findViewById(RðŸ”µ</abbr></span>
<span class="3959257289291069285" onmouseenter="enter('3959257289291069285');" onmouseout="out('3959257289291069285');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1209 -                        if (viewSwitcher.getDisplayedChild() == 1) {                                              </span>
<span class="-7472993052671010203" onmouseenter="enter('-7472993052671010203');" onmouseout="out('-7472993052671010203');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1210 -                            viewSwitcher.showPrevious();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1211 -                        }                                                                                         </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1212 +                    updatePublishedState(false);                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1213 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1214 +                }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1215 +            });                                                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1216 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1217 +        }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1218 +    };                                                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1219 +                                                                                                                  </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1220 +    // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1221 +    private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1222 +        @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1223 +        public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1224 +            if (!isAdded()) return;                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1225 +                                                                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1226 +            getActivity().runOnUiThread(new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1227 +                @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1228 +                public void run() {                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1229 +                                                                                                                  </span>
<span class="6844751493350163385" onmouseenter="enter('6844751493350163385');" onmouseout="out('6844751493350163385');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1230 +                    if (mHistoryBottomSheet.isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {              </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1231 +                        mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1232 +                        Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1235              });                                                                                                   </span>
<span  style="">1236                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1238      };                                                                                                            </span>
<span  style="">1239                                                                                                                    </span>
<span class="1779789763575252159" onmouseenter="enter('1779789763575252159');" onmouseout="out('1779789763575252159');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1240 -    private void updateWordCount(TextView textView) {                                                             </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1241 -        String content = getNoteContentString();                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1242 -                                                                                                                  </span>
<span class="-1008232604726066894" onmouseenter="enter('-1008232604726066894');" onmouseout="out('-1008232604726066894');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1243 -        if (content == null || textView == null) return;                                                          </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1244 -                                                                                                                  </span>
<span class="-1430881109113489374" onmouseenter="enter('-1430881109113489374');" onmouseout="out('-1430881109113489374');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1245 -        int numWords = (content.trim().length() == 0) ? 0 : content.trim().split(&quot;([\\W]+)&quot;).length;              </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1246 -                                                                                                                  </span>
<span class="7366599842051642465" onmouseenter="enter('7366599842051642465');" onmouseout="out('7366599842051642465');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1247 -        String wordCountString = getResources().getQuantityString(R.plurals.word_count, numWords);                </span>
<span class="6184855737129992397" onmouseenter="enter('6184855737129992397');" onmouseout="out('6184855737129992397');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1248 -        String formattedWordCount = NumberFormat.getInstance().format(numWords);                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1249 -                                                                                                                  </span>
<span class="-8359331938088478069" onmouseenter="enter('-8359331938088478069');" onmouseout="out('-8359331938088478069');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1250 -        textView.setText(formattedWordCount + &quot; &quot; + wordCountString);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1251 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1252 -                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1253 -    /**                                                                                                           </span>
<span class="2429664440205773965" onmouseenter="enter('2429664440205773965');" onmouseout="out('2429664440205773965');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1254 -     * History methods                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1255 -     */                                                                                                           </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1256 +    private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1257 +        if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1258 +            mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1259 +            mNote.save();                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1260 +                                                                                                                  </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1261 +            // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1262 +            mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1263 +                                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1264 +            AnalyticsTracker.track(                                                                               </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1265 +                    (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                                 </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1266 +                            AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1267 +                    AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1268 +                    &quot;publish_note_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1269 +            );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1270 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1271 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1272 +                                                                                                                  </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1273 +    private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1274 +                                                                                                                  </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1275 +        if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1276 +            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1277 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1278 +                                                                                                                  </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1279 +        mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1280 +        mPublishingSnackbar = null;                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1281 +                                                                                                                  </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1282 +        if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1283 +            if (mNote.isPublished()) {                                                                            </span>
<span class="-7688080222453146357" onmouseenter="enter('-7688080222453146357');" onmouseout="out('-7688080222453146357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1284 +                SnackbarUtils.showSnackbar(getActivity(), R.string.publish_successful,                            </span>
<span class="1517681013250933454" onmouseenter="enter('1517681013250933454');" onmouseout="out('1517681013250933454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1285 +                        R.color.simplenote_positive_green,                                                        </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1286 +                        Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1287 +                            @Override                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1288 +                            public void onClick(View v) {                                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1289 +                                unpublishNote();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1290 +                            }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1291 +                        });                                                                                       </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1292 +                copyToClipboard(mNote.getPublishedUrl());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1293 +            } else {                                                                                              </span>
<span class="-153294762762717121" onmouseenter="enter('-153294762762717121');" onmouseout="out('-153294762762717121');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1294 +                SnackbarUtils.showSnackbar(getActivity(), R.string.unpublish_successful,                          </span>
<span class="8669465432699610879" onmouseenter="enter('8669465432699610879');" onmouseout="out('8669465432699610879');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1295 +                        R.color.simplenote_negative_red,                                                          </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1296 +                        Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1297 +                            @Override                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1298 +                            public void onClick(View v) {                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1299 +                                publishNote();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1300 +                            }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1301 +                        });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1302 +            }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1303 +        } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1304 +            if (mNote.isPublished()) {                                                                            </span>
<span class="3959102095641312076" onmouseenter="enter('3959102095641312076');" onmouseout="out('3959102095641312076');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1305 +                SnackbarUtils.showSnackbar(getActivity(), R.string.unpublish_error,                               </span>
<span class="131095352187516196" onmouseenter="enter('131095352187516196');" onmouseout="out('131095352187516196');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1306 +                        R.color.simplenote_negative_red, Snackbar.LENGTH_LONG);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1307 +            } else {                                                                                              </span>
<span class="-2257940760039104199" onmouseenter="enter('-2257940760039104199');" onmouseout="out('-2257940760039104199');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1308 +                SnackbarUtils.showSnackbar(getActivity(), R.string.publish_error,                                 </span>
<span class="131095352187516196" onmouseenter="enter('131095352187516196');" onmouseout="out('131095352187516196');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1309 +                        R.color.simplenote_negative_red, Snackbar.LENGTH_LONG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1310 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1311 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1312 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1313 +                                                                                                                  </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1314 +    private void publishNote() {                                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1315 +                                                                                                                  </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1316 +        if (isAdded()) {                                                                                          </span>
<span class="-3919291052884701924" onmouseenter="enter('-3919291052884701924');" onmouseout="out('-3919291052884701924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1317 +            mPublishingSnackbar = SnackbarUtils.showSnackbar(getActivity(), R.string.publishing,                  </span>
<span class="-1976946684900965607" onmouseenter="enter('-1976946684900965607');" onmouseout="out('-1976946684900965607');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1318 +                    R.color.simplenote_blue, Snackbar.LENGTH_INDEFINITE);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1319 +        }                                                                                                         </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1320 +        setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1321 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1322 +                                                                                                                  </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1323 +    private void unpublishNote() {                                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1324 +                                                                                                                  </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1325 +        if (isAdded()) {                                                                                          </span>
<span class="-7608597247223762409" onmouseenter="enter('-7608597247223762409');" onmouseout="out('-7608597247223762409');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1326 +            mPublishingSnackbar = SnackbarUtils.showSnackbar(getActivity(), R.string.unpublishing,                </span>
<span class="-1976946684900965607" onmouseenter="enter('-1976946684900965607');" onmouseout="out('-1976946684900965607');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1327 +                    R.color.simplenote_blue, Snackbar.LENGTH_INDEFINITE);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1328 +        }                                                                                                         </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1329 +        setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1330 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1331 +                                                                                                                  </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1332 +    private void copyToClipboard(String text) {                                                                   </span>
<span class="4796955211675373396" onmouseenter="enter('4796955211675373396');" onmouseout="out('4796955211675373396');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1333 +        ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SERVICE);</span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1334 +        ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                                </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1335 +        clipboard.setPrimaryClip(clip);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1336 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1337 +                                                                                                                  </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1338 +    private void showShareSheet() {                                                                               </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1339 +        if (isAdded()) {                                                                                          </span>
<span class="-7649938693804610664" onmouseenter="enter('-7649938693804610664');" onmouseout="out('-7649938693804610664');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1340 +            if (mShareBottomSheet == null) {                                                                      </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1341 +                mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1342 +            }                                                                                                     </span>
<span class="-5706261914377124016" onmouseenter="enter('-5706261914377124016');" onmouseout="out('-5706261914377124016');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1343 +            mShareBottomSheet.show(mNote);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1344 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1345 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1346 +                                                                                                                  </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1347 +    private void showInfoSheet() {                                                                                </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1348 +        if (isAdded()) {                                                                                          </span>
<span class="-1884243309106371316" onmouseenter="enter('-1884243309106371316');" onmouseout="out('-1884243309106371316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1349 +            if (mInfoBottomSheet == null) {                                                                       </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1350 +                mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1351 +            }                                                                                                     </span>
<span class="-9107266656084872702" onmouseenter="enter('-9107266656084872702');" onmouseout="out('-9107266656084872702');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1352 +            mInfoBottomSheet.show(mNote);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1353 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1354 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1355 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1356 +                                                                                                                  </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1357      private void showHistorySheet() {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1358 -        mContentEditText.clearFocus();                                                                            </span>
<span class="5237643276151641917" onmouseenter="enter('5237643276151641917');" onmouseout="out('5237643276151641917');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1359 -        mHistoryView = LayoutInflater.from(getActivity()).inflate(R.layout.history_view, null, false);            </span>
<span class="5351690757262643215" onmouseenter="enter('5351690757262643215');" onmouseout="out('5351690757262643215');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1360 -        mHistoryDate = (TextView)mHistoryView.findViewById(R.id.history_date);                                    </span>
<span class="-8290893453917192352" onmouseenter="enter('-8290893453917192352');" onmouseout="out('-8290893453917192352');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1361 -        mHistorySeekBar = (SeekBar) mHistoryView.findViewById(R.id.seek_bar);                                     </span>
<span class="-6796587650430049801" onmouseenter="enter('-6796587650430049801');" onmouseout="out('-6796587650430049801');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1362 -        mHistorySeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1363 -            @Override                                                                                             </span>
<span class="-1277213496629109114" onmouseenter="enter('-1277213496629109114');" onmouseout="out('-1277213496629109114');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1364 -            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {                      </span>
<span class="-512529548396220132" onmouseenter="enter('-512529548396220132');" onmouseout="out('-512529548396220132');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1365 -                if (mNoteRevisionsList == null  || mBottomSheet == null || !mBottomSheet.isShowing()) {           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1366 -                    return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1367 -                }                                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1368 -                                                                                                                  </span>
<span class="3261374061397327379" onmouseenter="enter('3261374061397327379');" onmouseout="out('3261374061397327379');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1369 -                Calendar noteDate = null;                                                                         </span>
<span class="795067484543094152" onmouseenter="enter('795067484543094152');" onmouseout="out('795067484543094152');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1370 -                if (progress == mNoteRevisionsList.size()) {                                                      </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1371 -                    mContentEditText.setText(mNote.getContent());                                                 </span>
<span class="422777865783702887" onmouseenter="enter('422777865783702887');" onmouseout="out('422777865783702887');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1372 -                    noteDate = mNote.getModificationDate();                                                       </span>
<span class="2604941407803017700" onmouseenter="enter('2604941407803017700');" onmouseout="out('2604941407803017700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1373 -                } else if (progress &lt; mNoteRevisionsList.size() &amp;&amp; mNoteRevisionsList.get(progress) != null) {    </span>
<span class="-3015683834625267614" onmouseenter="enter('-3015683834625267614');" onmouseout="out('-3015683834625267614');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1374 -                    Note revisedNote = mNoteRevisionsList.get(progress);                                          </span>
<span class="-7346540990617068874" onmouseenter="enter('-7346540990617068874');" onmouseout="out('-7346540990617068874');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1375 -                    noteDate = revisedNote.getModificationDate();                                                 </span>
<span class="5014324377411359116" onmouseenter="enter('5014324377411359116');" onmouseout="out('5014324377411359116');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1376 -                    mContentEditText.setText(revisedNote.getContent());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1377 -                }                                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1378 -                                                                                                                  </span>
<span class="7005083347252376032" onmouseenter="enter('7005083347252376032');" onmouseout="out('7005083347252376032');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1379 -                updateHistoryDateText(noteDate);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1380 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1381 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1382 -            @Override                                                                                             </span>
<span class="4123707204084181282" onmouseenter="enter('4123707204084181282');" onmouseout="out('4123707204084181282');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1383 -            public void onStartTrackingTouch(SeekBar seekBar) {                                                   </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1384 -                // noop                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1385 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1386 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1387 -            @Override                                                                                             </span>
<span class="-2171166798537522744" onmouseenter="enter('-2171166798537522744');" onmouseout="out('-2171166798537522744');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1388 -            public void onStopTrackingTouch(SeekBar seekBar) {                                                    </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1389 -                // noop                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1390 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1391 -        });                                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1392 -                                                                                                                  </span>
<span class="-399278629944560479" onmouseenter="enter('-399278629944560479');" onmouseout="out('-399278629944560479');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1393 -        View cancelHistoryButton = mHistoryView.findViewById(R.id.cancel_history_button);                         </span>
<span class="-3870882073524415989" onmouseenter="enter('-3870882073524415989');" onmouseout="out('-3870882073524415989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1394 -        cancelHistoryButton.setOnClickListener(new View.OnClickListener() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1395 -            @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1396 -            public void onClick(View v) {                                                                         </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1397 -                mContentEditText.setText(mNote.getContent());                                                     </span>
<span class="-9116943613469401615" onmouseenter="enter('-9116943613469401615');" onmouseout="out('-9116943613469401615');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1398 -                if (mBottomSheet != null) {                                                                       </span>
<span class="-2253967947417219465" onmouseenter="enter('-2253967947417219465');" onmouseout="out('-2253967947417219465');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1399 -                    mDidTapHistoryButton = true;                                                                  </span>
<span class="-8632588736973837184" onmouseenter="enter('-8632588736973837184');" onmouseout="out('-8632588736973837184');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1400 -                    mBottomSheet.dismiss();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1401 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1402 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1403 -        });                                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1404 -                                                                                                                  </span>
<span class="-2430160152113857709" onmouseenter="enter('-2430160152113857709');" onmouseout="out('-2430160152113857709');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1405 -        View restoreHistoryButton = mHistoryView.findViewById(R.id.restore_history_button);                       </span>
<span class="6859677866535252732" onmouseenter="enter('6859677866535252732');" onmouseout="out('6859677866535252732');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1406 -        restoreHistoryButton.setOnClickListener(new View.OnClickListener() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1407 -            @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1408 -            public void onClick(View v) {                                                                         </span>
<span class="-9116943613469401615" onmouseenter="enter('-9116943613469401615');" onmouseout="out('-9116943613469401615');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1409 -                if (mBottomSheet != null) {                                                                       </span>
<span class="-2253967947417219465" onmouseenter="enter('-2253967947417219465');" onmouseout="out('-2253967947417219465');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1410 -                    mDidTapHistoryButton = true;                                                                  </span>
<span class="-8632588736973837184" onmouseenter="enter('-8632588736973837184');" onmouseout="out('-8632588736973837184');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1411 -                    mBottomSheet.dismiss();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1412 -                }                                                                                                 </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1413 -                saveAndSyncNote();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1414 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1415 -        });                                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1416 -                                                                                                                  </span>
<span class="3437465792954088807" onmouseenter="enter('3437465792954088807');" onmouseout="out('3437465792954088807');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1417 -        mBottomSheet = new BottomSheet.Builder(getActivity(), R.style.Simplestyle_BottomSheet)                    </span>
<span class="-4337073838954049323" onmouseenter="enter('-4337073838954049323');" onmouseout="out('-4337073838954049323');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1418 -                .setView(mHistoryView)                                                                            </span>
<span class="-273266364927551372" onmouseenter="enter('-273266364927551372');" onmouseout="out('-273266364927551372');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1419 -                .setListener(new BottomSheetListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1420 -                    @Override                                                                                     </span>
<span class="8433275164766596900" onmouseenter="enter('8433275164766596900');" onmouseout="out('8433275164766596900');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1421 -                    public void onSheetDismissed(int dismissalType) {                                             </span>
<span class="-6838835104080691738" onmouseenter="enter('-6838835104080691738');" onmouseout="out('-6838835104080691738');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1422 -                        if (dismissalType == Integer.MIN_VALUE &amp;&amp; !mDidTapHistoryButton) {                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1423 -                            mContentEditText.setText(mNote.getContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1424 -                        }                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1425 -                                                                                                                  </span>
<span class="-584414047522920425" onmouseenter="enter('-584414047522920425');" onmouseout="out('-584414047522920425');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1426 -                        mDidTapHistoryButton = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1427 -                    }                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1428 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1429 -                    @Override                                                                                     </span>
<span class="2293273900842484281" onmouseenter="enter('2293273900842484281');" onmouseout="out('2293273900842484281');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1430 -                    public void onSheetShown() {}                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1431 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1432 -                    @Override                                                                                     </span>
<span class="-3527204381204396860" onmouseenter="enter('-3527204381204396860');" onmouseout="out('-3527204381204396860');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1433 -                    public void onSheetItemSelected(MenuItem menuItem) {}                                         </span>
<span class="-2241092708317638881" onmouseenter="enter('-2241092708317638881');" onmouseout="out('-2241092708317638881');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1434 -                }).create();                                                                                      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1435 -                                                                                                                  </span>
<span class="-2327975263623319044" onmouseenter="enter('-2327975263623319044');" onmouseout="out('-2327975263623319044');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1436 -        updateHistoryProgressBar();                                                                               </span>
<span class="991390649155150526" onmouseenter="enter('991390649155150526');" onmouseout="out('991390649155150526');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1437 -        mBottomSheet.getWindow().setDimAmount(0.3f);                                                              </span>
<span class="-5369233700326482183" onmouseenter="enter('-5369233700326482183');" onmouseout="out('-5369233700326482183');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1438 -        mBottomSheet.show();                                                                                      </span>
<span class="-617993765808142661" onmouseenter="enter('-617993765808142661');" onmouseout="out('-617993765808142661');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1439 -        mInfoPopupWindow.dismiss();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1440 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1441 -                                                                                                                  </span>
<span class="-160351830965395648" onmouseenter="enter('-160351830965395648');" onmouseout="out('-160351830965395648');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1442 -    private void updateHistoryDateText(Calendar noteDate) {                                                       </span>
<span class="4424008964451702006" onmouseenter="enter('4424008964451702006');" onmouseout="out('4424008964451702006');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1443 -        if (!isAdded() || noteDate == null || mHistoryDate == null) {                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1444 -            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1445 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1446 -                                                                                                                  </span>
<span class="8956591645357029539" onmouseenter="enter('8956591645357029539');" onmouseout="out('8956591645357029539');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1447 -        long now = Calendar.getInstance().getTimeInMillis();                                                      </span>
<span class="-2353931499419985296" onmouseenter="enter('-2353931499419985296');" onmouseout="out('-2353931499419985296');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1448 -        CharSequence dateText = DateUtils.getRelativeDateTimeString(                                              </span>
<span class="1251951171853107838" onmouseenter="enter('1251951171853107838');" onmouseout="out('1251951171853107838');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1449 -                getActivity(),                                                                                    </span>
<span class="6015697872440944996" onmouseenter="enter('6015697872440944996');" onmouseout="out('6015697872440944996');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1450 -                noteDate.getTimeInMillis(),                                                                       </span>
<span class="777202033541445058" onmouseenter="enter('777202033541445058');" onmouseout="out('777202033541445058');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1451 -                now,                                                                                              </span>
<span class="3037101412943528375" onmouseenter="enter('3037101412943528375');" onmouseout="out('3037101412943528375');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1452 -                0L,                                                                                               </span>
<span class="272655446373652840" onmouseenter="enter('272655446373652840');" onmouseout="out('272655446373652840');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1453 -                DateUtils.FORMAT_ABBREV_ALL                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1454 -        );                                                                                                        </span>
<span class="3972685700437540280" onmouseenter="enter('3972685700437540280');" onmouseout="out('3972685700437540280');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1455 -        mHistoryDate.setText(dateText);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1456 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1457 -                                                                                                                  </span>
<span class="8619318982638509312" onmouseenter="enter('8619318982638509312');" onmouseout="out('8619318982638509312');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1458 -    private void updateHistoryProgressBar() {                                                                     </span>
<span class="186752481258201678" onmouseenter="enter('186752481258201678');" onmouseout="out('186752481258201678');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1459 -        if (mHistorySeekBar == null) return;                                                                      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1460 -                                                                                                                  </span>
<span class="5554977064763490309" onmouseenter="enter('5554977064763490309');" onmouseout="out('5554977064763490309');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1461 -        int totalRevs = mNoteRevisionsList == null ? 0 : mNoteRevisionsList.size();                               </span>
<span class="4069692405048976821" onmouseenter="enter('4069692405048976821');" onmouseout="out('4069692405048976821');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1462 -        if (totalRevs &gt; 0) {                                                                                      </span>
<span class="-1330096694422693628" onmouseenter="enter('-1330096694422693628');" onmouseout="out('-1330096694422693628');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1463 -            mHistorySeekBar.setMax(totalRevs);                                                                    </span>
<span class="-6553513928663368048" onmouseenter="enter('-6553513928663368048');" onmouseout="out('-6553513928663368048');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1464 -            mHistorySeekBar.setProgress(totalRevs);                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1465 -                                                                                                                  </span>
<span class="-1830906496094004296" onmouseenter="enter('-1830906496094004296');" onmouseout="out('-1830906496094004296');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1466 -            updateHistoryDateText(mNote.getModificationDate());                                                   </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1467 -                                                                                                                  </span>
<span class="-7397666508182495589" onmouseenter="enter('-7397666508182495589');" onmouseout="out('-7397666508182495589');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1468 -            mHistoryView.findViewById(R.id.history_loading_view).setVisibility(View.GONE);                        </span>
<span class="-7907562415083735313" onmouseenter="enter('-7907562415083735313');" onmouseout="out('-7907562415083735313');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1469 -            mHistoryView.findViewById(R.id.history_slider_view).setVisibility(View.VISIBLE);                      </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1470 +        if (isAdded()) {                                                                                          </span>
<span class="-2356271684565414206" onmouseenter="enter('-2356271684565414206');" onmouseout="out('-2356271684565414206');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1471 +            if (mHistoryBottomSheet == null) {                                                                    </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1472 +                mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1473 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1474 +                                                                                                                  </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1475 +            // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1476 +            mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1477 +            saveNote();                                                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1478 +                                                                                                                  </span>
<span class="-8018381336008501546" onmouseenter="enter('-8018381336008501546');" onmouseout="out('-8018381336008501546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1479 +            mHistoryBottomSheet.show(mNote);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1481      }                                                                                                             </span>
<span  style="">1482                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1483      /**                                                                                                           </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1484       * Simperium listeners                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1485       */                                                                                                           </span>
<span  style="">1486                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1487      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1488      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style="">1489                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490      }                                                                                                             </span>
<span  style="">1491                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1492      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1493      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1494          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1495              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1496                  try {                                                                                             </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1497                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1498                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1499                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1500                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1501                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1502                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1503                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504                                  }                                                                                 </span>
<span  style="">1505                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1506                                  updateNote(updatedNote);                                                          </span>
<span class="-4651993534606395663" onmouseenter="enter('-4651993534606395663');" onmouseout="out('-4651993534606395663');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1507 -                                updateInfoPopup();                                                                </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1508 +                                updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1510                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1512                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1513                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1514                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1515              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1517      }                                                                                                             </span>
<span  style="">1518                                                                                                                    </span>
<span  style="">1519                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1520      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1521      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1522          // noop                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523      }                                                                                                             </span>
<span  style="">1524                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1525      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1526      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1527          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1528          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1529              return;                                                                                               </span>
<span  style="">1530                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1531          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1532          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1533              return;                                                                                               </span>
<span  style="">1534                                                                                                                    </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style="">1535          note.setContent(getNoteContentString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536      }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1537 -                                                                                                                  </span>
<span class="8793911163422504003" onmouseenter="enter('8793911163422504003');" onmouseout="out('8793911163422504003');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1538 -    private final Bucket.RevisionsRequestCallbacks&lt;Note&gt; mRevisionsRequestCallbacks = new                         </span>
<span class="-4346671948308354571" onmouseenter="enter('-4346671948308354571');" onmouseout="out('-4346671948308354571');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1539 -            Bucket.RevisionsRequestCallbacks&lt;Note&gt;() {                                                            </span>
<span class="69869033959193681" onmouseenter="enter('69869033959193681');" onmouseout="out('69869033959193681');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1540 -                // Note: These callbacks won&#x27;t be running on the main thread                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1541 -                @Override                                                                                         </span>
<span class="5970277540647045150" onmouseenter="enter('5970277540647045150');" onmouseout="out('5970277540647045150');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1542 -                public void onComplete(Map&lt;Integer, Note&gt; revisionsMap) {                                         </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1543 -                    if (!isAdded()) return;                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1544 -                                                                                                                  </span>
<span class="-5660524009441092319" onmouseenter="enter('-5660524009441092319');" onmouseout="out('-5660524009441092319');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1545 -                    // Convert map to an array list, to work better with the 0-index based seekbar                </span>
<span class="-7432330163131317333" onmouseenter="enter('-7432330163131317333');" onmouseout="out('-7432330163131317333');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1546 -                    mNoteRevisionsList = new ArrayList&lt;&gt;(revisionsMap.values());                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1547 -                    getActivity().runOnUiThread(new Runnable() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1548 -                        @Override                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1549 -                        public void run() {                                                                       </span>
<span class="-2327975263623319044" onmouseenter="enter('-2327975263623319044');" onmouseout="out('-2327975263623319044');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1550 -                            updateHistoryProgressBar();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1551 -                        }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1552 -                    });                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1553 -                }                                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1554 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1555 -                @Override                                                                                         </span>
<span class="-6028539749056643673" onmouseenter="enter('-6028539749056643673');" onmouseout="out('-6028539749056643673');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1556 -                public void onRevision(String key, int version, JSONObject object) {}                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1557 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1558 -                @Override                                                                                         </span>
<span class="1883042208885462033" onmouseenter="enter('1883042208885462033');" onmouseout="out('1883042208885462033');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1559 -                public void onError(Throwable exception) {                                                        </span>
<span class="-784344928477717832" onmouseenter="enter('-784344928477717832');" onmouseout="out('-784344928477717832');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1560 -                    if (!isAdded() || mHistoryView == null) return;                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1561 -                                                                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1562 -                    getActivity().runOnUiThread(new Runnable() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1563 -                        @Override                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1564 -                        public void run() {                                                                       </span>
<span class="5074101638707858742" onmouseenter="enter('5074101638707858742');" onmouseout="out('5074101638707858742');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1565 -                            mHistoryView.findViewById(R.id.history_progress_bar).setVisibility(View.GONE);        </span>
<span class="-7019649418173502920" onmouseenter="enter('-7019649418173502920');" onmouseout="out('-7019649418173502920');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1566 -                            mHistoryView.findViewById(R.id.history_error_text).setVisibility(View.VISIBLE);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1567 -                        }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1568 -                    });                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1569 -                }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1570 -            };                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1571  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   4 -import android.app.Fragment;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   5  import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   6  import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   7  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   8  import android.content.Intent;                                                                                    </span>
<span class="-840652079464298178" onmouseenter="enter('-840652079464298178');" onmouseout="out('-840652079464298178');" style="">   9  import android.content.res.TypedArray;                                                                            </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  10  import android.database.Cursor;                                                                                   </span>
<span class="1216741051675613788" onmouseenter="enter('1216741051675613788');" onmouseout="out('1216741051675613788');" style="">  11  import android.graphics.drawable.ColorDrawable;                                                                   </span>

<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  12  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  13  import android.os.AsyncTask;                                                                                      </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  14  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  15  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  16  import android.os.Handler;                                                                                        </span>
<span class="1235021250095752497" onmouseenter="enter('1235021250095752497');" onmouseout="out('1235021250095752497');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  17 +import android.support.v4.app.Fragment;                                                                           </span>
<span class="6292606154682534015" onmouseenter="enter('6292606154682534015');" onmouseout="out('6292606154682534015');" style="">  18  import android.support.v7.app.AppCompatActivity;                                                                  </span>
<span class="-8226814767277370585" onmouseenter="enter('-8226814767277370585');" onmouseout="out('-8226814767277370585');" style="">  19  import android.support.v7.view.ActionMode;                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  20  import android.text.Editable;                                                                                     </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  21  import android.text.Spanned;                                                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  22  import android.text.TextWatcher;                                                                                  </span>
<span class="8343381593784914756" onmouseenter="enter('8343381593784914756');" onmouseout="out('8343381593784914756');" style="">  23  import android.text.format.DateUtils;                                                                             </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  24  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  25  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  26  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  27  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  28  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  29  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  30  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  31  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  32  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  33  import android.view.ViewGroup;                                                                                    </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="">  34  import android.view.WindowManager;                                                                                </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  35  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  36 +import android.webkit.WebView;                                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  37  import android.widget.CursorAdapter;                                                                              </span>
<span class="-7136991092569948508" onmouseenter="enter('-7136991092569948508');" onmouseout="out('-7136991092569948508');" style="">  38  import android.widget.ImageButton;                                                                                </span>
<span class="-8478546344938881111" onmouseenter="enter('-8478546344938881111');" onmouseout="out('-8478546344938881111');" style="">  39  import android.widget.ImageView;                                                                                  </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  40  import android.widget.LinearLayout;                                                                               </span>
<span class="842268080202249770" onmouseenter="enter('842268080202249770');" onmouseout="out('842268080202249770');" style="">  41  import android.widget.PopupWindow;                                                                                </span>
<span class="5812243973891360848" onmouseenter="enter('5812243973891360848');" onmouseout="out('5812243973891360848');" style="">  42  import android.widget.SeekBar;                                                                                    </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  43  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  44  import android.widget.Toast;                                                                                      </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  45  import android.widget.ToggleButton;                                                                               </span>
<span class="737425360271515900" onmouseenter="enter('737425360271515900');" onmouseout="out('737425360271515900');" style="">  46  import android.widget.ViewSwitcher;                                                                               </span>
<span  style="">  47                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  48  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  49  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  50  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  51  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  52  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>

<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  53  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>

<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  54  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  55  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>

<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  56  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  57  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  58  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  59  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  60  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="635032269362387818" onmouseenter="enter('635032269362387818');" onmouseout="out('635032269362387818');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +import com.commonsware.cwac.anddown.AndDown;                                                                      </span>
<span class="-6478088126414832186" onmouseenter="enter('-6478088126414832186');" onmouseout="out('-6478088126414832186');" style="">  62  import com.kennyc.bottomsheet.BottomSheet;                                                                        </span>
<span class="7570874020288718322" onmouseenter="enter('7570874020288718322');" onmouseout="out('7570874020288718322');" style="">  63  import com.kennyc.bottomsheet.BottomSheetListener;                                                                </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  64  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  65  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  66  import com.simperium.client.Query;                                                                                </span>
<span  style="">  67                                                                                                                    </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  68  import org.json.JSONObject;                                                                                       </span>
<span  style="">  69                                                                                                                    </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="">  70  import java.text.NumberFormat;                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  71  import java.util.ArrayList;                                                                                       </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  72  import java.util.Calendar;                                                                                        </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  73  import java.util.Map;                                                                                             </span>
<span  style="">  74                                                                                                                    </span>
<span class="7280890691619564888" onmouseenter="enter('7280890691619564888');" onmouseout="out('7280890691619564888');" style=""><abbr title="  75  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListener, View.OnFocusChangeListener, SimplenoteEditText.OnSelectionChangedListener {">  75  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;, TextWatcher, OnTagAddedListenerðŸ”µ</abbr></span>







<span  style="">  76                                                                                                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  77      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  78      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="7663325037782331899" onmouseenter="enter('7663325037782331899');" onmouseout="out('7663325037782331899');" style="">  79      static public final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="7675482774590431252" onmouseenter="enter('7675482774590431252');" onmouseout="out('7675482774590431252');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  80 +    static public final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  81      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  82      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="4572903639827164119" onmouseenter="enter('4572903639827164119');" onmouseout="out('4572903639827164119');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  83 +    public static final int THEME_LIGHT = 0;                                                                      </span>
<span class="6287065810722210354" onmouseenter="enter('6287065810722210354');" onmouseout="out('6287065810722210354');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  84 +    public static final int THEME_DARK = 1;                                                                       </span>
<span  style="">  85                                                                                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  86      private Note mNote;                                                                                           </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  87      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span  style="">  88                                                                                                                    </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  89      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  90      private TagsMultiAutoCompleteTextView mTagView;                                                               </span>
<span class="5165556704755836097" onmouseenter="enter('5165556704755836097');" onmouseout="out('5165556704755836097');" style="">  91      private PopupWindow mInfoPopupWindow;                                                                         </span>
<span class="2151569111334383868" onmouseenter="enter('2151569111334383868');" onmouseout="out('2151569111334383868');" style="">  92      private View mHistoryView;                                                                                    </span>
<span class="2185363042559783972" onmouseenter="enter('2185363042559783972');" onmouseout="out('2185363042559783972');" style="">  93      private SeekBar mHistorySeekBar;                                                                              </span>
<span class="5153068566955290700" onmouseenter="enter('5153068566955290700');" onmouseout="out('5153068566955290700');" style="">  94      private BottomSheet mBottomSheet;                                                                             </span>
<span class="-5532628574218846387" onmouseenter="enter('-5532628574218846387');" onmouseout="out('-5532628574218846387');" style="">  95      private TextView mHistoryDate;                                                                                </span>
<span  style="">  96                                                                                                                    </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  97      private ToggleButton mPinButton;                                                                              </span>
<span  style="">  98                                                                                                                    </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  99      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 100      private Handler mPublishTimeoutHandler;                                                                       </span>

<span  style=""> 101                                                                                                                    </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 102      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 103      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="3983635637410949309" onmouseenter="enter('3983635637410949309');" onmouseout="out('3983635637410949309');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 104 -    private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton;                                             </span>
<span class="8299144298417847580" onmouseenter="enter('8299144298417847580');" onmouseout="out('8299144298417847580');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 105 +    private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton, mIsMarkdownEnabled, mIsMarkdownEnabledGlobal;"> 105 +    private boolean mIsNewNote, mIsLoadingNote, mDidTapHistoryButton, mIsMarkdownEnabled, mIsMarkdownEnabledGlobalðŸ”µ</abbr></span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 106      private ActionMode mActionMode;                                                                               </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 107      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 108      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 109      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 110      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-2809999858206249165" onmouseenter="enter('-2809999858206249165');" onmouseout="out('-2809999858206249165');" style=""> 111      private int mEmailIconResId, mWebIconResId, mMapIconResId, mCallIconResId;                                    </span>

<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 112      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 113      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 114      private int mCurrentCursorPosition;                                                                           </span>
<span class="2386861943840741326" onmouseenter="enter('2386861943840741326');" onmouseout="out('2386861943840741326');" style=""> 115      private ArrayList&lt;Note&gt; mNoteRevisionsList;                                                                   </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +    private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +    private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +    private WebView mMarkdown;                                                                                    </span>




<span  style=""> 119                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 120      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 121       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 122       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 123       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 124      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125      }                                                                                                             </span>
<span  style=""> 126                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 127      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 128      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 129          super.onCreate(savedInstanceState);                                                                       </span>
<span  style=""> 130                                                                                                                    </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 131          if (getActivity() != null) {                                                                              </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 132              Simplenote currentApp = (Simplenote) getActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 133              mNotesBucket = currentApp.getNotesBucket();                                                           </span>
<span  style=""> 134                                                                                                                    </span>
<span class="6390134422937918444" onmouseenter="enter('6390134422937918444');" onmouseout="out('6390134422937918444');" style=""><abbr title=" 135              TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionBarIconWeb, R.attr.actionBarIconMap, R.attr.actionBarIconCall});"> 135              TypedArray a = getActivity().obtainStyledAttributes(new int[]{R.attr.actionBarIconEmail, R.attr.actionðŸ”µ</abbr></span>
<span class="-368005650607593546" onmouseenter="enter('-368005650607593546');" onmouseout="out('-368005650607593546');" style=""> 136              if (a != null) {                                                                                      </span>
<span class="156477903530707073" onmouseenter="enter('156477903530707073');" onmouseout="out('156477903530707073');" style=""> 137                  mEmailIconResId = a.getResourceId(0, 0);                                                          </span>
<span class="2237960387607406884" onmouseenter="enter('2237960387607406884');" onmouseout="out('2237960387607406884');" style=""> 138                  mWebIconResId = a.getResourceId(1, 0);                                                            </span>
<span class="-2587404817224189880" onmouseenter="enter('-2587404817224189880');" onmouseout="out('-2587404817224189880');" style=""> 139                  mMapIconResId = a.getResourceId(2, 0);                                                            </span>
<span class="7397862531502718567" onmouseenter="enter('7397862531502718567');" onmouseout="out('7397862531502718567');" style=""> 140                  mCallIconResId = a.getResourceId(3, 0);                                                           </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style=""> 141                  a.recycle();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143          }                                                                                                         </span>






<span  style=""> 144                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 145          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 146          mPublishTimeoutHandler = new Handler();                                                                   </span>



<span  style=""> 147                                                                                                                    </span>
<span class="-8863028397307166255" onmouseenter="enter('-8863028397307166255');" onmouseout="out('-8863028397307166255');" style=""> 148          mMatchHighlighter = new TextHighlighter(getActivity(),                                                    </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 149                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 150          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 151              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 152              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 153                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 154                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 155                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156              }                                                                                                     </span>
<span  style=""> 157                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 158              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 159              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 160                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 161                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162              }                                                                                                     </span>
<span  style=""> 163                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164              @Override                                                                                             </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 165              public CharSequence convertToString(Cursor cursor){                                                   </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 166                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167              }                                                                                                     </span>
<span  style=""> 168                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 169              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 170              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 171                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 172                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 173                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 174                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 175                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 176                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 177                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 178                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 179                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style=""><abbr title=" 180                  if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 180                  if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%ðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 181                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 183          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184      }                                                                                                             </span>
<span  style=""> 185                                                                                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 186 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 187      @Override                                                                                                     </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 188      public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {           </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 189          setHasOptionsMenu(true);                                                                                  </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 190          View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                        </span>
<span class="7145177453793333411" onmouseenter="enter('7145177453793333411');" onmouseout="out('7145177453793333411');" style=""> 191          mContentEditText = ((SimplenoteEditText) rootView.findViewById(R.id.note_content));                       </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 192          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 193          mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                          </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 194          mTagView.setTokenizer(new SpaceTokenizer());                                                              </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 195          mTagView.setOnFocusChangeListener(this);                                                                  </span>
<span  style=""> 196                                                                                                                    </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 197          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span  style=""> 198                                                                                                                    </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style=""> 199          mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                                        </span>
<span class="-6233419192957625397" onmouseenter="enter('-6233419192957625397');" onmouseout="out('-6233419192957625397');" style=""> 200          mPinButton.setOnClickListener(new View.OnClickListener() {                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 201              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 202              public void onClick(View v) {                                                                         </span>
<span class="-1510302136918940941" onmouseenter="enter('-1510302136918940941');" onmouseout="out('-1510302136918940941');" style=""> 203                  if (mPinButton.isChecked()) {                                                                     </span>
<span class="-7637598965692605019" onmouseenter="enter('-7637598965692605019');" onmouseout="out('-7637598965692605019');" style=""> 204                      // Friendly message to the user as to what this button does.                                  </span>
<span class="5938443200552047425" onmouseenter="enter('5938443200552047425');" onmouseout="out('5938443200552047425');" style=""> 205                      Toast.makeText(getActivity(), R.string.note_pinned, Toast.LENGTH_SHORT).show();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 208          });                                                                                                       </span>
<span  style=""> 209                                                                                                                    </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 210          mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                                </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 211          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 212              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="4785891395116813196" onmouseenter="enter('4785891395116813196');" onmouseout="out('4785891395116813196');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 213 +            mMarkdown = (WebView) rootView.findViewById(R.id.markdown);                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 214 +                                                                                                                  </span>
<span class="8669746627669403722" onmouseenter="enter('8669746627669403722');" onmouseout="out('8669746627669403722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 215 +            switch (PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_THEME, THEME_LIGHT)) {                     </span>
<span class="-1862280279846167044" onmouseenter="enter('-1862280279846167044');" onmouseout="out('-1862280279846167044');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +                case THEME_DARK:                                                                                  </span>
<span class="2431268192882105499" onmouseenter="enter('2431268192882105499');" onmouseout="out('2431268192882105499');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 217 +                    mCss = &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;dark.css\&quot; /&gt;&quot;;                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 218 +                    break;                                                                                        </span>
<span class="-539754023432181399" onmouseenter="enter('-539754023432181399');" onmouseout="out('-539754023432181399');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 219 +                case THEME_LIGHT:                                                                                 </span>
<span class="4484195514752522265" onmouseenter="enter('4484195514752522265');" onmouseout="out('4484195514752522265');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 220 +                    mCss = &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;light.css\&quot; /&gt;&quot;;                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 221 +                    break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 222 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223          }                                                                                                         </span>
<span  style=""> 224                                                                                                                    </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 225          mTagView.setAdapter(mAutocompleteAdapter);                                                                </span>
<span  style=""> 226                                                                                                                    </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 227          // Load note if we were passed a note Id                                                                  </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 228          Bundle arguments = getArguments();                                                                        </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 229          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 230              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 231              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 232                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233              }                                                                                                     </span>
<span class="-3890643464976908836" onmouseenter="enter('-3890643464976908836');" onmouseout="out('-3890643464976908836');" style=""> 234              new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                            </span>
<span class="-4954549700347163589" onmouseenter="enter('-4954549700347163589');" onmouseout="out('-4954549700347163589');" style=""> 235              setIsNewNote(getArguments().getBoolean(ARG_NEW_NOTE, false));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236          }                                                                                                         </span>
<span  style=""> 237                                                                                                                    </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 238  		return rootView;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239  	}                                                                                                                </span>
<span  style=""> 240                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 241      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 242      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 243          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 244          mNotesBucket.start();                                                                                     </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 245          mNotesBucket.addListener(this);                                                                           </span>
<span  style=""> 246                                                                                                                    </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 247          mTagView.setOnTagAddedListener(this);                                                                     </span>
<span  style=""> 248                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 249          if (mContentEditText != null) {                                                                           </span>
<span class="-999020196626820400" onmouseenter="enter('-999020196626820400');" onmouseout="out('-999020196626820400');" style=""><abbr title=" 250              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_FONT_SIZE, 18));"> 250              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getIntPref(getActivity(), PrefUtilsðŸ”µ</abbr></span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252      }                                                                                                             </span>
<span  style=""> 253                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 254      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 255      public void onPause() {                                                                                       </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 256          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 257          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 258          if (getActivity() != null) {                                                                              </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 259              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 259              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 260              if (inputMethodManager != null) {                                                                     </span>
<span class="159022051514418479" onmouseenter="enter('159022051514418479');" onmouseout="out('159022051514418479');" style=""> 261                  inputMethodManager.hideSoftInputFromWindow(mContentEditText.getWindowToken(), 0);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263          }                                                                                                         </span>
<span  style=""> 264                                                                                                                    </span>
<span class="-2832208055092409078" onmouseenter="enter('-2832208055092409078');" onmouseout="out('-2832208055092409078');" style=""> 265          // Delete the note if it is new and has empty fields                                                      </span>
<span class="-2219905285758853631" onmouseenter="enter('-2219905285758853631');" onmouseout="out('-2219905285758853631');" style=""> 266          if (mNote != null &amp;&amp; mIsNewNote &amp;&amp; noteIsEmpty()) {                                                       </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 267              mNote.delete();                                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 268          } else {                                                                                                  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 269              saveNote();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270          }                                                                                                         </span>
<span  style=""> 271                                                                                                                    </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 272          mTagView.setOnTagAddedListener(null);                                                                     </span>
<span  style=""> 273                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 274          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 275              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276          }                                                                                                         </span>
<span  style=""> 277                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 278          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 279              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280          }                                                                                                         </span>
<span  style=""> 281                                                                                                                    </span>




<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 282          mHighlighter.stop();                                                                                      </span>
<span  style=""> 283                                                                                                                    </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 284          super.onPause();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285      }                                                                                                             </span>
<span  style=""> 286                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 287      @Override                                                                                                     </span>
<span class="-6208734081302594375" onmouseenter="enter('-6208734081302594375');" onmouseout="out('-6208734081302594375');" style=""> 288      public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {                                           </span>
<span class="-47684643030935164" onmouseenter="enter('-47684643030935164');" onmouseout="out('-47684643030935164');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 289 -        if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity())) {                                   </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 290 +        if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 291              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292          }                                                                                                         </span>
<span  style=""> 293                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 294          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span  style=""> 295                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 296          if (mNote != null) {                                                                                      </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 297              MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                                  </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 298              viewPublishedNoteItem.setVisible(true);                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 299 +                                                                                                                  </span>
<span class="-2352342880963919129" onmouseenter="enter('-2352342880963919129');" onmouseout="out('-2352342880963919129');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 300 +            if (mIsMarkdownEnabledGlobal) {                                                                       </span>
<span class="4614931194864693025" onmouseenter="enter('4614931194864693025');" onmouseout="out('4614931194864693025');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 301 +                MenuItem markdownEnableItem = menu.findItem(R.id.menu_markdown_enable);                           </span>
<span class="-2633107343982386844" onmouseenter="enter('-2633107343982386844');" onmouseout="out('-2633107343982386844');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 302 +                markdownEnableItem.setChecked(mNote.isMarkdownEnabled());                                         </span>
<span class="3477449218696725297" onmouseenter="enter('3477449218696725297');" onmouseout="out('3477449218696725297');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 303 +                markdownEnableItem.setVisible(true);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 304 +            }                                                                                                     </span>
<span  style=""> 305                                                                                                                    </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 306              MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);                     </span>
<span class="-2276441912091728676" onmouseenter="enter('-2276441912091728676');" onmouseout="out('-2276441912091728676');" style=""> 307              if (mNote.isDeleted())                                                                                </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 308                  trashItem.setTitle(R.string.undelete);                                                            </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 309              else                                                                                                  </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 310                  trashItem.setTitle(R.string.delete);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311          }                                                                                                         </span>
<span  style=""> 312                                                                                                                    </span>


<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 313          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314      }                                                                                                             </span>
<span  style=""> 315                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 316      @Override                                                                                                     </span>
<span class="8334131658156286818" onmouseenter="enter('8334131658156286818');" onmouseout="out('8334131658156286818');" style=""> 317      public boolean onOptionsItemSelected(MenuItem item) {                                                         </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 318          switch (item.getItemId()) {                                                                               </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 319              case R.id.menu_view_info:                                                                             </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 320                  if (mNote != null) {                                                                              </span>
<span class="-5974815457760504487" onmouseenter="enter('-5974815457760504487');" onmouseout="out('-5974815457760504487');" style=""> 321                      View menuItemView = getActivity().findViewById(R.id.menu_view_info);                          </span>
<span class="2497222703395221844" onmouseenter="enter('2497222703395221844');" onmouseout="out('2497222703395221844');" style=""> 322                      showInfoPopup(menuItemView);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323                  }                                                                                                 </span>





<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 324                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 325              case R.id.menu_share:                                                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 326                  if (mNote != null) {                                                                              </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 327                      Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                          </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 328                      shareIntent.setType(&quot;text/plain&quot;);                                                            </span>
<span class="2565640458837084796" onmouseenter="enter('2565640458837084796');" onmouseout="out('2565640458837084796');" style=""> 329                      shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mNote.getContent());                  </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 330                      startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 330                      startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note))ðŸ”µ</abbr></span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 331                      AnalyticsTracker.track(                                                                       </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 332                              AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 333                              AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 334                              &quot;action_bar_share_button&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 335                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336                  }                                                                                                 </span>

<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 337                  return true;                                                                                      </span>
<span class="-2326571002560832814" onmouseenter="enter('-2326571002560832814');" onmouseout="out('-2326571002560832814');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 338 +            case R.id.menu_markdown_enable:                                                                       </span>
<span class="2366870288831262173" onmouseenter="enter('2366870288831262173');" onmouseout="out('2366870288831262173');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 339 +                mIsMarkdownEnabled = !item.isChecked();                                                           </span>
<span class="1180540947331910458" onmouseenter="enter('1180540947331910458');" onmouseout="out('1180540947331910458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 340 +                item.setChecked(mIsMarkdownEnabled);                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 341 +                                                                                                                  </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 342 +                if (mIsMarkdownEnabled) {                                                                         </span>
<span class="-6508659890551353976" onmouseenter="enter('-6508659890551353976');" onmouseout="out('-6508659890551353976');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 343 +                    ((NoteEditorActivity) getActivity()).showTabs();                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 344 +                                                                                                                  </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 345 +                    if (mNoteMarkdownFragment == null) {                                                          </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 346 +                        // Get markdown fragment and update content                                               </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 347 +                        mNoteMarkdownFragment =                                                                   </span>
<span class="-8313285091182637202" onmouseenter="enter('-8313285091182637202');" onmouseout="out('-8313285091182637202');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 348 +                                ((NoteEditorActivity) getActivity()).getNoteMarkdownFragment();                   </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 349 +                        mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 350 +                    }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 351 +                } else {                                                                                          </span>
<span class="-2274167655435036909" onmouseenter="enter('-2274167655435036909');" onmouseout="out('-2274167655435036909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 352 +                    ((NoteEditorActivity) getActivity()).hideTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 353 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 354 +                                                                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 355 +                return true;                                                                                      </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 356              case R.id.menu_delete:                                                                                </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 357                  if (!isAdded()) return false;                                                                     </span>
<span  style=""> 358                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 359                  if (mNote != null) {                                                                              </span>
<span class="-929724925513034279" onmouseenter="enter('-929724925513034279');" onmouseout="out('-929724925513034279');" style=""> 360                      mNote.setDeleted(!mNote.isDeleted());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 361                      mNote.setModificationDate(Calendar.getInstance());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 362                      mNote.save();                                                                                 </span>
<span class="-8654137458864067059" onmouseenter="enter('-8654137458864067059');" onmouseout="out('-8654137458864067059');" style=""> 363                      Intent resultIntent = new Intent();                                                           </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 364                      if (mNote.isDeleted()) {                                                                      </span>
<span class="-4555570864561374481" onmouseenter="enter('-4555570864561374481');" onmouseout="out('-4555570864561374481');" style=""> 365                          resultIntent.putExtra(Simplenote.DELETED_NOTE_ID, mNote.getSimperiumKey());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366                      }                                                                                             </span>
<span class="2925812847088143790" onmouseenter="enter('2925812847088143790');" onmouseout="out('2925812847088143790');" style=""> 367                      getActivity().setResult(Activity.RESULT_OK, resultIntent);                                    </span>
<span  style=""> 368                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 369                      AnalyticsTracker.track(                                                                       </span>
<span class="272006350020544349" onmouseenter="enter('272006350020544349');" onmouseout="out('272006350020544349');" style=""> 370                              AnalyticsTracker.Stat.EDITOR_NOTE_DELETED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 371                              AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="-6954849474356068168" onmouseenter="enter('-6954849474356068168');" onmouseout="out('-6954849474356068168');" style=""> 372                              &quot;trash_menu_item&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 373                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374                  }                                                                                                 </span>
<span  style=""> 375                                                                                                                    </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 376                  getActivity().finish();                                                                           </span>

<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 377                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 378              case android.R.id.home:                                                                               </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 379                  if (!isAdded()) return false;                                                                     </span>
<span  style=""> 380                                                                                                                    </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 381                  getActivity().finish();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 382                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 383              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 384                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 386 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 387 +                                                                                                                  </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 388 +    protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 389 +        mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 390 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 391 +                                                                                                                  </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 392 +    protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 393 +        mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 394 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 395 +                                                                                                                  </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 396 +    protected void showMarkdown() {                                                                               </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 397 +        mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398      }                                                                                                             </span>
<span  style=""> 399                                                                                                                    </span>
<span class="8271468180839847847" onmouseenter="enter('8271468180839847847');" onmouseout="out('8271468180839847847');" style=""> 400      // show a popup view from the info action bar item                                                            </span>
<span class="301694884727727095" onmouseenter="enter('301694884727727095');" onmouseout="out('301694884727727095');" style=""> 401      private void showInfoPopup(View view) {                                                                       </span>
<span class="-8824124309160747557" onmouseenter="enter('-8824124309160747557');" onmouseout="out('-8824124309160747557');" style=""> 402          if (!isAdded() || view == null) return;                                                                   </span>
<span  style=""> 403                                                                                                                    </span>
<span class="-6163322818153177863" onmouseenter="enter('-6163322818153177863');" onmouseout="out('-6163322818153177863');" style=""> 404          if (mInfoPopupWindow == null) {                                                                           </span>
<span class="6416634994496998699" onmouseenter="enter('6416634994496998699');" onmouseout="out('6416634994496998699');" style=""> 405              mInfoPopupWindow = new PopupWindow(getActivity());                                                    </span>
<span class="-7704183450622301834" onmouseenter="enter('-7704183450622301834');" onmouseout="out('-7704183450622301834');" style=""> 406              mInfoPopupWindow.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);                                   </span>
<span class="-3987029803100381492" onmouseenter="enter('-3987029803100381492');" onmouseout="out('-3987029803100381492');" style=""> 407              mInfoPopupWindow.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);                                  </span>
<span class="-8327124619089985465" onmouseenter="enter('-8327124619089985465');" onmouseout="out('-8327124619089985465');" style=""> 408              mInfoPopupWindow.setBackgroundDrawable(new ColorDrawable(0));                                         </span>
<span class="3466073935356821559" onmouseenter="enter('3466073935356821559');" onmouseout="out('3466073935356821559');" style=""> 409              mInfoPopupWindow.setOutsideTouchable(true);                                                           </span>
<span class="-1875471742113799055" onmouseenter="enter('-1875471742113799055');" onmouseout="out('-1875471742113799055');" style=""> 410              mInfoPopupWindow.setFocusable(true);                                                                  </span>
<span  style=""> 411                                                                                                                    </span>
<span class="5212568524712573915" onmouseenter="enter('5212568524712573915');" onmouseout="out('5212568524712573915');" style=""> 412              LayoutInflater inflater = LayoutInflater.from(getActivity());                                         </span>
<span class="-7758049233010801507" onmouseenter="enter('-7758049233010801507');" onmouseout="out('-7758049233010801507');" style=""> 413              View popupView = inflater.inflate(R.layout.popup_info, null);                                         </span>
<span class="536077715701124131" onmouseenter="enter('536077715701124131');" onmouseout="out('536077715701124131');" style=""> 414              mInfoPopupWindow.setContentView(popupView);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415          }                                                                                                         </span>
<span  style=""> 416                                                                                                                    </span>
<span class="-4651993534606395663" onmouseenter="enter('-4651993534606395663');" onmouseout="out('-4651993534606395663');" style=""> 417          updateInfoPopup();                                                                                        </span>
<span  style=""> 418                                                                                                                    </span>
<span class="4487253113225225144" onmouseenter="enter('4487253113225225144');" onmouseout="out('4487253113225225144');" style=""> 419          mInfoPopupWindow.showAsDropDown(view);                                                                    </span>
<span  style=""> 420                                                                                                                    </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style=""> 421          // Request revisions for the current note                                                                 </span>
<span class="762034941650544962" onmouseenter="enter('762034941650544962');" onmouseout="out('762034941650544962');" style=""> 422          mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mRevisionsRequestCallbacks);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423      }                                                                                                             </span>
<span  style=""> 424                                                                                                                    </span>
<span class="-8758077771583595367" onmouseenter="enter('-8758077771583595367');" onmouseout="out('-8758077771583595367');" style=""> 425      // update the content of the popupview                                                                        </span>
<span class="-7181846678873590508" onmouseenter="enter('-7181846678873590508');" onmouseout="out('-7181846678873590508');" style=""> 426      private void updateInfoPopup() {                                                                              </span>
<span class="-8697403400729029020" onmouseenter="enter('-8697403400729029020');" onmouseout="out('-8697403400729029020');" style=""> 427          if (mInfoPopupWindow == null || mInfoPopupWindow.getContentView() == null) return;                        </span>
<span  style=""> 428                                                                                                                    </span>
<span class="3837773520867540996" onmouseenter="enter('3837773520867540996');" onmouseout="out('3837773520867540996');" style=""> 429          View popupView = mInfoPopupWindow.getContentView();                                                       </span>
<span  style=""> 430                                                                                                                    </span>
<span class="-5563348291777194716" onmouseenter="enter('-5563348291777194716');" onmouseout="out('-5563348291777194716');" style=""> 431          View publishButton = popupView.findViewById(R.id.publish_note_button);                                    </span>
<span class="4581310412057978293" onmouseenter="enter('4581310412057978293');" onmouseout="out('4581310412057978293');" style=""> 432          TextView publishButtonTextView = (TextView)popupView.findViewById(R.id.publish_note_button_text);         </span>
<span class="-6410915739065156574" onmouseenter="enter('-6410915739065156574');" onmouseout="out('-6410915739065156574');" style=""> 433          ImageView publishButtonIcon = (ImageView)popupView.findViewById(R.id.publish_note_button_icon);           </span>
<span class="-6918482493044946592" onmouseenter="enter('-6918482493044946592');" onmouseout="out('-6918482493044946592');" style=""> 434          TextView publishTextView = (TextView) popupView.findViewById(R.id.publish_url_textview);                  </span>
<span class="1038347291336054559" onmouseenter="enter('1038347291336054559');" onmouseout="out('1038347291336054559');" style=""> 435          TextView wordCountTextView = (TextView) popupView.findViewById(R.id.word_count);                          </span>
<span class="-7977646551049898553" onmouseenter="enter('-7977646551049898553');" onmouseout="out('-7977646551049898553');" style=""> 436          ImageButton publishCopyButton = (ImageButton) popupView.findViewById(R.id.publish_copy_url);              </span>
<span class="7101383467626352915" onmouseenter="enter('7101383467626352915');" onmouseout="out('7101383467626352915');" style=""> 437          ImageButton publishShareButton = (ImageButton) popupView.findViewById(R.id.publish_share_url);            </span>
<span class="3150325744662714786" onmouseenter="enter('3150325744662714786');" onmouseout="out('3150325744662714786');" style=""> 438          View actionsView = popupView.findViewById(R.id.publish_actions);                                          </span>
<span class="5489608530057038062" onmouseenter="enter('5489608530057038062');" onmouseout="out('5489608530057038062');" style=""> 439          final View historyButton = popupView.findViewById(R.id.history_button);                                   </span>
<span  style=""> 440                                                                                                                    </span>
<span class="1432622249676412210" onmouseenter="enter('1432622249676412210');" onmouseout="out('1432622249676412210');" style=""> 441          final ViewSwitcher viewSwitcher = (ViewSwitcher) popupView.findViewById(R.id.publish_view_switcher);      </span>
<span  style=""> 442                                                                                                                    </span>
<span class="-7759606836018483289" onmouseenter="enter('-7759606836018483289');" onmouseout="out('-7759606836018483289');" style=""> 443          publishButton.setOnClickListener(new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 444              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 445              public void onClick(View v) {                                                                         </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 446                  if (mNote != null) {                                                                              </span>
<span class="5563864695602119989" onmouseenter="enter('5563864695602119989');" onmouseout="out('5563864695602119989');" style=""> 447                      boolean newPublishedStatus = !mNote.isPublished();                                            </span>
<span class="-3191807331109519265" onmouseenter="enter('-3191807331109519265');" onmouseout="out('-3191807331109519265');" style=""> 448                      mNote.setPublished(newPublishedStatus);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 449                      mNote.save();                                                                                 </span>
<span  style=""> 450                                                                                                                    </span>
<span class="-6566894946886815467" onmouseenter="enter('-6566894946886815467');" onmouseout="out('-6566894946886815467');" style=""> 451                      if (viewSwitcher.getDisplayedChild() == 0) {                                                  </span>
<span class="1964540099195163034" onmouseenter="enter('1964540099195163034');" onmouseout="out('1964540099195163034');" style=""> 452                          viewSwitcher.showNext();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453                      }                                                                                             </span>
<span  style=""> 454                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style=""> 455                      // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                    </span>
<span class="-4829904289357833951" onmouseenter="enter('-4829904289357833951');" onmouseout="out('-4829904289357833951');" style=""> 456                      mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, 20000);                           </span>
<span  style=""> 457                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 458                      AnalyticsTracker.track(                                                                       </span>
<span class="-964751905852229606" onmouseenter="enter('-964751905852229606');" onmouseout="out('-964751905852229606');" style=""> 459                              (newPublishedStatus) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                  </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style=""> 460                              AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 461                              AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style=""> 462                              &quot;publish_note_button&quot;                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 463                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 466          });                                                                                                       </span>
<span  style=""> 467                                                                                                                    </span>
<span class="4045844893437359317" onmouseenter="enter('4045844893437359317');" onmouseout="out('4045844893437359317');" style=""> 468          publishTextView.setOnClickListener(new View.OnClickListener() {                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 469              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 470              public void onClick(View v) {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 471                  try {                                                                                             </span>
<span class="-8142976939479350202" onmouseenter="enter('-8142976939479350202');" onmouseout="out('-8142976939479350202');" style=""> 472                      startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(mNote.getPublishedUrl())));            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 473                      AnalyticsTracker.track(                                                                       </span>
<span class="-7226020036200642301" onmouseenter="enter('-7226020036200642301');" onmouseout="out('-7226020036200642301');" style=""> 474                              AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED_URL_PRESSED,                              </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 475                              AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="2700792918893123401" onmouseenter="enter('2700792918893123401');" onmouseout="out('2700792918893123401');" style=""> 476                              &quot;publish_note_url_button&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 477                      );                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 478                  } catch (Exception e) {                                                                           </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 479                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 482          });                                                                                                       </span>
<span  style=""> 483                                                                                                                    </span>
<span class="-6950650320634084190" onmouseenter="enter('-6950650320634084190');" onmouseout="out('-6950650320634084190');" style=""> 484          publishCopyButton.setOnClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 485              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 486              public void onClick(View v) {                                                                         </span>
<span class="4796955211675373396" onmouseenter="enter('4796955211675373396');" onmouseout="out('4796955211675373396');" style=""><abbr title=" 487                  ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 487                  ClipboardManager clipboard = (ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SðŸ”µ</abbr></span>
<span class="-7278433972965562810" onmouseenter="enter('-7278433972965562810');" onmouseout="out('-7278433972965562810');" style=""> 488                  ClipData clip = ClipData.newPlainText(getString(R.string.app_name), mNote.getPublishedUrl());     </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 489                  clipboard.setPrimaryClip(clip);                                                                   </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 490                  Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 492          });                                                                                                       </span>
<span  style=""> 493                                                                                                                    </span>
<span class="7858974346508965340" onmouseenter="enter('7858974346508965340');" onmouseout="out('7858974346508965340');" style=""> 494          publishShareButton.setOnClickListener(new View.OnClickListener() {                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 495              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 496              public void onClick(View v) {                                                                         </span>
<span class="-1084258541936962831" onmouseenter="enter('-1084258541936962831');" onmouseout="out('-1084258541936962831');" style=""> 497                  Intent i = new Intent(Intent.ACTION_SEND);                                                        </span>
<span class="-4820203166518762252" onmouseenter="enter('-4820203166518762252');" onmouseout="out('-4820203166518762252');" style=""> 498                  i.setType(&quot;text/plain&quot;);                                                                          </span>
<span class="-6000923337939610903" onmouseenter="enter('-6000923337939610903');" onmouseout="out('-6000923337939610903');" style=""> 499                  i.putExtra(Intent.EXTRA_TEXT, mNote.getPublishedUrl());                                           </span>
<span class="3733331565586339944" onmouseenter="enter('3733331565586339944');" onmouseout="out('3733331565586339944');" style=""> 500                  startActivity(Intent.createChooser(i, getString(R.string.share_url)));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 502          });                                                                                                       </span>
<span  style=""> 503                                                                                                                    </span>
<span class="-2067876314787213528" onmouseenter="enter('-2067876314787213528');" onmouseout="out('-2067876314787213528');" style=""> 504          updateWordCount(wordCountTextView);                                                                       </span>
<span  style=""> 505                                                                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style=""> 506          if (mNote.isPublished()) {                                                                                </span>
<span class="-8174565940676304202" onmouseenter="enter('-8174565940676304202');" onmouseout="out('-8174565940676304202');" style=""> 507              publishButtonTextView.setText(getString(R.string.published));                                         </span>
<span class="8297531220637406295" onmouseenter="enter('8297531220637406295');" onmouseout="out('8297531220637406295');" style=""> 508              publishButtonIcon.setVisibility(View.VISIBLE);                                                        </span>
<span class="-2988513566372186325" onmouseenter="enter('-2988513566372186325');" onmouseout="out('-2988513566372186325');" style=""> 509              publishTextView.setText(mNote.getPublishedUrl());                                                     </span>
<span class="6413899042811805294" onmouseenter="enter('6413899042811805294');" onmouseout="out('6413899042811805294');" style=""> 510              actionsView.setVisibility(View.VISIBLE);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 511          } else {                                                                                                  </span>
<span class="843719504642786212" onmouseenter="enter('843719504642786212');" onmouseout="out('843719504642786212');" style=""> 512              publishButtonTextView.setText(getString(R.string.publish));                                           </span>
<span class="-2250731724671553485" onmouseenter="enter('-2250731724671553485');" onmouseout="out('-2250731724671553485');" style=""> 513              publishButtonIcon.setVisibility(View.GONE);                                                           </span>
<span class="1035970444036754268" onmouseenter="enter('1035970444036754268');" onmouseout="out('1035970444036754268');" style=""> 514              actionsView.setVisibility(View.GONE);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515          }                                                                                                         </span>
<span  style=""> 516                                                                                                                    </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 517          Simplenote currentApp = (Simplenote) getActivity().getApplication();                                      </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style=""> 518          if (currentApp.getSimperium().needsAuthorization()) {                                                     </span>
<span class="5338357254244494547" onmouseenter="enter('5338357254244494547');" onmouseout="out('5338357254244494547');" style=""> 519              viewSwitcher.setVisibility(View.GONE);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 520          } else {                                                                                                  </span>
<span class="4598892846854382425" onmouseenter="enter('4598892846854382425');" onmouseout="out('4598892846854382425');" style=""> 521              viewSwitcher.setVisibility(View.VISIBLE);                                                             </span>
<span class="3959257289291069285" onmouseenter="enter('3959257289291069285');" onmouseout="out('3959257289291069285');" style=""> 522              if (viewSwitcher.getDisplayedChild() == 1) {                                                          </span>
<span class="-7472993052671010203" onmouseenter="enter('-7472993052671010203');" onmouseout="out('-7472993052671010203');" style=""> 523                  viewSwitcher.showPrevious();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525          }                                                                                                         </span>
<span  style=""> 526                                                                                                                    </span>
<span class="673144038622160482" onmouseenter="enter('673144038622160482');" onmouseout="out('673144038622160482');" style=""> 527          historyButton.setEnabled(mNote.getVersion() &gt; 1);                                                         </span>
<span class="8924867735831646745" onmouseenter="enter('8924867735831646745');" onmouseout="out('8924867735831646745');" style=""> 528          if (historyButton.isEnabled()) {                                                                          </span>
<span class="3960051769731363435" onmouseenter="enter('3960051769731363435');" onmouseout="out('3960051769731363435');" style=""> 529              historyButton.setAlpha(1.0f);                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 530          } else {                                                                                                  </span>
<span class="7526820438800264068" onmouseenter="enter('7526820438800264068');" onmouseout="out('7526820438800264068');" style=""> 531              historyButton.setAlpha(0.5f);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532          }                                                                                                         </span>
<span  style=""> 533                                                                                                                    </span>
<span class="-2736155227408152467" onmouseenter="enter('-2736155227408152467');" onmouseout="out('-2736155227408152467');" style=""> 534          historyButton.setOnClickListener(new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 535              @Override                                                                                             </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style=""> 536              public void onClick(View view) {                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 537                  saveNote();                                                                                       </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 538                  showHistorySheet();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 540          });                                                                                                       </span>


















































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541      }                                                                                                             </span>
<span  style=""> 542                                                                                                                    </span>
<span class="2878966018694925493" onmouseenter="enter('2878966018694925493');" onmouseout="out('2878966018694925493');" style=""> 543      private boolean noteIsEmpty() {                                                                               </span>
<span class="5142306291108152313" onmouseenter="enter('5142306291108152313');" onmouseout="out('5142306291108152313');" style=""> 544          return (getNoteContentString().trim().length() == 0 &amp;&amp; getNoteTagsString().trim().length() == 0);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545      }                                                                                                             </span>
<span  style=""> 546                                                                                                                    </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 547 +    protected void setMarkdownEnabled(boolean enabled) {                                                          </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 548 +        mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 549 +                                                                                                                  </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 550 +        if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 551 +            mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                                        </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 552 +                    new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 553 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 554 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 555 +                                                                                                                  </span>
<span class="8710628914141899315" onmouseenter="enter('8710628914141899315');" onmouseout="out('8710628914141899315');" style=""> 556      public void setNote(String noteID){                                                                           </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 557          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558      }                                                                                                             </span>
<span  style=""> 559                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 560      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 561          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 562              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span  style=""> 563                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 564          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 565                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 566          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 567              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 568          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 569              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570          }                                                                                                         </span>
<span  style=""> 571                                                                                                                    </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 572          // If we have a note already (on a tablet in landscape), save the note.                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 573          if (mNote != null) {                                                                                      </span>
<span class="4900947620417658692" onmouseenter="enter('4900947620417658692');" onmouseout="out('4900947620417658692');" style=""> 574              if (mIsNewNote &amp;&amp; noteIsEmpty())                                                                      </span>
<span class="-3796820634556305720" onmouseenter="enter('-3796820634556305720');" onmouseout="out('-3796820634556305720');" style=""> 575                  mNote.delete();                                                                                   </span>
<span class="-2440894158330100228" onmouseenter="enter('-2440894158330100228');" onmouseout="out('-2440894158330100228');" style=""> 576              else if (mNote != null)                                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 577                  saveNote();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578          }                                                                                                         </span>
<span  style=""> 579                                                                                                                    </span>
<span class="-3492920802008394842" onmouseenter="enter('-3492920802008394842');" onmouseout="out('-3492920802008394842');" style=""> 580          new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581      }                                                                                                             </span>
<span  style=""> 582                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 583      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 584          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 585          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 586          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587      }                                                                                                             </span>
<span  style=""> 588                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 589      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 590          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 591              // Restore the cursor position if possible.                                                           </span>
<span  style=""> 592                                                                                                                    </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 593              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 593              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span  style=""> 594                                                                                                                    </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 595              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 596                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 597              if (isNoteUpdate) {                                                                                   </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 598                  // Save the note so any local changes get synced                                                  </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 599                  mNote.save();                                                                                     </span>
<span  style=""> 600                                                                                                                    </span>
<span class="-5094013145931261947" onmouseenter="enter('-5094013145931261947');" onmouseout="out('-5094013145931261947');" style=""> 601                  if (mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()) {        </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 602                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604              }                                                                                                     </span>
<span  style=""> 605                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 606              afterTextChanged(mContentEditText.getText());                                                         </span>
<span  style=""> 607                                                                                                                    </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 608              mPinButton.setChecked(mNote.isPinned());                                                              </span>
<span  style=""> 609                                                                                                                    </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 610              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612      }                                                                                                             </span>
<span  style=""> 613                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 614      private void updateTagList() {                                                                                </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 615          Activity activity = getActivity();                                                                        </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 616          if (activity == null) return;                                                                             </span>
<span  style=""> 617                                                                                                                    </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 618          // Populate this note&#x27;s tags in the tagView                                                               </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 619          mTagView.setChips(mNote.getTagString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620      }                                                                                                             </span>
<span  style=""> 621                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 622      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 623          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 624          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 625          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 626          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 627          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 628          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 629          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 630          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 631                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 632          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 633                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 634          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 635                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 636          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 637          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 638              return newText.length();                                                                              </span>
<span  style=""> 639                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 640          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 641          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 642                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 643          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 644              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 644              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 645              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 645              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 646          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 647              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648          }                                                                                                         </span>
<span  style=""> 649                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 650          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 651          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 652              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 653                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 654          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 655          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656      }                                                                                                             </span>
<span  style=""> 657                                                                                                                    </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 658      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 659          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 660          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 661              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 663      };                                                                                                            </span>
<span  style=""> 664                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 665      @Override                                                                                                     </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 666      public void onTagsChanged(String tagString) {                                                                 </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 667          if (mNote == null || !isAdded()) return;                                                                  </span>
<span  style=""> 668                                                                                                                    </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 669          if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 670              AnalyticsTracker.track(                                                                               </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 671                      AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                                       </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 672                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 673                      &quot;tag_added_to_note&quot;                                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 674              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675          }                                                                                                         </span>
<span class="4391598042186419731" onmouseenter="enter('4391598042186419731');" onmouseout="out('4391598042186419731');" style=""> 676          else {                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 677              AnalyticsTracker.track(                                                                               </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 678                      AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 679                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 680                      &quot;tag_removed_from_note&quot;                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 681              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682          }                                                                                                         </span>
<span  style=""> 683                                                                                                                    </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 684          mNote.setTagString(tagString);                                                                            </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 685          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 686          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 687          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688      }                                                                                                             </span>
<span  style=""> 689                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 690      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 691      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 692          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693      }                                                                                                             </span>
<span  style=""> 694                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 695      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 696      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 697          setTitleSpan(editable);                                                                                   </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 698          attemptAutoList(editable);                                                                                </span>






<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699      }                                                                                                             </span>
<span  style=""> 700                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 701      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 702      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span  style=""> 703                                                                                                                    </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 704          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 705          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 706              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 707              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 708          }                                                                                                         </span>
<span  style=""> 709                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 710          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 711          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 712              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 713              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715      }                                                                                                             </span>
<span  style=""> 716                                                                                                                    </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 717      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 718          // Set the note title to be a larger size                                                                 </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 719          // Remove any existing size spans                                                                         </span>
<span class="-8972916714996192672" onmouseenter="enter('-8972916714996192672');" onmouseout="out('-8972916714996192672');" style=""> 720          RelativeSizeSpan spans[] = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);               </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 721          for (RelativeSizeSpan span : spans) {                                                                     </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 722              editable.removeSpan(span);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723          }                                                                                                         </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 724          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 725          if (newLinePosition == 0)                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 726              return;                                                                                               </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 727          editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 727          editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.lengtðŸ”µ</abbr></span>











<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728      }                                                                                                             </span>
<span  style=""> 729                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 730      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 731          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 732          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 733          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 734          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735      }                                                                                                             </span>
<span  style=""> 736                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 737      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 738          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 739              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740          }                                                                                                         </span>
<span  style=""> 741                                                                                                                    </span>
<span class="5987107161692050970" onmouseenter="enter('5987107161692050970');" onmouseout="out('5987107161692050970');" style=""> 742          new saveNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 743      }                                                                                                             </span>
<span  style=""> 744                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 745      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 746          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 747              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 748              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 749              mTagView.setText(&quot;&quot;);                                                                                 </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 750              if (mPlaceholderView != null)                                                                         </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 751                  mPlaceholderView.setVisibility(View.VISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 752          } else {                                                                                                  </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 753              if (mPlaceholderView != null)                                                                         </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 754                  mPlaceholderView.setVisibility(View.GONE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 756      }                                                                                                             </span>
<span  style=""> 757                                                                                                                    </span>
<span class="7106522413253020021" onmouseenter="enter('7106522413253020021');" onmouseout="out('7106522413253020021');" style=""> 758      public void setIsNewNote(boolean isNewNote) {                                                                 </span>
<span class="-5949421386499580587" onmouseenter="enter('-5949421386499580587');" onmouseout="out('-5949421386499580587');" style=""> 759          this.mIsNewNote = isNewNote;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760      }                                                                                                             </span>
<span  style=""> 761                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 762      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 763      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 764          if (!hasFocus) {                                                                                          </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 765              String tagString = getNoteTagsString().trim();                                                        </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 766              if (tagString.length() &gt; 0) {                                                                         </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 767                  mTagView.setChips(tagString);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770      }                                                                                                             </span>
<span  style=""> 771                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 772      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 773          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774      }                                                                                                             </span>
<span  style=""> 775                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 776      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 777          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 778              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 779          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 780              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782      }                                                                                                             </span>
<span  style=""> 783                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 784      private String getNoteTagsString() {                                                                          </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 785          if (mTagView == null || mTagView.getText() == null) {                                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 786              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 787          } else {                                                                                                  </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 788              return mTagView.getText().toString();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789          }                                                                                                         </span>

























































































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790      }                                                                                                             </span>
<span  style=""> 791                                                                                                                    </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 792      private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                            </span>
<span  style=""> 793                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 794          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style=""> 795          protected void onPreExecute() {                                                                           </span>
<span class="-4476633077483558762" onmouseenter="enter('-4476633077483558762');" onmouseout="out('-4476633077483558762');" style=""> 796              mContentEditText.removeTextChangedListener(NoteEditorFragment.this);                                  </span>
<span class="1885380990906425504" onmouseenter="enter('1885380990906425504');" onmouseout="out('1885380990906425504');" style=""> 797              mIsLoadingNote = true;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 798          }                                                                                                         </span>
<span  style=""> 799                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 800          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 801          protected Void doInBackground(String... args) {                                                           </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 802              if (getActivity() == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 803                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804              }                                                                                                     </span>
<span  style=""> 805                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 806              String noteID = args[0];                                                                              </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 807              Simplenote application = (Simplenote) getActivity().getApplication();                                 </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 808              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 809              try {                                                                                                 </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 810                  mNote = notesBucket.get(noteID);                                                                  </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style=""> 811                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-4385871719572971359" onmouseenter="enter('-4385871719572971359');" onmouseout="out('-4385871719572971359');" style=""> 812                  if (getActivity() instanceof NotesActivity) {                                                     </span>
<span class="-5437998525889410543" onmouseenter="enter('-5437998525889410543');" onmouseout="out('-5437998525889410543');" style=""> 813                      ((NotesActivity) getActivity()).setCurrentNote(mNote);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 814 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 815 +                                                                                                                  </span>
<span class="1542207993914056140" onmouseenter="enter('1542207993914056140');" onmouseout="out('1542207993914056140');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 816 +                // Set markdown flag for global setting                                                           </span>
<span class="-7484741784406029144" onmouseenter="enter('-7484741784406029144');" onmouseout="out('-7484741784406029144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 817 +                mIsMarkdownEnabledGlobal = PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_MARKDOWN_ENABLED, false);"> 817 +                mIsMarkdownEnabledGlobal = PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_MARKDOWN_ENABLED, fðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 818 +                                                                                                                  </span>
<span class="4338974049574039690" onmouseenter="enter('4338974049574039690');" onmouseout="out('4338974049574039690');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 819 +                // Set markdown flag for current note                                                             </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 820 +                if (mNote != null) {                                                                              </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 821 +                    mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 822                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 823              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 824                  // TODO: Handle a missing note                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 826              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827          }                                                                                                         </span>
<span  style=""> 828                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 829          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 830          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="3019142402664254149" onmouseenter="enter('3019142402664254149');" onmouseout="out('3019142402664254149');" style=""> 831              if (getActivity() == null || getActivity().isFinishing())                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 832                  return;                                                                                           </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 833              refreshContent(false);                                                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 834              if (mMatchOffsets != null) {                                                                          </span>
<span class="4645759725865606036" onmouseenter="enter('4645759725865606036');" onmouseout="out('4645759725865606036');" style=""><abbr title=" 835                  int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);"> 835                  int columnIndex = mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROðŸ”µ</abbr></span>
<span class="1514128940236991067" onmouseenter="enter('1514128940236991067');" onmouseout="out('1514128940236991067');" style=""> 836                  mHighlighter.highlightMatches(mMatchOffsets, columnIndex);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837              }                                                                                                     </span>
<span class="2908988742356344281" onmouseenter="enter('2908988742356344281');" onmouseout="out('2908988742356344281');" style=""> 838              mContentEditText.addTextChangedListener(NoteEditorFragment.this);                                     </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 839              if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                                  </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 840                  // Show soft keyboard                                                                             </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 841                  mContentEditText.requestFocus();                                                                  </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 842                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 843                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 844                      public void run() {                                                                           </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 845                          InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 845                          InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServicðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 846                          if (inputMethodManager != null)                                                           </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 847                              inputMethodManager.showSoftInput(mContentEditText, 0);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 849                  }, 100);                                                                                          </span>
<span  style=""> 850                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851              }                                                                                                     </span>
<span  style=""> 852                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 853 +            // Show tabs if markdown is enabled globally, for current note, and not tablet landscape              </span>
<span class="-1816707351539259697" onmouseenter="enter('-1816707351539259697');" onmouseout="out('-1816707351539259697');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 854 +            if (mIsMarkdownEnabledGlobal &amp;&amp; mIsMarkdownEnabled) {                                                 </span>
<span class="2228506470236232496" onmouseenter="enter('2228506470236232496');" onmouseout="out('2228506470236232496');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 855 +                // Get markdown view and update content                                                           </span>
<span class="4041585114564499395" onmouseenter="enter('4041585114564499395');" onmouseout="out('4041585114564499395');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 856 +                if (DisplayUtils.isLargeScreenLandscape(getActivity())) {                                         </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 857 +                    mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                                </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 858 +                            new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 859 +                } else {                                                                                          </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 860 +                    mNoteMarkdownFragment =                                                                       </span>
<span class="-8313285091182637202" onmouseenter="enter('-8313285091182637202');" onmouseout="out('-8313285091182637202');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 861 +                            ((NoteEditorActivity) getActivity()).getNoteMarkdownFragment();                       </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 862 +                    mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 863 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 864 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 865 +                                                                                                                  </span>
<span class="8823595637372647509" onmouseenter="enter('8823595637372647509');" onmouseout="out('8823595637372647509');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 866 +            getActivity().invalidateOptionsMenu();                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 867 +                                                                                                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 868              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span  style=""> 869                                                                                                                    </span>
<span class="2296161227930019578" onmouseenter="enter('2296161227930019578');" onmouseout="out('2296161227930019578');" style=""> 870              mIsLoadingNote = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 872      }                                                                                                             </span>
<span  style=""> 873                                                                                                                    </span>
<span class="-8015309924985109245" onmouseenter="enter('-8015309924985109245');" onmouseout="out('-8015309924985109245');" style=""> 874      private class saveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                              </span>
<span  style=""> 875                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 876          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style=""> 877          protected Void doInBackground(Void... args) {                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 878              saveNote();                                                                                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 879              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880          }                                                                                                         </span>
<span  style=""> 881                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 882          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 883          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-8878355580113381449" onmouseenter="enter('-8878355580113381449');" onmouseout="out('-8878355580113381449');" style=""> 884              if (getActivity() != null &amp;&amp; !getActivity().isFinishing()) {                                          </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style=""> 885                  // Update links                                                                                   </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style=""> 886                  SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 887 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 888 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 889 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 890 -                                                                                                                  </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 891 -    private void saveNote() {                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 892 +                                                                                                                  </span>
<span class="8451817895915811073" onmouseenter="enter('8451817895915811073');" onmouseout="out('8451817895915811073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 893 +                // Update markdown fragment                                                                       </span>
<span class="4041585114564499395" onmouseenter="enter('4041585114564499395');" onmouseout="out('4041585114564499395');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 894 +                if (DisplayUtils.isLargeScreenLandscape(getActivity())) {                                         </span>
<span class="5242929885891473551" onmouseenter="enter('5242929885891473551');" onmouseout="out('5242929885891473551');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 895 +                    mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss +                                </span>
<span class="1829094037153974909" onmouseenter="enter('1829094037153974909');" onmouseout="out('1829094037153974909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 896 +                            new AndDown().markdownToHtml(getNoteContentString()), &quot;text/html&quot;, &quot;utf-8&quot;, null);    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 897 +                } else {                                                                                          </span>
<span class="1596868001315221483" onmouseenter="enter('1596868001315221483');" onmouseout="out('1596868001315221483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 898 +                    mNoteMarkdownFragment.updateMarkdown(getNoteContentString());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 899 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 900 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 901 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 902 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 903 +                                                                                                                  </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 904 +    protected void saveNote() {                                                                                   </span>
<span class="-2414246363966835945" onmouseenter="enter('-2414246363966835945');" onmouseout="out('-2414246363966835945');" style=""> 905          if (mNote == null || (mBottomSheet != null &amp;&amp; mBottomSheet.isShowing())) {                                </span>

<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 906              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 907          }                                                                                                         </span>
<span  style=""> 908                                                                                                                    </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style=""> 909          String content = getNoteContentString();                                                                  </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 910          String tagString = getNoteTagsString();                                                                   </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 911 -        if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                                </span>
<span class="-9180039163235450589" onmouseenter="enter('-9180039163235450589');" onmouseout="out('-9180039163235450589');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 912 +        if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked(), mIsMarkdownEnabled)) {            </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 913              mNote.setContent(content);                                                                            </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 914              mNote.setTagString(tagString);                                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 915              mNote.setModificationDate(Calendar.getInstance());                                                    </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 916 +            mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                         </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 917              // Send pinned event to google analytics if changed                                                   </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 918              mNote.setPinned(mPinButton.isChecked());                                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 919              mNote.save();                                                                                         </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 920              if (getActivity() != null) {                                                                          </span>
<span class="9119823558701234173" onmouseenter="enter('9119823558701234173');" onmouseout="out('9119823558701234173');" style=""> 921                  if (mNote.isPinned() != mPinButton.isChecked()) {                                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 922                      AnalyticsTracker.track(                                                                       </span>
<span class="6973099362194796934" onmouseenter="enter('6973099362194796934');" onmouseout="out('6973099362194796934');" style=""> 923                              mPinButton.isChecked() ? AnalyticsTracker.Stat.EDITOR_NOTE_PINNED :                   </span>
<span class="-7220998596328413851" onmouseenter="enter('-7220998596328413851');" onmouseout="out('-7220998596328413851');" style=""> 924                                      AnalyticsTracker.Stat.EDITOR_NOTE_UNPINNED,                                   </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 925                              AnalyticsTracker.CATEGORY_NOTE,                                                       </span>
<span class="5441361990485968371" onmouseenter="enter('5441361990485968371');" onmouseout="out('5441361990485968371');" style=""> 926                              &quot;pin_button&quot;                                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 927                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928                  }                                                                                                 </span>
<span  style=""> 929                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 930                  AnalyticsTracker.track(                                                                           </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style=""> 931                          AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                                 </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 932                          AnalyticsTracker.CATEGORY_NOTE,                                                           </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style=""> 933                          &quot;editor_save&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 934                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935              }                                                                                                     </span>






<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937      }                                                                                                             </span>
<span  style=""> 938                                                                                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 939      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 940      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span  style=""> 941                                                                                                                    </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 942          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 943          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 944          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 945              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 946              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 947              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 948                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 949                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 950                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="9015861346770894985" onmouseenter="enter('9015861346770894985');" onmouseout="out('9015861346770894985');" style=""> 951                  if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {                         </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 952                      mode.setTitleOptionalHint(false);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953                  }                                                                                                 </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954              }                                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 955              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956          }                                                                                                         </span>
<span  style=""> 957                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 958          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 959          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 960          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 961          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 962              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 963          }                                                                                                         </span>
<span  style=""> 964                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 965          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 966          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 967          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 968              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 969                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 970                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 971                          try {                                                                                     </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 972                              Uri uri = Uri.parse(mLinkUrl);                                                        </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 973                              Intent i = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 974                              i.setData(uri);                                                                       </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 975                              startActivity(i);                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 976                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 977                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 978                          }                                                                                         </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 979                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 981                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 982                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 983                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-1800885668589834003" onmouseenter="enter('-1800885668589834003');" onmouseout="out('-1800885668589834003');" style=""><abbr title=" 984                          ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);"> 984                          ClipboardManager clipboard = (ClipboardManager)getActivity().getSystemService(Context.CLIPðŸ”µ</abbr></span>
<span class="-1681747336188731628" onmouseenter="enter('-1681747336188731628');" onmouseout="out('-1681747336188731628');" style=""> 985                          ClipData clip = ClipData.newPlainText(getString(R.string.app_name),mLinkText);            </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style=""> 986                          clipboard.setPrimaryClip(clip);                                                           </span>

<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 987                          Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();</span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 988                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 990                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 991                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 992                      if (mLinkText != null) {                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 993                          try {                                                                                     </span>
<span class="-5295005974020567837" onmouseenter="enter('-5295005974020567837');" onmouseout="out('-5295005974020567837');" style=""> 994                              Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);                  </span>
<span class="5746492194121968101" onmouseenter="enter('5746492194121968101');" onmouseout="out('5746492194121968101');" style=""> 995                              shareIntent.setType(&quot;text/plain&quot;);                                                    </span>
<span class="-5545338866841663037" onmouseenter="enter('-5545338866841663037');" onmouseout="out('-5545338866841663037');" style=""> 996                              shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, mLinkText);                   </span>
<span class="7073775982354198335" onmouseenter="enter('7073775982354198335');" onmouseout="out('7073775982354198335');" style=""><abbr title=" 997                              startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.share_note)));"> 997                              startActivity(Intent.createChooser(shareIntent, getResources().getString(R.string.sharðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 998                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 999                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000                          }                                                                                         </span>

<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style="">1001                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1003                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">1004                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1005                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1007          }                                                                                                         </span>
<span  style="">1008                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style="">1009          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1010          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style="">1011          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1012              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1014      };                                                                                                            </span>
<span  style="">1015                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1016      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1017      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1018      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1019      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1020          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1021              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1022              if (noteContent == null)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1023                  return;                                                                                           </span>
<span  style="">1024                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1025              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1026              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1027                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1028                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1029                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1029                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1030                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1031                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1032                      setLinkMenuItem();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1033                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1034                  }                                                                                                 </span>
<span  style="">1035                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1036                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1037                  if (getActivity() != null) {                                                                      </span>
<span class="7722450347844852596" onmouseenter="enter('7722450347844852596');" onmouseout="out('7722450347844852596');" style="">1038                      mActionMode = ((AppCompatActivity)getActivity()).startSupportActionMode(mActionModeCallback); </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1039                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1040                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041                      }                                                                                             </span>
<span  style="">1042                                                                                                                    </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1043                      setLinkMenuItem();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1045              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1046                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1047                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1049          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1050              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1051              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1052          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053      }                                                                                                             </span>
<span  style="">1054                                                                                                                    </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1055      private void setLinkMenuItem() {                                                                              </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1056          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1057              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="4608769072092705594" onmouseenter="enter('4608769072092705594');" onmouseout="out('4608769072092705594');" style="">1058                  mViewLinkMenuItem.setIcon(mCallIconResId);                                                        </span>

<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1059                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1060              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="112818067677115399" onmouseenter="enter('112818067677115399');" onmouseout="out('112818067677115399');" style="">1061                  mViewLinkMenuItem.setIcon(mEmailIconResId);                                                       </span>

<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1062                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1063              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-5464734295170160558" onmouseenter="enter('-5464734295170160558');" onmouseout="out('-5464734295170160558');" style="">1064                  mViewLinkMenuItem.setIcon(mMapIconResId);                                                         </span>

<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1065                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1066              } else {                                                                                              </span>
<span class="-4632312324298999235" onmouseenter="enter('-4632312324298999235');" onmouseout="out('-4632312324298999235');" style="">1067                  mViewLinkMenuItem.setIcon(mWebIconResId);                                                         </span>

<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1068                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1071      }                                                                                                             </span>
<span  style="">1072                                                                                                                    </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style="">1073      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style="">1074      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1075          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1076          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1077              if (!isAdded()) return;                                                                               </span>
<span  style="">1078                                                                                                                    </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1079              getActivity().runOnUiThread(new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1080                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1081                  public void run() {                                                                               </span>
<span class="-46541338249551852" onmouseenter="enter('-46541338249551852');" onmouseout="out('-46541338249551852');" style="">1082                      Toast.makeText(                                                                               </span>
<span class="1251951171853107838" onmouseenter="enter('1251951171853107838');" onmouseout="out('1251951171853107838');" style="">1083                              getActivity(),                                                                        </span>
<span class="112353621179497368" onmouseenter="enter('112353621179497368');" onmouseout="out('112353621179497368');" style="">1084                              mNote.isPublished() ? R.string.publish_error : R.string.unpublish_error,              </span>
<span class="-5464445565121122409" onmouseenter="enter('-5464445565121122409');" onmouseout="out('-5464445565121122409');" style="">1085                              Toast.LENGTH_SHORT                                                                    </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1086                      ).show();                                                                                     </span>
<span  style="">1087                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style="">1088                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1089                      mNote.save();                                                                                 </span>
<span  style="">1090                                                                                                                    </span>
<span class="-4813280994160595323" onmouseenter="enter('-4813280994160595323');" onmouseout="out('-4813280994160595323');" style="">1091                      if (mInfoPopupWindow != null &amp;&amp; mInfoPopupWindow.isShowing()) {                               </span>
<span class="-6944825779591395660" onmouseenter="enter('-6944825779591395660');" onmouseout="out('-6944825779591395660');" style=""><abbr title="1092                          ViewSwitcher viewSwitcher = (ViewSwitcher)mInfoPopupWindow.getContentView().findViewById(R.id.publish_view_switcher);">1092                          ViewSwitcher viewSwitcher = (ViewSwitcher)mInfoPopupWindow.getContentView().findViewById(RðŸ”µ</abbr></span>
<span class="3959257289291069285" onmouseenter="enter('3959257289291069285');" onmouseout="out('3959257289291069285');" style="">1093                          if (viewSwitcher.getDisplayedChild() == 1) {                                              </span>
<span class="-7472993052671010203" onmouseenter="enter('-7472993052671010203');" onmouseout="out('-7472993052671010203');" style="">1094                              viewSwitcher.showPrevious();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095                          }                                                                                         </span>





















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1098              });                                                                                                   </span>
<span  style="">1099                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1101      };                                                                                                            </span>
<span  style="">1102                                                                                                                    </span>
<span class="1779789763575252159" onmouseenter="enter('1779789763575252159');" onmouseout="out('1779789763575252159');" style="">1103      private void updateWordCount(TextView textView) {                                                             </span>
<span class="-2495587771059662618" onmouseenter="enter('-2495587771059662618');" onmouseout="out('-2495587771059662618');" style="">1104          String content = getNoteContentString();                                                                  </span>
<span  style="">1105                                                                                                                    </span>
<span class="-1008232604726066894" onmouseenter="enter('-1008232604726066894');" onmouseout="out('-1008232604726066894');" style="">1106          if (content == null || textView == null) return;                                                          </span>
<span  style="">1107                                                                                                                    </span>
<span class="-1430881109113489374" onmouseenter="enter('-1430881109113489374');" onmouseout="out('-1430881109113489374');" style="">1108          int numWords = (content.trim().length() == 0) ? 0 : content.trim().split(&quot;([\\W]+)&quot;).length;              </span>
<span  style="">1109                                                                                                                    </span>
<span class="7366599842051642465" onmouseenter="enter('7366599842051642465');" onmouseout="out('7366599842051642465');" style="">1110          String wordCountString = getResources().getQuantityString(R.plurals.word_count, numWords);                </span>
<span class="6184855737129992397" onmouseenter="enter('6184855737129992397');" onmouseout="out('6184855737129992397');" style="">1111          String formattedWordCount = NumberFormat.getInstance().format(numWords);                                  </span>
<span  style="">1112                                                                                                                    </span>
<span class="-8359331938088478069" onmouseenter="enter('-8359331938088478069');" onmouseout="out('-8359331938088478069');" style="">1113          textView.setText(formattedWordCount + &quot; &quot; + wordCountString);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114      }                                                                                                             </span>
<span  style="">1115                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1116      /**                                                                                                           </span>
<span class="2429664440205773965" onmouseenter="enter('2429664440205773965');" onmouseout="out('2429664440205773965');" style="">1117       * History methods                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1118       */                                                                                                           </span>





































































































<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1119      private void showHistorySheet() {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style="">1120          mContentEditText.clearFocus();                                                                            </span>
<span class="5237643276151641917" onmouseenter="enter('5237643276151641917');" onmouseout="out('5237643276151641917');" style="">1121          mHistoryView = LayoutInflater.from(getActivity()).inflate(R.layout.history_view, null, false);            </span>
<span class="5351690757262643215" onmouseenter="enter('5351690757262643215');" onmouseout="out('5351690757262643215');" style="">1122          mHistoryDate = (TextView)mHistoryView.findViewById(R.id.history_date);                                    </span>
<span class="-8290893453917192352" onmouseenter="enter('-8290893453917192352');" onmouseout="out('-8290893453917192352');" style="">1123          mHistorySeekBar = (SeekBar) mHistoryView.findViewById(R.id.seek_bar);                                     </span>
<span class="-6796587650430049801" onmouseenter="enter('-6796587650430049801');" onmouseout="out('-6796587650430049801');" style="">1124          mHistorySeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1125              @Override                                                                                             </span>
<span class="-1277213496629109114" onmouseenter="enter('-1277213496629109114');" onmouseout="out('-1277213496629109114');" style="">1126              public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {                      </span>
<span class="-512529548396220132" onmouseenter="enter('-512529548396220132');" onmouseout="out('-512529548396220132');" style="">1127                  if (mNoteRevisionsList == null  || mBottomSheet == null || !mBottomSheet.isShowing()) {           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1128                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129                  }                                                                                                 </span>
<span  style="">1130                                                                                                                    </span>
<span class="3261374061397327379" onmouseenter="enter('3261374061397327379');" onmouseout="out('3261374061397327379');" style="">1131                  Calendar noteDate = null;                                                                         </span>
<span class="795067484543094152" onmouseenter="enter('795067484543094152');" onmouseout="out('795067484543094152');" style="">1132                  if (progress == mNoteRevisionsList.size()) {                                                      </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1133                      mContentEditText.setText(mNote.getContent());                                                 </span>
<span class="422777865783702887" onmouseenter="enter('422777865783702887');" onmouseout="out('422777865783702887');" style="">1134                      noteDate = mNote.getModificationDate();                                                       </span>
<span class="2604941407803017700" onmouseenter="enter('2604941407803017700');" onmouseout="out('2604941407803017700');" style="">1135                  } else if (progress &lt; mNoteRevisionsList.size() &amp;&amp; mNoteRevisionsList.get(progress) != null) {    </span>
<span class="-3015683834625267614" onmouseenter="enter('-3015683834625267614');" onmouseout="out('-3015683834625267614');" style="">1136                      Note revisedNote = mNoteRevisionsList.get(progress);                                          </span>
<span class="-7346540990617068874" onmouseenter="enter('-7346540990617068874');" onmouseout="out('-7346540990617068874');" style="">1137                      noteDate = revisedNote.getModificationDate();                                                 </span>
<span class="5014324377411359116" onmouseenter="enter('5014324377411359116');" onmouseout="out('5014324377411359116');" style="">1138                      mContentEditText.setText(revisedNote.getContent());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139                  }                                                                                                 </span>
<span  style="">1140                                                                                                                    </span>
<span class="7005083347252376032" onmouseenter="enter('7005083347252376032');" onmouseout="out('7005083347252376032');" style="">1141                  updateHistoryDateText(noteDate);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142              }                                                                                                     </span>
<span  style="">1143                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1144              @Override                                                                                             </span>
<span class="4123707204084181282" onmouseenter="enter('4123707204084181282');" onmouseout="out('4123707204084181282');" style="">1145              public void onStartTrackingTouch(SeekBar seekBar) {                                                   </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1146                  // noop                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147              }                                                                                                     </span>
<span  style="">1148                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1149              @Override                                                                                             </span>
<span class="-2171166798537522744" onmouseenter="enter('-2171166798537522744');" onmouseout="out('-2171166798537522744');" style="">1150              public void onStopTrackingTouch(SeekBar seekBar) {                                                    </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1151                  // noop                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1153          });                                                                                                       </span>
<span  style="">1154                                                                                                                    </span>
<span class="-399278629944560479" onmouseenter="enter('-399278629944560479');" onmouseout="out('-399278629944560479');" style="">1155          View cancelHistoryButton = mHistoryView.findViewById(R.id.cancel_history_button);                         </span>
<span class="-3870882073524415989" onmouseenter="enter('-3870882073524415989');" onmouseout="out('-3870882073524415989');" style="">1156          cancelHistoryButton.setOnClickListener(new View.OnClickListener() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1157              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1158              public void onClick(View v) {                                                                         </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1159                  mContentEditText.setText(mNote.getContent());                                                     </span>
<span class="-9116943613469401615" onmouseenter="enter('-9116943613469401615');" onmouseout="out('-9116943613469401615');" style="">1160                  if (mBottomSheet != null) {                                                                       </span>
<span class="-2253967947417219465" onmouseenter="enter('-2253967947417219465');" onmouseout="out('-2253967947417219465');" style="">1161                      mDidTapHistoryButton = true;                                                                  </span>
<span class="-8632588736973837184" onmouseenter="enter('-8632588736973837184');" onmouseout="out('-8632588736973837184');" style="">1162                      mBottomSheet.dismiss();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1165          });                                                                                                       </span>
<span  style="">1166                                                                                                                    </span>
<span class="-2430160152113857709" onmouseenter="enter('-2430160152113857709');" onmouseout="out('-2430160152113857709');" style="">1167          View restoreHistoryButton = mHistoryView.findViewById(R.id.restore_history_button);                       </span>
<span class="6859677866535252732" onmouseenter="enter('6859677866535252732');" onmouseout="out('6859677866535252732');" style="">1168          restoreHistoryButton.setOnClickListener(new View.OnClickListener() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1169              @Override                                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1170              public void onClick(View v) {                                                                         </span>
<span class="-9116943613469401615" onmouseenter="enter('-9116943613469401615');" onmouseout="out('-9116943613469401615');" style="">1171                  if (mBottomSheet != null) {                                                                       </span>
<span class="-2253967947417219465" onmouseenter="enter('-2253967947417219465');" onmouseout="out('-2253967947417219465');" style="">1172                      mDidTapHistoryButton = true;                                                                  </span>
<span class="-8632588736973837184" onmouseenter="enter('-8632588736973837184');" onmouseout="out('-8632588736973837184');" style="">1173                      mBottomSheet.dismiss();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174                  }                                                                                                 </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1175                  saveAndSyncNote();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1177          });                                                                                                       </span>
<span  style="">1178                                                                                                                    </span>
<span class="3437465792954088807" onmouseenter="enter('3437465792954088807');" onmouseout="out('3437465792954088807');" style="">1179          mBottomSheet = new BottomSheet.Builder(getActivity(), R.style.Simplestyle_BottomSheet)                    </span>
<span class="-4337073838954049323" onmouseenter="enter('-4337073838954049323');" onmouseout="out('-4337073838954049323');" style="">1180                  .setView(mHistoryView)                                                                            </span>
<span class="-273266364927551372" onmouseenter="enter('-273266364927551372');" onmouseout="out('-273266364927551372');" style="">1181                  .setListener(new BottomSheetListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1182                      @Override                                                                                     </span>
<span class="8433275164766596900" onmouseenter="enter('8433275164766596900');" onmouseout="out('8433275164766596900');" style="">1183                      public void onSheetDismissed(int dismissalType) {                                             </span>
<span class="-6838835104080691738" onmouseenter="enter('-6838835104080691738');" onmouseout="out('-6838835104080691738');" style="">1184                          if (dismissalType == Integer.MIN_VALUE &amp;&amp; !mDidTapHistoryButton) {                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1185                              mContentEditText.setText(mNote.getContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186                          }                                                                                         </span>
<span  style="">1187                                                                                                                    </span>
<span class="-584414047522920425" onmouseenter="enter('-584414047522920425');" onmouseout="out('-584414047522920425');" style="">1188                          mDidTapHistoryButton = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1189                      }                                                                                             </span>
<span  style="">1190                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1191                      @Override                                                                                     </span>
<span class="2293273900842484281" onmouseenter="enter('2293273900842484281');" onmouseout="out('2293273900842484281');" style="">1192                      public void onSheetShown() {}                                                                 </span>
<span  style="">1193                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1194                      @Override                                                                                     </span>
<span class="-3527204381204396860" onmouseenter="enter('-3527204381204396860');" onmouseout="out('-3527204381204396860');" style="">1195                      public void onSheetItemSelected(MenuItem menuItem) {}                                         </span>
<span class="-2241092708317638881" onmouseenter="enter('-2241092708317638881');" onmouseout="out('-2241092708317638881');" style="">1196                  }).create();                                                                                      </span>
<span  style="">1197                                                                                                                    </span>
<span class="-2327975263623319044" onmouseenter="enter('-2327975263623319044');" onmouseout="out('-2327975263623319044');" style="">1198          updateHistoryProgressBar();                                                                               </span>
<span class="991390649155150526" onmouseenter="enter('991390649155150526');" onmouseout="out('991390649155150526');" style="">1199          mBottomSheet.getWindow().setDimAmount(0.3f);                                                              </span>
<span class="-5369233700326482183" onmouseenter="enter('-5369233700326482183');" onmouseout="out('-5369233700326482183');" style="">1200          mBottomSheet.show();                                                                                      </span>
<span class="-617993765808142661" onmouseenter="enter('-617993765808142661');" onmouseout="out('-617993765808142661');" style="">1201          mInfoPopupWindow.dismiss();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202      }                                                                                                             </span>
<span  style="">1203                                                                                                                    </span>
<span class="-160351830965395648" onmouseenter="enter('-160351830965395648');" onmouseout="out('-160351830965395648');" style="">1204      private void updateHistoryDateText(Calendar noteDate) {                                                       </span>
<span class="4424008964451702006" onmouseenter="enter('4424008964451702006');" onmouseout="out('4424008964451702006');" style="">1205          if (!isAdded() || noteDate == null || mHistoryDate == null) {                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1206              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207          }                                                                                                         </span>
<span  style="">1208                                                                                                                    </span>
<span class="8956591645357029539" onmouseenter="enter('8956591645357029539');" onmouseout="out('8956591645357029539');" style="">1209          long now = Calendar.getInstance().getTimeInMillis();                                                      </span>
<span class="-2353931499419985296" onmouseenter="enter('-2353931499419985296');" onmouseout="out('-2353931499419985296');" style="">1210          CharSequence dateText = DateUtils.getRelativeDateTimeString(                                              </span>
<span class="1251951171853107838" onmouseenter="enter('1251951171853107838');" onmouseout="out('1251951171853107838');" style="">1211                  getActivity(),                                                                                    </span>
<span class="6015697872440944996" onmouseenter="enter('6015697872440944996');" onmouseout="out('6015697872440944996');" style="">1212                  noteDate.getTimeInMillis(),                                                                       </span>
<span class="777202033541445058" onmouseenter="enter('777202033541445058');" onmouseout="out('777202033541445058');" style="">1213                  now,                                                                                              </span>
<span class="3037101412943528375" onmouseenter="enter('3037101412943528375');" onmouseout="out('3037101412943528375');" style="">1214                  0L,                                                                                               </span>
<span class="272655446373652840" onmouseenter="enter('272655446373652840');" onmouseout="out('272655446373652840');" style="">1215                  DateUtils.FORMAT_ABBREV_ALL                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1216          );                                                                                                        </span>
<span class="3972685700437540280" onmouseenter="enter('3972685700437540280');" onmouseout="out('3972685700437540280');" style="">1217          mHistoryDate.setText(dateText);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1218      }                                                                                                             </span>
<span  style="">1219                                                                                                                    </span>
<span class="8619318982638509312" onmouseenter="enter('8619318982638509312');" onmouseout="out('8619318982638509312');" style="">1220      private void updateHistoryProgressBar() {                                                                     </span>
<span class="186752481258201678" onmouseenter="enter('186752481258201678');" onmouseout="out('186752481258201678');" style="">1221          if (mHistorySeekBar == null) return;                                                                      </span>
<span  style="">1222                                                                                                                    </span>
<span class="5554977064763490309" onmouseenter="enter('5554977064763490309');" onmouseout="out('5554977064763490309');" style="">1223          int totalRevs = mNoteRevisionsList == null ? 0 : mNoteRevisionsList.size();                               </span>
<span class="4069692405048976821" onmouseenter="enter('4069692405048976821');" onmouseout="out('4069692405048976821');" style="">1224          if (totalRevs &gt; 0) {                                                                                      </span>
<span class="-1330096694422693628" onmouseenter="enter('-1330096694422693628');" onmouseout="out('-1330096694422693628');" style="">1225              mHistorySeekBar.setMax(totalRevs);                                                                    </span>
<span class="-6553513928663368048" onmouseenter="enter('-6553513928663368048');" onmouseout="out('-6553513928663368048');" style="">1226              mHistorySeekBar.setProgress(totalRevs);                                                               </span>
<span  style="">1227                                                                                                                    </span>
<span class="-1830906496094004296" onmouseenter="enter('-1830906496094004296');" onmouseout="out('-1830906496094004296');" style="">1228              updateHistoryDateText(mNote.getModificationDate());                                                   </span>
<span  style="">1229                                                                                                                    </span>
<span class="-7397666508182495589" onmouseenter="enter('-7397666508182495589');" onmouseout="out('-7397666508182495589');" style="">1230              mHistoryView.findViewById(R.id.history_loading_view).setVisibility(View.GONE);                        </span>
<span class="-7907562415083735313" onmouseenter="enter('-7907562415083735313');" onmouseout="out('-7907562415083735313');" style="">1231              mHistoryView.findViewById(R.id.history_slider_view).setVisibility(View.VISIBLE);                      </span>










<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233      }                                                                                                             </span>
<span  style="">1234                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1235      /**                                                                                                           </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1236       * Simperium listeners                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1237       */                                                                                                           </span>
<span  style="">1238                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1239      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1240      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style="">1241                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242      }                                                                                                             </span>
<span  style="">1243                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1244      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1245      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1246          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1247              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1248                  try {                                                                                             </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1249                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1250                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1251                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1252                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1253                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1254                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1255                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256                                  }                                                                                 </span>
<span  style="">1257                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1258                                  updateNote(updatedNote);                                                          </span>
<span class="-4651993534606395663" onmouseenter="enter('-4651993534606395663');" onmouseout="out('-4651993534606395663');" style="">1259                                  updateInfoPopup();                                                                </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1261                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1263                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1264                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268      }                                                                                                             </span>
<span  style="">1269                                                                                                                    </span>
<span  style="">1270                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1271      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1272      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1273          // noop                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274      }                                                                                                             </span>
<span  style="">1275                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1276      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1277      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1278          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1279          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1280              return;                                                                                               </span>
<span  style="">1281                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1282          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1283          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1284              return;                                                                                               </span>
<span  style="">1285                                                                                                                    </span>
<span class="4441072062127767636" onmouseenter="enter('4441072062127767636');" onmouseout="out('4441072062127767636');" style="">1286          note.setContent(getNoteContentString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287      }                                                                                                             </span>
<span  style="">1288                                                                                                                    </span>
<span class="8793911163422504003" onmouseenter="enter('8793911163422504003');" onmouseout="out('8793911163422504003');" style="">1289      private final Bucket.RevisionsRequestCallbacks&lt;Note&gt; mRevisionsRequestCallbacks = new                         </span>
<span class="-4346671948308354571" onmouseenter="enter('-4346671948308354571');" onmouseout="out('-4346671948308354571');" style="">1290              Bucket.RevisionsRequestCallbacks&lt;Note&gt;() {                                                            </span>
<span class="69869033959193681" onmouseenter="enter('69869033959193681');" onmouseout="out('69869033959193681');" style="">1291                  // Note: These callbacks won&#x27;t be running on the main thread                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1292                  @Override                                                                                         </span>
<span class="5970277540647045150" onmouseenter="enter('5970277540647045150');" onmouseout="out('5970277540647045150');" style="">1293                  public void onComplete(Map&lt;Integer, Note&gt; revisionsMap) {                                         </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="">1294                      if (!isAdded()) return;                                                                       </span>
<span  style="">1295                                                                                                                    </span>
<span class="-5660524009441092319" onmouseenter="enter('-5660524009441092319');" onmouseout="out('-5660524009441092319');" style="">1296                      // Convert map to an array list, to work better with the 0-index based seekbar                </span>
<span class="-7432330163131317333" onmouseenter="enter('-7432330163131317333');" onmouseout="out('-7432330163131317333');" style="">1297                      mNoteRevisionsList = new ArrayList&lt;&gt;(revisionsMap.values());                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1298                      getActivity().runOnUiThread(new Runnable() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1299                          @Override                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1300                          public void run() {                                                                       </span>
<span class="-2327975263623319044" onmouseenter="enter('-2327975263623319044');" onmouseout="out('-2327975263623319044');" style="">1301                              updateHistoryProgressBar();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1303                      });                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304                  }                                                                                                 </span>
<span  style="">1305                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1306                  @Override                                                                                         </span>
<span class="-6028539749056643673" onmouseenter="enter('-6028539749056643673');" onmouseout="out('-6028539749056643673');" style="">1307                  public void onRevision(String key, int version, JSONObject object) {}                             </span>
<span  style="">1308                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1309                  @Override                                                                                         </span>
<span class="1883042208885462033" onmouseenter="enter('1883042208885462033');" onmouseout="out('1883042208885462033');" style="">1310                  public void onError(Throwable exception) {                                                        </span>
<span class="-784344928477717832" onmouseenter="enter('-784344928477717832');" onmouseout="out('-784344928477717832');" style="">1311                      if (!isAdded() || mHistoryView == null) return;                                               </span>
<span  style="">1312                                                                                                                    </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1313                      getActivity().runOnUiThread(new Runnable() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1314                          @Override                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1315                          public void run() {                                                                       </span>
<span class="5074101638707858742" onmouseenter="enter('5074101638707858742');" onmouseout="out('5074101638707858742');" style="">1316                              mHistoryView.findViewById(R.id.history_progress_bar).setVisibility(View.GONE);        </span>
<span class="-7019649418173502920" onmouseenter="enter('-7019649418173502920');" onmouseout="out('-7019649418173502920');" style="">1317                              mHistoryView.findViewById(R.id.history_error_text).setVisibility(View.VISIBLE);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1319                      });                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1321              };                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1322  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            