<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>428</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    428
                    <a href="427.html">prev</a>
                    <a href="429.html">next</a>
                    <a href="428_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Evernote/android-job_2ea3b83f5b55f87c7866329e1ce79a54b40ff275_library/src/main/java/com/evernote/android/job/JobStorage.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;2ea3b83f5b55f87c7866329e1ce79a54b40ff275:library/src/main/java/com/evernote/android/job/JobStorage.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;2ea3b83f5b55f87c7866329e1ce79a54b40ff275^1:library/src/main/java/com/evernote/android/job/JobStorage.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;2ea3b83f5b55f87c7866329e1ce79a54b40ff275^2:library/src/main/java/com/evernote/android/job/JobStorage.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;16551222952ff36ddc86ad8de15d4b36ac38ef34:library/src/main/java/com/evernote/android/job/JobStorage.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2  * Copyright 2007-present Evernote Corporation.                                                          </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3  * All rights reserved.                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4  *                                                                                                       </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5  * Redistribution and use in source and binary forms, with or without modification,                      </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6  * are permitted provided that the following conditions are met:                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8  * 1. Redistributions of source code must retain the above copyright notice, this                        </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9  *    list of conditions and the following disclaimer.                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10  *                                                                                                       </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11  * 2. Redistributions in binary form must reproduce the above copyright notice,                          </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12  *    this list of conditions and the following disclaimer in the documentation                          </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13  *    and/or other materials provided with the distribution.                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14  *                                                                                                       </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                       </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                         </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                    </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18  * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                       </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19  * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                        </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20  * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                         </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                       </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22  * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                       </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23  * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                             </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25  */                                                                                                      </span>
<span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">  26 package com.evernote.android.job;                                                                        </span>
<span  style="">  27                                                                                                          </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  28 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  29 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  30 import android.content.SharedPreferences;                                                                </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31 import android.database.Cursor;                                                                          </span>
<span class="-4895155655276492102" onmouseenter="enter('-4895155655276492102');" onmouseout="out('-4895155655276492102');" style="">  32 import android.database.sqlite.SQLiteDatabase;                                                           </span>
<span class="6401548559697116088" onmouseenter="enter('6401548559697116088');" onmouseout="out('6401548559697116088');" style="">  33 import android.database.sqlite.SQLiteOpenHelper;                                                         </span>
<span class="-6511846620915513808" onmouseenter="enter('-6511846620915513808');" onmouseout="out('-6511846620915513808');" style="">  34 import android.support.v4.util.LruCache;                                                                 </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  35 import android.text.TextUtils;                                                                           </span>
<span  style="">  36                                                                                                          </span>
<span class="4243044458105674462" onmouseenter="enter('4243044458105674462');" onmouseout="out('4243044458105674462');" style="">  37 import net.vrallev.android.cat.Cat;                                                                      </span>
<span  style="">  38                                                                                                          </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  39 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  40 import java.util.HashSet;                                                                                </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  41 import java.util.Set;                                                                                    </span>
<span class="7979168040994256185" onmouseenter="enter('7979168040994256185');" onmouseout="out('7979168040994256185');" style="">  42 import java.util.concurrent.atomic.AtomicInteger;                                                        </span>
<span  style="">  43                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  44 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  45  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  46  */                                                                                                      </span>
<span class="8868092628535486643" onmouseenter="enter('8868092628535486643');" onmouseout="out('8868092628535486643');" style="">  47 /*package*/ class JobStorage {                                                                           </span>
<span  style="">  48                                                                                                          </span>
<span class="6445768488793837686" onmouseenter="enter('6445768488793837686');" onmouseout="out('6445768488793837686');" style="">  49 //    private static final String JOB_PREFIX = &quot;JOB_&quot;;                                                   </span>
<span class="-1242333540026493261" onmouseenter="enter('-1242333540026493261');" onmouseout="out('-1242333540026493261');" style="">  50     private static final String JOB_ID_COUNTER = &quot;JOB_ID_COUNTER&quot;;                                       </span>
<span  style="">  51                                                                                                          </span>
<span class="-2404437319045033907" onmouseenter="enter('-2404437319045033907');" onmouseout="out('-2404437319045033907');" style="">  52     private static final String DATABASE_NAME = &quot;evernote_jobs.db&quot;;                                      </span>
<span class="2067958763664816761" onmouseenter="enter('2067958763664816761');" onmouseout="out('2067958763664816761');" style="">  53     private static final int DATABASE_VERSION = 1;                                                       </span>
<span  style="">  54                                                                                                          </span>
<span class="-5399509471511451626" onmouseenter="enter('-5399509471511451626');" onmouseout="out('-5399509471511451626');" style="">  55     private static final String JOB_TABLE_NAME = &quot;jobs&quot;;                                                 </span>
<span  style="">  56                                                                                                          </span>
<span class="-1759376660035483434" onmouseenter="enter('-1759376660035483434');" onmouseout="out('-1759376660035483434');" style="">  57     public static final String COLUMN_ID = &quot;_id&quot;;                                                        </span>
<span class="3597490173733283683" onmouseenter="enter('3597490173733283683');" onmouseout="out('3597490173733283683');" style="">  58     public static final String COLUMN_JOB_CLASS = &quot;jobClass&quot;;                                            </span>
<span class="4468655879274334807" onmouseenter="enter('4468655879274334807');" onmouseout="out('4468655879274334807');" style="">  59     public static final String COLUMN_START_MS = &quot;startMs&quot;;                                              </span>
<span class="-5673904740377188220" onmouseenter="enter('-5673904740377188220');" onmouseout="out('-5673904740377188220');" style="">  60     public static final String COLUMN_END_MS = &quot;endMs&quot;;                                                  </span>
<span class="-1492098974017591423" onmouseenter="enter('-1492098974017591423');" onmouseout="out('-1492098974017591423');" style="">  61     public static final String COLUMN_BACKOFF_MS = &quot;backoffMs&quot;;                                          </span>
<span class="-683457830040574026" onmouseenter="enter('-683457830040574026');" onmouseout="out('-683457830040574026');" style="">  62     public static final String COLUMN_BACKOFF_POLICY = &quot;backoffPolicy&quot;;                                  </span>
<span class="-7649031159462118953" onmouseenter="enter('-7649031159462118953');" onmouseout="out('-7649031159462118953');" style="">  63     public static final String COLUMN_INTERVAL_MS = &quot;intervalMs&quot;;                                        </span>
<span class="143906295424175577" onmouseenter="enter('143906295424175577');" onmouseout="out('143906295424175577');" style="">  64     public static final String COLUMN_REQUIREMENTS_ENFORCED = &quot;requirementsEnforced&quot;;                    </span>
<span class="-3866353576373364156" onmouseenter="enter('-3866353576373364156');" onmouseout="out('-3866353576373364156');" style="">  65     public static final String COLUMN_REQUIRES_CHARGING = &quot;requiresCharging&quot;;                            </span>
<span class="-1601961836663142182" onmouseenter="enter('-1601961836663142182');" onmouseout="out('-1601961836663142182');" style="">  66     public static final String COLUMN_REQUIRES_DEVICE_IDLE = &quot;requiresDeviceIdle&quot;;                       </span>
<span class="9057126814159260470" onmouseenter="enter('9057126814159260470');" onmouseout="out('9057126814159260470');" style="">  67     public static final String COLUMN_EXACT = &quot;exact&quot;;                                                   </span>
<span class="310345969049098767" onmouseenter="enter('310345969049098767');" onmouseout="out('310345969049098767');" style="">  68     public static final String COLUMN_NETWORK_TYPE = &quot;networkType&quot;;                                      </span>
<span class="8020094400088613017" onmouseenter="enter('8020094400088613017');" onmouseout="out('8020094400088613017');" style="">  69     public static final String COLUMN_EXTRAS = &quot;extras&quot;;                                                 </span>
<span class="-879071955685156427" onmouseenter="enter('-879071955685156427');" onmouseout="out('-879071955685156427');" style="">  70     public static final String COLUMN_PERSISTED = &quot;persisted&quot;;                                           </span>
<span class="1902859056228658670" onmouseenter="enter('1902859056228658670');" onmouseout="out('1902859056228658670');" style="">  71     public static final String COLUMN_TAG = &quot;tag&quot;;                                                       </span>
<span class="-8842903817632804453" onmouseenter="enter('-8842903817632804453');" onmouseout="out('-8842903817632804453');" style="">  72     public static final String COLUMN_NUM_FAILURES = &quot;numFailures&quot;;                                      </span>
<span class="-8362973766446349582" onmouseenter="enter('-8362973766446349582');" onmouseout="out('-8362973766446349582');" style="">  73     public static final String COLUMN_SCHEDULED_AT = &quot;scheduledAt&quot;;                                      </span>
<span  style="">  74                                                                                                          </span>
<span class="-8062993232150312165" onmouseenter="enter('-8062993232150312165');" onmouseout="out('-8062993232150312165');" style="">  75     private static final int CACHE_SIZE = 30;                                                            </span>
<span  style="">  76                                                                                                          </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style="">  77     private final SharedPreferences mPreferences;                                                        </span>
<span class="-4319133248076690683" onmouseenter="enter('-4319133248076690683');" onmouseout="out('-4319133248076690683');" style="">  78     private final JobCacheId mCacheId;                                                                   </span>
<span class="3751969856940227107" onmouseenter="enter('3751969856940227107');" onmouseout="out('3751969856940227107');" style="">  79     private final JobCacheTag mCacheTag;                                                                 </span>
<span  style="">  80                                                                                                          </span>
<span class="-4130249909794563722" onmouseenter="enter('-4130249909794563722');" onmouseout="out('-4130249909794563722');" style="">  81     private final AtomicInteger mJobCounter;                                                             </span>
<span  style="">  82                                                                                                          </span>
<span class="-7383609803766380518" onmouseenter="enter('-7383609803766380518');" onmouseout="out('-7383609803766380518');" style="">  83     private final JobOpenHelper mDbHelper;                                                               </span>
<span  style="">  84                                                                                                          </span>
<span class="-6901841785529440864" onmouseenter="enter('-6901841785529440864');" onmouseout="out('-6901841785529440864');" style="">  85     public JobStorage(Context context) {                                                                 </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  86 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="9206888390182365614" onmouseenter="enter('9206888390182365614');" onmouseout="out('9206888390182365614');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  87         mPreferences = context.getSharedPreferences(&quot;jobs&quot;, Context.MODE_PRIVATE);                       </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  88                                                                                                          </span>
<span class="5028324480541749399" onmouseenter="enter('5028324480541749399');" onmouseout="out('5028324480541749399');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  89         mCacheId = new JobCacheId();                                                                     </span>
<span class="-1965667947955503131" onmouseenter="enter('-1965667947955503131');" onmouseout="out('-1965667947955503131');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  90         mCacheTag = new JobCacheTag();                                                                   </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  91 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="9206888390182365614" onmouseenter="enter('9206888390182365614');" onmouseout="out('9206888390182365614');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92         mPreferences = context.getSharedPreferences(&quot;jobs&quot;, Context.MODE_PRIVATE);                       </span>
<span class="-8512772465831485969" onmouseenter="enter('-8512772465831485969');" onmouseout="out('-8512772465831485969');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93         mExecutorService = Executors.newSingleThreadExecutor();                                          </span>
<span class="814059290270517609" onmouseenter="enter('814059290270517609');" onmouseout="out('814059290270517609');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94         mCache = new JobCache();                                                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95                                                                                                          </span>
<span class="1868886056084908408" onmouseenter="enter('1868886056084908408');" onmouseout="out('1868886056084908408');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96         int lastJobId = mPreferences.getInt(JOB_ID_COUNTER, 0);                                          </span>
<span class="8574020799141328620" onmouseenter="enter('8574020799141328620');" onmouseout="out('8574020799141328620');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97         mJobCounter = new AtomicInteger(lastJobId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99                                                                                                          </span>
<span class="8976285599487292611" onmouseenter="enter('8976285599487292611');" onmouseout="out('8976285599487292611');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100     public synchronized void put(final JobRequest jobRequest) {                                          </span>
<span class="-6065992154165699346" onmouseenter="enter('-6065992154165699346');" onmouseout="out('-6065992154165699346');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101         mCache.put(jobRequest.getJobId(), jobRequest);                                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102                                                                                                          </span>
<span class="7817991954699926509" onmouseenter="enter('7817991954699926509');" onmouseout="out('7817991954699926509');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103         mExecutorService.execute(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105             public void run() {                                                                          </span>
<span class="-4000533986031844527" onmouseenter="enter('-4000533986031844527');" onmouseout="out('-4000533986031844527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106                 store(jobRequest);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110                                                                                                          </span>
<span class="-8835593735168951075" onmouseenter="enter('-8835593735168951075');" onmouseout="out('-8835593735168951075');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111     public synchronized JobRequest get(int id) {                                                         </span>
<span class="2510370242963879052" onmouseenter="enter('2510370242963879052');" onmouseout="out('2510370242963879052');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112         return mCache.get(id);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114                                                                                                          </span>
<span class="-2271259438128895323" onmouseenter="enter('-2271259438128895323');" onmouseout="out('-2271259438128895323');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115     public synchronized JobRequest get(String tag) {                                                     </span>
<span class="-224931834240297160" onmouseenter="enter('-224931834240297160');" onmouseout="out('-224931834240297160');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116         if (tag == null) {                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118         }                                                                                                </span>
<span class="-7803330303435917076" onmouseenter="enter('-7803330303435917076');" onmouseout="out('-7803330303435917076');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119         for (String key : mPreferences.getAll().keySet()) {                                              </span>
<span class="977056783444622754" onmouseenter="enter('977056783444622754');" onmouseout="out('977056783444622754');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120             JobRequest request = getRequestForKey(key);                                                  </span>
<span class="2197682470350913360" onmouseenter="enter('2197682470350913360');" onmouseout="out('2197682470350913360');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121             if (request != null &amp;&amp; tag.equals(request.getTag())) {                                       </span>
<span class="-1057636993633179522" onmouseenter="enter('-1057636993633179522');" onmouseout="out('-1057636993633179522');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122                 return request;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 125         return null;                                                                                     </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 126 =======                                                                                                  </span>
<span class="-257526100994775420" onmouseenter="enter('-257526100994775420');" onmouseout="out('-257526100994775420');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127         mPreferences = context.getSharedPreferences(&quot;evernote_job&quot;, Context.MODE_PRIVATE);               </span>
<span class="-8512772465831485969" onmouseenter="enter('-8512772465831485969');" onmouseout="out('-8512772465831485969');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128         mExecutorService = Executors.newSingleThreadExecutor();                                          </span>
<span class="814059290270517609" onmouseenter="enter('814059290270517609');" onmouseout="out('814059290270517609');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 129         mCache = new JobCache();                                                                         </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 130 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 131                                                                                                          </span>
<span class="1868886056084908408" onmouseenter="enter('1868886056084908408');" onmouseout="out('1868886056084908408');" style=""> 132         int lastJobId = mPreferences.getInt(JOB_ID_COUNTER, 0);                                          </span>
<span class="8574020799141328620" onmouseenter="enter('8574020799141328620');" onmouseout="out('8574020799141328620');" style=""> 133         mJobCounter = new AtomicInteger(lastJobId);                                                      </span>
<span  style=""> 134                                                                                                          </span>
<span class="-780394151461569843" onmouseenter="enter('-780394151461569843');" onmouseout="out('-780394151461569843');" style=""> 135         mDbHelper = new JobOpenHelper(context);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136     }                                                                                                    </span>
<span  style=""> 137                                                                                                          </span>
<span class="8622057339592262934" onmouseenter="enter('8622057339592262934');" onmouseout="out('8622057339592262934');" style=""> 138     public synchronized void put(final JobRequest request) {                                             </span>
<span class="5064508639268778646" onmouseenter="enter('5064508639268778646');" onmouseout="out('5064508639268778646');" style=""> 139         mCacheId.put(request.getJobId(), request);                                                       </span>
<span class="4192202267986539162" onmouseenter="enter('4192202267986539162');" onmouseout="out('4192202267986539162');" style=""> 140         if (!TextUtils.isEmpty(request.getTag())) {                                                      </span>
<span class="-2472804154502248551" onmouseenter="enter('-2472804154502248551');" onmouseout="out('-2472804154502248551');" style=""> 141             mCacheTag.put(request.getTag(), request);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142         }                                                                                                </span>
<span  style=""> 143                                                                                                          </span>
<span class="1672760253298014137" onmouseenter="enter('1672760253298014137');" onmouseout="out('1672760253298014137');" style=""> 144         // don&#x27;t write to db async, there could be a race condition with remove()                        </span>
<span class="7947937779793695546" onmouseenter="enter('7947937779793695546');" onmouseout="out('7947937779793695546');" style=""> 145         store(request);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146     }                                                                                                    </span>
<span  style=""> 147                                                                                                          </span>
<span class="-8835593735168951075" onmouseenter="enter('-8835593735168951075');" onmouseout="out('-8835593735168951075');" style=""> 148     public synchronized JobRequest get(int id) {                                                         </span>
<span class="3329873509059044743" onmouseenter="enter('3329873509059044743');" onmouseout="out('3329873509059044743');" style=""> 149         return mCacheId.get(id);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="-2271259438128895323" onmouseenter="enter('-2271259438128895323');" onmouseout="out('-2271259438128895323');" style=""> 152     public synchronized JobRequest get(String tag) {                                                     </span>
<span class="-224931834240297160" onmouseenter="enter('-224931834240297160');" onmouseout="out('-224931834240297160');" style=""> 153         if (tag == null) {                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 154             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155         }                                                                                                </span>
<span class="-89182060539390137" onmouseenter="enter('-89182060539390137');" onmouseout="out('-89182060539390137');" style=""> 156         return mCacheTag.get(tag);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="4244028909570904870" onmouseenter="enter('4244028909570904870');" onmouseout="out('4244028909570904870');" style=""> 159     public synchronized Set&lt;JobRequest&gt; getAllJobRequests() {                                            </span>
<span class="-8266267592135482605" onmouseenter="enter('-8266267592135482605');" onmouseout="out('-8266267592135482605');" style=""> 160         Set&lt;JobRequest&gt; result = new HashSet&lt;&gt;();                                                        </span>
<span  style=""> 161                                                                                                          </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 162         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 163         try {                                                                                            </span>
<span class="-9120769441559770659" onmouseenter="enter('-9120769441559770659');" onmouseout="out('-9120769441559770659');" style=""><abbr title=" 164             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, null, null, null, null, null);"> 164             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, null, null, null, null, 🔵</abbr></span>
<span class="-2779278377908702985" onmouseenter="enter('-2779278377908702985');" onmouseout="out('-2779278377908702985');" style=""> 165             HashMap&lt;Integer, JobRequest&gt; cachedRequests = new HashMap&lt;&gt;(mCacheId.snapshot());            </span>
<span  style=""> 166                                                                                                          </span>
<span class="-679463407698125917" onmouseenter="enter('-679463407698125917');" onmouseout="out('-679463407698125917');" style=""> 167             while (cursor.moveToNext()) {                                                                </span>
<span class="-331315885090654358" onmouseenter="enter('-331315885090654358');" onmouseout="out('-331315885090654358');" style=""> 168                 // check in cache first, can avoid creating many JobRequest objects                      </span>
<span class="-9174136834543185817" onmouseenter="enter('-9174136834543185817');" onmouseout="out('-9174136834543185817');" style=""> 169                 Integer id = cursor.getInt(cursor.getColumnIndex(COLUMN_ID));                            </span>
<span class="-7704376132827994341" onmouseenter="enter('-7704376132827994341');" onmouseout="out('-7704376132827994341');" style=""> 170                 if (cachedRequests.containsKey(id)) {                                                    </span>
<span class="-3822909803951375099" onmouseenter="enter('-3822909803951375099');" onmouseout="out('-3822909803951375099');" style=""> 171                     result.add(cachedRequests.get(id));                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 172                 } else {                                                                                 </span>
<span class="7106644231457724197" onmouseenter="enter('7106644231457724197');" onmouseout="out('7106644231457724197');" style=""> 173                     result.add(JobRequest.fromCursor(cursor));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 176         } catch (Exception e) {                                                                          </span>
<span class="6774912481548166065" onmouseenter="enter('6774912481548166065');" onmouseout="out('6774912481548166065');" style=""> 177             Cat.e(e, &quot;could not load all jobs&quot;);                                                         </span>
<span  style=""> 178                                                                                                          </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 179         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 180             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 181                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183         }                                                                                                </span>
<span  style=""> 184                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 185         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186     }                                                                                                    </span>
<span  style=""> 187                                                                                                          </span>
<span class="5652182208073858825" onmouseenter="enter('5652182208073858825');" onmouseout="out('5652182208073858825');" style=""> 188     public synchronized void remove(JobRequest request) {                                                </span>
<span class="-5323816020648746122" onmouseenter="enter('-5323816020648746122');" onmouseout="out('-5323816020648746122');" style=""> 189         mCacheId.remove(request.getJobId());                                                             </span>
<span class="4192202267986539162" onmouseenter="enter('4192202267986539162');" onmouseout="out('4192202267986539162');" style=""> 190         if (!TextUtils.isEmpty(request.getTag())) {                                                      </span>
<span class="6743408358044924404" onmouseenter="enter('6743408358044924404');" onmouseout="out('6743408358044924404');" style=""> 191             mCacheTag.remove(request.getTag());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 193         try {                                                                                            </span>
<span class="9209794934098200522" onmouseenter="enter('9209794934098200522');" onmouseout="out('9209794934098200522');" style=""><abbr title=" 194             mDbHelper.getWritableDatabase().delete(JOB_TABLE_NAME, COLUMN_ID + &quot;=?&quot;, new String[]{String.valueOf(request.getJobId())});"> 194             mDbHelper.getWritableDatabase().delete(JOB_TABLE_NAME, COLUMN_ID + &quot;=?&quot;, new String[]{String.🔵</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 195         } catch (Exception e) {                                                                          </span>
<span class="-7987828881968633301" onmouseenter="enter('-7987828881968633301');" onmouseout="out('-7987828881968633301');" style=""> 196             Cat.e(e, &quot;could not delete %s&quot;, request);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198     }                                                                                                    </span>
<span  style=""> 199                                                                                                          </span>
<span class="-8892394876302147604" onmouseenter="enter('-8892394876302147604');" onmouseout="out('-8892394876302147604');" style=""> 200     public synchronized int nextJobId() {                                                                </span>
<span class="-4783381865201420552" onmouseenter="enter('-4783381865201420552');" onmouseout="out('-4783381865201420552');" style=""> 201         int id = mJobCounter.incrementAndGet();                                                          </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style=""> 202         mPreferences.edit()                                                                              </span>
<span class="972554661020621443" onmouseenter="enter('972554661020621443');" onmouseout="out('972554661020621443');" style=""> 203                 .putInt(JOB_ID_COUNTER, id)                                                              </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style=""> 204                 .apply();                                                                                </span>
<span  style=""> 205                                                                                                          </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style=""> 206         return id;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207     }                                                                                                    </span>
<span  style=""> 208                                                                                                          </span>
<span class="4741349929970482340" onmouseenter="enter('4741349929970482340');" onmouseout="out('4741349929970482340');" style=""> 209     private void store(JobRequest request) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 210         try {                                                                                            </span>
<span class="-1281717114327075896" onmouseenter="enter('-1281717114327075896');" onmouseout="out('-1281717114327075896');" style=""> 211             ContentValues contentValues = request.toContentValues();                                     </span>
<span class="660199020920529486" onmouseenter="enter('660199020920529486');" onmouseout="out('660199020920529486');" style=""> 212             mDbHelper.getWritableDatabase().insert(JOB_TABLE_NAME, null, contentValues);                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 213         } catch (Exception e) {                                                                          </span>
<span class="115819201546370216" onmouseenter="enter('115819201546370216');" onmouseout="out('115819201546370216');" style=""> 214             Cat.e(e, &quot;could not store %s&quot;, request);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216     }                                                                                                    </span>
<span  style=""> 217                                                                                                          </span>
<span class="-8103511703570812908" onmouseenter="enter('-8103511703570812908');" onmouseout="out('-8103511703570812908');" style=""> 218     private JobRequest load(int id) {                                                                    </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 219         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 220         try {                                                                                            </span>
<span class="7268950886903415553" onmouseenter="enter('7268950886903415553');" onmouseout="out('7268950886903415553');" style=""><abbr title=" 221             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_ID + &quot;=?&quot;, new String[]{String.valueOf(id)}, null, null, null);"> 221             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_ID + &quot;=?&quot;, new St🔵</abbr></span>
<span class="-53798844527343136" onmouseenter="enter('-53798844527343136');" onmouseout="out('-53798844527343136');" style=""> 222             if (cursor.moveToFirst()) {                                                                  </span>
<span class="-8206107135999304765" onmouseenter="enter('-8206107135999304765');" onmouseout="out('-8206107135999304765');" style=""> 223                 return JobRequest.fromCursor(cursor);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224             }                                                                                            </span>
<span  style=""> 225                                                                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 226         } catch (Exception e) {                                                                          </span>
<span class="-5714404982779275146" onmouseenter="enter('-5714404982779275146');" onmouseout="out('-5714404982779275146');" style=""> 227             Cat.e(e, &quot;could not load id %d&quot;, id);                                                        </span>
<span  style=""> 228                                                                                                          </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 229         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 230             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 231                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233         }                                                                                                </span>
<span  style=""> 234                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 235         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236     }                                                                                                    </span>
<span  style=""> 237                                                                                                          </span>
<span class="7094325100624458637" onmouseenter="enter('7094325100624458637');" onmouseout="out('7094325100624458637');" style=""> 238     private JobRequest load(String tag) {                                                                </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 239         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 240         try {                                                                                            </span>
<span class="6168106995354082245" onmouseenter="enter('6168106995354082245');" onmouseout="out('6168106995354082245');" style=""><abbr title=" 241             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_TAG + &quot;=?&quot;, new String[]{tag}, null, null, null);"> 241             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_TAG + &quot;=?&quot;, new S🔵</abbr></span>
<span class="-53798844527343136" onmouseenter="enter('-53798844527343136');" onmouseout="out('-53798844527343136');" style=""> 242             if (cursor.moveToFirst()) {                                                                  </span>
<span class="-8206107135999304765" onmouseenter="enter('-8206107135999304765');" onmouseout="out('-8206107135999304765');" style=""> 243                 return JobRequest.fromCursor(cursor);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244             }                                                                                            </span>
<span  style=""> 245                                                                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 246         } catch (Exception e) {                                                                          </span>
<span class="-670199027022586622" onmouseenter="enter('-670199027022586622');" onmouseout="out('-670199027022586622');" style=""> 247             Cat.e(e, &quot;could not load tag %s&quot;, tag);                                                      </span>
<span  style=""> 248                                                                                                          </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 249         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 250             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 251                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253         }                                                                                                </span>
<span  style=""> 254                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 255         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256     }                                                                                                    </span>
<span  style=""> 257                                                                                                          </span>
<span class="-4912025387074114010" onmouseenter="enter('-4912025387074114010');" onmouseout="out('-4912025387074114010');" style=""> 258     private class JobCacheId extends LruCache&lt;Integer, JobRequest&gt; {                                     </span>
<span  style=""> 259                                                                                                          </span>
<span class="-2792745723866924862" onmouseenter="enter('-2792745723866924862');" onmouseout="out('-2792745723866924862');" style=""> 260         public JobCacheId() {                                                                            </span>
<span class="-515578410459927816" onmouseenter="enter('-515578410459927816');" onmouseout="out('-515578410459927816');" style=""> 261             super(CACHE_SIZE);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262         }                                                                                                </span>
<span  style=""> 263                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 264         @Override                                                                                        </span>
<span class="8921052769370679097" onmouseenter="enter('8921052769370679097');" onmouseout="out('8921052769370679097');" style=""> 265         protected JobRequest create(Integer id) {                                                        </span>
<span class="-758168943084140428" onmouseenter="enter('-758168943084140428');" onmouseout="out('-758168943084140428');" style=""> 266             return load(id);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268     }                                                                                                    </span>
<span  style=""> 269                                                                                                          </span>
<span class="-2744672973563477566" onmouseenter="enter('-2744672973563477566');" onmouseout="out('-2744672973563477566');" style=""> 270     private class JobCacheTag extends LruCache&lt;String, JobRequest&gt; {                                     </span>
<span  style=""> 271                                                                                                          </span>
<span class="-3290223855465926070" onmouseenter="enter('-3290223855465926070');" onmouseout="out('-3290223855465926070');" style=""> 272         public JobCacheTag() {                                                                           </span>
<span class="-515578410459927816" onmouseenter="enter('-515578410459927816');" onmouseout="out('-515578410459927816');" style=""> 273             super(CACHE_SIZE);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274         }                                                                                                </span>
<span  style=""> 275                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 276         @Override                                                                                        </span>
<span class="-3909371011677707726" onmouseenter="enter('-3909371011677707726');" onmouseout="out('-3909371011677707726');" style=""> 277         protected JobRequest create(String tag) {                                                        </span>
<span class="9186716556005996177" onmouseenter="enter('9186716556005996177');" onmouseout="out('9186716556005996177');" style=""> 278             return load(tag);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280     }                                                                                                    </span>
<span  style=""> 281                                                                                                          </span>
<span class="-5836601040700834558" onmouseenter="enter('-5836601040700834558');" onmouseout="out('-5836601040700834558');" style=""> 282     private class JobOpenHelper extends SQLiteOpenHelper {                                               </span>
<span  style=""> 283                                                                                                          </span>
<span class="8311173037771286811" onmouseenter="enter('8311173037771286811');" onmouseout="out('8311173037771286811');" style=""> 284         public JobOpenHelper(Context context) {                                                          </span>
<span class="-3457119901623063168" onmouseenter="enter('-3457119901623063168');" onmouseout="out('-3457119901623063168');" style=""> 285             super(context, DATABASE_NAME, null, DATABASE_VERSION);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286         }                                                                                                </span>
<span  style=""> 287                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 288         @Override                                                                                        </span>
<span class="3201464308903999877" onmouseenter="enter('3201464308903999877');" onmouseout="out('3201464308903999877');" style=""> 289         public void onCreate(SQLiteDatabase db) {                                                        </span>
<span class="3675678860195979182" onmouseenter="enter('3675678860195979182');" onmouseout="out('3675678860195979182');" style=""> 290             createJobTable(db);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291         }                                                                                                </span>
<span  style=""> 292                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 293         @Override                                                                                        </span>
<span class="-4655538025867202729" onmouseenter="enter('-4655538025867202729');" onmouseout="out('-4655538025867202729');" style=""> 294         public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                       </span>
<span class="1273999693274717344" onmouseenter="enter('1273999693274717344');" onmouseout="out('1273999693274717344');" style=""> 295             // not needed at the moment                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296         }                                                                                                </span>
<span  style=""> 297                                                                                                          </span>
<span class="6188770209634244529" onmouseenter="enter('6188770209634244529');" onmouseout="out('6188770209634244529');" style=""> 298         private void createJobTable(SQLiteDatabase db) {                                                 </span>
<span class="-782343613149443026" onmouseenter="enter('-782343613149443026');" onmouseout="out('-782343613149443026');" style=""> 299             db.execSQL(&quot;create table &quot; + JOB_TABLE_NAME + &quot; (&quot;                                           </span>
<span class="1619651023227296595" onmouseenter="enter('1619651023227296595');" onmouseout="out('1619651023227296595');" style=""> 300                     + COLUMN_ID + &quot; integer primary key, &quot;                                               </span>
<span class="8476783174800253271" onmouseenter="enter('8476783174800253271');" onmouseout="out('8476783174800253271');" style=""> 301                     + COLUMN_JOB_CLASS + &quot; text not null, &quot;                                              </span>
<span class="1650473216663039799" onmouseenter="enter('1650473216663039799');" onmouseout="out('1650473216663039799');" style=""> 302                     + COLUMN_START_MS + &quot; integer, &quot;                                                     </span>
<span class="-5364349812674498093" onmouseenter="enter('-5364349812674498093');" onmouseout="out('-5364349812674498093');" style=""> 303                     + COLUMN_END_MS + &quot; integer, &quot;                                                       </span>
<span class="-7132632786302548490" onmouseenter="enter('-7132632786302548490');" onmouseout="out('-7132632786302548490');" style=""> 304                     + COLUMN_BACKOFF_MS + &quot; integer, &quot;                                                   </span>
<span class="4762111779826726958" onmouseenter="enter('4762111779826726958');" onmouseout="out('4762111779826726958');" style=""> 305                     + COLUMN_BACKOFF_POLICY + &quot; text not null, &quot;                                         </span>
<span class="4669779888273516908" onmouseenter="enter('4669779888273516908');" onmouseout="out('4669779888273516908');" style=""> 306                     + COLUMN_INTERVAL_MS + &quot; integer, &quot;                                                  </span>
<span class="-3125139090443019626" onmouseenter="enter('-3125139090443019626');" onmouseout="out('-3125139090443019626');" style=""> 307                     + COLUMN_REQUIREMENTS_ENFORCED + &quot; integer, &quot;                                        </span>
<span class="-1367002426959120339" onmouseenter="enter('-1367002426959120339');" onmouseout="out('-1367002426959120339');" style=""> 308                     + COLUMN_REQUIRES_CHARGING + &quot; integer, &quot;                                            </span>
<span class="-3938853039857233915" onmouseenter="enter('-3938853039857233915');" onmouseout="out('-3938853039857233915');" style=""> 309                     + COLUMN_REQUIRES_DEVICE_IDLE + &quot; integer, &quot;                                         </span>
<span class="-3292000544210815605" onmouseenter="enter('-3292000544210815605');" onmouseout="out('-3292000544210815605');" style=""> 310                     + COLUMN_EXACT + &quot; integer, &quot;                                                        </span>
<span class="8220633810262687545" onmouseenter="enter('8220633810262687545');" onmouseout="out('8220633810262687545');" style=""> 311                     + COLUMN_NETWORK_TYPE + &quot; text not null, &quot;                                           </span>
<span class="7299149189216502480" onmouseenter="enter('7299149189216502480');" onmouseout="out('7299149189216502480');" style=""> 312                     + COLUMN_EXTRAS + &quot; text, &quot;                                                          </span>
<span class="5670009809470630955" onmouseenter="enter('5670009809470630955');" onmouseout="out('5670009809470630955');" style=""> 313                     + COLUMN_PERSISTED + &quot; integer, &quot;                                                    </span>
<span class="-8795908226760187903" onmouseenter="enter('-8795908226760187903');" onmouseout="out('-8795908226760187903');" style=""> 314                     + COLUMN_TAG + &quot; text, &quot;                                                             </span>
<span class="-1764581784183854170" onmouseenter="enter('-1764581784183854170');" onmouseout="out('-1764581784183854170');" style=""> 315                     + COLUMN_NUM_FAILURES + &quot; integer, &quot;                                                 </span>
<span class="6921224975730885774" onmouseenter="enter('6921224975730885774');" onmouseout="out('6921224975730885774');" style=""> 316                     + COLUMN_SCHEDULED_AT + &quot; integer);&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2  * Copyright 2007-present Evernote Corporation.                                                          </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3  * All rights reserved.                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4  *                                                                                                       </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5  * Redistribution and use in source and binary forms, with or without modification,                      </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6  * are permitted provided that the following conditions are met:                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8  * 1. Redistributions of source code must retain the above copyright notice, this                        </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9  *    list of conditions and the following disclaimer.                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10  *                                                                                                       </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11  * 2. Redistributions in binary form must reproduce the above copyright notice,                          </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12  *    this list of conditions and the following disclaimer in the documentation                          </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13  *    and/or other materials provided with the distribution.                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14  *                                                                                                       </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                       </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                         </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                    </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18  * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                       </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19  * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                        </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20  * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                         </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                       </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22  * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                       </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23  * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                             </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25  */                                                                                                      </span>
<span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">  26 package com.evernote.android.job;                                                                        </span>
<span  style="">  27                                                                                                          </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  28 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  29 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  30 import android.content.SharedPreferences;                                                                </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31 import android.database.Cursor;                                                                          </span>
<span class="-4895155655276492102" onmouseenter="enter('-4895155655276492102');" onmouseout="out('-4895155655276492102');" style="">  32 import android.database.sqlite.SQLiteDatabase;                                                           </span>
<span class="6401548559697116088" onmouseenter="enter('6401548559697116088');" onmouseout="out('6401548559697116088');" style="">  33 import android.database.sqlite.SQLiteOpenHelper;                                                         </span>
<span class="-6511846620915513808" onmouseenter="enter('-6511846620915513808');" onmouseout="out('-6511846620915513808');" style="">  34 import android.support.v4.util.LruCache;                                                                 </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  35 import android.text.TextUtils;                                                                           </span>
<span  style="">  36                                                                                                          </span>
<span class="4243044458105674462" onmouseenter="enter('4243044458105674462');" onmouseout="out('4243044458105674462');" style="">  37 import net.vrallev.android.cat.Cat;                                                                      </span>
<span  style="">  38                                                                                                          </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  39 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  40 import java.util.HashSet;                                                                                </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  41 import java.util.Set;                                                                                    </span>
<span class="7979168040994256185" onmouseenter="enter('7979168040994256185');" onmouseout="out('7979168040994256185');" style="">  42 import java.util.concurrent.atomic.AtomicInteger;                                                        </span>
<span  style="">  43                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  44 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  45  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  46  */                                                                                                      </span>
<span class="-2942343485984948817" onmouseenter="enter('-2942343485984948817');" onmouseout="out('-2942343485984948817');" style="">  47 /*package*/                                                                                              </span>
<span  style="">  48                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  49 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  50  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  51  */                                                                                                      </span>
<span class="8868092628535486643" onmouseenter="enter('8868092628535486643');" onmouseout="out('8868092628535486643');" style="">  52 /*package*/ class JobStorage {                                                                           </span>
<span  style="">  53                                                                                                          </span>
<span class="6445768488793837686" onmouseenter="enter('6445768488793837686');" onmouseout="out('6445768488793837686');" style="">  54 //    private static final String JOB_PREFIX = &quot;JOB_&quot;;                                                   </span>
<span class="-1242333540026493261" onmouseenter="enter('-1242333540026493261');" onmouseout="out('-1242333540026493261');" style="">  55     private static final String JOB_ID_COUNTER = &quot;JOB_ID_COUNTER&quot;;                                       </span>
<span  style="">  56                                                                                                          </span>
<span class="-2404437319045033907" onmouseenter="enter('-2404437319045033907');" onmouseout="out('-2404437319045033907');" style="">  57     private static final String DATABASE_NAME = &quot;evernote_jobs.db&quot;;                                      </span>
<span class="2067958763664816761" onmouseenter="enter('2067958763664816761');" onmouseout="out('2067958763664816761');" style="">  58     private static final int DATABASE_VERSION = 1;                                                       </span>
<span  style="">  59                                                                                                          </span>
<span class="-5399509471511451626" onmouseenter="enter('-5399509471511451626');" onmouseout="out('-5399509471511451626');" style="">  60     private static final String JOB_TABLE_NAME = &quot;jobs&quot;;                                                 </span>
<span  style="">  61                                                                                                          </span>
<span class="-1759376660035483434" onmouseenter="enter('-1759376660035483434');" onmouseout="out('-1759376660035483434');" style="">  62     public static final String COLUMN_ID = &quot;_id&quot;;                                                        </span>
<span class="3597490173733283683" onmouseenter="enter('3597490173733283683');" onmouseout="out('3597490173733283683');" style="">  63     public static final String COLUMN_JOB_CLASS = &quot;jobClass&quot;;                                            </span>
<span class="4468655879274334807" onmouseenter="enter('4468655879274334807');" onmouseout="out('4468655879274334807');" style="">  64     public static final String COLUMN_START_MS = &quot;startMs&quot;;                                              </span>
<span class="-5673904740377188220" onmouseenter="enter('-5673904740377188220');" onmouseout="out('-5673904740377188220');" style="">  65     public static final String COLUMN_END_MS = &quot;endMs&quot;;                                                  </span>
<span class="-1492098974017591423" onmouseenter="enter('-1492098974017591423');" onmouseout="out('-1492098974017591423');" style="">  66     public static final String COLUMN_BACKOFF_MS = &quot;backoffMs&quot;;                                          </span>
<span class="-683457830040574026" onmouseenter="enter('-683457830040574026');" onmouseout="out('-683457830040574026');" style="">  67     public static final String COLUMN_BACKOFF_POLICY = &quot;backoffPolicy&quot;;                                  </span>
<span class="-7649031159462118953" onmouseenter="enter('-7649031159462118953');" onmouseout="out('-7649031159462118953');" style="">  68     public static final String COLUMN_INTERVAL_MS = &quot;intervalMs&quot;;                                        </span>
<span class="143906295424175577" onmouseenter="enter('143906295424175577');" onmouseout="out('143906295424175577');" style="">  69     public static final String COLUMN_REQUIREMENTS_ENFORCED = &quot;requirementsEnforced&quot;;                    </span>
<span class="-3866353576373364156" onmouseenter="enter('-3866353576373364156');" onmouseout="out('-3866353576373364156');" style="">  70     public static final String COLUMN_REQUIRES_CHARGING = &quot;requiresCharging&quot;;                            </span>
<span class="-1601961836663142182" onmouseenter="enter('-1601961836663142182');" onmouseout="out('-1601961836663142182');" style="">  71     public static final String COLUMN_REQUIRES_DEVICE_IDLE = &quot;requiresDeviceIdle&quot;;                       </span>
<span class="9057126814159260470" onmouseenter="enter('9057126814159260470');" onmouseout="out('9057126814159260470');" style="">  72     public static final String COLUMN_EXACT = &quot;exact&quot;;                                                   </span>
<span class="310345969049098767" onmouseenter="enter('310345969049098767');" onmouseout="out('310345969049098767');" style="">  73     public static final String COLUMN_NETWORK_TYPE = &quot;networkType&quot;;                                      </span>
<span class="8020094400088613017" onmouseenter="enter('8020094400088613017');" onmouseout="out('8020094400088613017');" style="">  74     public static final String COLUMN_EXTRAS = &quot;extras&quot;;                                                 </span>
<span class="-879071955685156427" onmouseenter="enter('-879071955685156427');" onmouseout="out('-879071955685156427');" style="">  75     public static final String COLUMN_PERSISTED = &quot;persisted&quot;;                                           </span>
<span class="1902859056228658670" onmouseenter="enter('1902859056228658670');" onmouseout="out('1902859056228658670');" style="">  76     public static final String COLUMN_TAG = &quot;tag&quot;;                                                       </span>
<span class="-8842903817632804453" onmouseenter="enter('-8842903817632804453');" onmouseout="out('-8842903817632804453');" style="">  77     public static final String COLUMN_NUM_FAILURES = &quot;numFailures&quot;;                                      </span>
<span class="-8362973766446349582" onmouseenter="enter('-8362973766446349582');" onmouseout="out('-8362973766446349582');" style="">  78     public static final String COLUMN_SCHEDULED_AT = &quot;scheduledAt&quot;;                                      </span>
<span  style="">  79                                                                                                          </span>
<span class="-8062993232150312165" onmouseenter="enter('-8062993232150312165');" onmouseout="out('-8062993232150312165');" style="">  80     private static final int CACHE_SIZE = 30;                                                            </span>
<span  style="">  81                                                                                                          </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style="">  82     private final SharedPreferences mPreferences;                                                        </span>
<span class="-4319133248076690683" onmouseenter="enter('-4319133248076690683');" onmouseout="out('-4319133248076690683');" style="">  83     private final JobCacheId mCacheId;                                                                   </span>
<span class="3751969856940227107" onmouseenter="enter('3751969856940227107');" onmouseout="out('3751969856940227107');" style="">  84     private final JobCacheTag mCacheTag;                                                                 </span>
<span  style="">  85                                                                                                          </span>
<span class="-4130249909794563722" onmouseenter="enter('-4130249909794563722');" onmouseout="out('-4130249909794563722');" style="">  86     private final AtomicInteger mJobCounter;                                                             </span>
<span  style="">  87                                                                                                          </span>
<span class="-7383609803766380518" onmouseenter="enter('-7383609803766380518');" onmouseout="out('-7383609803766380518');" style="">  88     private final JobOpenHelper mDbHelper;                                                               </span>
<span  style="">  89                                                                                                          </span>
<span class="-6901841785529440864" onmouseenter="enter('-6901841785529440864');" onmouseout="out('-6901841785529440864');" style="">  90     public JobStorage(Context context) {                                                                 </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  91 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="9206888390182365614" onmouseenter="enter('9206888390182365614');" onmouseout="out('9206888390182365614');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  92         mPreferences = context.getSharedPreferences(&quot;jobs&quot;, Context.MODE_PRIVATE);                       </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  93                                                                                                          </span>
<span class="5028324480541749399" onmouseenter="enter('5028324480541749399');" onmouseout="out('5028324480541749399');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  94         mCacheId = new JobCacheId();                                                                     </span>
<span class="-1965667947955503131" onmouseenter="enter('-1965667947955503131');" onmouseout="out('-1965667947955503131');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  95         mCacheTag = new JobCacheTag();                                                                   </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  96 ||||||| BASE                                                                                             </span>
<span class="9206888390182365614" onmouseenter="enter('9206888390182365614');" onmouseout="out('9206888390182365614');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97         mPreferences = context.getSharedPreferences(&quot;jobs&quot;, Context.MODE_PRIVATE);                       </span>
<span class="-8512772465831485969" onmouseenter="enter('-8512772465831485969');" onmouseout="out('-8512772465831485969');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98         mExecutorService = Executors.newSingleThreadExecutor();                                          </span>
<span class="814059290270517609" onmouseenter="enter('814059290270517609');" onmouseout="out('814059290270517609');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99         mCache = new JobCache();                                                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 101 =======                                                                                                  </span>
<span class="-257526100994775420" onmouseenter="enter('-257526100994775420');" onmouseout="out('-257526100994775420');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 102         mPreferences = context.getSharedPreferences(&quot;evernote_job&quot;, Context.MODE_PRIVATE);               </span>
<span class="-8512772465831485969" onmouseenter="enter('-8512772465831485969');" onmouseout="out('-8512772465831485969');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 103         mExecutorService = Executors.newSingleThreadExecutor();                                          </span>
<span class="814059290270517609" onmouseenter="enter('814059290270517609');" onmouseout="out('814059290270517609');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 104         mCache = new JobCache();                                                                         </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 105 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span  style=""> 106                                                                                                          </span>
<span class="1868886056084908408" onmouseenter="enter('1868886056084908408');" onmouseout="out('1868886056084908408');" style=""> 107         int lastJobId = mPreferences.getInt(JOB_ID_COUNTER, 0);                                          </span>
<span class="8574020799141328620" onmouseenter="enter('8574020799141328620');" onmouseout="out('8574020799141328620');" style=""> 108         mJobCounter = new AtomicInteger(lastJobId);                                                      </span>
<span  style=""> 109                                                                                                          </span>
<span class="-780394151461569843" onmouseenter="enter('-780394151461569843');" onmouseout="out('-780394151461569843');" style=""> 110         mDbHelper = new JobOpenHelper(context);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="8622057339592262934" onmouseenter="enter('8622057339592262934');" onmouseout="out('8622057339592262934');" style=""> 113     public synchronized void put(final JobRequest request) {                                             </span>
<span class="5064508639268778646" onmouseenter="enter('5064508639268778646');" onmouseout="out('5064508639268778646');" style=""> 114         mCacheId.put(request.getJobId(), request);                                                       </span>
<span class="4192202267986539162" onmouseenter="enter('4192202267986539162');" onmouseout="out('4192202267986539162');" style=""> 115         if (!TextUtils.isEmpty(request.getTag())) {                                                      </span>
<span class="-2472804154502248551" onmouseenter="enter('-2472804154502248551');" onmouseout="out('-2472804154502248551');" style=""> 116             mCacheTag.put(request.getTag(), request);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117             }                                                                                            </span>
<span  style=""> 118                                                                                                          </span>
<span class="1672760253298014137" onmouseenter="enter('1672760253298014137');" onmouseout="out('1672760253298014137');" style=""> 119         // don&#x27;t write to db async, there could be a race condition with remove()                        </span>
<span class="7947937779793695546" onmouseenter="enter('7947937779793695546');" onmouseout="out('7947937779793695546');" style=""> 120         store(request);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121     }                                                                                                    </span>
<span  style=""> 122                                                                                                          </span>
<span class="-8835593735168951075" onmouseenter="enter('-8835593735168951075');" onmouseout="out('-8835593735168951075');" style=""> 123     public synchronized JobRequest get(int id) {                                                         </span>
<span class="3329873509059044743" onmouseenter="enter('3329873509059044743');" onmouseout="out('3329873509059044743');" style=""> 124         return mCacheId.get(id);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125     }                                                                                                    </span>
<span  style=""> 126                                                                                                          </span>
<span class="-2271259438128895323" onmouseenter="enter('-2271259438128895323');" onmouseout="out('-2271259438128895323');" style=""> 127     public synchronized JobRequest get(String tag) {                                                     </span>
<span class="-224931834240297160" onmouseenter="enter('-224931834240297160');" onmouseout="out('-224931834240297160');" style=""> 128         if (tag == null) {                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 129             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130         }                                                                                                </span>
<span class="-89182060539390137" onmouseenter="enter('-89182060539390137');" onmouseout="out('-89182060539390137');" style=""> 131         return mCacheTag.get(tag);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132     }                                                                                                    </span>
<span  style=""> 133                                                                                                          </span>
<span class="4244028909570904870" onmouseenter="enter('4244028909570904870');" onmouseout="out('4244028909570904870');" style=""> 134     public synchronized Set&lt;JobRequest&gt; getAllJobRequests() {                                            </span>
<span class="-8266267592135482605" onmouseenter="enter('-8266267592135482605');" onmouseout="out('-8266267592135482605');" style=""> 135         Set&lt;JobRequest&gt; result = new HashSet&lt;&gt;();                                                        </span>
<span  style=""> 136                                                                                                          </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 137         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 138         try {                                                                                            </span>
<span class="-9120769441559770659" onmouseenter="enter('-9120769441559770659');" onmouseout="out('-9120769441559770659');" style=""><abbr title=" 139             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, null, null, null, null, null);"> 139             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, null, null, null, null, 🔵</abbr></span>
<span class="-2779278377908702985" onmouseenter="enter('-2779278377908702985');" onmouseout="out('-2779278377908702985');" style=""> 140             HashMap&lt;Integer, JobRequest&gt; cachedRequests = new HashMap&lt;&gt;(mCacheId.snapshot());            </span>
<span  style=""> 141                                                                                                          </span>
<span class="-679463407698125917" onmouseenter="enter('-679463407698125917');" onmouseout="out('-679463407698125917');" style=""> 142             while (cursor.moveToNext()) {                                                                </span>
<span class="-331315885090654358" onmouseenter="enter('-331315885090654358');" onmouseout="out('-331315885090654358');" style=""> 143                 // check in cache first, can avoid creating many JobRequest objects                      </span>
<span class="-9174136834543185817" onmouseenter="enter('-9174136834543185817');" onmouseout="out('-9174136834543185817');" style=""> 144                 Integer id = cursor.getInt(cursor.getColumnIndex(COLUMN_ID));                            </span>
<span class="-7704376132827994341" onmouseenter="enter('-7704376132827994341');" onmouseout="out('-7704376132827994341');" style=""> 145                 if (cachedRequests.containsKey(id)) {                                                    </span>
<span class="-3822909803951375099" onmouseenter="enter('-3822909803951375099');" onmouseout="out('-3822909803951375099');" style=""> 146                     result.add(cachedRequests.get(id));                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 147                 } else {                                                                                 </span>
<span class="7106644231457724197" onmouseenter="enter('7106644231457724197');" onmouseout="out('7106644231457724197');" style=""> 148                     result.add(JobRequest.fromCursor(cursor));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 151         } catch (Exception e) {                                                                          </span>
<span class="6774912481548166065" onmouseenter="enter('6774912481548166065');" onmouseout="out('6774912481548166065');" style=""> 152             Cat.e(e, &quot;could not load all jobs&quot;);                                                         </span>
<span  style=""> 153                                                                                                          </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 154         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 155             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 156                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158         }                                                                                                </span>
<span  style=""> 159                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 160         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161     }                                                                                                    </span>
<span  style=""> 162                                                                                                          </span>
<span class="5652182208073858825" onmouseenter="enter('5652182208073858825');" onmouseout="out('5652182208073858825');" style=""> 163     public synchronized void remove(JobRequest request) {                                                </span>
<span class="-5323816020648746122" onmouseenter="enter('-5323816020648746122');" onmouseout="out('-5323816020648746122');" style=""> 164         mCacheId.remove(request.getJobId());                                                             </span>
<span class="4192202267986539162" onmouseenter="enter('4192202267986539162');" onmouseout="out('4192202267986539162');" style=""> 165         if (!TextUtils.isEmpty(request.getTag())) {                                                      </span>
<span class="6743408358044924404" onmouseenter="enter('6743408358044924404');" onmouseout="out('6743408358044924404');" style=""> 166             mCacheTag.remove(request.getTag());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 168         try {                                                                                            </span>
<span class="9209794934098200522" onmouseenter="enter('9209794934098200522');" onmouseout="out('9209794934098200522');" style=""><abbr title=" 169             mDbHelper.getWritableDatabase().delete(JOB_TABLE_NAME, COLUMN_ID + &quot;=?&quot;, new String[]{String.valueOf(request.getJobId())});"> 169             mDbHelper.getWritableDatabase().delete(JOB_TABLE_NAME, COLUMN_ID + &quot;=?&quot;, new String[]{String.🔵</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 170         } catch (Exception e) {                                                                          </span>
<span class="-7987828881968633301" onmouseenter="enter('-7987828881968633301');" onmouseout="out('-7987828881968633301');" style=""> 171             Cat.e(e, &quot;could not delete %s&quot;, request);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173     }                                                                                                    </span>
<span  style=""> 174                                                                                                          </span>
<span class="-8892394876302147604" onmouseenter="enter('-8892394876302147604');" onmouseout="out('-8892394876302147604');" style=""> 175     public synchronized int nextJobId() {                                                                </span>
<span class="-4783381865201420552" onmouseenter="enter('-4783381865201420552');" onmouseout="out('-4783381865201420552');" style=""> 176         int id = mJobCounter.incrementAndGet();                                                          </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style=""> 177         mPreferences.edit()                                                                              </span>
<span class="972554661020621443" onmouseenter="enter('972554661020621443');" onmouseout="out('972554661020621443');" style=""> 178                 .putInt(JOB_ID_COUNTER, id)                                                              </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style=""> 179                 .apply();                                                                                </span>
<span  style=""> 180                                                                                                          </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style=""> 181         return id;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182     }                                                                                                    </span>
<span  style=""> 183                                                                                                          </span>
<span class="4741349929970482340" onmouseenter="enter('4741349929970482340');" onmouseout="out('4741349929970482340');" style=""> 184     private void store(JobRequest request) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 185         try {                                                                                            </span>
<span class="-1281717114327075896" onmouseenter="enter('-1281717114327075896');" onmouseout="out('-1281717114327075896');" style=""> 186             ContentValues contentValues = request.toContentValues();                                     </span>
<span class="660199020920529486" onmouseenter="enter('660199020920529486');" onmouseout="out('660199020920529486');" style=""> 187             mDbHelper.getWritableDatabase().insert(JOB_TABLE_NAME, null, contentValues);                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 188         } catch (Exception e) {                                                                          </span>
<span class="115819201546370216" onmouseenter="enter('115819201546370216');" onmouseout="out('115819201546370216');" style=""> 189             Cat.e(e, &quot;could not store %s&quot;, request);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191     }                                                                                                    </span>
<span  style=""> 192                                                                                                          </span>
<span class="-8103511703570812908" onmouseenter="enter('-8103511703570812908');" onmouseout="out('-8103511703570812908');" style=""> 193     private JobRequest load(int id) {                                                                    </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 194         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 195         try {                                                                                            </span>
<span class="7268950886903415553" onmouseenter="enter('7268950886903415553');" onmouseout="out('7268950886903415553');" style=""><abbr title=" 196             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_ID + &quot;=?&quot;, new String[]{String.valueOf(id)}, null, null, null);"> 196             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_ID + &quot;=?&quot;, new St🔵</abbr></span>
<span class="-53798844527343136" onmouseenter="enter('-53798844527343136');" onmouseout="out('-53798844527343136');" style=""> 197             if (cursor.moveToFirst()) {                                                                  </span>
<span class="-8206107135999304765" onmouseenter="enter('-8206107135999304765');" onmouseout="out('-8206107135999304765');" style=""> 198                 return JobRequest.fromCursor(cursor);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199         }                                                                                                </span>
<span  style=""> 200                                                                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 201         } catch (Exception e) {                                                                          </span>
<span class="-5714404982779275146" onmouseenter="enter('-5714404982779275146');" onmouseout="out('-5714404982779275146');" style=""> 202             Cat.e(e, &quot;could not load id %d&quot;, id);                                                        </span>
<span  style=""> 203                                                                                                          </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 204         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 205             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 206                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208     }                                                                                                    </span>
<span  style=""> 209                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 210         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="7094325100624458637" onmouseenter="enter('7094325100624458637');" onmouseout="out('7094325100624458637');" style=""> 213     private JobRequest load(String tag) {                                                                </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 214         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 215         try {                                                                                            </span>
<span class="6168106995354082245" onmouseenter="enter('6168106995354082245');" onmouseout="out('6168106995354082245');" style=""><abbr title=" 216             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_TAG + &quot;=?&quot;, new String[]{tag}, null, null, null);"> 216             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_TAG + &quot;=?&quot;, new S🔵</abbr></span>
<span class="-53798844527343136" onmouseenter="enter('-53798844527343136');" onmouseout="out('-53798844527343136');" style=""> 217             if (cursor.moveToFirst()) {                                                                  </span>
<span class="-8206107135999304765" onmouseenter="enter('-8206107135999304765');" onmouseout="out('-8206107135999304765');" style=""> 218                 return JobRequest.fromCursor(cursor);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219             }                                                                                            </span>
<span  style=""> 220                                                                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 221         } catch (Exception e) {                                                                          </span>
<span class="-670199027022586622" onmouseenter="enter('-670199027022586622');" onmouseout="out('-670199027022586622');" style=""> 222             Cat.e(e, &quot;could not load tag %s&quot;, tag);                                                      </span>
<span  style=""> 223                                                                                                          </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 224         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 225             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 226                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228         }                                                                                                </span>
<span  style=""> 229                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 230         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="-4912025387074114010" onmouseenter="enter('-4912025387074114010');" onmouseout="out('-4912025387074114010');" style=""> 233     private class JobCacheId extends LruCache&lt;Integer, JobRequest&gt; {                                     </span>
<span  style=""> 234                                                                                                          </span>
<span class="-2792745723866924862" onmouseenter="enter('-2792745723866924862');" onmouseout="out('-2792745723866924862');" style=""> 235         public JobCacheId() {                                                                            </span>
<span class="-515578410459927816" onmouseenter="enter('-515578410459927816');" onmouseout="out('-515578410459927816');" style=""> 236             super(CACHE_SIZE);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 239         @Override                                                                                        </span>
<span class="8921052769370679097" onmouseenter="enter('8921052769370679097');" onmouseout="out('8921052769370679097');" style=""> 240         protected JobRequest create(Integer id) {                                                        </span>
<span class="-758168943084140428" onmouseenter="enter('-758168943084140428');" onmouseout="out('-758168943084140428');" style=""> 241             return load(id);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243     }                                                                                                    </span>
<span  style=""> 244                                                                                                          </span>
<span class="-2744672973563477566" onmouseenter="enter('-2744672973563477566');" onmouseout="out('-2744672973563477566');" style=""> 245     private class JobCacheTag extends LruCache&lt;String, JobRequest&gt; {                                     </span>
<span  style=""> 246                                                                                                          </span>
<span class="-3290223855465926070" onmouseenter="enter('-3290223855465926070');" onmouseout="out('-3290223855465926070');" style=""> 247         public JobCacheTag() {                                                                           </span>
<span class="-515578410459927816" onmouseenter="enter('-515578410459927816');" onmouseout="out('-515578410459927816');" style=""> 248             super(CACHE_SIZE);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249         }                                                                                                </span>
<span  style=""> 250                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 251         @Override                                                                                        </span>
<span class="-3909371011677707726" onmouseenter="enter('-3909371011677707726');" onmouseout="out('-3909371011677707726');" style=""> 252         protected JobRequest create(String tag) {                                                        </span>
<span class="9186716556005996177" onmouseenter="enter('9186716556005996177');" onmouseout="out('9186716556005996177');" style=""> 253             return load(tag);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255     }                                                                                                    </span>
<span  style=""> 256                                                                                                          </span>
<span class="-5836601040700834558" onmouseenter="enter('-5836601040700834558');" onmouseout="out('-5836601040700834558');" style=""> 257     private class JobOpenHelper extends SQLiteOpenHelper {                                               </span>
<span  style=""> 258                                                                                                          </span>
<span class="8311173037771286811" onmouseenter="enter('8311173037771286811');" onmouseout="out('8311173037771286811');" style=""> 259         public JobOpenHelper(Context context) {                                                          </span>
<span class="-3457119901623063168" onmouseenter="enter('-3457119901623063168');" onmouseout="out('-3457119901623063168');" style=""> 260             super(context, DATABASE_NAME, null, DATABASE_VERSION);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span  style=""> 262                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263         @Override                                                                                        </span>
<span class="3201464308903999877" onmouseenter="enter('3201464308903999877');" onmouseout="out('3201464308903999877');" style=""> 264         public void onCreate(SQLiteDatabase db) {                                                        </span>
<span class="3675678860195979182" onmouseenter="enter('3675678860195979182');" onmouseout="out('3675678860195979182');" style=""> 265             createJobTable(db);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266         }                                                                                                </span>
<span  style=""> 267                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 268         @Override                                                                                        </span>
<span class="-4655538025867202729" onmouseenter="enter('-4655538025867202729');" onmouseout="out('-4655538025867202729');" style=""> 269         public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                       </span>
<span class="1273999693274717344" onmouseenter="enter('1273999693274717344');" onmouseout="out('1273999693274717344');" style=""> 270             // not needed at the moment                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271         }                                                                                                </span>
<span  style=""> 272                                                                                                          </span>
<span class="6188770209634244529" onmouseenter="enter('6188770209634244529');" onmouseout="out('6188770209634244529');" style=""> 273         private void createJobTable(SQLiteDatabase db) {                                                 </span>
<span class="-782343613149443026" onmouseenter="enter('-782343613149443026');" onmouseout="out('-782343613149443026');" style=""> 274             db.execSQL(&quot;create table &quot; + JOB_TABLE_NAME + &quot; (&quot;                                           </span>
<span class="1619651023227296595" onmouseenter="enter('1619651023227296595');" onmouseout="out('1619651023227296595');" style=""> 275                     + COLUMN_ID + &quot; integer primary key, &quot;                                               </span>
<span class="8476783174800253271" onmouseenter="enter('8476783174800253271');" onmouseout="out('8476783174800253271');" style=""> 276                     + COLUMN_JOB_CLASS + &quot; text not null, &quot;                                              </span>
<span class="1650473216663039799" onmouseenter="enter('1650473216663039799');" onmouseout="out('1650473216663039799');" style=""> 277                     + COLUMN_START_MS + &quot; integer, &quot;                                                     </span>
<span class="-5364349812674498093" onmouseenter="enter('-5364349812674498093');" onmouseout="out('-5364349812674498093');" style=""> 278                     + COLUMN_END_MS + &quot; integer, &quot;                                                       </span>
<span class="-7132632786302548490" onmouseenter="enter('-7132632786302548490');" onmouseout="out('-7132632786302548490');" style=""> 279                     + COLUMN_BACKOFF_MS + &quot; integer, &quot;                                                   </span>
<span class="4762111779826726958" onmouseenter="enter('4762111779826726958');" onmouseout="out('4762111779826726958');" style=""> 280                     + COLUMN_BACKOFF_POLICY + &quot; text not null, &quot;                                         </span>
<span class="4669779888273516908" onmouseenter="enter('4669779888273516908');" onmouseout="out('4669779888273516908');" style=""> 281                     + COLUMN_INTERVAL_MS + &quot; integer, &quot;                                                  </span>
<span class="-3125139090443019626" onmouseenter="enter('-3125139090443019626');" onmouseout="out('-3125139090443019626');" style=""> 282                     + COLUMN_REQUIREMENTS_ENFORCED + &quot; integer, &quot;                                        </span>
<span class="-1367002426959120339" onmouseenter="enter('-1367002426959120339');" onmouseout="out('-1367002426959120339');" style=""> 283                     + COLUMN_REQUIRES_CHARGING + &quot; integer, &quot;                                            </span>
<span class="-3938853039857233915" onmouseenter="enter('-3938853039857233915');" onmouseout="out('-3938853039857233915');" style=""> 284                     + COLUMN_REQUIRES_DEVICE_IDLE + &quot; integer, &quot;                                         </span>
<span class="-3292000544210815605" onmouseenter="enter('-3292000544210815605');" onmouseout="out('-3292000544210815605');" style=""> 285                     + COLUMN_EXACT + &quot; integer, &quot;                                                        </span>
<span class="8220633810262687545" onmouseenter="enter('8220633810262687545');" onmouseout="out('8220633810262687545');" style=""> 286                     + COLUMN_NETWORK_TYPE + &quot; text not null, &quot;                                           </span>
<span class="7299149189216502480" onmouseenter="enter('7299149189216502480');" onmouseout="out('7299149189216502480');" style=""> 287                     + COLUMN_EXTRAS + &quot; text, &quot;                                                          </span>
<span class="5670009809470630955" onmouseenter="enter('5670009809470630955');" onmouseout="out('5670009809470630955');" style=""> 288                     + COLUMN_PERSISTED + &quot; integer, &quot;                                                    </span>
<span class="-8795908226760187903" onmouseenter="enter('-8795908226760187903');" onmouseout="out('-8795908226760187903');" style=""> 289                     + COLUMN_TAG + &quot; text, &quot;                                                             </span>
<span class="-1764581784183854170" onmouseenter="enter('-1764581784183854170');" onmouseout="out('-1764581784183854170');" style=""> 290                     + COLUMN_NUM_FAILURES + &quot; integer, &quot;                                                 </span>
<span class="6921224975730885774" onmouseenter="enter('6921224975730885774');" onmouseout="out('6921224975730885774');" style=""> 291                     + COLUMN_SCHEDULED_AT + &quot; integer);&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294 }                                                                                                        </span>























</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2  * Copyright 2007-present Evernote Corporation.                                                          </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3  * All rights reserved.                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4  *                                                                                                       </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5  * Redistribution and use in source and binary forms, with or without modification,                      </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6  * are permitted provided that the following conditions are met:                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8  * 1. Redistributions of source code must retain the above copyright notice, this                        </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9  *    list of conditions and the following disclaimer.                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10  *                                                                                                       </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11  * 2. Redistributions in binary form must reproduce the above copyright notice,                          </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12  *    this list of conditions and the following disclaimer in the documentation                          </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13  *    and/or other materials provided with the distribution.                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14  *                                                                                                       </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                       </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                         </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                    </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18  * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                       </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19  * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                        </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20  * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                         </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                       </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22  * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                       </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23  * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                             </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25  */                                                                                                      </span>
<span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">  26 package com.evernote.android.job;                                                                        </span>
<span  style="">  27                                                                                                          </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  28 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  29 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  30 import android.content.SharedPreferences;                                                                </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31 import android.database.Cursor;                                                                          </span>
<span class="-4895155655276492102" onmouseenter="enter('-4895155655276492102');" onmouseout="out('-4895155655276492102');" style="">  32 import android.database.sqlite.SQLiteDatabase;                                                           </span>
<span class="6401548559697116088" onmouseenter="enter('6401548559697116088');" onmouseout="out('6401548559697116088');" style="">  33 import android.database.sqlite.SQLiteOpenHelper;                                                         </span>
<span class="-6511846620915513808" onmouseenter="enter('-6511846620915513808');" onmouseout="out('-6511846620915513808');" style="">  34 import android.support.v4.util.LruCache;                                                                 </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  35 import android.text.TextUtils;                                                                           </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  36 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  37 import java.util.HashSet;                                                                                </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  38 import java.util.Set;                                                                                    </span>
<span class="7979168040994256185" onmouseenter="enter('7979168040994256185');" onmouseout="out('7979168040994256185');" style="">  39 import java.util.concurrent.atomic.AtomicInteger;                                                        </span>
<span class="4243044458105674462" onmouseenter="enter('4243044458105674462');" onmouseout="out('4243044458105674462');" style="">  40 import net.vrallev.android.cat.Cat;                                                                      </span>
<span  style="">  41                                                                                                          </span>
<span  style="">  42                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  43 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  44  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  45  */                                                                                                      </span>
<span class="-2942343485984948817" onmouseenter="enter('-2942343485984948817');" onmouseout="out('-2942343485984948817');" style="">  46 /*package*/                                                                                              </span>
<span class="-1180613505970528132" onmouseenter="enter('-1180613505970528132');" onmouseout="out('-1180613505970528132');" style="">  47 class JobStorage {                                                                                       </span>
<span class="6445768488793837686" onmouseenter="enter('6445768488793837686');" onmouseout="out('6445768488793837686');" style="">  48 //    private static final String JOB_PREFIX = &quot;JOB_&quot;;                                                   </span>
<span class="-1242333540026493261" onmouseenter="enter('-1242333540026493261');" onmouseout="out('-1242333540026493261');" style="">  49     private static final String JOB_ID_COUNTER = &quot;JOB_ID_COUNTER&quot;;                                       </span>
<span  style="">  50                                                                                                          </span>
<span class="-2404437319045033907" onmouseenter="enter('-2404437319045033907');" onmouseout="out('-2404437319045033907');" style="">  51     private static final String DATABASE_NAME = &quot;evernote_jobs.db&quot;;                                      </span>
<span  style="">  52                                                                                                          </span>
<span class="2067958763664816761" onmouseenter="enter('2067958763664816761');" onmouseout="out('2067958763664816761');" style="">  53     private static final int DATABASE_VERSION = 1;                                                       </span>
<span  style="">  54                                                                                                          </span>
<span class="-5399509471511451626" onmouseenter="enter('-5399509471511451626');" onmouseout="out('-5399509471511451626');" style="">  55     private static final String JOB_TABLE_NAME = &quot;jobs&quot;;                                                 </span>
<span  style="">  56                                                                                                          </span>
<span class="-1759376660035483434" onmouseenter="enter('-1759376660035483434');" onmouseout="out('-1759376660035483434');" style="">  57     public static final String COLUMN_ID = &quot;_id&quot;;                                                        </span>
<span  style="">  58                                                                                                          </span>
<span class="3597490173733283683" onmouseenter="enter('3597490173733283683');" onmouseout="out('3597490173733283683');" style="">  59     public static final String COLUMN_JOB_CLASS = &quot;jobClass&quot;;                                            </span>
<span  style="">  60                                                                                                          </span>
<span class="4468655879274334807" onmouseenter="enter('4468655879274334807');" onmouseout="out('4468655879274334807');" style="">  61     public static final String COLUMN_START_MS = &quot;startMs&quot;;                                              </span>
<span  style="">  62                                                                                                          </span>
<span class="-5673904740377188220" onmouseenter="enter('-5673904740377188220');" onmouseout="out('-5673904740377188220');" style="">  63     public static final String COLUMN_END_MS = &quot;endMs&quot;;                                                  </span>
<span  style="">  64                                                                                                          </span>
<span class="-1492098974017591423" onmouseenter="enter('-1492098974017591423');" onmouseout="out('-1492098974017591423');" style="">  65     public static final String COLUMN_BACKOFF_MS = &quot;backoffMs&quot;;                                          </span>
<span  style="">  66                                                                                                          </span>
<span class="-683457830040574026" onmouseenter="enter('-683457830040574026');" onmouseout="out('-683457830040574026');" style="">  67     public static final String COLUMN_BACKOFF_POLICY = &quot;backoffPolicy&quot;;                                  </span>
<span  style="">  68                                                                                                          </span>
<span class="-7649031159462118953" onmouseenter="enter('-7649031159462118953');" onmouseout="out('-7649031159462118953');" style="">  69     public static final String COLUMN_INTERVAL_MS = &quot;intervalMs&quot;;                                        </span>
<span  style="">  70                                                                                                          </span>
<span class="143906295424175577" onmouseenter="enter('143906295424175577');" onmouseout="out('143906295424175577');" style="">  71     public static final String COLUMN_REQUIREMENTS_ENFORCED = &quot;requirementsEnforced&quot;;                    </span>
<span  style="">  72                                                                                                          </span>
<span class="-3866353576373364156" onmouseenter="enter('-3866353576373364156');" onmouseout="out('-3866353576373364156');" style="">  73     public static final String COLUMN_REQUIRES_CHARGING = &quot;requiresCharging&quot;;                            </span>
<span  style="">  74                                                                                                          </span>
<span class="-1601961836663142182" onmouseenter="enter('-1601961836663142182');" onmouseout="out('-1601961836663142182');" style="">  75     public static final String COLUMN_REQUIRES_DEVICE_IDLE = &quot;requiresDeviceIdle&quot;;                       </span>
<span  style="">  76                                                                                                          </span>
<span class="9057126814159260470" onmouseenter="enter('9057126814159260470');" onmouseout="out('9057126814159260470');" style="">  77     public static final String COLUMN_EXACT = &quot;exact&quot;;                                                   </span>
<span  style="">  78                                                                                                          </span>
<span class="310345969049098767" onmouseenter="enter('310345969049098767');" onmouseout="out('310345969049098767');" style="">  79     public static final String COLUMN_NETWORK_TYPE = &quot;networkType&quot;;                                      </span>
<span  style="">  80                                                                                                          </span>
<span class="8020094400088613017" onmouseenter="enter('8020094400088613017');" onmouseout="out('8020094400088613017');" style="">  81     public static final String COLUMN_EXTRAS = &quot;extras&quot;;                                                 </span>
<span  style="">  82                                                                                                          </span>
<span class="-879071955685156427" onmouseenter="enter('-879071955685156427');" onmouseout="out('-879071955685156427');" style="">  83     public static final String COLUMN_PERSISTED = &quot;persisted&quot;;                                           </span>
<span  style="">  84                                                                                                          </span>
<span class="1902859056228658670" onmouseenter="enter('1902859056228658670');" onmouseout="out('1902859056228658670');" style="">  85     public static final String COLUMN_TAG = &quot;tag&quot;;                                                       </span>
<span  style="">  86                                                                                                          </span>
<span class="-8842903817632804453" onmouseenter="enter('-8842903817632804453');" onmouseout="out('-8842903817632804453');" style="">  87     public static final String COLUMN_NUM_FAILURES = &quot;numFailures&quot;;                                      </span>
<span  style="">  88                                                                                                          </span>
<span class="-8362973766446349582" onmouseenter="enter('-8362973766446349582');" onmouseout="out('-8362973766446349582');" style="">  89     public static final String COLUMN_SCHEDULED_AT = &quot;scheduledAt&quot;;                                      </span>
<span  style="">  90                                                                                                          </span>
<span class="-8062993232150312165" onmouseenter="enter('-8062993232150312165');" onmouseout="out('-8062993232150312165');" style="">  91     private static final int CACHE_SIZE = 30;                                                            </span>
<span  style="">  92                                                                                                          </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style="">  93     private final SharedPreferences mPreferences;                                                        </span>
<span  style="">  94                                                                                                          </span>
<span class="-4319133248076690683" onmouseenter="enter('-4319133248076690683');" onmouseout="out('-4319133248076690683');" style="">  95     private final JobCacheId mCacheId;                                                                   </span>
<span  style="">  96                                                                                                          </span>
<span class="3751969856940227107" onmouseenter="enter('3751969856940227107');" onmouseout="out('3751969856940227107');" style="">  97     private final JobCacheTag mCacheTag;                                                                 </span>
<span  style="">  98                                                                                                          </span>
<span class="-4130249909794563722" onmouseenter="enter('-4130249909794563722');" onmouseout="out('-4130249909794563722');" style="">  99     private final AtomicInteger mJobCounter;                                                             </span>
<span  style=""> 100                                                                                                          </span>
<span class="-7383609803766380518" onmouseenter="enter('-7383609803766380518');" onmouseout="out('-7383609803766380518');" style=""> 101     private final JobOpenHelper mDbHelper;                                                               </span>
<span  style=""> 102                                                                                                          </span>
<span class="-6901841785529440864" onmouseenter="enter('-6901841785529440864');" onmouseout="out('-6901841785529440864');" style=""> 103     public JobStorage(Context context) {                                                                 </span>
<span class="-257526100994775420" onmouseenter="enter('-257526100994775420');" onmouseout="out('-257526100994775420');" style=""> 104         mPreferences = context.getSharedPreferences(&quot;evernote_job&quot;, Context.MODE_PRIVATE);               </span>
<span class="5028324480541749399" onmouseenter="enter('5028324480541749399');" onmouseout="out('5028324480541749399');" style=""> 105         mCacheId = new JobCacheId();                                                                     </span>
<span class="-1965667947955503131" onmouseenter="enter('-1965667947955503131');" onmouseout="out('-1965667947955503131');" style=""> 106         mCacheTag = new JobCacheTag();                                                                   </span>
<span class="1868886056084908408" onmouseenter="enter('1868886056084908408');" onmouseout="out('1868886056084908408');" style=""> 107         int lastJobId = mPreferences.getInt(JOB_ID_COUNTER, 0);                                          </span>
<span class="8574020799141328620" onmouseenter="enter('8574020799141328620');" onmouseout="out('8574020799141328620');" style=""> 108         mJobCounter = new AtomicInteger(lastJobId);                                                      </span>
<span class="-780394151461569843" onmouseenter="enter('-780394151461569843');" onmouseout="out('-780394151461569843');" style=""> 109         mDbHelper = new JobOpenHelper(context);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110     }                                                                                                    </span>
<span  style=""> 111                                                                                                          </span>
<span class="8622057339592262934" onmouseenter="enter('8622057339592262934');" onmouseout="out('8622057339592262934');" style=""> 112     public synchronized void put(final JobRequest request) {                                             </span>
<span class="5064508639268778646" onmouseenter="enter('5064508639268778646');" onmouseout="out('5064508639268778646');" style=""> 113         mCacheId.put(request.getJobId(), request);                                                       </span>
<span class="4192202267986539162" onmouseenter="enter('4192202267986539162');" onmouseout="out('4192202267986539162');" style=""> 114         if (!TextUtils.isEmpty(request.getTag())) {                                                      </span>
<span class="-2472804154502248551" onmouseenter="enter('-2472804154502248551');" onmouseout="out('-2472804154502248551');" style=""> 115             mCacheTag.put(request.getTag(), request);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116         }                                                                                                </span>
<span class="1672760253298014137" onmouseenter="enter('1672760253298014137');" onmouseout="out('1672760253298014137');" style=""> 117         // don&#x27;t write to db async, there could be a race condition with remove()                        </span>
<span class="7947937779793695546" onmouseenter="enter('7947937779793695546');" onmouseout="out('7947937779793695546');" style=""> 118         store(request);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119     }                                                                                                    </span>
<span  style=""> 120                                                                                                          </span>
<span class="-8835593735168951075" onmouseenter="enter('-8835593735168951075');" onmouseout="out('-8835593735168951075');" style=""> 121     public synchronized JobRequest get(int id) {                                                         </span>
<span class="3329873509059044743" onmouseenter="enter('3329873509059044743');" onmouseout="out('3329873509059044743');" style=""> 122         return mCacheId.get(id);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span  style=""> 124                                                                                                          </span>
<span class="-2271259438128895323" onmouseenter="enter('-2271259438128895323');" onmouseout="out('-2271259438128895323');" style=""> 125     public synchronized JobRequest get(String tag) {                                                     </span>
<span class="-224931834240297160" onmouseenter="enter('-224931834240297160');" onmouseout="out('-224931834240297160');" style=""> 126         if (tag == null) {                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 127             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128         }                                                                                                </span>
<span class="-89182060539390137" onmouseenter="enter('-89182060539390137');" onmouseout="out('-89182060539390137');" style=""> 129         return mCacheTag.get(tag);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130     }                                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="4244028909570904870" onmouseenter="enter('4244028909570904870');" onmouseout="out('4244028909570904870');" style=""> 132     public synchronized Set&lt;JobRequest&gt; getAllJobRequests() {                                            </span>
<span class="-8266267592135482605" onmouseenter="enter('-8266267592135482605');" onmouseout="out('-8266267592135482605');" style=""> 133         Set&lt;JobRequest&gt; result = new HashSet&lt;&gt;();                                                        </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 134         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 135         try {                                                                                            </span>
<span class="-9120769441559770659" onmouseenter="enter('-9120769441559770659');" onmouseout="out('-9120769441559770659');" style=""><abbr title=" 136             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, null, null, null, null, null);"> 136             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, null, null, null, null, 🔵</abbr></span>
<span class="-2779278377908702985" onmouseenter="enter('-2779278377908702985');" onmouseout="out('-2779278377908702985');" style=""> 137             HashMap&lt;Integer, JobRequest&gt; cachedRequests = new HashMap&lt;&gt;(mCacheId.snapshot());            </span>
<span class="-679463407698125917" onmouseenter="enter('-679463407698125917');" onmouseout="out('-679463407698125917');" style=""> 138             while (cursor.moveToNext()) {                                                                </span>
<span class="-331315885090654358" onmouseenter="enter('-331315885090654358');" onmouseout="out('-331315885090654358');" style=""> 139                 // check in cache first, can avoid creating many JobRequest objects                      </span>
<span class="-9174136834543185817" onmouseenter="enter('-9174136834543185817');" onmouseout="out('-9174136834543185817');" style=""> 140                 Integer id = cursor.getInt(cursor.getColumnIndex(COLUMN_ID));                            </span>
<span class="-7704376132827994341" onmouseenter="enter('-7704376132827994341');" onmouseout="out('-7704376132827994341');" style=""> 141                 if (cachedRequests.containsKey(id)) {                                                    </span>
<span class="-3822909803951375099" onmouseenter="enter('-3822909803951375099');" onmouseout="out('-3822909803951375099');" style=""> 142                     result.add(cachedRequests.get(id));                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 143                 } else {                                                                                 </span>
<span class="7106644231457724197" onmouseenter="enter('7106644231457724197');" onmouseout="out('7106644231457724197');" style=""> 144                     result.add(JobRequest.fromCursor(cursor));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 147         } catch (java.lang.Exception e) {                                                                </span>
<span class="6774912481548166065" onmouseenter="enter('6774912481548166065');" onmouseout="out('6774912481548166065');" style=""> 148             Cat.e(e, &quot;could not load all jobs&quot;);                                                         </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 149         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 150             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 151                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 154         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span  style=""> 156                                                                                                          </span>
<span class="5652182208073858825" onmouseenter="enter('5652182208073858825');" onmouseout="out('5652182208073858825');" style=""> 157     public synchronized void remove(JobRequest request) {                                                </span>
<span class="-5323816020648746122" onmouseenter="enter('-5323816020648746122');" onmouseout="out('-5323816020648746122');" style=""> 158         mCacheId.remove(request.getJobId());                                                             </span>
<span class="4192202267986539162" onmouseenter="enter('4192202267986539162');" onmouseout="out('4192202267986539162');" style=""> 159         if (!TextUtils.isEmpty(request.getTag())) {                                                      </span>
<span class="6743408358044924404" onmouseenter="enter('6743408358044924404');" onmouseout="out('6743408358044924404');" style=""> 160             mCacheTag.remove(request.getTag());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 162         try {                                                                                            </span>
<span class="2497157767776242369" onmouseenter="enter('2497157767776242369');" onmouseout="out('2497157767776242369');" style=""><abbr title=" 163             mDbHelper.getWritableDatabase().delete(JOB_TABLE_NAME, COLUMN_ID + &quot;=?&quot;, new String[]{ String.valueOf(request.getJobId()) });"> 163             mDbHelper.getWritableDatabase().delete(JOB_TABLE_NAME, COLUMN_ID + &quot;=?&quot;, new String[]{ String🔵</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 164         } catch (java.lang.Exception e) {                                                                </span>
<span class="-7987828881968633301" onmouseenter="enter('-7987828881968633301');" onmouseout="out('-7987828881968633301');" style=""> 165             Cat.e(e, &quot;could not delete %s&quot;, request);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167     }                                                                                                    </span>
<span  style=""> 168                                                                                                          </span>
<span class="-8892394876302147604" onmouseenter="enter('-8892394876302147604');" onmouseout="out('-8892394876302147604');" style=""> 169     public synchronized int nextJobId() {                                                                </span>
<span class="-4783381865201420552" onmouseenter="enter('-4783381865201420552');" onmouseout="out('-4783381865201420552');" style=""> 170         int id = mJobCounter.incrementAndGet();                                                          </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style=""> 171         mPreferences.edit()                                                                              </span>
<span class="972554661020621443" onmouseenter="enter('972554661020621443');" onmouseout="out('972554661020621443');" style=""> 172                 .putInt(JOB_ID_COUNTER, id)                                                              </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style=""> 173                 .apply();                                                                                </span>
<span  style=""> 174                                                                                                          </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style=""> 175         return id;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176     }                                                                                                    </span>
<span  style=""> 177                                                                                                          </span>
<span class="4741349929970482340" onmouseenter="enter('4741349929970482340');" onmouseout="out('4741349929970482340');" style=""> 178     private void store(JobRequest request) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 179         try {                                                                                            </span>
<span class="-1281717114327075896" onmouseenter="enter('-1281717114327075896');" onmouseout="out('-1281717114327075896');" style=""> 180             ContentValues contentValues = request.toContentValues();                                     </span>
<span class="660199020920529486" onmouseenter="enter('660199020920529486');" onmouseout="out('660199020920529486');" style=""> 181             mDbHelper.getWritableDatabase().insert(JOB_TABLE_NAME, null, contentValues);                 </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 182         } catch (java.lang.Exception e) {                                                                </span>
<span class="115819201546370216" onmouseenter="enter('115819201546370216');" onmouseout="out('115819201546370216');" style=""> 183             Cat.e(e, &quot;could not store %s&quot;, request);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185     }                                                                                                    </span>
<span  style=""> 186                                                                                                          </span>
<span class="-8103511703570812908" onmouseenter="enter('-8103511703570812908');" onmouseout="out('-8103511703570812908');" style=""> 187     private JobRequest load(int id) {                                                                    </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 188         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 189         try {                                                                                            </span>
<span class="-4725523020734142540" onmouseenter="enter('-4725523020734142540');" onmouseout="out('-4725523020734142540');" style=""><abbr title=" 190             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_ID + &quot;=?&quot;, new String[]{ String.valueOf(id) }, null, null, null);"> 190             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_ID + &quot;=?&quot;, new St🔵</abbr></span>
<span class="-53798844527343136" onmouseenter="enter('-53798844527343136');" onmouseout="out('-53798844527343136');" style=""> 191             if (cursor.moveToFirst()) {                                                                  </span>
<span class="-8206107135999304765" onmouseenter="enter('-8206107135999304765');" onmouseout="out('-8206107135999304765');" style=""> 192                 return JobRequest.fromCursor(cursor);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 194         } catch (java.lang.Exception e) {                                                                </span>
<span class="-5714404982779275146" onmouseenter="enter('-5714404982779275146');" onmouseout="out('-5714404982779275146');" style=""> 195             Cat.e(e, &quot;could not load id %d&quot;, id);                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 196         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 197             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 198                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 201         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span class="7094325100624458637" onmouseenter="enter('7094325100624458637');" onmouseout="out('7094325100624458637');" style=""> 204     private JobRequest load(String tag) {                                                                </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 205         Cursor cursor = null;                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 206         try {                                                                                            </span>
<span class="-2575295758730427936" onmouseenter="enter('-2575295758730427936');" onmouseout="out('-2575295758730427936');" style=""><abbr title=" 207             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_TAG + &quot;=?&quot;, new String[]{ tag }, null, null, null);"> 207             cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_TAG + &quot;=?&quot;, new S🔵</abbr></span>
<span class="-53798844527343136" onmouseenter="enter('-53798844527343136');" onmouseout="out('-53798844527343136');" style=""> 208             if (cursor.moveToFirst()) {                                                                  </span>
<span class="-8206107135999304765" onmouseenter="enter('-8206107135999304765');" onmouseout="out('-8206107135999304765');" style=""> 209                 return JobRequest.fromCursor(cursor);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 211         } catch (java.lang.Exception e) {                                                                </span>
<span class="-670199027022586622" onmouseenter="enter('-670199027022586622');" onmouseout="out('-670199027022586622');" style=""> 212             Cat.e(e, &quot;could not load tag %s&quot;, tag);                                                      </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 213         } finally {                                                                                      </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 214             if (cursor != null) {                                                                        </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 215                 cursor.close();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 218         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219     }                                                                                                    </span>
<span  style=""> 220                                                                                                          </span>
<span class="-4912025387074114010" onmouseenter="enter('-4912025387074114010');" onmouseout="out('-4912025387074114010');" style=""> 221     private class JobCacheId extends LruCache&lt;Integer, JobRequest&gt; {                                     </span>
<span class="-2792745723866924862" onmouseenter="enter('-2792745723866924862');" onmouseout="out('-2792745723866924862');" style=""> 222         public JobCacheId() {                                                                            </span>
<span class="-515578410459927816" onmouseenter="enter('-515578410459927816');" onmouseout="out('-515578410459927816');" style=""> 223             super(CACHE_SIZE);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224         }                                                                                                </span>
<span  style=""> 225                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 226         @Override                                                                                        </span>
<span class="8921052769370679097" onmouseenter="enter('8921052769370679097');" onmouseout="out('8921052769370679097');" style=""> 227         protected JobRequest create(Integer id) {                                                        </span>
<span class="-758168943084140428" onmouseenter="enter('-758168943084140428');" onmouseout="out('-758168943084140428');" style=""> 228             return load(id);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="-2744672973563477566" onmouseenter="enter('-2744672973563477566');" onmouseout="out('-2744672973563477566');" style=""> 232     private class JobCacheTag extends LruCache&lt;String, JobRequest&gt; {                                     </span>
<span class="-3290223855465926070" onmouseenter="enter('-3290223855465926070');" onmouseout="out('-3290223855465926070');" style=""> 233         public JobCacheTag() {                                                                           </span>
<span class="-515578410459927816" onmouseenter="enter('-515578410459927816');" onmouseout="out('-515578410459927816');" style=""> 234             super(CACHE_SIZE);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235         }                                                                                                </span>
<span  style=""> 236                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 237         @Override                                                                                        </span>
<span class="-3909371011677707726" onmouseenter="enter('-3909371011677707726');" onmouseout="out('-3909371011677707726');" style=""> 238         protected JobRequest create(String tag) {                                                        </span>
<span class="9186716556005996177" onmouseenter="enter('9186716556005996177');" onmouseout="out('9186716556005996177');" style=""> 239             return load(tag);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241     }                                                                                                    </span>
<span  style=""> 242                                                                                                          </span>
<span class="-5836601040700834558" onmouseenter="enter('-5836601040700834558');" onmouseout="out('-5836601040700834558');" style=""> 243     private class JobOpenHelper extends SQLiteOpenHelper {                                               </span>
<span class="8311173037771286811" onmouseenter="enter('8311173037771286811');" onmouseout="out('8311173037771286811');" style=""> 244         public JobOpenHelper(Context context) {                                                          </span>
<span class="-3457119901623063168" onmouseenter="enter('-3457119901623063168');" onmouseout="out('-3457119901623063168');" style=""> 245             super(context, DATABASE_NAME, null, DATABASE_VERSION);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246         }                                                                                                </span>
<span  style=""> 247                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 248         @Override                                                                                        </span>
<span class="3201464308903999877" onmouseenter="enter('3201464308903999877');" onmouseout="out('3201464308903999877');" style=""> 249         public void onCreate(SQLiteDatabase db) {                                                        </span>
<span class="3675678860195979182" onmouseenter="enter('3675678860195979182');" onmouseout="out('3675678860195979182');" style=""> 250             createJobTable(db);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251         }                                                                                                </span>
<span  style=""> 252                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 253         @Override                                                                                        </span>
<span class="-4655538025867202729" onmouseenter="enter('-4655538025867202729');" onmouseout="out('-4655538025867202729');" style=""> 254         public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                       </span>
<span class="1273999693274717344" onmouseenter="enter('1273999693274717344');" onmouseout="out('1273999693274717344');" style=""> 255             // not needed at the moment                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span  style=""> 257                                                                                                          </span>
<span class="6188770209634244529" onmouseenter="enter('6188770209634244529');" onmouseout="out('6188770209634244529');" style=""> 258         private void createJobTable(SQLiteDatabase db) {                                                 </span>
<span class="-7341601850168300895" onmouseenter="enter('-7341601850168300895');" onmouseout="out('-7341601850168300895');" style=""><abbr title=" 259             db.execSQL((((((((((((((((((((((((((((((((((((&quot;create table &quot; + JOB_TABLE_NAME) + &quot; (&quot;) + COLUMN_ID) + &quot; integer primary key, &quot;) + COLUMN_JOB_CLASS) + &quot; text not null, &quot;) + COLUMN_START_MS) + &quot; integer, &quot;) + COLUMN_END_MS) + &quot; integer, &quot;) + COLUMN_BACKOFF_MS) + &quot; integer, &quot;) + COLUMN_BACKOFF_POLICY) + &quot; text not null, &quot;) + COLUMN_INTERVAL_MS) + &quot; integer, &quot;) + COLUMN_REQUIREMENTS_ENFORCED) + &quot; integer, &quot;) + COLUMN_REQUIRES_CHARGING) + &quot; integer, &quot;) + COLUMN_REQUIRES_DEVICE_IDLE) + &quot; integer, &quot;) + COLUMN_EXACT) + &quot; integer, &quot;) + COLUMN_NETWORK_TYPE) + &quot; text not null, &quot;) + COLUMN_EXTRAS) + &quot; text, &quot;) + COLUMN_PERSISTED) + &quot; integer, &quot;) + COLUMN_TAG) + &quot; text, &quot;) + COLUMN_NUM_FAILURES) + &quot; integer, &quot;) + COLUMN_SCHEDULED_AT) + &quot; integer);&quot;);"> 259             db.execSQL((((((((((((((((((((((((((((((((((((&quot;create table &quot; + JOB_TABLE_NAME) + &quot; (&quot;) + COL🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262 }                                                                                                        </span>























































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2   * Copyright 2007-present Evernote Corporation.                                                                   </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3   * All rights reserved.                                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4   *                                                                                                                </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5   * Redistribution and use in source and binary forms, with or without modification,                               </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6   * are permitted provided that the following conditions are met:                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8   * 1. Redistributions of source code must retain the above copyright notice, this                                 </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9   *    list of conditions and the following disclaimer.                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10   *                                                                                                                </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11   * 2. Redistributions in binary form must reproduce the above copyright notice,                                   </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12   *    this list of conditions and the following disclaimer in the documentation                                   </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13   *    and/or other materials provided with the distribution.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14   *                                                                                                                </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                                </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                                  </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                             </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18   * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                                </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19   * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                                 </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20   * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                                  </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21   * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                                </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                                </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23   * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                                      </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24   * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25   */                                                                                                               </span>
<span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">  26  package com.evernote.android.job;                                                                                 </span>
<span  style="">  27                                                                                                                    </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import android.content.ContentValues;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  29  import android.content.Context;                                                                                   </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  30  import android.content.SharedPreferences;                                                                         </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  31 +import android.database.Cursor;                                                                                   </span>
<span class="-4895155655276492102" onmouseenter="enter('-4895155655276492102');" onmouseout="out('-4895155655276492102');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +import android.database.sqlite.SQLiteDatabase;                                                                    </span>
<span class="6401548559697116088" onmouseenter="enter('6401548559697116088');" onmouseout="out('6401548559697116088');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import android.database.sqlite.SQLiteOpenHelper;                                                                  </span>
<span class="-6511846620915513808" onmouseenter="enter('-6511846620915513808');" onmouseout="out('-6511846620915513808');" style="">  34  import android.support.v4.util.LruCache;                                                                          </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  35  import android.text.TextUtils;                                                                                    </span>
<span  style="">  36                                                                                                                    </span>
<span class="4243044458105674462" onmouseenter="enter('4243044458105674462');" onmouseout="out('4243044458105674462');" style="">  37  import net.vrallev.android.cat.Cat;                                                                               </span>
<span  style="">  38                                                                                                                    </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  39 +import java.util.HashMap;                                                                                         </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  40  import java.util.HashSet;                                                                                         </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  41  import java.util.Set;                                                                                             </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  42 -import java.util.concurrent.ExecutorService;                                                                      </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  43 -import java.util.concurrent.Executors;                                                                            </span>
<span class="7979168040994256185" onmouseenter="enter('7979168040994256185');" onmouseout="out('7979168040994256185');" style="">  44  import java.util.concurrent.atomic.AtomicInteger;                                                                 </span>
<span  style="">  45                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  46  /**                                                                                                               </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  47   * @author rwondratschek                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  48   */                                                                                                               </span>
<span class="8868092628535486643" onmouseenter="enter('8868092628535486643');" onmouseout="out('8868092628535486643');" style="">  49  /*package*/ class JobStorage {                                                                                    </span>
<span  style="">  50                                                                                                                    </span>
<span class="-110655684192644391" onmouseenter="enter('-110655684192644391');" onmouseout="out('-110655684192644391');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  51 -    private static final String JOB_PREFIX = &quot;JOB_&quot;;                                                              </span>
<span class="6445768488793837686" onmouseenter="enter('6445768488793837686');" onmouseout="out('6445768488793837686');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  52 +//    private static final String JOB_PREFIX = &quot;JOB_&quot;;                                                            </span>
<span class="-1242333540026493261" onmouseenter="enter('-1242333540026493261');" onmouseout="out('-1242333540026493261');" style="">  53      private static final String JOB_ID_COUNTER = &quot;JOB_ID_COUNTER&quot;;                                                </span>
<span  style="">  54                                                                                                                    </span>
<span class="-2404437319045033907" onmouseenter="enter('-2404437319045033907');" onmouseout="out('-2404437319045033907');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 +    private static final String DATABASE_NAME = &quot;evernote_jobs.db&quot;;                                               </span>
<span class="2067958763664816761" onmouseenter="enter('2067958763664816761');" onmouseout="out('2067958763664816761');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +    private static final int DATABASE_VERSION = 1;                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 +                                                                                                                  </span>
<span class="-5399509471511451626" onmouseenter="enter('-5399509471511451626');" onmouseout="out('-5399509471511451626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +    private static final String JOB_TABLE_NAME = &quot;jobs&quot;;                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +                                                                                                                  </span>
<span class="-1759376660035483434" onmouseenter="enter('-1759376660035483434');" onmouseout="out('-1759376660035483434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +    public static final String COLUMN_ID = &quot;_id&quot;;                                                                 </span>
<span class="3597490173733283683" onmouseenter="enter('3597490173733283683');" onmouseout="out('3597490173733283683');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +    public static final String COLUMN_JOB_CLASS = &quot;jobClass&quot;;                                                     </span>
<span class="4468655879274334807" onmouseenter="enter('4468655879274334807');" onmouseout="out('4468655879274334807');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  62 +    public static final String COLUMN_START_MS = &quot;startMs&quot;;                                                       </span>
<span class="-5673904740377188220" onmouseenter="enter('-5673904740377188220');" onmouseout="out('-5673904740377188220');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +    public static final String COLUMN_END_MS = &quot;endMs&quot;;                                                           </span>
<span class="-1492098974017591423" onmouseenter="enter('-1492098974017591423');" onmouseout="out('-1492098974017591423');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +    public static final String COLUMN_BACKOFF_MS = &quot;backoffMs&quot;;                                                   </span>
<span class="-683457830040574026" onmouseenter="enter('-683457830040574026');" onmouseout="out('-683457830040574026');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +    public static final String COLUMN_BACKOFF_POLICY = &quot;backoffPolicy&quot;;                                           </span>
<span class="-7649031159462118953" onmouseenter="enter('-7649031159462118953');" onmouseout="out('-7649031159462118953');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  66 +    public static final String COLUMN_INTERVAL_MS = &quot;intervalMs&quot;;                                                 </span>
<span class="143906295424175577" onmouseenter="enter('143906295424175577');" onmouseout="out('143906295424175577');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  67 +    public static final String COLUMN_REQUIREMENTS_ENFORCED = &quot;requirementsEnforced&quot;;                             </span>
<span class="-3866353576373364156" onmouseenter="enter('-3866353576373364156');" onmouseout="out('-3866353576373364156');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  68 +    public static final String COLUMN_REQUIRES_CHARGING = &quot;requiresCharging&quot;;                                     </span>
<span class="-1601961836663142182" onmouseenter="enter('-1601961836663142182');" onmouseout="out('-1601961836663142182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  69 +    public static final String COLUMN_REQUIRES_DEVICE_IDLE = &quot;requiresDeviceIdle&quot;;                                </span>
<span class="9057126814159260470" onmouseenter="enter('9057126814159260470');" onmouseout="out('9057126814159260470');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  70 +    public static final String COLUMN_EXACT = &quot;exact&quot;;                                                            </span>
<span class="310345969049098767" onmouseenter="enter('310345969049098767');" onmouseout="out('310345969049098767');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +    public static final String COLUMN_NETWORK_TYPE = &quot;networkType&quot;;                                               </span>
<span class="8020094400088613017" onmouseenter="enter('8020094400088613017');" onmouseout="out('8020094400088613017');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +    public static final String COLUMN_EXTRAS = &quot;extras&quot;;                                                          </span>
<span class="-879071955685156427" onmouseenter="enter('-879071955685156427');" onmouseout="out('-879071955685156427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  73 +    public static final String COLUMN_PERSISTED = &quot;persisted&quot;;                                                    </span>
<span class="1902859056228658670" onmouseenter="enter('1902859056228658670');" onmouseout="out('1902859056228658670');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +    public static final String COLUMN_TAG = &quot;tag&quot;;                                                                </span>
<span class="-8842903817632804453" onmouseenter="enter('-8842903817632804453');" onmouseout="out('-8842903817632804453');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  75 +    public static final String COLUMN_NUM_FAILURES = &quot;numFailures&quot;;                                               </span>
<span class="-8362973766446349582" onmouseenter="enter('-8362973766446349582');" onmouseout="out('-8362973766446349582');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  76 +    public static final String COLUMN_SCHEDULED_AT = &quot;scheduledAt&quot;;                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  77 +                                                                                                                  </span>
<span class="-8062993232150312165" onmouseenter="enter('-8062993232150312165');" onmouseout="out('-8062993232150312165');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  78 +    private static final int CACHE_SIZE = 30;                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  79 +                                                                                                                  </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style="">  80      private final SharedPreferences mPreferences;                                                                 </span>
<span class="3341310363687391236" onmouseenter="enter('3341310363687391236');" onmouseout="out('3341310363687391236');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  81 -    private final LruCache&lt;Integer, JobRequest&gt; mCache;                                                           </span>
<span class="7359818073840972103" onmouseenter="enter('7359818073840972103');" onmouseout="out('7359818073840972103');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  82 -    private final ExecutorService mExecutorService;                                                               </span>
<span class="-4319133248076690683" onmouseenter="enter('-4319133248076690683');" onmouseout="out('-4319133248076690683');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  83 +    private final JobCacheId mCacheId;                                                                            </span>
<span class="3751969856940227107" onmouseenter="enter('3751969856940227107');" onmouseout="out('3751969856940227107');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  84 +    private final JobCacheTag mCacheTag;                                                                          </span>
<span  style="">  85                                                                                                                    </span>
<span class="-4130249909794563722" onmouseenter="enter('-4130249909794563722');" onmouseout="out('-4130249909794563722');" style="">  86      private final AtomicInteger mJobCounter;                                                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  87 +                                                                                                                  </span>
<span class="-7383609803766380518" onmouseenter="enter('-7383609803766380518');" onmouseout="out('-7383609803766380518');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  88 +    private final JobOpenHelper mDbHelper;                                                                        </span>
<span  style="">  89                                                                                                                    </span>
<span class="-6901841785529440864" onmouseenter="enter('-6901841785529440864');" onmouseout="out('-6901841785529440864');" style="">  90      public JobStorage(Context context) {                                                                          </span>
<span class="9206888390182365614" onmouseenter="enter('9206888390182365614');" onmouseout="out('9206888390182365614');" style="">  91          mPreferences = context.getSharedPreferences(&quot;jobs&quot;, Context.MODE_PRIVATE);                                </span>

<span class="-8512772465831485969" onmouseenter="enter('-8512772465831485969');" onmouseout="out('-8512772465831485969');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  92 -        mExecutorService = Executors.newSingleThreadExecutor();                                                   </span>
<span class="814059290270517609" onmouseenter="enter('814059290270517609');" onmouseout="out('814059290270517609');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  93 -        mCache = new JobCache();                                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  94 +                                                                                                                  </span>
<span class="5028324480541749399" onmouseenter="enter('5028324480541749399');" onmouseout="out('5028324480541749399');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  95 +        mCacheId = new JobCacheId();                                                                              </span>
<span class="-1965667947955503131" onmouseenter="enter('-1965667947955503131');" onmouseout="out('-1965667947955503131');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  96 +        mCacheTag = new JobCacheTag();                                                                            </span>
<span  style="">  97                                                                                                                    </span>
<span class="1868886056084908408" onmouseenter="enter('1868886056084908408');" onmouseout="out('1868886056084908408');" style="">  98          int lastJobId = mPreferences.getInt(JOB_ID_COUNTER, 0);                                                   </span>
<span class="8574020799141328620" onmouseenter="enter('8574020799141328620');" onmouseout="out('8574020799141328620');" style="">  99          mJobCounter = new AtomicInteger(lastJobId);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 100 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 101 -                                                                                                                  </span>
<span class="8976285599487292611" onmouseenter="enter('8976285599487292611');" onmouseout="out('8976285599487292611');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 102 -    public synchronized void put(final JobRequest jobRequest) {                                                   </span>
<span class="-6065992154165699346" onmouseenter="enter('-6065992154165699346');" onmouseout="out('-6065992154165699346');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 103 -        mCache.put(jobRequest.getJobId(), jobRequest);                                                            </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 104 -                                                                                                                  </span>
<span class="7817991954699926509" onmouseenter="enter('7817991954699926509');" onmouseout="out('7817991954699926509');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 105 -        mExecutorService.execute(new Runnable() {                                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 106 -            @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 107 -            public void run() {                                                                                   </span>
<span class="-4000533986031844527" onmouseenter="enter('-4000533986031844527');" onmouseout="out('-4000533986031844527');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 108 -                store(jobRequest);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 109 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 110 -        });                                                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +                                                                                                                  </span>
<span class="-780394151461569843" onmouseenter="enter('-780394151461569843');" onmouseout="out('-780394151461569843');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 112 +        mDbHelper = new JobOpenHelper(context);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 113 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 114 +                                                                                                                  </span>
<span class="8622057339592262934" onmouseenter="enter('8622057339592262934');" onmouseout="out('8622057339592262934');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 115 +    public synchronized void put(final JobRequest request) {                                                      </span>
<span class="5064508639268778646" onmouseenter="enter('5064508639268778646');" onmouseout="out('5064508639268778646');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +        mCacheId.put(request.getJobId(), request);                                                                </span>
<span class="4192202267986539162" onmouseenter="enter('4192202267986539162');" onmouseout="out('4192202267986539162');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +        if (!TextUtils.isEmpty(request.getTag())) {                                                               </span>
<span class="-2472804154502248551" onmouseenter="enter('-2472804154502248551');" onmouseout="out('-2472804154502248551');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +            mCacheTag.put(request.getTag(), request);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 119 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +                                                                                                                  </span>
<span class="1672760253298014137" onmouseenter="enter('1672760253298014137');" onmouseout="out('1672760253298014137');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 121 +        // don&#x27;t write to db async, there could be a race condition with remove()                                 </span>
<span class="7947937779793695546" onmouseenter="enter('7947937779793695546');" onmouseout="out('7947937779793695546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 122 +        store(request);                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123      }                                                                                                             </span>
<span  style=""> 124                                                                                                                    </span>
<span class="-8835593735168951075" onmouseenter="enter('-8835593735168951075');" onmouseout="out('-8835593735168951075');" style=""> 125      public synchronized JobRequest get(int id) {                                                                  </span>
<span class="2510370242963879052" onmouseenter="enter('2510370242963879052');" onmouseout="out('2510370242963879052');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 126 -        return mCache.get(id);                                                                                    </span>
<span class="3329873509059044743" onmouseenter="enter('3329873509059044743');" onmouseout="out('3329873509059044743');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 127 +        return mCacheId.get(id);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128      }                                                                                                             </span>
<span  style=""> 129                                                                                                                    </span>
<span class="-2271259438128895323" onmouseenter="enter('-2271259438128895323');" onmouseout="out('-2271259438128895323');" style=""> 130      public synchronized JobRequest get(String tag) {                                                              </span>
<span class="-224931834240297160" onmouseenter="enter('-224931834240297160');" onmouseout="out('-224931834240297160');" style=""> 131          if (tag == null) {                                                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 132              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133          }                                                                                                         </span>
<span class="-7803330303435917076" onmouseenter="enter('-7803330303435917076');" onmouseout="out('-7803330303435917076');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 134 -        for (String key : mPreferences.getAll().keySet()) {                                                       </span>
<span class="977056783444622754" onmouseenter="enter('977056783444622754');" onmouseout="out('977056783444622754');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 135 -            JobRequest request = getRequestForKey(key);                                                           </span>
<span class="2197682470350913360" onmouseenter="enter('2197682470350913360');" onmouseout="out('2197682470350913360');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 136 -            if (request != null &amp;&amp; tag.equals(request.getTag())) {                                                </span>
<span class="-1057636993633179522" onmouseenter="enter('-1057636993633179522');" onmouseout="out('-1057636993633179522');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 137 -                return request;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 138 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 139 -        }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 140 -        return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 141 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 142 -                                                                                                                  </span>
<span class="-7476344112365916101" onmouseenter="enter('-7476344112365916101');" onmouseout="out('-7476344112365916101');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 143 -    public synchronized Set&lt;JobRequest&gt; getAllJobs() {                                                            </span>
<span class="-89182060539390137" onmouseenter="enter('-89182060539390137');" onmouseout="out('-89182060539390137');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 144 +        return mCacheTag.get(tag);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 145 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 146 +                                                                                                                  </span>
<span class="4244028909570904870" onmouseenter="enter('4244028909570904870');" onmouseout="out('4244028909570904870');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 147 +    public synchronized Set&lt;JobRequest&gt; getAllJobRequests() {                                                     </span>
<span class="-8266267592135482605" onmouseenter="enter('-8266267592135482605');" onmouseout="out('-8266267592135482605');" style=""> 148          Set&lt;JobRequest&gt; result = new HashSet&lt;&gt;();                                                                 </span>
<span class="-7803330303435917076" onmouseenter="enter('-7803330303435917076');" onmouseout="out('-7803330303435917076');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 149 -        for (String key : mPreferences.getAll().keySet()) {                                                       </span>
<span class="977056783444622754" onmouseenter="enter('977056783444622754');" onmouseout="out('977056783444622754');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 150 -            JobRequest request = getRequestForKey(key);                                                           </span>
<span class="-5752363771942989481" onmouseenter="enter('-5752363771942989481');" onmouseout="out('-5752363771942989481');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 151 -            if (request != null) {                                                                                </span>
<span class="6144056474942350844" onmouseenter="enter('6144056474942350844');" onmouseout="out('6144056474942350844');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 152 -                result.add(request);                                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 153 +                                                                                                                  </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 154 +        Cursor cursor = null;                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 155 +        try {                                                                                                     </span>
<span class="-9120769441559770659" onmouseenter="enter('-9120769441559770659');" onmouseout="out('-9120769441559770659');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 156 +            cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, null, null, null, null, null);   </span>
<span class="-2779278377908702985" onmouseenter="enter('-2779278377908702985');" onmouseout="out('-2779278377908702985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 157 +            HashMap&lt;Integer, JobRequest&gt; cachedRequests = new HashMap&lt;&gt;(mCacheId.snapshot());                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 158 +                                                                                                                  </span>
<span class="-679463407698125917" onmouseenter="enter('-679463407698125917');" onmouseout="out('-679463407698125917');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 159 +            while (cursor.moveToNext()) {                                                                         </span>
<span class="-331315885090654358" onmouseenter="enter('-331315885090654358');" onmouseout="out('-331315885090654358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +                // check in cache first, can avoid creating many JobRequest objects                               </span>
<span class="-9174136834543185817" onmouseenter="enter('-9174136834543185817');" onmouseout="out('-9174136834543185817');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 161 +                Integer id = cursor.getInt(cursor.getColumnIndex(COLUMN_ID));                                     </span>
<span class="-7704376132827994341" onmouseenter="enter('-7704376132827994341');" onmouseout="out('-7704376132827994341');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 162 +                if (cachedRequests.containsKey(id)) {                                                             </span>
<span class="-3822909803951375099" onmouseenter="enter('-3822909803951375099');" onmouseout="out('-3822909803951375099');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 163 +                    result.add(cachedRequests.get(id));                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 164 +                } else {                                                                                          </span>
<span class="7106644231457724197" onmouseenter="enter('7106644231457724197');" onmouseout="out('7106644231457724197');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 165 +                    result.add(JobRequest.fromCursor(cursor));                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +            }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +        } catch (Exception e) {                                                                                   </span>
<span class="6774912481548166065" onmouseenter="enter('6774912481548166065');" onmouseout="out('6774912481548166065');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +            Cat.e(e, &quot;could not load all jobs&quot;);                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 170 +                                                                                                                  </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 171 +        } finally {                                                                                               </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +            if (cursor != null) {                                                                                 </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +                cursor.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175          }                                                                                                         </span>
<span  style=""> 176                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 177          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178      }                                                                                                             </span>
<span  style=""> 179                                                                                                                    </span>
<span class="3244587326159854742" onmouseenter="enter('3244587326159854742');" onmouseout="out('3244587326159854742');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 180 -    public synchronized void remove(int jobId) {                                                                  </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 181 -        mPreferences.edit()                                                                                       </span>
<span class="-8761082639462665614" onmouseenter="enter('-8761082639462665614');" onmouseout="out('-8761082639462665614');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 182 -                .remove(createJobKey(jobId))                                                                      </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 183 -                .apply();                                                                                         </span>
<span class="8665071578101105579" onmouseenter="enter('8665071578101105579');" onmouseout="out('8665071578101105579');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 184 -        mCache.remove(jobId);                                                                                     </span>
<span class="5652182208073858825" onmouseenter="enter('5652182208073858825');" onmouseout="out('5652182208073858825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +    public synchronized void remove(JobRequest request) {                                                         </span>
<span class="-5323816020648746122" onmouseenter="enter('-5323816020648746122');" onmouseout="out('-5323816020648746122');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 186 +        mCacheId.remove(request.getJobId());                                                                      </span>
<span class="4192202267986539162" onmouseenter="enter('4192202267986539162');" onmouseout="out('4192202267986539162');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 187 +        if (!TextUtils.isEmpty(request.getTag())) {                                                               </span>
<span class="6743408358044924404" onmouseenter="enter('6743408358044924404');" onmouseout="out('6743408358044924404');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 188 +            mCacheTag.remove(request.getTag());                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +        }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 190 +        try {                                                                                                     </span>
<span class="9209794934098200522" onmouseenter="enter('9209794934098200522');" onmouseout="out('9209794934098200522');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 191 +            mDbHelper.getWritableDatabase().delete(JOB_TABLE_NAME, COLUMN_ID + &quot;=?&quot;, new String[]{String.valueOf(request.getJobId())});"> 191 +            mDbHelper.getWritableDatabase().delete(JOB_TABLE_NAME, COLUMN_ID + &quot;=?&quot;, new String[]{String.valueOf(r🔵</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 192 +        } catch (Exception e) {                                                                                   </span>
<span class="-7987828881968633301" onmouseenter="enter('-7987828881968633301');" onmouseout="out('-7987828881968633301');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 193 +            Cat.e(e, &quot;could not delete %s&quot;, request);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 194 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195      }                                                                                                             </span>
<span  style=""> 196                                                                                                                    </span>
<span class="-8892394876302147604" onmouseenter="enter('-8892394876302147604');" onmouseout="out('-8892394876302147604');" style=""> 197      public synchronized int nextJobId() {                                                                         </span>
<span class="-4783381865201420552" onmouseenter="enter('-4783381865201420552');" onmouseout="out('-4783381865201420552');" style=""> 198          int id = mJobCounter.incrementAndGet();                                                                   </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style=""> 199          mPreferences.edit()                                                                                       </span>
<span class="972554661020621443" onmouseenter="enter('972554661020621443');" onmouseout="out('972554661020621443');" style=""> 200                  .putInt(JOB_ID_COUNTER, id)                                                                       </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style=""> 201                  .apply();                                                                                         </span>
<span  style=""> 202                                                                                                                    </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style=""> 203          return id;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204      }                                                                                                             </span>
<span  style=""> 205                                                                                                                    </span>
<span class="4741349929970482340" onmouseenter="enter('4741349929970482340');" onmouseout="out('4741349929970482340');" style=""> 206      private void store(JobRequest request) {                                                                      </span>
<span class="-4159927221124000272" onmouseenter="enter('-4159927221124000272');" onmouseout="out('-4159927221124000272');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 207 -        String xml = request.saveToXml();                                                                         </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 208 -        mPreferences.edit()                                                                                       </span>
<span class="-1202155055628377933" onmouseenter="enter('-1202155055628377933');" onmouseout="out('-1202155055628377933');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 209 -                .putString(createJobKey(request), xml)                                                            </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 210 -                .apply();                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 211 +        try {                                                                                                     </span>
<span class="-1281717114327075896" onmouseenter="enter('-1281717114327075896');" onmouseout="out('-1281717114327075896');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 212 +            ContentValues contentValues = request.toContentValues();                                              </span>
<span class="660199020920529486" onmouseenter="enter('660199020920529486');" onmouseout="out('660199020920529486');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 213 +            mDbHelper.getWritableDatabase().insert(JOB_TABLE_NAME, null, contentValues);                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 214 +        } catch (Exception e) {                                                                                   </span>
<span class="115819201546370216" onmouseenter="enter('115819201546370216');" onmouseout="out('115819201546370216');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 215 +            Cat.e(e, &quot;could not store %s&quot;, request);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217      }                                                                                                             </span>
<span  style=""> 218                                                                                                                    </span>
<span class="-8103511703570812908" onmouseenter="enter('-8103511703570812908');" onmouseout="out('-8103511703570812908');" style=""> 219      private JobRequest load(int id) {                                                                             </span>
<span class="-2533882188997530545" onmouseenter="enter('-2533882188997530545');" onmouseout="out('-2533882188997530545');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 220 -        String xml = mPreferences.getString(createJobKey(id), null);                                              </span>
<span class="6401959568277589229" onmouseenter="enter('6401959568277589229');" onmouseout="out('6401959568277589229');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 221 -        if (TextUtils.isEmpty(xml)) {                                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 222 -            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 223 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 224 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 225 -        try {                                                                                                     </span>
<span class="8790905503556753246" onmouseenter="enter('8790905503556753246');" onmouseout="out('8790905503556753246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 226 -            return JobRequest.fromXml(xml);                                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 227 -        } catch (Exception e) {                                                                                   </span>
<span class="-2852830954374869177" onmouseenter="enter('-2852830954374869177');" onmouseout="out('-2852830954374869177');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 228 -            Cat.e(e);                                                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 229 -            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 230 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 231 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 232 -                                                                                                                  </span>
<span class="-4212067706307989771" onmouseenter="enter('-4212067706307989771');" onmouseout="out('-4212067706307989771');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 233 -    private String createJobKey(JobRequest jobRequest) {                                                          </span>
<span class="-5093436778038215859" onmouseenter="enter('-5093436778038215859');" onmouseout="out('-5093436778038215859');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 234 -        return createJobKey(jobRequest.getJobId());                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 235 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 236 -                                                                                                                  </span>
<span class="3234455855408127307" onmouseenter="enter('3234455855408127307');" onmouseout="out('3234455855408127307');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 237 -    private String createJobKey(int id) {                                                                         </span>
<span class="6424068819107674249" onmouseenter="enter('6424068819107674249');" onmouseout="out('6424068819107674249');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 238 -        return JOB_PREFIX + id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 239 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 240 -                                                                                                                  </span>
<span class="-913631068246544114" onmouseenter="enter('-913631068246544114');" onmouseout="out('-913631068246544114');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 241 -    private boolean isJobId(String key) {                                                                         </span>
<span class="4590708146232944149" onmouseenter="enter('4590708146232944149');" onmouseout="out('4590708146232944149');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 242 -        return key.startsWith(JOB_PREFIX);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 243 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 244 -                                                                                                                  </span>
<span class="4752633245791705971" onmouseenter="enter('4752633245791705971');" onmouseout="out('4752633245791705971');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 245 -    private int getIdFromKey(String key) {                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 246 -        try {                                                                                                     </span>
<span class="488879673411638823" onmouseenter="enter('488879673411638823');" onmouseout="out('488879673411638823');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 247 -            return Integer.parseInt(key.substring(JOB_PREFIX.length()));                                          </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 248 -        } catch (NumberFormatException e) {                                                                       </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 249 -            return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 250 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 251 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 252 -                                                                                                                  </span>
<span class="501555898103577785" onmouseenter="enter('501555898103577785');" onmouseout="out('501555898103577785');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 253 -    private JobRequest getRequestForKey(String key) {                                                             </span>
<span class="-4152966462225724186" onmouseenter="enter('-4152966462225724186');" onmouseout="out('-4152966462225724186');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 254 -        if (isJobId(key)) {                                                                                       </span>
<span class="-6272956111508283179" onmouseenter="enter('-6272956111508283179');" onmouseout="out('-6272956111508283179');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 255 -            int id = getIdFromKey(key);                                                                           </span>
<span class="-4442856715461355842" onmouseenter="enter('-4442856715461355842');" onmouseout="out('-4442856715461355842');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 256 -            if (id &gt; 0) {                                                                                         </span>
<span class="2510370242963879052" onmouseenter="enter('2510370242963879052');" onmouseout="out('2510370242963879052');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 257 -                return mCache.get(id);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 258 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 259 -        }                                                                                                         </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 260 +        Cursor cursor = null;                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 261 +        try {                                                                                                     </span>
<span class="7268950886903415553" onmouseenter="enter('7268950886903415553');" onmouseout="out('7268950886903415553');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 262 +            cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_ID + &quot;=?&quot;, new String[]{String.valueOf(id)}, null, null, null);"> 262 +            cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_ID + &quot;=?&quot;, new String[]{St🔵</abbr></span>
<span class="-53798844527343136" onmouseenter="enter('-53798844527343136');" onmouseout="out('-53798844527343136');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 263 +            if (cursor.moveToFirst()) {                                                                           </span>
<span class="-8206107135999304765" onmouseenter="enter('-8206107135999304765');" onmouseout="out('-8206107135999304765');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 264 +                return JobRequest.fromCursor(cursor);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 265 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +                                                                                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +        } catch (Exception e) {                                                                                   </span>
<span class="-5714404982779275146" onmouseenter="enter('-5714404982779275146');" onmouseout="out('-5714404982779275146');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +            Cat.e(e, &quot;could not load id %d&quot;, id);                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 269 +                                                                                                                  </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 270 +        } finally {                                                                                               </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 271 +            if (cursor != null) {                                                                                 </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 272 +                cursor.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 273 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 274 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 275 +                                                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 276          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277      }                                                                                                             </span>
<span  style=""> 278                                                                                                                    </span>
<span class="7751206737436459867" onmouseenter="enter('7751206737436459867');" onmouseout="out('7751206737436459867');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 279 -    private class JobCache extends LruCache&lt;Integer, JobRequest&gt; {                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 280 -                                                                                                                  </span>
<span class="3501407454302668067" onmouseenter="enter('3501407454302668067');" onmouseout="out('3501407454302668067');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 281 -        public JobCache() {                                                                                       </span>
<span class="-7654760709346759609" onmouseenter="enter('-7654760709346759609');" onmouseout="out('-7654760709346759609');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 282 -            super(20);                                                                                            </span>
<span class="7094325100624458637" onmouseenter="enter('7094325100624458637');" onmouseout="out('7094325100624458637');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 283 +    private JobRequest load(String tag) {                                                                         </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 284 +        Cursor cursor = null;                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 285 +        try {                                                                                                     </span>
<span class="6168106995354082245" onmouseenter="enter('6168106995354082245');" onmouseout="out('6168106995354082245');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 286 +            cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_TAG + &quot;=?&quot;, new String[]{tag}, null, null, null);"> 286 +            cursor = mDbHelper.getWritableDatabase().query(JOB_TABLE_NAME, null, COLUMN_TAG + &quot;=?&quot;, new String[]{t🔵</abbr></span>
<span class="-53798844527343136" onmouseenter="enter('-53798844527343136');" onmouseout="out('-53798844527343136');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 287 +            if (cursor.moveToFirst()) {                                                                           </span>
<span class="-8206107135999304765" onmouseenter="enter('-8206107135999304765');" onmouseout="out('-8206107135999304765');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 288 +                return JobRequest.fromCursor(cursor);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 289 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 290 +                                                                                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 291 +        } catch (Exception e) {                                                                                   </span>
<span class="-670199027022586622" onmouseenter="enter('-670199027022586622');" onmouseout="out('-670199027022586622');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 292 +            Cat.e(e, &quot;could not load tag %s&quot;, tag);                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 293 +                                                                                                                  </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 294 +        } finally {                                                                                               </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 295 +            if (cursor != null) {                                                                                 </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 296 +                cursor.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 297 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 298 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 299 +                                                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 300 +        return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 301 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 302 +                                                                                                                  </span>
<span class="-4912025387074114010" onmouseenter="enter('-4912025387074114010');" onmouseout="out('-4912025387074114010');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 303 +    private class JobCacheId extends LruCache&lt;Integer, JobRequest&gt; {                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 304 +                                                                                                                  </span>
<span class="-2792745723866924862" onmouseenter="enter('-2792745723866924862');" onmouseout="out('-2792745723866924862');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 305 +        public JobCacheId() {                                                                                     </span>
<span class="-515578410459927816" onmouseenter="enter('-515578410459927816');" onmouseout="out('-515578410459927816');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 306 +            super(CACHE_SIZE);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307          }                                                                                                         </span>
<span  style=""> 308                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 309          @Override                                                                                                 </span>
<span class="8921052769370679097" onmouseenter="enter('8921052769370679097');" onmouseout="out('8921052769370679097');" style=""> 310          protected JobRequest create(Integer id) {                                                                 </span>
<span class="-758168943084140428" onmouseenter="enter('-758168943084140428');" onmouseout="out('-758168943084140428');" style=""> 311              return load(id);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313      }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 314 +                                                                                                                  </span>
<span class="-2744672973563477566" onmouseenter="enter('-2744672973563477566');" onmouseout="out('-2744672973563477566');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 315 +    private class JobCacheTag extends LruCache&lt;String, JobRequest&gt; {                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 316 +                                                                                                                  </span>
<span class="-3290223855465926070" onmouseenter="enter('-3290223855465926070');" onmouseout="out('-3290223855465926070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 317 +        public JobCacheTag() {                                                                                    </span>
<span class="-515578410459927816" onmouseenter="enter('-515578410459927816');" onmouseout="out('-515578410459927816');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 318 +            super(CACHE_SIZE);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 319 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 320 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 321 +        @Override                                                                                                 </span>
<span class="-3909371011677707726" onmouseenter="enter('-3909371011677707726');" onmouseout="out('-3909371011677707726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 322 +        protected JobRequest create(String tag) {                                                                 </span>
<span class="9186716556005996177" onmouseenter="enter('9186716556005996177');" onmouseout="out('9186716556005996177');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 323 +            return load(tag);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 324 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 326 +                                                                                                                  </span>
<span class="-5836601040700834558" onmouseenter="enter('-5836601040700834558');" onmouseout="out('-5836601040700834558');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 327 +    private class JobOpenHelper extends SQLiteOpenHelper {                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 328 +                                                                                                                  </span>
<span class="8311173037771286811" onmouseenter="enter('8311173037771286811');" onmouseout="out('8311173037771286811');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 329 +        public JobOpenHelper(Context context) {                                                                   </span>
<span class="-3457119901623063168" onmouseenter="enter('-3457119901623063168');" onmouseout="out('-3457119901623063168');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 330 +            super(context, DATABASE_NAME, null, DATABASE_VERSION);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 331 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 332 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 333 +        @Override                                                                                                 </span>
<span class="3201464308903999877" onmouseenter="enter('3201464308903999877');" onmouseout="out('3201464308903999877');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 334 +        public void onCreate(SQLiteDatabase db) {                                                                 </span>
<span class="3675678860195979182" onmouseenter="enter('3675678860195979182');" onmouseout="out('3675678860195979182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 335 +            createJobTable(db);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 336 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 337 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 338 +        @Override                                                                                                 </span>
<span class="-4655538025867202729" onmouseenter="enter('-4655538025867202729');" onmouseout="out('-4655538025867202729');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 339 +        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                                </span>
<span class="1273999693274717344" onmouseenter="enter('1273999693274717344');" onmouseout="out('1273999693274717344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 340 +            // not needed at the moment                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 341 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 342 +                                                                                                                  </span>
<span class="6188770209634244529" onmouseenter="enter('6188770209634244529');" onmouseout="out('6188770209634244529');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 343 +        private void createJobTable(SQLiteDatabase db) {                                                          </span>
<span class="-782343613149443026" onmouseenter="enter('-782343613149443026');" onmouseout="out('-782343613149443026');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 344 +            db.execSQL(&quot;create table &quot; + JOB_TABLE_NAME + &quot; (&quot;                                                    </span>
<span class="1619651023227296595" onmouseenter="enter('1619651023227296595');" onmouseout="out('1619651023227296595');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 345 +                    + COLUMN_ID + &quot; integer primary key, &quot;                                                        </span>
<span class="8476783174800253271" onmouseenter="enter('8476783174800253271');" onmouseout="out('8476783174800253271');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 346 +                    + COLUMN_JOB_CLASS + &quot; text not null, &quot;                                                       </span>
<span class="1650473216663039799" onmouseenter="enter('1650473216663039799');" onmouseout="out('1650473216663039799');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 347 +                    + COLUMN_START_MS + &quot; integer, &quot;                                                              </span>
<span class="-5364349812674498093" onmouseenter="enter('-5364349812674498093');" onmouseout="out('-5364349812674498093');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 348 +                    + COLUMN_END_MS + &quot; integer, &quot;                                                                </span>
<span class="-7132632786302548490" onmouseenter="enter('-7132632786302548490');" onmouseout="out('-7132632786302548490');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 349 +                    + COLUMN_BACKOFF_MS + &quot; integer, &quot;                                                            </span>
<span class="4762111779826726958" onmouseenter="enter('4762111779826726958');" onmouseout="out('4762111779826726958');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 350 +                    + COLUMN_BACKOFF_POLICY + &quot; text not null, &quot;                                                  </span>
<span class="4669779888273516908" onmouseenter="enter('4669779888273516908');" onmouseout="out('4669779888273516908');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 351 +                    + COLUMN_INTERVAL_MS + &quot; integer, &quot;                                                           </span>
<span class="-3125139090443019626" onmouseenter="enter('-3125139090443019626');" onmouseout="out('-3125139090443019626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 352 +                    + COLUMN_REQUIREMENTS_ENFORCED + &quot; integer, &quot;                                                 </span>
<span class="-1367002426959120339" onmouseenter="enter('-1367002426959120339');" onmouseout="out('-1367002426959120339');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 353 +                    + COLUMN_REQUIRES_CHARGING + &quot; integer, &quot;                                                     </span>
<span class="-3938853039857233915" onmouseenter="enter('-3938853039857233915');" onmouseout="out('-3938853039857233915');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 354 +                    + COLUMN_REQUIRES_DEVICE_IDLE + &quot; integer, &quot;                                                  </span>
<span class="-3292000544210815605" onmouseenter="enter('-3292000544210815605');" onmouseout="out('-3292000544210815605');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 355 +                    + COLUMN_EXACT + &quot; integer, &quot;                                                                 </span>
<span class="8220633810262687545" onmouseenter="enter('8220633810262687545');" onmouseout="out('8220633810262687545');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 356 +                    + COLUMN_NETWORK_TYPE + &quot; text not null, &quot;                                                    </span>
<span class="7299149189216502480" onmouseenter="enter('7299149189216502480');" onmouseout="out('7299149189216502480');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 357 +                    + COLUMN_EXTRAS + &quot; text, &quot;                                                                   </span>
<span class="5670009809470630955" onmouseenter="enter('5670009809470630955');" onmouseout="out('5670009809470630955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 358 +                    + COLUMN_PERSISTED + &quot; integer, &quot;                                                             </span>
<span class="-8795908226760187903" onmouseenter="enter('-8795908226760187903');" onmouseout="out('-8795908226760187903');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 359 +                    + COLUMN_TAG + &quot; text, &quot;                                                                      </span>
<span class="-1764581784183854170" onmouseenter="enter('-1764581784183854170');" onmouseout="out('-1764581784183854170');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 360 +                    + COLUMN_NUM_FAILURES + &quot; integer, &quot;                                                          </span>
<span class="6921224975730885774" onmouseenter="enter('6921224975730885774');" onmouseout="out('6921224975730885774');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 361 +                    + COLUMN_SCHEDULED_AT + &quot; integer);&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 363 +    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="-8822900351790619766" onmouseenter="enter('-8822900351790619766');" onmouseout="out('-8822900351790619766');" style="">   2   * Copyright 2007-present Evernote Corporation.                                                                   </span>
<span class="-2278367542838177584" onmouseenter="enter('-2278367542838177584');" onmouseout="out('-2278367542838177584');" style="">   3   * All rights reserved.                                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   4   *                                                                                                                </span>
<span class="181301442133285836" onmouseenter="enter('181301442133285836');" onmouseout="out('181301442133285836');" style="">   5   * Redistribution and use in source and binary forms, with or without modification,                               </span>
<span class="-5073197948967426970" onmouseenter="enter('-5073197948967426970');" onmouseout="out('-5073197948967426970');" style="">   6   * are permitted provided that the following conditions are met:                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="8127251449117563942" onmouseenter="enter('8127251449117563942');" onmouseout="out('8127251449117563942');" style="">   8   * 1. Redistributions of source code must retain the above copyright notice, this                                 </span>
<span class="-1473911044945790828" onmouseenter="enter('-1473911044945790828');" onmouseout="out('-1473911044945790828');" style="">   9   *    list of conditions and the following disclaimer.                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  10   *                                                                                                                </span>
<span class="4835137028529553232" onmouseenter="enter('4835137028529553232');" onmouseout="out('4835137028529553232');" style="">  11   * 2. Redistributions in binary form must reproduce the above copyright notice,                                   </span>
<span class="-1312443230807442131" onmouseenter="enter('-1312443230807442131');" onmouseout="out('-1312443230807442131');" style="">  12   *    this list of conditions and the following disclaimer in the documentation                                   </span>
<span class="-2067912076149043179" onmouseenter="enter('-2067912076149043179');" onmouseout="out('-2067912076149043179');" style="">  13   *    and/or other materials provided with the distribution.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  14   *                                                                                                                </span>
<span class="-7721941782677048447" onmouseenter="enter('-7721941782677048447');" onmouseout="out('-7721941782677048447');" style="">  15   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND                                </span>
<span class="-5124048439450882348" onmouseenter="enter('-5124048439450882348');" onmouseout="out('-5124048439450882348');" style="">  16   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                                  </span>
<span class="2277289959795125050" onmouseenter="enter('2277289959795125050');" onmouseout="out('2277289959795125050');" style="">  17   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.                             </span>
<span class="4422846307625339339" onmouseenter="enter('4422846307625339339');" onmouseout="out('4422846307625339339');" style="">  18   * IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,                                </span>
<span class="9023453646714579255" onmouseenter="enter('9023453646714579255');" onmouseout="out('9023453646714579255');" style="">  19   * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,                                 </span>
<span class="2153827234735713132" onmouseenter="enter('2153827234735713132');" onmouseout="out('2153827234735713132');" style="">  20   * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,                                  </span>
<span class="5782830561991082866" onmouseenter="enter('5782830561991082866');" onmouseout="out('5782830561991082866');" style="">  21   * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF                                </span>
<span class="-2513683953102966204" onmouseenter="enter('-2513683953102966204');" onmouseout="out('-2513683953102966204');" style="">  22   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE                                </span>
<span class="-6562574984275957691" onmouseenter="enter('-6562574984275957691');" onmouseout="out('-6562574984275957691');" style="">  23   * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF                                      </span>
<span class="505998933154990042" onmouseenter="enter('505998933154990042');" onmouseout="out('505998933154990042');" style="">  24   * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  25   */                                                                                                               </span>
<span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">  26  package com.evernote.android.job;                                                                                 </span>
<span  style="">  27                                                                                                                    </span>

<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28  import android.content.Context;                                                                                   </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  29  import android.content.SharedPreferences;                                                                         </span>



<span class="-6511846620915513808" onmouseenter="enter('-6511846620915513808');" onmouseout="out('-6511846620915513808');" style="">  30  import android.support.v4.util.LruCache;                                                                          </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  31  import android.text.TextUtils;                                                                                    </span>
<span  style="">  32                                                                                                                    </span>
<span class="4243044458105674462" onmouseenter="enter('4243044458105674462');" onmouseout="out('4243044458105674462');" style="">  33  import net.vrallev.android.cat.Cat;                                                                               </span>
<span  style="">  34                                                                                                                    </span>

<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  35  import java.util.HashSet;                                                                                         </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  36  import java.util.Set;                                                                                             </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  37  import java.util.concurrent.ExecutorService;                                                                      </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  38  import java.util.concurrent.Executors;                                                                            </span>
<span class="7979168040994256185" onmouseenter="enter('7979168040994256185');" onmouseout="out('7979168040994256185');" style="">  39  import java.util.concurrent.atomic.AtomicInteger;                                                                 </span>
<span  style="">  40                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  41  /**                                                                                                               </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  42   * @author rwondratschek                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  43   */                                                                                                               </span>
<span class="8868092628535486643" onmouseenter="enter('8868092628535486643');" onmouseout="out('8868092628535486643');" style="">  44  /*package*/ class JobStorage {                                                                                    </span>
<span  style="">  45                                                                                                                    </span>
<span class="-110655684192644391" onmouseenter="enter('-110655684192644391');" onmouseout="out('-110655684192644391');" style="">  46      private static final String JOB_PREFIX = &quot;JOB_&quot;;                                                              </span>

<span class="-1242333540026493261" onmouseenter="enter('-1242333540026493261');" onmouseout="out('-1242333540026493261');" style="">  47      private static final String JOB_ID_COUNTER = &quot;JOB_ID_COUNTER&quot;;                                                </span>
<span  style="">  48                                                                                                                    </span>

























<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style="">  49      private final SharedPreferences mPreferences;                                                                 </span>
<span class="3341310363687391236" onmouseenter="enter('3341310363687391236');" onmouseout="out('3341310363687391236');" style="">  50      private final LruCache&lt;Integer, JobRequest&gt; mCache;                                                           </span>
<span class="7359818073840972103" onmouseenter="enter('7359818073840972103');" onmouseout="out('7359818073840972103');" style="">  51      private final ExecutorService mExecutorService;                                                               </span>


<span  style="">  52                                                                                                                    </span>
<span class="-4130249909794563722" onmouseenter="enter('-4130249909794563722');" onmouseout="out('-4130249909794563722');" style="">  53      private final AtomicInteger mJobCounter;                                                                      </span>


<span  style="">  54                                                                                                                    </span>
<span class="-6901841785529440864" onmouseenter="enter('-6901841785529440864');" onmouseout="out('-6901841785529440864');" style="">  55      public JobStorage(Context context) {                                                                          </span>
<span class="9206888390182365614" onmouseenter="enter('9206888390182365614');" onmouseout="out('9206888390182365614');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  56 -        mPreferences = context.getSharedPreferences(&quot;jobs&quot;, Context.MODE_PRIVATE);                                </span>
<span class="-257526100994775420" onmouseenter="enter('-257526100994775420');" onmouseout="out('-257526100994775420');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 +        mPreferences = context.getSharedPreferences(&quot;evernote_job&quot;, Context.MODE_PRIVATE);                        </span>
<span class="-8512772465831485969" onmouseenter="enter('-8512772465831485969');" onmouseout="out('-8512772465831485969');" style="">  58          mExecutorService = Executors.newSingleThreadExecutor();                                                   </span>
<span class="814059290270517609" onmouseenter="enter('814059290270517609');" onmouseout="out('814059290270517609');" style="">  59          mCache = new JobCache();                                                                                  </span>



<span  style="">  60                                                                                                                    </span>
<span class="1868886056084908408" onmouseenter="enter('1868886056084908408');" onmouseout="out('1868886056084908408');" style="">  61          int lastJobId = mPreferences.getInt(JOB_ID_COUNTER, 0);                                                   </span>
<span class="8574020799141328620" onmouseenter="enter('8574020799141328620');" onmouseout="out('8574020799141328620');" style="">  62          mJobCounter = new AtomicInteger(lastJobId);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63      }                                                                                                             </span>
<span  style="">  64                                                                                                                    </span>
<span class="8976285599487292611" onmouseenter="enter('8976285599487292611');" onmouseout="out('8976285599487292611');" style="">  65      public synchronized void put(final JobRequest jobRequest) {                                                   </span>
<span class="-6065992154165699346" onmouseenter="enter('-6065992154165699346');" onmouseout="out('-6065992154165699346');" style="">  66          mCache.put(jobRequest.getJobId(), jobRequest);                                                            </span>
<span  style="">  67                                                                                                                    </span>
<span class="7817991954699926509" onmouseenter="enter('7817991954699926509');" onmouseout="out('7817991954699926509');" style="">  68          mExecutorService.execute(new Runnable() {                                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  69              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">  70              public void run() {                                                                                   </span>
<span class="-4000533986031844527" onmouseenter="enter('-4000533986031844527');" onmouseout="out('-4000533986031844527');" style="">  71                  store(jobRequest);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  73          });                                                                                                       </span>












<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74      }                                                                                                             </span>
<span  style="">  75                                                                                                                    </span>
<span class="-8835593735168951075" onmouseenter="enter('-8835593735168951075');" onmouseout="out('-8835593735168951075');" style="">  76      public synchronized JobRequest get(int id) {                                                                  </span>
<span class="2510370242963879052" onmouseenter="enter('2510370242963879052');" onmouseout="out('2510370242963879052');" style="">  77          return mCache.get(id);                                                                                    </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78      }                                                                                                             </span>
<span  style="">  79                                                                                                                    </span>
<span class="-2271259438128895323" onmouseenter="enter('-2271259438128895323');" onmouseout="out('-2271259438128895323');" style="">  80      public synchronized JobRequest get(String tag) {                                                              </span>
<span class="-224931834240297160" onmouseenter="enter('-224931834240297160');" onmouseout="out('-224931834240297160');" style="">  81          if (tag == null) {                                                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">  82              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83          }                                                                                                         </span>
<span class="-7803330303435917076" onmouseenter="enter('-7803330303435917076');" onmouseout="out('-7803330303435917076');" style="">  84          for (String key : mPreferences.getAll().keySet()) {                                                       </span>
<span class="977056783444622754" onmouseenter="enter('977056783444622754');" onmouseout="out('977056783444622754');" style="">  85              JobRequest request = getRequestForKey(key);                                                           </span>
<span class="2197682470350913360" onmouseenter="enter('2197682470350913360');" onmouseout="out('2197682470350913360');" style="">  86              if (request != null &amp;&amp; tag.equals(request.getTag())) {                                                </span>
<span class="-1057636993633179522" onmouseenter="enter('-1057636993633179522');" onmouseout="out('-1057636993633179522');" style="">  87                  return request;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  89          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">  90          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91      }                                                                                                             </span>
<span  style="">  92                                                                                                                    </span>
<span class="-7476344112365916101" onmouseenter="enter('-7476344112365916101');" onmouseout="out('-7476344112365916101');" style="">  93      public synchronized Set&lt;JobRequest&gt; getAllJobs() {                                                            </span>




<span class="-8266267592135482605" onmouseenter="enter('-8266267592135482605');" onmouseout="out('-8266267592135482605');" style="">  94          Set&lt;JobRequest&gt; result = new HashSet&lt;&gt;();                                                                 </span>
<span class="-7803330303435917076" onmouseenter="enter('-7803330303435917076');" onmouseout="out('-7803330303435917076');" style="">  95          for (String key : mPreferences.getAll().keySet()) {                                                       </span>
<span class="977056783444622754" onmouseenter="enter('977056783444622754');" onmouseout="out('977056783444622754');" style="">  96              JobRequest request = getRequestForKey(key);                                                           </span>
<span class="-5752363771942989481" onmouseenter="enter('-5752363771942989481');" onmouseout="out('-5752363771942989481');" style="">  97              if (request != null) {                                                                                </span>
<span class="6144056474942350844" onmouseenter="enter('6144056474942350844');" onmouseout="out('6144056474942350844');" style="">  98                  result.add(request);                                                                              </span>





















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100          }                                                                                                         </span>
<span  style=""> 101                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 102          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103      }                                                                                                             </span>
<span  style=""> 104                                                                                                                    </span>
<span class="3244587326159854742" onmouseenter="enter('3244587326159854742');" onmouseout="out('3244587326159854742');" style=""> 105      public synchronized void remove(int jobId) {                                                                  </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style=""> 106          mPreferences.edit()                                                                                       </span>
<span class="-8761082639462665614" onmouseenter="enter('-8761082639462665614');" onmouseout="out('-8761082639462665614');" style=""> 107                  .remove(createJobKey(jobId))                                                                      </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style=""> 108                  .apply();                                                                                         </span>
<span class="8665071578101105579" onmouseenter="enter('8665071578101105579');" onmouseout="out('8665071578101105579');" style=""> 109          mCache.remove(jobId);                                                                                     </span>










<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110      }                                                                                                             </span>
<span  style=""> 111                                                                                                                    </span>
<span class="-8892394876302147604" onmouseenter="enter('-8892394876302147604');" onmouseout="out('-8892394876302147604');" style=""> 112      public synchronized int nextJobId() {                                                                         </span>
<span class="-4783381865201420552" onmouseenter="enter('-4783381865201420552');" onmouseout="out('-4783381865201420552');" style=""> 113          int id = mJobCounter.incrementAndGet();                                                                   </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style=""> 114          mPreferences.edit()                                                                                       </span>
<span class="972554661020621443" onmouseenter="enter('972554661020621443');" onmouseout="out('972554661020621443');" style=""> 115                  .putInt(JOB_ID_COUNTER, id)                                                                       </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style=""> 116                  .apply();                                                                                         </span>
<span  style=""> 117                                                                                                                    </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style=""> 118          return id;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119      }                                                                                                             </span>
<span  style=""> 120                                                                                                                    </span>
<span class="4741349929970482340" onmouseenter="enter('4741349929970482340');" onmouseout="out('4741349929970482340');" style=""> 121      private void store(JobRequest request) {                                                                      </span>
<span class="-4159927221124000272" onmouseenter="enter('-4159927221124000272');" onmouseout="out('-4159927221124000272');" style=""> 122          String xml = request.saveToXml();                                                                         </span>
<span class="-3469063522658885415" onmouseenter="enter('-3469063522658885415');" onmouseout="out('-3469063522658885415');" style=""> 123          mPreferences.edit()                                                                                       </span>
<span class="-1202155055628377933" onmouseenter="enter('-1202155055628377933');" onmouseout="out('-1202155055628377933');" style=""> 124                  .putString(createJobKey(request), xml)                                                            </span>
<span class="-7784856567627047031" onmouseenter="enter('-7784856567627047031');" onmouseout="out('-7784856567627047031');" style=""> 125                  .apply();                                                                                         </span>






<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126      }                                                                                                             </span>
<span  style=""> 127                                                                                                                    </span>
<span class="-8103511703570812908" onmouseenter="enter('-8103511703570812908');" onmouseout="out('-8103511703570812908');" style=""> 128      private JobRequest load(int id) {                                                                             </span>
<span class="-2533882188997530545" onmouseenter="enter('-2533882188997530545');" onmouseout="out('-2533882188997530545');" style=""> 129          String xml = mPreferences.getString(createJobKey(id), null);                                              </span>
<span class="6401959568277589229" onmouseenter="enter('6401959568277589229');" onmouseout="out('6401959568277589229');" style=""> 130          if (TextUtils.isEmpty(xml)) {                                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 131              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132          }                                                                                                         </span>
<span  style=""> 133                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 134          try {                                                                                                     </span>
<span class="8790905503556753246" onmouseenter="enter('8790905503556753246');" onmouseout="out('8790905503556753246');" style=""> 135              return JobRequest.fromXml(xml);                                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 136          } catch (Exception e) {                                                                                   </span>
<span class="-2852830954374869177" onmouseenter="enter('-2852830954374869177');" onmouseout="out('-2852830954374869177');" style=""> 137              Cat.e(e);                                                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 138              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140      }                                                                                                             </span>
<span  style=""> 141                                                                                                                    </span>
<span class="-4212067706307989771" onmouseenter="enter('-4212067706307989771');" onmouseout="out('-4212067706307989771');" style=""> 142      private String createJobKey(JobRequest jobRequest) {                                                          </span>
<span class="-5093436778038215859" onmouseenter="enter('-5093436778038215859');" onmouseout="out('-5093436778038215859');" style=""> 143          return createJobKey(jobRequest.getJobId());                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144      }                                                                                                             </span>
<span  style=""> 145                                                                                                                    </span>
<span class="3234455855408127307" onmouseenter="enter('3234455855408127307');" onmouseout="out('3234455855408127307');" style=""> 146      private String createJobKey(int id) {                                                                         </span>
<span class="6424068819107674249" onmouseenter="enter('6424068819107674249');" onmouseout="out('6424068819107674249');" style=""> 147          return JOB_PREFIX + id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148      }                                                                                                             </span>
<span  style=""> 149                                                                                                                    </span>
<span class="-913631068246544114" onmouseenter="enter('-913631068246544114');" onmouseout="out('-913631068246544114');" style=""> 150      private boolean isJobId(String key) {                                                                         </span>
<span class="4590708146232944149" onmouseenter="enter('4590708146232944149');" onmouseout="out('4590708146232944149');" style=""> 151          return key.startsWith(JOB_PREFIX);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152      }                                                                                                             </span>
<span  style=""> 153                                                                                                                    </span>
<span class="4752633245791705971" onmouseenter="enter('4752633245791705971');" onmouseout="out('4752633245791705971');" style=""> 154      private int getIdFromKey(String key) {                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 155          try {                                                                                                     </span>
<span class="488879673411638823" onmouseenter="enter('488879673411638823');" onmouseout="out('488879673411638823');" style=""> 156              return Integer.parseInt(key.substring(JOB_PREFIX.length()));                                          </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style=""> 157          } catch (NumberFormatException e) {                                                                       </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 158              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160      }                                                                                                             </span>
<span  style=""> 161                                                                                                                    </span>
<span class="501555898103577785" onmouseenter="enter('501555898103577785');" onmouseout="out('501555898103577785');" style=""> 162      private JobRequest getRequestForKey(String key) {                                                             </span>
<span class="-4152966462225724186" onmouseenter="enter('-4152966462225724186');" onmouseout="out('-4152966462225724186');" style=""> 163          if (isJobId(key)) {                                                                                       </span>
<span class="-6272956111508283179" onmouseenter="enter('-6272956111508283179');" onmouseout="out('-6272956111508283179');" style=""> 164              int id = getIdFromKey(key);                                                                           </span>
<span class="-4442856715461355842" onmouseenter="enter('-4442856715461355842');" onmouseout="out('-4442856715461355842');" style=""> 165              if (id &gt; 0) {                                                                                         </span>
<span class="2510370242963879052" onmouseenter="enter('2510370242963879052');" onmouseout="out('2510370242963879052');" style=""> 166                  return mCache.get(id);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168          }                                                                                                         </span>
















<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 169          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170      }                                                                                                             </span>
<span  style=""> 171                                                                                                                    </span>
<span class="7751206737436459867" onmouseenter="enter('7751206737436459867');" onmouseout="out('7751206737436459867');" style=""> 172      private class JobCache extends LruCache&lt;Integer, JobRequest&gt; {                                                </span>
<span  style=""> 173                                                                                                                    </span>
<span class="3501407454302668067" onmouseenter="enter('3501407454302668067');" onmouseout="out('3501407454302668067');" style=""> 174          public JobCache() {                                                                                       </span>
<span class="-7654760709346759609" onmouseenter="enter('-7654760709346759609');" onmouseout="out('-7654760709346759609');" style=""> 175              super(20);                                                                                            </span>
























<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176          }                                                                                                         </span>
<span  style=""> 177                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 178          @Override                                                                                                 </span>
<span class="8921052769370679097" onmouseenter="enter('8921052769370679097');" onmouseout="out('8921052769370679097');" style=""> 179          protected JobRequest create(Integer id) {                                                                 </span>
<span class="-758168943084140428" onmouseenter="enter('-758168943084140428');" onmouseout="out('-758168943084140428');" style=""> 180              return load(id);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182      }                                                                                                             </span>


















































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            