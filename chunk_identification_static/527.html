<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>527</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    527
                    <a href="526.html">prev</a>
                    <a href="528.html">next</a>
                    <a href="527_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Evernote/android-job_dbfe2d375b66ffaf6c97ae21824d7fa3de839d07_library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;dbfe2d375b66ffaf6c97ae21824d7fa3de839d07:library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;dbfe2d375b66ffaf6c97ae21824d7fa3de839d07^1:library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;dbfe2d375b66ffaf6c97ae21824d7fa3de839d07^2:library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;014d6630f29b986bef276d86e19d5bae9b724751:library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [j], [s]], subset: [[bj], [s]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1 package com.evernote.android.job;                                                                        </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   4 import android.content.Intent;                                                                           </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">   5 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">   6 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   7 import android.support.annotation.NonNull;                                                               </span>
<span class="-8624878422109726872" onmouseenter="enter('-8624878422109726872');" onmouseout="out('-8624878422109726872');" style="">   8 import android.test.mock.MockContext;                                                                    </span>
<span  style="">   9                                                                                                          </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">  10 import com.evernote.android.job.test.DummyJobs;                                                          </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">  11 import com.evernote.android.job.test.TestCat;                                                            </span>
<span  style="">  12                                                                                                          </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">  13 import org.junit.Rule;                                                                                   </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  14 import org.robolectric.RuntimeEnvironment;                                                               </span>
<span  style="">  15                                                                                                          </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  16 import java.util.Collections;                                                                            </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  17 import java.util.concurrent.Callable;                                                                    </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  18 import java.util.concurrent.CountDownLatch;                                                              </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  19 import java.util.concurrent.ExecutorService;                                                             </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  20 import java.util.concurrent.Executors;                                                                   </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  21 import java.util.concurrent.Future;                                                                      </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  22 import java.util.concurrent.TimeUnit;                                                                    </span>
<span  style="">  23                                                                                                          </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  24 import static org.assertj.core.api.Java6Assertions.assertThat;                                           </span>
<span class="6685720693550820735" onmouseenter="enter('6685720693550820735');" onmouseout="out('6685720693550820735');" style="">  25 import static org.mockito.ArgumentMatchers.any;                                                          </span>
<span class="7439199169262611289" onmouseenter="enter('7439199169262611289');" onmouseout="out('7439199169262611289');" style="">  26 import static org.mockito.ArgumentMatchers.anyInt;                                                       </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  27 import static org.mockito.Mockito.doReturn;                                                              </span>
<span class="1544093646286875230" onmouseenter="enter('1544093646286875230');" onmouseout="out('1544093646286875230');" style="">  28 import static org.mockito.Mockito.mock;                                                                  </span>
<span class="-1572018164586719902" onmouseenter="enter('-1572018164586719902');" onmouseout="out('-1572018164586719902');" style="">  29 import static org.mockito.Mockito.spy;                                                                   </span>
<span class="3383156691626080704" onmouseenter="enter('3383156691626080704');" onmouseout="out('3383156691626080704');" style="">  30 import static org.mockito.Mockito.when;                                                                  </span>
<span  style="">  31                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  32 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  33  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  34  */                                                                                                      </span>
<span class="-5429987873611314699" onmouseenter="enter('-5429987873611314699');" onmouseout="out('-5429987873611314699');" style="">  35 @SuppressWarnings(&quot;WeakerAccess&quot;)                                                                        </span>
<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  36 public abstract class BaseJobManagerTest {                                                               </span>
<span  style="">  37                                                                                                          </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  38     @Rule                                                                                                </span>
<span class="6818233914031150263" onmouseenter="enter('6818233914031150263');" onmouseout="out('6818233914031150263');" style="">  39     public final JobManagerRule mJobManagerRule;                                                         </span>
<span  style="">  40                                                                                                          </span>
<span class="-2672328117217234149" onmouseenter="enter('-2672328117217234149');" onmouseout="out('-2672328117217234149');" style="">  41     private final Context mContext;                                                                      </span>
<span  style="">  42                                                                                                          </span>
<span class="7538793963985398729" onmouseenter="enter('7538793963985398729');" onmouseout="out('7538793963985398729');" style="">  43     public BaseJobManagerTest() {                                                                        </span>
<span class="-6834743854759683221" onmouseenter="enter('-6834743854759683221');" onmouseout="out('-6834743854759683221');" style="">  44         // otherwise the JobScheduler isn&#x27;t supported we check if the service is enable                  </span>
<span class="7979039694195695661" onmouseenter="enter('7979039694195695661');" onmouseout="out('7979039694195695661');" style=""><abbr title="  45         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/issues/416">  45         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolðŸ”µ</abbr></span>
<span class="2188275399399506091" onmouseenter="enter('2188275399399506091');" onmouseout="out('2188275399399506091');" style="">  46         PackageManager packageManager = mock(PackageManager.class);                                      </span>
<span class="-3354401291128082818" onmouseenter="enter('-3354401291128082818');" onmouseout="out('-3354401291128082818');" style=""><abbr title="  47         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  47         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singðŸ”µ</abbr></span>
<span class="445066419246632211" onmouseenter="enter('445066419246632211');" onmouseout="out('445066419246632211');" style=""><abbr title="  48         when(packageManager.queryBroadcastReceivers(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  48         when(packageManager.queryBroadcastReceivers(any(Intent.class), anyInt())).thenReturn(Collections.ðŸ”µ</abbr></span>
<span  style="">  49                                                                                                          </span>
<span class="7917921035241516800" onmouseenter="enter('7917921035241516800');" onmouseout="out('7917921035241516800');" style="">  50         mContext = spy(RuntimeEnvironment.application);                                                  </span>
<span class="5389335310188325090" onmouseenter="enter('5389335310188325090');" onmouseout="out('5389335310188325090');" style="">  51         when(mContext.getPackageManager()).thenReturn(packageManager);                                   </span>
<span  style="">  52                                                                                                          </span>
<span class="7963257267283799916" onmouseenter="enter('7963257267283799916');" onmouseout="out('7963257267283799916');" style="">  53         Context mockContext = mock(MockContext.class);                                                   </span>
<span class="-8059429712077510619" onmouseenter="enter('-8059429712077510619');" onmouseout="out('-8059429712077510619');" style="">  54         when(mockContext.getApplicationContext()).thenReturn(mContext);                                  </span>
<span  style="">  55                                                                                                          </span>
<span class="3767643857400380832" onmouseenter="enter('3767643857400380832');" onmouseout="out('3767643857400380832');" style="">  56         mJobManagerRule = new JobManagerRule(provideJobCreator(), mockContext);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  57     }                                                                                                    </span>
<span  style="">  58                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  59     @NonNull                                                                                             </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  60     protected JobCreator provideJobCreator() {                                                           </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  61         return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62     }                                                                                                    </span>
<span  style="">  63                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  64     @NonNull                                                                                             </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  65     protected final JobManager manager() {                                                               </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  66         return mJobManagerRule.getJobManager();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67     }                                                                                                    </span>
<span  style="">  68                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  69     @NonNull                                                                                             </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style="">  70     protected final Context context() {                                                                  </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  71 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-6834743854759683221" onmouseenter="enter('-6834743854759683221');" onmouseout="out('-6834743854759683221');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  72         // otherwise the JobScheduler isn&#x27;t supported we check if the service is enable                  </span>
<span class="7979039694195695661" onmouseenter="enter('7979039694195695661');" onmouseout="out('7979039694195695661');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  73         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/issues/416">  73         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolðŸ”µ</abbr></span>
<span class="2188275399399506091" onmouseenter="enter('2188275399399506091');" onmouseout="out('2188275399399506091');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  74         PackageManager packageManager = mock(PackageManager.class);                                      </span>
<span class="-3354401291128082818" onmouseenter="enter('-3354401291128082818');" onmouseout="out('-3354401291128082818');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  75         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  75         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singðŸ”µ</abbr></span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  76                                                                                                          </span>
<span class="-5831908013052039882" onmouseenter="enter('-5831908013052039882');" onmouseout="out('-5831908013052039882');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  77         Context context = spy(RuntimeEnvironment.application);                                           </span>
<span class="-6082644043814638889" onmouseenter="enter('-6082644043814638889');" onmouseout="out('-6082644043814638889');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  78         when(context.getPackageManager()).thenReturn(packageManager);                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  79                                                                                                          </span>
<span class="5912824651964420637" onmouseenter="enter('5912824651964420637');" onmouseout="out('5912824651964420637');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  80         return context;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  81     }                                                                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  82                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  83 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84         assertThat(pendingRequest).isNotNull();                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85                                                                                                          </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86         final CountDownLatch latch = new CountDownLatch(1);                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87                                                                                                          </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88         ExecutorService executor = Executors.newSingleThreadExecutor();                                  </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89         Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90             @Override                                                                                    </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91             public Job.Result call() throws Exception {                                                  </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92                 latch.countDown();                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93                                                                                                          </span>
<span class="8335659116118205379" onmouseenter="enter('8335659116118205379');" onmouseout="out('8335659116118205379');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94                 Job.Result result = common.executeJobRequest(pendingRequest);                            </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95                 assertThat(result).isEqualTo(expected);                                                  </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96                 assertThat(common.getPendingRequest(true, false)).isNull();                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100         });                                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101                                                                                                          </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102         // wait until the thread actually started                                                        </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103         assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104                                                                                                          </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105         executor.shutdown();                                                                             </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106         return future;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108                                                                                                          </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109     @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                       </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110     protected void resetJob(int jobId) {                                                                 </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111         Job job = manager().getJob(jobId);                                                               </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 112 =======                                                                                                  </span>
<span class="5958236384696658256" onmouseenter="enter('5958236384696658256');" onmouseout="out('5958236384696658256');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 113         return mContext;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 114     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 115                                                                                                          </span>
<span class="2757332323554348950" onmouseenter="enter('2757332323554348950');" onmouseout="out('2757332323554348950');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 116     protected final JobManager createManager() {                                                         </span>
<span class="7963257267283799916" onmouseenter="enter('7963257267283799916');" onmouseout="out('7963257267283799916');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 117         Context mockContext = mock(MockContext.class);                                                   </span>
<span class="-8059429712077510619" onmouseenter="enter('-8059429712077510619');" onmouseout="out('-8059429712077510619');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 118         when(mockContext.getApplicationContext()).thenReturn(mContext);                                  </span>
<span class="3924882520217180415" onmouseenter="enter('3924882520217180415');" onmouseout="out('3924882520217180415');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 119         return JobManager.create(mockContext);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 120     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 121                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122     @NonNull                                                                                             </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 123 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-3751297365101898096" onmouseenter="enter('-3751297365101898096');" onmouseout="out('-3751297365101898096');" style=""> 124     protected void executeJob(int jobId, @NonNull Job.Result expected) {                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 125         try {                                                                                            </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style=""> 126             executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 127         } catch (Exception e) {                                                                          </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style=""> 128             throw new AssertionError(&quot;Job timeout&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130     }                                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="5356786187885894695" onmouseenter="enter('5356786187885894695');" onmouseout="out('5356786187885894695');" style=""><abbr title=" 132     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedException {"> 132     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InðŸ”µ</abbr></span>
<span class="1326754837574671469" onmouseenter="enter('1326754837574671469');" onmouseout="out('1326754837574671469');" style=""> 133         final JobProxy.Common common = new JobProxy.Common(context(), TestCat.INSTANCE, jobId);          </span>
<span  style=""> 134                                                                                                          </span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style=""> 135         final JobRequest pendingRequest = common.getPendingRequest(true, true);                          </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style=""> 136         assertThat(pendingRequest).isNotNull();                                                          </span>
<span  style=""> 137                                                                                                          </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style=""> 138         final CountDownLatch latch = new CountDownLatch(1);                                              </span>
<span  style=""> 139                                                                                                          </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style=""> 140         ExecutorService executor = Executors.newSingleThreadExecutor();                                  </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style=""> 141         Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 142             @Override                                                                                    </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style=""> 143             public Job.Result call() throws Exception {                                                  </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style=""> 144                 latch.countDown();                                                                       </span>
<span  style=""> 145                                                                                                          </span>
<span class="-8640965941368400338" onmouseenter="enter('-8640965941368400338');" onmouseout="out('-8640965941368400338');" style=""> 146                 Job.Result result = common.executeJobRequest(pendingRequest, null);                      </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style=""> 147                 assertThat(result).isEqualTo(expected);                                                  </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style=""> 148                 assertThat(common.getPendingRequest(true, false)).isNull();                              </span>
<span  style=""> 149                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 150                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 152         });                                                                                              </span>
<span  style=""> 153                                                                                                          </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style=""> 154         // wait until the thread actually started                                                        </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style=""> 155         assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                           </span>
<span  style=""> 156                                                                                                          </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style=""> 157         executor.shutdown();                                                                             </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style=""> 158         return future;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159     }                                                                                                    </span>
<span  style=""> 160                                                                                                          </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style=""> 161     @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                       </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style=""> 162     protected void resetJob(int jobId) {                                                                 </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style=""> 163         Job job = manager().getJob(jobId);                                                               </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style=""> 164         if (job != null) {                                                                               </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style=""> 165             doReturn(-1L).when(job).getFinishedTimeStamp();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1 package com.evernote.android.job;                                                                        </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   4 import android.content.Intent;                                                                           </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">   5 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">   6 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   7 import android.support.annotation.NonNull;                                                               </span>
<span class="-8624878422109726872" onmouseenter="enter('-8624878422109726872');" onmouseout="out('-8624878422109726872');" style="">   8 import android.test.mock.MockContext;                                                                    </span>
<span  style="">   9                                                                                                          </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">  10 import com.evernote.android.job.test.DummyJobs;                                                          </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">  11 import com.evernote.android.job.test.TestCat;                                                            </span>
<span  style="">  12                                                                                                          </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">  13 import org.junit.Rule;                                                                                   </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  14 import org.robolectric.RuntimeEnvironment;                                                               </span>
<span  style="">  15                                                                                                          </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  16 import java.util.Collections;                                                                            </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  17 import java.util.concurrent.Callable;                                                                    </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  18 import java.util.concurrent.CountDownLatch;                                                              </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  19 import java.util.concurrent.ExecutorService;                                                             </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  20 import java.util.concurrent.Executors;                                                                   </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  21 import java.util.concurrent.Future;                                                                      </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  22 import java.util.concurrent.TimeUnit;                                                                    </span>
<span  style="">  23                                                                                                          </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  24 import static org.assertj.core.api.Java6Assertions.assertThat;                                           </span>
<span class="6685720693550820735" onmouseenter="enter('6685720693550820735');" onmouseout="out('6685720693550820735');" style="">  25 import static org.mockito.ArgumentMatchers.any;                                                          </span>
<span class="7439199169262611289" onmouseenter="enter('7439199169262611289');" onmouseout="out('7439199169262611289');" style="">  26 import static org.mockito.ArgumentMatchers.anyInt;                                                       </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  27 import static org.mockito.Mockito.doReturn;                                                              </span>
<span class="1544093646286875230" onmouseenter="enter('1544093646286875230');" onmouseout="out('1544093646286875230');" style="">  28 import static org.mockito.Mockito.mock;                                                                  </span>
<span class="-1572018164586719902" onmouseenter="enter('-1572018164586719902');" onmouseout="out('-1572018164586719902');" style="">  29 import static org.mockito.Mockito.spy;                                                                   </span>
<span class="3383156691626080704" onmouseenter="enter('3383156691626080704');" onmouseout="out('3383156691626080704');" style="">  30 import static org.mockito.Mockito.when;                                                                  </span>
<span  style="">  31                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  32 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  33  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  34  */                                                                                                      </span>
<span class="-5429987873611314699" onmouseenter="enter('-5429987873611314699');" onmouseout="out('-5429987873611314699');" style="">  35 @SuppressWarnings(&quot;WeakerAccess&quot;)                                                                        </span>
<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  36 public abstract class BaseJobManagerTest {                                                               </span>
<span  style="">  37                                                                                                          </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  38     @Rule                                                                                                </span>
<span class="6818233914031150263" onmouseenter="enter('6818233914031150263');" onmouseout="out('6818233914031150263');" style="">  39     public final JobManagerRule mJobManagerRule;                                                         </span>
<span  style="">  40                                                                                                          </span>
<span class="-2672328117217234149" onmouseenter="enter('-2672328117217234149');" onmouseout="out('-2672328117217234149');" style="">  41     private final Context mContext;                                                                      </span>
<span  style="">  42                                                                                                          </span>
<span class="7538793963985398729" onmouseenter="enter('7538793963985398729');" onmouseout="out('7538793963985398729');" style="">  43     public BaseJobManagerTest() {                                                                        </span>
<span class="-6834743854759683221" onmouseenter="enter('-6834743854759683221');" onmouseout="out('-6834743854759683221');" style="">  44         // otherwise the JobScheduler isn&#x27;t supported we check if the service is enable                  </span>
<span class="7979039694195695661" onmouseenter="enter('7979039694195695661');" onmouseout="out('7979039694195695661');" style=""><abbr title="  45         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/issues/416">  45         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolðŸ”µ</abbr></span>
<span class="2188275399399506091" onmouseenter="enter('2188275399399506091');" onmouseout="out('2188275399399506091');" style="">  46         PackageManager packageManager = mock(PackageManager.class);                                      </span>
<span class="-3354401291128082818" onmouseenter="enter('-3354401291128082818');" onmouseout="out('-3354401291128082818');" style=""><abbr title="  47         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  47         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singðŸ”µ</abbr></span>
<span class="445066419246632211" onmouseenter="enter('445066419246632211');" onmouseout="out('445066419246632211');" style=""><abbr title="  48         when(packageManager.queryBroadcastReceivers(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  48         when(packageManager.queryBroadcastReceivers(any(Intent.class), anyInt())).thenReturn(Collections.ðŸ”µ</abbr></span>
<span  style="">  49                                                                                                          </span>
<span class="7917921035241516800" onmouseenter="enter('7917921035241516800');" onmouseout="out('7917921035241516800');" style="">  50         mContext = spy(RuntimeEnvironment.application);                                                  </span>
<span class="5389335310188325090" onmouseenter="enter('5389335310188325090');" onmouseout="out('5389335310188325090');" style="">  51         when(mContext.getPackageManager()).thenReturn(packageManager);                                   </span>
<span  style="">  52                                                                                                          </span>
<span class="7963257267283799916" onmouseenter="enter('7963257267283799916');" onmouseout="out('7963257267283799916');" style="">  53         Context mockContext = mock(MockContext.class);                                                   </span>
<span class="-8059429712077510619" onmouseenter="enter('-8059429712077510619');" onmouseout="out('-8059429712077510619');" style="">  54         when(mockContext.getApplicationContext()).thenReturn(mContext);                                  </span>
<span  style="">  55                                                                                                          </span>
<span class="3767643857400380832" onmouseenter="enter('3767643857400380832');" onmouseout="out('3767643857400380832');" style="">  56         mJobManagerRule = new JobManagerRule(provideJobCreator(), mockContext);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  57     }                                                                                                    </span>
<span  style="">  58                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  59     @NonNull                                                                                             </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  60     protected JobCreator provideJobCreator() {                                                           </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  61         return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62     }                                                                                                    </span>
<span  style="">  63                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  64     @NonNull                                                                                             </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  65     protected final JobManager manager() {                                                               </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  66         return mJobManagerRule.getJobManager();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67     }                                                                                                    </span>
<span  style="">  68                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  69     @NonNull                                                                                             </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style="">  70     protected final Context context() {                                                                  </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  71 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-6834743854759683221" onmouseenter="enter('-6834743854759683221');" onmouseout="out('-6834743854759683221');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  72         // otherwise the JobScheduler isn&#x27;t supported we check if the service is enable                  </span>
<span class="7979039694195695661" onmouseenter="enter('7979039694195695661');" onmouseout="out('7979039694195695661');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  73         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/issues/416">  73         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolðŸ”µ</abbr></span>
<span class="2188275399399506091" onmouseenter="enter('2188275399399506091');" onmouseout="out('2188275399399506091');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  74         PackageManager packageManager = mock(PackageManager.class);                                      </span>
<span class="-3354401291128082818" onmouseenter="enter('-3354401291128082818');" onmouseout="out('-3354401291128082818');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  75         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  75         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singðŸ”µ</abbr></span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  76                                                                                                          </span>
<span class="-5831908013052039882" onmouseenter="enter('-5831908013052039882');" onmouseout="out('-5831908013052039882');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  77         Context context = spy(RuntimeEnvironment.application);                                           </span>
<span class="-6082644043814638889" onmouseenter="enter('-6082644043814638889');" onmouseout="out('-6082644043814638889');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  78         when(context.getPackageManager()).thenReturn(packageManager);                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  79                                                                                                          </span>
<span class="5912824651964420637" onmouseenter="enter('5912824651964420637');" onmouseout="out('5912824651964420637');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  80         return context;                                                                                  </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  81 ||||||| BASE                                                                                             </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  82 =======                                                                                                  </span>
<span class="5958236384696658256" onmouseenter="enter('5958236384696658256');" onmouseout="out('5958236384696658256');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  83         return mContext;                                                                                 </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  84 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85     }                                                                                                    </span>
<span  style="">  86                                                                                                          </span>
<span class="2757332323554348950" onmouseenter="enter('2757332323554348950');" onmouseout="out('2757332323554348950');" style="">  87     protected final JobManager createManager() {                                                         </span>
<span class="7963257267283799916" onmouseenter="enter('7963257267283799916');" onmouseout="out('7963257267283799916');" style="">  88         Context mockContext = mock(MockContext.class);                                                   </span>
<span class="-8059429712077510619" onmouseenter="enter('-8059429712077510619');" onmouseout="out('-8059429712077510619');" style="">  89         when(mockContext.getApplicationContext()).thenReturn(mContext);                                  </span>
<span class="3924882520217180415" onmouseenter="enter('3924882520217180415');" onmouseout="out('3924882520217180415');" style="">  90         return JobManager.create(mockContext);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91     }                                                                                                    </span>
<span  style="">  92                                                                                                          </span>
<span class="-3751297365101898096" onmouseenter="enter('-3751297365101898096');" onmouseout="out('-3751297365101898096');" style="">  93         protected void executeJob(int jobId, @NonNull Job.Result expected) {                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  94         try {                                                                                            </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  95             executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  96         } catch (Exception e) {                                                                          </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  97             throw new AssertionError(&quot;Job timeout&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="5356786187885894695" onmouseenter="enter('5356786187885894695');" onmouseout="out('5356786187885894695');" style=""><abbr title=" 101     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedException {"> 101     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InðŸ”µ</abbr></span>
<span class="1326754837574671469" onmouseenter="enter('1326754837574671469');" onmouseout="out('1326754837574671469');" style=""> 102         final JobProxy.Common common = new JobProxy.Common(context(), TestCat.INSTANCE, jobId);          </span>
<span  style=""> 103                                                                                                          </span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style=""> 104         final JobRequest pendingRequest = common.getPendingRequest(true, true);                          </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style=""> 105         assertThat(pendingRequest).isNotNull();                                                          </span>
<span  style=""> 106                                                                                                          </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style=""> 107         final CountDownLatch latch = new CountDownLatch(1);                                              </span>
<span  style=""> 108                                                                                                          </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style=""> 109         ExecutorService executor = Executors.newSingleThreadExecutor();                                  </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style=""> 110         Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 111             @Override                                                                                    </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style=""> 112             public Job.Result call() throws Exception {                                                  </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style=""> 113                 latch.countDown();                                                                       </span>
<span  style=""> 114                                                                                                          </span>
<span class="-8640965941368400338" onmouseenter="enter('-8640965941368400338');" onmouseout="out('-8640965941368400338');" style=""> 115                 Job.Result result = common.executeJobRequest(pendingRequest, null);                      </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style=""> 116                 assertThat(result).isEqualTo(expected);                                                  </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style=""> 117                 assertThat(common.getPendingRequest(true, false)).isNull();                              </span>
<span  style=""> 118                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 119                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 121         });                                                                                              </span>
<span  style=""> 122                                                                                                          </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style=""> 123         // wait until the thread actually started                                                        </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style=""> 124         assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                           </span>
<span  style=""> 125                                                                                                          </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style=""> 126         executor.shutdown();                                                                             </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style=""> 127         return future;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style=""> 130     @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                       </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style=""> 131     protected void resetJob(int jobId) {                                                                 </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style=""> 132         Job job = manager().getJob(jobId);                                                               </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style=""> 133         if (job != null) {                                                                               </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style=""> 134             doReturn(-1L).when(job).getFinishedTimeStamp();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137 }                                                                                                        </span>





























</pre></td>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1 package com.evernote.android.job;                                                                        </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   4 import android.content.Intent;                                                                           </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">   5 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">   6 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   7 import android.support.annotation.NonNull;                                                               </span>
<span class="-8624878422109726872" onmouseenter="enter('-8624878422109726872');" onmouseout="out('-8624878422109726872');" style="">   8 import android.test.mock.MockContext;                                                                    </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">   9 import com.evernote.android.job.test.DummyJobs;                                                          </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">  10 import com.evernote.android.job.test.TestCat;                                                            </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  11 import java.util.Collections;                                                                            </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  12 import java.util.concurrent.Callable;                                                                    </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  13 import java.util.concurrent.CountDownLatch;                                                              </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  14 import java.util.concurrent.ExecutorService;                                                             </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  15 import java.util.concurrent.Executors;                                                                   </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  16 import java.util.concurrent.Future;                                                                      </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  17 import java.util.concurrent.TimeUnit;                                                                    </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">  18 import org.junit.Rule;                                                                                   </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  19 import org.robolectric.RuntimeEnvironment;                                                               </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  20 import static org.assertj.core.api.Java6Assertions.assertThat;                                           </span>
<span class="6685720693550820735" onmouseenter="enter('6685720693550820735');" onmouseout="out('6685720693550820735');" style="">  21 import static org.mockito.ArgumentMatchers.any;                                                          </span>
<span class="7439199169262611289" onmouseenter="enter('7439199169262611289');" onmouseout="out('7439199169262611289');" style="">  22 import static org.mockito.ArgumentMatchers.anyInt;                                                       </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  23 import static org.mockito.Mockito.doReturn;                                                              </span>
<span class="1544093646286875230" onmouseenter="enter('1544093646286875230');" onmouseout="out('1544093646286875230');" style="">  24 import static org.mockito.Mockito.mock;                                                                  </span>
<span class="-1572018164586719902" onmouseenter="enter('-1572018164586719902');" onmouseout="out('-1572018164586719902');" style="">  25 import static org.mockito.Mockito.spy;                                                                   </span>
<span class="3383156691626080704" onmouseenter="enter('3383156691626080704');" onmouseout="out('3383156691626080704');" style="">  26 import static org.mockito.Mockito.when;                                                                  </span>
<span  style="">  27                                                                                                          </span>
<span  style="">  28                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  29 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  30  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  31  */                                                                                                      </span>
<span class="-5429987873611314699" onmouseenter="enter('-5429987873611314699');" onmouseout="out('-5429987873611314699');" style="">  32 @SuppressWarnings(&quot;WeakerAccess&quot;)                                                                        </span>
<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  33 public abstract class BaseJobManagerTest {                                                               </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  34     @Rule                                                                                                </span>
<span class="6818233914031150263" onmouseenter="enter('6818233914031150263');" onmouseout="out('6818233914031150263');" style="">  35     public final JobManagerRule mJobManagerRule;                                                         </span>
<span  style="">  36                                                                                                          </span>
<span class="-2672328117217234149" onmouseenter="enter('-2672328117217234149');" onmouseout="out('-2672328117217234149');" style="">  37     private final Context mContext;                                                                      </span>
<span  style="">  38                                                                                                          </span>
<span class="7538793963985398729" onmouseenter="enter('7538793963985398729');" onmouseout="out('7538793963985398729');" style="">  39     public BaseJobManagerTest() {                                                                        </span>
<span class="-6834743854759683221" onmouseenter="enter('-6834743854759683221');" onmouseout="out('-6834743854759683221');" style="">  40         // otherwise the JobScheduler isn&#x27;t supported we check if the service is enable                  </span>
<span class="7979039694195695661" onmouseenter="enter('7979039694195695661');" onmouseout="out('7979039694195695661');" style=""><abbr title="  41         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/issues/416">  41         // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolðŸ”µ</abbr></span>
<span class="2188275399399506091" onmouseenter="enter('2188275399399506091');" onmouseout="out('2188275399399506091');" style="">  42         PackageManager packageManager = mock(PackageManager.class);                                      </span>
<span class="-3354401291128082818" onmouseenter="enter('-3354401291128082818');" onmouseout="out('-3354401291128082818');" style=""><abbr title="  43         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  43         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singðŸ”µ</abbr></span>
<span class="445066419246632211" onmouseenter="enter('445066419246632211');" onmouseout="out('445066419246632211');" style=""><abbr title="  44         when(packageManager.queryBroadcastReceivers(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  44         when(packageManager.queryBroadcastReceivers(any(Intent.class), anyInt())).thenReturn(Collections.ðŸ”µ</abbr></span>
<span class="7917921035241516800" onmouseenter="enter('7917921035241516800');" onmouseout="out('7917921035241516800');" style="">  45         mContext = spy(RuntimeEnvironment.application);                                                  </span>
<span class="5389335310188325090" onmouseenter="enter('5389335310188325090');" onmouseout="out('5389335310188325090');" style="">  46         when(mContext.getPackageManager()).thenReturn(packageManager);                                   </span>
<span class="7963257267283799916" onmouseenter="enter('7963257267283799916');" onmouseout="out('7963257267283799916');" style="">  47         Context mockContext = mock(MockContext.class);                                                   </span>
<span class="-8059429712077510619" onmouseenter="enter('-8059429712077510619');" onmouseout="out('-8059429712077510619');" style="">  48         when(mockContext.getApplicationContext()).thenReturn(mContext);                                  </span>
<span class="3767643857400380832" onmouseenter="enter('3767643857400380832');" onmouseout="out('3767643857400380832');" style="">  49         mJobManagerRule = new JobManagerRule(provideJobCreator(), mockContext);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  50     }                                                                                                    </span>
<span  style="">  51                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  52     @NonNull                                                                                             </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  53     protected JobCreator provideJobCreator() {                                                           </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  54         return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55     }                                                                                                    </span>
<span  style="">  56                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  57     @NonNull                                                                                             </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  58     protected final JobManager manager() {                                                               </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  59         return mJobManagerRule.getJobManager();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60     }                                                                                                    </span>
<span  style="">  61                                                                                                          </span>
<span class="2757332323554348950" onmouseenter="enter('2757332323554348950');" onmouseout="out('2757332323554348950');" style="">  62     protected final JobManager createManager() {                                                         </span>
<span class="7963257267283799916" onmouseenter="enter('7963257267283799916');" onmouseout="out('7963257267283799916');" style="">  63         Context mockContext = mock(MockContext.class);                                                   </span>
<span class="-8059429712077510619" onmouseenter="enter('-8059429712077510619');" onmouseout="out('-8059429712077510619');" style="">  64         when(mockContext.getApplicationContext()).thenReturn(mContext);                                  </span>
<span class="3924882520217180415" onmouseenter="enter('3924882520217180415');" onmouseout="out('3924882520217180415');" style="">  65         return JobManager.create(mockContext);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66     }                                                                                                    </span>
<span  style="">  67                                                                                                          </span>
<span class="-8629963459932111198" onmouseenter="enter('-8629963459932111198');" onmouseout="out('-8629963459932111198');" style="">  68     protected void executeJob(int jobId, @NonNull                                                        </span>
<span class="8712707970796331211" onmouseenter="enter('8712707970796331211');" onmouseout="out('8712707970796331211');" style="">  69     Job.Result expected) {                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  70         try {                                                                                            </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  71             executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                   </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">  72         } catch (java.lang.Exception e) {                                                                </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  73             throw new AssertionError(&quot;Job timeout&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75     }                                                                                                    </span>
<span  style="">  76                                                                                                          </span>
<span class="3677591053594626582" onmouseenter="enter('3677591053594626582');" onmouseout="out('3677591053594626582');" style="">  77     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull                                     </span>
<span class="-5607610371732265339" onmouseenter="enter('-5607610371732265339');" onmouseout="out('-5607610371732265339');" style="">  78     final Job.Result expected) throws InterruptedException {                                             </span>
<span class="1326754837574671469" onmouseenter="enter('1326754837574671469');" onmouseout="out('1326754837574671469');" style="">  79         final JobProxy.Common common = new JobProxy.Common(context(), TestCat.INSTANCE, jobId);          </span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style="">  80         final JobRequest pendingRequest = common.getPendingRequest(true, true);                          </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="">  81         assertThat(pendingRequest).isNotNull();                                                          </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style="">  82         final CountDownLatch latch = new CountDownLatch(1);                                              </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="">  83         ExecutorService executor = Executors.newSingleThreadExecutor();                                  </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="">  84         Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  85             @Override                                                                                    </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style="">  86             public Job.Result call() throws Exception {                                                  </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style="">  87                 latch.countDown();                                                                       </span>
<span class="-8640965941368400338" onmouseenter="enter('-8640965941368400338');" onmouseout="out('-8640965941368400338');" style="">  88                 Job.Result result = common.executeJobRequest(pendingRequest, null);                      </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="">  89                 assertThat(result).isEqualTo(expected);                                                  </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style="">  90                 assertThat(common.getPendingRequest(true, false)).isNull();                              </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  91                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  93         });                                                                                              </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style="">  94         // wait until the thread actually started                                                        </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style="">  95         assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                           </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style="">  96         executor.shutdown();                                                                             </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style="">  97         return future;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98     }                                                                                                    </span>
<span  style="">  99                                                                                                          </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style=""> 100     @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                       </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style=""> 101     protected void resetJob(int jobId) {                                                                 </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style=""> 102         Job job = manager().getJob(jobId);                                                               </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style=""> 103         if (job != null) {                                                                               </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style=""> 104             doReturn(-1L).when(job).getFinishedTimeStamp();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106     }                                                                                                    </span>
<span  style=""> 107                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style=""> 108     @NonNull                                                                                             </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style=""> 109     protected final Context context() {                                                                  </span>
<span  style=""> 110                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 111 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="5958236384696658256" onmouseenter="enter('5958236384696658256');" onmouseout="out('5958236384696658256');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 112         return mContext;                                                                                 </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 113 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 114 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 114 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 115 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 116                                                                                                          </span>
<span class="2188275399399506091" onmouseenter="enter('2188275399399506091');" onmouseout="out('2188275399399506091');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 117         PackageManager packageManager = mock(PackageManager.class);                                      </span>
<span class="-3354401291128082818" onmouseenter="enter('-3354401291128082818');" onmouseout="out('-3354401291128082818');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 118         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));"> 118         when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 119                                                                                                          </span>
<span class="-5831908013052039882" onmouseenter="enter('-5831908013052039882');" onmouseout="out('-5831908013052039882');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 120         Context context = spy(RuntimeEnvironment.application);                                           </span>
<span class="-6082644043814638889" onmouseenter="enter('-6082644043814638889');" onmouseout="out('-6082644043814638889');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 121         when(context.getPackageManager()).thenReturn(packageManager);                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122                                                                                                          </span>
<span class="5912824651964420637" onmouseenter="enter('5912824651964420637');" onmouseout="out('5912824651964420637');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 123         return context;                                                                                  </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 124 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style=""> 125                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127 }                                                                                                        </span>







































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1  package com.evernote.android.job;                                                                                 </span>
<span  style="">   2                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   3 +import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   4 +import android.content.Intent;                                                                                    </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   5 +import android.content.pm.PackageManager;                                                                         </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   6 +import android.content.pm.ResolveInfo;                                                                            </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   7  import android.support.annotation.NonNull;                                                                        </span>

<span  style="">   8                                                                                                                    </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">   9  import com.evernote.android.job.test.DummyJobs;                                                                   </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">  10  import com.evernote.android.job.test.TestCat;                                                                     </span>
<span  style="">  11                                                                                                                    </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">  12  import org.junit.Rule;                                                                                            </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  13  import org.robolectric.RuntimeEnvironment;                                                                        </span>
<span  style="">  14                                                                                                                    </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  15 +import java.util.Collections;                                                                                     </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  16  import java.util.concurrent.Callable;                                                                             </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  17  import java.util.concurrent.CountDownLatch;                                                                       </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  18  import java.util.concurrent.ExecutorService;                                                                      </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  19  import java.util.concurrent.Executors;                                                                            </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  20  import java.util.concurrent.Future;                                                                               </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  21  import java.util.concurrent.TimeUnit;                                                                             </span>
<span  style="">  22                                                                                                                    </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  23  import static org.assertj.core.api.Java6Assertions.assertThat;                                                    </span>
<span class="6685720693550820735" onmouseenter="enter('6685720693550820735');" onmouseout="out('6685720693550820735');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  24 +import static org.mockito.ArgumentMatchers.any;                                                                   </span>
<span class="7439199169262611289" onmouseenter="enter('7439199169262611289');" onmouseout="out('7439199169262611289');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  25 +import static org.mockito.ArgumentMatchers.anyInt;                                                                </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  26  import static org.mockito.Mockito.doReturn;                                                                       </span>
<span class="1544093646286875230" onmouseenter="enter('1544093646286875230');" onmouseout="out('1544093646286875230');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  27 +import static org.mockito.Mockito.mock;                                                                           </span>
<span class="-1572018164586719902" onmouseenter="enter('-1572018164586719902');" onmouseout="out('-1572018164586719902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import static org.mockito.Mockito.spy;                                                                            </span>
<span class="3383156691626080704" onmouseenter="enter('3383156691626080704');" onmouseout="out('3383156691626080704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import static org.mockito.Mockito.when;                                                                           </span>
<span  style="">  30                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  31  /**                                                                                                               </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  32   * @author rwondratschek                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  33   */                                                                                                               </span>
<span class="-5429987873611314699" onmouseenter="enter('-5429987873611314699');" onmouseout="out('-5429987873611314699');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +@SuppressWarnings(&quot;WeakerAccess&quot;)                                                                                 </span>
<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  35  public abstract class BaseJobManagerTest {                                                                        </span>
<span  style="">  36                                                                                                                    </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  37      @Rule                                                                                                         </span>
<span class="-7620099840259404872" onmouseenter="enter('-7620099840259404872');" onmouseout="out('-7620099840259404872');" style="">  38      public final JobManagerRule mJobManagerRule = new JobManagerRule(provideJobCreator());                        </span>



















<span  style="">  39                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  40      @NonNull                                                                                                      </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  41      protected JobCreator provideJobCreator() {                                                                    </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  42          return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  43      }                                                                                                             </span>
<span  style="">  44                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  45      @NonNull                                                                                                      </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  46      protected final JobManager manager() {                                                                        </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  47          return mJobManagerRule.getJobManager();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  48      }                                                                                                             </span>
<span  style="">  49                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  50      @NonNull                                                                                                      </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  51 +    protected final Context context() {                                                                           </span>
<span class="-6834743854759683221" onmouseenter="enter('-6834743854759683221');" onmouseout="out('-6834743854759683221');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  52 +        // otherwise the JobScheduler isn&#x27;t supported we check if the service is enable                           </span>
<span class="7979039694195695661" onmouseenter="enter('7979039694195695661');" onmouseout="out('7979039694195695661');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  53 +        // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/issues/416">  53 +        // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/isðŸ”µ</abbr></span>
<span class="2188275399399506091" onmouseenter="enter('2188275399399506091');" onmouseout="out('2188275399399506091');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  54 +        PackageManager packageManager = mock(PackageManager.class);                                               </span>
<span class="-3354401291128082818" onmouseenter="enter('-3354401291128082818');" onmouseout="out('-3354401291128082818');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  55 +        when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  55 +        when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonListðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +                                                                                                                  </span>
<span class="-5831908013052039882" onmouseenter="enter('-5831908013052039882');" onmouseout="out('-5831908013052039882');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 +        Context context = spy(RuntimeEnvironment.application);                                                    </span>
<span class="-6082644043814638889" onmouseenter="enter('-6082644043814638889');" onmouseout="out('-6082644043814638889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +        when(context.getPackageManager()).thenReturn(packageManager);                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +                                                                                                                  </span>
<span class="5912824651964420637" onmouseenter="enter('5912824651964420637');" onmouseout="out('5912824651964420637');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +        return context;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  62 +                                                                                                                  </span>
<span class="-3751297365101898096" onmouseenter="enter('-3751297365101898096');" onmouseout="out('-3751297365101898096');" style="">  63      protected void executeJob(int jobId, @NonNull Job.Result expected) {                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  64          try {                                                                                                     </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  65              executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  66          } catch (Exception e) {                                                                                   </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  67              throw new AssertionError(&quot;Job timeout&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69      }                                                                                                             </span>
<span  style="">  70                                                                                                                    </span>
<span class="5356786187885894695" onmouseenter="enter('5356786187885894695');" onmouseout="out('5356786187885894695');" style=""><abbr title="  71      protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedException {">  71      protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedðŸ”µ</abbr></span>
<span class="-4531912195970062533" onmouseenter="enter('-4531912195970062533');" onmouseout="out('-4531912195970062533');" style=""><abbr title="  72          final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobId);">  72          final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobIdðŸ”µ</abbr></span>

<span  style="">  73                                                                                                                    </span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style="">  74          final JobRequest pendingRequest = common.getPendingRequest(true, true);                                   </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="">  75          assertThat(pendingRequest).isNotNull();                                                                   </span>
<span  style="">  76                                                                                                                    </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style="">  77          final CountDownLatch latch = new CountDownLatch(1);                                                       </span>
<span  style="">  78                                                                                                                    </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="">  79          ExecutorService executor = Executors.newSingleThreadExecutor();                                           </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="">  80          Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  81              @Override                                                                                             </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style="">  82              public Job.Result call() throws Exception {                                                           </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style="">  83                  latch.countDown();                                                                                </span>
<span  style="">  84                                                                                                                    </span>
<span class="8335659116118205379" onmouseenter="enter('8335659116118205379');" onmouseout="out('8335659116118205379');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  85 -                Job.Result result = common.executeJobRequest(pendingRequest);                                     </span>
<span class="-8640965941368400338" onmouseenter="enter('-8640965941368400338');" onmouseout="out('-8640965941368400338');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  86 +                Job.Result result = common.executeJobRequest(pendingRequest, null);                               </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="">  87                  assertThat(result).isEqualTo(expected);                                                           </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style="">  88                  assertThat(common.getPendingRequest(true, false)).isNull();                                       </span>
<span  style="">  89                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  90                  return result;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  92          });                                                                                                       </span>
<span  style="">  93                                                                                                                    </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style="">  94          // wait until the thread actually started                                                                 </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style="">  95          assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                                    </span>
<span  style="">  96                                                                                                                    </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style="">  97          executor.shutdown();                                                                                      </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style="">  98          return future;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99      }                                                                                                             </span>
<span  style=""> 100                                                                                                                    </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style=""> 101      @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                                </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style=""> 102      protected void resetJob(int jobId) {                                                                          </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style=""> 103          Job job = manager().getJob(jobId);                                                                        </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style=""> 104          if (job != null) {                                                                                        </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style=""> 105              doReturn(-1L).when(job).getFinishedTimeStamp();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1  package com.evernote.android.job;                                                                                 </span>
<span  style="">   2                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   3 +import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   4 +import android.content.Intent;                                                                                    </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   5 +import android.content.pm.PackageManager;                                                                         </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   6 +import android.content.pm.ResolveInfo;                                                                            </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   7  import android.support.annotation.NonNull;                                                                        </span>
<span class="-8624878422109726872" onmouseenter="enter('-8624878422109726872');" onmouseout="out('-8624878422109726872');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   8 +import android.test.mock.MockContext;                                                                             </span>
<span  style="">   9                                                                                                                    </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">  10  import com.evernote.android.job.test.DummyJobs;                                                                   </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">  11  import com.evernote.android.job.test.TestCat;                                                                     </span>
<span  style="">  12                                                                                                                    </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">  13  import org.junit.Rule;                                                                                            </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  14  import org.robolectric.RuntimeEnvironment;                                                                        </span>
<span  style="">  15                                                                                                                    </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  16 +import java.util.Collections;                                                                                     </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  17  import java.util.concurrent.Callable;                                                                             </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  18  import java.util.concurrent.CountDownLatch;                                                                       </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  19  import java.util.concurrent.ExecutorService;                                                                      </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  20  import java.util.concurrent.Executors;                                                                            </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  21  import java.util.concurrent.Future;                                                                               </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  22  import java.util.concurrent.TimeUnit;                                                                             </span>
<span  style="">  23                                                                                                                    </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  24  import static org.assertj.core.api.Java6Assertions.assertThat;                                                    </span>
<span class="6685720693550820735" onmouseenter="enter('6685720693550820735');" onmouseout="out('6685720693550820735');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  25 +import static org.mockito.ArgumentMatchers.any;                                                                   </span>
<span class="7439199169262611289" onmouseenter="enter('7439199169262611289');" onmouseout="out('7439199169262611289');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  26 +import static org.mockito.ArgumentMatchers.anyInt;                                                                </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  27  import static org.mockito.Mockito.doReturn;                                                                       </span>
<span class="1544093646286875230" onmouseenter="enter('1544093646286875230');" onmouseout="out('1544093646286875230');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import static org.mockito.Mockito.mock;                                                                           </span>
<span class="-1572018164586719902" onmouseenter="enter('-1572018164586719902');" onmouseout="out('-1572018164586719902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import static org.mockito.Mockito.spy;                                                                            </span>
<span class="3383156691626080704" onmouseenter="enter('3383156691626080704');" onmouseout="out('3383156691626080704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  30 +import static org.mockito.Mockito.when;                                                                           </span>
<span  style="">  31                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  32  /**                                                                                                               </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  33   * @author rwondratschek                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  34   */                                                                                                               </span>

<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  35  public abstract class BaseJobManagerTest {                                                                        </span>
<span  style="">  36                                                                                                                    </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  37      @Rule                                                                                                         </span>
<span class="-7620099840259404872" onmouseenter="enter('-7620099840259404872');" onmouseout="out('-7620099840259404872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  38 -    public final JobManagerRule mJobManagerRule = new JobManagerRule(provideJobCreator());                        </span>
<span class="6818233914031150263" onmouseenter="enter('6818233914031150263');" onmouseout="out('6818233914031150263');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  39 +    public final JobManagerRule mJobManagerRule;                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  40 +                                                                                                                  </span>
<span class="-2672328117217234149" onmouseenter="enter('-2672328117217234149');" onmouseout="out('-2672328117217234149');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  41 +    private final Context mContext;                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  42 +                                                                                                                  </span>
<span class="7538793963985398729" onmouseenter="enter('7538793963985398729');" onmouseout="out('7538793963985398729');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  43 +    public BaseJobManagerTest() {                                                                                 </span>
<span class="-6834743854759683221" onmouseenter="enter('-6834743854759683221');" onmouseout="out('-6834743854759683221');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  44 +        // otherwise the JobScheduler isn&#x27;t supported we check if the service is enable                           </span>
<span class="7979039694195695661" onmouseenter="enter('7979039694195695661');" onmouseout="out('7979039694195695661');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  45 +        // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/issues/416">  45 +        // Robolectric doesn&#x27;t parse services from the manifest, see https://github.com/robolectric/robolectric/isðŸ”µ</abbr></span>
<span class="2188275399399506091" onmouseenter="enter('2188275399399506091');" onmouseout="out('2188275399399506091');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  46 +        PackageManager packageManager = mock(PackageManager.class);                                               </span>
<span class="-3354401291128082818" onmouseenter="enter('-3354401291128082818');" onmouseout="out('-3354401291128082818');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  47 +        when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  47 +        when(packageManager.queryIntentServices(any(Intent.class), anyInt())).thenReturn(Collections.singletonListðŸ”µ</abbr></span>
<span class="445066419246632211" onmouseenter="enter('445066419246632211');" onmouseout="out('445066419246632211');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  48 +        when(packageManager.queryBroadcastReceivers(any(Intent.class), anyInt())).thenReturn(Collections.singletonList(new ResolveInfo()));">  48 +        when(packageManager.queryBroadcastReceivers(any(Intent.class), anyInt())).thenReturn(Collections.singletonðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  49 +                                                                                                                  </span>
<span class="7917921035241516800" onmouseenter="enter('7917921035241516800');" onmouseout="out('7917921035241516800');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  50 +        mContext = spy(RuntimeEnvironment.application);                                                           </span>
<span class="5389335310188325090" onmouseenter="enter('5389335310188325090');" onmouseout="out('5389335310188325090');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  51 +        when(mContext.getPackageManager()).thenReturn(packageManager);                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  52 +                                                                                                                  </span>
<span class="7963257267283799916" onmouseenter="enter('7963257267283799916');" onmouseout="out('7963257267283799916');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  53 +        Context mockContext = mock(MockContext.class);                                                            </span>
<span class="-8059429712077510619" onmouseenter="enter('-8059429712077510619');" onmouseout="out('-8059429712077510619');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  54 +        when(mockContext.getApplicationContext()).thenReturn(mContext);                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 +                                                                                                                  </span>
<span class="3767643857400380832" onmouseenter="enter('3767643857400380832');" onmouseout="out('3767643857400380832');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +        mJobManagerRule = new JobManagerRule(provideJobCreator(), mockContext);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 +    }                                                                                                             </span>
<span  style="">  58                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  59      @NonNull                                                                                                      </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  60      protected JobCreator provideJobCreator() {                                                                    </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  61          return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62      }                                                                                                             </span>
<span  style="">  63                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  64      @NonNull                                                                                                      </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  65      protected final JobManager manager() {                                                                        </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  66          return mJobManagerRule.getJobManager();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67      }                                                                                                             </span>
<span  style="">  68                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  69      @NonNull                                                                                                      </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  70 +    protected final Context context() {                                                                           </span>
<span class="5958236384696658256" onmouseenter="enter('5958236384696658256');" onmouseout="out('5958236384696658256');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +        return mContext;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  73 +                                                                                                                  </span>
<span class="2757332323554348950" onmouseenter="enter('2757332323554348950');" onmouseout="out('2757332323554348950');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +    protected final JobManager createManager() {                                                                  </span>
<span class="7963257267283799916" onmouseenter="enter('7963257267283799916');" onmouseout="out('7963257267283799916');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  75 +        Context mockContext = mock(MockContext.class);                                                            </span>
<span class="-8059429712077510619" onmouseenter="enter('-8059429712077510619');" onmouseout="out('-8059429712077510619');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  76 +        when(mockContext.getApplicationContext()).thenReturn(mContext);                                           </span>
<span class="3924882520217180415" onmouseenter="enter('3924882520217180415');" onmouseout="out('3924882520217180415');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  77 +        return JobManager.create(mockContext);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  78 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  79 +                                                                                                                  </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  80 +    @NonNull                                                                                                      </span>

<span class="-3751297365101898096" onmouseenter="enter('-3751297365101898096');" onmouseout="out('-3751297365101898096');" style="">  81      protected void executeJob(int jobId, @NonNull Job.Result expected) {                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  82          try {                                                                                                     </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  83              executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  84          } catch (Exception e) {                                                                                   </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  85              throw new AssertionError(&quot;Job timeout&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87      }                                                                                                             </span>
<span  style="">  88                                                                                                                    </span>
<span class="5356786187885894695" onmouseenter="enter('5356786187885894695');" onmouseout="out('5356786187885894695');" style=""><abbr title="  89      protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedException {">  89      protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedðŸ”µ</abbr></span>
<span class="-4531912195970062533" onmouseenter="enter('-4531912195970062533');" onmouseout="out('-4531912195970062533');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="  90 -        final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobId);">  90 -        final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobIdðŸ”µ</abbr></span>
<span class="1326754837574671469" onmouseenter="enter('1326754837574671469');" onmouseout="out('1326754837574671469');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  91 +        final JobProxy.Common common = new JobProxy.Common(context(), TestCat.INSTANCE, jobId);                   </span>
<span  style="">  92                                                                                                                    </span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style="">  93          final JobRequest pendingRequest = common.getPendingRequest(true, true);                                   </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="">  94          assertThat(pendingRequest).isNotNull();                                                                   </span>
<span  style="">  95                                                                                                                    </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style="">  96          final CountDownLatch latch = new CountDownLatch(1);                                                       </span>
<span  style="">  97                                                                                                                    </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="">  98          ExecutorService executor = Executors.newSingleThreadExecutor();                                           </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="">  99          Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100              @Override                                                                                             </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style=""> 101              public Job.Result call() throws Exception {                                                           </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style=""> 102                  latch.countDown();                                                                                </span>
<span  style=""> 103                                                                                                                    </span>
<span class="8335659116118205379" onmouseenter="enter('8335659116118205379');" onmouseout="out('8335659116118205379');" style=""> 104                  Job.Result result = common.executeJobRequest(pendingRequest);                                     </span>

<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style=""> 105                  assertThat(result).isEqualTo(expected);                                                           </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style=""> 106                  assertThat(common.getPendingRequest(true, false)).isNull();                                       </span>
<span  style=""> 107                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 108                  return result;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 110          });                                                                                                       </span>
<span  style=""> 111                                                                                                                    </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style=""> 112          // wait until the thread actually started                                                                 </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style=""> 113          assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                                    </span>
<span  style=""> 114                                                                                                                    </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style=""> 115          executor.shutdown();                                                                                      </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style=""> 116          return future;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117      }                                                                                                             </span>
<span  style=""> 118                                                                                                                    </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style=""> 119      @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                                </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style=""> 120      protected void resetJob(int jobId) {                                                                          </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style=""> 121          Job job = manager().getJob(jobId);                                                                        </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style=""> 122          if (job != null) {                                                                                        </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style=""> 123              doReturn(-1L).when(job).getFinishedTimeStamp();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            