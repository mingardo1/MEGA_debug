<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>126</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    126
                    <a href="125.html">prev</a>
                    <a href="127.html">next</a>
                    <a href="126_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_8ec316b606af0886a6e3f206ba607cf9a095ae8f_Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;8ec316b606af0886a6e3f206ba607cf9a095ae8f:Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;8ec316b606af0886a6e3f206ba607cf9a095ae8f^1:Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;8ec316b606af0886a6e3f206ba607cf9a095ae8f^2:Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;04d77bda04eb0af8ff637d58bcb982b21e1869ba:Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4 import android.app.Fragment;                                                                             </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   5 import android.content.DialogInterface;                                                                  </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   6 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   7 import android.content.SharedPreferences;                                                                </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   8 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   9 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  10 import android.os.Bundle;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  11 import android.widget.Toast;                                                                             </span>
<span  style="">  12                                                                                                          </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  13 import androidx.appcompat.app.AlertDialog;                                                               </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="">  14 import androidx.appcompat.view.ContextThemeWrapper;                                                      </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  15 import androidx.preference.ListPreference;                                                               </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  16 import androidx.preference.Preference;                                                                   </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  17 import androidx.preference.PreferenceFragmentCompat;                                                     </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  18 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  19 import androidx.preference.SwitchPreferenceCompat;                                                       </span>
<span  style="">  20                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  21 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  22 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  23 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  24 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  25 import com.automattic.simplenote.utils.HtmlCompat;                                                       </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  26 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  27 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  28 import com.simperium.Simperium;                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  29 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  30 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  31 import com.simperium.client.BucketObjectNameInvalid;                                                     </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  32 import com.simperium.client.User;                                                                        </span>
<span  style="">  33                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  34 import java.lang.ref.WeakReference;                                                                      </span>
<span  style="">  35                                                                                                          </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  36 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span  style="">  37                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  38 /**                                                                                                      </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  39  * A simple {@link Fragment} subclass.                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  40  */                                                                                                      </span>
<span class="8213712831003870267" onmouseenter="enter('8213712831003870267');" onmouseout="out('8213712831003870267');" style="">  41 public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener,  </span>
<span class="-6650933180145052624" onmouseenter="enter('-6650933180145052624');" onmouseout="out('-6650933180145052624');" style="">  42         Simperium.OnUserCreatedListener {                                                                </span>
<span  style="">  43                                                                                                          </span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  44     private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                              </span>
<span  style="">  45                                                                                                          </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  46     private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                      </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  47     private SwitchPreferenceCompat mAnalyticsSwitch;                                                     </span>
<span  style="">  48                                                                                                          </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  49     public PreferencesFragment() {                                                                       </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  50         // Required empty public constructor                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51     }                                                                                                    </span>
<span  style="">  52                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  53     @Override                                                                                            </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  54     public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                         </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  55         addPreferencesFromResource(R.xml.preferences);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  56     }                                                                                                    </span>
<span  style="">  57                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  58     @Override                                                                                            </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  59     public void onActivityCreated(Bundle savedInstanceState) {                                           </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  60         super.onActivityCreated(savedInstanceState);                                                     </span>
<span  style="">  61                                                                                                          </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  62         Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  63         Simplenote currentApp = (Simplenote) getActivity().getApplication();                             </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  64         Simperium simperium = currentApp.getSimperium();                                                 </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  65         simperium.setUserStatusChangeListener(this);                                                     </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  66         simperium.setOnUserCreatedListener(this);                                                        </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  67         mPreferencesBucket = currentApp.getPreferencesBucket();                                          </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  68         mPreferencesBucket.start();                                                                      </span>
<span  style="">  69                                                                                                          </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  70         authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());               </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  71         if (simperium.needsAuthorization()) {                                                            </span>
<span class="-8833460600410674775" onmouseenter="enter('-8833460600410674775');" onmouseout="out('-8833460600410674775');" style="">  72             authenticatePreference.setTitle(R.string.sign_in);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  73         } else {                                                                                         </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style="">  74             authenticatePreference.setTitle(R.string.sign_out);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75         }                                                                                                </span>
<span  style="">  76                                                                                                          </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  77         authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  78             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  79             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  80                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  81                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82                 }                                                                                        </span>
<span  style="">  83                                                                                                          </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  84                 Simplenote currentApp = (Simplenote) getActivity().getApplication();                     </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  85                 if (currentApp.getSimperium().needsAuthorization()) {                                    </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style=""><abbr title="  86                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);">  86                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.classðŸ”µ</abbr></span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  87                     startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  88                 } else {                                                                                 </span>
<span class="2350031306572446790" onmouseenter="enter('2350031306572446790');" onmouseout="out('2350031306572446790');" style="">  89                     new SignOutAsyncTask(PreferencesFragment.this).execute();                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  91                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  93         });                                                                                              </span>
<span  style="">  94                                                                                                          </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title="  95         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {">  95         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  96             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  97             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  98                 try {                                                                                    </span>
<span class="-1694196419231190477" onmouseenter="enter('-1694196419231190477');" onmouseout="out('-1694196419231190477');" style="">  99                     startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;http://simplenote.com&quot;)));   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 100                 } catch (Exception e) {                                                                  </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""><abbr title=" 101                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();"> 101                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 103                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 105         });                                                                                              </span>
<span  style=""> 106                                                                                                          </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""><abbr title=" 107         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 107         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLisðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 108             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 109             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 110                 startActivity(new Intent(getActivity(), AboutActivity.class));                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 111                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 113         });                                                                                              </span>
<span  style=""> 114                                                                                                          </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style=""> 115         final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);    </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 116         themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 117             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 118             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 119 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 120                                                                                                          </span>
<span class="-8950154229773712279" onmouseenter="enter('-8950154229773712279');" onmouseout="out('-8950154229773712279');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 121                 final Activity activity = getActivity();                                                 </span>
<span class="-6633936886481537446" onmouseenter="enter('-6633936886481537446');" onmouseout="out('-6633936886481537446');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 122                 final int index = Integer.parseInt(newValue.toString());                                 </span>
<span class="-5762454067215313163" onmouseenter="enter('-5762454067215313163');" onmouseout="out('-5762454067215313163');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 123                 if (index == ThemeUtils.THEME_AUTO) {                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 124                                                                                                          </span>
<span class="-125851769992898991" onmouseenter="enter('-125851769992898991');" onmouseout="out('-125851769992898991');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 125                     PermissionListener permissionListener = new BasePermissionListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 126                         @Override                                                                        </span>
<span class="-3000343133930385097" onmouseenter="enter('-3000343133930385097');" onmouseout="out('-3000343133930385097');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 127                         public void onPermissionGranted(PermissionGrantedResponse response) {            </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 128                             updateTheme(activity, index);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 129                         }                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 130                         @Override                                                                        </span>
<span class="8814191998418862732" onmouseenter="enter('8814191998418862732');" onmouseout="out('8814191998418862732');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 131                         public void onPermissionDenied(PermissionDeniedResponse response) {              </span>
<span class="4936583139660390377" onmouseenter="enter('4936583139660390377');" onmouseout="out('4936583139660390377');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 132                             new AlertDialog.Builder(new ContextThemeWrapper(activity, R.style.Dialog))   </span>
<span class="5442284200977907926" onmouseenter="enter('5442284200977907926');" onmouseout="out('5442284200977907926');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 133                                     .setTitle(R.string.location_permission_denied)                       </span>
<span class="-1242141747673008599" onmouseenter="enter('-1242141747673008599');" onmouseout="out('-1242141747673008599');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 134                                     .setMessage(R.string.location_permission_explanation)                </span>
<span class="-5617878821115539617" onmouseenter="enter('-5617878821115539617');" onmouseout="out('-5617878821115539617');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 135                                     .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {"> 135                                     .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickLiðŸ”µ</abbr></span>
<span class="-4394730415325685177" onmouseenter="enter('-4394730415325685177');" onmouseout="out('-4394730415325685177');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 136                                         @Override public void onClick(DialogInterface dialog, int which) {"> 136                                         @Override public void onClick(DialogInterface dialog, int which) ðŸ”µ</abbr></span>
<span class="6280999572192694622" onmouseenter="enter('6280999572192694622');" onmouseout="out('6280999572192694622');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 137                                             dialog.dismiss();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 138                                         }                                                                </span>
<span class="7022022634399588778" onmouseenter="enter('7022022634399588778');" onmouseout="out('7022022634399588778');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 139                                     })                                                                   </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 140                                     .show();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 141                         }                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 142                     };                                                                                   </span>
<span class="-2740166548755332383" onmouseenter="enter('-2740166548755332383');" onmouseout="out('-2740166548755332383');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 143                     Dexter.withActivity(activity)                                                        </span>
<span class="-2228141653004003578" onmouseenter="enter('-2228141653004003578');" onmouseout="out('-2228141653004003578');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 144                             .withPermission(Manifest.permission.ACCESS_COARSE_LOCATION)                  </span>
<span class="-7869452323989914547" onmouseenter="enter('-7869452323989914547');" onmouseout="out('-7869452323989914547');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 145                             .withListener(permissionListener)                                            </span>
<span class="5694714174168919103" onmouseenter="enter('5694714174168919103');" onmouseout="out('5694714174168919103');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 146                             .check();                                                                    </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 147                     updateTheme(activity, index);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 148                 } else {                                                                                 </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 149                     updateTheme(activity, index);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 150                 }                                                                                        </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 151                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 152 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154         });                                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155                                                                                                          </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156         final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);    </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157         themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161                                                                                                          </span>
<span class="-8950154229773712279" onmouseenter="enter('-8950154229773712279');" onmouseout="out('-8950154229773712279');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162                 final Activity activity = getActivity();                                                 </span>
<span class="-6633936886481537446" onmouseenter="enter('-6633936886481537446');" onmouseout="out('-6633936886481537446');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163                 final int index = Integer.parseInt(newValue.toString());                                 </span>
<span class="-5762454067215313163" onmouseenter="enter('-5762454067215313163');" onmouseout="out('-5762454067215313163');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164                 if (index == ThemeUtils.THEME_AUTO) {                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165                                                                                                          </span>
<span class="-125851769992898991" onmouseenter="enter('-125851769992898991');" onmouseout="out('-125851769992898991');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 166                     PermissionListener permissionListener = new BasePermissionListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 167                         @Override                                                                        </span>
<span class="-3000343133930385097" onmouseenter="enter('-3000343133930385097');" onmouseout="out('-3000343133930385097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168                         public void onPermissionGranted(PermissionGrantedResponse response) {            </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 169                             updateTheme(activity, index);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 170                         }                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171                         @Override                                                                        </span>
<span class="8814191998418862732" onmouseenter="enter('8814191998418862732');" onmouseout="out('8814191998418862732');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 172                         public void onPermissionDenied(PermissionDeniedResponse response) {              </span>
<span class="4153180082075357136" onmouseenter="enter('4153180082075357136');" onmouseout="out('4153180082075357136');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 173                             new AlertDialog.Builder(activity)                                            </span>
<span class="5442284200977907926" onmouseenter="enter('5442284200977907926');" onmouseout="out('5442284200977907926');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 174                                     .setTitle(R.string.location_permission_denied)                       </span>
<span class="-1242141747673008599" onmouseenter="enter('-1242141747673008599');" onmouseout="out('-1242141747673008599');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 175                                     .setMessage(R.string.location_permission_explanation)                </span>
<span class="-5617878821115539617" onmouseenter="enter('-5617878821115539617');" onmouseout="out('-5617878821115539617');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 176                                     .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {"> 176                                     .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickLiðŸ”µ</abbr></span>
<span class="-4394730415325685177" onmouseenter="enter('-4394730415325685177');" onmouseout="out('-4394730415325685177');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 177                                         @Override public void onClick(DialogInterface dialog, int which) {"> 177                                         @Override public void onClick(DialogInterface dialog, int which) ðŸ”µ</abbr></span>
<span class="6280999572192694622" onmouseenter="enter('6280999572192694622');" onmouseout="out('6280999572192694622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 178                                             dialog.dismiss();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179                                         }                                                                </span>
<span class="7022022634399588778" onmouseenter="enter('7022022634399588778');" onmouseout="out('7022022634399588778');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180                                     })                                                                   </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181                                     .show();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182                         }                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183                     };                                                                                   </span>
<span class="-2740166548755332383" onmouseenter="enter('-2740166548755332383');" onmouseout="out('-2740166548755332383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 184                     Dexter.withActivity(activity)                                                        </span>
<span class="-2228141653004003578" onmouseenter="enter('-2228141653004003578');" onmouseout="out('-2228141653004003578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 185                             .withPermission(Manifest.permission.ACCESS_COARSE_LOCATION)                  </span>
<span class="-7869452323989914547" onmouseenter="enter('-7869452323989914547');" onmouseout="out('-7869452323989914547');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 186                             .withListener(permissionListener)                                            </span>
<span class="5694714174168919103" onmouseenter="enter('5694714174168919103');" onmouseout="out('5694714174168919103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 187                             .check();                                                                    </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 188                     updateTheme(activity, index);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 189                 } else {                                                                                 </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 190                     updateTheme(activity, index);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 191                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 192                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193                 return true;                                                                             </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 194 =======                                                                                                  </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 195                 updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                   </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 196 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 197                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198             }                                                                                            </span>
<span  style=""> 199                                                                                                          </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 200             private void updateTheme(Activity activity, int index) {                                     </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 201                 CharSequence[] entries = themePreference.getEntries();                                   </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 202                 themePreference.setSummary(entries[index]);                                              </span>
<span  style=""> 203                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 204                 AnalyticsTracker.track(                                                                  </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 205                         AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                    </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 206                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 207                         &quot;theme_preference&quot;                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 208                 );                                                                                       </span>
<span  style=""> 209                                                                                                          </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 210                 // recreate the activity so new theme is applied                                         </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 211                 activity.recreate();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 213         });                                                                                              </span>
<span  style=""> 214                                                                                                          </span>
<span class="-3563544225355858599" onmouseenter="enter('-3563544225355858599');" onmouseout="out('-3563544225355858599');" style=""> 215         final ListPreference sortPreference = (ListPreference) findPreference(PrefUtils.PREF_SORT_ORDER);</span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 216         sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 217             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 218             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 219                 int index = Integer.parseInt(newValue.toString());                                       </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 220                 CharSequence[] entries = sortPreference.getEntries();                                    </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 221                 sortPreference.setSummary(entries[index]);                                               </span>
<span  style=""> 222                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 223                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 225         });                                                                                              </span>
<span  style=""> 226                                                                                                          </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 227         Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                       </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 228         versionPref.setSummary(PrefUtils.versionInfo());                                                 </span>
<span  style=""> 229                                                                                                          </span>
<span class="269389859234146346" onmouseenter="enter('269389859234146346');" onmouseout="out('269389859234146346');" style=""><abbr title=" 230         SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note_list&quot;);"> 230         SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condeðŸ”µ</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 231         switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 232             @Override                                                                                    </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 233             public boolean onPreferenceChange(Preference preference, Object o) {                         </span>
<span class="2703036426639498311" onmouseenter="enter('2703036426639498311');" onmouseout="out('2703036426639498311');" style=""> 234                 if (((SwitchPreferenceCompat) preference).isChecked()) {                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 235                     AnalyticsTracker.track(                                                              </span>
<span class="8127526149566412653" onmouseenter="enter('8127526149566412653');" onmouseout="out('8127526149566412653');" style=""> 236                             AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED,                       </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 237                             AnalyticsTracker.CATEGORY_USER,                                              </span>
<span class="-7341164689664996576" onmouseenter="enter('-7341164689664996576');" onmouseout="out('-7341164689664996576');" style=""> 238                             &quot;condensed_list_preference&quot;                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 239                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240                 }                                                                                        </span>
<span  style=""> 241                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 242                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 244         });                                                                                              </span>
<span  style=""> 245                                                                                                          </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 246         // Add the hyperlink to the analytics summary                                                    </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 247         Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);    </span>
<span class="-5954923786447915621" onmouseenter="enter('-5954923786447915621');" onmouseout="out('-5954923786447915621');" style=""> 248         String formattedSummary = String.format(                                                         </span>
<span class="4703350175896481792" onmouseenter="enter('4703350175896481792');" onmouseout="out('4703350175896481792');" style=""> 249                 getString(R.string.share_analytics_summary),                                             </span>
<span class="4561110205824883354" onmouseenter="enter('4561110205824883354');" onmouseout="out('4561110205824883354');" style=""> 250                 &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;,                                           </span>
<span class="-5125567965545776439" onmouseenter="enter('-5125567965545776439');" onmouseout="out('-5125567965545776439');" style=""> 251                 &quot;&lt;/a&gt;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 252         );                                                                                               </span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 253         analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="2122402547097653030" onmouseenter="enter('2122402547097653030');" onmouseout="out('2122402547097653030');" style=""> 255         mAnalyticsSwitch = (SwitchPreferenceCompat)findPreference(&quot;pref_key_analytics_switch&quot;);          </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 256         mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 257             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 258             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 259                 try {                                                                                    </span>
<span class="7999271203428147057" onmouseenter="enter('7999271203428147057');" onmouseout="out('7999271203428147057');" style=""> 260                     boolean isChecked = (boolean)newValue;                                               </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 261                     Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                  </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 262                     prefs.setAnalyticsEnabled(isChecked);                                                </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 263                     prefs.save();                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 264                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 265                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266                 }                                                                                        </span>
<span  style=""> 267                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 268                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 270         });                                                                                              </span>
<span  style=""> 271                                                                                                          </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 272         updateAnalyticsSwitchState();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 275     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 276     public void onPause() {                                                                              </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 277         super.onPause();                                                                                 </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 278         mPreferencesBucket.stop();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279     }                                                                                                    </span>
<span  style=""> 280                                                                                                          </span>
<span class="7556645464441156739" onmouseenter="enter('7556645464441156739');" onmouseout="out('7556645464441156739');" style=""><abbr title=" 281     private DialogInterface.OnClickListener signOutClickListener = new DialogInterface.OnClickListener() {"> 281     private DialogInterface.OnClickListener signOutClickListener = new DialogInterface.OnClickListener() ðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 282         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 283         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="2650837461401234425" onmouseenter="enter('2650837461401234425');" onmouseout="out('2650837461401234425');" style=""> 284             signOut();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 286     };                                                                                                   </span>
<span  style=""> 287                                                                                                          </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""><abbr title=" 288     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {"> 288     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListenerðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 289         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 290         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-4028427458665571821" onmouseenter="enter('-4028427458665571821');" onmouseout="out('-4028427458665571821');" style=""> 291             startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(WEB_APP_URL)));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 293     };                                                                                                   </span>
<span  style=""> 294                                                                                                          </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 295     private boolean hasUnsyncedNotes() {                                                                 </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 296         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 297         Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 298         Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 299         while (notesCursor.moveToNext()) {                                                               </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 300             Note note = notesCursor.getObject();                                                         </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 301             if (note.isNew() || note.isModified()) {                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 302                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span  style=""> 305                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 306         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307     }                                                                                                    </span>
<span  style=""> 308                                                                                                          </span>
<span class="8766233022355759442" onmouseenter="enter('8766233022355759442');" onmouseout="out('8766233022355759442');" style=""> 309     private void signOut() {                                                                             </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 310         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 311         application.getSimperium().deauthorizeUser();                                                    </span>
<span  style=""> 312                                                                                                          </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 313         application.getNotesBucket().reset();                                                            </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 314         application.getTagsBucket().reset();                                                             </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 315         application.getPreferencesBucket().reset();                                                      </span>
<span  style=""> 316                                                                                                          </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 317         application.getNotesBucket().stop();                                                             </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 318         application.getTagsBucket().stop();                                                              </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 319         application.getPreferencesBucket().stop();                                                       </span>
<span  style=""> 320                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 321         AnalyticsTracker.track(                                                                          </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 322                 AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                   </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 323                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 324                 &quot;preferences_sign_out_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 325         );                                                                                               </span>
<span  style=""> 326                                                                                                          </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 327         // Resets analytics user back to &#x27;anon&#x27; type                                                     </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 328         AnalyticsTracker.refreshMetadata(null);                                                          </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 329         CrashUtils.clearCurrentUser();                                                                   </span>
<span  style=""> 330                                                                                                          </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 331         // Remove wp.com token                                                                           </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""><abbr title=" 332         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();"> 332         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edðŸ”µ</abbr></span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 333         editor.remove(PrefUtils.PREF_WP_TOKEN);                                                          </span>
<span  style=""> 334                                                                                                          </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 335         // Remove WordPress sites                                                                        </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 336         editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 337         editor.apply();                                                                                  </span>
<span  style=""> 338                                                                                                          </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 339         WidgetUtils.updateNoteWidgets(getActivity());                                                    </span>
<span  style=""> 340                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 341         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342     }                                                                                                    </span>
<span  style=""> 343                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 344     @Override                                                                                            </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 345     public void onUserStatusChange(User.Status status) {                                                 </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 346         if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                             </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 347             // User signed in                                                                            </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 348             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 349                 public void run() {                                                                      </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 350                     Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);         </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style=""> 351                     authenticatePreference.setTitle(R.string.sign_out);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 353             });                                                                                          </span>
<span  style=""> 354                                                                                                          </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 355             Simplenote app = (Simplenote) getActivity().getApplication();                                </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 356             AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                   </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 357             CrashUtils.setCurrentUser(app.getSimperium().getUser());                                     </span>
<span  style=""> 358                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 359             AnalyticsTracker.track(                                                                      </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 360                     AnalyticsTracker.Stat.USER_SIGNED_IN,                                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 361                     AnalyticsTracker.CATEGORY_USER,                                                      </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 362                     &quot;signed_in_from_preferences_activity&quot;                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 363             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365     }                                                                                                    </span>
<span  style=""> 366                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 367     @Override                                                                                            </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 368     public void onUserCreated(User user) {                                                               </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 369         AnalyticsTracker.track(                                                                          </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 370                 AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                              </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 371                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 372                 &quot;account_created_from_preferences_activity&quot;                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 373         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374     }                                                                                                    </span>
<span  style=""> 375                                                                                                          </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 376     private void updateAnalyticsSwitchState() {                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 377         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 378             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 379             mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 380         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 381             // The preferences object doesn&#x27;t exist for this user yet, create it                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 382             try {                                                                                        </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 383                 Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 384                 prefs.setAnalyticsEnabled(true);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 385                 prefs.save();                                                                            </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 386             } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                  </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 387                 bucketObjectNameInvalid.printStackTrace();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390     }                                                                                                    </span>
<span  style=""> 391                                                                                                          </span>
<span class="7423020127051897169" onmouseenter="enter('7423020127051897169');" onmouseout="out('7423020127051897169');" style=""> 392     private static class SignOutAsyncTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                       </span>
<span class="-7070495305382314238" onmouseenter="enter('-7070495305382314238');" onmouseout="out('-7070495305382314238');" style=""> 393         private WeakReference&lt;PreferencesFragment&gt; fragmentWeakReference;                                </span>
<span  style=""> 394                                                                                                          </span>
<span class="-2146654474322325437" onmouseenter="enter('-2146654474322325437');" onmouseout="out('-2146654474322325437');" style=""> 395         SignOutAsyncTask(PreferencesFragment fragment) {                                                 </span>
<span class="-2488741111041610979" onmouseenter="enter('-2488741111041610979');" onmouseout="out('-2488741111041610979');" style=""> 396             fragmentWeakReference = new WeakReference&lt;&gt;(fragment);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397         }                                                                                                </span>
<span  style=""> 398                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 399         @Override                                                                                        </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 400         protected Boolean doInBackground(Void... voids) {                                                </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 401             PreferencesFragment fragment = fragmentWeakReference.get();                                  </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 402             return fragment == null || fragment.hasUnsyncedNotes();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403         }                                                                                                </span>
<span  style=""> 404                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 405         @Override                                                                                        </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 406         protected void onPostExecute(Boolean hasUnsyncedNotes) {                                         </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 407             PreferencesFragment fragment = fragmentWeakReference.get();                                  </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 408             if (fragment == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 409                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410             }                                                                                            </span>
<span  style=""> 411                                                                                                          </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 412             // Safety first! Check if any notes are unsynced and warn the user if so.                    </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 413             if (hasUnsyncedNotes) {                                                                      </span>
<span class="3542977983821060447" onmouseenter="enter('3542977983821060447');" onmouseout="out('3542977983821060447');" style=""><abbr title=" 414                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog))"> 414                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.DialogðŸ”µ</abbr></span>
<span class="-3694903935099593007" onmouseenter="enter('-3694903935099593007');" onmouseout="out('-3694903935099593007');" style=""> 415                         .setTitle(R.string.unsynced_notes)                                               </span>
<span class="8004583072247328964" onmouseenter="enter('8004583072247328964');" onmouseout="out('8004583072247328964');" style=""> 416                         .setMessage(R.string.unsynced_notes_message)                                     </span>
<span class="8400076988868538626" onmouseenter="enter('8400076988868538626');" onmouseout="out('8400076988868538626');" style=""> 417                         .setPositiveButton(R.string.delete_notes, fragment.signOutClickListener)         </span>
<span class="7005110418642332587" onmouseenter="enter('7005110418642332587');" onmouseout="out('7005110418642332587');" style=""> 418                         .setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener)      </span>
<span class="-1520918194926717469" onmouseenter="enter('-1520918194926717469');" onmouseout="out('-1520918194926717469');" style=""> 419                         .setNegativeButton(R.string.cancel, null)                                        </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 420                         .show();                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 421             } else {                                                                                     </span>
<span class="2716263245214684515" onmouseenter="enter('2716263245214684515');" onmouseout="out('2716263245214684515');" style=""> 422                 fragment.signOut();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4 import android.app.Fragment;                                                                             </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   5 import android.content.DialogInterface;                                                                  </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   6 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   7 import android.content.SharedPreferences;                                                                </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   8 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   9 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  10 import android.os.Bundle;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  11 import android.widget.Toast;                                                                             </span>
<span  style="">  12                                                                                                          </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  13 import androidx.appcompat.app.AlertDialog;                                                               </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="">  14 import androidx.appcompat.view.ContextThemeWrapper;                                                      </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  15 import androidx.preference.ListPreference;                                                               </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  16 import androidx.preference.Preference;                                                                   </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  17 import androidx.preference.PreferenceFragmentCompat;                                                     </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  18 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  19 import androidx.preference.SwitchPreferenceCompat;                                                       </span>
<span  style="">  20                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  21 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  22 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  23 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  24 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  25 import com.automattic.simplenote.utils.HtmlCompat;                                                       </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  26 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  27 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  28 import com.simperium.Simperium;                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  29 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  30 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  31 import com.simperium.client.BucketObjectNameInvalid;                                                     </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  32 import com.simperium.client.User;                                                                        </span>
<span  style="">  33                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  34 import java.lang.ref.WeakReference;                                                                      </span>
<span  style="">  35                                                                                                          </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  36 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span  style="">  37                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  38 /**                                                                                                      </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  39  * A simple {@link Fragment} subclass.                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  40  */                                                                                                      </span>
<span class="8213712831003870267" onmouseenter="enter('8213712831003870267');" onmouseout="out('8213712831003870267');" style="">  41 public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener,  </span>
<span class="-6650933180145052624" onmouseenter="enter('-6650933180145052624');" onmouseout="out('-6650933180145052624');" style="">  42         Simperium.OnUserCreatedListener {                                                                </span>
<span  style="">  43                                                                                                          </span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  44     private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                              </span>
<span  style="">  45                                                                                                          </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  46     private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                      </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  47     private SwitchPreferenceCompat mAnalyticsSwitch;                                                     </span>
<span  style="">  48                                                                                                          </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  49     public PreferencesFragment() {                                                                       </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  50         // Required empty public constructor                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51     }                                                                                                    </span>
<span  style="">  52                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  53     @Override                                                                                            </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  54     public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                         </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  55         addPreferencesFromResource(R.xml.preferences);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  56     }                                                                                                    </span>
<span  style="">  57                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  58     @Override                                                                                            </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  59     public void onActivityCreated(Bundle savedInstanceState) {                                           </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  60         super.onActivityCreated(savedInstanceState);                                                     </span>
<span  style="">  61                                                                                                          </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  62         Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  63         Simplenote currentApp = (Simplenote) getActivity().getApplication();                             </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  64         Simperium simperium = currentApp.getSimperium();                                                 </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  65         simperium.setUserStatusChangeListener(this);                                                     </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  66         simperium.setOnUserCreatedListener(this);                                                        </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  67         mPreferencesBucket = currentApp.getPreferencesBucket();                                          </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  68         mPreferencesBucket.start();                                                                      </span>
<span  style="">  69                                                                                                          </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  70         authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());               </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  71         if (simperium.needsAuthorization()) {                                                            </span>
<span class="-8833460600410674775" onmouseenter="enter('-8833460600410674775');" onmouseout="out('-8833460600410674775');" style="">  72             authenticatePreference.setTitle(R.string.sign_in);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  73         } else {                                                                                         </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style="">  74             authenticatePreference.setTitle(R.string.sign_out);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75         }                                                                                                </span>
<span  style="">  76                                                                                                          </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  77         authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  78             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  79             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  80                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  81                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82                 }                                                                                        </span>
<span  style="">  83                                                                                                          </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  84                 Simplenote currentApp = (Simplenote) getActivity().getApplication();                     </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  85                 if (currentApp.getSimperium().needsAuthorization()) {                                    </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style=""><abbr title="  86                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);">  86                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.classðŸ”µ</abbr></span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  87                     startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  88                 } else {                                                                                 </span>
<span class="2350031306572446790" onmouseenter="enter('2350031306572446790');" onmouseout="out('2350031306572446790');" style="">  89                     new SignOutAsyncTask(PreferencesFragment.this).execute();                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  91                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  93         });                                                                                              </span>
<span  style="">  94                                                                                                          </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title="  95         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {">  95         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  96             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  97             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  98                 try {                                                                                    </span>
<span class="-1694196419231190477" onmouseenter="enter('-1694196419231190477');" onmouseout="out('-1694196419231190477');" style="">  99                     startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;http://simplenote.com&quot;)));   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 100                 } catch (Exception e) {                                                                  </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""><abbr title=" 101                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();"> 101                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 103                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 105         });                                                                                              </span>
<span  style=""> 106                                                                                                          </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""><abbr title=" 107         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 107         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLisðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 108             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 109             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 110                 startActivity(new Intent(getActivity(), AboutActivity.class));                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 111                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 113         });                                                                                              </span>
<span  style=""> 114                                                                                                          </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style=""> 115         final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);    </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 116         themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 117             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 118             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 119 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 120                                                                                                          </span>
<span class="-8950154229773712279" onmouseenter="enter('-8950154229773712279');" onmouseout="out('-8950154229773712279');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 121                 final Activity activity = getActivity();                                                 </span>
<span class="-6633936886481537446" onmouseenter="enter('-6633936886481537446');" onmouseout="out('-6633936886481537446');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 122                 final int index = Integer.parseInt(newValue.toString());                                 </span>
<span class="-5762454067215313163" onmouseenter="enter('-5762454067215313163');" onmouseout="out('-5762454067215313163');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 123                 if (index == ThemeUtils.THEME_AUTO) {                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 124                                                                                                          </span>
<span class="-125851769992898991" onmouseenter="enter('-125851769992898991');" onmouseout="out('-125851769992898991');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 125                     PermissionListener permissionListener = new BasePermissionListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 126                         @Override                                                                        </span>
<span class="-3000343133930385097" onmouseenter="enter('-3000343133930385097');" onmouseout="out('-3000343133930385097');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 127                         public void onPermissionGranted(PermissionGrantedResponse response) {            </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 128                             updateTheme(activity, index);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 129                         }                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 130                         @Override                                                                        </span>
<span class="8814191998418862732" onmouseenter="enter('8814191998418862732');" onmouseout="out('8814191998418862732');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 131                         public void onPermissionDenied(PermissionDeniedResponse response) {              </span>
<span class="4936583139660390377" onmouseenter="enter('4936583139660390377');" onmouseout="out('4936583139660390377');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 132                             new AlertDialog.Builder(new ContextThemeWrapper(activity, R.style.Dialog))   </span>
<span class="5442284200977907926" onmouseenter="enter('5442284200977907926');" onmouseout="out('5442284200977907926');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 133                                     .setTitle(R.string.location_permission_denied)                       </span>
<span class="-1242141747673008599" onmouseenter="enter('-1242141747673008599');" onmouseout="out('-1242141747673008599');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 134                                     .setMessage(R.string.location_permission_explanation)                </span>
<span class="-5617878821115539617" onmouseenter="enter('-5617878821115539617');" onmouseout="out('-5617878821115539617');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 135                                     .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {"> 135                                     .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickLiðŸ”µ</abbr></span>
<span class="-4394730415325685177" onmouseenter="enter('-4394730415325685177');" onmouseout="out('-4394730415325685177');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 136                                         @Override public void onClick(DialogInterface dialog, int which) {"> 136                                         @Override public void onClick(DialogInterface dialog, int which) ðŸ”µ</abbr></span>
<span class="6280999572192694622" onmouseenter="enter('6280999572192694622');" onmouseout="out('6280999572192694622');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 137                                             dialog.dismiss();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 138                                         }                                                                </span>
<span class="7022022634399588778" onmouseenter="enter('7022022634399588778');" onmouseout="out('7022022634399588778');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 139                                     })                                                                   </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 140                                     .show();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 141                         }                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 142                     };                                                                                   </span>
<span class="-2740166548755332383" onmouseenter="enter('-2740166548755332383');" onmouseout="out('-2740166548755332383');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 143                     Dexter.withActivity(activity)                                                        </span>
<span class="-2228141653004003578" onmouseenter="enter('-2228141653004003578');" onmouseout="out('-2228141653004003578');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 144                             .withPermission(Manifest.permission.ACCESS_COARSE_LOCATION)                  </span>
<span class="-7869452323989914547" onmouseenter="enter('-7869452323989914547');" onmouseout="out('-7869452323989914547');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 145                             .withListener(permissionListener)                                            </span>
<span class="5694714174168919103" onmouseenter="enter('5694714174168919103');" onmouseout="out('5694714174168919103');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 146                             .check();                                                                    </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 147                     updateTheme(activity, index);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 148                 } else {                                                                                 </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 149                     updateTheme(activity, index);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 150                 }                                                                                        </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 151                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 152 ||||||| BASE                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154                                                                                                          </span>
<span class="-8950154229773712279" onmouseenter="enter('-8950154229773712279');" onmouseout="out('-8950154229773712279');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155                 final Activity activity = getActivity();                                                 </span>
<span class="-6633936886481537446" onmouseenter="enter('-6633936886481537446');" onmouseout="out('-6633936886481537446');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156                 final int index = Integer.parseInt(newValue.toString());                                 </span>
<span class="-5762454067215313163" onmouseenter="enter('-5762454067215313163');" onmouseout="out('-5762454067215313163');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157                 if (index == ThemeUtils.THEME_AUTO) {                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158                                                                                                          </span>
<span class="-125851769992898991" onmouseenter="enter('-125851769992898991');" onmouseout="out('-125851769992898991');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159                     PermissionListener permissionListener = new BasePermissionListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160                         @Override                                                                        </span>
<span class="-3000343133930385097" onmouseenter="enter('-3000343133930385097');" onmouseout="out('-3000343133930385097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161                         public void onPermissionGranted(PermissionGrantedResponse response) {            </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162                             updateTheme(activity, index);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163                         }                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164                         @Override                                                                        </span>
<span class="8814191998418862732" onmouseenter="enter('8814191998418862732');" onmouseout="out('8814191998418862732');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165                         public void onPermissionDenied(PermissionDeniedResponse response) {              </span>
<span class="4153180082075357136" onmouseenter="enter('4153180082075357136');" onmouseout="out('4153180082075357136');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 166                             new AlertDialog.Builder(activity)                                            </span>
<span class="5442284200977907926" onmouseenter="enter('5442284200977907926');" onmouseout="out('5442284200977907926');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 167                                     .setTitle(R.string.location_permission_denied)                       </span>
<span class="-1242141747673008599" onmouseenter="enter('-1242141747673008599');" onmouseout="out('-1242141747673008599');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168                                     .setMessage(R.string.location_permission_explanation)                </span>
<span class="-5617878821115539617" onmouseenter="enter('-5617878821115539617');" onmouseout="out('-5617878821115539617');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 169                                     .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {"> 169                                     .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickLiðŸ”µ</abbr></span>
<span class="-4394730415325685177" onmouseenter="enter('-4394730415325685177');" onmouseout="out('-4394730415325685177');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 170                                         @Override public void onClick(DialogInterface dialog, int which) {"> 170                                         @Override public void onClick(DialogInterface dialog, int which) ðŸ”µ</abbr></span>
<span class="6280999572192694622" onmouseenter="enter('6280999572192694622');" onmouseout="out('6280999572192694622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171                                             dialog.dismiss();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 172                                         }                                                                </span>
<span class="7022022634399588778" onmouseenter="enter('7022022634399588778');" onmouseout="out('7022022634399588778');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 173                                     })                                                                   </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 174                                     .show();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 175                         }                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 176                     };                                                                                   </span>
<span class="-2740166548755332383" onmouseenter="enter('-2740166548755332383');" onmouseout="out('-2740166548755332383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 177                     Dexter.withActivity(activity)                                                        </span>
<span class="-2228141653004003578" onmouseenter="enter('-2228141653004003578');" onmouseout="out('-2228141653004003578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 178                             .withPermission(Manifest.permission.ACCESS_COARSE_LOCATION)                  </span>
<span class="-7869452323989914547" onmouseenter="enter('-7869452323989914547');" onmouseout="out('-7869452323989914547');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179                             .withListener(permissionListener)                                            </span>
<span class="5694714174168919103" onmouseenter="enter('5694714174168919103');" onmouseout="out('5694714174168919103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180                             .check();                                                                    </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181                     updateTheme(activity, index);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182                 } else {                                                                                 </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183                     updateTheme(activity, index);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 184                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 185                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 186 =======                                                                                                  </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 187                 updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                   </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 188 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 189                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190             }                                                                                            </span>
<span  style=""> 191                                                                                                          </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 192             private void updateTheme(Activity activity, int index) {                                     </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 193                 CharSequence[] entries = themePreference.getEntries();                                   </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 194                 themePreference.setSummary(entries[index]);                                              </span>
<span  style=""> 195                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 196                 AnalyticsTracker.track(                                                                  </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 197                         AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                    </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 198                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 199                         &quot;theme_preference&quot;                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 200                 );                                                                                       </span>
<span  style=""> 201                                                                                                          </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 202                 // recreate the activity so new theme is applied                                         </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 203                 activity.recreate();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 205         });                                                                                              </span>
<span  style=""> 206                                                                                                          </span>
<span class="-3563544225355858599" onmouseenter="enter('-3563544225355858599');" onmouseout="out('-3563544225355858599');" style=""> 207         final ListPreference sortPreference = (ListPreference) findPreference(PrefUtils.PREF_SORT_ORDER);</span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 208         sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 209             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 210             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 211                 int index = Integer.parseInt(newValue.toString());                                       </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 212                 CharSequence[] entries = sortPreference.getEntries();                                    </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 213                 sortPreference.setSummary(entries[index]);                                               </span>
<span  style=""> 214                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 215                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 217         });                                                                                              </span>
<span  style=""> 218                                                                                                          </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 219         Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                       </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 220         versionPref.setSummary(PrefUtils.versionInfo());                                                 </span>
<span  style=""> 221                                                                                                          </span>
<span class="269389859234146346" onmouseenter="enter('269389859234146346');" onmouseout="out('269389859234146346');" style=""><abbr title=" 222         SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note_list&quot;);"> 222         SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condeðŸ”µ</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 223         switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 224             @Override                                                                                    </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 225             public boolean onPreferenceChange(Preference preference, Object o) {                         </span>
<span class="2703036426639498311" onmouseenter="enter('2703036426639498311');" onmouseout="out('2703036426639498311');" style=""> 226                 if (((SwitchPreferenceCompat) preference).isChecked()) {                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 227                     AnalyticsTracker.track(                                                              </span>
<span class="8127526149566412653" onmouseenter="enter('8127526149566412653');" onmouseout="out('8127526149566412653');" style=""> 228                             AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED,                       </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 229                             AnalyticsTracker.CATEGORY_USER,                                              </span>
<span class="-7341164689664996576" onmouseenter="enter('-7341164689664996576');" onmouseout="out('-7341164689664996576');" style=""> 230                             &quot;condensed_list_preference&quot;                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 231                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232                 }                                                                                        </span>
<span  style=""> 233                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 234                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 236         });                                                                                              </span>
<span  style=""> 237                                                                                                          </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 238         // Add the hyperlink to the analytics summary                                                    </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 239         Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);    </span>
<span class="-5954923786447915621" onmouseenter="enter('-5954923786447915621');" onmouseout="out('-5954923786447915621');" style=""> 240         String formattedSummary = String.format(                                                         </span>
<span class="4703350175896481792" onmouseenter="enter('4703350175896481792');" onmouseout="out('4703350175896481792');" style=""> 241                 getString(R.string.share_analytics_summary),                                             </span>
<span class="4561110205824883354" onmouseenter="enter('4561110205824883354');" onmouseout="out('4561110205824883354');" style=""> 242                 &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;,                                           </span>
<span class="-5125567965545776439" onmouseenter="enter('-5125567965545776439');" onmouseout="out('-5125567965545776439');" style=""> 243                 &quot;&lt;/a&gt;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 244         );                                                                                               </span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 245         analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                    </span>
<span  style=""> 246                                                                                                          </span>
<span class="2122402547097653030" onmouseenter="enter('2122402547097653030');" onmouseout="out('2122402547097653030');" style=""> 247         mAnalyticsSwitch = (SwitchPreferenceCompat)findPreference(&quot;pref_key_analytics_switch&quot;);          </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 248         mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 249             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 250             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 251                 try {                                                                                    </span>
<span class="7999271203428147057" onmouseenter="enter('7999271203428147057');" onmouseout="out('7999271203428147057');" style=""> 252                     boolean isChecked = (boolean)newValue;                                               </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 253                     Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                  </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 254                     prefs.setAnalyticsEnabled(isChecked);                                                </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 255                     prefs.save();                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 256                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 257                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258                 }                                                                                        </span>
<span  style=""> 259                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 260                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 262         });                                                                                              </span>
<span  style=""> 263                                                                                                          </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 264         updateAnalyticsSwitchState();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265     }                                                                                                    </span>
<span  style=""> 266                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 267     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 268     public void onPause() {                                                                              </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 269         super.onPause();                                                                                 </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 270         mPreferencesBucket.stop();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271     }                                                                                                    </span>
<span  style=""> 272                                                                                                          </span>
<span class="7556645464441156739" onmouseenter="enter('7556645464441156739');" onmouseout="out('7556645464441156739');" style=""><abbr title=" 273     private DialogInterface.OnClickListener signOutClickListener = new DialogInterface.OnClickListener() {"> 273     private DialogInterface.OnClickListener signOutClickListener = new DialogInterface.OnClickListener() ðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 274         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 275         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="2650837461401234425" onmouseenter="enter('2650837461401234425');" onmouseout="out('2650837461401234425');" style=""> 276             signOut();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 278     };                                                                                                   </span>
<span  style=""> 279                                                                                                          </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""><abbr title=" 280     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {"> 280     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListenerðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 281         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 282         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-4028427458665571821" onmouseenter="enter('-4028427458665571821');" onmouseout="out('-4028427458665571821');" style=""> 283             startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(WEB_APP_URL)));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 285     };                                                                                                   </span>
<span  style=""> 286                                                                                                          </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 287     private boolean hasUnsyncedNotes() {                                                                 </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 288         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 289         Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 290         Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 291         while (notesCursor.moveToNext()) {                                                               </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 292             Note note = notesCursor.getObject();                                                         </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 293             if (note.isNew() || note.isModified()) {                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 294                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296         }                                                                                                </span>
<span  style=""> 297                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 298         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299     }                                                                                                    </span>
<span  style=""> 300                                                                                                          </span>
<span class="8766233022355759442" onmouseenter="enter('8766233022355759442');" onmouseout="out('8766233022355759442');" style=""> 301     private void signOut() {                                                                             </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 302         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 303         application.getSimperium().deauthorizeUser();                                                    </span>
<span  style=""> 304                                                                                                          </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 305         application.getNotesBucket().reset();                                                            </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 306         application.getTagsBucket().reset();                                                             </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 307         application.getPreferencesBucket().reset();                                                      </span>
<span  style=""> 308                                                                                                          </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 309         application.getNotesBucket().stop();                                                             </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 310         application.getTagsBucket().stop();                                                              </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 311         application.getPreferencesBucket().stop();                                                       </span>
<span  style=""> 312                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 313         AnalyticsTracker.track(                                                                          </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 314                 AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                   </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 315                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 316                 &quot;preferences_sign_out_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 317         );                                                                                               </span>
<span  style=""> 318                                                                                                          </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 319         // Resets analytics user back to &#x27;anon&#x27; type                                                     </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 320         AnalyticsTracker.refreshMetadata(null);                                                          </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 321         CrashUtils.clearCurrentUser();                                                                   </span>
<span  style=""> 322                                                                                                          </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 323         // Remove wp.com token                                                                           </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""><abbr title=" 324         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();"> 324         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edðŸ”µ</abbr></span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 325         editor.remove(PrefUtils.PREF_WP_TOKEN);                                                          </span>
<span  style=""> 326                                                                                                          </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 327         // Remove WordPress sites                                                                        </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 328         editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 329         editor.apply();                                                                                  </span>
<span  style=""> 330                                                                                                          </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 331         WidgetUtils.updateNoteWidgets(getActivity());                                                    </span>
<span  style=""> 332                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 333         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334     }                                                                                                    </span>
<span  style=""> 335                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 336     @Override                                                                                            </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 337     public void onUserStatusChange(User.Status status) {                                                 </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 338         if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                             </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 339             // User signed in                                                                            </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 340             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 341                 public void run() {                                                                      </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 342                     Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);         </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style=""> 343                     authenticatePreference.setTitle(R.string.sign_out);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 345             });                                                                                          </span>
<span  style=""> 346                                                                                                          </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 347             Simplenote app = (Simplenote) getActivity().getApplication();                                </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 348             AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                   </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 349             CrashUtils.setCurrentUser(app.getSimperium().getUser());                                     </span>
<span  style=""> 350                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 351             AnalyticsTracker.track(                                                                      </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 352                     AnalyticsTracker.Stat.USER_SIGNED_IN,                                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 353                     AnalyticsTracker.CATEGORY_USER,                                                      </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 354                     &quot;signed_in_from_preferences_activity&quot;                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 355             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357     }                                                                                                    </span>
<span  style=""> 358                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 359     @Override                                                                                            </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 360     public void onUserCreated(User user) {                                                               </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 361         AnalyticsTracker.track(                                                                          </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 362                 AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                              </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 363                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 364                 &quot;account_created_from_preferences_activity&quot;                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 365         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366     }                                                                                                    </span>
<span  style=""> 367                                                                                                          </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 368     private void updateAnalyticsSwitchState() {                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 369         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 370             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 371             mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 372         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 373             // The preferences object doesn&#x27;t exist for this user yet, create it                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 374             try {                                                                                        </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 375                 Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 376                 prefs.setAnalyticsEnabled(true);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 377                 prefs.save();                                                                            </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 378             } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                  </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 379                 bucketObjectNameInvalid.printStackTrace();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382     }                                                                                                    </span>
<span  style=""> 383                                                                                                          </span>
<span class="7423020127051897169" onmouseenter="enter('7423020127051897169');" onmouseout="out('7423020127051897169');" style=""> 384     private static class SignOutAsyncTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                       </span>
<span class="-7070495305382314238" onmouseenter="enter('-7070495305382314238');" onmouseout="out('-7070495305382314238');" style=""> 385         private WeakReference&lt;PreferencesFragment&gt; fragmentWeakReference;                                </span>
<span  style=""> 386                                                                                                          </span>
<span class="-2146654474322325437" onmouseenter="enter('-2146654474322325437');" onmouseout="out('-2146654474322325437');" style=""> 387         SignOutAsyncTask(PreferencesFragment fragment) {                                                 </span>
<span class="-2488741111041610979" onmouseenter="enter('-2488741111041610979');" onmouseout="out('-2488741111041610979');" style=""> 388             fragmentWeakReference = new WeakReference&lt;&gt;(fragment);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389         }                                                                                                </span>
<span  style=""> 390                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 391         @Override                                                                                        </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 392         protected Boolean doInBackground(Void... voids) {                                                </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 393             PreferencesFragment fragment = fragmentWeakReference.get();                                  </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 394             return fragment == null || fragment.hasUnsyncedNotes();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395         }                                                                                                </span>
<span  style=""> 396                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 397         @Override                                                                                        </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 398         protected void onPostExecute(Boolean hasUnsyncedNotes) {                                         </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 399             PreferencesFragment fragment = fragmentWeakReference.get();                                  </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 400             if (fragment == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 401                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402             }                                                                                            </span>
<span  style=""> 403                                                                                                          </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 404             // Safety first! Check if any notes are unsynced and warn the user if so.                    </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 405             if (hasUnsyncedNotes) {                                                                      </span>
<span class="3542977983821060447" onmouseenter="enter('3542977983821060447');" onmouseout="out('3542977983821060447');" style=""><abbr title=" 406                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog))"> 406                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.DialogðŸ”µ</abbr></span>
<span class="-3694903935099593007" onmouseenter="enter('-3694903935099593007');" onmouseout="out('-3694903935099593007');" style=""> 407                         .setTitle(R.string.unsynced_notes)                                               </span>
<span class="8004583072247328964" onmouseenter="enter('8004583072247328964');" onmouseout="out('8004583072247328964');" style=""> 408                         .setMessage(R.string.unsynced_notes_message)                                     </span>
<span class="8400076988868538626" onmouseenter="enter('8400076988868538626');" onmouseout="out('8400076988868538626');" style=""> 409                         .setPositiveButton(R.string.delete_notes, fragment.signOutClickListener)         </span>
<span class="7005110418642332587" onmouseenter="enter('7005110418642332587');" onmouseout="out('7005110418642332587');" style=""> 410                         .setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener)      </span>
<span class="-1520918194926717469" onmouseenter="enter('-1520918194926717469');" onmouseout="out('-1520918194926717469');" style=""> 411                         .setNegativeButton(R.string.cancel, null)                                        </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 412                         .show();                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 413             } else {                                                                                     </span>
<span class="2716263245214684515" onmouseenter="enter('2716263245214684515');" onmouseout="out('2716263245214684515');" style=""> 414                 fragment.signOut();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418 }                                                                                                        </span>






</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4 import android.app.Fragment;                                                                             </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   5 import android.content.DialogInterface;                                                                  </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   6 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   7 import android.content.SharedPreferences;                                                                </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   8 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   9 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  10 import android.os.Bundle;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  11 import android.widget.Toast;                                                                             </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  12 import androidx.appcompat.app.AlertDialog;                                                               </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="">  13 import androidx.appcompat.view.ContextThemeWrapper;                                                      </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  14 import androidx.preference.ListPreference;                                                               </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  15 import androidx.preference.Preference;                                                                   </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  16 import androidx.preference.PreferenceFragmentCompat;                                                     </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  17 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  18 import androidx.preference.SwitchPreferenceCompat;                                                       </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  19 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  20 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  21 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  22 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  23 import com.automattic.simplenote.utils.HtmlCompat;                                                       </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  24 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  25 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  26 import com.simperium.Simperium;                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  27 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  28 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  29 import com.simperium.client.BucketObjectNameInvalid;                                                     </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  30 import com.simperium.client.User;                                                                        </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  31 import java.lang.ref.WeakReference;                                                                      </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  32 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span  style="">  33                                                                                                          </span>
<span  style="">  34                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  35 /**                                                                                                      </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  36  * A simple {@link Fragment} subclass.                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  37  */                                                                                                      </span>
<span class="-7540062518027686993" onmouseenter="enter('-7540062518027686993');" onmouseout="out('-7540062518027686993');" style=""><abbr title="  38 public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener , Simperium.OnUserCreatedListener {">  38 public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener , ðŸ”µ</abbr></span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  39     private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                              </span>
<span  style="">  40                                                                                                          </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  41     private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                      </span>
<span  style="">  42                                                                                                          </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  43     private SwitchPreferenceCompat mAnalyticsSwitch;                                                     </span>
<span  style="">  44                                                                                                          </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  45     public PreferencesFragment() {                                                                       </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  46         // Required empty public constructor                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  47     }                                                                                                    </span>
<span  style="">  48                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  49     @Override                                                                                            </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  50     public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                         </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  51         addPreferencesFromResource(R.xml.preferences);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  52     }                                                                                                    </span>
<span  style="">  53                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  54     @Override                                                                                            </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  55     public void onActivityCreated(Bundle savedInstanceState) {                                           </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  56         super.onActivityCreated(savedInstanceState);                                                     </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  57         Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                     </span>
<span class="4803144681849619263" onmouseenter="enter('4803144681849619263');" onmouseout="out('4803144681849619263');" style="">  58         Simplenote currentApp = ((Simplenote) (getActivity().getApplication()));                         </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  59         Simperium simperium = currentApp.getSimperium();                                                 </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  60         simperium.setUserStatusChangeListener(this);                                                     </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  61         simperium.setOnUserCreatedListener(this);                                                        </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  62         mPreferencesBucket = currentApp.getPreferencesBucket();                                          </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  63         mPreferencesBucket.start();                                                                      </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  64         authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());               </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  65         if (simperium.needsAuthorization()) {                                                            </span>
<span class="-8833460600410674775" onmouseenter="enter('-8833460600410674775');" onmouseout="out('-8833460600410674775');" style="">  66             authenticatePreference.setTitle(R.string.sign_in);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  67         } else {                                                                                         </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style="">  68             authenticatePreference.setTitle(R.string.sign_out);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69         }                                                                                                </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  70         authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  71             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  72             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  73                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  74                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75                 }                                                                                        </span>
<span class="4803144681849619263" onmouseenter="enter('4803144681849619263');" onmouseout="out('4803144681849619263');" style="">  76                 Simplenote currentApp = ((Simplenote) (getActivity().getApplication()));                 </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  77                 if (currentApp.getSimperium().needsAuthorization()) {                                    </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style=""><abbr title="  78                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);">  78                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.classðŸ”µ</abbr></span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  79                     startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  80                 } else {                                                                                 </span>
<span class="2350031306572446790" onmouseenter="enter('2350031306572446790');" onmouseout="out('2350031306572446790');" style="">  81                     new SignOutAsyncTask(PreferencesFragment.this).execute();                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  83                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  85         });                                                                                              </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title="  86         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {">  86         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  87             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  88             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  89                 try {                                                                                    </span>
<span class="-1694196419231190477" onmouseenter="enter('-1694196419231190477');" onmouseout="out('-1694196419231190477');" style="">  90                     startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;http://simplenote.com&quot;)));   </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">  91                 } catch (java.lang.Exception e) {                                                        </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""><abbr title="  92                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();">  92                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  94                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  96         });                                                                                              </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""><abbr title="  97         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {">  97         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLisðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  98             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  99             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 100                 startActivity(new Intent(getActivity(), AboutActivity.class));                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 101                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 103         });                                                                                              </span>
<span class="783938452196467655" onmouseenter="enter('783938452196467655');" onmouseout="out('783938452196467655');" style=""> 104         final ListPreference themePreference = ((ListPreference) (findPreference(PrefUtils.PREF_THEME)));</span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 105         themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 106             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 107             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style=""> 108                 updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 109                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110             }                                                                                            </span>
<span  style=""> 111                                                                                                          </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 112             private void updateTheme(Activity activity, int index) {                                     </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 113                 CharSequence[] entries = themePreference.getEntries();                                   </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 114                 themePreference.setSummary(entries[index]);                                              </span>
<span  style=""> 115                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 116                 AnalyticsTracker.track(                                                                  </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 117                         AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                    </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 118                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 119                         &quot;theme_preference&quot;                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 120                 );                                                                                       </span>
<span  style=""> 121                                                                                                          </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 122                 // recreate the activity so new theme is applied                                         </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 123                 activity.recreate();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 125         });                                                                                              </span>
<span class="991214459467495297" onmouseenter="enter('991214459467495297');" onmouseout="out('991214459467495297');" style=""><abbr title=" 126         final ListPreference sortPreference = ((ListPreference) (findPreference(PrefUtils.PREF_SORT_ORDER)));"> 126         final ListPreference sortPreference = ((ListPreference) (findPreference(PrefUtils.PREF_SORT_ORDERðŸ”µ</abbr></span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 127         sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 128             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 129             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 130                 int index = Integer.parseInt(newValue.toString());                                       </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 131                 CharSequence[] entries = sortPreference.getEntries();                                    </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 132                 sortPreference.setSummary(entries[index]);                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 133                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 135         });                                                                                              </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 136         Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                       </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 137         versionPref.setSummary(PrefUtils.versionInfo());                                                 </span>
<span class="5110844832592168650" onmouseenter="enter('5110844832592168650');" onmouseout="out('5110844832592168650');" style=""><abbr title=" 138         SwitchPreferenceCompat switchPreference = ((SwitchPreferenceCompat) (findPreference(&quot;pref_key_condensed_note_list&quot;)));"> 138         SwitchPreferenceCompat switchPreference = ((SwitchPreferenceCompat) (findPreference(&quot;pref_key_conðŸ”µ</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 139         switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 140             @Override                                                                                    </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 141             public boolean onPreferenceChange(Preference preference, Object o) {                         </span>
<span class="-454987626601386721" onmouseenter="enter('-454987626601386721');" onmouseout="out('-454987626601386721');" style=""> 142                 if (((SwitchPreferenceCompat) (preference)).isChecked()) {                               </span>
<span class="-5939352487095839969" onmouseenter="enter('-5939352487095839969');" onmouseout="out('-5939352487095839969');" style=""><abbr title=" 143                     AnalyticsTracker.track(AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED, AnalyticsTracker.CATEGORY_USER, &quot;condensed_list_preference&quot;);"> 143                     AnalyticsTracker.track(AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED, AnalytiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 145                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 147         });                                                                                              </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 148         // Add the hyperlink to the analytics summary                                                    </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 149         Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);    </span>
<span class="6934693986878238280" onmouseenter="enter('6934693986878238280');" onmouseout="out('6934693986878238280');" style=""><abbr title=" 150         String formattedSummary = String.format(getString(R.string.share_analytics_summary), &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;, &quot;&lt;/a&gt;&quot;);"> 150         String formattedSummary = String.format(getString(R.string.share_analytics_summary), &quot;&lt;a href=\&quot;hðŸ”µ</abbr></span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 151         analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                    </span>
<span class="-4523157399428350126" onmouseenter="enter('-4523157399428350126');" onmouseout="out('-4523157399428350126');" style=""> 152         mAnalyticsSwitch = ((SwitchPreferenceCompat) (findPreference(&quot;pref_key_analytics_switch&quot;)));     </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 153         mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 155             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 156                 try {                                                                                    </span>
<span class="-218707031809364308" onmouseenter="enter('-218707031809364308');" onmouseout="out('-218707031809364308');" style=""> 157                     boolean isChecked = ((boolean) (newValue));                                          </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 158                     Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                  </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 159                     prefs.setAnalyticsEnabled(isChecked);                                                </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 160                     prefs.save();                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 161                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 162                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 164                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 166         });                                                                                              </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 167         updateAnalyticsSwitchState();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168     }                                                                                                    </span>
<span  style=""> 169                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 171     public void onPause() {                                                                              </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 172         super.onPause();                                                                                 </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 173         mPreferencesBucket.stop();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174     }                                                                                                    </span>
<span  style=""> 175                                                                                                          </span>
<span class="7556645464441156739" onmouseenter="enter('7556645464441156739');" onmouseout="out('7556645464441156739');" style=""><abbr title=" 176     private DialogInterface.OnClickListener signOutClickListener = new DialogInterface.OnClickListener() {"> 176     private DialogInterface.OnClickListener signOutClickListener = new DialogInterface.OnClickListener() ðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 177         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 178         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="2650837461401234425" onmouseenter="enter('2650837461401234425');" onmouseout="out('2650837461401234425');" style=""> 179             signOut();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 181     };                                                                                                   </span>
<span  style=""> 182                                                                                                          </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""><abbr title=" 183     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {"> 183     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListenerðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 184         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 185         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-4028427458665571821" onmouseenter="enter('-4028427458665571821');" onmouseout="out('-4028427458665571821');" style=""> 186             startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(WEB_APP_URL)));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 188     };                                                                                                   </span>
<span  style=""> 189                                                                                                          </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 190     private boolean hasUnsyncedNotes() {                                                                 </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 191         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 192         Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 193         Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 194         while (notesCursor.moveToNext()) {                                                               </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 195             Note note = notesCursor.getObject();                                                         </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 196             if (note.isNew() || note.isModified()) {                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 197                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199         }                                                                                                </span>
<span  style=""> 200                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 201         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span class="8766233022355759442" onmouseenter="enter('8766233022355759442');" onmouseout="out('8766233022355759442');" style=""> 204     private void signOut() {                                                                             </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 205         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 206         application.getSimperium().deauthorizeUser();                                                    </span>
<span  style=""> 207                                                                                                          </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 208         application.getNotesBucket().reset();                                                            </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 209         application.getTagsBucket().reset();                                                             </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 210         application.getPreferencesBucket().reset();                                                      </span>
<span  style=""> 211                                                                                                          </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 212         application.getNotesBucket().stop();                                                             </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 213         application.getTagsBucket().stop();                                                              </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 214         application.getPreferencesBucket().stop();                                                       </span>
<span  style=""> 215                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 216         AnalyticsTracker.track(                                                                          </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 217                 AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                   </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 218                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 219                 &quot;preferences_sign_out_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 220         );                                                                                               </span>
<span  style=""> 221                                                                                                          </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 222         // Resets analytics user back to &#x27;anon&#x27; type                                                     </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 223         AnalyticsTracker.refreshMetadata(null);                                                          </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 224         CrashUtils.clearCurrentUser();                                                                   </span>
<span  style=""> 225                                                                                                          </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 226         // Remove wp.com token                                                                           </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""><abbr title=" 227         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();"> 227         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edðŸ”µ</abbr></span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 228         editor.remove(PrefUtils.PREF_WP_TOKEN);                                                          </span>
<span  style=""> 229                                                                                                          </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 230         // Remove WordPress sites                                                                        </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 231         editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 232         editor.apply();                                                                                  </span>
<span  style=""> 233                                                                                                          </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 234         WidgetUtils.updateNoteWidgets(getActivity());                                                    </span>
<span  style=""> 235                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 236         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237     }                                                                                                    </span>
<span  style=""> 238                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 239     @Override                                                                                            </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 240     public void onUserStatusChange(User.Status status) {                                                 </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 241         if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                             </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 242             // User signed in                                                                            </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 243             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 244                 public void run() {                                                                      </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 245                     Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);         </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style=""> 246                     authenticatePreference.setTitle(R.string.sign_out);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 248             });                                                                                          </span>
<span  style=""> 249                                                                                                          </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 250             Simplenote app = (Simplenote) getActivity().getApplication();                                </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 251             AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                   </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 252             CrashUtils.setCurrentUser(app.getSimperium().getUser());                                     </span>
<span  style=""> 253                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 254             AnalyticsTracker.track(                                                                      </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 255                     AnalyticsTracker.Stat.USER_SIGNED_IN,                                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 256                     AnalyticsTracker.CATEGORY_USER,                                                      </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 257                     &quot;signed_in_from_preferences_activity&quot;                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 258             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260     }                                                                                                    </span>
<span  style=""> 261                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 262     @Override                                                                                            </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 263     public void onUserCreated(User user) {                                                               </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 264         AnalyticsTracker.track(                                                                          </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 265                 AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                              </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 266                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 267                 &quot;account_created_from_preferences_activity&quot;                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 268         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269     }                                                                                                    </span>
<span  style=""> 270                                                                                                          </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 271     private void updateAnalyticsSwitchState() {                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 272         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 273             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 274             mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 275         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 276             // The preferences object doesn&#x27;t exist for this user yet, create it                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 277             try {                                                                                        </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 278                 Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 279                 prefs.setAnalyticsEnabled(true);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 280                 prefs.save();                                                                            </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 281             } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                  </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 282                 bucketObjectNameInvalid.printStackTrace();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285     }                                                                                                    </span>
<span  style=""> 286                                                                                                          </span>
<span class="7423020127051897169" onmouseenter="enter('7423020127051897169');" onmouseout="out('7423020127051897169');" style=""> 287     private static class SignOutAsyncTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                       </span>
<span class="-7070495305382314238" onmouseenter="enter('-7070495305382314238');" onmouseout="out('-7070495305382314238');" style=""> 288         private WeakReference&lt;PreferencesFragment&gt; fragmentWeakReference;                                </span>
<span  style=""> 289                                                                                                          </span>
<span class="-2146654474322325437" onmouseenter="enter('-2146654474322325437');" onmouseout="out('-2146654474322325437');" style=""> 290         SignOutAsyncTask(PreferencesFragment fragment) {                                                 </span>
<span class="-2488741111041610979" onmouseenter="enter('-2488741111041610979');" onmouseout="out('-2488741111041610979');" style=""> 291             fragmentWeakReference = new WeakReference&lt;&gt;(fragment);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292         }                                                                                                </span>
<span  style=""> 293                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 294         @Override                                                                                        </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 295         protected Boolean doInBackground(Void... voids) {                                                </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 296             PreferencesFragment fragment = fragmentWeakReference.get();                                  </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 297             return fragment == null || fragment.hasUnsyncedNotes();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298         }                                                                                                </span>
<span  style=""> 299                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 300         @Override                                                                                        </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 301         protected void onPostExecute(Boolean hasUnsyncedNotes) {                                         </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 302             PreferencesFragment fragment = fragmentWeakReference.get();                                  </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 303             if (fragment == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 304                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305             }                                                                                            </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 306             // Safety first! Check if any notes are unsynced and warn the user if so.                    </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 307             if (hasUnsyncedNotes) {                                                                      </span>
<span class="-5345356399819520041" onmouseenter="enter('-5345356399819520041');" onmouseout="out('-5345356399819520041');" style=""><abbr title=" 308                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog)).setTitle(R.string.unsynced_notes).setMessage(R.string.unsynced_notes_message).setPositiveButton(R.string.delete_notes, fragment.signOutClickListener).setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener).setNegativeButton(R.string.cancel, null).show();"> 308                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.DialogðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 309             } else {                                                                                     </span>
<span class="2716263245214684515" onmouseenter="enter('2716263245214684515');" onmouseout="out('2716263245214684515');" style=""> 310                 fragment.signOut();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314 }                                                                                                        </span>














































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="3857212678176399715" onmouseenter="enter('3857212678176399715');" onmouseout="out('3857212678176399715');" style="">   3  import android.Manifest;                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   4  import android.app.Activity;                                                                                      </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   5  import android.app.Fragment;                                                                                      </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   6  import android.content.DialogInterface;                                                                           </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7  import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   8  import android.content.SharedPreferences;                                                                         </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   9  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11  import android.os.Bundle;                                                                                         </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  12  import android.widget.Toast;                                                                                      </span>
<span  style="">  13                                                                                                                    </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  14  import androidx.appcompat.app.AlertDialog;                                                                        </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  15 +import androidx.appcompat.view.ContextThemeWrapper;                                                               </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  16  import androidx.preference.ListPreference;                                                                        </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  17  import androidx.preference.Preference;                                                                            </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  18  import androidx.preference.PreferenceFragmentCompat;                                                              </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  19  import androidx.preference.PreferenceManager;                                                                     </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  20  import androidx.preference.SwitchPreferenceCompat;                                                                </span>
<span  style="">  21                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  22  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  23  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  24  import com.automattic.simplenote.models.Preferences;                                                              </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  25  import com.automattic.simplenote.utils.CrashUtils;                                                                </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  26  import com.automattic.simplenote.utils.HtmlCompat;                                                                </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  27  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  28  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  29  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="-303860702465593802" onmouseenter="enter('-303860702465593802');" onmouseout="out('-303860702465593802');" style="">  30  import com.karumi.dexter.Dexter;                                                                                  </span>
<span class="-6725606486721205766" onmouseenter="enter('-6725606486721205766');" onmouseout="out('-6725606486721205766');" style="">  31  import com.karumi.dexter.listener.PermissionDeniedResponse;                                                       </span>
<span class="5327377998702078397" onmouseenter="enter('5327377998702078397');" onmouseout="out('5327377998702078397');" style="">  32  import com.karumi.dexter.listener.PermissionGrantedResponse;                                                      </span>
<span class="-6292335098687744810" onmouseenter="enter('-6292335098687744810');" onmouseout="out('-6292335098687744810');" style="">  33  import com.karumi.dexter.listener.single.BasePermissionListener;                                                  </span>
<span class="-4032998057944256347" onmouseenter="enter('-4032998057944256347');" onmouseout="out('-4032998057944256347');" style="">  34  import com.karumi.dexter.listener.single.PermissionListener;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  35  import com.simperium.Simperium;                                                                                   </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  36  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  37  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  38  import com.simperium.client.BucketObjectNameInvalid;                                                              </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  39  import com.simperium.client.User;                                                                                 </span>
<span  style="">  40                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  41  import java.lang.ref.WeakReference;                                                                               </span>
<span  style="">  42                                                                                                                    </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  43  import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                                </span>
<span  style="">  44                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  45  /**                                                                                                               </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  46   * A simple {@link Fragment} subclass.                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  47   */                                                                                                               </span>
<span class="8213712831003870267" onmouseenter="enter('8213712831003870267');" onmouseout="out('8213712831003870267');" style="">  48  public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener,           </span>
<span class="-6650933180145052624" onmouseenter="enter('-6650933180145052624');" onmouseout="out('-6650933180145052624');" style="">  49          Simperium.OnUserCreatedListener {                                                                         </span>
<span  style="">  50                                                                                                                    </span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  51      private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                                       </span>
<span  style="">  52                                                                                                                    </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  53      private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                               </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  54      private SwitchPreferenceCompat mAnalyticsSwitch;                                                              </span>
<span  style="">  55                                                                                                                    </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  56      public PreferencesFragment() {                                                                                </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  57          // Required empty public constructor                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  58      }                                                                                                             </span>
<span  style="">  59                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  60      @Override                                                                                                     </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  61      public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                                  </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  62          addPreferencesFromResource(R.xml.preferences);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63      }                                                                                                             </span>
<span  style="">  64                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  65      @Override                                                                                                     </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  66      public void onActivityCreated(Bundle savedInstanceState) {                                                    </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  67          super.onActivityCreated(savedInstanceState);                                                              </span>
<span  style="">  68                                                                                                                    </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  69          Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                              </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  70          Simplenote currentApp = (Simplenote) getActivity().getApplication();                                      </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  71          Simperium simperium = currentApp.getSimperium();                                                          </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  72          simperium.setUserStatusChangeListener(this);                                                              </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  73          simperium.setOnUserCreatedListener(this);                                                                 </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  74          mPreferencesBucket = currentApp.getPreferencesBucket();                                                   </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  75          mPreferencesBucket.start();                                                                               </span>
<span  style="">  76                                                                                                                    </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  77          authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());                        </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  78          if (simperium.needsAuthorization()) {                                                                     </span>
<span class="-8833460600410674775" onmouseenter="enter('-8833460600410674775');" onmouseout="out('-8833460600410674775');" style="">  79              authenticatePreference.setTitle(R.string.sign_in);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  80          } else {                                                                                                  </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style="">  81              authenticatePreference.setTitle(R.string.sign_out);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82          }                                                                                                         </span>
<span  style="">  83                                                                                                                    </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  84          authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  85              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  86              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  87                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  88                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  89                  }                                                                                                 </span>
<span  style="">  90                                                                                                                    </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  91                  Simplenote currentApp = (Simplenote) getActivity().getApplication();                              </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  92                  if (currentApp.getSimperium().needsAuthorization()) {                                             </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style="">  93                      Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);       </span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  94                      startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  95                  } else {                                                                                          </span>
<span class="2350031306572446790" onmouseenter="enter('2350031306572446790');" onmouseout="out('2350031306572446790');" style="">  96                      new SignOutAsyncTask(PreferencesFragment.this).execute();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  97                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  98                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 100          });                                                                                                       </span>
<span  style=""> 101                                                                                                                    </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title=" 102          findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 102          findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener()ðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 103              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 104              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 105                  try {                                                                                             </span>
<span class="-1694196419231190477" onmouseenter="enter('-1694196419231190477');" onmouseout="out('-1694196419231190477');" style=""> 106                      startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;http://simplenote.com&quot;)));            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 107                  } catch (Exception e) {                                                                           </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""> 108                      Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 110                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 112          });                                                                                                       </span>
<span  style=""> 113                                                                                                                    </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""> 114          findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 115              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 116              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 117                  startActivity(new Intent(getActivity(), AboutActivity.class));                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 118                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 120          });                                                                                                       </span>
<span  style=""> 121                                                                                                                    </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style=""> 122          final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);             </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 123          themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {               </span>
<span  style=""> 124                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 125              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 126              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span  style=""> 127                                                                                                                    </span>
<span class="-8950154229773712279" onmouseenter="enter('-8950154229773712279');" onmouseout="out('-8950154229773712279');" style=""> 128                  final Activity activity = getActivity();                                                          </span>
<span class="-6633936886481537446" onmouseenter="enter('-6633936886481537446');" onmouseout="out('-6633936886481537446');" style=""> 129                  final int index = Integer.parseInt(newValue.toString());                                          </span>
<span class="-5762454067215313163" onmouseenter="enter('-5762454067215313163');" onmouseout="out('-5762454067215313163');" style=""> 130                  if (index == ThemeUtils.THEME_AUTO) {                                                             </span>
<span  style=""> 131                                                                                                                    </span>
<span class="-125851769992898991" onmouseenter="enter('-125851769992898991');" onmouseout="out('-125851769992898991');" style=""> 132                      PermissionListener permissionListener = new BasePermissionListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 133                          @Override                                                                                 </span>
<span class="-3000343133930385097" onmouseenter="enter('-3000343133930385097');" onmouseout="out('-3000343133930385097');" style=""> 134                          public void onPermissionGranted(PermissionGrantedResponse response) {                     </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style=""> 135                              updateTheme(activity, index);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136                          }                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 137                          @Override                                                                                 </span>
<span class="8814191998418862732" onmouseenter="enter('8814191998418862732');" onmouseout="out('8814191998418862732');" style=""> 138                          public void onPermissionDenied(PermissionDeniedResponse response) {                       </span>
<span class="4153180082075357136" onmouseenter="enter('4153180082075357136');" onmouseout="out('4153180082075357136');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 139 -                            new AlertDialog.Builder(activity)                                                     </span>
<span class="4936583139660390377" onmouseenter="enter('4936583139660390377');" onmouseout="out('4936583139660390377');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 140 +                            new AlertDialog.Builder(new ContextThemeWrapper(activity, R.style.Dialog))            </span>
<span class="5442284200977907926" onmouseenter="enter('5442284200977907926');" onmouseout="out('5442284200977907926');" style=""> 141                                      .setTitle(R.string.location_permission_denied)                                </span>
<span class="-1242141747673008599" onmouseenter="enter('-1242141747673008599');" onmouseout="out('-1242141747673008599');" style=""> 142                                      .setMessage(R.string.location_permission_explanation)                         </span>
<span class="-5617878821115539617" onmouseenter="enter('-5617878821115539617');" onmouseout="out('-5617878821115539617');" style=""><abbr title=" 143                                      .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {"> 143                                      .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() ðŸ”µ</abbr></span>
<span class="-4394730415325685177" onmouseenter="enter('-4394730415325685177');" onmouseout="out('-4394730415325685177');" style=""> 144                                          @Override public void onClick(DialogInterface dialog, int which) {        </span>
<span class="6280999572192694622" onmouseenter="enter('6280999572192694622');" onmouseout="out('6280999572192694622');" style=""> 145                                              dialog.dismiss();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146                                          }                                                                         </span>
<span class="7022022634399588778" onmouseenter="enter('7022022634399588778');" onmouseout="out('7022022634399588778');" style=""> 147                                      })                                                                            </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 148                                      .show();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149                          }                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 150                      };                                                                                            </span>
<span class="-2740166548755332383" onmouseenter="enter('-2740166548755332383');" onmouseout="out('-2740166548755332383');" style=""> 151                      Dexter.withActivity(activity)                                                                 </span>
<span class="-2228141653004003578" onmouseenter="enter('-2228141653004003578');" onmouseout="out('-2228141653004003578');" style=""> 152                              .withPermission(Manifest.permission.ACCESS_COARSE_LOCATION)                           </span>
<span class="-7869452323989914547" onmouseenter="enter('-7869452323989914547');" onmouseout="out('-7869452323989914547');" style=""> 153                              .withListener(permissionListener)                                                     </span>
<span class="5694714174168919103" onmouseenter="enter('5694714174168919103');" onmouseout="out('5694714174168919103');" style=""> 154                              .check();                                                                             </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style=""> 155                      updateTheme(activity, index);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 156                  } else {                                                                                          </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style=""> 157                      updateTheme(activity, index);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158                  }                                                                                                 </span>
<span  style=""> 159                                                                                                                    </span>

<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 160                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161              }                                                                                                     </span>
<span  style=""> 162                                                                                                                    </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 163              private void updateTheme(Activity activity, int index) {                                              </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 164                  CharSequence[] entries = themePreference.getEntries();                                            </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 165                  themePreference.setSummary(entries[index]);                                                       </span>
<span  style=""> 166                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 167                  AnalyticsTracker.track(                                                                           </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 168                          AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                             </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 169                          AnalyticsTracker.CATEGORY_USER,                                                           </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 170                          &quot;theme_preference&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 171                  );                                                                                                </span>
<span  style=""> 172                                                                                                                    </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 173                  // recreate the activity so new theme is applied                                                  </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 174                  activity.recreate();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 176          });                                                                                                       </span>
<span  style=""> 177                                                                                                                    </span>
<span class="-3563544225355858599" onmouseenter="enter('-3563544225355858599');" onmouseout="out('-3563544225355858599');" style=""> 178          final ListPreference sortPreference = (ListPreference) findPreference(PrefUtils.PREF_SORT_ORDER);         </span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 179          sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {                </span>
<span  style=""> 180                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 181              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 182              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 183                  int index = Integer.parseInt(newValue.toString());                                                </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 184                  CharSequence[] entries = sortPreference.getEntries();                                             </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 185                  sortPreference.setSummary(entries[index]);                                                        </span>
<span  style=""> 186                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 187                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 189          });                                                                                                       </span>
<span  style=""> 190                                                                                                                    </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 191          Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                                </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 192          versionPref.setSummary(PrefUtils.versionInfo());                                                          </span>
<span  style=""> 193                                                                                                                    </span>
<span class="269389859234146346" onmouseenter="enter('269389859234146346');" onmouseout="out('269389859234146346');" style=""><abbr title=" 194          SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note_list&quot;);"> 194          SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_noteðŸ”µ</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 195          switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 196              @Override                                                                                             </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 197              public boolean onPreferenceChange(Preference preference, Object o) {                                  </span>
<span class="2703036426639498311" onmouseenter="enter('2703036426639498311');" onmouseout="out('2703036426639498311');" style=""> 198                  if (((SwitchPreferenceCompat) preference).isChecked()) {                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 199                      AnalyticsTracker.track(                                                                       </span>
<span class="8127526149566412653" onmouseenter="enter('8127526149566412653');" onmouseout="out('8127526149566412653');" style=""> 200                              AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED,                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 201                              AnalyticsTracker.CATEGORY_USER,                                                       </span>
<span class="-7341164689664996576" onmouseenter="enter('-7341164689664996576');" onmouseout="out('-7341164689664996576');" style=""> 202                              &quot;condensed_list_preference&quot;                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 203                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204                  }                                                                                                 </span>
<span  style=""> 205                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 206                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 208          });                                                                                                       </span>
<span  style=""> 209                                                                                                                    </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 210          // Add the hyperlink to the analytics summary                                                             </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 211          Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);             </span>
<span class="-5954923786447915621" onmouseenter="enter('-5954923786447915621');" onmouseout="out('-5954923786447915621');" style=""> 212          String formattedSummary = String.format(                                                                  </span>
<span class="4703350175896481792" onmouseenter="enter('4703350175896481792');" onmouseout="out('4703350175896481792');" style=""> 213                  getString(R.string.share_analytics_summary),                                                      </span>
<span class="4561110205824883354" onmouseenter="enter('4561110205824883354');" onmouseout="out('4561110205824883354');" style=""> 214                  &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;,                                                    </span>
<span class="-5125567965545776439" onmouseenter="enter('-5125567965545776439');" onmouseout="out('-5125567965545776439');" style=""> 215                  &quot;&lt;/a&gt;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 216          );                                                                                                        </span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 217          analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                             </span>
<span  style=""> 218                                                                                                                    </span>
<span class="2122402547097653030" onmouseenter="enter('2122402547097653030');" onmouseout="out('2122402547097653030');" style=""> 219          mAnalyticsSwitch = (SwitchPreferenceCompat)findPreference(&quot;pref_key_analytics_switch&quot;);                   </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 220          mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 221              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 222              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 223                  try {                                                                                             </span>
<span class="7999271203428147057" onmouseenter="enter('7999271203428147057');" onmouseout="out('7999271203428147057');" style=""> 224                      boolean isChecked = (boolean)newValue;                                                        </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 225                      Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                           </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 226                      prefs.setAnalyticsEnabled(isChecked);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 227                      prefs.save();                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 228                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 229                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230                  }                                                                                                 </span>
<span  style=""> 231                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 232                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 234          });                                                                                                       </span>
<span  style=""> 235                                                                                                                    </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 236          updateAnalyticsSwitchState();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237      }                                                                                                             </span>
<span  style=""> 238                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 239      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 240      public void onPause() {                                                                                       </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 241          super.onPause();                                                                                          </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 242          mPreferencesBucket.stop();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243      }                                                                                                             </span>
<span  style=""> 244                                                                                                                    </span>
<span class="7556645464441156739" onmouseenter="enter('7556645464441156739');" onmouseout="out('7556645464441156739');" style=""> 245      private DialogInterface.OnClickListener signOutClickListener = new DialogInterface.OnClickListener() {        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 246          @Override                                                                                                 </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 247          public void onClick(DialogInterface dialogInterface, int i) {                                             </span>
<span class="2650837461401234425" onmouseenter="enter('2650837461401234425');" onmouseout="out('2650837461401234425');" style=""> 248              signOut();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 250      };                                                                                                            </span>
<span  style=""> 251                                                                                                                    </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""> 252      private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 253          @Override                                                                                                 </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 254          public void onClick(DialogInterface dialogInterface, int i) {                                             </span>
<span class="-4028427458665571821" onmouseenter="enter('-4028427458665571821');" onmouseout="out('-4028427458665571821');" style=""> 255              startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(WEB_APP_URL)));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 257      };                                                                                                            </span>
<span  style=""> 258                                                                                                                    </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 259      private boolean hasUnsyncedNotes() {                                                                          </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 260          Simplenote application = (Simplenote) getActivity().getApplication();                                     </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 261          Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                                  </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 262          Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                         </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 263          while (notesCursor.moveToNext()) {                                                                        </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 264              Note note = notesCursor.getObject();                                                                  </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 265              if (note.isNew() || note.isModified()) {                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 266                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268          }                                                                                                         </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 270          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271      }                                                                                                             </span>
<span  style=""> 272                                                                                                                    </span>
<span class="8766233022355759442" onmouseenter="enter('8766233022355759442');" onmouseout="out('8766233022355759442');" style=""> 273      private void signOut() {                                                                                      </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 274          Simplenote application = (Simplenote) getActivity().getApplication();                                     </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 275          application.getSimperium().deauthorizeUser();                                                             </span>
<span  style=""> 276                                                                                                                    </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 277          application.getNotesBucket().reset();                                                                     </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 278          application.getTagsBucket().reset();                                                                      </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 279          application.getPreferencesBucket().reset();                                                               </span>
<span  style=""> 280                                                                                                                    </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 281          application.getNotesBucket().stop();                                                                      </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 282          application.getTagsBucket().stop();                                                                       </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 283          application.getPreferencesBucket().stop();                                                                </span>
<span  style=""> 284                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 285          AnalyticsTracker.track(                                                                                   </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 286                  AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                            </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 287                  AnalyticsTracker.CATEGORY_USER,                                                                   </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 288                  &quot;preferences_sign_out_button&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 289          );                                                                                                        </span>
<span  style=""> 290                                                                                                                    </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 291          // Resets analytics user back to &#x27;anon&#x27; type                                                              </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 292          AnalyticsTracker.refreshMetadata(null);                                                                   </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 293          CrashUtils.clearCurrentUser();                                                                            </span>
<span  style=""> 294                                                                                                                    </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 295          // Remove wp.com token                                                                                    </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""> 296          SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();    </span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 297          editor.remove(PrefUtils.PREF_WP_TOKEN);                                                                   </span>
<span  style=""> 298                                                                                                                    </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 299          // Remove WordPress sites                                                                                 </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 300          editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 301          editor.apply();                                                                                           </span>
<span  style=""> 302                                                                                                                    </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 303          WidgetUtils.updateNoteWidgets(getActivity());                                                             </span>
<span  style=""> 304                                                                                                                    </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 305          getActivity().finish();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306      }                                                                                                             </span>
<span  style=""> 307                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 308      @Override                                                                                                     </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 309      public void onUserStatusChange(User.Status status) {                                                          </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 310          if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                                      </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 311              // User signed in                                                                                     </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 312              getActivity().runOnUiThread(new Runnable() {                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 313                  public void run() {                                                                               </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 314                      Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                  </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style=""> 315                      authenticatePreference.setTitle(R.string.sign_out);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 317              });                                                                                                   </span>
<span  style=""> 318                                                                                                                    </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 319              Simplenote app = (Simplenote) getActivity().getApplication();                                         </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 320              AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                            </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 321              CrashUtils.setCurrentUser(app.getSimperium().getUser());                                              </span>
<span  style=""> 322                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 323              AnalyticsTracker.track(                                                                               </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 324                      AnalyticsTracker.Stat.USER_SIGNED_IN,                                                         </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 325                      AnalyticsTracker.CATEGORY_USER,                                                               </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 326                      &quot;signed_in_from_preferences_activity&quot;                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 327              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329      }                                                                                                             </span>
<span  style=""> 330                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 331      @Override                                                                                                     </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 332      public void onUserCreated(User user) {                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 333          AnalyticsTracker.track(                                                                                   </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 334                  AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                                       </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 335                  AnalyticsTracker.CATEGORY_USER,                                                                   </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 336                  &quot;account_created_from_preferences_activity&quot;                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 337          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338      }                                                                                                             </span>
<span  style=""> 339                                                                                                                    </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 340      private void updateAnalyticsSwitchState() {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 341          try {                                                                                                     </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 342              Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                                   </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 343              mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 344          } catch (BucketObjectMissingException e) {                                                                </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 345              // The preferences object doesn&#x27;t exist for this user yet, create it                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 346              try {                                                                                                 </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 347                  Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                         </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 348                  prefs.setAnalyticsEnabled(true);                                                                  </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 349                  prefs.save();                                                                                     </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 350              } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                           </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 351                  bucketObjectNameInvalid.printStackTrace();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354      }                                                                                                             </span>
<span  style=""> 355                                                                                                                    </span>
<span class="7423020127051897169" onmouseenter="enter('7423020127051897169');" onmouseout="out('7423020127051897169');" style=""> 356      private static class SignOutAsyncTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                                </span>
<span class="-7070495305382314238" onmouseenter="enter('-7070495305382314238');" onmouseout="out('-7070495305382314238');" style=""> 357          private WeakReference&lt;PreferencesFragment&gt; fragmentWeakReference;                                         </span>
<span  style=""> 358                                                                                                                    </span>
<span class="-2146654474322325437" onmouseenter="enter('-2146654474322325437');" onmouseout="out('-2146654474322325437');" style=""> 359          SignOutAsyncTask(PreferencesFragment fragment) {                                                          </span>
<span class="-2488741111041610979" onmouseenter="enter('-2488741111041610979');" onmouseout="out('-2488741111041610979');" style=""> 360              fragmentWeakReference = new WeakReference&lt;&gt;(fragment);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361          }                                                                                                         </span>
<span  style=""> 362                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 363          @Override                                                                                                 </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 364          protected Boolean doInBackground(Void... voids) {                                                         </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 365              PreferencesFragment fragment = fragmentWeakReference.get();                                           </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 366              return fragment == null || fragment.hasUnsyncedNotes();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367          }                                                                                                         </span>
<span  style=""> 368                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 369          @Override                                                                                                 </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 370          protected void onPostExecute(Boolean hasUnsyncedNotes) {                                                  </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 371              PreferencesFragment fragment = fragmentWeakReference.get();                                           </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 372              if (fragment == null) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 373                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374              }                                                                                                     </span>
<span  style=""> 375                                                                                                                    </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 376              // Safety first! Check if any notes are unsynced and warn the user if so.                             </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 377              if (hasUnsyncedNotes) {                                                                               </span>
<span class="-4544319995210202822" onmouseenter="enter('-4544319995210202822');" onmouseout="out('-4544319995210202822');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 378 -                new AlertDialog.Builder(fragment.getContext())                                                    </span>
<span class="3542977983821060447" onmouseenter="enter('3542977983821060447');" onmouseout="out('3542977983821060447');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 379 +                new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog))       </span>
<span class="-3694903935099593007" onmouseenter="enter('-3694903935099593007');" onmouseout="out('-3694903935099593007');" style=""> 380                          .setTitle(R.string.unsynced_notes)                                                        </span>
<span class="8004583072247328964" onmouseenter="enter('8004583072247328964');" onmouseout="out('8004583072247328964');" style=""> 381                          .setMessage(R.string.unsynced_notes_message)                                              </span>
<span class="8400076988868538626" onmouseenter="enter('8400076988868538626');" onmouseout="out('8400076988868538626');" style=""> 382                          .setPositiveButton(R.string.delete_notes, fragment.signOutClickListener)                  </span>
<span class="7005110418642332587" onmouseenter="enter('7005110418642332587');" onmouseout="out('7005110418642332587');" style=""> 383                          .setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener)               </span>
<span class="-1520918194926717469" onmouseenter="enter('-1520918194926717469');" onmouseout="out('-1520918194926717469');" style=""> 384                          .setNegativeButton(R.string.cancel, null)                                                 </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 385                          .show();                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 386              } else {                                                                                              </span>
<span class="2716263245214684515" onmouseenter="enter('2716263245214684515');" onmouseout="out('2716263245214684515');" style=""> 387                  fragment.signOut();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="3857212678176399715" onmouseenter="enter('3857212678176399715');" onmouseout="out('3857212678176399715');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   3 -import android.Manifest;                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   4  import android.app.Activity;                                                                                      </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   5  import android.app.Fragment;                                                                                      </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   6  import android.content.DialogInterface;                                                                           </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7  import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   8  import android.content.SharedPreferences;                                                                         </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   9  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11  import android.os.Bundle;                                                                                         </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  12  import android.widget.Toast;                                                                                      </span>
<span  style="">  13                                                                                                                    </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  14  import androidx.appcompat.app.AlertDialog;                                                                        </span>

<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  15  import androidx.preference.ListPreference;                                                                        </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  16  import androidx.preference.Preference;                                                                            </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  17  import androidx.preference.PreferenceFragmentCompat;                                                              </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  18  import androidx.preference.PreferenceManager;                                                                     </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  19  import androidx.preference.SwitchPreferenceCompat;                                                                </span>
<span  style="">  20                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  21  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  22  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  23  import com.automattic.simplenote.models.Preferences;                                                              </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  24  import com.automattic.simplenote.utils.CrashUtils;                                                                </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  25  import com.automattic.simplenote.utils.HtmlCompat;                                                                </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  26  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  27 -import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  28  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="-303860702465593802" onmouseenter="enter('-303860702465593802');" onmouseout="out('-303860702465593802');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  29 -import com.karumi.dexter.Dexter;                                                                                  </span>
<span class="-6725606486721205766" onmouseenter="enter('-6725606486721205766');" onmouseout="out('-6725606486721205766');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  30 -import com.karumi.dexter.listener.PermissionDeniedResponse;                                                       </span>
<span class="5327377998702078397" onmouseenter="enter('5327377998702078397');" onmouseout="out('5327377998702078397');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  31 -import com.karumi.dexter.listener.PermissionGrantedResponse;                                                      </span>
<span class="-6292335098687744810" onmouseenter="enter('-6292335098687744810');" onmouseout="out('-6292335098687744810');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  32 -import com.karumi.dexter.listener.single.BasePermissionListener;                                                  </span>
<span class="-4032998057944256347" onmouseenter="enter('-4032998057944256347');" onmouseout="out('-4032998057944256347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  33 -import com.karumi.dexter.listener.single.PermissionListener;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  34  import com.simperium.Simperium;                                                                                   </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  35  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  36  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  37  import com.simperium.client.BucketObjectNameInvalid;                                                              </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  38  import com.simperium.client.User;                                                                                 </span>
<span  style="">  39                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  40  import java.lang.ref.WeakReference;                                                                               </span>
<span  style="">  41                                                                                                                    </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  42  import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                                </span>
<span  style="">  43                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  44  /**                                                                                                               </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  45   * A simple {@link Fragment} subclass.                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  46   */                                                                                                               </span>
<span class="8213712831003870267" onmouseenter="enter('8213712831003870267');" onmouseout="out('8213712831003870267');" style="">  47  public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener,           </span>
<span class="-6650933180145052624" onmouseenter="enter('-6650933180145052624');" onmouseout="out('-6650933180145052624');" style="">  48          Simperium.OnUserCreatedListener {                                                                         </span>
<span  style="">  49                                                                                                                    </span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  50      private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                                       </span>
<span  style="">  51                                                                                                                    </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  52      private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                               </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  53      private SwitchPreferenceCompat mAnalyticsSwitch;                                                              </span>
<span  style="">  54                                                                                                                    </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  55      public PreferencesFragment() {                                                                                </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  56          // Required empty public constructor                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  57      }                                                                                                             </span>
<span  style="">  58                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  59      @Override                                                                                                     </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  60      public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                                  </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  61          addPreferencesFromResource(R.xml.preferences);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62      }                                                                                                             </span>
<span  style="">  63                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  64      @Override                                                                                                     </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  65      public void onActivityCreated(Bundle savedInstanceState) {                                                    </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  66          super.onActivityCreated(savedInstanceState);                                                              </span>
<span  style="">  67                                                                                                                    </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  68          Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                              </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  69          Simplenote currentApp = (Simplenote) getActivity().getApplication();                                      </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  70          Simperium simperium = currentApp.getSimperium();                                                          </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  71          simperium.setUserStatusChangeListener(this);                                                              </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  72          simperium.setOnUserCreatedListener(this);                                                                 </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  73          mPreferencesBucket = currentApp.getPreferencesBucket();                                                   </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  74          mPreferencesBucket.start();                                                                               </span>
<span  style="">  75                                                                                                                    </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  76          authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());                        </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  77          if (simperium.needsAuthorization()) {                                                                     </span>
<span class="-8833460600410674775" onmouseenter="enter('-8833460600410674775');" onmouseout="out('-8833460600410674775');" style="">  78              authenticatePreference.setTitle(R.string.sign_in);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  79          } else {                                                                                                  </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style="">  80              authenticatePreference.setTitle(R.string.sign_out);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81          }                                                                                                         </span>
<span  style="">  82                                                                                                                    </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  83          authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  84              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  85              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  86                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  87                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88                  }                                                                                                 </span>
<span  style="">  89                                                                                                                    </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  90                  Simplenote currentApp = (Simplenote) getActivity().getApplication();                              </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  91                  if (currentApp.getSimperium().needsAuthorization()) {                                             </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style="">  92                      Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);       </span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  93                      startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  94                  } else {                                                                                          </span>
<span class="2350031306572446790" onmouseenter="enter('2350031306572446790');" onmouseout="out('2350031306572446790');" style="">  95                      new SignOutAsyncTask(PreferencesFragment.this).execute();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  96                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  97                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  99          });                                                                                                       </span>
<span  style=""> 100                                                                                                                    </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title=" 101          findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 101          findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener()ðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 102              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 103              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 104                  try {                                                                                             </span>
<span class="-1694196419231190477" onmouseenter="enter('-1694196419231190477');" onmouseout="out('-1694196419231190477');" style=""> 105                      startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;http://simplenote.com&quot;)));            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 106                  } catch (Exception e) {                                                                           </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""> 107                      Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 109                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 111          });                                                                                                       </span>
<span  style=""> 112                                                                                                                    </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""> 113          findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 114              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 115              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 116                  startActivity(new Intent(getActivity(), AboutActivity.class));                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 117                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 119          });                                                                                                       </span>
<span  style=""> 120                                                                                                                    </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style=""> 121          final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);             </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 122          themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 123 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 124              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 125              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 126 -                                                                                                                  </span>
<span class="-8950154229773712279" onmouseenter="enter('-8950154229773712279');" onmouseout="out('-8950154229773712279');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 127 -                final Activity activity = getActivity();                                                          </span>
<span class="-6633936886481537446" onmouseenter="enter('-6633936886481537446');" onmouseout="out('-6633936886481537446');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 128 -                final int index = Integer.parseInt(newValue.toString());                                          </span>
<span class="-5762454067215313163" onmouseenter="enter('-5762454067215313163');" onmouseout="out('-5762454067215313163');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 129 -                if (index == ThemeUtils.THEME_AUTO) {                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 130 -                                                                                                                  </span>
<span class="-125851769992898991" onmouseenter="enter('-125851769992898991');" onmouseout="out('-125851769992898991');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 131 -                    PermissionListener permissionListener = new BasePermissionListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 132 -                        @Override                                                                                 </span>
<span class="-3000343133930385097" onmouseenter="enter('-3000343133930385097');" onmouseout="out('-3000343133930385097');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 133 -                        public void onPermissionGranted(PermissionGrantedResponse response) {                     </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 134 -                            updateTheme(activity, index);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 135 -                        }                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 136 -                        @Override                                                                                 </span>
<span class="8814191998418862732" onmouseenter="enter('8814191998418862732');" onmouseout="out('8814191998418862732');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 137 -                        public void onPermissionDenied(PermissionDeniedResponse response) {                       </span>
<span class="4153180082075357136" onmouseenter="enter('4153180082075357136');" onmouseout="out('4153180082075357136');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 138 -                            new AlertDialog.Builder(activity)                                                     </span>

<span class="5442284200977907926" onmouseenter="enter('5442284200977907926');" onmouseout="out('5442284200977907926');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 139 -                                    .setTitle(R.string.location_permission_denied)                                </span>
<span class="-1242141747673008599" onmouseenter="enter('-1242141747673008599');" onmouseout="out('-1242141747673008599');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 140 -                                    .setMessage(R.string.location_permission_explanation)                         </span>
<span class="-5617878821115539617" onmouseenter="enter('-5617878821115539617');" onmouseout="out('-5617878821115539617');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 141 -                                    .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {"> 141 -                                    .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() ðŸ”µ</abbr></span>
<span class="-4394730415325685177" onmouseenter="enter('-4394730415325685177');" onmouseout="out('-4394730415325685177');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 142 -                                        @Override public void onClick(DialogInterface dialog, int which) {        </span>
<span class="6280999572192694622" onmouseenter="enter('6280999572192694622');" onmouseout="out('6280999572192694622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 143 -                                            dialog.dismiss();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 144 -                                        }                                                                         </span>
<span class="7022022634399588778" onmouseenter="enter('7022022634399588778');" onmouseout="out('7022022634399588778');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 145 -                                    })                                                                            </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 146 -                                    .show();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 147 -                        }                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 148 -                    };                                                                                            </span>
<span class="-2740166548755332383" onmouseenter="enter('-2740166548755332383');" onmouseout="out('-2740166548755332383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 149 -                    Dexter.withActivity(activity)                                                                 </span>
<span class="-2228141653004003578" onmouseenter="enter('-2228141653004003578');" onmouseout="out('-2228141653004003578');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 150 -                            .withPermission(Manifest.permission.ACCESS_COARSE_LOCATION)                           </span>
<span class="-7869452323989914547" onmouseenter="enter('-7869452323989914547');" onmouseout="out('-7869452323989914547');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 151 -                            .withListener(permissionListener)                                                     </span>
<span class="5694714174168919103" onmouseenter="enter('5694714174168919103');" onmouseout="out('5694714174168919103');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 152 -                            .check();                                                                             </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 153 -                    updateTheme(activity, index);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 154 -                } else {                                                                                          </span>
<span class="-512164864597228687" onmouseenter="enter('-512164864597228687');" onmouseout="out('-512164864597228687');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 155 -                    updateTheme(activity, index);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 156 -                }                                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 157 -                                                                                                                  </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 158 +                updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 159                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160              }                                                                                                     </span>
<span  style=""> 161                                                                                                                    </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 162              private void updateTheme(Activity activity, int index) {                                              </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 163                  CharSequence[] entries = themePreference.getEntries();                                            </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 164                  themePreference.setSummary(entries[index]);                                                       </span>
<span  style=""> 165                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 166                  AnalyticsTracker.track(                                                                           </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 167                          AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                             </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 168                          AnalyticsTracker.CATEGORY_USER,                                                           </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 169                          &quot;theme_preference&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 170                  );                                                                                                </span>
<span  style=""> 171                                                                                                                    </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 172                  // recreate the activity so new theme is applied                                                  </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 173                  activity.recreate();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 175          });                                                                                                       </span>
<span  style=""> 176                                                                                                                    </span>
<span class="-3563544225355858599" onmouseenter="enter('-3563544225355858599');" onmouseout="out('-3563544225355858599');" style=""> 177          final ListPreference sortPreference = (ListPreference) findPreference(PrefUtils.PREF_SORT_ORDER);         </span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 178          sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 179 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 180              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 181              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 182                  int index = Integer.parseInt(newValue.toString());                                                </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 183                  CharSequence[] entries = sortPreference.getEntries();                                             </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 184                  sortPreference.setSummary(entries[index]);                                                        </span>
<span  style=""> 185                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 186                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 188          });                                                                                                       </span>
<span  style=""> 189                                                                                                                    </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 190          Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                                </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 191          versionPref.setSummary(PrefUtils.versionInfo());                                                          </span>
<span  style=""> 192                                                                                                                    </span>
<span class="269389859234146346" onmouseenter="enter('269389859234146346');" onmouseout="out('269389859234146346');" style=""><abbr title=" 193          SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note_list&quot;);"> 193          SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_noteðŸ”µ</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 194          switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 195              @Override                                                                                             </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 196              public boolean onPreferenceChange(Preference preference, Object o) {                                  </span>
<span class="2703036426639498311" onmouseenter="enter('2703036426639498311');" onmouseout="out('2703036426639498311');" style=""> 197                  if (((SwitchPreferenceCompat) preference).isChecked()) {                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 198                      AnalyticsTracker.track(                                                                       </span>
<span class="8127526149566412653" onmouseenter="enter('8127526149566412653');" onmouseout="out('8127526149566412653');" style=""> 199                              AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED,                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 200                              AnalyticsTracker.CATEGORY_USER,                                                       </span>
<span class="-7341164689664996576" onmouseenter="enter('-7341164689664996576');" onmouseout="out('-7341164689664996576');" style=""> 201                              &quot;condensed_list_preference&quot;                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 202                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203                  }                                                                                                 </span>
<span  style=""> 204                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 205                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 207          });                                                                                                       </span>
<span  style=""> 208                                                                                                                    </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 209          // Add the hyperlink to the analytics summary                                                             </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 210          Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);             </span>
<span class="-5954923786447915621" onmouseenter="enter('-5954923786447915621');" onmouseout="out('-5954923786447915621');" style=""> 211          String formattedSummary = String.format(                                                                  </span>
<span class="4703350175896481792" onmouseenter="enter('4703350175896481792');" onmouseout="out('4703350175896481792');" style=""> 212                  getString(R.string.share_analytics_summary),                                                      </span>
<span class="4561110205824883354" onmouseenter="enter('4561110205824883354');" onmouseout="out('4561110205824883354');" style=""> 213                  &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;,                                                    </span>
<span class="-5125567965545776439" onmouseenter="enter('-5125567965545776439');" onmouseout="out('-5125567965545776439');" style=""> 214                  &quot;&lt;/a&gt;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 215          );                                                                                                        </span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 216          analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                             </span>
<span  style=""> 217                                                                                                                    </span>
<span class="2122402547097653030" onmouseenter="enter('2122402547097653030');" onmouseout="out('2122402547097653030');" style=""> 218          mAnalyticsSwitch = (SwitchPreferenceCompat)findPreference(&quot;pref_key_analytics_switch&quot;);                   </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 219          mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 220              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 221              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 222                  try {                                                                                             </span>
<span class="7999271203428147057" onmouseenter="enter('7999271203428147057');" onmouseout="out('7999271203428147057');" style=""> 223                      boolean isChecked = (boolean)newValue;                                                        </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 224                      Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                           </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 225                      prefs.setAnalyticsEnabled(isChecked);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 226                      prefs.save();                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 227                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 228                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229                  }                                                                                                 </span>
<span  style=""> 230                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 231                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 233          });                                                                                                       </span>
<span  style=""> 234                                                                                                                    </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 235          updateAnalyticsSwitchState();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236      }                                                                                                             </span>
<span  style=""> 237                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 238      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 239      public void onPause() {                                                                                       </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 240          super.onPause();                                                                                          </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 241          mPreferencesBucket.stop();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242      }                                                                                                             </span>
<span  style=""> 243                                                                                                                    </span>
<span class="7556645464441156739" onmouseenter="enter('7556645464441156739');" onmouseout="out('7556645464441156739');" style=""> 244      private DialogInterface.OnClickListener signOutClickListener = new DialogInterface.OnClickListener() {        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 245          @Override                                                                                                 </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 246          public void onClick(DialogInterface dialogInterface, int i) {                                             </span>
<span class="2650837461401234425" onmouseenter="enter('2650837461401234425');" onmouseout="out('2650837461401234425');" style=""> 247              signOut();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 249      };                                                                                                            </span>
<span  style=""> 250                                                                                                                    </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""> 251      private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 252          @Override                                                                                                 </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 253          public void onClick(DialogInterface dialogInterface, int i) {                                             </span>
<span class="-4028427458665571821" onmouseenter="enter('-4028427458665571821');" onmouseout="out('-4028427458665571821');" style=""> 254              startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(WEB_APP_URL)));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 256      };                                                                                                            </span>
<span  style=""> 257                                                                                                                    </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 258      private boolean hasUnsyncedNotes() {                                                                          </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 259          Simplenote application = (Simplenote) getActivity().getApplication();                                     </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 260          Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                                  </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 261          Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                         </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 262          while (notesCursor.moveToNext()) {                                                                        </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 263              Note note = notesCursor.getObject();                                                                  </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 264              if (note.isNew() || note.isModified()) {                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 265                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267          }                                                                                                         </span>
<span  style=""> 268                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 269          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270      }                                                                                                             </span>
<span  style=""> 271                                                                                                                    </span>
<span class="8766233022355759442" onmouseenter="enter('8766233022355759442');" onmouseout="out('8766233022355759442');" style=""> 272      private void signOut() {                                                                                      </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 273          Simplenote application = (Simplenote) getActivity().getApplication();                                     </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 274          application.getSimperium().deauthorizeUser();                                                             </span>
<span  style=""> 275                                                                                                                    </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 276          application.getNotesBucket().reset();                                                                     </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 277          application.getTagsBucket().reset();                                                                      </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 278          application.getPreferencesBucket().reset();                                                               </span>
<span  style=""> 279                                                                                                                    </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 280          application.getNotesBucket().stop();                                                                      </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 281          application.getTagsBucket().stop();                                                                       </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 282          application.getPreferencesBucket().stop();                                                                </span>
<span  style=""> 283                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 284          AnalyticsTracker.track(                                                                                   </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 285                  AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                            </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 286                  AnalyticsTracker.CATEGORY_USER,                                                                   </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 287                  &quot;preferences_sign_out_button&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 288          );                                                                                                        </span>
<span  style=""> 289                                                                                                                    </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 290          // Resets analytics user back to &#x27;anon&#x27; type                                                              </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 291          AnalyticsTracker.refreshMetadata(null);                                                                   </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 292          CrashUtils.clearCurrentUser();                                                                            </span>
<span  style=""> 293                                                                                                                    </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 294          // Remove wp.com token                                                                                    </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""> 295          SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();    </span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 296          editor.remove(PrefUtils.PREF_WP_TOKEN);                                                                   </span>
<span  style=""> 297                                                                                                                    </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 298          // Remove WordPress sites                                                                                 </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 299          editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 300          editor.apply();                                                                                           </span>
<span  style=""> 301                                                                                                                    </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 302          WidgetUtils.updateNoteWidgets(getActivity());                                                             </span>
<span  style=""> 303                                                                                                                    </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 304          getActivity().finish();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305      }                                                                                                             </span>
<span  style=""> 306                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 307      @Override                                                                                                     </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 308      public void onUserStatusChange(User.Status status) {                                                          </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 309          if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                                      </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 310              // User signed in                                                                                     </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 311              getActivity().runOnUiThread(new Runnable() {                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 312                  public void run() {                                                                               </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 313                      Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                  </span>
<span class="665408808557522870" onmouseenter="enter('665408808557522870');" onmouseout="out('665408808557522870');" style=""> 314                      authenticatePreference.setTitle(R.string.sign_out);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 316              });                                                                                                   </span>
<span  style=""> 317                                                                                                                    </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 318              Simplenote app = (Simplenote) getActivity().getApplication();                                         </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 319              AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                            </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 320              CrashUtils.setCurrentUser(app.getSimperium().getUser());                                              </span>
<span  style=""> 321                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 322              AnalyticsTracker.track(                                                                               </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 323                      AnalyticsTracker.Stat.USER_SIGNED_IN,                                                         </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 324                      AnalyticsTracker.CATEGORY_USER,                                                               </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 325                      &quot;signed_in_from_preferences_activity&quot;                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 326              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328      }                                                                                                             </span>
<span  style=""> 329                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 330      @Override                                                                                                     </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 331      public void onUserCreated(User user) {                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 332          AnalyticsTracker.track(                                                                                   </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 333                  AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                                       </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 334                  AnalyticsTracker.CATEGORY_USER,                                                                   </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 335                  &quot;account_created_from_preferences_activity&quot;                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 336          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337      }                                                                                                             </span>
<span  style=""> 338                                                                                                                    </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 339      private void updateAnalyticsSwitchState() {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 340          try {                                                                                                     </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 341              Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                                   </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 342              mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 343          } catch (BucketObjectMissingException e) {                                                                </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 344              // The preferences object doesn&#x27;t exist for this user yet, create it                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 345              try {                                                                                                 </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 346                  Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                         </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 347                  prefs.setAnalyticsEnabled(true);                                                                  </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 348                  prefs.save();                                                                                     </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 349              } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                           </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 350                  bucketObjectNameInvalid.printStackTrace();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353      }                                                                                                             </span>
<span  style=""> 354                                                                                                                    </span>
<span class="7423020127051897169" onmouseenter="enter('7423020127051897169');" onmouseout="out('7423020127051897169');" style=""> 355      private static class SignOutAsyncTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                                </span>
<span class="-7070495305382314238" onmouseenter="enter('-7070495305382314238');" onmouseout="out('-7070495305382314238');" style=""> 356          private WeakReference&lt;PreferencesFragment&gt; fragmentWeakReference;                                         </span>
<span  style=""> 357                                                                                                                    </span>
<span class="-2146654474322325437" onmouseenter="enter('-2146654474322325437');" onmouseout="out('-2146654474322325437');" style=""> 358          SignOutAsyncTask(PreferencesFragment fragment) {                                                          </span>
<span class="-2488741111041610979" onmouseenter="enter('-2488741111041610979');" onmouseout="out('-2488741111041610979');" style=""> 359              fragmentWeakReference = new WeakReference&lt;&gt;(fragment);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360          }                                                                                                         </span>
<span  style=""> 361                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 362          @Override                                                                                                 </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 363          protected Boolean doInBackground(Void... voids) {                                                         </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 364              PreferencesFragment fragment = fragmentWeakReference.get();                                           </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 365              return fragment == null || fragment.hasUnsyncedNotes();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366          }                                                                                                         </span>
<span  style=""> 367                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 368          @Override                                                                                                 </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 369          protected void onPostExecute(Boolean hasUnsyncedNotes) {                                                  </span>
<span class="-542418683875196040" onmouseenter="enter('-542418683875196040');" onmouseout="out('-542418683875196040');" style=""> 370              PreferencesFragment fragment = fragmentWeakReference.get();                                           </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 371              if (fragment == null) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 372                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373              }                                                                                                     </span>
<span  style=""> 374                                                                                                                    </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 375              // Safety first! Check if any notes are unsynced and warn the user if so.                             </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 376              if (hasUnsyncedNotes) {                                                                               </span>
<span class="-4544319995210202822" onmouseenter="enter('-4544319995210202822');" onmouseout="out('-4544319995210202822');" style=""> 377                  new AlertDialog.Builder(fragment.getContext())                                                    </span>

<span class="-3694903935099593007" onmouseenter="enter('-3694903935099593007');" onmouseout="out('-3694903935099593007');" style=""> 378                          .setTitle(R.string.unsynced_notes)                                                        </span>
<span class="8004583072247328964" onmouseenter="enter('8004583072247328964');" onmouseout="out('8004583072247328964');" style=""> 379                          .setMessage(R.string.unsynced_notes_message)                                              </span>
<span class="8400076988868538626" onmouseenter="enter('8400076988868538626');" onmouseout="out('8400076988868538626');" style=""> 380                          .setPositiveButton(R.string.delete_notes, fragment.signOutClickListener)                  </span>
<span class="7005110418642332587" onmouseenter="enter('7005110418642332587');" onmouseout="out('7005110418642332587');" style=""> 381                          .setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener)               </span>
<span class="-1520918194926717469" onmouseenter="enter('-1520918194926717469');" onmouseout="out('-1520918194926717469');" style=""> 382                          .setNegativeButton(R.string.cancel, null)                                                 </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 383                          .show();                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 384              } else {                                                                                              </span>
<span class="2716263245214684515" onmouseenter="enter('2716263245214684515');" onmouseout="out('2716263245214684515');" style=""> 385                  fragment.signOut();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            