<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>333</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    333
                    <a href="332.html">prev</a>
                    <a href="334.html">next</a>
                    <a href="333_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_6780311d33539eb86c4007a7d1993f6f1467a837_src/com/automattic/simplenote/models/Tag.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;6780311d33539eb86c4007a7d1993f6f1467a837:src/com/automattic/simplenote/models/Tag.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;6780311d33539eb86c4007a7d1993f6f1467a837^1:src/com/automattic/simplenote/models/Tag.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;6780311d33539eb86c4007a7d1993f6f1467a837^2:src/com/automattic/simplenote/models/Tag.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;20279c862696f156d42fbdab7ae10281f312fb27:src/com/automattic/simplenote/models/Tag.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bsj]], subset: [[bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">   2 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="9181943406056492869" onmouseenter="enter('9181943406056492869');" onmouseout="out('9181943406056492869');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   3 package com.automattic.simplenote.models;                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   4                                                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   5 import com.simperium.client.Bucket;                                                                      </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   6 import com.simperium.client.Bucket.ObjectCursor;                                                         </span>
<span class="6125639164043971044" onmouseenter="enter('6125639164043971044');" onmouseout="out('6125639164043971044');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   7 import com.simperium.client.BucketObject;                                                                </span>
<span class="-665307165473523580" onmouseenter="enter('-665307165473523580');" onmouseout="out('-665307165473523580');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   8 import com.simperium.client.BucketSchema;                                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   9 import com.simperium.client.Query;                                                                       </span>
<span class="-838252138947964043" onmouseenter="enter('-838252138947964043');" onmouseout="out('-838252138947964043');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  10 import com.simperium.client.Query.ComparisonType;                                                        </span>
<span class="-7125452997935303365" onmouseenter="enter('-7125452997935303365');" onmouseout="out('-7125452997935303365');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  11 import com.simperium.client.Query.SortType;                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  12                                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  13 import java.util.Map;                                                                                    </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  14 import java.util.List;                                                                                   </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  15 import java.util.ArrayList;                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  16                                                                                                          </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  17 import android.util.Log;                                                                                 </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  18                                                                                                          </span>
<span class="-5520751644148063740" onmouseenter="enter('-5520751644148063740');" onmouseout="out('-5520751644148063740');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  19 public class Tag extends BucketObject {                                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  20 	                                                                                                        </span>
<span class="4408768180973442346" onmouseenter="enter('4408768180973442346');" onmouseout="out('4408768180973442346');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  21 	public static final String BUCKET_NAME=&quot;tag&quot;;                                                           </span>
<span class="8194120603293670320" onmouseenter="enter('8194120603293670320');" onmouseout="out('8194120603293670320');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  22 	protected int tagIndex;                                                                                 </span>
<span class="1686378065465085743" onmouseenter="enter('1686378065465085743');" onmouseout="out('1686378065465085743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  23 	protected String name = &quot;&quot;;                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  24                                                                                                          </span>
<span class="-569453823339800905" onmouseenter="enter('-569453823339800905');" onmouseout="out('-569453823339800905');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  25 	public static class Schema extends BucketSchema&lt;Tag&gt; {                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  26                                                                                                          </span>
<span class="3400389585123136733" onmouseenter="enter('3400389585123136733');" onmouseout="out('3400389585123136733');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  27         public Schema(){                                                                                 </span>
<span class="-4886495676536647522" onmouseenter="enter('-4886495676536647522');" onmouseout="out('-4886495676536647522');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  28             autoIndex();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  29         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  30                                                                                                          </span>
<span class="4046368376475730022" onmouseenter="enter('4046368376475730022');" onmouseout="out('4046368376475730022');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  31         public String getRemoteName(){                                                                   </span>
<span class="2742032977421093316" onmouseenter="enter('2742032977421093316');" onmouseout="out('2742032977421093316');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  32             return Tag.BUCKET_NAME;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  33         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34                                                                                                          </span>
<span class="7844026162775747369" onmouseenter="enter('7844026162775747369');" onmouseout="out('7844026162775747369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35 		public Tag build(String key, Map&lt;String,Object&gt;properties){                                            </span>
<span class="1758535077202277046" onmouseenter="enter('1758535077202277046');" onmouseout="out('1758535077202277046');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36 			return new Tag(key, properties);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37 		}                                                                                                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38                                                                                                          </span>
<span class="-3851977225752321267" onmouseenter="enter('-3851977225752321267');" onmouseout="out('-3851977225752321267');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39         public void update(Tag tag, Map&lt;String,Object&gt;properties){                                       </span>
<span class="-1078923059245678284" onmouseenter="enter('-1078923059245678284');" onmouseout="out('-1078923059245678284');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40             tag.setProperties(properties);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  43                                                                                                          </span>
<span class="-605410254880650411" onmouseenter="enter('-605410254880650411');" onmouseout="out('-605410254880650411');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  44     public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; bucket){                                                    </span>
<span class="-8996265830296339413" onmouseenter="enter('-8996265830296339413');" onmouseout="out('-8996265830296339413');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  45         return bucket.query().order(&quot;index&quot;).orderByKey();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  46     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47                                                                                                          </span>
<span class="-1782989834715628034" onmouseenter="enter('-1782989834715628034');" onmouseout="out('-1782989834715628034');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48 	public Tag(String key, Map&lt;String,Object&gt;properties){                                                   </span>
<span class="-6821486208075908487" onmouseenter="enter('-6821486208075908487');" onmouseout="out('-6821486208075908487');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  49 		super(key, properties);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  50 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  51                                                                                                          </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  52 	public String getName() {                                                                               </span>
<span class="-8575928775368193440" onmouseenter="enter('-8575928775368193440');" onmouseout="out('-8575928775368193440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  53 		String name = (String) properties.get(&quot;name&quot;);                                                         </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  54         if (name == null) {                                                                              </span>
<span class="-8300454056005473230" onmouseenter="enter('-8300454056005473230');" onmouseout="out('-8300454056005473230');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  55             name = getSimperiumKey();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  56         }                                                                                                </span>
<span class="-3727955329973069704" onmouseenter="enter('-3727955329973069704');" onmouseout="out('-3727955329973069704');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  57         return name;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  58 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  59 	                                                                                                        </span>
<span class="4392143110573682803" onmouseenter="enter('4392143110573682803');" onmouseout="out('4392143110573682803');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60 	public void setName(String name) {                                                                      </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  61 		if (name == null) {                                                                                    </span>
<span class="-213167207179067307" onmouseenter="enter('-213167207179067307');" onmouseout="out('-213167207179067307');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62 			name = &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63 		}                                                                                                      </span>
<span class="2817567480569190576" onmouseenter="enter('2817567480569190576');" onmouseout="out('2817567480569190576');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64         properties.put(&quot;name&quot;, name);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66 		                                                                                                       </span>
<span class="3314214788331321193" onmouseenter="enter('3314214788331321193');" onmouseout="out('3314214788331321193');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67 	public Integer getIndex() {                                                                             </span>
<span class="2969810016527350634" onmouseenter="enter('2969810016527350634');" onmouseout="out('2969810016527350634');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68         return (Integer) properties.get(&quot;index&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70 	                                                                                                        </span>
<span class="-500909398055877872" onmouseenter="enter('-500909398055877872');" onmouseout="out('-500909398055877872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71 	public void setIndex(Integer tagIndex) {                                                                </span>
<span class="7502077113130045873" onmouseenter="enter('7502077113130045873');" onmouseout="out('7502077113130045873');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72         if (tagIndex == null) {                                                                          </span>
<span class="-8476157160667954591" onmouseenter="enter('-8476157160667954591');" onmouseout="out('-8476157160667954591');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73             properties.remove(&quot;index&quot;);                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74         } else {                                                                                         </span>
<span class="-3130425453493968229" onmouseenter="enter('-3130425453493968229');" onmouseout="out('-3130425453493968229');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75             properties.put(&quot;index&quot;, tagIndex);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78                                                                                                          </span>
<span class="-8679812804925121757" onmouseenter="enter('-8679812804925121757');" onmouseout="out('-8679812804925121757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79     public void renameTo(String name, Bucket&lt;Note&gt; notesBucket){                                         </span>
<span class="-5333234158858741655" onmouseenter="enter('-5333234158858741655');" onmouseout="out('-5333234158858741655');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80         String key = name.toLowerCase();                                                                 </span>
<span class="372096354403962352" onmouseenter="enter('372096354403962352');" onmouseout="out('372096354403962352');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81         if (!getSimperiumKey().equals(key)) {                                                            </span>
<span class="-5209391090982449704" onmouseenter="enter('-5209391090982449704');" onmouseout="out('-5209391090982449704');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82             // create a new tag with the value as the key/name                                           </span>
<span class="6032101940625473392" onmouseenter="enter('6032101940625473392');" onmouseout="out('6032101940625473392');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83             // TODO: tag already exists?                                                                 </span>
<span class="3155175442539471819" onmouseenter="enter('3155175442539471819');" onmouseout="out('3155175442539471819');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84             Tag newTag = ((Bucket&lt;Tag&gt;) getBucket()).newObject(key);                                     </span>
<span class="-3606524567859777176" onmouseenter="enter('-3606524567859777176');" onmouseout="out('-3606524567859777176');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85             newTag.setName(name);                                                                        </span>
<span class="258850024922996991" onmouseenter="enter('258850024922996991');" onmouseout="out('258850024922996991');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86             newTag.save();                                                                               </span>
<span class="7470970541221155470" onmouseenter="enter('7470970541221155470');" onmouseout="out('7470970541221155470');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87             // get all the notes from tag, remove the item                                               </span>
<span class="-5038121255928315403" onmouseenter="enter('-5038121255928315403');" onmouseout="out('-5038121255928315403');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88             ObjectCursor&lt;Note&gt; notesCursor = findNotes(notesBucket);                                     </span>
<span class="5797388004741082600" onmouseenter="enter('5797388004741082600');" onmouseout="out('5797388004741082600');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89             while(notesCursor.moveToNext()){                                                             </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90                 Note note = notesCursor.getObject();                                                     </span>
<span class="4194617991967274327" onmouseenter="enter('4194617991967274327');" onmouseout="out('4194617991967274327');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91                 List&lt;String&gt; tags = new ArrayList&lt;String&gt;(note.getTags());                               </span>
<span class="7519471749189509450" onmouseenter="enter('7519471749189509450');" onmouseout="out('7519471749189509450');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92                 List&lt;String&gt; newTags = new ArrayList&lt;String&gt;(tags.size());                               </span>
<span class="4819972252949867193" onmouseenter="enter('4819972252949867193');" onmouseout="out('4819972252949867193');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93                 // iterate and do a case insensitive comparison on each tag                              </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94                 for (String tag : tags) {                                                                </span>
<span class="-1181388508971995190" onmouseenter="enter('-1181388508971995190');" onmouseout="out('-1181388508971995190');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95                     // if it&#x27;s this tag, add the new tag                                                 </span>
<span class="1729352567454004045" onmouseenter="enter('1729352567454004045');" onmouseout="out('1729352567454004045');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96                     if (tag.toLowerCase().equals(getSimperiumKey())) {                                   </span>
<span class="4647130676194688636" onmouseenter="enter('4647130676194688636');" onmouseout="out('4647130676194688636');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97                         newTags.add(name);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98                     } else {                                                                             </span>
<span class="3940675775669567062" onmouseenter="enter('3940675775669567062');" onmouseout="out('3940675775669567062');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99                         newTags.add(tag);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101                 }                                                                                        </span>
<span class="8951985675496394805" onmouseenter="enter('8951985675496394805');" onmouseout="out('8951985675496394805');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102                 note.setTags(newTags);                                                                   </span>
<span class="1786517470939259447" onmouseenter="enter('1786517470939259447');" onmouseout="out('1786517470939259447');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103                 note.save();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104             }                                                                                            </span>
<span class="6185676292406674524" onmouseenter="enter('6185676292406674524');" onmouseout="out('6185676292406674524');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105             notesCursor.close();                                                                         </span>
<span class="-148607923632229467" onmouseenter="enter('-148607923632229467');" onmouseout="out('-148607923632229467');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106             delete();                                                                                    </span>
<span class="1346801549096854578" onmouseenter="enter('1346801549096854578');" onmouseout="out('1346801549096854578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107         } else if(!getName().equals(name)) {                                                             </span>
<span class="7444035316722908517" onmouseenter="enter('7444035316722908517');" onmouseout="out('7444035316722908517');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108             setName(name);                                                                               </span>
<span class="8471916837986154111" onmouseenter="enter('8471916837986154111');" onmouseout="out('8471916837986154111');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109             save();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112                                                                                                          </span>
<span class="5713370915334643965" onmouseenter="enter('5713370915334643965');" onmouseout="out('5713370915334643965');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113     protected void setProperties(Map&lt;String,Object&gt; properties){                                         </span>
<span class="-1470973607859720557" onmouseenter="enter('-1470973607859720557');" onmouseout="out('-1470973607859720557');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114         this.properties = properties;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116                                                                                                          </span>
<span class="9199474315053816858" onmouseenter="enter('9199474315053816858');" onmouseout="out('9199474315053816858');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117     public ObjectCursor&lt;Note&gt; findNotes(Bucket&lt;Note&gt; notesBucket){                                       </span>
<span class="-5783455742197660153" onmouseenter="enter('-5783455742197660153');" onmouseout="out('-5783455742197660153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118         return notesBucket.query().where(&quot;tags&quot;, ComparisonType.LIKE, getSimperiumKey()).execute();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120 }                                                                                                        </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 121 =======                                                                                                  </span>
<span class="9181943406056492869" onmouseenter="enter('9181943406056492869');" onmouseout="out('9181943406056492869');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122 package com.automattic.simplenote.models;                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 123                                                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 124 import com.simperium.client.Bucket;                                                                      </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 125 import com.simperium.client.Bucket.ObjectCursor;                                                         </span>
<span class="6125639164043971044" onmouseenter="enter('6125639164043971044');" onmouseout="out('6125639164043971044');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126 import com.simperium.client.BucketObject;                                                                </span>
<span class="-665307165473523580" onmouseenter="enter('-665307165473523580');" onmouseout="out('-665307165473523580');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127 import com.simperium.client.BucketSchema;                                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128 import com.simperium.client.Query;                                                                       </span>
<span class="-838252138947964043" onmouseenter="enter('-838252138947964043');" onmouseout="out('-838252138947964043');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 129 import com.simperium.client.Query.ComparisonType;                                                        </span>
<span class="-7125452997935303365" onmouseenter="enter('-7125452997935303365');" onmouseout="out('-7125452997935303365');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 130 import com.simperium.client.Query.SortType;                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 131                                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 132 import java.util.Map;                                                                                    </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 134 import java.util.List;                                                                                   </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 135 import java.util.ArrayList;                                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 136                                                                                                          </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 137 import android.util.Log;                                                                                 </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 138                                                                                                          </span>
<span class="-5520751644148063740" onmouseenter="enter('-5520751644148063740');" onmouseout="out('-5520751644148063740');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 139 public class Tag extends BucketObject {                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 140 	                                                                                                        </span>
<span class="4408768180973442346" onmouseenter="enter('4408768180973442346');" onmouseout="out('4408768180973442346');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 141 	public static final String BUCKET_NAME=&quot;tag&quot;;                                                           </span>
<span class="8194120603293670320" onmouseenter="enter('8194120603293670320');" onmouseout="out('8194120603293670320');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 142 	protected int tagIndex;                                                                                 </span>
<span class="1686378065465085743" onmouseenter="enter('1686378065465085743');" onmouseout="out('1686378065465085743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 143 	protected String name = &quot;&quot;;                                                                             </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 144                                                                                                          </span>
<span class="-569453823339800905" onmouseenter="enter('-569453823339800905');" onmouseout="out('-569453823339800905');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 145 	public static class Schema extends BucketSchema&lt;Tag&gt; {                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 146                                                                                                          </span>
<span class="3400389585123136733" onmouseenter="enter('3400389585123136733');" onmouseout="out('3400389585123136733');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 147         public Schema(){                                                                                 </span>
<span class="-4886495676536647522" onmouseenter="enter('-4886495676536647522');" onmouseout="out('-4886495676536647522');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 148             autoIndex();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 150                                                                                                          </span>
<span class="4046368376475730022" onmouseenter="enter('4046368376475730022');" onmouseout="out('4046368376475730022');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 151         public String getRemoteName(){                                                                   </span>
<span class="2742032977421093316" onmouseenter="enter('2742032977421093316');" onmouseout="out('2742032977421093316');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 152             return Tag.BUCKET_NAME;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 153         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154                                                                                                          </span>
<span class="7844026162775747369" onmouseenter="enter('7844026162775747369');" onmouseout="out('7844026162775747369');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155 		public Tag build(String key, Map&lt;String,Object&gt;properties){                                            </span>
<span class="1758535077202277046" onmouseenter="enter('1758535077202277046');" onmouseout="out('1758535077202277046');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156 			return new Tag(key, properties);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 157 		}                                                                                                      </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 158                                                                                                          </span>
<span class="-3851977225752321267" onmouseenter="enter('-3851977225752321267');" onmouseout="out('-3851977225752321267');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 159         public void update(Tag tag, Map&lt;String,Object&gt;properties){                                       </span>
<span class="-1078923059245678284" onmouseenter="enter('-1078923059245678284');" onmouseout="out('-1078923059245678284');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 160             tag.setProperties(properties);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 161         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 162 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 163                                                                                                          </span>
<span class="-605410254880650411" onmouseenter="enter('-605410254880650411');" onmouseout="out('-605410254880650411');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 164     public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; bucket){                                                    </span>
<span class="-8996265830296339413" onmouseenter="enter('-8996265830296339413');" onmouseout="out('-8996265830296339413');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 165         return bucket.query().order(&quot;index&quot;).orderByKey();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 166     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 167                                                                                                          </span>
<span class="-1557734870769459952" onmouseenter="enter('-1557734870769459952');" onmouseout="out('-1557734870769459952');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 168     public Tag(String key){                                                                              </span>
<span class="8909623840762780315" onmouseenter="enter('8909623840762780315');" onmouseout="out('8909623840762780315');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 169         super(key, new HashMap&lt;String,Object&gt;());                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 170     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 171                                                                                                          </span>
<span class="-1782989834715628034" onmouseenter="enter('-1782989834715628034');" onmouseout="out('-1782989834715628034');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 172 	public Tag(String key, Map&lt;String,Object&gt;properties){                                                   </span>
<span class="-6821486208075908487" onmouseenter="enter('-6821486208075908487');" onmouseout="out('-6821486208075908487');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 173 		super(key, properties);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 174 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 175                                                                                                          </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 176 	public String getName() {                                                                               </span>
<span class="-8575928775368193440" onmouseenter="enter('-8575928775368193440');" onmouseout="out('-8575928775368193440');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 177 		String name = (String) properties.get(&quot;name&quot;);                                                         </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 178         if (name == null) {                                                                              </span>
<span class="-8300454056005473230" onmouseenter="enter('-8300454056005473230');" onmouseout="out('-8300454056005473230');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 179             name = getSimperiumKey();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 180         }                                                                                                </span>
<span class="-3727955329973069704" onmouseenter="enter('-3727955329973069704');" onmouseout="out('-3727955329973069704');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 181         return name;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 182 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 183 	                                                                                                        </span>
<span class="4392143110573682803" onmouseenter="enter('4392143110573682803');" onmouseout="out('4392143110573682803');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 184 	public void setName(String name) {                                                                      </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 185 		if (name == null) {                                                                                    </span>
<span class="-213167207179067307" onmouseenter="enter('-213167207179067307');" onmouseout="out('-213167207179067307');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 186 			name = &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 187 		}                                                                                                      </span>
<span class="2817567480569190576" onmouseenter="enter('2817567480569190576');" onmouseout="out('2817567480569190576');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 188         properties.put(&quot;name&quot;, name);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 189 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 190 		                                                                                                       </span>
<span class="3314214788331321193" onmouseenter="enter('3314214788331321193');" onmouseout="out('3314214788331321193');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 191 	public Integer getIndex() {                                                                             </span>
<span class="2969810016527350634" onmouseenter="enter('2969810016527350634');" onmouseout="out('2969810016527350634');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 192         return (Integer) properties.get(&quot;index&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 193 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 194 	                                                                                                        </span>
<span class="-500909398055877872" onmouseenter="enter('-500909398055877872');" onmouseout="out('-500909398055877872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 195 	public void setIndex(Integer tagIndex) {                                                                </span>
<span class="7502077113130045873" onmouseenter="enter('7502077113130045873');" onmouseout="out('7502077113130045873');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 196         if (tagIndex == null) {                                                                          </span>
<span class="-8476157160667954591" onmouseenter="enter('-8476157160667954591');" onmouseout="out('-8476157160667954591');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 197             properties.remove(&quot;index&quot;);                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 198         } else {                                                                                         </span>
<span class="-3130425453493968229" onmouseenter="enter('-3130425453493968229');" onmouseout="out('-3130425453493968229');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199             properties.put(&quot;index&quot;, tagIndex);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 200         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202                                                                                                          </span>
<span class="-8679812804925121757" onmouseenter="enter('-8679812804925121757');" onmouseout="out('-8679812804925121757');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 203     public void renameTo(String name, Bucket&lt;Note&gt; notesBucket){                                         </span>
<span class="-5333234158858741655" onmouseenter="enter('-5333234158858741655');" onmouseout="out('-5333234158858741655');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 204         String key = name.toLowerCase();                                                                 </span>
<span class="372096354403962352" onmouseenter="enter('372096354403962352');" onmouseout="out('372096354403962352');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 205         if (!getSimperiumKey().equals(key)) {                                                            </span>
<span class="-5209391090982449704" onmouseenter="enter('-5209391090982449704');" onmouseout="out('-5209391090982449704');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 206             // create a new tag with the value as the key/name                                           </span>
<span class="6032101940625473392" onmouseenter="enter('6032101940625473392');" onmouseout="out('6032101940625473392');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 207             // TODO: tag already exists?                                                                 </span>
<span class="3155175442539471819" onmouseenter="enter('3155175442539471819');" onmouseout="out('3155175442539471819');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 208             Tag newTag = ((Bucket&lt;Tag&gt;) getBucket()).newObject(key);                                     </span>
<span class="-3606524567859777176" onmouseenter="enter('-3606524567859777176');" onmouseout="out('-3606524567859777176');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 209             newTag.setName(name);                                                                        </span>
<span class="258850024922996991" onmouseenter="enter('258850024922996991');" onmouseout="out('258850024922996991');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 210             newTag.save();                                                                               </span>
<span class="7470970541221155470" onmouseenter="enter('7470970541221155470');" onmouseout="out('7470970541221155470');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 211             // get all the notes from tag, remove the item                                               </span>
<span class="-5038121255928315403" onmouseenter="enter('-5038121255928315403');" onmouseout="out('-5038121255928315403');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 212             ObjectCursor&lt;Note&gt; notesCursor = findNotes(notesBucket);                                     </span>
<span class="5797388004741082600" onmouseenter="enter('5797388004741082600');" onmouseout="out('5797388004741082600');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 213             while(notesCursor.moveToNext()){                                                             </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 214                 Note note = notesCursor.getObject();                                                     </span>
<span class="4194617991967274327" onmouseenter="enter('4194617991967274327');" onmouseout="out('4194617991967274327');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 215                 List&lt;String&gt; tags = new ArrayList&lt;String&gt;(note.getTags());                               </span>
<span class="7519471749189509450" onmouseenter="enter('7519471749189509450');" onmouseout="out('7519471749189509450');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 216                 List&lt;String&gt; newTags = new ArrayList&lt;String&gt;(tags.size());                               </span>
<span class="4819972252949867193" onmouseenter="enter('4819972252949867193');" onmouseout="out('4819972252949867193');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 217                 // iterate and do a case insensitive comparison on each tag                              </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 218                 for (String tag : tags) {                                                                </span>
<span class="-1181388508971995190" onmouseenter="enter('-1181388508971995190');" onmouseout="out('-1181388508971995190');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 219                     // if it&#x27;s this tag, add the new tag                                                 </span>
<span class="1729352567454004045" onmouseenter="enter('1729352567454004045');" onmouseout="out('1729352567454004045');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 220                     if (tag.toLowerCase().equals(getSimperiumKey())) {                                   </span>
<span class="4647130676194688636" onmouseenter="enter('4647130676194688636');" onmouseout="out('4647130676194688636');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 221                         newTags.add(name);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 222                     } else {                                                                             </span>
<span class="3940675775669567062" onmouseenter="enter('3940675775669567062');" onmouseout="out('3940675775669567062');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 223                         newTags.add(tag);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 224                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 225                 }                                                                                        </span>
<span class="8951985675496394805" onmouseenter="enter('8951985675496394805');" onmouseout="out('8951985675496394805');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 226                 note.setTags(newTags);                                                                   </span>
<span class="1786517470939259447" onmouseenter="enter('1786517470939259447');" onmouseout="out('1786517470939259447');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 227                 note.save();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 228             }                                                                                            </span>
<span class="6185676292406674524" onmouseenter="enter('6185676292406674524');" onmouseout="out('6185676292406674524');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 229             notesCursor.close();                                                                         </span>
<span class="-148607923632229467" onmouseenter="enter('-148607923632229467');" onmouseout="out('-148607923632229467');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 230             delete();                                                                                    </span>
<span class="1346801549096854578" onmouseenter="enter('1346801549096854578');" onmouseout="out('1346801549096854578');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 231         } else if(!getName().equals(name)) {                                                             </span>
<span class="7444035316722908517" onmouseenter="enter('7444035316722908517');" onmouseout="out('7444035316722908517');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 232             setName(name);                                                                               </span>
<span class="8471916837986154111" onmouseenter="enter('8471916837986154111');" onmouseout="out('8471916837986154111');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 233             save();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 234         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 235     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 236                                                                                                          </span>
<span class="5713370915334643965" onmouseenter="enter('5713370915334643965');" onmouseout="out('5713370915334643965');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 237     protected void setProperties(Map&lt;String,Object&gt; properties){                                         </span>
<span class="-1470973607859720557" onmouseenter="enter('-1470973607859720557');" onmouseout="out('-1470973607859720557');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 238         this.properties = properties;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 239     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 240                                                                                                          </span>
<span class="9199474315053816858" onmouseenter="enter('9199474315053816858');" onmouseout="out('9199474315053816858');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 241     public ObjectCursor&lt;Note&gt; findNotes(Bucket&lt;Note&gt; notesBucket){                                       </span>
<span class="-5783455742197660153" onmouseenter="enter('-5783455742197660153');" onmouseout="out('-5783455742197660153');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 242         return notesBucket.query().where(&quot;tags&quot;, ComparisonType.LIKE, getSimperiumKey()).execute();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 243     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 244 }                                                                                                        </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 245 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span></pre></td>
                            <td><pre><span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">   2 ||||||| BASE                                                                                             </span>
<span class="9181943406056492869" onmouseenter="enter('9181943406056492869');" onmouseout="out('9181943406056492869');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   3 package com.automattic.simplenote.models;                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   4                                                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   5 import com.simperium.client.Bucket;                                                                      </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   6 import com.simperium.client.Bucket.ObjectCursor;                                                         </span>
<span class="6125639164043971044" onmouseenter="enter('6125639164043971044');" onmouseout="out('6125639164043971044');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   7 import com.simperium.client.BucketObject;                                                                </span>
<span class="-665307165473523580" onmouseenter="enter('-665307165473523580');" onmouseout="out('-665307165473523580');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   8 import com.simperium.client.BucketSchema;                                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   9 import com.simperium.client.Query;                                                                       </span>
<span class="-838252138947964043" onmouseenter="enter('-838252138947964043');" onmouseout="out('-838252138947964043');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  10 import com.simperium.client.Query.ComparisonType;                                                        </span>
<span class="-7125452997935303365" onmouseenter="enter('-7125452997935303365');" onmouseout="out('-7125452997935303365');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  11 import com.simperium.client.Query.SortType;                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  12                                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  13 import java.util.Map;                                                                                    </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  14 import java.util.List;                                                                                   </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  15 import java.util.ArrayList;                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  16                                                                                                          </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  17 import android.util.Log;                                                                                 </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  18                                                                                                          </span>
<span class="-5520751644148063740" onmouseenter="enter('-5520751644148063740');" onmouseout="out('-5520751644148063740');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  19 public class Tag extends BucketObject {                                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  20                                                                                                          </span>
<span class="4408768180973442346" onmouseenter="enter('4408768180973442346');" onmouseout="out('4408768180973442346');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  21 	public static final String BUCKET_NAME=&quot;tag&quot;;                                                           </span>
<span class="8194120603293670320" onmouseenter="enter('8194120603293670320');" onmouseout="out('8194120603293670320');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  22 	protected int tagIndex;                                                                                 </span>
<span class="1686378065465085743" onmouseenter="enter('1686378065465085743');" onmouseout="out('1686378065465085743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  23 	protected String name = &quot;&quot;;                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  24                                                                                                          </span>
<span class="-569453823339800905" onmouseenter="enter('-569453823339800905');" onmouseout="out('-569453823339800905');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  25 	public static class Schema extends BucketSchema&lt;Tag&gt; {                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  26                                                                                                          </span>
<span class="3400389585123136733" onmouseenter="enter('3400389585123136733');" onmouseout="out('3400389585123136733');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  27         public Schema(){                                                                                 </span>
<span class="-4886495676536647522" onmouseenter="enter('-4886495676536647522');" onmouseout="out('-4886495676536647522');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  28             autoIndex();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  29         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  30                                                                                                          </span>
<span class="4046368376475730022" onmouseenter="enter('4046368376475730022');" onmouseout="out('4046368376475730022');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  31         public String getRemoteName(){                                                                   </span>
<span class="2742032977421093316" onmouseenter="enter('2742032977421093316');" onmouseout="out('2742032977421093316');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  32             return Tag.BUCKET_NAME;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  33         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34                                                                                                          </span>
<span class="7844026162775747369" onmouseenter="enter('7844026162775747369');" onmouseout="out('7844026162775747369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35 		public Tag build(String key, Map&lt;String,Object&gt;properties){                                            </span>
<span class="1758535077202277046" onmouseenter="enter('1758535077202277046');" onmouseout="out('1758535077202277046');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36 			return new Tag(key, properties);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37 		}                                                                                                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38                                                                                                          </span>
<span class="-3851977225752321267" onmouseenter="enter('-3851977225752321267');" onmouseout="out('-3851977225752321267');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39         public void update(Tag tag, Map&lt;String,Object&gt;properties){                                       </span>
<span class="-1078923059245678284" onmouseenter="enter('-1078923059245678284');" onmouseout="out('-1078923059245678284');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40             tag.setProperties(properties);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  43                                                                                                          </span>
<span class="-605410254880650411" onmouseenter="enter('-605410254880650411');" onmouseout="out('-605410254880650411');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  44     public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; bucket){                                                    </span>
<span class="-8996265830296339413" onmouseenter="enter('-8996265830296339413');" onmouseout="out('-8996265830296339413');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  45         return bucket.query().order(&quot;index&quot;).orderByKey();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  46     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47                                                                                                          </span>
<span class="-1782989834715628034" onmouseenter="enter('-1782989834715628034');" onmouseout="out('-1782989834715628034');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48 	public Tag(String key, Map&lt;String,Object&gt;properties){                                                   </span>
<span class="-6821486208075908487" onmouseenter="enter('-6821486208075908487');" onmouseout="out('-6821486208075908487');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  49 		super(key, properties);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  50 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  51                                                                                                          </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  52 	public String getName() {                                                                               </span>
<span class="-8575928775368193440" onmouseenter="enter('-8575928775368193440');" onmouseout="out('-8575928775368193440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  53 		String name = (String) properties.get(&quot;name&quot;);                                                         </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  54         if (name == null) {                                                                              </span>
<span class="-8300454056005473230" onmouseenter="enter('-8300454056005473230');" onmouseout="out('-8300454056005473230');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  55             name = getSimperiumKey();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  56         }                                                                                                </span>
<span class="-3727955329973069704" onmouseenter="enter('-3727955329973069704');" onmouseout="out('-3727955329973069704');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  57         return name;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  58 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  59                                                                                                          </span>
<span class="4392143110573682803" onmouseenter="enter('4392143110573682803');" onmouseout="out('4392143110573682803');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60 	public void setName(String name) {                                                                      </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  61 		if (name == null) {                                                                                    </span>
<span class="-213167207179067307" onmouseenter="enter('-213167207179067307');" onmouseout="out('-213167207179067307');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62 			name = &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63 		}                                                                                                      </span>
<span class="2817567480569190576" onmouseenter="enter('2817567480569190576');" onmouseout="out('2817567480569190576');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64         properties.put(&quot;name&quot;, name);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66                                                                                                          </span>
<span class="3314214788331321193" onmouseenter="enter('3314214788331321193');" onmouseout="out('3314214788331321193');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67 	public Integer getIndex() {                                                                             </span>
<span class="2969810016527350634" onmouseenter="enter('2969810016527350634');" onmouseout="out('2969810016527350634');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68         return (Integer) properties.get(&quot;index&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70                                                                                                          </span>
<span class="-500909398055877872" onmouseenter="enter('-500909398055877872');" onmouseout="out('-500909398055877872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71 	public void setIndex(Integer tagIndex) {                                                                </span>
<span class="7502077113130045873" onmouseenter="enter('7502077113130045873');" onmouseout="out('7502077113130045873');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72         if (tagIndex == null) {                                                                          </span>
<span class="-8476157160667954591" onmouseenter="enter('-8476157160667954591');" onmouseout="out('-8476157160667954591');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73             properties.remove(&quot;index&quot;);                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74         } else {                                                                                         </span>
<span class="-3130425453493968229" onmouseenter="enter('-3130425453493968229');" onmouseout="out('-3130425453493968229');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75             properties.put(&quot;index&quot;, tagIndex);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78                                                                                                          </span>
<span class="-8679812804925121757" onmouseenter="enter('-8679812804925121757');" onmouseout="out('-8679812804925121757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79     public void renameTo(String name, Bucket&lt;Note&gt; notesBucket){                                         </span>
<span class="-5333234158858741655" onmouseenter="enter('-5333234158858741655');" onmouseout="out('-5333234158858741655');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80         String key = name.toLowerCase();                                                                 </span>
<span class="372096354403962352" onmouseenter="enter('372096354403962352');" onmouseout="out('372096354403962352');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81         if (!getSimperiumKey().equals(key)) {                                                            </span>
<span class="-5209391090982449704" onmouseenter="enter('-5209391090982449704');" onmouseout="out('-5209391090982449704');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82             // create a new tag with the value as the key/name                                           </span>
<span class="6032101940625473392" onmouseenter="enter('6032101940625473392');" onmouseout="out('6032101940625473392');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83             // TODO: tag already exists?                                                                 </span>
<span class="3155175442539471819" onmouseenter="enter('3155175442539471819');" onmouseout="out('3155175442539471819');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84             Tag newTag = ((Bucket&lt;Tag&gt;) getBucket()).newObject(key);                                     </span>
<span class="-3606524567859777176" onmouseenter="enter('-3606524567859777176');" onmouseout="out('-3606524567859777176');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85             newTag.setName(name);                                                                        </span>
<span class="258850024922996991" onmouseenter="enter('258850024922996991');" onmouseout="out('258850024922996991');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86             newTag.save();                                                                               </span>
<span class="7470970541221155470" onmouseenter="enter('7470970541221155470');" onmouseout="out('7470970541221155470');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87             // get all the notes from tag, remove the item                                               </span>
<span class="-5038121255928315403" onmouseenter="enter('-5038121255928315403');" onmouseout="out('-5038121255928315403');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88             ObjectCursor&lt;Note&gt; notesCursor = findNotes(notesBucket);                                     </span>
<span class="5797388004741082600" onmouseenter="enter('5797388004741082600');" onmouseout="out('5797388004741082600');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89             while(notesCursor.moveToNext()){                                                             </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90                 Note note = notesCursor.getObject();                                                     </span>
<span class="4194617991967274327" onmouseenter="enter('4194617991967274327');" onmouseout="out('4194617991967274327');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91                 List&lt;String&gt; tags = new ArrayList&lt;String&gt;(note.getTags());                               </span>
<span class="7519471749189509450" onmouseenter="enter('7519471749189509450');" onmouseout="out('7519471749189509450');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92                 List&lt;String&gt; newTags = new ArrayList&lt;String&gt;(tags.size());                               </span>
<span class="4819972252949867193" onmouseenter="enter('4819972252949867193');" onmouseout="out('4819972252949867193');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93                 // iterate and do a case insensitive comparison on each tag                              </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94                 for (String tag : tags) {                                                                </span>
<span class="-1181388508971995190" onmouseenter="enter('-1181388508971995190');" onmouseout="out('-1181388508971995190');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95                     // if it&#x27;s this tag, add the new tag                                                 </span>
<span class="1729352567454004045" onmouseenter="enter('1729352567454004045');" onmouseout="out('1729352567454004045');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96                     if (tag.toLowerCase().equals(getSimperiumKey())) {                                   </span>
<span class="4647130676194688636" onmouseenter="enter('4647130676194688636');" onmouseout="out('4647130676194688636');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97                         newTags.add(name);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98                     } else {                                                                             </span>
<span class="3940675775669567062" onmouseenter="enter('3940675775669567062');" onmouseout="out('3940675775669567062');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99                         newTags.add(tag);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101                 }                                                                                        </span>
<span class="8951985675496394805" onmouseenter="enter('8951985675496394805');" onmouseout="out('8951985675496394805');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102                 note.setTags(newTags);                                                                   </span>
<span class="1786517470939259447" onmouseenter="enter('1786517470939259447');" onmouseout="out('1786517470939259447');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103                 note.save();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104             }                                                                                            </span>
<span class="6185676292406674524" onmouseenter="enter('6185676292406674524');" onmouseout="out('6185676292406674524');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105             notesCursor.close();                                                                         </span>
<span class="-148607923632229467" onmouseenter="enter('-148607923632229467');" onmouseout="out('-148607923632229467');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106             delete();                                                                                    </span>
<span class="1346801549096854578" onmouseenter="enter('1346801549096854578');" onmouseout="out('1346801549096854578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107         } else if(!getName().equals(name)) {                                                             </span>
<span class="7444035316722908517" onmouseenter="enter('7444035316722908517');" onmouseout="out('7444035316722908517');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108             setName(name);                                                                               </span>
<span class="8471916837986154111" onmouseenter="enter('8471916837986154111');" onmouseout="out('8471916837986154111');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109             save();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112                                                                                                          </span>
<span class="5713370915334643965" onmouseenter="enter('5713370915334643965');" onmouseout="out('5713370915334643965');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113     protected void setProperties(Map&lt;String,Object&gt; properties){                                         </span>
<span class="-1470973607859720557" onmouseenter="enter('-1470973607859720557');" onmouseout="out('-1470973607859720557');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114         this.properties = properties;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116                                                                                                          </span>
<span class="9199474315053816858" onmouseenter="enter('9199474315053816858');" onmouseout="out('9199474315053816858');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117     public ObjectCursor&lt;Note&gt; findNotes(Bucket&lt;Note&gt; notesBucket){                                       </span>
<span class="-5783455742197660153" onmouseenter="enter('-5783455742197660153');" onmouseout="out('-5783455742197660153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118         return notesBucket.query().where(&quot;tags&quot;, ComparisonType.LIKE, getSimperiumKey()).execute();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120 }                                                                                                        </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 121 =======                                                                                                  </span>
<span class="9181943406056492869" onmouseenter="enter('9181943406056492869');" onmouseout="out('9181943406056492869');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122 package com.automattic.simplenote.models;                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 123                                                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 124 import com.simperium.client.Bucket;                                                                      </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 125 import com.simperium.client.Bucket.ObjectCursor;                                                         </span>
<span class="6125639164043971044" onmouseenter="enter('6125639164043971044');" onmouseout="out('6125639164043971044');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126 import com.simperium.client.BucketObject;                                                                </span>
<span class="-665307165473523580" onmouseenter="enter('-665307165473523580');" onmouseout="out('-665307165473523580');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127 import com.simperium.client.BucketSchema;                                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128 import com.simperium.client.Query;                                                                       </span>
<span class="-838252138947964043" onmouseenter="enter('-838252138947964043');" onmouseout="out('-838252138947964043');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 129 import com.simperium.client.Query.ComparisonType;                                                        </span>
<span class="-7125452997935303365" onmouseenter="enter('-7125452997935303365');" onmouseout="out('-7125452997935303365');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 130 import com.simperium.client.Query.SortType;                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 131                                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 132 import java.util.Map;                                                                                    </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 134 import java.util.List;                                                                                   </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 135 import java.util.ArrayList;                                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 136                                                                                                          </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 137 import android.util.Log;                                                                                 </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 138                                                                                                          </span>
<span class="-5520751644148063740" onmouseenter="enter('-5520751644148063740');" onmouseout="out('-5520751644148063740');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 139 public class Tag extends BucketObject {                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 140                                                                                                          </span>
<span class="4408768180973442346" onmouseenter="enter('4408768180973442346');" onmouseout="out('4408768180973442346');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 141 	public static final String BUCKET_NAME=&quot;tag&quot;;                                                           </span>
<span class="8194120603293670320" onmouseenter="enter('8194120603293670320');" onmouseout="out('8194120603293670320');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 142 	protected int tagIndex;                                                                                 </span>
<span class="1686378065465085743" onmouseenter="enter('1686378065465085743');" onmouseout="out('1686378065465085743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 143 	protected String name = &quot;&quot;;                                                                             </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 144                                                                                                          </span>
<span class="-569453823339800905" onmouseenter="enter('-569453823339800905');" onmouseout="out('-569453823339800905');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 145 	public static class Schema extends BucketSchema&lt;Tag&gt; {                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 146                                                                                                          </span>
<span class="3400389585123136733" onmouseenter="enter('3400389585123136733');" onmouseout="out('3400389585123136733');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 147         public Schema(){                                                                                 </span>
<span class="-4886495676536647522" onmouseenter="enter('-4886495676536647522');" onmouseout="out('-4886495676536647522');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 148             autoIndex();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 150                                                                                                          </span>
<span class="4046368376475730022" onmouseenter="enter('4046368376475730022');" onmouseout="out('4046368376475730022');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 151         public String getRemoteName(){                                                                   </span>
<span class="2742032977421093316" onmouseenter="enter('2742032977421093316');" onmouseout="out('2742032977421093316');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 152             return Tag.BUCKET_NAME;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 153         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154                                                                                                          </span>
<span class="7844026162775747369" onmouseenter="enter('7844026162775747369');" onmouseout="out('7844026162775747369');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155 		public Tag build(String key, Map&lt;String,Object&gt;properties){                                            </span>
<span class="1758535077202277046" onmouseenter="enter('1758535077202277046');" onmouseout="out('1758535077202277046');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156 			return new Tag(key, properties);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 157 		}                                                                                                      </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 158                                                                                                          </span>
<span class="-3851977225752321267" onmouseenter="enter('-3851977225752321267');" onmouseout="out('-3851977225752321267');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 159         public void update(Tag tag, Map&lt;String,Object&gt;properties){                                       </span>
<span class="-1078923059245678284" onmouseenter="enter('-1078923059245678284');" onmouseout="out('-1078923059245678284');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 160             tag.setProperties(properties);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 161         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 162 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 163                                                                                                          </span>
<span class="-605410254880650411" onmouseenter="enter('-605410254880650411');" onmouseout="out('-605410254880650411');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 164     public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; bucket){                                                    </span>
<span class="-8996265830296339413" onmouseenter="enter('-8996265830296339413');" onmouseout="out('-8996265830296339413');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 165         return bucket.query().order(&quot;index&quot;).orderByKey();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 166     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 167                                                                                                          </span>
<span class="-1557734870769459952" onmouseenter="enter('-1557734870769459952');" onmouseout="out('-1557734870769459952');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 168     public Tag(String key){                                                                              </span>
<span class="8909623840762780315" onmouseenter="enter('8909623840762780315');" onmouseout="out('8909623840762780315');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 169         super(key, new HashMap&lt;String,Object&gt;());                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 170     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 171                                                                                                          </span>
<span class="-1782989834715628034" onmouseenter="enter('-1782989834715628034');" onmouseout="out('-1782989834715628034');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 172 	public Tag(String key, Map&lt;String,Object&gt;properties){                                                   </span>
<span class="-6821486208075908487" onmouseenter="enter('-6821486208075908487');" onmouseout="out('-6821486208075908487');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 173 		super(key, properties);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 174 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 175                                                                                                          </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 176 	public String getName() {                                                                               </span>
<span class="-8575928775368193440" onmouseenter="enter('-8575928775368193440');" onmouseout="out('-8575928775368193440');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 177 		String name = (String) properties.get(&quot;name&quot;);                                                         </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 178         if (name == null) {                                                                              </span>
<span class="-8300454056005473230" onmouseenter="enter('-8300454056005473230');" onmouseout="out('-8300454056005473230');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 179             name = getSimperiumKey();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 180         }                                                                                                </span>
<span class="-3727955329973069704" onmouseenter="enter('-3727955329973069704');" onmouseout="out('-3727955329973069704');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 181         return name;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 182 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 183                                                                                                          </span>
<span class="4392143110573682803" onmouseenter="enter('4392143110573682803');" onmouseout="out('4392143110573682803');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 184 	public void setName(String name) {                                                                      </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 185 		if (name == null) {                                                                                    </span>
<span class="-213167207179067307" onmouseenter="enter('-213167207179067307');" onmouseout="out('-213167207179067307');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 186 			name = &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 187 		}                                                                                                      </span>
<span class="2817567480569190576" onmouseenter="enter('2817567480569190576');" onmouseout="out('2817567480569190576');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 188         properties.put(&quot;name&quot;, name);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 189 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 190                                                                                                          </span>
<span class="3314214788331321193" onmouseenter="enter('3314214788331321193');" onmouseout="out('3314214788331321193');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 191 	public Integer getIndex() {                                                                             </span>
<span class="2969810016527350634" onmouseenter="enter('2969810016527350634');" onmouseout="out('2969810016527350634');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 192         return (Integer) properties.get(&quot;index&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 193 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 194                                                                                                          </span>
<span class="-500909398055877872" onmouseenter="enter('-500909398055877872');" onmouseout="out('-500909398055877872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 195 	public void setIndex(Integer tagIndex) {                                                                </span>
<span class="7502077113130045873" onmouseenter="enter('7502077113130045873');" onmouseout="out('7502077113130045873');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 196         if (tagIndex == null) {                                                                          </span>
<span class="-8476157160667954591" onmouseenter="enter('-8476157160667954591');" onmouseout="out('-8476157160667954591');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 197             properties.remove(&quot;index&quot;);                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 198         } else {                                                                                         </span>
<span class="-3130425453493968229" onmouseenter="enter('-3130425453493968229');" onmouseout="out('-3130425453493968229');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199             properties.put(&quot;index&quot;, tagIndex);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 200         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202                                                                                                          </span>
<span class="-8679812804925121757" onmouseenter="enter('-8679812804925121757');" onmouseout="out('-8679812804925121757');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 203     public void renameTo(String name, Bucket&lt;Note&gt; notesBucket){                                         </span>
<span class="-5333234158858741655" onmouseenter="enter('-5333234158858741655');" onmouseout="out('-5333234158858741655');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 204         String key = name.toLowerCase();                                                                 </span>
<span class="372096354403962352" onmouseenter="enter('372096354403962352');" onmouseout="out('372096354403962352');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 205         if (!getSimperiumKey().equals(key)) {                                                            </span>
<span class="-5209391090982449704" onmouseenter="enter('-5209391090982449704');" onmouseout="out('-5209391090982449704');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 206             // create a new tag with the value as the key/name                                           </span>
<span class="6032101940625473392" onmouseenter="enter('6032101940625473392');" onmouseout="out('6032101940625473392');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 207             // TODO: tag already exists?                                                                 </span>
<span class="3155175442539471819" onmouseenter="enter('3155175442539471819');" onmouseout="out('3155175442539471819');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 208             Tag newTag = ((Bucket&lt;Tag&gt;) getBucket()).newObject(key);                                     </span>
<span class="-3606524567859777176" onmouseenter="enter('-3606524567859777176');" onmouseout="out('-3606524567859777176');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 209             newTag.setName(name);                                                                        </span>
<span class="258850024922996991" onmouseenter="enter('258850024922996991');" onmouseout="out('258850024922996991');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 210             newTag.save();                                                                               </span>
<span class="7470970541221155470" onmouseenter="enter('7470970541221155470');" onmouseout="out('7470970541221155470');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 211             // get all the notes from tag, remove the item                                               </span>
<span class="-5038121255928315403" onmouseenter="enter('-5038121255928315403');" onmouseout="out('-5038121255928315403');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 212             ObjectCursor&lt;Note&gt; notesCursor = findNotes(notesBucket);                                     </span>
<span class="5797388004741082600" onmouseenter="enter('5797388004741082600');" onmouseout="out('5797388004741082600');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 213             while(notesCursor.moveToNext()){                                                             </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 214                 Note note = notesCursor.getObject();                                                     </span>
<span class="4194617991967274327" onmouseenter="enter('4194617991967274327');" onmouseout="out('4194617991967274327');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 215                 List&lt;String&gt; tags = new ArrayList&lt;String&gt;(note.getTags());                               </span>
<span class="7519471749189509450" onmouseenter="enter('7519471749189509450');" onmouseout="out('7519471749189509450');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 216                 List&lt;String&gt; newTags = new ArrayList&lt;String&gt;(tags.size());                               </span>
<span class="4819972252949867193" onmouseenter="enter('4819972252949867193');" onmouseout="out('4819972252949867193');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 217                 // iterate and do a case insensitive comparison on each tag                              </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 218                 for (String tag : tags) {                                                                </span>
<span class="-1181388508971995190" onmouseenter="enter('-1181388508971995190');" onmouseout="out('-1181388508971995190');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 219                     // if it&#x27;s this tag, add the new tag                                                 </span>
<span class="1729352567454004045" onmouseenter="enter('1729352567454004045');" onmouseout="out('1729352567454004045');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 220                     if (tag.toLowerCase().equals(getSimperiumKey())) {                                   </span>
<span class="4647130676194688636" onmouseenter="enter('4647130676194688636');" onmouseout="out('4647130676194688636');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 221                         newTags.add(name);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 222                     } else {                                                                             </span>
<span class="3940675775669567062" onmouseenter="enter('3940675775669567062');" onmouseout="out('3940675775669567062');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 223                         newTags.add(tag);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 224                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 225                 }                                                                                        </span>
<span class="8951985675496394805" onmouseenter="enter('8951985675496394805');" onmouseout="out('8951985675496394805');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 226                 note.setTags(newTags);                                                                   </span>
<span class="1786517470939259447" onmouseenter="enter('1786517470939259447');" onmouseout="out('1786517470939259447');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 227                 note.save();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 228             }                                                                                            </span>
<span class="6185676292406674524" onmouseenter="enter('6185676292406674524');" onmouseout="out('6185676292406674524');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 229             notesCursor.close();                                                                         </span>
<span class="-148607923632229467" onmouseenter="enter('-148607923632229467');" onmouseout="out('-148607923632229467');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 230             delete();                                                                                    </span>
<span class="1346801549096854578" onmouseenter="enter('1346801549096854578');" onmouseout="out('1346801549096854578');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 231         } else if(!getName().equals(name)) {                                                             </span>
<span class="7444035316722908517" onmouseenter="enter('7444035316722908517');" onmouseout="out('7444035316722908517');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 232             setName(name);                                                                               </span>
<span class="8471916837986154111" onmouseenter="enter('8471916837986154111');" onmouseout="out('8471916837986154111');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 233             save();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 234         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 235     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 236                                                                                                          </span>
<span class="5713370915334643965" onmouseenter="enter('5713370915334643965');" onmouseout="out('5713370915334643965');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 237     protected void setProperties(Map&lt;String,Object&gt; properties){                                         </span>
<span class="-1470973607859720557" onmouseenter="enter('-1470973607859720557');" onmouseout="out('-1470973607859720557');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 238         this.properties = properties;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 239     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 240                                                                                                          </span>
<span class="9199474315053816858" onmouseenter="enter('9199474315053816858');" onmouseout="out('9199474315053816858');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 241     public ObjectCursor&lt;Note&gt; findNotes(Bucket&lt;Note&gt; notesBucket){                                       </span>
<span class="-5783455742197660153" onmouseenter="enter('-5783455742197660153');" onmouseout="out('-5783455742197660153');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 242         return notesBucket.query().where(&quot;tags&quot;, ComparisonType.LIKE, getSimperiumKey()).execute();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 243     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 244 }                                                                                                        </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 245 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span></pre></td>
                            <td><pre><span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style="">   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">   2 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="   3 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">   3 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">   4 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   5                                                                                                          </span>
<span class="9181943406056492869" onmouseenter="enter('9181943406056492869');" onmouseout="out('9181943406056492869');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   6 package com.automattic.simplenote.models;                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   7                                                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   8 import com.simperium.client.Bucket;                                                                      </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   9 import com.simperium.client.Bucket.ObjectCursor;                                                         </span>
<span class="6125639164043971044" onmouseenter="enter('6125639164043971044');" onmouseout="out('6125639164043971044');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  10 import com.simperium.client.BucketObject;                                                                </span>
<span class="-665307165473523580" onmouseenter="enter('-665307165473523580');" onmouseout="out('-665307165473523580');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  11 import com.simperium.client.BucketSchema;                                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  12 import com.simperium.client.Query;                                                                       </span>
<span class="-838252138947964043" onmouseenter="enter('-838252138947964043');" onmouseout="out('-838252138947964043');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  13 import com.simperium.client.Query.ComparisonType;                                                        </span>
<span class="-7125452997935303365" onmouseenter="enter('-7125452997935303365');" onmouseout="out('-7125452997935303365');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  14 import com.simperium.client.Query.SortType;                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  15                                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  16 import java.util.Map;                                                                                    </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  17 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  18 import java.util.List;                                                                                   </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  19 import java.util.ArrayList;                                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  20                                                                                                          </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  21 import android.util.Log;                                                                                 </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  22                                                                                                          </span>
<span class="-5520751644148063740" onmouseenter="enter('-5520751644148063740');" onmouseout="out('-5520751644148063740');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  23 public class Tag extends BucketObject {                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  24                                                                                                          </span>
<span class="4408768180973442346" onmouseenter="enter('4408768180973442346');" onmouseout="out('4408768180973442346');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  25 	public static final String BUCKET_NAME=&quot;tag&quot;;                                                           </span>
<span class="8194120603293670320" onmouseenter="enter('8194120603293670320');" onmouseout="out('8194120603293670320');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  26 	protected int tagIndex;                                                                                 </span>
<span class="1686378065465085743" onmouseenter="enter('1686378065465085743');" onmouseout="out('1686378065465085743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  27 	protected String name = &quot;&quot;;                                                                             </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  28                                                                                                          </span>
<span class="-569453823339800905" onmouseenter="enter('-569453823339800905');" onmouseout="out('-569453823339800905');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  29 	public static class Schema extends BucketSchema&lt;Tag&gt; {                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  30                                                                                                          </span>
<span class="3400389585123136733" onmouseenter="enter('3400389585123136733');" onmouseout="out('3400389585123136733');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  31         public Schema(){                                                                                 </span>
<span class="-4886495676536647522" onmouseenter="enter('-4886495676536647522');" onmouseout="out('-4886495676536647522');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  32             autoIndex();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  33         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  34                                                                                                          </span>
<span class="4046368376475730022" onmouseenter="enter('4046368376475730022');" onmouseout="out('4046368376475730022');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  35         public String getRemoteName(){                                                                   </span>
<span class="2742032977421093316" onmouseenter="enter('2742032977421093316');" onmouseout="out('2742032977421093316');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  36             return Tag.BUCKET_NAME;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  37         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  38                                                                                                          </span>
<span class="7844026162775747369" onmouseenter="enter('7844026162775747369');" onmouseout="out('7844026162775747369');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  39 		public Tag build(String key, Map&lt;String,Object&gt;properties){                                            </span>
<span class="1758535077202277046" onmouseenter="enter('1758535077202277046');" onmouseout="out('1758535077202277046');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  40 			return new Tag(key, properties);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  41 		}                                                                                                      </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  42                                                                                                          </span>
<span class="-3851977225752321267" onmouseenter="enter('-3851977225752321267');" onmouseout="out('-3851977225752321267');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  43         public void update(Tag tag, Map&lt;String,Object&gt;properties){                                       </span>
<span class="-1078923059245678284" onmouseenter="enter('-1078923059245678284');" onmouseout="out('-1078923059245678284');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  44             tag.setProperties(properties);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  45         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  46 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  47                                                                                                          </span>
<span class="-605410254880650411" onmouseenter="enter('-605410254880650411');" onmouseout="out('-605410254880650411');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  48     public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; bucket){                                                    </span>
<span class="-8996265830296339413" onmouseenter="enter('-8996265830296339413');" onmouseout="out('-8996265830296339413');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  49         return bucket.query().order(&quot;index&quot;).orderByKey();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  50     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  51                                                                                                          </span>
<span class="-1557734870769459952" onmouseenter="enter('-1557734870769459952');" onmouseout="out('-1557734870769459952');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  52     public Tag(String key){                                                                              </span>
<span class="8909623840762780315" onmouseenter="enter('8909623840762780315');" onmouseout="out('8909623840762780315');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  53         super(key, new HashMap&lt;String,Object&gt;());                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  54     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  55                                                                                                          </span>
<span class="-1782989834715628034" onmouseenter="enter('-1782989834715628034');" onmouseout="out('-1782989834715628034');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  56 	public Tag(String key, Map&lt;String,Object&gt;properties){                                                   </span>
<span class="-6821486208075908487" onmouseenter="enter('-6821486208075908487');" onmouseout="out('-6821486208075908487');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  57 		super(key, properties);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  58 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  59                                                                                                          </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  60 	public String getName() {                                                                               </span>
<span class="-8575928775368193440" onmouseenter="enter('-8575928775368193440');" onmouseout="out('-8575928775368193440');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  61 		String name = (String) properties.get(&quot;name&quot;);                                                         </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  62         if (name == null) {                                                                              </span>
<span class="-8300454056005473230" onmouseenter="enter('-8300454056005473230');" onmouseout="out('-8300454056005473230');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  63             name = getSimperiumKey();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  64         }                                                                                                </span>
<span class="-3727955329973069704" onmouseenter="enter('-3727955329973069704');" onmouseout="out('-3727955329973069704');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  65         return name;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  66 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  67                                                                                                          </span>
<span class="4392143110573682803" onmouseenter="enter('4392143110573682803');" onmouseout="out('4392143110573682803');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  68 	public void setName(String name) {                                                                      </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  69 		if (name == null) {                                                                                    </span>
<span class="-213167207179067307" onmouseenter="enter('-213167207179067307');" onmouseout="out('-213167207179067307');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  70 			name = &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  71 		}                                                                                                      </span>
<span class="2817567480569190576" onmouseenter="enter('2817567480569190576');" onmouseout="out('2817567480569190576');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  72         properties.put(&quot;name&quot;, name);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  73 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  74                                                                                                          </span>
<span class="3314214788331321193" onmouseenter="enter('3314214788331321193');" onmouseout="out('3314214788331321193');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  75 	public Integer getIndex() {                                                                             </span>
<span class="2969810016527350634" onmouseenter="enter('2969810016527350634');" onmouseout="out('2969810016527350634');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  76         return (Integer) properties.get(&quot;index&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  77 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  78                                                                                                          </span>
<span class="-500909398055877872" onmouseenter="enter('-500909398055877872');" onmouseout="out('-500909398055877872');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  79 	public void setIndex(Integer tagIndex) {                                                                </span>
<span class="7502077113130045873" onmouseenter="enter('7502077113130045873');" onmouseout="out('7502077113130045873');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  80         if (tagIndex == null) {                                                                          </span>
<span class="-8476157160667954591" onmouseenter="enter('-8476157160667954591');" onmouseout="out('-8476157160667954591');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  81             properties.remove(&quot;index&quot;);                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  82         } else {                                                                                         </span>
<span class="-3130425453493968229" onmouseenter="enter('-3130425453493968229');" onmouseout="out('-3130425453493968229');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  83             properties.put(&quot;index&quot;, tagIndex);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  86                                                                                                          </span>
<span class="-8679812804925121757" onmouseenter="enter('-8679812804925121757');" onmouseout="out('-8679812804925121757');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  87     public void renameTo(String name, Bucket&lt;Note&gt; notesBucket){                                         </span>
<span class="-5333234158858741655" onmouseenter="enter('-5333234158858741655');" onmouseout="out('-5333234158858741655');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  88         String key = name.toLowerCase();                                                                 </span>
<span class="372096354403962352" onmouseenter="enter('372096354403962352');" onmouseout="out('372096354403962352');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  89         if (!getSimperiumKey().equals(key)) {                                                            </span>
<span class="-5209391090982449704" onmouseenter="enter('-5209391090982449704');" onmouseout="out('-5209391090982449704');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  90             // create a new tag with the value as the key/name                                           </span>
<span class="6032101940625473392" onmouseenter="enter('6032101940625473392');" onmouseout="out('6032101940625473392');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  91             // TODO: tag already exists?                                                                 </span>
<span class="3155175442539471819" onmouseenter="enter('3155175442539471819');" onmouseout="out('3155175442539471819');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  92             Tag newTag = ((Bucket&lt;Tag&gt;) getBucket()).newObject(key);                                     </span>
<span class="-3606524567859777176" onmouseenter="enter('-3606524567859777176');" onmouseout="out('-3606524567859777176');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  93             newTag.setName(name);                                                                        </span>
<span class="258850024922996991" onmouseenter="enter('258850024922996991');" onmouseout="out('258850024922996991');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  94             newTag.save();                                                                               </span>
<span class="7470970541221155470" onmouseenter="enter('7470970541221155470');" onmouseout="out('7470970541221155470');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  95             // get all the notes from tag, remove the item                                               </span>
<span class="-5038121255928315403" onmouseenter="enter('-5038121255928315403');" onmouseout="out('-5038121255928315403');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  96             ObjectCursor&lt;Note&gt; notesCursor = findNotes(notesBucket);                                     </span>
<span class="5797388004741082600" onmouseenter="enter('5797388004741082600');" onmouseout="out('5797388004741082600');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  97             while(notesCursor.moveToNext()){                                                             </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  98                 Note note = notesCursor.getObject();                                                     </span>
<span class="4194617991967274327" onmouseenter="enter('4194617991967274327');" onmouseout="out('4194617991967274327');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  99                 List&lt;String&gt; tags = new ArrayList&lt;String&gt;(note.getTags());                               </span>
<span class="7519471749189509450" onmouseenter="enter('7519471749189509450');" onmouseout="out('7519471749189509450');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 100                 List&lt;String&gt; newTags = new ArrayList&lt;String&gt;(tags.size());                               </span>
<span class="4819972252949867193" onmouseenter="enter('4819972252949867193');" onmouseout="out('4819972252949867193');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 101                 // iterate and do a case insensitive comparison on each tag                              </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 102                 for (String tag : tags) {                                                                </span>
<span class="-1181388508971995190" onmouseenter="enter('-1181388508971995190');" onmouseout="out('-1181388508971995190');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 103                     // if it&#x27;s this tag, add the new tag                                                 </span>
<span class="1729352567454004045" onmouseenter="enter('1729352567454004045');" onmouseout="out('1729352567454004045');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 104                     if (tag.toLowerCase().equals(getSimperiumKey())) {                                   </span>
<span class="4647130676194688636" onmouseenter="enter('4647130676194688636');" onmouseout="out('4647130676194688636');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 105                         newTags.add(name);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 106                     } else {                                                                             </span>
<span class="3940675775669567062" onmouseenter="enter('3940675775669567062');" onmouseout="out('3940675775669567062');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 107                         newTags.add(tag);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 108                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 109                 }                                                                                        </span>
<span class="8951985675496394805" onmouseenter="enter('8951985675496394805');" onmouseout="out('8951985675496394805');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 110                 note.setTags(newTags);                                                                   </span>
<span class="1786517470939259447" onmouseenter="enter('1786517470939259447');" onmouseout="out('1786517470939259447');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 111                 note.save();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 112             }                                                                                            </span>
<span class="6185676292406674524" onmouseenter="enter('6185676292406674524');" onmouseout="out('6185676292406674524');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 113             notesCursor.close();                                                                         </span>
<span class="-148607923632229467" onmouseenter="enter('-148607923632229467');" onmouseout="out('-148607923632229467');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 114             delete();                                                                                    </span>
<span class="1346801549096854578" onmouseenter="enter('1346801549096854578');" onmouseout="out('1346801549096854578');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 115         } else if(!getName().equals(name)) {                                                             </span>
<span class="7444035316722908517" onmouseenter="enter('7444035316722908517');" onmouseout="out('7444035316722908517');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 116             setName(name);                                                                               </span>
<span class="8471916837986154111" onmouseenter="enter('8471916837986154111');" onmouseout="out('8471916837986154111');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 117             save();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 118         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 119     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 120                                                                                                          </span>
<span class="5713370915334643965" onmouseenter="enter('5713370915334643965');" onmouseout="out('5713370915334643965');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 121     protected void setProperties(Map&lt;String,Object&gt; properties){                                         </span>
<span class="-1470973607859720557" onmouseenter="enter('-1470973607859720557');" onmouseout="out('-1470973607859720557');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122         this.properties = properties;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 123     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 124                                                                                                          </span>
<span class="9199474315053816858" onmouseenter="enter('9199474315053816858');" onmouseout="out('9199474315053816858');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 125     public ObjectCursor&lt;Note&gt; findNotes(Bucket&lt;Note&gt; notesBucket){                                       </span>
<span class="-5783455742197660153" onmouseenter="enter('-5783455742197660153');" onmouseout="out('-5783455742197660153');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126         return notesBucket.query().where(&quot;tags&quot;, ComparisonType.LIKE, getSimperiumKey()).execute();      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128 }                                                                                                        </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 129 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>


















































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="9181943406056492869" onmouseenter="enter('9181943406056492869');" onmouseout="out('9181943406056492869');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   1 -package com.automattic.simplenote.models;                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   2 -                                                                                                                  </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   3 -import com.simperium.client.Bucket;                                                                               </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   4 -import com.simperium.client.Bucket.ObjectCursor;                                                                  </span>
<span class="6125639164043971044" onmouseenter="enter('6125639164043971044');" onmouseout="out('6125639164043971044');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   5 -import com.simperium.client.BucketObject;                                                                         </span>
<span class="-665307165473523580" onmouseenter="enter('-665307165473523580');" onmouseout="out('-665307165473523580');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   6 -import com.simperium.client.BucketSchema;                                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   7 -import com.simperium.client.Query;                                                                                </span>
<span class="-838252138947964043" onmouseenter="enter('-838252138947964043');" onmouseout="out('-838252138947964043');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   8 -import com.simperium.client.Query.ComparisonType;                                                                 </span>
<span class="-7125452997935303365" onmouseenter="enter('-7125452997935303365');" onmouseout="out('-7125452997935303365');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   9 -import com.simperium.client.Query.SortType;                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  10 -                                                                                                                  </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  11 -import java.util.Map;                                                                                             </span>

<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  12 -import java.util.List;                                                                                            </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  13 -import java.util.ArrayList;                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  14 -                                                                                                                  </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  15 -import android.util.Log;                                                                                          </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  16 -                                                                                                                  </span>
<span class="-5520751644148063740" onmouseenter="enter('-5520751644148063740');" onmouseout="out('-5520751644148063740');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  17 -public class Tag extends BucketObject {                                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  18 -                                                                                                                  </span>
<span class="4408768180973442346" onmouseenter="enter('4408768180973442346');" onmouseout="out('4408768180973442346');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  19 -	public static final String BUCKET_NAME=&quot;tag&quot;;                                                                    </span>
<span class="8194120603293670320" onmouseenter="enter('8194120603293670320');" onmouseout="out('8194120603293670320');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  20 -	protected int tagIndex;                                                                                          </span>
<span class="1686378065465085743" onmouseenter="enter('1686378065465085743');" onmouseout="out('1686378065465085743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  21 -	protected String name = &quot;&quot;;                                                                                      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  22 -                                                                                                                  </span>
<span class="-569453823339800905" onmouseenter="enter('-569453823339800905');" onmouseout="out('-569453823339800905');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  23 -	public static class Schema extends BucketSchema&lt;Tag&gt; {                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  24 -                                                                                                                  </span>
<span class="3400389585123136733" onmouseenter="enter('3400389585123136733');" onmouseout="out('3400389585123136733');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  25 -        public Schema(){                                                                                          </span>
<span class="-4886495676536647522" onmouseenter="enter('-4886495676536647522');" onmouseout="out('-4886495676536647522');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  26 -            autoIndex();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  27 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  28 -                                                                                                                  </span>
<span class="4046368376475730022" onmouseenter="enter('4046368376475730022');" onmouseout="out('4046368376475730022');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  29 -        public String getRemoteName(){                                                                            </span>
<span class="2742032977421093316" onmouseenter="enter('2742032977421093316');" onmouseout="out('2742032977421093316');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  30 -            return Tag.BUCKET_NAME;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  31 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  32 -                                                                                                                  </span>
<span class="7844026162775747369" onmouseenter="enter('7844026162775747369');" onmouseout="out('7844026162775747369');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  33 -		public Tag build(String key, Map&lt;String,Object&gt;properties){                                                     </span>
<span class="1758535077202277046" onmouseenter="enter('1758535077202277046');" onmouseout="out('1758535077202277046');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  34 -			return new Tag(key, properties);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  35 -		}                                                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  36 -                                                                                                                  </span>
<span class="-3851977225752321267" onmouseenter="enter('-3851977225752321267');" onmouseout="out('-3851977225752321267');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  37 -        public void update(Tag tag, Map&lt;String,Object&gt;properties){                                                </span>
<span class="-1078923059245678284" onmouseenter="enter('-1078923059245678284');" onmouseout="out('-1078923059245678284');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  38 -            tag.setProperties(properties);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  39 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  40 -	}                                                                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  41 -                                                                                                                  </span>
<span class="-605410254880650411" onmouseenter="enter('-605410254880650411');" onmouseout="out('-605410254880650411');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  42 -    public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; bucket){                                                             </span>
<span class="-8996265830296339413" onmouseenter="enter('-8996265830296339413');" onmouseout="out('-8996265830296339413');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  43 -        return bucket.query().order(&quot;index&quot;).orderByKey();                                                        </span>




<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  44 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  45 -                                                                                                                  </span>
<span class="-1782989834715628034" onmouseenter="enter('-1782989834715628034');" onmouseout="out('-1782989834715628034');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  46 -	public Tag(String key, Map&lt;String,Object&gt;properties){                                                            </span>
<span class="-6821486208075908487" onmouseenter="enter('-6821486208075908487');" onmouseout="out('-6821486208075908487');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  47 -		super(key, properties);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  48 -	}                                                                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  49 -                                                                                                                  </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  50 -	public String getName() {                                                                                        </span>
<span class="-8575928775368193440" onmouseenter="enter('-8575928775368193440');" onmouseout="out('-8575928775368193440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  51 -		String name = (String) properties.get(&quot;name&quot;);                                                                  </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  52 -        if (name == null) {                                                                                       </span>
<span class="-8300454056005473230" onmouseenter="enter('-8300454056005473230');" onmouseout="out('-8300454056005473230');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  53 -            name = getSimperiumKey();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  54 -        }                                                                                                         </span>
<span class="-3727955329973069704" onmouseenter="enter('-3727955329973069704');" onmouseout="out('-3727955329973069704');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  55 -        return name;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  56 -	}                                                                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  57 -                                                                                                                  </span>
<span class="4392143110573682803" onmouseenter="enter('4392143110573682803');" onmouseout="out('4392143110573682803');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  58 -	public void setName(String name) {                                                                               </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  59 -		if (name == null) {                                                                                             </span>
<span class="-213167207179067307" onmouseenter="enter('-213167207179067307');" onmouseout="out('-213167207179067307');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  60 -			name = &quot;&quot;;                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  61 -		}                                                                                                               </span>
<span class="2817567480569190576" onmouseenter="enter('2817567480569190576');" onmouseout="out('2817567480569190576');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  62 -        properties.put(&quot;name&quot;, name);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  63 -	}                                                                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  64 -                                                                                                                  </span>
<span class="3314214788331321193" onmouseenter="enter('3314214788331321193');" onmouseout="out('3314214788331321193');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  65 -	public Integer getIndex() {                                                                                      </span>
<span class="2969810016527350634" onmouseenter="enter('2969810016527350634');" onmouseout="out('2969810016527350634');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  66 -        return (Integer) properties.get(&quot;index&quot;);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  67 -	}                                                                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -                                                                                                                  </span>
<span class="-500909398055877872" onmouseenter="enter('-500909398055877872');" onmouseout="out('-500909398055877872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  69 -	public void setIndex(Integer tagIndex) {                                                                         </span>
<span class="7502077113130045873" onmouseenter="enter('7502077113130045873');" onmouseout="out('7502077113130045873');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  70 -        if (tagIndex == null) {                                                                                   </span>
<span class="-8476157160667954591" onmouseenter="enter('-8476157160667954591');" onmouseout="out('-8476157160667954591');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  71 -            properties.remove(&quot;index&quot;);                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  72 -        } else {                                                                                                  </span>
<span class="-3130425453493968229" onmouseenter="enter('-3130425453493968229');" onmouseout="out('-3130425453493968229');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  73 -            properties.put(&quot;index&quot;, tagIndex);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  74 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  75 -	}                                                                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  76 -                                                                                                                  </span>
<span class="-8679812804925121757" onmouseenter="enter('-8679812804925121757');" onmouseout="out('-8679812804925121757');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  77 -    public void renameTo(String name, Bucket&lt;Note&gt; notesBucket){                                                  </span>
<span class="-5333234158858741655" onmouseenter="enter('-5333234158858741655');" onmouseout="out('-5333234158858741655');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  78 -        String key = name.toLowerCase();                                                                          </span>
<span class="372096354403962352" onmouseenter="enter('372096354403962352');" onmouseout="out('372096354403962352');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  79 -        if (!getSimperiumKey().equals(key)) {                                                                     </span>
<span class="-5209391090982449704" onmouseenter="enter('-5209391090982449704');" onmouseout="out('-5209391090982449704');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  80 -            // create a new tag with the value as the key/name                                                    </span>
<span class="6032101940625473392" onmouseenter="enter('6032101940625473392');" onmouseout="out('6032101940625473392');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  81 -            // TODO: tag already exists?                                                                          </span>
<span class="3155175442539471819" onmouseenter="enter('3155175442539471819');" onmouseout="out('3155175442539471819');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  82 -            Tag newTag = ((Bucket&lt;Tag&gt;) getBucket()).newObject(key);                                              </span>
<span class="-3606524567859777176" onmouseenter="enter('-3606524567859777176');" onmouseout="out('-3606524567859777176');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  83 -            newTag.setName(name);                                                                                 </span>
<span class="258850024922996991" onmouseenter="enter('258850024922996991');" onmouseout="out('258850024922996991');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  84 -            newTag.save();                                                                                        </span>
<span class="7470970541221155470" onmouseenter="enter('7470970541221155470');" onmouseout="out('7470970541221155470');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  85 -            // get all the notes from tag, remove the item                                                        </span>
<span class="-5038121255928315403" onmouseenter="enter('-5038121255928315403');" onmouseout="out('-5038121255928315403');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  86 -            ObjectCursor&lt;Note&gt; notesCursor = findNotes(notesBucket);                                              </span>
<span class="5797388004741082600" onmouseenter="enter('5797388004741082600');" onmouseout="out('5797388004741082600');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  87 -            while(notesCursor.moveToNext()){                                                                      </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  88 -                Note note = notesCursor.getObject();                                                              </span>
<span class="4194617991967274327" onmouseenter="enter('4194617991967274327');" onmouseout="out('4194617991967274327');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  89 -                List&lt;String&gt; tags = new ArrayList&lt;String&gt;(note.getTags());                                        </span>
<span class="7519471749189509450" onmouseenter="enter('7519471749189509450');" onmouseout="out('7519471749189509450');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  90 -                List&lt;String&gt; newTags = new ArrayList&lt;String&gt;(tags.size());                                        </span>
<span class="4819972252949867193" onmouseenter="enter('4819972252949867193');" onmouseout="out('4819972252949867193');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  91 -                // iterate and do a case insensitive comparison on each tag                                       </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  92 -                for (String tag : tags) {                                                                         </span>
<span class="-1181388508971995190" onmouseenter="enter('-1181388508971995190');" onmouseout="out('-1181388508971995190');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  93 -                    // if it&#x27;s this tag, add the new tag                                                          </span>
<span class="1729352567454004045" onmouseenter="enter('1729352567454004045');" onmouseout="out('1729352567454004045');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  94 -                    if (tag.toLowerCase().equals(getSimperiumKey())) {                                            </span>
<span class="4647130676194688636" onmouseenter="enter('4647130676194688636');" onmouseout="out('4647130676194688636');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  95 -                        newTags.add(name);                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  96 -                    } else {                                                                                      </span>
<span class="3940675775669567062" onmouseenter="enter('3940675775669567062');" onmouseout="out('3940675775669567062');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  97 -                        newTags.add(tag);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  98 -                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  99 -                }                                                                                                 </span>
<span class="8951985675496394805" onmouseenter="enter('8951985675496394805');" onmouseout="out('8951985675496394805');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 100 -                note.setTags(newTags);                                                                            </span>
<span class="1786517470939259447" onmouseenter="enter('1786517470939259447');" onmouseout="out('1786517470939259447');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 101 -                note.save();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 102 -            }                                                                                                     </span>
<span class="6185676292406674524" onmouseenter="enter('6185676292406674524');" onmouseout="out('6185676292406674524');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 103 -            notesCursor.close();                                                                                  </span>
<span class="-148607923632229467" onmouseenter="enter('-148607923632229467');" onmouseout="out('-148607923632229467');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 104 -            delete();                                                                                             </span>
<span class="1346801549096854578" onmouseenter="enter('1346801549096854578');" onmouseout="out('1346801549096854578');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 105 -        } else if(!getName().equals(name)) {                                                                      </span>
<span class="7444035316722908517" onmouseenter="enter('7444035316722908517');" onmouseout="out('7444035316722908517');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 106 -            setName(name);                                                                                        </span>
<span class="8471916837986154111" onmouseenter="enter('8471916837986154111');" onmouseout="out('8471916837986154111');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 107 -            save();                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 108 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 109 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 110 -                                                                                                                  </span>
<span class="5713370915334643965" onmouseenter="enter('5713370915334643965');" onmouseout="out('5713370915334643965');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 111 -    protected void setProperties(Map&lt;String,Object&gt; properties){                                                  </span>
<span class="-1470973607859720557" onmouseenter="enter('-1470973607859720557');" onmouseout="out('-1470973607859720557');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 112 -        this.properties = properties;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 113 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 114 -                                                                                                                  </span>
<span class="9199474315053816858" onmouseenter="enter('9199474315053816858');" onmouseout="out('9199474315053816858');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 115 -    public ObjectCursor&lt;Note&gt; findNotes(Bucket&lt;Note&gt; notesBucket){                                                </span>
<span class="-5783455742197660153" onmouseenter="enter('-5783455742197660153');" onmouseout="out('-5783455742197660153');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 116 -        return notesBucket.query().where(&quot;tags&quot;, ComparisonType.LIKE, getSimperiumKey()).execute();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 117 -    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 118 -}                                                                                                                 </span></pre></td>
                            <td><pre><span class="9181943406056492869" onmouseenter="enter('9181943406056492869');" onmouseout="out('9181943406056492869');" style="">   1  package com.automattic.simplenote.models;                                                                         </span>
<span  style="">   2                                                                                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">   3  import com.simperium.client.Bucket;                                                                               </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="">   4  import com.simperium.client.Bucket.ObjectCursor;                                                                  </span>
<span class="6125639164043971044" onmouseenter="enter('6125639164043971044');" onmouseout="out('6125639164043971044');" style="">   5  import com.simperium.client.BucketObject;                                                                         </span>
<span class="-665307165473523580" onmouseenter="enter('-665307165473523580');" onmouseout="out('-665307165473523580');" style="">   6  import com.simperium.client.BucketSchema;                                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">   7  import com.simperium.client.Query;                                                                                </span>
<span class="-838252138947964043" onmouseenter="enter('-838252138947964043');" onmouseout="out('-838252138947964043');" style="">   8  import com.simperium.client.Query.ComparisonType;                                                                 </span>
<span class="-7125452997935303365" onmouseenter="enter('-7125452997935303365');" onmouseout="out('-7125452997935303365');" style="">   9  import com.simperium.client.Query.SortType;                                                                       </span>
<span  style="">  10                                                                                                                    </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  11  import java.util.Map;                                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  12 +import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  13  import java.util.List;                                                                                            </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  14  import java.util.ArrayList;                                                                                       </span>
<span  style="">  15                                                                                                                    </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  16  import android.util.Log;                                                                                          </span>
<span  style="">  17                                                                                                                    </span>
<span class="-5520751644148063740" onmouseenter="enter('-5520751644148063740');" onmouseout="out('-5520751644148063740');" style="">  18  public class Tag extends BucketObject {                                                                           </span>
<span  style="">  19                                                                                                                    </span>
<span class="4408768180973442346" onmouseenter="enter('4408768180973442346');" onmouseout="out('4408768180973442346');" style="">  20  	public static final String BUCKET_NAME=&quot;tag&quot;;                                                                    </span>
<span class="8194120603293670320" onmouseenter="enter('8194120603293670320');" onmouseout="out('8194120603293670320');" style="">  21  	protected int tagIndex;                                                                                          </span>
<span class="1686378065465085743" onmouseenter="enter('1686378065465085743');" onmouseout="out('1686378065465085743');" style="">  22  	protected String name = &quot;&quot;;                                                                                      </span>
<span  style="">  23                                                                                                                    </span>
<span class="-569453823339800905" onmouseenter="enter('-569453823339800905');" onmouseout="out('-569453823339800905');" style="">  24  	public static class Schema extends BucketSchema&lt;Tag&gt; {                                                           </span>
<span  style="">  25                                                                                                                    </span>
<span class="3400389585123136733" onmouseenter="enter('3400389585123136733');" onmouseout="out('3400389585123136733');" style="">  26          public Schema(){                                                                                          </span>
<span class="-4886495676536647522" onmouseenter="enter('-4886495676536647522');" onmouseout="out('-4886495676536647522');" style="">  27              autoIndex();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  28          }                                                                                                         </span>
<span  style="">  29                                                                                                                    </span>
<span class="4046368376475730022" onmouseenter="enter('4046368376475730022');" onmouseout="out('4046368376475730022');" style="">  30          public String getRemoteName(){                                                                            </span>
<span class="2742032977421093316" onmouseenter="enter('2742032977421093316');" onmouseout="out('2742032977421093316');" style="">  31              return Tag.BUCKET_NAME;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  32          }                                                                                                         </span>
<span  style="">  33                                                                                                                    </span>
<span class="7844026162775747369" onmouseenter="enter('7844026162775747369');" onmouseout="out('7844026162775747369');" style="">  34  		public Tag build(String key, Map&lt;String,Object&gt;properties){                                                     </span>
<span class="1758535077202277046" onmouseenter="enter('1758535077202277046');" onmouseout="out('1758535077202277046');" style="">  35  			return new Tag(key, properties);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  36  		}                                                                                                               </span>
<span  style="">  37                                                                                                                    </span>
<span class="-3851977225752321267" onmouseenter="enter('-3851977225752321267');" onmouseout="out('-3851977225752321267');" style="">  38          public void update(Tag tag, Map&lt;String,Object&gt;properties){                                                </span>
<span class="-1078923059245678284" onmouseenter="enter('-1078923059245678284');" onmouseout="out('-1078923059245678284');" style="">  39              tag.setProperties(properties);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  40          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  41  	}                                                                                                                </span>
<span  style="">  42                                                                                                                    </span>
<span class="-605410254880650411" onmouseenter="enter('-605410254880650411');" onmouseout="out('-605410254880650411');" style="">  43      public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; bucket){                                                             </span>
<span class="-8996265830296339413" onmouseenter="enter('-8996265830296339413');" onmouseout="out('-8996265830296339413');" style="">  44          return bucket.query().order(&quot;index&quot;).orderByKey();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  45 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  46 +                                                                                                                  </span>
<span class="-1557734870769459952" onmouseenter="enter('-1557734870769459952');" onmouseout="out('-1557734870769459952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  47 +    public Tag(String key){                                                                                       </span>
<span class="8909623840762780315" onmouseenter="enter('8909623840762780315');" onmouseout="out('8909623840762780315');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  48 +        super(key, new HashMap&lt;String,Object&gt;());                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  49      }                                                                                                             </span>
<span  style="">  50                                                                                                                    </span>
<span class="-1782989834715628034" onmouseenter="enter('-1782989834715628034');" onmouseout="out('-1782989834715628034');" style="">  51  	public Tag(String key, Map&lt;String,Object&gt;properties){                                                            </span>
<span class="-6821486208075908487" onmouseenter="enter('-6821486208075908487');" onmouseout="out('-6821486208075908487');" style="">  52  		super(key, properties);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  53  	}                                                                                                                </span>
<span  style="">  54                                                                                                                    </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style="">  55  	public String getName() {                                                                                        </span>
<span class="-8575928775368193440" onmouseenter="enter('-8575928775368193440');" onmouseout="out('-8575928775368193440');" style="">  56  		String name = (String) properties.get(&quot;name&quot;);                                                                  </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="">  57          if (name == null) {                                                                                       </span>
<span class="-8300454056005473230" onmouseenter="enter('-8300454056005473230');" onmouseout="out('-8300454056005473230');" style="">  58              name = getSimperiumKey();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59          }                                                                                                         </span>
<span class="-3727955329973069704" onmouseenter="enter('-3727955329973069704');" onmouseout="out('-3727955329973069704');" style="">  60          return name;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61  	}                                                                                                                </span>
<span  style="">  62                                                                                                                    </span>
<span class="4392143110573682803" onmouseenter="enter('4392143110573682803');" onmouseout="out('4392143110573682803');" style="">  63  	public void setName(String name) {                                                                               </span>
<span class="-1857534233408690872" onmouseenter="enter('-1857534233408690872');" onmouseout="out('-1857534233408690872');" style="">  64  		if (name == null) {                                                                                             </span>
<span class="-213167207179067307" onmouseenter="enter('-213167207179067307');" onmouseout="out('-213167207179067307');" style="">  65  			name = &quot;&quot;;                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66  		}                                                                                                               </span>
<span class="2817567480569190576" onmouseenter="enter('2817567480569190576');" onmouseout="out('2817567480569190576');" style="">  67          properties.put(&quot;name&quot;, name);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68  	}                                                                                                                </span>
<span  style="">  69                                                                                                                    </span>
<span class="3314214788331321193" onmouseenter="enter('3314214788331321193');" onmouseout="out('3314214788331321193');" style="">  70  	public Integer getIndex() {                                                                                      </span>
<span class="2969810016527350634" onmouseenter="enter('2969810016527350634');" onmouseout="out('2969810016527350634');" style="">  71          return (Integer) properties.get(&quot;index&quot;);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72  	}                                                                                                                </span>
<span  style="">  73                                                                                                                    </span>
<span class="-500909398055877872" onmouseenter="enter('-500909398055877872');" onmouseout="out('-500909398055877872');" style="">  74  	public void setIndex(Integer tagIndex) {                                                                         </span>
<span class="7502077113130045873" onmouseenter="enter('7502077113130045873');" onmouseout="out('7502077113130045873');" style="">  75          if (tagIndex == null) {                                                                                   </span>
<span class="-8476157160667954591" onmouseenter="enter('-8476157160667954591');" onmouseout="out('-8476157160667954591');" style="">  76              properties.remove(&quot;index&quot;);                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  77          } else {                                                                                                  </span>
<span class="-3130425453493968229" onmouseenter="enter('-3130425453493968229');" onmouseout="out('-3130425453493968229');" style="">  78              properties.put(&quot;index&quot;, tagIndex);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80  	}                                                                                                                </span>
<span  style="">  81                                                                                                                    </span>
<span class="-8679812804925121757" onmouseenter="enter('-8679812804925121757');" onmouseout="out('-8679812804925121757');" style="">  82      public void renameTo(String name, Bucket&lt;Note&gt; notesBucket){                                                  </span>
<span class="-5333234158858741655" onmouseenter="enter('-5333234158858741655');" onmouseout="out('-5333234158858741655');" style="">  83          String key = name.toLowerCase();                                                                          </span>
<span class="372096354403962352" onmouseenter="enter('372096354403962352');" onmouseout="out('372096354403962352');" style="">  84          if (!getSimperiumKey().equals(key)) {                                                                     </span>
<span class="-5209391090982449704" onmouseenter="enter('-5209391090982449704');" onmouseout="out('-5209391090982449704');" style="">  85              // create a new tag with the value as the key/name                                                    </span>
<span class="6032101940625473392" onmouseenter="enter('6032101940625473392');" onmouseout="out('6032101940625473392');" style="">  86              // TODO: tag already exists?                                                                          </span>
<span class="3155175442539471819" onmouseenter="enter('3155175442539471819');" onmouseout="out('3155175442539471819');" style="">  87              Tag newTag = ((Bucket&lt;Tag&gt;) getBucket()).newObject(key);                                              </span>
<span class="-3606524567859777176" onmouseenter="enter('-3606524567859777176');" onmouseout="out('-3606524567859777176');" style="">  88              newTag.setName(name);                                                                                 </span>
<span class="258850024922996991" onmouseenter="enter('258850024922996991');" onmouseout="out('258850024922996991');" style="">  89              newTag.save();                                                                                        </span>
<span class="7470970541221155470" onmouseenter="enter('7470970541221155470');" onmouseout="out('7470970541221155470');" style="">  90              // get all the notes from tag, remove the item                                                        </span>
<span class="-5038121255928315403" onmouseenter="enter('-5038121255928315403');" onmouseout="out('-5038121255928315403');" style="">  91              ObjectCursor&lt;Note&gt; notesCursor = findNotes(notesBucket);                                              </span>
<span class="5797388004741082600" onmouseenter="enter('5797388004741082600');" onmouseout="out('5797388004741082600');" style="">  92              while(notesCursor.moveToNext()){                                                                      </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style="">  93                  Note note = notesCursor.getObject();                                                              </span>
<span class="4194617991967274327" onmouseenter="enter('4194617991967274327');" onmouseout="out('4194617991967274327');" style="">  94                  List&lt;String&gt; tags = new ArrayList&lt;String&gt;(note.getTags());                                        </span>
<span class="7519471749189509450" onmouseenter="enter('7519471749189509450');" onmouseout="out('7519471749189509450');" style="">  95                  List&lt;String&gt; newTags = new ArrayList&lt;String&gt;(tags.size());                                        </span>
<span class="4819972252949867193" onmouseenter="enter('4819972252949867193');" onmouseout="out('4819972252949867193');" style="">  96                  // iterate and do a case insensitive comparison on each tag                                       </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">  97                  for (String tag : tags) {                                                                         </span>
<span class="-1181388508971995190" onmouseenter="enter('-1181388508971995190');" onmouseout="out('-1181388508971995190');" style="">  98                      // if it&#x27;s this tag, add the new tag                                                          </span>
<span class="1729352567454004045" onmouseenter="enter('1729352567454004045');" onmouseout="out('1729352567454004045');" style="">  99                      if (tag.toLowerCase().equals(getSimperiumKey())) {                                            </span>
<span class="4647130676194688636" onmouseenter="enter('4647130676194688636');" onmouseout="out('4647130676194688636');" style=""> 100                          newTags.add(name);                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 101                      } else {                                                                                      </span>
<span class="3940675775669567062" onmouseenter="enter('3940675775669567062');" onmouseout="out('3940675775669567062');" style=""> 102                          newTags.add(tag);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104                  }                                                                                                 </span>
<span class="8951985675496394805" onmouseenter="enter('8951985675496394805');" onmouseout="out('8951985675496394805');" style=""> 105                  note.setTags(newTags);                                                                            </span>
<span class="1786517470939259447" onmouseenter="enter('1786517470939259447');" onmouseout="out('1786517470939259447');" style=""> 106                  note.save();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107              }                                                                                                     </span>
<span class="6185676292406674524" onmouseenter="enter('6185676292406674524');" onmouseout="out('6185676292406674524');" style=""> 108              notesCursor.close();                                                                                  </span>
<span class="-148607923632229467" onmouseenter="enter('-148607923632229467');" onmouseout="out('-148607923632229467');" style=""> 109              delete();                                                                                             </span>
<span class="1346801549096854578" onmouseenter="enter('1346801549096854578');" onmouseout="out('1346801549096854578');" style=""> 110          } else if(!getName().equals(name)) {                                                                      </span>
<span class="7444035316722908517" onmouseenter="enter('7444035316722908517');" onmouseout="out('7444035316722908517');" style=""> 111              setName(name);                                                                                        </span>
<span class="8471916837986154111" onmouseenter="enter('8471916837986154111');" onmouseout="out('8471916837986154111');" style=""> 112              save();                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114      }                                                                                                             </span>
<span  style=""> 115                                                                                                                    </span>
<span class="5713370915334643965" onmouseenter="enter('5713370915334643965');" onmouseout="out('5713370915334643965');" style=""> 116      protected void setProperties(Map&lt;String,Object&gt; properties){                                                  </span>
<span class="-1470973607859720557" onmouseenter="enter('-1470973607859720557');" onmouseout="out('-1470973607859720557');" style=""> 117          this.properties = properties;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118      }                                                                                                             </span>
<span  style=""> 119                                                                                                                    </span>
<span class="9199474315053816858" onmouseenter="enter('9199474315053816858');" onmouseout="out('9199474315053816858');" style=""> 120      public ObjectCursor&lt;Note&gt; findNotes(Bucket&lt;Note&gt; notesBucket){                                                </span>
<span class="-5783455742197660153" onmouseenter="enter('-5783455742197660153');" onmouseout="out('-5783455742197660153');" style=""> 121          return notesBucket.query().where(&quot;tags&quot;, ComparisonType.LIKE, getSimperiumKey()).execute();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            