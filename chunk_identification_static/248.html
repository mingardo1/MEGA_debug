<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>248</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    248
                    <a href="247.html">prev</a>
                    <a href="249.html">next</a>
                    <a href="248_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_13ef17a37e683b8ad5800e9f542b411180fbec2f_src/com/android/launcher3/Utilities.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;13ef17a37e683b8ad5800e9f542b411180fbec2f:src/com/android/launcher3/Utilities.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;13ef17a37e683b8ad5800e9f542b411180fbec2f^1:src/com/android/launcher3/Utilities.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;13ef17a37e683b8ad5800e9f542b411180fbec2f^2:src/com/android/launcher3/Utilities.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;0250945759f7ac58aab912448d62dc108b1770c5:src/com/android/launcher3/Utilities.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19 import android.annotation.TargetApi;                                                                     </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  20 import android.app.Activity;                                                                             </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  21 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  22 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  23 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  24 import android.content.ActivityNotFoundException;                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  25 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  28 import android.content.SharedPreferences;                                                                </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  29 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  30 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  31 import android.content.pm.PackageManager;                                                                </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  32 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  33 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  34 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  35 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  36 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  37 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  38 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  39 import android.graphics.Color;                                                                           </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  40 import android.graphics.Matrix;                                                                          </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  41 import android.graphics.Paint;                                                                           </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  42 import android.graphics.PaintFlagsDrawFilter;                                                            </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  43 import android.graphics.Rect;                                                                            </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  44 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  45 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  46 import android.graphics.drawable.PaintDrawable;                                                          </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  47 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  48 import android.os.Bundle;                                                                                </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  49 import android.os.Process;                                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  50 import android.text.TextUtils;                                                                           </span>
<span class="-8138675088784084481" onmouseenter="enter('-8138675088784084481');" onmouseout="out('-8138675088784084481');" style="">  51 import android.util.DisplayMetrics;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  52 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  53 import android.util.Pair;                                                                                </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  54 import android.util.SparseArray;                                                                         </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  55 import android.util.TypedValue;                                                                          </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  56 import android.view.View;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  57 import android.widget.Toast;                                                                             </span>
<span  style="">  58                                                                                                          </span>
<span class="9184227348967602043" onmouseenter="enter('9184227348967602043');" onmouseout="out('9184227348967602043');" style="">  59 import java.io.ByteArrayOutputStream;                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  60 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  61 import java.util.ArrayList;                                                                              </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  62 import java.util.Locale;                                                                                 </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  63 import java.util.Set;                                                                                    </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  64 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  65 import java.util.regex.Pattern;                                                                          </span>
<span  style="">  66                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  67 /**                                                                                                      </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  68  * Various utilities shared amongst the Launcher&#x27;s classes.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69  */                                                                                                      </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  70 public final class Utilities {                                                                           </span>
<span  style="">  71                                                                                                          </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  72     private static final String TAG = &quot;Launcher.Utilities&quot;;                                              </span>
<span  style="">  73                                                                                                          </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  74     private static final Rect sOldBounds = new Rect();                                                   </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  75     private static final Canvas sCanvas = new Canvas();                                                  </span>
<span  style="">  76                                                                                                          </span>
<span class="-1329756999223092373" onmouseenter="enter('-1329756999223092373');" onmouseout="out('-1329756999223092373');" style="">  77     private static final Pattern sTrimPattern =                                                          </span>
<span class="1309858825264038043" onmouseenter="enter('1309858825264038043');" onmouseout="out('1309858825264038043');" style="">  78             Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{javaSpaceChar}]*$&quot;);                 </span>
<span  style="">  79                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  80     static {                                                                                             </span>
<span class="-626556356968599416" onmouseenter="enter('-626556356968599416');" onmouseout="out('-626556356968599416');" style="">  81         sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG,                                </span>
<span class="-4527400598837595496" onmouseenter="enter('-4527400598837595496');" onmouseout="out('-4527400598837595496');" style="">  82                 Paint.FILTER_BITMAP_FLAG));                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83     }                                                                                                    </span>
<span class="-3555091970674166572" onmouseenter="enter('-3555091970674166572');" onmouseout="out('-3555091970674166572');" style="">  84     static int sColors[] = { 0xffff0000, 0xff00ff00, 0xff0000ff };                                       </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  85     static int sColorIndex = 0;                                                                          </span>
<span  style="">  86                                                                                                          </span>
<span class="8969639251951816674" onmouseenter="enter('8969639251951816674');" onmouseout="out('8969639251951816674');" style="">  87     private static final int[] sLoc0 = new int[2];                                                       </span>
<span class="-5113691339331042282" onmouseenter="enter('-5113691339331042282');" onmouseout="out('-5113691339331042282');" style="">  88     private static final int[] sLoc1 = new int[2];                                                       </span>
<span  style="">  89                                                                                                          </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  90     // To turn on these properties, type                                                                 </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  91     // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                      </span>
<span class="7534360217793993844" onmouseenter="enter('7534360217793993844');" onmouseout="out('7534360217793993844');" style="">  92     private static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                </span>
<span class="6438249582362651183" onmouseenter="enter('6438249582362651183');" onmouseout="out('6438249582362651183');" style="">  93     private static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);     </span>
<span  style="">  94                                                                                                          </span>
<span class="-9073580014282388493" onmouseenter="enter('-9073580014282388493');" onmouseout="out('-9073580014282388493');" style="">  95     public static final String ALLOW_ROTATION_PREFERENCE_KEY = &quot;pref_allowRotation&quot;;                     </span>
<span  style="">  96                                                                                                          </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style="">  97     public static boolean isPropertyEnabled(String propertyName) {                                       </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style="">  98         return Log.isLoggable(propertyName, Log.VERBOSE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="6478873371162606731" onmouseenter="enter('6478873371162606731');" onmouseout="out('6478873371162606731');" style=""> 101     public static boolean isAllowRotationPrefEnabled(Context context, boolean multiProcess) {            </span>
<span class="-2196846614400288078" onmouseenter="enter('-2196846614400288078');" onmouseout="out('-2196846614400288078');" style=""> 102         SharedPreferences sharedPrefs = context.getSharedPreferences(                                    </span>
<span class="1287283503969855027" onmouseenter="enter('1287283503969855027');" onmouseout="out('1287283503969855027');" style=""> 103                 LauncherAppState.getSharedPreferencesKey(), Context.MODE_PRIVATE | (multiProcess ?       </span>
<span class="-636554800273789668" onmouseenter="enter('-636554800273789668');" onmouseout="out('-636554800273789668');" style=""> 104                         Context.MODE_MULTI_PROCESS : 0));                                                </span>
<span class="-8841982816110512528" onmouseenter="enter('-8841982816110512528');" onmouseout="out('-8841982816110512528');" style=""> 105         boolean allowRotationPref = sharedPrefs.getBoolean(ALLOW_ROTATION_PREFERENCE_KEY, false);        </span>
<span class="-8131727064279733470" onmouseenter="enter('-8131727064279733470');" onmouseout="out('-8131727064279733470');" style=""> 106         return sForceEnableRotation || allowRotationPref;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107     }                                                                                                    </span>
<span  style=""> 108                                                                                                          </span>
<span class="-6499659450313544780" onmouseenter="enter('-6499659450313544780');" onmouseout="out('-6499659450313544780');" style=""> 109     public static boolean isRotationAllowedForDevice(Context context) {                                  </span>
<span class="-1687812256733097905" onmouseenter="enter('-1687812256733097905');" onmouseout="out('-1687812256733097905');" style=""> 110         return sForceEnableRotation || context.getResources().getBoolean(R.bool.allow_rotation);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 113     /**                                                                                                  </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 114      * Indicates if the device is running LMP or higher.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 115      */                                                                                                  </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 116     public static boolean isLmpOrAbove() {                                                               </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style=""> 117         return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 118 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 119 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122     /**                                                                                                  </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123      * Returns a bitmap suitable for the all apps view. If the package or the resource do not            </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124      * exist, it returns null.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 125      */                                                                                                  </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126     static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,             </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127             Context context) {                                                                           </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 129         // the resource                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 130         try {                                                                                            </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131             Resources resources = packageManager.getResourcesForApplication(packageName);                </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132             if (resources != null) {                                                                     </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133                 final int id = resources.getIdentifier(resourceName, null, null);                        </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134                 return createIconBitmap(                                                                 </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135                         resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137         } catch (Exception e) {                                                                          </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138             // Icon not found.                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143     /**                                                                                                  </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144      * Returns a bitmap which is of the appropriate size to be displayed as an icon                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 145 =======                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 146     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 147                                                                                                          </span>
<span class="8267304412893954240" onmouseenter="enter('8267304412893954240');" onmouseout="out('8267304412893954240');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 148     public static boolean isLmpMR1OrAbove() {                                                            </span>
<span class="-198173616463930288" onmouseenter="enter('-198173616463930288');" onmouseout="out('-198173616463930288');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149         // TODO(adamcohen): update to Build.VERSION_CODES.LOLLIPOP_MR1 once building against 22;         </span>
<span class="2386615924650555298" onmouseenter="enter('2386615924650555298');" onmouseout="out('2386615924650555298');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 150         return Build.VERSION.SDK_INT &gt;= 22;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 151     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 152                                                                                                          </span>
<span class="-8604735062489042646" onmouseenter="enter('-8604735062489042646');" onmouseout="out('-8604735062489042646');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 153     public static boolean isLmpMR1() {                                                                   </span>
<span class="-198173616463930288" onmouseenter="enter('-198173616463930288');" onmouseout="out('-198173616463930288');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154         // TODO(adamcohen): update to Build.VERSION_CODES.LOLLIPOP_MR1 once building against 22;         </span>
<span class="-3182404196161427649" onmouseenter="enter('-3182404196161427649');" onmouseout="out('-3182404196161427649');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155         return Build.VERSION.SDK_INT == 22;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 157                                                                                                          </span>
<span class="8062060252944903878" onmouseenter="enter('8062060252944903878');" onmouseout="out('8062060252944903878');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 158     public static Bitmap createIconBitmap(Cursor c, int iconIndex, Context context) {                    </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 159         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 160         try {                                                                                            </span>
<span class="-6494522703644265462" onmouseenter="enter('-6494522703644265462');" onmouseout="out('-6494522703644265462');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 161             return createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 162         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 163             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 164         }                                                                                                </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 165 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166     }                                                                                                    </span>
<span  style=""> 167                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 168     /**                                                                                                  </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 169      * Returns a bitmap suitable for the all apps view. If the package or the resource do not            </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 170      * exist, it returns null.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 171      */                                                                                                  </span>
<span class="7886363487578966295" onmouseenter="enter('7886363487578966295');" onmouseout="out('7886363487578966295');" style=""> 172     public static Bitmap createIconBitmap(String packageName, String resourceName,                       </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 173             Context context) {                                                                           </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 174         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 175         // the resource                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 176         try {                                                                                            </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 177             Resources resources = packageManager.getResourcesForApplication(packageName);                </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 178             if (resources != null) {                                                                     </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 179                 final int id = resources.getIdentifier(resourceName, null, null);                        </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 180                 return createIconBitmap(                                                                 </span>
<span class="7879136357573012600" onmouseenter="enter('7879136357573012600');" onmouseout="out('7879136357573012600');" style=""> 181                         resources.getDrawableForDensity(id, LauncherAppState.getInstance()               </span>
<span class="3845650349866329979" onmouseenter="enter('3845650349866329979');" onmouseout="out('3845650349866329979');" style=""> 182                                 .getInvariantDeviceProfile().fillResIconDpi), context);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 184         } catch (Exception e) {                                                                          </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 185             // Icon not found.                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 187         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188     }                                                                                                    </span>
<span  style=""> 189                                                                                                          </span>
<span class="-1980149402827349938" onmouseenter="enter('-1980149402827349938');" onmouseout="out('-1980149402827349938');" style=""> 190     private static int getIconBitmapSize() {                                                             </span>
<span class="-796645866027437773" onmouseenter="enter('-796645866027437773');" onmouseout="out('-796645866027437773');" style=""> 191         return LauncherAppState.getInstance().getInvariantDeviceProfile().iconBitmapSize;                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192     }                                                                                                    </span>
<span  style=""> 193                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 194     /**                                                                                                  </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 195      * Returns a bitmap which is of the appropriate size to be displayed as an icon                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 196      */                                                                                                  </span>
<span class="-2529226303201089113" onmouseenter="enter('-2529226303201089113');" onmouseout="out('-2529226303201089113');" style=""> 197     public static Bitmap createIconBitmap(Bitmap icon, Context context) {                                </span>
<span class="-812758491164557381" onmouseenter="enter('-812758491164557381');" onmouseout="out('-812758491164557381');" style=""> 198         final int iconBitmapSize = getIconBitmapSize();                                                  </span>
<span class="5755596367918457571" onmouseenter="enter('5755596367918457571');" onmouseout="out('5755596367918457571');" style=""> 199         if (iconBitmapSize == icon.getWidth() &amp;&amp; iconBitmapSize == icon.getHeight()) {                   </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 200             return icon;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201         }                                                                                                </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 202         return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203     }                                                                                                    </span>
<span  style=""> 204                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 205     /**                                                                                                  </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 206      * Returns a bitmap suitable for the all apps view.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 207      */                                                                                                  </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 208     public static Bitmap createIconBitmap(Drawable icon, Context context) {                              </span>
<span class="-8928451114088413132" onmouseenter="enter('-8928451114088413132');" onmouseout="out('-8928451114088413132');" style=""> 209         synchronized (sCanvas) {                                                                         </span>
<span class="-812758491164557381" onmouseenter="enter('-812758491164557381');" onmouseout="out('-812758491164557381');" style=""> 210             final int iconBitmapSize = getIconBitmapSize();                                              </span>
<span  style=""> 211                                                                                                          </span>
<span class="-8808586281723900088" onmouseenter="enter('-8808586281723900088');" onmouseout="out('-8808586281723900088');" style=""> 212             int width = iconBitmapSize;                                                                  </span>
<span class="-4976368659165838766" onmouseenter="enter('-4976368659165838766');" onmouseout="out('-4976368659165838766');" style=""> 213             int height = iconBitmapSize;                                                                 </span>
<span  style=""> 214                                                                                                          </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 215             if (icon instanceof PaintDrawable) {                                                         </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 216                 PaintDrawable painter = (PaintDrawable) icon;                                            </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 217                 painter.setIntrinsicWidth(width);                                                        </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 218                 painter.setIntrinsicHeight(height);                                                      </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 219             } else if (icon instanceof BitmapDrawable) {                                                 </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 220                 // Ensure the bitmap has a density.                                                      </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 221                 BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                   </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 222                 Bitmap bitmap = bitmapDrawable.getBitmap();                                              </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 223                 if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                        </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 224                     bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226             }                                                                                            </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 227             int sourceWidth = icon.getIntrinsicWidth();                                                  </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 228             int sourceHeight = icon.getIntrinsicHeight();                                                </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 229             if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                   </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 230                 // Scale the icon proportionally to the icon dimensions                                  </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 231                 final float ratio = (float) sourceWidth / sourceHeight;                                  </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 232                 if (sourceWidth &gt; sourceHeight) {                                                        </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 233                     height = (int) (width / ratio);                                                      </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 234                 } else if (sourceHeight &gt; sourceWidth) {                                                 </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 235                     width = (int) (height * ratio);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237             }                                                                                            </span>
<span  style=""> 238                                                                                                          </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 239             // no intrinsic size --&gt; use default size                                                    </span>
<span class="-8413870914199027407" onmouseenter="enter('-8413870914199027407');" onmouseout="out('-8413870914199027407');" style=""> 240             int textureWidth = iconBitmapSize;                                                           </span>
<span class="-1351255372366243626" onmouseenter="enter('-1351255372366243626');" onmouseout="out('-1351255372366243626');" style=""> 241             int textureHeight = iconBitmapSize;                                                          </span>
<span  style=""> 242                                                                                                          </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 243             final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                       </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 244                     Bitmap.Config.ARGB_8888);                                                            </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 245             final Canvas canvas = sCanvas;                                                               </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 246             canvas.setBitmap(bitmap);                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 248             final int left = (textureWidth-width) / 2;                                                   </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 249             final int top = (textureHeight-height) / 2;                                                  </span>
<span  style=""> 250                                                                                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 251             @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                       </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 252             final boolean debug = false;                                                                 </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 253             if (debug) {                                                                                 </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 254                 // draw a big box for the icon for debugging                                             </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 255                 canvas.drawColor(sColors[sColorIndex]);                                                  </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 256                 if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                    </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 257                 Paint debugPaint = new Paint();                                                          </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 258                 debugPaint.setColor(0xffcccc00);                                                         </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 259                 canvas.drawRect(left, top, left+width, top+height, debugPaint);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260             }                                                                                            </span>
<span  style=""> 261                                                                                                          </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 262             sOldBounds.set(icon.getBounds());                                                            </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 263             icon.setBounds(left, top, left+width, top+height);                                           </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 264             icon.draw(canvas);                                                                           </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 265             icon.setBounds(sOldBounds);                                                                  </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 266             canvas.setBitmap(null);                                                                      </span>
<span  style=""> 267                                                                                                          </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 268             return bitmap;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270     }                                                                                                    </span>
<span  style=""> 271                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 272     /**                                                                                                  </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 273      * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s             </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 274      * coordinates.                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 275      *                                                                                                   </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 276      * @param descendant The descendant to which the passed coordinate is relative.                      </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 277      * @param root The root view to make the coordinates relative to.                                    </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 278      * @param coord The coordinate that we want mapped.                                                  </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 279      * @param includeRootScroll Whether or not to account for the scroll of the descendant:              </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 280      *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.            </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 281      * @return The factor by which this descendant is scaled relative to this DragLayer. Caution         </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 282      *         this scale factor is assumed to be equal in X and Y, and so if at any point this          </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 283      *         assumption fails, we will need to return a pair of scale factors.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 284      */                                                                                                  </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 285     public static float getDescendantCoordRelativeToParent(View descendant, View root,                   </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 286                                                            int[] coord, boolean includeRootScroll) {     </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 287         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 288                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 289         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 290                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 291         View v = descendant;                                                                             </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 292         while(v != root &amp;&amp; v != null) {                                                                  </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 293             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 294             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 296         ancestorChain.add(root);                                                                         </span>
<span  style=""> 297                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 298         float scale = 1.0f;                                                                              </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 299         int count = ancestorChain.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 300         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 301             View v0 = ancestorChain.get(i);                                                              </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 302             // For TextViews, scroll has a meaning which relates to the text position                    </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 303             // which is very strange... ignore the scroll.                                               </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 304             if (v0 != descendant || includeRootScroll) {                                                 </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 305                 pt[0] -= v0.getScrollX();                                                                </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 306                 pt[1] -= v0.getScrollY();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307             }                                                                                            </span>
<span  style=""> 308                                                                                                          </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 309             v0.getMatrix().mapPoints(pt);                                                                </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 310             pt[0] += v0.getLeft();                                                                       </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 311             pt[1] += v0.getTop();                                                                        </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 312             scale *= v0.getScaleX();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313         }                                                                                                </span>
<span  style=""> 314                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 315         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 316         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 317         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318     }                                                                                                    </span>
<span  style=""> 319                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 320     /**                                                                                                  </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 321      * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 322      */                                                                                                  </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 323     public static float mapCoordInSelfToDescendent(View descendant, View root,                           </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 324                                                    int[] coord) {                                        </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 325         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 326                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 327         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 328                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 329         View v = descendant;                                                                             </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 330         while(v != root) {                                                                               </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 331             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 332             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 334         ancestorChain.add(root);                                                                         </span>
<span  style=""> 335                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 336         float scale = 1.0f;                                                                              </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 337         Matrix inverse = new Matrix();                                                                   </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 338         int count = ancestorChain.size();                                                                </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 339         for (int i = count - 1; i &gt;= 0; i--) {                                                           </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 340             View ancestor = ancestorChain.get(i);                                                        </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 341             View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                           </span>
<span  style=""> 342                                                                                                          </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 343             pt[0] += ancestor.getScrollX();                                                              </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 344             pt[1] += ancestor.getScrollY();                                                              </span>
<span  style=""> 345                                                                                                          </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 346             if (next != null) {                                                                          </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 347                 pt[0] -= next.getLeft();                                                                 </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 348                 pt[1] -= next.getTop();                                                                  </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 349                 next.getMatrix().invert(inverse);                                                        </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 350                 inverse.mapPoints(pt);                                                                   </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 351                 scale *= next.getScaleX();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353         }                                                                                                </span>
<span  style=""> 354                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 355         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 356         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 357         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358     }                                                                                                    </span>
<span  style=""> 359                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 360     /**                                                                                                  </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 361      * Utility method to determine whether the given point, in local coordinates,                        </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 362      * is inside the view, where the area of the view is expanded by the slop factor.                    </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 363      * This method is called while processing touch-move events to determine if the event                </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 364      * is still within the view.                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 365      */                                                                                                  </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 366     public static boolean pointInView(View v, float localX, float localY, float slop) {                  </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 367         return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                   </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 368                 localY &lt; (v.getHeight() + slop);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369     }                                                                                                    </span>
<span  style=""> 370                                                                                                          </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 371     public static void scaleRect(Rect r, float scale) {                                                  </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 372         if (scale != 1.0f) {                                                                             </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 373             r.left = (int) (r.left * scale + 0.5f);                                                      </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 374             r.top = (int) (r.top * scale + 0.5f);                                                        </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 375             r.right = (int) (r.right * scale + 0.5f);                                                    </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 376             r.bottom = (int) (r.bottom * scale + 0.5f);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378     }                                                                                                    </span>
<span  style=""> 379                                                                                                          </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 380     public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                     </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 381         v0.getLocationInWindow(sLoc0);                                                                   </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 382         v1.getLocationInWindow(sLoc1);                                                                   </span>
<span  style=""> 383                                                                                                          </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 384         sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                        </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 385         sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                       </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 386         sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                        </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 387         sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                       </span>
<span  style=""> 388                                                                                                          </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 389         if (delta == null) {                                                                             </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 390             delta = new int[2];                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391         }                                                                                                </span>
<span  style=""> 392                                                                                                          </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 393         delta[0] = sLoc1[0] - sLoc0[0];                                                                  </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 394         delta[1] = sLoc1[1] - sLoc0[1];                                                                  </span>
<span  style=""> 395                                                                                                          </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 396         return delta;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397     }                                                                                                    </span>
<span  style=""> 398                                                                                                          </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 399     public static void scaleRectAboutCenter(Rect r, float scale) {                                       </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 400         int cx = r.centerX();                                                                            </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 401         int cy = r.centerY();                                                                            </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 402         r.offset(-cx, -cy);                                                                              </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 403         Utilities.scaleRect(r, scale);                                                                   </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 404         r.offset(cx, cy);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405     }                                                                                                    </span>
<span  style=""> 406                                                                                                          </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 407     public static void startActivityForResultSafely(                                                     </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 408             Activity activity, Intent intent, int requestCode) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 409         try {                                                                                            </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 410             activity.startActivityForResult(intent, requestCode);                                        </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 411         } catch (ActivityNotFoundException e) {                                                          </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 412             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 413         } catch (SecurityException e) {                                                                  </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 414             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 415             Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                     </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 416                     &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +       </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 417                     &quot;or use the exported attribute for this activity.&quot;, e);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419     }                                                                                                    </span>
<span  style=""> 420                                                                                                          </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 421     static boolean isSystemApp(Context context, Intent intent) {                                         </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 422         PackageManager pm = context.getPackageManager();                                                 </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 423         ComponentName cn = intent.getComponent();                                                        </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 424         String packageName = null;                                                                       </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 425         if (cn == null) {                                                                                </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 426             ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);            </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 427             if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                         </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 428                 packageName = info.activityInfo.packageName;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 430         } else {                                                                                         </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 431             packageName = cn.getPackageName();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432         }                                                                                                </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 433         if (packageName != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 434             try {                                                                                        </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 435                 PackageInfo info = pm.getPackageInfo(packageName, 0);                                    </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 436                 return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                               </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 437                         ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);               </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 438             } catch (NameNotFoundException e) {                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 439                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 441         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 442             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444     }                                                                                                    </span>
<span  style=""> 445                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 446     /**                                                                                                  </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 447      * This picks a dominant color, looking for high-saturation, high-value, repeated hues.              </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 448      * @param bitmap The bitmap to scan                                                                  </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 449      * @param samples The approximate max number of samples to use.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 450      */                                                                                                  </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 451     static int findDominantColorByHue(Bitmap bitmap, int samples) {                                      </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 452         final int height = bitmap.getHeight();                                                           </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 453         final int width = bitmap.getWidth();                                                             </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 454         int sampleStride = (int) Math.sqrt((height * width) / samples);                                  </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 455         if (sampleStride &lt; 1) {                                                                          </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 456             sampleStride = 1;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457         }                                                                                                </span>
<span  style=""> 458                                                                                                          </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 459         // This is an out-param, for getting the hsv values for an rgb                                   </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 460         float[] hsv = new float[3];                                                                      </span>
<span  style=""> 461                                                                                                          </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 462         // First get the best hue, by creating a histogram over 360 hue buckets,                         </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 463         // where each pixel contributes a score weighted by saturation, value, and alpha.                </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 464         float[] hueScoreHistogram = new float[360];                                                      </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 465         float highScore = -1;                                                                            </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 466         int bestHue = -1;                                                                                </span>
<span  style=""> 467                                                                                                          </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 468         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 469             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 470                 int argb = bitmap.getPixel(x, y);                                                        </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 471                 int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                         </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 472                 if (alpha &lt; 0x80) {                                                                      </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 473                     // Drop mostly-transparent pixels.                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 474                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475                 }                                                                                        </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 476                 // Remove the alpha channel.                                                             </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 477                 int rgb = argb | 0xFF000000;                                                             </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 478                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 479                 // Bucket colors by the 360 integer hues.                                                </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 480                 int hue = (int) hsv[0];                                                                  </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 481                 if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                        </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 482                     // Defensively avoid array bounds violations.                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 483                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484                 }                                                                                        </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 485                 float score = hsv[1] * hsv[2];                                                           </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 486                 hueScoreHistogram[hue] += score;                                                         </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 487                 if (hueScoreHistogram[hue] &gt; highScore) {                                                </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 488                     highScore = hueScoreHistogram[hue];                                                  </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 489                     bestHue = hue;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492         }                                                                                                </span>
<span  style=""> 493                                                                                                          </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 494         SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                         </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 495         int bestColor = 0xff000000;                                                                      </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 496         highScore = -1;                                                                                  </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 497         // Go back over the RGB colors that match the winning hue,                                       </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 498         // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                 </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 499         // The highest-scoring RGB color wins.                                                           </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 500         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 501             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 502                 int rgb = bitmap.getPixel(x, y) | 0xff000000;                                            </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 503                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 504                 int hue = (int) hsv[0];                                                                  </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 505                 if (hue == bestHue) {                                                                    </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 506                     float s = hsv[1];                                                                    </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 507                     float v = hsv[2];                                                                    </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 508                     int bucket = (int) (s * 100) + (int) (v * 10000);                                    </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 509                     // Score by cumulative saturation * value.                                           </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 510                     float score = s * v;                                                                 </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 511                     Float oldTotal = rgbScores.get(bucket);                                              </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 512                     float newTotal = oldTotal == null ? score : oldTotal + score;                        </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 513                     rgbScores.put(bucket, newTotal);                                                     </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 514                     if (newTotal &gt; highScore) {                                                          </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 515                         highScore = newTotal;                                                            </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 516                         // All the colors in the winning bucket are very similar. Last in wins.          </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 517                         bestColor = rgb;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521         }                                                                                                </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 522         return bestColor;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523     }                                                                                                    </span>
<span  style=""> 524                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 525     /*                                                                                                   </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 526      * Finds a system apk which had a broadcast receiver listening to a particular action.               </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 527      * @param action intent action used to find the apk                                                  </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 528      * @return a pair of apk package name and the resources.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 529      */                                                                                                  </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 530     static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                     </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 531         final Intent intent = new Intent(action);                                                        </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 532         for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                 </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 533             if (info.activityInfo != null &amp;&amp;                                                             </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 534                     (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {      </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 535                 final String packageName = info.activityInfo.packageName;                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 536                 try {                                                                                    </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 537                     final Resources res = pm.getResourcesForApplication(packageName);                    </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 538                     return Pair.create(packageName, res);                                                </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 539                 } catch (NameNotFoundException e) {                                                      </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 540                     Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 544         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545     }                                                                                                    </span>
<span  style=""> 546                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 547     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 548     public static boolean isViewAttachedToWindow(View v) {                                               </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 549         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                       </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 550             return v.isAttachedToWindow();                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 551         } else {                                                                                         </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 552             // A proxy call which returns null, if the view is not attached to the window.               </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 553             return v.getKeyDispatcherState() != null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555     }                                                                                                    </span>
<span  style=""> 556                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 557     /**                                                                                                  </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 558      * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}            </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 559      * provided by the same package which is set to be global search activity.                           </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 560      * If widgetCategory is not supported, or no such widget is found, returns the first widget          </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 561      * provided by the package.                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 562      */                                                                                                  </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 563     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 564     public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                       </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 565         SearchManager searchManager =                                                                    </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 566                 (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                        </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 567         ComponentName searchComponent = searchManager.getGlobalSearchActivity();                         </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 568         if (searchComponent == null) return null;                                                        </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 569         String providerPkg = searchComponent.getPackageName();                                           </span>
<span  style=""> 570                                                                                                          </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 571         AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                      </span>
<span  style=""> 572                                                                                                          </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 573         AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                       </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 574         for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                    </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 575             if (info.provider.getPackageName().equals(providerPkg)) {                                    </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 576                 if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                       </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 577                     if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {  </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 578                         return info;                                                                     </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 579                     } else if (defaultWidgetForSearchPackage == null) {                                  </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 580                         defaultWidgetForSearchPackage = info;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 582                 } else {                                                                                 </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 583                     return info;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586         }                                                                                                </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 587         return defaultWidgetForSearchPackage;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588     }                                                                                                    </span>
<span  style=""> 589                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 590     /**                                                                                                  </span>
<span class="2890018962810146332" onmouseenter="enter('2890018962810146332');" onmouseout="out('2890018962810146332');" style=""> 591      * Compresses the bitmap to a byte array for serialization.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 592      */                                                                                                  </span>
<span class="3132902726257736313" onmouseenter="enter('3132902726257736313');" onmouseout="out('3132902726257736313');" style=""> 593     public static byte[] flattenBitmap(Bitmap bitmap) {                                                  </span>
<span class="-3581949580601242936" onmouseenter="enter('-3581949580601242936');" onmouseout="out('-3581949580601242936');" style=""> 594         // Try go guesstimate how much space the icon will take when serialized                          </span>
<span class="6197194043750255949" onmouseenter="enter('6197194043750255949');" onmouseout="out('6197194043750255949');" style=""> 595         // to avoid unnecessary allocations/copies during the write.                                     </span>
<span class="-5093203174793348363" onmouseenter="enter('-5093203174793348363');" onmouseout="out('-5093203174793348363');" style=""> 596         int size = bitmap.getWidth() * bitmap.getHeight() * 4;                                           </span>
<span class="-8739450248327170568" onmouseenter="enter('-8739450248327170568');" onmouseout="out('-8739450248327170568');" style=""> 597         ByteArrayOutputStream out = new ByteArrayOutputStream(size);                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 598         try {                                                                                            </span>
<span class="-4781087380346520352" onmouseenter="enter('-4781087380346520352');" onmouseout="out('-4781087380346520352');" style=""> 599             bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);                                        </span>
<span class="1246699851317198176" onmouseenter="enter('1246699851317198176');" onmouseout="out('1246699851317198176');" style=""> 600             out.flush();                                                                                 </span>
<span class="5013182197958409712" onmouseenter="enter('5013182197958409712');" onmouseout="out('5013182197958409712');" style=""> 601             out.close();                                                                                 </span>
<span class="8673371338796072548" onmouseenter="enter('8673371338796072548');" onmouseout="out('8673371338796072548');" style=""> 602             return out.toByteArray();                                                                    </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 603         } catch (IOException e) {                                                                        </span>
<span class="7956524499064355744" onmouseenter="enter('7956524499064355744');" onmouseout="out('7956524499064355744');" style=""> 604             Log.w(TAG, &quot;Could not write bitmap&quot;);                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 605             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607     }                                                                                                    </span>
<span  style=""> 608                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 609     /**                                                                                                  </span>
<span class="-6588275908342394580" onmouseenter="enter('-6588275908342394580');" onmouseout="out('-6588275908342394580');" style=""> 610      * Find the first vacant cell, if there is one.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 611      *                                                                                                   </span>
<span class="2503255600921964703" onmouseenter="enter('2503255600921964703');" onmouseout="out('2503255600921964703');" style=""> 612      * @param vacant Holds the x and y coordinate of the vacant cell                                     </span>
<span class="4033827775756481154" onmouseenter="enter('4033827775756481154');" onmouseout="out('4033827775756481154');" style=""> 613      * @param spanX Horizontal cell span.                                                                </span>
<span class="-3449734233772247568" onmouseenter="enter('-3449734233772247568');" onmouseout="out('-3449734233772247568');" style=""> 614      * @param spanY Vertical cell span.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 615      *                                                                                                   </span>
<span class="-2520380867733543515" onmouseenter="enter('-2520380867733543515');" onmouseout="out('-2520380867733543515');" style=""> 616      * @return true if a vacant cell was found                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 617      */                                                                                                  </span>
<span class="-3795506891981893742" onmouseenter="enter('-3795506891981893742');" onmouseout="out('-3795506891981893742');" style=""> 618     public static boolean findVacantCell(int[] vacant, int spanX, int spanY,                             </span>
<span class="-8783446296633863064" onmouseenter="enter('-8783446296633863064');" onmouseout="out('-8783446296633863064');" style=""> 619             int xCount, int yCount, boolean[][] occupied) {                                              </span>
<span  style=""> 620                                                                                                          </span>
<span class="-4617149385103036509" onmouseenter="enter('-4617149385103036509');" onmouseout="out('-4617149385103036509');" style=""> 621         for (int y = 0; (y + spanY) &lt;= yCount; y++) {                                                    </span>
<span class="-2519246593487215950" onmouseenter="enter('-2519246593487215950');" onmouseout="out('-2519246593487215950');" style=""> 622             for (int x = 0; (x + spanX) &lt;= xCount; x++) {                                                </span>
<span class="-6044475844747713215" onmouseenter="enter('-6044475844747713215');" onmouseout="out('-6044475844747713215');" style=""> 623                 boolean available = !occupied[x][y];                                                     </span>
<span class="-4926761125313010055" onmouseenter="enter('-4926761125313010055');" onmouseout="out('-4926761125313010055');" style=""> 624                 out:            for (int i = x; i &lt; x + spanX; i++) {                                    </span>
<span class="6140954715248440627" onmouseenter="enter('6140954715248440627');" onmouseout="out('6140954715248440627');" style=""> 625                     for (int j = y; j &lt; y + spanY; j++) {                                                </span>
<span class="-4206239266210524684" onmouseenter="enter('-4206239266210524684');" onmouseout="out('-4206239266210524684');" style=""> 626                         available = available &amp;&amp; !occupied[i][j];                                        </span>
<span class="6135105910559606383" onmouseenter="enter('6135105910559606383');" onmouseout="out('6135105910559606383');" style=""> 627                         if (!available) break out;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629                 }                                                                                        </span>
<span  style=""> 630                                                                                                          </span>
<span class="-6409233339093248287" onmouseenter="enter('-6409233339093248287');" onmouseout="out('-6409233339093248287');" style=""> 631                 if (available) {                                                                         </span>
<span class="-5516420008230606067" onmouseenter="enter('-5516420008230606067');" onmouseout="out('-5516420008230606067');" style=""> 632                     vacant[0] = x;                                                                       </span>
<span class="-8126960887413790406" onmouseenter="enter('-8126960887413790406');" onmouseout="out('-8126960887413790406');" style=""> 633                     vacant[1] = y;                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 634                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637         }                                                                                                </span>
<span  style=""> 638                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 639         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640     }                                                                                                    </span>
<span  style=""> 641                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 642     /**                                                                                                  </span>
<span class="8016895904140865359" onmouseenter="enter('8016895904140865359');" onmouseout="out('8016895904140865359');" style=""> 643      * Trims the string, removing all whitespace at the beginning and end of the string.                 </span>
<span class="-5493577797153084569" onmouseenter="enter('-5493577797153084569');" onmouseout="out('-5493577797153084569');" style=""> 644      * Non-breaking whitespaces are also removed.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 645      */                                                                                                  </span>
<span class="-2226334911462083775" onmouseenter="enter('-2226334911462083775');" onmouseout="out('-2226334911462083775');" style=""> 646     public static String trim(CharSequence s) {                                                          </span>
<span class="8207541066373211073" onmouseenter="enter('8207541066373211073');" onmouseout="out('8207541066373211073');" style=""> 647         if (s == null) {                                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 648             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649         }                                                                                                </span>
<span  style=""> 650                                                                                                          </span>
<span class="6752452014249628571" onmouseenter="enter('6752452014249628571');" onmouseout="out('6752452014249628571');" style=""> 651         // Just strip any sequence of whitespace or java space characters from the beginning and end     </span>
<span class="5219283686268968354" onmouseenter="enter('5219283686268968354');" onmouseout="out('5219283686268968354');" style=""> 652         Matcher m = sTrimPattern.matcher(s);                                                             </span>
<span class="-3983369353860878309" onmouseenter="enter('-3983369353860878309');" onmouseout="out('-3983369353860878309');" style=""> 653         return m.replaceAll(&quot;$1&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654     }                                                                                                    </span>
<span  style=""> 655                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 656     /**                                                                                                  </span>
<span class="-2988865143176305923" onmouseenter="enter('-2988865143176305923');" onmouseout="out('-2988865143176305923');" style=""> 657      * Calculates the height of a given string at a specific text size.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 658      */                                                                                                  </span>
<span class="3237069305992905572" onmouseenter="enter('3237069305992905572');" onmouseout="out('3237069305992905572');" style=""> 659     public static float calculateTextHeight(float textSizePx) {                                          </span>
<span class="1999028099572700086" onmouseenter="enter('1999028099572700086');" onmouseout="out('1999028099572700086');" style=""> 660         Paint p = new Paint();                                                                           </span>
<span class="917273269030490193" onmouseenter="enter('917273269030490193');" onmouseout="out('917273269030490193');" style=""> 661         p.setTextSize(textSizePx);                                                                       </span>
<span class="-8241169586934208490" onmouseenter="enter('-8241169586934208490');" onmouseout="out('-8241169586934208490');" style=""> 662         Paint.FontMetrics fm = p.getFontMetrics();                                                       </span>
<span class="-1517506744254696060" onmouseenter="enter('-1517506744254696060');" onmouseout="out('-1517506744254696060');" style=""> 663         return -fm.top + fm.bottom;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664     }                                                                                                    </span>
<span  style=""> 665                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 666     /**                                                                                                  </span>
<span class="6448536046662163494" onmouseenter="enter('6448536046662163494');" onmouseout="out('6448536046662163494');" style=""> 667      * Convenience println with multiple args.                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 668      */                                                                                                  </span>
<span class="-3661024453027515051" onmouseenter="enter('-3661024453027515051');" onmouseout="out('-3661024453027515051');" style=""> 669     public static void println(String key, Object... args) {                                             </span>
<span class="4224744888489149041" onmouseenter="enter('4224744888489149041');" onmouseout="out('4224744888489149041');" style=""> 670         StringBuilder b = new StringBuilder();                                                           </span>
<span class="-6494571071398948190" onmouseenter="enter('-6494571071398948190');" onmouseout="out('-6494571071398948190');" style=""> 671         b.append(key);                                                                                   </span>
<span class="3149522492802233976" onmouseenter="enter('3149522492802233976');" onmouseout="out('3149522492802233976');" style=""> 672         b.append(&quot;: &quot;);                                                                                  </span>
<span class="-3867183354633138218" onmouseenter="enter('-3867183354633138218');" onmouseout="out('-3867183354633138218');" style=""> 673         boolean isFirstArgument = true;                                                                  </span>
<span class="4930952806349292087" onmouseenter="enter('4930952806349292087');" onmouseout="out('4930952806349292087');" style=""> 674         for (Object arg : args) {                                                                        </span>
<span class="2611054600934311831" onmouseenter="enter('2611054600934311831');" onmouseout="out('2611054600934311831');" style=""> 675             if (isFirstArgument) {                                                                       </span>
<span class="-7008608319651418815" onmouseenter="enter('-7008608319651418815');" onmouseout="out('-7008608319651418815');" style=""> 676                 isFirstArgument = false;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 677             } else {                                                                                     </span>
<span class="7277933927684441937" onmouseenter="enter('7277933927684441937');" onmouseout="out('7277933927684441937');" style=""> 678                 b.append(&quot;, &quot;);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679             }                                                                                            </span>
<span class="-6918144193114510" onmouseenter="enter('-6918144193114510');" onmouseout="out('-6918144193114510');" style=""> 680             b.append(arg);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681         }                                                                                                </span>
<span class="6306736576653323559" onmouseenter="enter('6306736576653323559');" onmouseout="out('6306736576653323559');" style=""> 682         System.out.println(b.toString());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683     }                                                                                                    </span>
<span  style=""> 684                                                                                                          </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 685     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="6706641044237115049" onmouseenter="enter('6706641044237115049');" onmouseout="out('6706641044237115049');" style=""> 686     public static boolean isRtl(Resources res) {                                                         </span>
<span class="-3807300280994787598" onmouseenter="enter('-3807300280994787598');" onmouseout="out('-3807300280994787598');" style=""> 687         return (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &amp;&amp;                          </span>
<span class="-6381041904087975678" onmouseenter="enter('-6381041904087975678');" onmouseout="out('-6381041904087975678');" style=""> 688                 (res.getConfiguration().getLayoutDirection() == View.LAYOUT_DIRECTION_RTL);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689     }                                                                                                    </span>
<span  style=""> 690                                                                                                          </span>
<span class="7745027086805008166" onmouseenter="enter('7745027086805008166');" onmouseout="out('7745027086805008166');" style=""> 691     public static void assertWorkerThread() {                                                            </span>
<span class="9134597883085590362" onmouseenter="enter('9134597883085590362');" onmouseout="out('9134597883085590362');" style=""> 692         if (LauncherAppState.isDogfoodBuild() &amp;&amp;                                                         </span>
<span class="-6981789448421478045" onmouseenter="enter('-6981789448421478045');" onmouseout="out('-6981789448421478045');" style=""> 693                 (LauncherModel.sWorkerThread.getThreadId() != Process.myTid())) {                        </span>
<span class="9035044908675802484" onmouseenter="enter('9035044908675802484');" onmouseout="out('9035044908675802484');" style=""> 694             throw new IllegalStateException();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696     }                                                                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 698     /**                                                                                                  </span>
<span class="-1474801224471826037" onmouseenter="enter('-1474801224471826037');" onmouseout="out('-1474801224471826037');" style=""> 699      * Returns true if the intent is a valid launch intent for a launcher activity of an app.            </span>
<span class="6585786963246605309" onmouseenter="enter('6585786963246605309');" onmouseout="out('6585786963246605309');" style=""> 700      * This is used to identify shortcuts which are different from the ones exposed by the               </span>
<span class="-4023082809467763476" onmouseenter="enter('-4023082809467763476');" onmouseout="out('-4023082809467763476');" style=""> 701      * applications&#x27; manifest file.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 702      *                                                                                                   </span>
<span class="-450668369620467316" onmouseenter="enter('-450668369620467316');" onmouseout="out('-450668369620467316');" style=""> 703      * @param launchIntent The intent that will be launched when the shortcut is clicked.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 704      */                                                                                                  </span>
<span class="-2895511923085128680" onmouseenter="enter('-2895511923085128680');" onmouseout="out('-2895511923085128680');" style=""> 705     public static boolean isLauncherAppTarget(Intent launchIntent) {                                     </span>
<span class="-2387975119110806937" onmouseenter="enter('-2387975119110806937');" onmouseout="out('-2387975119110806937');" style=""> 706         if (launchIntent != null                                                                         </span>
<span class="5458468825391823724" onmouseenter="enter('5458468825391823724');" onmouseout="out('5458468825391823724');" style=""> 707                 &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())                                   </span>
<span class="-8557547063293546194" onmouseenter="enter('-8557547063293546194');" onmouseout="out('-8557547063293546194');" style=""> 708                 &amp;&amp; launchIntent.getComponent() != null                                                   </span>
<span class="1111365987588044694" onmouseenter="enter('1111365987588044694');" onmouseout="out('1111365987588044694');" style=""> 709                 &amp;&amp; launchIntent.getCategories() != null                                                  </span>
<span class="8511800567412215627" onmouseenter="enter('8511800567412215627');" onmouseout="out('8511800567412215627');" style=""> 710                 &amp;&amp; launchIntent.getCategories().size() == 1                                              </span>
<span class="674036002274441191" onmouseenter="enter('674036002274441191');" onmouseout="out('674036002274441191');" style=""> 711                 &amp;&amp; launchIntent.hasCategory(Intent.CATEGORY_LAUNCHER)                                    </span>
<span class="3608633544114930920" onmouseenter="enter('3608633544114930920');" onmouseout="out('3608633544114930920');" style=""> 712                 &amp;&amp; TextUtils.isEmpty(launchIntent.getDataString())) {                                    </span>
<span class="-8928317571259330246" onmouseenter="enter('-8928317571259330246');" onmouseout="out('-8928317571259330246');" style=""> 713             // An app target can either have no extra or have ItemInfo.EXTRA_PROFILE.                    </span>
<span class="-7448063824548237845" onmouseenter="enter('-7448063824548237845');" onmouseout="out('-7448063824548237845');" style=""> 714             Bundle extras = launchIntent.getExtras();                                                    </span>
<span class="3231714309982698113" onmouseenter="enter('3231714309982698113');" onmouseout="out('3231714309982698113');" style=""> 715             if (extras == null) {                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 716                 return true;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 717             } else {                                                                                     </span>
<span class="-5848873234981662305" onmouseenter="enter('-5848873234981662305');" onmouseout="out('-5848873234981662305');" style=""> 718                 Set&lt;String&gt; keys = extras.keySet();                                                      </span>
<span class="-5856689159284471907" onmouseenter="enter('-5856689159284471907');" onmouseout="out('-5856689159284471907');" style=""> 719                 return keys.size() == 1 &amp;&amp; keys.contains(ItemInfo.EXTRA_PROFILE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 721         };                                                                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 722         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723     }                                                                                                    </span>
<span  style=""> 724                                                                                                          </span>
<span class="6672516174829348824" onmouseenter="enter('6672516174829348824');" onmouseout="out('6672516174829348824');" style=""> 725     public static float dpiFromPx(int size, DisplayMetrics metrics){                                     </span>
<span class="1954388547550632323" onmouseenter="enter('1954388547550632323');" onmouseout="out('1954388547550632323');" style=""> 726         float densityRatio = (float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT;                </span>
<span class="6040406764349731403" onmouseenter="enter('6040406764349731403');" onmouseout="out('6040406764349731403');" style=""> 727         return (size / densityRatio);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728     }                                                                                                    </span>
<span class="4669549645205847924" onmouseenter="enter('4669549645205847924');" onmouseout="out('4669549645205847924');" style=""> 729     public static int pxFromDp(float size, DisplayMetrics metrics) {                                     </span>
<span class="-6600010791620633138" onmouseenter="enter('-6600010791620633138');" onmouseout="out('-6600010791620633138');" style=""> 730         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,                   </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 731                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732     }                                                                                                    </span>
<span class="8174843599380599011" onmouseenter="enter('8174843599380599011');" onmouseout="out('8174843599380599011');" style=""> 733     public static int pxFromSp(float size, DisplayMetrics metrics) {                                     </span>
<span class="3954369763209540394" onmouseenter="enter('3954369763209540394');" onmouseout="out('3954369763209540394');" style=""> 734         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP,                    </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 735                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736     }                                                                                                    </span>
<span  style=""> 737                                                                                                          </span>
<span class="8396926495000728032" onmouseenter="enter('8396926495000728032');" onmouseout="out('8396926495000728032');" style=""> 738     public static String createDbSelectionQuery(String columnName, Iterable&lt;?&gt; values) {                 </span>
<span class="-9051894453369877823" onmouseenter="enter('-9051894453369877823');" onmouseout="out('-9051894453369877823');" style=""> 739         return String.format(Locale.ENGLISH, &quot;%s IN (%s)&quot;, columnName, TextUtils.join(&quot;, &quot;, values));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19 import android.annotation.TargetApi;                                                                     </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  20 import android.app.Activity;                                                                             </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  21 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  22 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  23 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  24 import android.content.ActivityNotFoundException;                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  25 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  28 import android.content.SharedPreferences;                                                                </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  29 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  30 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  31 import android.content.pm.PackageManager;                                                                </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  32 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  33 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  34 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  35 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  36 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  37 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  38 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  39 import android.graphics.Color;                                                                           </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  40 import android.graphics.Matrix;                                                                          </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  41 import android.graphics.Paint;                                                                           </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  42 import android.graphics.PaintFlagsDrawFilter;                                                            </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  43 import android.graphics.Rect;                                                                            </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  44 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  45 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  46 import android.graphics.drawable.PaintDrawable;                                                          </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  47 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  48 import android.os.Bundle;                                                                                </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  49 import android.os.Process;                                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  50 import android.text.TextUtils;                                                                           </span>
<span class="-8138675088784084481" onmouseenter="enter('-8138675088784084481');" onmouseout="out('-8138675088784084481');" style="">  51 import android.util.DisplayMetrics;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  52 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  53 import android.util.Pair;                                                                                </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  54 import android.util.SparseArray;                                                                         </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  55 import android.util.TypedValue;                                                                          </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  56 import android.view.View;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  57 import android.widget.Toast;                                                                             </span>
<span  style="">  58                                                                                                          </span>
<span class="9184227348967602043" onmouseenter="enter('9184227348967602043');" onmouseout="out('9184227348967602043');" style="">  59 import java.io.ByteArrayOutputStream;                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  60 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  61 import java.util.ArrayList;                                                                              </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  62 import java.util.Locale;                                                                                 </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  63 import java.util.Set;                                                                                    </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  64 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  65 import java.util.regex.Pattern;                                                                          </span>
<span  style="">  66                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  67 /**                                                                                                      </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  68  * Various utilities shared amongst the Launcher&#x27;s classes.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69  */                                                                                                      </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  70 public final class Utilities {                                                                           </span>
<span  style="">  71                                                                                                          </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  72     private static final String TAG = &quot;Launcher.Utilities&quot;;                                              </span>
<span  style="">  73                                                                                                          </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  74     private static final Rect sOldBounds = new Rect();                                                   </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  75     private static final Canvas sCanvas = new Canvas();                                                  </span>
<span  style="">  76                                                                                                          </span>
<span class="-1329756999223092373" onmouseenter="enter('-1329756999223092373');" onmouseout="out('-1329756999223092373');" style="">  77     private static final Pattern sTrimPattern =                                                          </span>
<span class="1309858825264038043" onmouseenter="enter('1309858825264038043');" onmouseout="out('1309858825264038043');" style="">  78             Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{javaSpaceChar}]*$&quot;);                 </span>
<span  style="">  79                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  80     static {                                                                                             </span>
<span class="-626556356968599416" onmouseenter="enter('-626556356968599416');" onmouseout="out('-626556356968599416');" style="">  81         sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG,                                </span>
<span class="-4527400598837595496" onmouseenter="enter('-4527400598837595496');" onmouseout="out('-4527400598837595496');" style="">  82                 Paint.FILTER_BITMAP_FLAG));                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83     }                                                                                                    </span>
<span class="-3555091970674166572" onmouseenter="enter('-3555091970674166572');" onmouseout="out('-3555091970674166572');" style="">  84     static int sColors[] = { 0xffff0000, 0xff00ff00, 0xff0000ff };                                       </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  85     static int sColorIndex = 0;                                                                          </span>
<span  style="">  86                                                                                                          </span>
<span class="8969639251951816674" onmouseenter="enter('8969639251951816674');" onmouseout="out('8969639251951816674');" style="">  87     private static final int[] sLoc0 = new int[2];                                                       </span>
<span class="-5113691339331042282" onmouseenter="enter('-5113691339331042282');" onmouseout="out('-5113691339331042282');" style="">  88     private static final int[] sLoc1 = new int[2];                                                       </span>
<span  style="">  89                                                                                                          </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  90     // To turn on these properties, type                                                                 </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  91     // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                      </span>
<span class="7534360217793993844" onmouseenter="enter('7534360217793993844');" onmouseout="out('7534360217793993844');" style="">  92     private static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                </span>
<span class="6438249582362651183" onmouseenter="enter('6438249582362651183');" onmouseout="out('6438249582362651183');" style="">  93     private static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);     </span>
<span  style="">  94                                                                                                          </span>
<span class="-9073580014282388493" onmouseenter="enter('-9073580014282388493');" onmouseout="out('-9073580014282388493');" style="">  95     public static final String ALLOW_ROTATION_PREFERENCE_KEY = &quot;pref_allowRotation&quot;;                     </span>
<span  style="">  96                                                                                                          </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style="">  97     public static boolean isPropertyEnabled(String propertyName) {                                       </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style="">  98         return Log.isLoggable(propertyName, Log.VERBOSE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="6478873371162606731" onmouseenter="enter('6478873371162606731');" onmouseout="out('6478873371162606731');" style=""> 101     public static boolean isAllowRotationPrefEnabled(Context context, boolean multiProcess) {            </span>
<span class="-2196846614400288078" onmouseenter="enter('-2196846614400288078');" onmouseout="out('-2196846614400288078');" style=""> 102         SharedPreferences sharedPrefs = context.getSharedPreferences(                                    </span>
<span class="1287283503969855027" onmouseenter="enter('1287283503969855027');" onmouseout="out('1287283503969855027');" style=""> 103                 LauncherAppState.getSharedPreferencesKey(), Context.MODE_PRIVATE | (multiProcess ?       </span>
<span class="-636554800273789668" onmouseenter="enter('-636554800273789668');" onmouseout="out('-636554800273789668');" style=""> 104                         Context.MODE_MULTI_PROCESS : 0));                                                </span>
<span class="-8841982816110512528" onmouseenter="enter('-8841982816110512528');" onmouseout="out('-8841982816110512528');" style=""> 105         boolean allowRotationPref = sharedPrefs.getBoolean(ALLOW_ROTATION_PREFERENCE_KEY, false);        </span>
<span class="-8131727064279733470" onmouseenter="enter('-8131727064279733470');" onmouseout="out('-8131727064279733470');" style=""> 106         return sForceEnableRotation || allowRotationPref;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107     }                                                                                                    </span>
<span  style=""> 108                                                                                                          </span>
<span class="-6499659450313544780" onmouseenter="enter('-6499659450313544780');" onmouseout="out('-6499659450313544780');" style=""> 109     public static boolean isRotationAllowedForDevice(Context context) {                                  </span>
<span class="-1687812256733097905" onmouseenter="enter('-1687812256733097905');" onmouseout="out('-1687812256733097905');" style=""> 110         return sForceEnableRotation || context.getResources().getBoolean(R.bool.allow_rotation);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 113     /**                                                                                                  </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 114      * Indicates if the device is running LMP or higher.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 115      */                                                                                                  </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 116     public static boolean isLmpOrAbove() {                                                               </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style=""> 117         return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118     }                                                                                                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 120     /**                                                                                                  </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 121      * Returns a bitmap suitable for the all apps view. If the package or the resource do not            </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 122      * exist, it returns null.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 123      */                                                                                                  </span>
<span class="7886363487578966295" onmouseenter="enter('7886363487578966295');" onmouseout="out('7886363487578966295');" style=""> 124     public static Bitmap createIconBitmap(String packageName, String resourceName,                       </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 125             Context context) {                                                                           </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 126         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 127         // the resource                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 128         try {                                                                                            </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 129             Resources resources = packageManager.getResourcesForApplication(packageName);                </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 130             if (resources != null) {                                                                     </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 131                 final int id = resources.getIdentifier(resourceName, null, null);                        </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 132                 return createIconBitmap(                                                                 </span>
<span class="7879136357573012600" onmouseenter="enter('7879136357573012600');" onmouseout="out('7879136357573012600');" style=""> 133                         resources.getDrawableForDensity(id, LauncherAppState.getInstance()               </span>
<span class="3845650349866329979" onmouseenter="enter('3845650349866329979');" onmouseout="out('3845650349866329979');" style=""> 134                                 .getInvariantDeviceProfile().fillResIconDpi), context);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 136         } catch (Exception e) {                                                                          </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 137             // Icon not found.                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 139         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140     }                                                                                                    </span>
<span  style=""> 141                                                                                                          </span>
<span class="8267304412893954240" onmouseenter="enter('8267304412893954240');" onmouseout="out('8267304412893954240');" style=""> 142     public static boolean isLmpMR1OrAbove() {                                                            </span>
<span class="-198173616463930288" onmouseenter="enter('-198173616463930288');" onmouseout="out('-198173616463930288');" style=""> 143         // TODO(adamcohen): update to Build.VERSION_CODES.LOLLIPOP_MR1 once building against 22;         </span>
<span class="2386615924650555298" onmouseenter="enter('2386615924650555298');" onmouseout="out('2386615924650555298');" style=""> 144         return Build.VERSION.SDK_INT &gt;= 22;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145     }                                                                                                    </span>
<span  style=""> 146                                                                                                          </span>
<span class="-8604735062489042646" onmouseenter="enter('-8604735062489042646');" onmouseout="out('-8604735062489042646');" style=""> 147     public static boolean isLmpMR1() {                                                                   </span>
<span class="-198173616463930288" onmouseenter="enter('-198173616463930288');" onmouseout="out('-198173616463930288');" style=""> 148         // TODO(adamcohen): update to Build.VERSION_CODES.LOLLIPOP_MR1 once building against 22;         </span>
<span class="-3182404196161427649" onmouseenter="enter('-3182404196161427649');" onmouseout="out('-3182404196161427649');" style=""> 149         return Build.VERSION.SDK_INT == 22;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="8062060252944903878" onmouseenter="enter('8062060252944903878');" onmouseout="out('8062060252944903878');" style=""> 152     public static Bitmap createIconBitmap(Cursor c, int iconIndex, Context context) {                    </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style=""> 153         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 154         try {                                                                                            </span>
<span class="-6494522703644265462" onmouseenter="enter('-6494522703644265462');" onmouseout="out('-6494522703644265462');" style=""> 155             return createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 156         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 157             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159     }                                                                                                    </span>
<span  style=""> 160                                                                                                          </span>
<span class="-1980149402827349938" onmouseenter="enter('-1980149402827349938');" onmouseout="out('-1980149402827349938');" style=""> 161     private static int getIconBitmapSize() {                                                             </span>
<span class="-796645866027437773" onmouseenter="enter('-796645866027437773');" onmouseout="out('-796645866027437773');" style=""> 162         return LauncherAppState.getInstance().getInvariantDeviceProfile().iconBitmapSize;                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 165     /**                                                                                                  </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 166      * Returns a bitmap which is of the appropriate size to be displayed as an icon                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 167      */                                                                                                  </span>
<span class="-2529226303201089113" onmouseenter="enter('-2529226303201089113');" onmouseout="out('-2529226303201089113');" style=""> 168     public static Bitmap createIconBitmap(Bitmap icon, Context context) {                                </span>
<span class="-812758491164557381" onmouseenter="enter('-812758491164557381');" onmouseout="out('-812758491164557381');" style=""> 169         final int iconBitmapSize = getIconBitmapSize();                                                  </span>
<span class="5755596367918457571" onmouseenter="enter('5755596367918457571');" onmouseout="out('5755596367918457571');" style=""> 170         if (iconBitmapSize == icon.getWidth() &amp;&amp; iconBitmapSize == icon.getHeight()) {                   </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 171             return icon;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172         }                                                                                                </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 173         return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174     }                                                                                                    </span>
<span  style=""> 175                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 176     /**                                                                                                  </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 177      * Returns a bitmap suitable for the all apps view.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 178      */                                                                                                  </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 179     public static Bitmap createIconBitmap(Drawable icon, Context context) {                              </span>
<span class="-8928451114088413132" onmouseenter="enter('-8928451114088413132');" onmouseout="out('-8928451114088413132');" style=""> 180         synchronized (sCanvas) {                                                                         </span>
<span class="-812758491164557381" onmouseenter="enter('-812758491164557381');" onmouseout="out('-812758491164557381');" style=""> 181             final int iconBitmapSize = getIconBitmapSize();                                              </span>
<span  style=""> 182                                                                                                          </span>
<span class="-8808586281723900088" onmouseenter="enter('-8808586281723900088');" onmouseout="out('-8808586281723900088');" style=""> 183             int width = iconBitmapSize;                                                                  </span>
<span class="-4976368659165838766" onmouseenter="enter('-4976368659165838766');" onmouseout="out('-4976368659165838766');" style=""> 184             int height = iconBitmapSize;                                                                 </span>
<span  style=""> 185                                                                                                          </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 186             if (icon instanceof PaintDrawable) {                                                         </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 187                 PaintDrawable painter = (PaintDrawable) icon;                                            </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 188                 painter.setIntrinsicWidth(width);                                                        </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 189                 painter.setIntrinsicHeight(height);                                                      </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 190             } else if (icon instanceof BitmapDrawable) {                                                 </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 191                 // Ensure the bitmap has a density.                                                      </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 192                 BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                   </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 193                 Bitmap bitmap = bitmapDrawable.getBitmap();                                              </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 194                 if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                        </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 195                     bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197             }                                                                                            </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 198             int sourceWidth = icon.getIntrinsicWidth();                                                  </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 199             int sourceHeight = icon.getIntrinsicHeight();                                                </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 200             if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                   </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 201                 // Scale the icon proportionally to the icon dimensions                                  </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 202                 final float ratio = (float) sourceWidth / sourceHeight;                                  </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 203                 if (sourceWidth &gt; sourceHeight) {                                                        </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 204                     height = (int) (width / ratio);                                                      </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 205                 } else if (sourceHeight &gt; sourceWidth) {                                                 </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 206                     width = (int) (height * ratio);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208             }                                                                                            </span>
<span  style=""> 209                                                                                                          </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 210             // no intrinsic size --&gt; use default size                                                    </span>
<span class="-8413870914199027407" onmouseenter="enter('-8413870914199027407');" onmouseout="out('-8413870914199027407');" style=""> 211             int textureWidth = iconBitmapSize;                                                           </span>
<span class="-1351255372366243626" onmouseenter="enter('-1351255372366243626');" onmouseout="out('-1351255372366243626');" style=""> 212             int textureHeight = iconBitmapSize;                                                          </span>
<span  style=""> 213                                                                                                          </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 214             final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                       </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 215                     Bitmap.Config.ARGB_8888);                                                            </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 216             final Canvas canvas = sCanvas;                                                               </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 217             canvas.setBitmap(bitmap);                                                                    </span>
<span  style=""> 218                                                                                                          </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 219             final int left = (textureWidth-width) / 2;                                                   </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 220             final int top = (textureHeight-height) / 2;                                                  </span>
<span  style=""> 221                                                                                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 222             @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                       </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 223             final boolean debug = false;                                                                 </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 224             if (debug) {                                                                                 </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 225                 // draw a big box for the icon for debugging                                             </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 226                 canvas.drawColor(sColors[sColorIndex]);                                                  </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 227                 if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                    </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 228                 Paint debugPaint = new Paint();                                                          </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 229                 debugPaint.setColor(0xffcccc00);                                                         </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 230                 canvas.drawRect(left, top, left+width, top+height, debugPaint);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231             }                                                                                            </span>
<span  style=""> 232                                                                                                          </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 233             sOldBounds.set(icon.getBounds());                                                            </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 234             icon.setBounds(left, top, left+width, top+height);                                           </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 235             icon.draw(canvas);                                                                           </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 236             icon.setBounds(sOldBounds);                                                                  </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 237             canvas.setBitmap(null);                                                                      </span>
<span  style=""> 238                                                                                                          </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 239             return bitmap;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241     }                                                                                                    </span>
<span  style=""> 242                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 243     /**                                                                                                  </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 244      * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s             </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 245      * coordinates.                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 246      *                                                                                                   </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 247      * @param descendant The descendant to which the passed coordinate is relative.                      </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 248      * @param root The root view to make the coordinates relative to.                                    </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 249      * @param coord The coordinate that we want mapped.                                                  </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 250      * @param includeRootScroll Whether or not to account for the scroll of the descendant:              </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 251      *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.            </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 252      * @return The factor by which this descendant is scaled relative to this DragLayer. Caution         </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 253      *         this scale factor is assumed to be equal in X and Y, and so if at any point this          </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 254      *         assumption fails, we will need to return a pair of scale factors.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 255      */                                                                                                  </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 256     public static float getDescendantCoordRelativeToParent(View descendant, View root,                   </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 257                                                            int[] coord, boolean includeRootScroll) {     </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 258         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 259                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 260         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 261                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 262         View v = descendant;                                                                             </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 263         while(v != root &amp;&amp; v != null) {                                                                  </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 264             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 265             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 267         ancestorChain.add(root);                                                                         </span>
<span  style=""> 268                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 269         float scale = 1.0f;                                                                              </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 270         int count = ancestorChain.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 271         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 272             View v0 = ancestorChain.get(i);                                                              </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 273             // For TextViews, scroll has a meaning which relates to the text position                    </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 274             // which is very strange... ignore the scroll.                                               </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 275             if (v0 != descendant || includeRootScroll) {                                                 </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 276                 pt[0] -= v0.getScrollX();                                                                </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 277                 pt[1] -= v0.getScrollY();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278             }                                                                                            </span>
<span  style=""> 279                                                                                                          </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 280             v0.getMatrix().mapPoints(pt);                                                                </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 281             pt[0] += v0.getLeft();                                                                       </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 282             pt[1] += v0.getTop();                                                                        </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 283             scale *= v0.getScaleX();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284         }                                                                                                </span>
<span  style=""> 285                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 286         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 287         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 288         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289     }                                                                                                    </span>
<span  style=""> 290                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 291     /**                                                                                                  </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 292      * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 293      */                                                                                                  </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 294     public static float mapCoordInSelfToDescendent(View descendant, View root,                           </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 295                                                    int[] coord) {                                        </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 296         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 297                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 298         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 299                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 300         View v = descendant;                                                                             </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 301         while(v != root) {                                                                               </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 302             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 303             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 305         ancestorChain.add(root);                                                                         </span>
<span  style=""> 306                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 307         float scale = 1.0f;                                                                              </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 308         Matrix inverse = new Matrix();                                                                   </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 309         int count = ancestorChain.size();                                                                </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 310         for (int i = count - 1; i &gt;= 0; i--) {                                                           </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 311             View ancestor = ancestorChain.get(i);                                                        </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 312             View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                           </span>
<span  style=""> 313                                                                                                          </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 314             pt[0] += ancestor.getScrollX();                                                              </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 315             pt[1] += ancestor.getScrollY();                                                              </span>
<span  style=""> 316                                                                                                          </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 317             if (next != null) {                                                                          </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 318                 pt[0] -= next.getLeft();                                                                 </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 319                 pt[1] -= next.getTop();                                                                  </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 320                 next.getMatrix().invert(inverse);                                                        </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 321                 inverse.mapPoints(pt);                                                                   </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 322                 scale *= next.getScaleX();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324         }                                                                                                </span>
<span  style=""> 325                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 326         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 327         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 328         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329     }                                                                                                    </span>
<span  style=""> 330                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 331     /**                                                                                                  </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 332      * Utility method to determine whether the given point, in local coordinates,                        </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 333      * is inside the view, where the area of the view is expanded by the slop factor.                    </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 334      * This method is called while processing touch-move events to determine if the event                </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 335      * is still within the view.                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 336      */                                                                                                  </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 337     public static boolean pointInView(View v, float localX, float localY, float slop) {                  </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 338         return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                   </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 339                 localY &lt; (v.getHeight() + slop);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340     }                                                                                                    </span>
<span  style=""> 341                                                                                                          </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 342     public static void scaleRect(Rect r, float scale) {                                                  </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 343         if (scale != 1.0f) {                                                                             </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 344             r.left = (int) (r.left * scale + 0.5f);                                                      </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 345             r.top = (int) (r.top * scale + 0.5f);                                                        </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 346             r.right = (int) (r.right * scale + 0.5f);                                                    </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 347             r.bottom = (int) (r.bottom * scale + 0.5f);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349     }                                                                                                    </span>
<span  style=""> 350                                                                                                          </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 351     public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                     </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 352         v0.getLocationInWindow(sLoc0);                                                                   </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 353         v1.getLocationInWindow(sLoc1);                                                                   </span>
<span  style=""> 354                                                                                                          </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 355         sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                        </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 356         sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                       </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 357         sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                        </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 358         sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                       </span>
<span  style=""> 359                                                                                                          </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 360         if (delta == null) {                                                                             </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 361             delta = new int[2];                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362         }                                                                                                </span>
<span  style=""> 363                                                                                                          </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 364         delta[0] = sLoc1[0] - sLoc0[0];                                                                  </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 365         delta[1] = sLoc1[1] - sLoc0[1];                                                                  </span>
<span  style=""> 366                                                                                                          </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 367         return delta;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368     }                                                                                                    </span>
<span  style=""> 369                                                                                                          </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 370     public static void scaleRectAboutCenter(Rect r, float scale) {                                       </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 371         int cx = r.centerX();                                                                            </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 372         int cy = r.centerY();                                                                            </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 373         r.offset(-cx, -cy);                                                                              </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 374         Utilities.scaleRect(r, scale);                                                                   </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 375         r.offset(cx, cy);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376     }                                                                                                    </span>
<span  style=""> 377                                                                                                          </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 378     public static void startActivityForResultSafely(                                                     </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 379             Activity activity, Intent intent, int requestCode) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 380         try {                                                                                            </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 381             activity.startActivityForResult(intent, requestCode);                                        </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 382         } catch (ActivityNotFoundException e) {                                                          </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 383             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 384         } catch (SecurityException e) {                                                                  </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 385             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 386             Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                     </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 387                     &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +       </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 388                     &quot;or use the exported attribute for this activity.&quot;, e);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390     }                                                                                                    </span>
<span  style=""> 391                                                                                                          </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 392     static boolean isSystemApp(Context context, Intent intent) {                                         </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 393         PackageManager pm = context.getPackageManager();                                                 </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 394         ComponentName cn = intent.getComponent();                                                        </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 395         String packageName = null;                                                                       </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 396         if (cn == null) {                                                                                </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 397             ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);            </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 398             if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                         </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 399                 packageName = info.activityInfo.packageName;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 401         } else {                                                                                         </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 402             packageName = cn.getPackageName();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403         }                                                                                                </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 404         if (packageName != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 405             try {                                                                                        </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 406                 PackageInfo info = pm.getPackageInfo(packageName, 0);                                    </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 407                 return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                               </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 408                         ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);               </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 409             } catch (NameNotFoundException e) {                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 410                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 412         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 413             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415     }                                                                                                    </span>
<span  style=""> 416                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 417     /**                                                                                                  </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 418      * This picks a dominant color, looking for high-saturation, high-value, repeated hues.              </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 419      * @param bitmap The bitmap to scan                                                                  </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 420      * @param samples The approximate max number of samples to use.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 421      */                                                                                                  </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 422     static int findDominantColorByHue(Bitmap bitmap, int samples) {                                      </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 423         final int height = bitmap.getHeight();                                                           </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 424         final int width = bitmap.getWidth();                                                             </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 425         int sampleStride = (int) Math.sqrt((height * width) / samples);                                  </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 426         if (sampleStride &lt; 1) {                                                                          </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 427             sampleStride = 1;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428         }                                                                                                </span>
<span  style=""> 429                                                                                                          </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 430         // This is an out-param, for getting the hsv values for an rgb                                   </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 431         float[] hsv = new float[3];                                                                      </span>
<span  style=""> 432                                                                                                          </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 433         // First get the best hue, by creating a histogram over 360 hue buckets,                         </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 434         // where each pixel contributes a score weighted by saturation, value, and alpha.                </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 435         float[] hueScoreHistogram = new float[360];                                                      </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 436         float highScore = -1;                                                                            </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 437         int bestHue = -1;                                                                                </span>
<span  style=""> 438                                                                                                          </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 439         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 440             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 441                 int argb = bitmap.getPixel(x, y);                                                        </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 442                 int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                         </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 443                 if (alpha &lt; 0x80) {                                                                      </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 444                     // Drop mostly-transparent pixels.                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 445                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446                 }                                                                                        </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 447                 // Remove the alpha channel.                                                             </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 448                 int rgb = argb | 0xFF000000;                                                             </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 449                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 450                 // Bucket colors by the 360 integer hues.                                                </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 451                 int hue = (int) hsv[0];                                                                  </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 452                 if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                        </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 453                     // Defensively avoid array bounds violations.                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 454                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455                 }                                                                                        </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 456                 float score = hsv[1] * hsv[2];                                                           </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 457                 hueScoreHistogram[hue] += score;                                                         </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 458                 if (hueScoreHistogram[hue] &gt; highScore) {                                                </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 459                     highScore = hueScoreHistogram[hue];                                                  </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 460                     bestHue = hue;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463         }                                                                                                </span>
<span  style=""> 464                                                                                                          </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 465         SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                         </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 466         int bestColor = 0xff000000;                                                                      </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 467         highScore = -1;                                                                                  </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 468         // Go back over the RGB colors that match the winning hue,                                       </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 469         // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                 </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 470         // The highest-scoring RGB color wins.                                                           </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 471         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 472             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 473                 int rgb = bitmap.getPixel(x, y) | 0xff000000;                                            </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 474                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 475                 int hue = (int) hsv[0];                                                                  </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 476                 if (hue == bestHue) {                                                                    </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 477                     float s = hsv[1];                                                                    </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 478                     float v = hsv[2];                                                                    </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 479                     int bucket = (int) (s * 100) + (int) (v * 10000);                                    </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 480                     // Score by cumulative saturation * value.                                           </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 481                     float score = s * v;                                                                 </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 482                     Float oldTotal = rgbScores.get(bucket);                                              </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 483                     float newTotal = oldTotal == null ? score : oldTotal + score;                        </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 484                     rgbScores.put(bucket, newTotal);                                                     </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 485                     if (newTotal &gt; highScore) {                                                          </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 486                         highScore = newTotal;                                                            </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 487                         // All the colors in the winning bucket are very similar. Last in wins.          </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 488                         bestColor = rgb;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492         }                                                                                                </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 493         return bestColor;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494     }                                                                                                    </span>
<span  style=""> 495                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 496     /*                                                                                                   </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 497      * Finds a system apk which had a broadcast receiver listening to a particular action.               </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 498      * @param action intent action used to find the apk                                                  </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 499      * @return a pair of apk package name and the resources.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 500      */                                                                                                  </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 501     static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                     </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 502         final Intent intent = new Intent(action);                                                        </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 503         for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                 </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 504             if (info.activityInfo != null &amp;&amp;                                                             </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 505                     (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {      </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 506                 final String packageName = info.activityInfo.packageName;                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 507                 try {                                                                                    </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 508                     final Resources res = pm.getResourcesForApplication(packageName);                    </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 509                     return Pair.create(packageName, res);                                                </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 510                 } catch (NameNotFoundException e) {                                                      </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 511                     Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 515         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516     }                                                                                                    </span>
<span  style=""> 517                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 518     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 519     public static boolean isViewAttachedToWindow(View v) {                                               </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 520         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                       </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 521             return v.isAttachedToWindow();                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 522         } else {                                                                                         </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 523             // A proxy call which returns null, if the view is not attached to the window.               </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 524             return v.getKeyDispatcherState() != null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526     }                                                                                                    </span>
<span  style=""> 527                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 528     /**                                                                                                  </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 529      * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}            </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 530      * provided by the same package which is set to be global search activity.                           </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 531      * If widgetCategory is not supported, or no such widget is found, returns the first widget          </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 532      * provided by the package.                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 533      */                                                                                                  </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 534     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 535     public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                       </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 536         SearchManager searchManager =                                                                    </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 537                 (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                        </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 538         ComponentName searchComponent = searchManager.getGlobalSearchActivity();                         </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 539         if (searchComponent == null) return null;                                                        </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 540         String providerPkg = searchComponent.getPackageName();                                           </span>
<span  style=""> 541                                                                                                          </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 542         AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                      </span>
<span  style=""> 543                                                                                                          </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 544         AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                       </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 545         for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                    </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 546             if (info.provider.getPackageName().equals(providerPkg)) {                                    </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 547                 if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                       </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 548                     if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {  </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 549                         return info;                                                                     </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 550                     } else if (defaultWidgetForSearchPackage == null) {                                  </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 551                         defaultWidgetForSearchPackage = info;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 553                 } else {                                                                                 </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 554                     return info;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557         }                                                                                                </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 558         return defaultWidgetForSearchPackage;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559     }                                                                                                    </span>
<span  style=""> 560                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 561     /**                                                                                                  </span>
<span class="2890018962810146332" onmouseenter="enter('2890018962810146332');" onmouseout="out('2890018962810146332');" style=""> 562      * Compresses the bitmap to a byte array for serialization.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 563      */                                                                                                  </span>
<span class="3132902726257736313" onmouseenter="enter('3132902726257736313');" onmouseout="out('3132902726257736313');" style=""> 564     public static byte[] flattenBitmap(Bitmap bitmap) {                                                  </span>
<span class="-3581949580601242936" onmouseenter="enter('-3581949580601242936');" onmouseout="out('-3581949580601242936');" style=""> 565         // Try go guesstimate how much space the icon will take when serialized                          </span>
<span class="6197194043750255949" onmouseenter="enter('6197194043750255949');" onmouseout="out('6197194043750255949');" style=""> 566         // to avoid unnecessary allocations/copies during the write.                                     </span>
<span class="-5093203174793348363" onmouseenter="enter('-5093203174793348363');" onmouseout="out('-5093203174793348363');" style=""> 567         int size = bitmap.getWidth() * bitmap.getHeight() * 4;                                           </span>
<span class="-8739450248327170568" onmouseenter="enter('-8739450248327170568');" onmouseout="out('-8739450248327170568');" style=""> 568         ByteArrayOutputStream out = new ByteArrayOutputStream(size);                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 569         try {                                                                                            </span>
<span class="-4781087380346520352" onmouseenter="enter('-4781087380346520352');" onmouseout="out('-4781087380346520352');" style=""> 570             bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);                                        </span>
<span class="1246699851317198176" onmouseenter="enter('1246699851317198176');" onmouseout="out('1246699851317198176');" style=""> 571             out.flush();                                                                                 </span>
<span class="5013182197958409712" onmouseenter="enter('5013182197958409712');" onmouseout="out('5013182197958409712');" style=""> 572             out.close();                                                                                 </span>
<span class="8673371338796072548" onmouseenter="enter('8673371338796072548');" onmouseout="out('8673371338796072548');" style=""> 573             return out.toByteArray();                                                                    </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 574         } catch (IOException e) {                                                                        </span>
<span class="7956524499064355744" onmouseenter="enter('7956524499064355744');" onmouseout="out('7956524499064355744');" style=""> 575             Log.w(TAG, &quot;Could not write bitmap&quot;);                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 576             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578     }                                                                                                    </span>
<span  style=""> 579                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 580     /**                                                                                                  </span>
<span class="-6588275908342394580" onmouseenter="enter('-6588275908342394580');" onmouseout="out('-6588275908342394580');" style=""> 581      * Find the first vacant cell, if there is one.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 582      *                                                                                                   </span>
<span class="2503255600921964703" onmouseenter="enter('2503255600921964703');" onmouseout="out('2503255600921964703');" style=""> 583      * @param vacant Holds the x and y coordinate of the vacant cell                                     </span>
<span class="4033827775756481154" onmouseenter="enter('4033827775756481154');" onmouseout="out('4033827775756481154');" style=""> 584      * @param spanX Horizontal cell span.                                                                </span>
<span class="-3449734233772247568" onmouseenter="enter('-3449734233772247568');" onmouseout="out('-3449734233772247568');" style=""> 585      * @param spanY Vertical cell span.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 586      *                                                                                                   </span>
<span class="-2520380867733543515" onmouseenter="enter('-2520380867733543515');" onmouseout="out('-2520380867733543515');" style=""> 587      * @return true if a vacant cell was found                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 588      */                                                                                                  </span>
<span class="-3795506891981893742" onmouseenter="enter('-3795506891981893742');" onmouseout="out('-3795506891981893742');" style=""> 589     public static boolean findVacantCell(int[] vacant, int spanX, int spanY,                             </span>
<span class="-8783446296633863064" onmouseenter="enter('-8783446296633863064');" onmouseout="out('-8783446296633863064');" style=""> 590             int xCount, int yCount, boolean[][] occupied) {                                              </span>
<span  style=""> 591                                                                                                          </span>
<span class="-4617149385103036509" onmouseenter="enter('-4617149385103036509');" onmouseout="out('-4617149385103036509');" style=""> 592         for (int y = 0; (y + spanY) &lt;= yCount; y++) {                                                    </span>
<span class="-2519246593487215950" onmouseenter="enter('-2519246593487215950');" onmouseout="out('-2519246593487215950');" style=""> 593             for (int x = 0; (x + spanX) &lt;= xCount; x++) {                                                </span>
<span class="-6044475844747713215" onmouseenter="enter('-6044475844747713215');" onmouseout="out('-6044475844747713215');" style=""> 594                 boolean available = !occupied[x][y];                                                     </span>
<span class="-4926761125313010055" onmouseenter="enter('-4926761125313010055');" onmouseout="out('-4926761125313010055');" style=""> 595                 out:            for (int i = x; i &lt; x + spanX; i++) {                                    </span>
<span class="6140954715248440627" onmouseenter="enter('6140954715248440627');" onmouseout="out('6140954715248440627');" style=""> 596                     for (int j = y; j &lt; y + spanY; j++) {                                                </span>
<span class="-4206239266210524684" onmouseenter="enter('-4206239266210524684');" onmouseout="out('-4206239266210524684');" style=""> 597                         available = available &amp;&amp; !occupied[i][j];                                        </span>
<span class="6135105910559606383" onmouseenter="enter('6135105910559606383');" onmouseout="out('6135105910559606383');" style=""> 598                         if (!available) break out;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600                 }                                                                                        </span>
<span  style=""> 601                                                                                                          </span>
<span class="-6409233339093248287" onmouseenter="enter('-6409233339093248287');" onmouseout="out('-6409233339093248287');" style=""> 602                 if (available) {                                                                         </span>
<span class="-5516420008230606067" onmouseenter="enter('-5516420008230606067');" onmouseout="out('-5516420008230606067');" style=""> 603                     vacant[0] = x;                                                                       </span>
<span class="-8126960887413790406" onmouseenter="enter('-8126960887413790406');" onmouseout="out('-8126960887413790406');" style=""> 604                     vacant[1] = y;                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 605                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608         }                                                                                                </span>
<span  style=""> 609                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 610         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611     }                                                                                                    </span>
<span  style=""> 612                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 613     /**                                                                                                  </span>
<span class="8016895904140865359" onmouseenter="enter('8016895904140865359');" onmouseout="out('8016895904140865359');" style=""> 614      * Trims the string, removing all whitespace at the beginning and end of the string.                 </span>
<span class="-5493577797153084569" onmouseenter="enter('-5493577797153084569');" onmouseout="out('-5493577797153084569');" style=""> 615      * Non-breaking whitespaces are also removed.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 616      */                                                                                                  </span>
<span class="-2226334911462083775" onmouseenter="enter('-2226334911462083775');" onmouseout="out('-2226334911462083775');" style=""> 617     public static String trim(CharSequence s) {                                                          </span>
<span class="8207541066373211073" onmouseenter="enter('8207541066373211073');" onmouseout="out('8207541066373211073');" style=""> 618         if (s == null) {                                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 619             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620         }                                                                                                </span>
<span  style=""> 621                                                                                                          </span>
<span class="6752452014249628571" onmouseenter="enter('6752452014249628571');" onmouseout="out('6752452014249628571');" style=""> 622         // Just strip any sequence of whitespace or java space characters from the beginning and end     </span>
<span class="5219283686268968354" onmouseenter="enter('5219283686268968354');" onmouseout="out('5219283686268968354');" style=""> 623         Matcher m = sTrimPattern.matcher(s);                                                             </span>
<span class="-3983369353860878309" onmouseenter="enter('-3983369353860878309');" onmouseout="out('-3983369353860878309');" style=""> 624         return m.replaceAll(&quot;$1&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625     }                                                                                                    </span>
<span  style=""> 626                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 627     /**                                                                                                  </span>
<span class="-2988865143176305923" onmouseenter="enter('-2988865143176305923');" onmouseout="out('-2988865143176305923');" style=""> 628      * Calculates the height of a given string at a specific text size.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 629      */                                                                                                  </span>
<span class="3237069305992905572" onmouseenter="enter('3237069305992905572');" onmouseout="out('3237069305992905572');" style=""> 630     public static float calculateTextHeight(float textSizePx) {                                          </span>
<span class="1999028099572700086" onmouseenter="enter('1999028099572700086');" onmouseout="out('1999028099572700086');" style=""> 631         Paint p = new Paint();                                                                           </span>
<span class="917273269030490193" onmouseenter="enter('917273269030490193');" onmouseout="out('917273269030490193');" style=""> 632         p.setTextSize(textSizePx);                                                                       </span>
<span class="-8241169586934208490" onmouseenter="enter('-8241169586934208490');" onmouseout="out('-8241169586934208490');" style=""> 633         Paint.FontMetrics fm = p.getFontMetrics();                                                       </span>
<span class="-1517506744254696060" onmouseenter="enter('-1517506744254696060');" onmouseout="out('-1517506744254696060');" style=""> 634         return -fm.top + fm.bottom;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635     }                                                                                                    </span>
<span  style=""> 636                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 637     /**                                                                                                  </span>
<span class="6448536046662163494" onmouseenter="enter('6448536046662163494');" onmouseout="out('6448536046662163494');" style=""> 638      * Convenience println with multiple args.                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 639      */                                                                                                  </span>
<span class="-3661024453027515051" onmouseenter="enter('-3661024453027515051');" onmouseout="out('-3661024453027515051');" style=""> 640     public static void println(String key, Object... args) {                                             </span>
<span class="4224744888489149041" onmouseenter="enter('4224744888489149041');" onmouseout="out('4224744888489149041');" style=""> 641         StringBuilder b = new StringBuilder();                                                           </span>
<span class="-6494571071398948190" onmouseenter="enter('-6494571071398948190');" onmouseout="out('-6494571071398948190');" style=""> 642         b.append(key);                                                                                   </span>
<span class="3149522492802233976" onmouseenter="enter('3149522492802233976');" onmouseout="out('3149522492802233976');" style=""> 643         b.append(&quot;: &quot;);                                                                                  </span>
<span class="-3867183354633138218" onmouseenter="enter('-3867183354633138218');" onmouseout="out('-3867183354633138218');" style=""> 644         boolean isFirstArgument = true;                                                                  </span>
<span class="4930952806349292087" onmouseenter="enter('4930952806349292087');" onmouseout="out('4930952806349292087');" style=""> 645         for (Object arg : args) {                                                                        </span>
<span class="2611054600934311831" onmouseenter="enter('2611054600934311831');" onmouseout="out('2611054600934311831');" style=""> 646             if (isFirstArgument) {                                                                       </span>
<span class="-7008608319651418815" onmouseenter="enter('-7008608319651418815');" onmouseout="out('-7008608319651418815');" style=""> 647                 isFirstArgument = false;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 648             } else {                                                                                     </span>
<span class="7277933927684441937" onmouseenter="enter('7277933927684441937');" onmouseout="out('7277933927684441937');" style=""> 649                 b.append(&quot;, &quot;);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650             }                                                                                            </span>
<span class="-6918144193114510" onmouseenter="enter('-6918144193114510');" onmouseout="out('-6918144193114510');" style=""> 651             b.append(arg);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652         }                                                                                                </span>
<span class="6306736576653323559" onmouseenter="enter('6306736576653323559');" onmouseout="out('6306736576653323559');" style=""> 653         System.out.println(b.toString());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654     }                                                                                                    </span>
<span  style=""> 655                                                                                                          </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 656     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="6706641044237115049" onmouseenter="enter('6706641044237115049');" onmouseout="out('6706641044237115049');" style=""> 657     public static boolean isRtl(Resources res) {                                                         </span>
<span class="-3807300280994787598" onmouseenter="enter('-3807300280994787598');" onmouseout="out('-3807300280994787598');" style=""> 658         return (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &amp;&amp;                          </span>
<span class="-6381041904087975678" onmouseenter="enter('-6381041904087975678');" onmouseout="out('-6381041904087975678');" style=""> 659                 (res.getConfiguration().getLayoutDirection() == View.LAYOUT_DIRECTION_RTL);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660     }                                                                                                    </span>
<span  style=""> 661                                                                                                          </span>
<span class="7745027086805008166" onmouseenter="enter('7745027086805008166');" onmouseout="out('7745027086805008166');" style=""> 662     public static void assertWorkerThread() {                                                            </span>
<span class="9134597883085590362" onmouseenter="enter('9134597883085590362');" onmouseout="out('9134597883085590362');" style=""> 663         if (LauncherAppState.isDogfoodBuild() &amp;&amp;                                                         </span>
<span class="-6981789448421478045" onmouseenter="enter('-6981789448421478045');" onmouseout="out('-6981789448421478045');" style=""> 664                 (LauncherModel.sWorkerThread.getThreadId() != Process.myTid())) {                        </span>
<span class="9035044908675802484" onmouseenter="enter('9035044908675802484');" onmouseout="out('9035044908675802484');" style=""> 665             throw new IllegalStateException();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667     }                                                                                                    </span>
<span  style=""> 668                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 669     /**                                                                                                  </span>
<span class="-1474801224471826037" onmouseenter="enter('-1474801224471826037');" onmouseout="out('-1474801224471826037');" style=""> 670      * Returns true if the intent is a valid launch intent for a launcher activity of an app.            </span>
<span class="6585786963246605309" onmouseenter="enter('6585786963246605309');" onmouseout="out('6585786963246605309');" style=""> 671      * This is used to identify shortcuts which are different from the ones exposed by the               </span>
<span class="-4023082809467763476" onmouseenter="enter('-4023082809467763476');" onmouseout="out('-4023082809467763476');" style=""> 672      * applications&#x27; manifest file.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 673      *                                                                                                   </span>
<span class="-450668369620467316" onmouseenter="enter('-450668369620467316');" onmouseout="out('-450668369620467316');" style=""> 674      * @param launchIntent The intent that will be launched when the shortcut is clicked.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 675      */                                                                                                  </span>
<span class="-2895511923085128680" onmouseenter="enter('-2895511923085128680');" onmouseout="out('-2895511923085128680');" style=""> 676     public static boolean isLauncherAppTarget(Intent launchIntent) {                                     </span>
<span class="-2387975119110806937" onmouseenter="enter('-2387975119110806937');" onmouseout="out('-2387975119110806937');" style=""> 677         if (launchIntent != null                                                                         </span>
<span class="5458468825391823724" onmouseenter="enter('5458468825391823724');" onmouseout="out('5458468825391823724');" style=""> 678                 &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())                                   </span>
<span class="-8557547063293546194" onmouseenter="enter('-8557547063293546194');" onmouseout="out('-8557547063293546194');" style=""> 679                 &amp;&amp; launchIntent.getComponent() != null                                                   </span>
<span class="1111365987588044694" onmouseenter="enter('1111365987588044694');" onmouseout="out('1111365987588044694');" style=""> 680                 &amp;&amp; launchIntent.getCategories() != null                                                  </span>
<span class="8511800567412215627" onmouseenter="enter('8511800567412215627');" onmouseout="out('8511800567412215627');" style=""> 681                 &amp;&amp; launchIntent.getCategories().size() == 1                                              </span>
<span class="674036002274441191" onmouseenter="enter('674036002274441191');" onmouseout="out('674036002274441191');" style=""> 682                 &amp;&amp; launchIntent.hasCategory(Intent.CATEGORY_LAUNCHER)                                    </span>
<span class="3608633544114930920" onmouseenter="enter('3608633544114930920');" onmouseout="out('3608633544114930920');" style=""> 683                 &amp;&amp; TextUtils.isEmpty(launchIntent.getDataString())) {                                    </span>
<span class="-8928317571259330246" onmouseenter="enter('-8928317571259330246');" onmouseout="out('-8928317571259330246');" style=""> 684             // An app target can either have no extra or have ItemInfo.EXTRA_PROFILE.                    </span>
<span class="-7448063824548237845" onmouseenter="enter('-7448063824548237845');" onmouseout="out('-7448063824548237845');" style=""> 685             Bundle extras = launchIntent.getExtras();                                                    </span>
<span class="3231714309982698113" onmouseenter="enter('3231714309982698113');" onmouseout="out('3231714309982698113');" style=""> 686             if (extras == null) {                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 687                 return true;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 688             } else {                                                                                     </span>
<span class="-5848873234981662305" onmouseenter="enter('-5848873234981662305');" onmouseout="out('-5848873234981662305');" style=""> 689                 Set&lt;String&gt; keys = extras.keySet();                                                      </span>
<span class="-5856689159284471907" onmouseenter="enter('-5856689159284471907');" onmouseout="out('-5856689159284471907');" style=""> 690                 return keys.size() == 1 &amp;&amp; keys.contains(ItemInfo.EXTRA_PROFILE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 692         };                                                                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 693         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694     }                                                                                                    </span>
<span  style=""> 695                                                                                                          </span>
<span class="6672516174829348824" onmouseenter="enter('6672516174829348824');" onmouseout="out('6672516174829348824');" style=""> 696     public static float dpiFromPx(int size, DisplayMetrics metrics){                                     </span>
<span class="1954388547550632323" onmouseenter="enter('1954388547550632323');" onmouseout="out('1954388547550632323');" style=""> 697         float densityRatio = (float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT;                </span>
<span class="6040406764349731403" onmouseenter="enter('6040406764349731403');" onmouseout="out('6040406764349731403');" style=""> 698         return (size / densityRatio);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699     }                                                                                                    </span>
<span class="4669549645205847924" onmouseenter="enter('4669549645205847924');" onmouseout="out('4669549645205847924');" style=""> 700     public static int pxFromDp(float size, DisplayMetrics metrics) {                                     </span>
<span class="-6600010791620633138" onmouseenter="enter('-6600010791620633138');" onmouseout="out('-6600010791620633138');" style=""> 701         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,                   </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 702                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703     }                                                                                                    </span>
<span class="8174843599380599011" onmouseenter="enter('8174843599380599011');" onmouseout="out('8174843599380599011');" style=""> 704     public static int pxFromSp(float size, DisplayMetrics metrics) {                                     </span>
<span class="3954369763209540394" onmouseenter="enter('3954369763209540394');" onmouseout="out('3954369763209540394');" style=""> 705         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP,                    </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 706                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707     }                                                                                                    </span>
<span  style=""> 708                                                                                                          </span>
<span class="8396926495000728032" onmouseenter="enter('8396926495000728032');" onmouseout="out('8396926495000728032');" style=""> 709     public static String createDbSelectionQuery(String columnName, Iterable&lt;?&gt; values) {                 </span>
<span class="-9051894453369877823" onmouseenter="enter('-9051894453369877823');" onmouseout="out('-9051894453369877823');" style=""> 710         return String.format(Locale.ENGLISH, &quot;%s IN (%s)&quot;, columnName, TextUtils.join(&quot;, &quot;, values));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712 }                                                                                                        </span>



























</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  18 import android.annotation.TargetApi;                                                                     </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  19 import android.app.Activity;                                                                             </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  20 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  21 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  22 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  23 import android.content.ActivityNotFoundException;                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  24 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  25 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  26 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  27 import android.content.SharedPreferences;                                                                </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  28 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  29 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  30 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  31 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  32 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  33 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  34 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  35 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  36 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  37 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  38 import android.graphics.Color;                                                                           </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  39 import android.graphics.Matrix;                                                                          </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  40 import android.graphics.Paint;                                                                           </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  41 import android.graphics.PaintFlagsDrawFilter;                                                            </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  42 import android.graphics.Rect;                                                                            </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  43 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  44 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  45 import android.graphics.drawable.PaintDrawable;                                                          </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  46 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  47 import android.os.Bundle;                                                                                </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  48 import android.os.Process;                                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  49 import android.text.TextUtils;                                                                           </span>
<span class="-8138675088784084481" onmouseenter="enter('-8138675088784084481');" onmouseout="out('-8138675088784084481');" style="">  50 import android.util.DisplayMetrics;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  51 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  52 import android.util.Pair;                                                                                </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  53 import android.util.SparseArray;                                                                         </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  54 import android.util.TypedValue;                                                                          </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  55 import android.view.View;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  56 import android.widget.Toast;                                                                             </span>
<span class="9184227348967602043" onmouseenter="enter('9184227348967602043');" onmouseout="out('9184227348967602043');" style="">  57 import java.io.ByteArrayOutputStream;                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  58 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  59 import java.util.ArrayList;                                                                              </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  60 import java.util.Locale;                                                                                 </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  61 import java.util.Set;                                                                                    </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  62 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  63 import java.util.regex.Pattern;                                                                          </span>
<span  style="">  64                                                                                                          </span>
<span  style="">  65                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  66 /**                                                                                                      </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  67  * Various utilities shared amongst the Launcher&#x27;s classes.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68  */                                                                                                      </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  69 public final class Utilities {                                                                           </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  70     private static final String TAG = &quot;Launcher.Utilities&quot;;                                              </span>
<span  style="">  71                                                                                                          </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  72     private static final Rect sOldBounds = new Rect();                                                   </span>
<span  style="">  73                                                                                                          </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  74     private static final Canvas sCanvas = new Canvas();                                                  </span>
<span  style="">  75                                                                                                          </span>
<span class="8414727404735327230" onmouseenter="enter('8414727404735327230');" onmouseout="out('8414727404735327230');" style=""><abbr title="  76     private static final Pattern sTrimPattern = Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{javaSpaceChar}]*$&quot;);">  76     private static final Pattern sTrimPattern = Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{j</abbr></span>
<span  style="">  77                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  78     static {                                                                                             </span>
<span class="2243904178974373005" onmouseenter="enter('2243904178974373005');" onmouseout="out('2243904178974373005');" style="">  79         sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG, Paint.FILTER_BITMAP_FLAG));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80     }                                                                                                    </span>
<span  style="">  81                                                                                                          </span>
<span class="1883998753051363106" onmouseenter="enter('1883998753051363106');" onmouseout="out('1883998753051363106');" style="">  82     static int[] sColors = new int[]{ 0xffff0000, 0xff00ff00, 0xff0000ff };                              </span>
<span  style="">  83                                                                                                          </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  84     static int sColorIndex = 0;                                                                          </span>
<span  style="">  85                                                                                                          </span>
<span class="8969639251951816674" onmouseenter="enter('8969639251951816674');" onmouseout="out('8969639251951816674');" style="">  86     private static final int[] sLoc0 = new int[2];                                                       </span>
<span  style="">  87                                                                                                          </span>
<span class="-5113691339331042282" onmouseenter="enter('-5113691339331042282');" onmouseout="out('-5113691339331042282');" style="">  88     private static final int[] sLoc1 = new int[2];                                                       </span>
<span  style="">  89                                                                                                          </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  90     // To turn on these properties, type                                                                 </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  91     // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                      </span>
<span class="7534360217793993844" onmouseenter="enter('7534360217793993844');" onmouseout="out('7534360217793993844');" style="">  92     private static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                </span>
<span  style="">  93                                                                                                          </span>
<span class="6438249582362651183" onmouseenter="enter('6438249582362651183');" onmouseout="out('6438249582362651183');" style="">  94     private static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);     </span>
<span  style="">  95                                                                                                          </span>
<span class="-9073580014282388493" onmouseenter="enter('-9073580014282388493');" onmouseout="out('-9073580014282388493');" style="">  96     public static final String ALLOW_ROTATION_PREFERENCE_KEY = &quot;pref_allowRotation&quot;;                     </span>
<span  style="">  97                                                                                                          </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style="">  98     public static boolean isPropertyEnabled(String propertyName) {                                       </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style="">  99         return Log.isLoggable(propertyName, Log.VERBOSE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100     }                                                                                                    </span>
<span  style=""> 101                                                                                                          </span>
<span class="6478873371162606731" onmouseenter="enter('6478873371162606731');" onmouseout="out('6478873371162606731');" style=""> 102     public static boolean isAllowRotationPrefEnabled(Context context, boolean multiProcess) {            </span>
<span class="-8879412681078655479" onmouseenter="enter('-8879412681078655479');" onmouseout="out('-8879412681078655479');" style=""><abbr title=" 103         SharedPreferences sharedPrefs = context.getSharedPreferences(LauncherAppState.getSharedPreferencesKey(), Context.MODE_PRIVATE | (multiProcess ? Context.MODE_MULTI_PROCESS : 0));"> 103         SharedPreferences sharedPrefs = context.getSharedPreferences(LauncherAppState.getSharedPreference</abbr></span>
<span class="-8841982816110512528" onmouseenter="enter('-8841982816110512528');" onmouseout="out('-8841982816110512528');" style=""> 104         boolean allowRotationPref = sharedPrefs.getBoolean(ALLOW_ROTATION_PREFERENCE_KEY, false);        </span>
<span class="-8131727064279733470" onmouseenter="enter('-8131727064279733470');" onmouseout="out('-8131727064279733470');" style=""> 105         return sForceEnableRotation || allowRotationPref;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106     }                                                                                                    </span>
<span  style=""> 107                                                                                                          </span>
<span class="-6499659450313544780" onmouseenter="enter('-6499659450313544780');" onmouseout="out('-6499659450313544780');" style=""> 108     public static boolean isRotationAllowedForDevice(Context context) {                                  </span>
<span class="-1687812256733097905" onmouseenter="enter('-1687812256733097905');" onmouseout="out('-1687812256733097905');" style=""> 109         return sForceEnableRotation || context.getResources().getBoolean(R.bool.allow_rotation);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110     }                                                                                                    </span>
<span  style=""> 111                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 112     /**                                                                                                  </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 113      * Indicates if the device is running LMP or higher.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 114      */                                                                                                  </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 115     public static boolean isLmpOrAbove() {                                                               </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style=""> 116         return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117     }                                                                                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="8267304412893954240" onmouseenter="enter('8267304412893954240');" onmouseout="out('8267304412893954240');" style=""> 119     public static boolean isLmpMR1OrAbove() {                                                            </span>
<span class="-198173616463930288" onmouseenter="enter('-198173616463930288');" onmouseout="out('-198173616463930288');" style=""> 120         // TODO(adamcohen): update to Build.VERSION_CODES.LOLLIPOP_MR1 once building against 22;         </span>
<span class="2386615924650555298" onmouseenter="enter('2386615924650555298');" onmouseout="out('2386615924650555298');" style=""> 121         return Build.VERSION.SDK_INT &gt;= 22;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122     }                                                                                                    </span>
<span  style=""> 123                                                                                                          </span>
<span class="-8604735062489042646" onmouseenter="enter('-8604735062489042646');" onmouseout="out('-8604735062489042646');" style=""> 124     public static boolean isLmpMR1() {                                                                   </span>
<span class="-198173616463930288" onmouseenter="enter('-198173616463930288');" onmouseout="out('-198173616463930288');" style=""> 125         // TODO(adamcohen): update to Build.VERSION_CODES.LOLLIPOP_MR1 once building against 22;         </span>
<span class="-3182404196161427649" onmouseenter="enter('-3182404196161427649');" onmouseout="out('-3182404196161427649');" style=""> 126         return Build.VERSION.SDK_INT == 22;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127     }                                                                                                    </span>
<span  style=""> 128                                                                                                          </span>
<span class="8062060252944903878" onmouseenter="enter('8062060252944903878');" onmouseout="out('8062060252944903878');" style=""> 129     public static Bitmap createIconBitmap(Cursor c, int iconIndex, Context context) {                    </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style=""> 130         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 131         try {                                                                                            </span>
<span class="-6494522703644265462" onmouseenter="enter('-6494522703644265462');" onmouseout="out('-6494522703644265462');" style=""> 132             return createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);       </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 133         } catch (java.lang.Exception e) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 134             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136     }                                                                                                    </span>
<span  style=""> 137                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 138     /**                                                                                                  </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 139      * Returns a bitmap suitable for the all apps view. If the package or the resource do not            </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 140      * exist, it returns null.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 141      */                                                                                                  </span>
<span class="-879874458091961500" onmouseenter="enter('-879874458091961500');" onmouseout="out('-879874458091961500');" style=""> 142     public static Bitmap createIconBitmap(String packageName, String resourceName, Context context) {    </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 143         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 144         // the resource                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 145         try {                                                                                            </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 146             Resources resources = packageManager.getResourcesForApplication(packageName);                </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 147             if (resources != null) {                                                                     </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 148                 final int id = resources.getIdentifier(resourceName, null, null);                        </span>
<span class="4039499790490274412" onmouseenter="enter('4039499790490274412');" onmouseout="out('4039499790490274412');" style=""><abbr title=" 149                 return createIconBitmap(resources.getDrawableForDensity(id, LauncherAppState.getInstance().getInvariantDeviceProfile().fillResIconDpi), context);"> 149                 return createIconBitmap(resources.getDrawableForDensity(id, LauncherAppState.getInstance(</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 151         } catch (java.lang.Exception e) {                                                                </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 152             // Icon not found.                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 154         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span  style=""> 156                                                                                                          </span>
<span class="-1980149402827349938" onmouseenter="enter('-1980149402827349938');" onmouseout="out('-1980149402827349938');" style=""> 157     private static int getIconBitmapSize() {                                                             </span>
<span class="-796645866027437773" onmouseenter="enter('-796645866027437773');" onmouseout="out('-796645866027437773');" style=""> 158         return LauncherAppState.getInstance().getInvariantDeviceProfile().iconBitmapSize;                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159     }                                                                                                    </span>
<span  style=""> 160                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 161     /**                                                                                                  </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 162      * Returns a bitmap which is of the appropriate size to be displayed as an icon                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 163      */                                                                                                  </span>
<span class="-2529226303201089113" onmouseenter="enter('-2529226303201089113');" onmouseout="out('-2529226303201089113');" style=""> 164     public static Bitmap createIconBitmap(Bitmap icon, Context context) {                                </span>
<span class="-812758491164557381" onmouseenter="enter('-812758491164557381');" onmouseout="out('-812758491164557381');" style=""> 165         final int iconBitmapSize = getIconBitmapSize();                                                  </span>
<span class="496256803443453525" onmouseenter="enter('496256803443453525');" onmouseout="out('496256803443453525');" style=""> 166         if ((iconBitmapSize == icon.getWidth()) &amp;&amp; (iconBitmapSize == icon.getHeight())) {               </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 167             return icon;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168         }                                                                                                </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 169         return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170     }                                                                                                    </span>
<span  style=""> 171                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 172     /**                                                                                                  </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 173      * Returns a bitmap suitable for the all apps view.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 174      */                                                                                                  </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 175     public static Bitmap createIconBitmap(Drawable icon, Context context) {                              </span>
<span class="-3654763869996466058" onmouseenter="enter('-3654763869996466058');" onmouseout="out('-3654763869996466058');" style=""> 176         synchronized(sCanvas) {                                                                          </span>
<span class="-812758491164557381" onmouseenter="enter('-812758491164557381');" onmouseout="out('-812758491164557381');" style=""> 177             final int iconBitmapSize = getIconBitmapSize();                                              </span>
<span class="-8808586281723900088" onmouseenter="enter('-8808586281723900088');" onmouseout="out('-8808586281723900088');" style=""> 178             int width = iconBitmapSize;                                                                  </span>
<span class="-4976368659165838766" onmouseenter="enter('-4976368659165838766');" onmouseout="out('-4976368659165838766');" style=""> 179             int height = iconBitmapSize;                                                                 </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 180             if (icon instanceof PaintDrawable) {                                                         </span>
<span class="-3136201580244881753" onmouseenter="enter('-3136201580244881753');" onmouseout="out('-3136201580244881753');" style=""> 181                 PaintDrawable painter = ((PaintDrawable) (icon));                                        </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 182                 painter.setIntrinsicWidth(width);                                                        </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 183                 painter.setIntrinsicHeight(height);                                                      </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 184             } else if (icon instanceof BitmapDrawable) {                                                 </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 185                 // Ensure the bitmap has a density.                                                      </span>
<span class="-6578207913347105008" onmouseenter="enter('-6578207913347105008');" onmouseout="out('-6578207913347105008');" style=""> 186                 BitmapDrawable bitmapDrawable = ((BitmapDrawable) (icon));                               </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 187                 Bitmap bitmap = bitmapDrawable.getBitmap();                                              </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 188                 if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                        </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 189                     bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191             }                                                                                            </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 192             int sourceWidth = icon.getIntrinsicWidth();                                                  </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 193             int sourceHeight = icon.getIntrinsicHeight();                                                </span>
<span class="6484265869965731162" onmouseenter="enter('6484265869965731162');" onmouseout="out('6484265869965731162');" style=""> 194             if ((sourceWidth &gt; 0) &amp;&amp; (sourceHeight &gt; 0)) {                                               </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 195                 // Scale the icon proportionally to the icon dimensions                                  </span>
<span class="1224003935045982764" onmouseenter="enter('1224003935045982764');" onmouseout="out('1224003935045982764');" style=""> 196                 final float ratio = ((float) (sourceWidth)) / sourceHeight;                              </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 197                 if (sourceWidth &gt; sourceHeight) {                                                        </span>
<span class="-3608455334173452612" onmouseenter="enter('-3608455334173452612');" onmouseout="out('-3608455334173452612');" style=""> 198                     height = ((int) (width / ratio));                                                    </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 199                 } else if (sourceHeight &gt; sourceWidth) {                                                 </span>
<span class="-7486077696428285547" onmouseenter="enter('-7486077696428285547');" onmouseout="out('-7486077696428285547');" style=""> 200                     width = ((int) (height * ratio));                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202             }                                                                                            </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 203             // no intrinsic size --&gt; use default size                                                    </span>
<span class="-8413870914199027407" onmouseenter="enter('-8413870914199027407');" onmouseout="out('-8413870914199027407');" style=""> 204             int textureWidth = iconBitmapSize;                                                           </span>
<span class="-1351255372366243626" onmouseenter="enter('-1351255372366243626');" onmouseout="out('-1351255372366243626');" style=""> 205             int textureHeight = iconBitmapSize;                                                          </span>
<span class="7971888243878270999" onmouseenter="enter('7971888243878270999');" onmouseout="out('7971888243878270999');" style=""><abbr title=" 206             final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight, Bitmap.Config.ARGB_8888);"> 206             final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight, Bitmap.Config.ARGB_888</abbr></span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 207             final Canvas canvas = sCanvas;                                                               </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 208             canvas.setBitmap(bitmap);                                                                    </span>
<span class="-6766229454939421726" onmouseenter="enter('-6766229454939421726');" onmouseout="out('-6766229454939421726');" style=""> 209             final int left = (textureWidth - width) / 2;                                                 </span>
<span class="7086648265397315323" onmouseenter="enter('7086648265397315323');" onmouseout="out('7086648265397315323');" style=""> 210             final int top = (textureHeight - height) / 2;                                                </span>
<span class="-7344880688543478232" onmouseenter="enter('-7344880688543478232');" onmouseout="out('-7344880688543478232');" style=""> 211             // suppress dead code warning                                                                </span>
<span class="254779087173488622" onmouseenter="enter('254779087173488622');" onmouseout="out('254779087173488622');" style=""> 212             @SuppressWarnings(&quot;all&quot;)                                                                     </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 213             final boolean debug = false;                                                                 </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 214             if (debug) {                                                                                 </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 215                 // draw a big box for the icon for debugging                                             </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 216                 canvas.drawColor(sColors[sColorIndex]);                                                  </span>
<span class="9164170621587473104" onmouseenter="enter('9164170621587473104');" onmouseout="out('9164170621587473104');" style=""> 217                 if ((++sColorIndex) &gt;= Utilities.sColors.length) {                                       </span>
<span class="-3860661745776418750" onmouseenter="enter('-3860661745776418750');" onmouseout="out('-3860661745776418750');" style=""> 218                     sColorIndex = 0;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219                 }                                                                                        </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 220                 Paint debugPaint = new Paint();                                                          </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 221                 debugPaint.setColor(0xffcccc00);                                                         </span>
<span class="7344358244153394852" onmouseenter="enter('7344358244153394852');" onmouseout="out('7344358244153394852');" style=""> 222                 canvas.drawRect(left, top, left + width, top + height, debugPaint);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223             }                                                                                            </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 224             sOldBounds.set(icon.getBounds());                                                            </span>
<span class="-2984491198112665401" onmouseenter="enter('-2984491198112665401');" onmouseout="out('-2984491198112665401');" style=""> 225             icon.setBounds(left, top, left + width, top + height);                                       </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 226             icon.draw(canvas);                                                                           </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 227             icon.setBounds(sOldBounds);                                                                  </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 228             canvas.setBitmap(null);                                                                      </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 229             return bitmap;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 233     /**                                                                                                  </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 234      * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s             </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 235      * coordinates.                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 236      *                                                                                                   </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 237      * @param descendant The descendant to which the passed coordinate is relative.                      </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 238      * @param root The root view to make the coordinates relative to.                                    </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 239      * @param coord The coordinate that we want mapped.                                                  </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 240      * @param includeRootScroll Whether or not to account for the scroll of the descendant:              </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 241      *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.            </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 242      * @return The factor by which this descendant is scaled relative to this DragLayer. Caution         </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 243      *         this scale factor is assumed to be equal in X and Y, and so if at any point this          </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 244      *         assumption fails, we will need to return a pair of scale factors.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 245      */                                                                                                  </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 246     public static float getDescendantCoordRelativeToParent(View descendant, View root,                   </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 247                                                            int[] coord, boolean includeRootScroll) {     </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 248         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 249                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 250         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 251                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 252         View v = descendant;                                                                             </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 253         while(v != root &amp;&amp; v != null) {                                                                  </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 254             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 255             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 257         ancestorChain.add(root);                                                                         </span>
<span  style=""> 258                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 259         float scale = 1.0f;                                                                              </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 260         int count = ancestorChain.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 261         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 262             View v0 = ancestorChain.get(i);                                                              </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 263             // For TextViews, scroll has a meaning which relates to the text position                    </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 264             // which is very strange... ignore the scroll.                                               </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 265             if (v0 != descendant || includeRootScroll) {                                                 </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 266                 pt[0] -= v0.getScrollX();                                                                </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 267                 pt[1] -= v0.getScrollY();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268             }                                                                                            </span>
<span  style=""> 269                                                                                                          </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 270             v0.getMatrix().mapPoints(pt);                                                                </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 271             pt[0] += v0.getLeft();                                                                       </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 272             pt[1] += v0.getTop();                                                                        </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 273             scale *= v0.getScaleX();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274         }                                                                                                </span>
<span  style=""> 275                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 276         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 277         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 278         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279     }                                                                                                    </span>
<span  style=""> 280                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 281     /**                                                                                                  </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 282      * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 283      */                                                                                                  </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 284     public static float mapCoordInSelfToDescendent(View descendant, View root,                           </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 285                                                    int[] coord) {                                        </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 286         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 287                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 288         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 289                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 290         View v = descendant;                                                                             </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 291         while(v != root) {                                                                               </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 292             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 293             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 295         ancestorChain.add(root);                                                                         </span>
<span  style=""> 296                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 297         float scale = 1.0f;                                                                              </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 298         Matrix inverse = new Matrix();                                                                   </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 299         int count = ancestorChain.size();                                                                </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 300         for (int i = count - 1; i &gt;= 0; i--) {                                                           </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 301             View ancestor = ancestorChain.get(i);                                                        </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 302             View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                           </span>
<span  style=""> 303                                                                                                          </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 304             pt[0] += ancestor.getScrollX();                                                              </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 305             pt[1] += ancestor.getScrollY();                                                              </span>
<span  style=""> 306                                                                                                          </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 307             if (next != null) {                                                                          </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 308                 pt[0] -= next.getLeft();                                                                 </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 309                 pt[1] -= next.getTop();                                                                  </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 310                 next.getMatrix().invert(inverse);                                                        </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 311                 inverse.mapPoints(pt);                                                                   </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 312                 scale *= next.getScaleX();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314         }                                                                                                </span>
<span  style=""> 315                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 316         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 317         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 318         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319     }                                                                                                    </span>
<span  style=""> 320                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 321     /**                                                                                                  </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 322      * Utility method to determine whether the given point, in local coordinates,                        </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 323      * is inside the view, where the area of the view is expanded by the slop factor.                    </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 324      * This method is called while processing touch-move events to determine if the event                </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 325      * is still within the view.                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 326      */                                                                                                  </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 327     public static boolean pointInView(View v, float localX, float localY, float slop) {                  </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 328         return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                   </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 329                 localY &lt; (v.getHeight() + slop);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330     }                                                                                                    </span>
<span  style=""> 331                                                                                                          </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 332     public static void scaleRect(Rect r, float scale) {                                                  </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 333         if (scale != 1.0f) {                                                                             </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 334             r.left = (int) (r.left * scale + 0.5f);                                                      </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 335             r.top = (int) (r.top * scale + 0.5f);                                                        </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 336             r.right = (int) (r.right * scale + 0.5f);                                                    </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 337             r.bottom = (int) (r.bottom * scale + 0.5f);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339     }                                                                                                    </span>
<span  style=""> 340                                                                                                          </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 341     public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                     </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 342         v0.getLocationInWindow(sLoc0);                                                                   </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 343         v1.getLocationInWindow(sLoc1);                                                                   </span>
<span  style=""> 344                                                                                                          </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 345         sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                        </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 346         sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                       </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 347         sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                        </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 348         sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                       </span>
<span  style=""> 349                                                                                                          </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 350         if (delta == null) {                                                                             </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 351             delta = new int[2];                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352         }                                                                                                </span>
<span  style=""> 353                                                                                                          </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 354         delta[0] = sLoc1[0] - sLoc0[0];                                                                  </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 355         delta[1] = sLoc1[1] - sLoc0[1];                                                                  </span>
<span  style=""> 356                                                                                                          </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 357         return delta;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358     }                                                                                                    </span>
<span  style=""> 359                                                                                                          </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 360     public static void scaleRectAboutCenter(Rect r, float scale) {                                       </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 361         int cx = r.centerX();                                                                            </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 362         int cy = r.centerY();                                                                            </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 363         r.offset(-cx, -cy);                                                                              </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 364         Utilities.scaleRect(r, scale);                                                                   </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 365         r.offset(cx, cy);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366     }                                                                                                    </span>
<span  style=""> 367                                                                                                          </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 368     public static void startActivityForResultSafely(                                                     </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 369             Activity activity, Intent intent, int requestCode) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 370         try {                                                                                            </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 371             activity.startActivityForResult(intent, requestCode);                                        </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 372         } catch (ActivityNotFoundException e) {                                                          </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 373             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 374         } catch (SecurityException e) {                                                                  </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 375             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 376             Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                     </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 377                     &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +       </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 378                     &quot;or use the exported attribute for this activity.&quot;, e);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380     }                                                                                                    </span>
<span  style=""> 381                                                                                                          </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 382     static boolean isSystemApp(Context context, Intent intent) {                                         </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 383         PackageManager pm = context.getPackageManager();                                                 </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 384         ComponentName cn = intent.getComponent();                                                        </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 385         String packageName = null;                                                                       </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 386         if (cn == null) {                                                                                </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 387             ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);            </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 388             if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                         </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 389                 packageName = info.activityInfo.packageName;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 391         } else {                                                                                         </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 392             packageName = cn.getPackageName();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393         }                                                                                                </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 394         if (packageName != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 395             try {                                                                                        </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 396                 PackageInfo info = pm.getPackageInfo(packageName, 0);                                    </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 397                 return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                               </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 398                         ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);               </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 399             } catch (NameNotFoundException e) {                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 400                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 402         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 403             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405     }                                                                                                    </span>
<span  style=""> 406                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 407     /**                                                                                                  </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 408      * This picks a dominant color, looking for high-saturation, high-value, repeated hues.              </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 409      * @param bitmap The bitmap to scan                                                                  </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 410      * @param samples The approximate max number of samples to use.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 411      */                                                                                                  </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 412     static int findDominantColorByHue(Bitmap bitmap, int samples) {                                      </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 413         final int height = bitmap.getHeight();                                                           </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 414         final int width = bitmap.getWidth();                                                             </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 415         int sampleStride = (int) Math.sqrt((height * width) / samples);                                  </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 416         if (sampleStride &lt; 1) {                                                                          </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 417             sampleStride = 1;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418         }                                                                                                </span>
<span  style=""> 419                                                                                                          </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 420         // This is an out-param, for getting the hsv values for an rgb                                   </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 421         float[] hsv = new float[3];                                                                      </span>
<span  style=""> 422                                                                                                          </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 423         // First get the best hue, by creating a histogram over 360 hue buckets,                         </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 424         // where each pixel contributes a score weighted by saturation, value, and alpha.                </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 425         float[] hueScoreHistogram = new float[360];                                                      </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 426         float highScore = -1;                                                                            </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 427         int bestHue = -1;                                                                                </span>
<span  style=""> 428                                                                                                          </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 429         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 430             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 431                 int argb = bitmap.getPixel(x, y);                                                        </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 432                 int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                         </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 433                 if (alpha &lt; 0x80) {                                                                      </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 434                     // Drop mostly-transparent pixels.                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 435                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436                 }                                                                                        </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 437                 // Remove the alpha channel.                                                             </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 438                 int rgb = argb | 0xFF000000;                                                             </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 439                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 440                 // Bucket colors by the 360 integer hues.                                                </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 441                 int hue = (int) hsv[0];                                                                  </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 442                 if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                        </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 443                     // Defensively avoid array bounds violations.                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 444                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445                 }                                                                                        </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 446                 float score = hsv[1] * hsv[2];                                                           </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 447                 hueScoreHistogram[hue] += score;                                                         </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 448                 if (hueScoreHistogram[hue] &gt; highScore) {                                                </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 449                     highScore = hueScoreHistogram[hue];                                                  </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 450                     bestHue = hue;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453         }                                                                                                </span>
<span  style=""> 454                                                                                                          </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 455         SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                         </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 456         int bestColor = 0xff000000;                                                                      </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 457         highScore = -1;                                                                                  </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 458         // Go back over the RGB colors that match the winning hue,                                       </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 459         // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                 </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 460         // The highest-scoring RGB color wins.                                                           </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 461         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 462             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 463                 int rgb = bitmap.getPixel(x, y) | 0xff000000;                                            </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 464                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 465                 int hue = (int) hsv[0];                                                                  </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 466                 if (hue == bestHue) {                                                                    </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 467                     float s = hsv[1];                                                                    </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 468                     float v = hsv[2];                                                                    </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 469                     int bucket = (int) (s * 100) + (int) (v * 10000);                                    </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 470                     // Score by cumulative saturation * value.                                           </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 471                     float score = s * v;                                                                 </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 472                     Float oldTotal = rgbScores.get(bucket);                                              </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 473                     float newTotal = oldTotal == null ? score : oldTotal + score;                        </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 474                     rgbScores.put(bucket, newTotal);                                                     </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 475                     if (newTotal &gt; highScore) {                                                          </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 476                         highScore = newTotal;                                                            </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 477                         // All the colors in the winning bucket are very similar. Last in wins.          </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 478                         bestColor = rgb;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482         }                                                                                                </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 483         return bestColor;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484     }                                                                                                    </span>
<span  style=""> 485                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 486     /*                                                                                                   </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 487      * Finds a system apk which had a broadcast receiver listening to a particular action.               </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 488      * @param action intent action used to find the apk                                                  </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 489      * @return a pair of apk package name and the resources.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 490      */                                                                                                  </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 491     static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                     </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 492         final Intent intent = new Intent(action);                                                        </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 493         for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                 </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 494             if (info.activityInfo != null &amp;&amp;                                                             </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 495                     (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {      </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 496                 final String packageName = info.activityInfo.packageName;                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 497                 try {                                                                                    </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 498                     final Resources res = pm.getResourcesForApplication(packageName);                    </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 499                     return Pair.create(packageName, res);                                                </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 500                 } catch (NameNotFoundException e) {                                                      </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 501                     Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 505         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506     }                                                                                                    </span>
<span  style=""> 507                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 508     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 509     public static boolean isViewAttachedToWindow(View v) {                                               </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 510         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                       </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 511             return v.isAttachedToWindow();                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 512         } else {                                                                                         </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 513             // A proxy call which returns null, if the view is not attached to the window.               </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 514             return v.getKeyDispatcherState() != null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516     }                                                                                                    </span>
<span  style=""> 517                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 518     /**                                                                                                  </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 519      * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}            </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 520      * provided by the same package which is set to be global search activity.                           </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 521      * If widgetCategory is not supported, or no such widget is found, returns the first widget          </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 522      * provided by the package.                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 523      */                                                                                                  </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 524     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 525     public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                       </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 526         SearchManager searchManager =                                                                    </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 527                 (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                        </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 528         ComponentName searchComponent = searchManager.getGlobalSearchActivity();                         </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 529         if (searchComponent == null) return null;                                                        </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 530         String providerPkg = searchComponent.getPackageName();                                           </span>
<span  style=""> 531                                                                                                          </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 532         AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                      </span>
<span  style=""> 533                                                                                                          </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 534         AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                       </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 535         for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                    </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 536             if (info.provider.getPackageName().equals(providerPkg)) {                                    </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 537                 if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                       </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 538                     if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {  </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 539                         return info;                                                                     </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 540                     } else if (defaultWidgetForSearchPackage == null) {                                  </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 541                         defaultWidgetForSearchPackage = info;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 543                 } else {                                                                                 </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 544                     return info;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547         }                                                                                                </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 548         return defaultWidgetForSearchPackage;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549     }                                                                                                    </span>
<span  style=""> 550                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 551     /**                                                                                                  </span>
<span class="2890018962810146332" onmouseenter="enter('2890018962810146332');" onmouseout="out('2890018962810146332');" style=""> 552      * Compresses the bitmap to a byte array for serialization.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 553      */                                                                                                  </span>
<span class="3132902726257736313" onmouseenter="enter('3132902726257736313');" onmouseout="out('3132902726257736313');" style=""> 554     public static byte[] flattenBitmap(Bitmap bitmap) {                                                  </span>
<span class="-3581949580601242936" onmouseenter="enter('-3581949580601242936');" onmouseout="out('-3581949580601242936');" style=""> 555         // Try go guesstimate how much space the icon will take when serialized                          </span>
<span class="6197194043750255949" onmouseenter="enter('6197194043750255949');" onmouseout="out('6197194043750255949');" style=""> 556         // to avoid unnecessary allocations/copies during the write.                                     </span>
<span class="-5093203174793348363" onmouseenter="enter('-5093203174793348363');" onmouseout="out('-5093203174793348363');" style=""> 557         int size = bitmap.getWidth() * bitmap.getHeight() * 4;                                           </span>
<span class="-8739450248327170568" onmouseenter="enter('-8739450248327170568');" onmouseout="out('-8739450248327170568');" style=""> 558         ByteArrayOutputStream out = new ByteArrayOutputStream(size);                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 559         try {                                                                                            </span>
<span class="-4781087380346520352" onmouseenter="enter('-4781087380346520352');" onmouseout="out('-4781087380346520352');" style=""> 560             bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);                                        </span>
<span class="1246699851317198176" onmouseenter="enter('1246699851317198176');" onmouseout="out('1246699851317198176');" style=""> 561             out.flush();                                                                                 </span>
<span class="5013182197958409712" onmouseenter="enter('5013182197958409712');" onmouseout="out('5013182197958409712');" style=""> 562             out.close();                                                                                 </span>
<span class="8673371338796072548" onmouseenter="enter('8673371338796072548');" onmouseout="out('8673371338796072548');" style=""> 563             return out.toByteArray();                                                                    </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 564         } catch (IOException e) {                                                                        </span>
<span class="7956524499064355744" onmouseenter="enter('7956524499064355744');" onmouseout="out('7956524499064355744');" style=""> 565             Log.w(TAG, &quot;Could not write bitmap&quot;);                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 566             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568     }                                                                                                    </span>
<span  style=""> 569                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 570     /**                                                                                                  </span>
<span class="-6588275908342394580" onmouseenter="enter('-6588275908342394580');" onmouseout="out('-6588275908342394580');" style=""> 571      * Find the first vacant cell, if there is one.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 572      *                                                                                                   </span>
<span class="2503255600921964703" onmouseenter="enter('2503255600921964703');" onmouseout="out('2503255600921964703');" style=""> 573      * @param vacant Holds the x and y coordinate of the vacant cell                                     </span>
<span class="4033827775756481154" onmouseenter="enter('4033827775756481154');" onmouseout="out('4033827775756481154');" style=""> 574      * @param spanX Horizontal cell span.                                                                </span>
<span class="-3449734233772247568" onmouseenter="enter('-3449734233772247568');" onmouseout="out('-3449734233772247568');" style=""> 575      * @param spanY Vertical cell span.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 576      *                                                                                                   </span>
<span class="-2520380867733543515" onmouseenter="enter('-2520380867733543515');" onmouseout="out('-2520380867733543515');" style=""> 577      * @return true if a vacant cell was found                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 578      */                                                                                                  </span>
<span class="-3795506891981893742" onmouseenter="enter('-3795506891981893742');" onmouseout="out('-3795506891981893742');" style=""> 579     public static boolean findVacantCell(int[] vacant, int spanX, int spanY,                             </span>
<span class="-8783446296633863064" onmouseenter="enter('-8783446296633863064');" onmouseout="out('-8783446296633863064');" style=""> 580             int xCount, int yCount, boolean[][] occupied) {                                              </span>
<span  style=""> 581                                                                                                          </span>
<span class="-4617149385103036509" onmouseenter="enter('-4617149385103036509');" onmouseout="out('-4617149385103036509');" style=""> 582         for (int y = 0; (y + spanY) &lt;= yCount; y++) {                                                    </span>
<span class="-2519246593487215950" onmouseenter="enter('-2519246593487215950');" onmouseout="out('-2519246593487215950');" style=""> 583             for (int x = 0; (x + spanX) &lt;= xCount; x++) {                                                </span>
<span class="-6044475844747713215" onmouseenter="enter('-6044475844747713215');" onmouseout="out('-6044475844747713215');" style=""> 584                 boolean available = !occupied[x][y];                                                     </span>
<span class="-4926761125313010055" onmouseenter="enter('-4926761125313010055');" onmouseout="out('-4926761125313010055');" style=""> 585                 out:            for (int i = x; i &lt; x + spanX; i++) {                                    </span>
<span class="6140954715248440627" onmouseenter="enter('6140954715248440627');" onmouseout="out('6140954715248440627');" style=""> 586                     for (int j = y; j &lt; y + spanY; j++) {                                                </span>
<span class="-4206239266210524684" onmouseenter="enter('-4206239266210524684');" onmouseout="out('-4206239266210524684');" style=""> 587                         available = available &amp;&amp; !occupied[i][j];                                        </span>
<span class="6135105910559606383" onmouseenter="enter('6135105910559606383');" onmouseout="out('6135105910559606383');" style=""> 588                         if (!available) break out;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590                 }                                                                                        </span>
<span  style=""> 591                                                                                                          </span>
<span class="-6409233339093248287" onmouseenter="enter('-6409233339093248287');" onmouseout="out('-6409233339093248287');" style=""> 592                 if (available) {                                                                         </span>
<span class="-5516420008230606067" onmouseenter="enter('-5516420008230606067');" onmouseout="out('-5516420008230606067');" style=""> 593                     vacant[0] = x;                                                                       </span>
<span class="-8126960887413790406" onmouseenter="enter('-8126960887413790406');" onmouseout="out('-8126960887413790406');" style=""> 594                     vacant[1] = y;                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 595                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598         }                                                                                                </span>
<span  style=""> 599                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 600         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601     }                                                                                                    </span>
<span  style=""> 602                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 603     /**                                                                                                  </span>
<span class="8016895904140865359" onmouseenter="enter('8016895904140865359');" onmouseout="out('8016895904140865359');" style=""> 604      * Trims the string, removing all whitespace at the beginning and end of the string.                 </span>
<span class="-5493577797153084569" onmouseenter="enter('-5493577797153084569');" onmouseout="out('-5493577797153084569');" style=""> 605      * Non-breaking whitespaces are also removed.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 606      */                                                                                                  </span>
<span class="-2226334911462083775" onmouseenter="enter('-2226334911462083775');" onmouseout="out('-2226334911462083775');" style=""> 607     public static String trim(CharSequence s) {                                                          </span>
<span class="8207541066373211073" onmouseenter="enter('8207541066373211073');" onmouseout="out('8207541066373211073');" style=""> 608         if (s == null) {                                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 609             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610         }                                                                                                </span>
<span  style=""> 611                                                                                                          </span>
<span class="6752452014249628571" onmouseenter="enter('6752452014249628571');" onmouseout="out('6752452014249628571');" style=""> 612         // Just strip any sequence of whitespace or java space characters from the beginning and end     </span>
<span class="5219283686268968354" onmouseenter="enter('5219283686268968354');" onmouseout="out('5219283686268968354');" style=""> 613         Matcher m = sTrimPattern.matcher(s);                                                             </span>
<span class="-3983369353860878309" onmouseenter="enter('-3983369353860878309');" onmouseout="out('-3983369353860878309');" style=""> 614         return m.replaceAll(&quot;$1&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615     }                                                                                                    </span>
<span  style=""> 616                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 617     /**                                                                                                  </span>
<span class="-2988865143176305923" onmouseenter="enter('-2988865143176305923');" onmouseout="out('-2988865143176305923');" style=""> 618      * Calculates the height of a given string at a specific text size.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 619      */                                                                                                  </span>
<span class="3237069305992905572" onmouseenter="enter('3237069305992905572');" onmouseout="out('3237069305992905572');" style=""> 620     public static float calculateTextHeight(float textSizePx) {                                          </span>
<span class="1999028099572700086" onmouseenter="enter('1999028099572700086');" onmouseout="out('1999028099572700086');" style=""> 621         Paint p = new Paint();                                                                           </span>
<span class="917273269030490193" onmouseenter="enter('917273269030490193');" onmouseout="out('917273269030490193');" style=""> 622         p.setTextSize(textSizePx);                                                                       </span>
<span class="-8241169586934208490" onmouseenter="enter('-8241169586934208490');" onmouseout="out('-8241169586934208490');" style=""> 623         Paint.FontMetrics fm = p.getFontMetrics();                                                       </span>
<span class="-1517506744254696060" onmouseenter="enter('-1517506744254696060');" onmouseout="out('-1517506744254696060');" style=""> 624         return -fm.top + fm.bottom;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625     }                                                                                                    </span>
<span  style=""> 626                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 627     /**                                                                                                  </span>
<span class="6448536046662163494" onmouseenter="enter('6448536046662163494');" onmouseout="out('6448536046662163494');" style=""> 628      * Convenience println with multiple args.                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 629      */                                                                                                  </span>
<span class="-3661024453027515051" onmouseenter="enter('-3661024453027515051');" onmouseout="out('-3661024453027515051');" style=""> 630     public static void println(String key, Object... args) {                                             </span>
<span class="4224744888489149041" onmouseenter="enter('4224744888489149041');" onmouseout="out('4224744888489149041');" style=""> 631         StringBuilder b = new StringBuilder();                                                           </span>
<span class="-6494571071398948190" onmouseenter="enter('-6494571071398948190');" onmouseout="out('-6494571071398948190');" style=""> 632         b.append(key);                                                                                   </span>
<span class="3149522492802233976" onmouseenter="enter('3149522492802233976');" onmouseout="out('3149522492802233976');" style=""> 633         b.append(&quot;: &quot;);                                                                                  </span>
<span class="-3867183354633138218" onmouseenter="enter('-3867183354633138218');" onmouseout="out('-3867183354633138218');" style=""> 634         boolean isFirstArgument = true;                                                                  </span>
<span class="4930952806349292087" onmouseenter="enter('4930952806349292087');" onmouseout="out('4930952806349292087');" style=""> 635         for (Object arg : args) {                                                                        </span>
<span class="2611054600934311831" onmouseenter="enter('2611054600934311831');" onmouseout="out('2611054600934311831');" style=""> 636             if (isFirstArgument) {                                                                       </span>
<span class="-7008608319651418815" onmouseenter="enter('-7008608319651418815');" onmouseout="out('-7008608319651418815');" style=""> 637                 isFirstArgument = false;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 638             } else {                                                                                     </span>
<span class="7277933927684441937" onmouseenter="enter('7277933927684441937');" onmouseout="out('7277933927684441937');" style=""> 639                 b.append(&quot;, &quot;);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640             }                                                                                            </span>
<span class="-6918144193114510" onmouseenter="enter('-6918144193114510');" onmouseout="out('-6918144193114510');" style=""> 641             b.append(arg);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642         }                                                                                                </span>
<span class="6306736576653323559" onmouseenter="enter('6306736576653323559');" onmouseout="out('6306736576653323559');" style=""> 643         System.out.println(b.toString());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644     }                                                                                                    </span>
<span  style=""> 645                                                                                                          </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 646     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="6706641044237115049" onmouseenter="enter('6706641044237115049');" onmouseout="out('6706641044237115049');" style=""> 647     public static boolean isRtl(Resources res) {                                                         </span>
<span class="-3807300280994787598" onmouseenter="enter('-3807300280994787598');" onmouseout="out('-3807300280994787598');" style=""> 648         return (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &amp;&amp;                          </span>
<span class="-6381041904087975678" onmouseenter="enter('-6381041904087975678');" onmouseout="out('-6381041904087975678');" style=""> 649                 (res.getConfiguration().getLayoutDirection() == View.LAYOUT_DIRECTION_RTL);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="7745027086805008166" onmouseenter="enter('7745027086805008166');" onmouseout="out('7745027086805008166');" style=""> 652     public static void assertWorkerThread() {                                                            </span>
<span class="9134597883085590362" onmouseenter="enter('9134597883085590362');" onmouseout="out('9134597883085590362');" style=""> 653         if (LauncherAppState.isDogfoodBuild() &amp;&amp;                                                         </span>
<span class="-6981789448421478045" onmouseenter="enter('-6981789448421478045');" onmouseout="out('-6981789448421478045');" style=""> 654                 (LauncherModel.sWorkerThread.getThreadId() != Process.myTid())) {                        </span>
<span class="9035044908675802484" onmouseenter="enter('9035044908675802484');" onmouseout="out('9035044908675802484');" style=""> 655             throw new IllegalStateException();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657     }                                                                                                    </span>
<span  style=""> 658                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 659     /**                                                                                                  </span>
<span class="-1474801224471826037" onmouseenter="enter('-1474801224471826037');" onmouseout="out('-1474801224471826037');" style=""> 660      * Returns true if the intent is a valid launch intent for a launcher activity of an app.            </span>
<span class="6585786963246605309" onmouseenter="enter('6585786963246605309');" onmouseout="out('6585786963246605309');" style=""> 661      * This is used to identify shortcuts which are different from the ones exposed by the               </span>
<span class="-4023082809467763476" onmouseenter="enter('-4023082809467763476');" onmouseout="out('-4023082809467763476');" style=""> 662      * applications&#x27; manifest file.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 663      *                                                                                                   </span>
<span class="5664983541931128603" onmouseenter="enter('5664983541931128603');" onmouseout="out('5664983541931128603');" style=""> 664      * @param launchIntent                                                                               </span>
<span class="-2680460934177482300" onmouseenter="enter('-2680460934177482300');" onmouseout="out('-2680460934177482300');" style=""> 665      * 		The intent that will be launched when the shortcut is clicked.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 666      */                                                                                                  </span>
<span class="-2895511923085128680" onmouseenter="enter('-2895511923085128680');" onmouseout="out('-2895511923085128680');" style=""> 667     public static boolean isLauncherAppTarget(Intent launchIntent) {                                     </span>
<span class="-5097563702978306794" onmouseenter="enter('-5097563702978306794');" onmouseout="out('-5097563702978306794');" style=""><abbr title=" 668         if (((((((launchIntent != null) &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())) &amp;&amp; (launchIntent.getComponent() != null)) &amp;&amp; (launchIntent.getCategories() != null)) &amp;&amp; (launchIntent.getCategories().size() == 1)) &amp;&amp; launchIntent.hasCategory(Intent.CATEGORY_LAUNCHER)) &amp;&amp; TextUtils.isEmpty(launchIntent.getDataString())) {"> 668         if (((((((launchIntent != null) &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())) &amp;&amp; (launc</abbr></span>
<span class="-8928317571259330246" onmouseenter="enter('-8928317571259330246');" onmouseout="out('-8928317571259330246');" style=""> 669             // An app target can either have no extra or have ItemInfo.EXTRA_PROFILE.                    </span>
<span class="-7448063824548237845" onmouseenter="enter('-7448063824548237845');" onmouseout="out('-7448063824548237845');" style=""> 670             Bundle extras = launchIntent.getExtras();                                                    </span>
<span class="3231714309982698113" onmouseenter="enter('3231714309982698113');" onmouseout="out('3231714309982698113');" style=""> 671             if (extras == null) {                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 672                 return true;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 673             } else {                                                                                     </span>
<span class="-5848873234981662305" onmouseenter="enter('-5848873234981662305');" onmouseout="out('-5848873234981662305');" style=""> 674                 Set&lt;String&gt; keys = extras.keySet();                                                      </span>
<span class="-4948422776149967846" onmouseenter="enter('-4948422776149967846');" onmouseout="out('-4948422776149967846');" style=""> 675                 return (keys.size() == 1) &amp;&amp; keys.contains(ItemInfo.EXTRA_PROFILE);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 676             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 678         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679     }                                                                                                    </span>
<span  style=""> 680                                                                                                          </span>
<span class="1378972265799286580" onmouseenter="enter('1378972265799286580');" onmouseout="out('1378972265799286580');" style=""> 681     public static float dpiFromPx(int size, DisplayMetrics metrics) {                                    </span>
<span class="-4438366357840539961" onmouseenter="enter('-4438366357840539961');" onmouseout="out('-4438366357840539961');" style=""> 682         float densityRatio = ((float) (metrics.densityDpi)) / DisplayMetrics.DENSITY_DEFAULT;            </span>
<span class="5080824260655745704" onmouseenter="enter('5080824260655745704');" onmouseout="out('5080824260655745704');" style=""> 683         return size / densityRatio;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684     }                                                                                                    </span>
<span  style=""> 685                                                                                                          </span>
<span class="4669549645205847924" onmouseenter="enter('4669549645205847924');" onmouseout="out('4669549645205847924');" style=""> 686     public static int pxFromDp(float size, DisplayMetrics metrics) {                                     </span>
<span class="-1671006829283351146" onmouseenter="enter('-1671006829283351146');" onmouseout="out('-1671006829283351146');" style=""><abbr title=" 687         return ((int) (Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, size, metrics))));"> 687         return ((int) (Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, size, metrics)))</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688     }                                                                                                    </span>
<span  style=""> 689                                                                                                          </span>
<span class="8174843599380599011" onmouseenter="enter('8174843599380599011');" onmouseout="out('8174843599380599011');" style=""> 690     public static int pxFromSp(float size, DisplayMetrics metrics) {                                     </span>
<span class="-4006442212705545477" onmouseenter="enter('-4006442212705545477');" onmouseout="out('-4006442212705545477');" style=""><abbr title=" 691         return ((int) (Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, size, metrics))));"> 691         return ((int) (Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, size, metrics))))</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692     }                                                                                                    </span>
<span  style=""> 693                                                                                                          </span>
<span class="8396926495000728032" onmouseenter="enter('8396926495000728032');" onmouseout="out('8396926495000728032');" style=""> 694     public static String createDbSelectionQuery(String columnName, Iterable&lt;?&gt; values) {                 </span>
<span class="-9051894453369877823" onmouseenter="enter('-9051894453369877823');" onmouseout="out('-9051894453369877823');" style=""> 695         return String.format(Locale.ENGLISH, &quot;%s IN (%s)&quot;, columnName, TextUtils.join(&quot;, &quot;, values));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697 }                                                                                                        </span>










































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19  import android.annotation.TargetApi;                                                                              </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  20  import android.app.Activity;                                                                                      </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  21  import android.app.SearchManager;                                                                                 </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  22  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  23  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  24  import android.content.ActivityNotFoundException;                                                                 </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  25  import android.content.ComponentName;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27  import android.content.Intent;                                                                                    </span>

<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  28  import android.content.pm.ApplicationInfo;                                                                        </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  29  import android.content.pm.PackageInfo;                                                                            </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  30  import android.content.pm.PackageManager;                                                                         </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  31  import android.content.pm.PackageManager.NameNotFoundException;                                                   </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  32  import android.content.pm.ResolveInfo;                                                                            </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  33  import android.content.res.Resources;                                                                             </span>

<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  34  import android.graphics.Bitmap;                                                                                   </span>

<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  35  import android.graphics.Canvas;                                                                                   </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  36  import android.graphics.Color;                                                                                    </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  37  import android.graphics.Matrix;                                                                                   </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  38  import android.graphics.Paint;                                                                                    </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  39  import android.graphics.PaintFlagsDrawFilter;                                                                     </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  40  import android.graphics.Rect;                                                                                     </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  41  import android.graphics.drawable.BitmapDrawable;                                                                  </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  42  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  43  import android.graphics.drawable.PaintDrawable;                                                                   </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  44  import android.os.Build;                                                                                          </span>




<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  45  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  46  import android.util.Pair;                                                                                         </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  47  import android.util.SparseArray;                                                                                  </span>

<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  48  import android.view.View;                                                                                         </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  49  import android.widget.Toast;                                                                                      </span>
<span  style="">  50                                                                                                                    </span>


<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  51  import java.util.ArrayList;                                                                                       </span>




<span  style="">  52                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  53  /**                                                                                                               </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  54   * Various utilities shared amongst the Launcher&#x27;s classes.                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  55   */                                                                                                               </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  56  public final class Utilities {                                                                                    </span>

<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  57      private static final String TAG = &quot;Launcher.Utilities&quot;;                                                       </span>
<span  style="">  58                                                                                                                    </span>
<span class="-3285704012604926483" onmouseenter="enter('-3285704012604926483');" onmouseout="out('-3285704012604926483');" style="">  59      private static int sIconWidth = -1;                                                                           </span>
<span class="-7368656921729638655" onmouseenter="enter('-7368656921729638655');" onmouseout="out('-7368656921729638655');" style="">  60      private static int sIconHeight = -1;                                                                          </span>
<span  style="">  61                                                                                                                    </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  62      private static final Rect sOldBounds = new Rect();                                                            </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  63      private static final Canvas sCanvas = new Canvas();                                                           </span>



<span  style="">  64                                                                                                                    </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  65      static {                                                                                                      </span>
<span class="-626556356968599416" onmouseenter="enter('-626556356968599416');" onmouseout="out('-626556356968599416');" style="">  66          sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG,                                         </span>
<span class="-4527400598837595496" onmouseenter="enter('-4527400598837595496');" onmouseout="out('-4527400598837595496');" style="">  67                  Paint.FILTER_BITMAP_FLAG));                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68      }                                                                                                             </span>
<span class="-3555091970674166572" onmouseenter="enter('-3555091970674166572');" onmouseout="out('-3555091970674166572');" style="">  69      static int sColors[] = { 0xffff0000, 0xff00ff00, 0xff0000ff };                                                </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  70      static int sColorIndex = 0;                                                                                   </span>
<span  style="">  71                                                                                                                    </span>
<span class="6708108430116230940" onmouseenter="enter('6708108430116230940');" onmouseout="out('6708108430116230940');" style="">  72      static int[] sLoc0 = new int[2];                                                                              </span>
<span class="-4655970674231262240" onmouseenter="enter('-4655970674231262240');" onmouseout="out('-4655970674231262240');" style="">  73      static int[] sLoc1 = new int[2];                                                                              </span>


<span  style="">  74                                                                                                                    </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  75      // To turn on these properties, type                                                                          </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  76      // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                               </span>
<span class="758972178103431168" onmouseenter="enter('758972178103431168');" onmouseout="out('758972178103431168');" style="">  77      static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                                 </span>
<span class="3898605814208067124" onmouseenter="enter('3898605814208067124');" onmouseout="out('3898605814208067124');" style="">  78      public static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);               </span>
<span  style="">  79                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  80      /**                                                                                                           </span>
<span class="3077507658421339996" onmouseenter="enter('3077507658421339996');" onmouseout="out('3077507658421339996');" style="">  81       * Returns a FastBitmapDrawable with the icon, accurately sized.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  82       */                                                                                                           </span>
<span class="2837566124379999844" onmouseenter="enter('2837566124379999844');" onmouseout="out('2837566124379999844');" style="">  83      public static FastBitmapDrawable createIconDrawable(Bitmap icon) {                                            </span>
<span class="-5160443570825674575" onmouseenter="enter('-5160443570825674575');" onmouseout="out('-5160443570825674575');" style="">  84          FastBitmapDrawable d = new FastBitmapDrawable(icon);                                                      </span>
<span class="3447003701071424534" onmouseenter="enter('3447003701071424534');" onmouseout="out('3447003701071424534');" style="">  85          d.setFilterBitmap(true);                                                                                  </span>
<span class="-5129661754691309397" onmouseenter="enter('-5129661754691309397');" onmouseout="out('-5129661754691309397');" style="">  86          resizeIconDrawable(d);                                                                                    </span>
<span class="5307209598704100981" onmouseenter="enter('5307209598704100981');" onmouseout="out('5307209598704100981');" style="">  87          return d;                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88      }                                                                                                             </span>
<span  style="">  89                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  90      /**                                                                                                           </span>
<span class="-6823557864322819203" onmouseenter="enter('-6823557864322819203');" onmouseout="out('-6823557864322819203');" style="">  91       * Resizes an icon drawable to the correct icon size.                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  92       */                                                                                                           </span>
<span class="-2549186728118005702" onmouseenter="enter('-2549186728118005702');" onmouseout="out('-2549186728118005702');" style="">  93      static void resizeIconDrawable(Drawable icon) {                                                               </span>
<span class="2607064405243787742" onmouseenter="enter('2607064405243787742');" onmouseout="out('2607064405243787742');" style="">  94          icon.setBounds(0, 0, sIconWidth, sIconHeight);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95      }                                                                                                             </span>




<span  style="">  96                                                                                                                    </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style="">  97      public static boolean isPropertyEnabled(String propertyName) {                                                </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style="">  98          return Log.isLoggable(propertyName, Log.VERBOSE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99      }                                                                                                             </span>
<span  style=""> 100                                                                                                                    </span>
<span class="6216232423695788303" onmouseenter="enter('6216232423695788303');" onmouseout="out('6216232423695788303');" style=""> 101      public static boolean isRotationEnabled(Context c) {                                                          </span>
<span class="2777407435637451670" onmouseenter="enter('2777407435637451670');" onmouseout="out('2777407435637451670');" style=""> 102          boolean enableRotation = sForceEnableRotation ||                                                          </span>
<span class="2602357999956778814" onmouseenter="enter('2602357999956778814');" onmouseout="out('2602357999956778814');" style=""> 103                  c.getResources().getBoolean(R.bool.allow_rotation);                                               </span>
<span class="-518478242812281738" onmouseenter="enter('-518478242812281738');" onmouseout="out('-518478242812281738');" style=""> 104          return enableRotation;                                                                                    </span>










<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105      }                                                                                                             </span>
<span  style=""> 106                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 107      /**                                                                                                           </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 108       * Indicates if the device is running LMP or higher.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 109       */                                                                                                           </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 110      public static boolean isLmpOrAbove() {                                                                        </span>
<span class="5395926800120604905" onmouseenter="enter('5395926800120604905');" onmouseout="out('5395926800120604905');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 111 -        return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.L;                                                    </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 112 +        return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                             </span>



















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113      }                                                                                                             </span>
<span  style=""> 114                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 115      /**                                                                                                           </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 116       * Returns a bitmap suitable for the all apps view. If the package or the resource do not                     </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 117       * exist, it returns null.                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 118       */                                                                                                           </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style=""> 119      static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,                      </span>

<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 120              Context context) {                                                                                    </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 121          PackageManager packageManager = context.getPackageManager();                                              </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 122          // the resource                                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 123          try {                                                                                                     </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 124              Resources resources = packageManager.getResourcesForApplication(packageName);                         </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 125              if (resources != null) {                                                                              </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 126                  final int id = resources.getIdentifier(resourceName, null, null);                                 </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 127                  return createIconBitmap(                                                                          </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style=""> 128                          resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);                 </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 130          } catch (Exception e) {                                                                                   </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 131              // Icon not found.                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 133          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134      }                                                                                                             </span>
<span  style=""> 135                                                                                                                    </span>




<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 136      /**                                                                                                           </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 137       * Returns a bitmap which is of the appropriate size to be displayed as an icon                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 138       */                                                                                                           </span>
<span class="-6299654696161202613" onmouseenter="enter('-6299654696161202613');" onmouseout="out('-6299654696161202613');" style=""> 139      static Bitmap createIconBitmap(Bitmap icon, Context context) {                                                </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 140          synchronized (sCanvas) { // we share the statics :-(                                                      </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 141              if (sIconWidth == -1) {                                                                               </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 142                  initStatics(context);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144          }                                                                                                         </span>
<span class="-4889100653175284592" onmouseenter="enter('-4889100653175284592');" onmouseout="out('-4889100653175284592');" style=""> 145          if (sIconWidth == icon.getWidth() &amp;&amp; sIconHeight == icon.getHeight()) {                                   </span>



<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 146              return icon;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147          }                                                                                                         </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 148          return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149      }                                                                                                             </span>
<span  style=""> 150                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 151      /**                                                                                                           </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 152       * Returns a bitmap suitable for the all apps view.                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 153       */                                                                                                           </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 154      public static Bitmap createIconBitmap(Drawable icon, Context context) {                                       </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 155          synchronized (sCanvas) { // we share the statics :-(                                                      </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 156              if (sIconWidth == -1) {                                                                               </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 157                  initStatics(context);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158              }                                                                                                     </span>
<span  style=""> 159                                                                                                                    </span>
<span class="6470075157816962568" onmouseenter="enter('6470075157816962568');" onmouseout="out('6470075157816962568');" style=""> 160              int width = sIconWidth;                                                                               </span>
<span class="3986870078870645386" onmouseenter="enter('3986870078870645386');" onmouseout="out('3986870078870645386');" style=""> 161              int height = sIconHeight;                                                                             </span>





<span  style=""> 162                                                                                                                    </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 163              if (icon instanceof PaintDrawable) {                                                                  </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 164                  PaintDrawable painter = (PaintDrawable) icon;                                                     </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 165                  painter.setIntrinsicWidth(width);                                                                 </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 166                  painter.setIntrinsicHeight(height);                                                               </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 167              } else if (icon instanceof BitmapDrawable) {                                                          </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 168                  // Ensure the bitmap has a density.                                                               </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 169                  BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                            </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 170                  Bitmap bitmap = bitmapDrawable.getBitmap();                                                       </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 171                  if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                                 </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 172                      bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174              }                                                                                                     </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 175              int sourceWidth = icon.getIntrinsicWidth();                                                           </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 176              int sourceHeight = icon.getIntrinsicHeight();                                                         </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 177              if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                            </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 178                  // Scale the icon proportionally to the icon dimensions                                           </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 179                  final float ratio = (float) sourceWidth / sourceHeight;                                           </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 180                  if (sourceWidth &gt; sourceHeight) {                                                                 </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 181                      height = (int) (width / ratio);                                                               </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 182                  } else if (sourceHeight &gt; sourceWidth) {                                                          </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 183                      width = (int) (height * ratio);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185              }                                                                                                     </span>
<span  style=""> 186                                                                                                                    </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 187              // no intrinsic size --&gt; use default size                                                             </span>
<span class="-2863116098807607090" onmouseenter="enter('-2863116098807607090');" onmouseout="out('-2863116098807607090');" style=""> 188              int textureWidth = sIconWidth;                                                                        </span>
<span class="7331988198270762201" onmouseenter="enter('7331988198270762201');" onmouseout="out('7331988198270762201');" style=""> 189              int textureHeight = sIconHeight;                                                                      </span>


<span  style=""> 190                                                                                                                    </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 191              final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                                </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 192                      Bitmap.Config.ARGB_8888);                                                                     </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 193              final Canvas canvas = sCanvas;                                                                        </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 194              canvas.setBitmap(bitmap);                                                                             </span>
<span  style=""> 195                                                                                                                    </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 196              final int left = (textureWidth-width) / 2;                                                            </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 197              final int top = (textureHeight-height) / 2;                                                           </span>
<span  style=""> 198                                                                                                                    </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 199              @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                                </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 200              final boolean debug = false;                                                                          </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 201              if (debug) {                                                                                          </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 202                  // draw a big box for the icon for debugging                                                      </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 203                  canvas.drawColor(sColors[sColorIndex]);                                                           </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 204                  if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                             </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 205                  Paint debugPaint = new Paint();                                                                   </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 206                  debugPaint.setColor(0xffcccc00);                                                                  </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 207                  canvas.drawRect(left, top, left+width, top+height, debugPaint);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208              }                                                                                                     </span>
<span  style=""> 209                                                                                                                    </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 210              sOldBounds.set(icon.getBounds());                                                                     </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 211              icon.setBounds(left, top, left+width, top+height);                                                    </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 212              icon.draw(canvas);                                                                                    </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 213              icon.setBounds(sOldBounds);                                                                           </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 214              canvas.setBitmap(null);                                                                               </span>
<span  style=""> 215                                                                                                                    </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 216              return bitmap;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218      }                                                                                                             </span>
<span  style=""> 219                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 220      /**                                                                                                           </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 221       * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s                      </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 222       * coordinates.                                                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 223       *                                                                                                            </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 224       * @param descendant The descendant to which the passed coordinate is relative.                               </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 225       * @param root The root view to make the coordinates relative to.                                             </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 226       * @param coord The coordinate that we want mapped.                                                           </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 227       * @param includeRootScroll Whether or not to account for the scroll of the descendant:                       </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 228       *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.                     </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 229       * @return The factor by which this descendant is scaled relative to this DragLayer. Caution                  </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 230       *         this scale factor is assumed to be equal in X and Y, and so if at any point this                   </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 231       *         assumption fails, we will need to return a pair of scale factors.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 232       */                                                                                                           </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 233      public static float getDescendantCoordRelativeToParent(View descendant, View root,                            </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 234                                                             int[] coord, boolean includeRootScroll) {              </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 235          ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                                    </span>
<span  style=""> 236                                                                                                                    </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 237          float[] pt = {coord[0], coord[1]};                                                                        </span>
<span  style=""> 238                                                                                                                    </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 239          View v = descendant;                                                                                      </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 240          while(v != root &amp;&amp; v != null) {                                                                           </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 241              ancestorChain.add(v);                                                                                 </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 242              v = (View) v.getParent();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243          }                                                                                                         </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 244          ancestorChain.add(root);                                                                                  </span>
<span  style=""> 245                                                                                                                    </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 246          float scale = 1.0f;                                                                                       </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 247          int count = ancestorChain.size();                                                                         </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 248          for (int i = 0; i &lt; count; i++) {                                                                         </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 249              View v0 = ancestorChain.get(i);                                                                       </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 250              // For TextViews, scroll has a meaning which relates to the text position                             </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 251              // which is very strange... ignore the scroll.                                                        </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 252              if (v0 != descendant || includeRootScroll) {                                                          </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 253                  pt[0] -= v0.getScrollX();                                                                         </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 254                  pt[1] -= v0.getScrollY();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255              }                                                                                                     </span>
<span  style=""> 256                                                                                                                    </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 257              v0.getMatrix().mapPoints(pt);                                                                         </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 258              pt[0] += v0.getLeft();                                                                                </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 259              pt[1] += v0.getTop();                                                                                 </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 260              scale *= v0.getScaleX();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261          }                                                                                                         </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 263          coord[0] = (int) Math.round(pt[0]);                                                                       </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 264          coord[1] = (int) Math.round(pt[1]);                                                                       </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 265          return scale;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266      }                                                                                                             </span>
<span  style=""> 267                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 268      /**                                                                                                           </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 269       * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 270       */                                                                                                           </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 271      public static float mapCoordInSelfToDescendent(View descendant, View root,                                    </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 272                                                     int[] coord) {                                                 </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 273          ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                                    </span>
<span  style=""> 274                                                                                                                    </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 275          float[] pt = {coord[0], coord[1]};                                                                        </span>
<span  style=""> 276                                                                                                                    </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 277          View v = descendant;                                                                                      </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 278          while(v != root) {                                                                                        </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 279              ancestorChain.add(v);                                                                                 </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 280              v = (View) v.getParent();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281          }                                                                                                         </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 282          ancestorChain.add(root);                                                                                  </span>
<span  style=""> 283                                                                                                                    </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 284          float scale = 1.0f;                                                                                       </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 285          Matrix inverse = new Matrix();                                                                            </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 286          int count = ancestorChain.size();                                                                         </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 287          for (int i = count - 1; i &gt;= 0; i--) {                                                                    </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 288              View ancestor = ancestorChain.get(i);                                                                 </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 289              View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                                    </span>
<span  style=""> 290                                                                                                                    </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 291              pt[0] += ancestor.getScrollX();                                                                       </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 292              pt[1] += ancestor.getScrollY();                                                                       </span>
<span  style=""> 293                                                                                                                    </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 294              if (next != null) {                                                                                   </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 295                  pt[0] -= next.getLeft();                                                                          </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 296                  pt[1] -= next.getTop();                                                                           </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 297                  next.getMatrix().invert(inverse);                                                                 </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 298                  inverse.mapPoints(pt);                                                                            </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 299                  scale *= next.getScaleX();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301          }                                                                                                         </span>
<span  style=""> 302                                                                                                                    </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 303          coord[0] = (int) Math.round(pt[0]);                                                                       </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 304          coord[1] = (int) Math.round(pt[1]);                                                                       </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 305          return scale;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306      }                                                                                                             </span>
<span  style=""> 307                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 308      /**                                                                                                           </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 309       * Utility method to determine whether the given point, in local coordinates,                                 </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 310       * is inside the view, where the area of the view is expanded by the slop factor.                             </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 311       * This method is called while processing touch-move events to determine if the event                         </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 312       * is still within the view.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 313       */                                                                                                           </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 314      public static boolean pointInView(View v, float localX, float localY, float slop) {                           </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 315          return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                            </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 316                  localY &lt; (v.getHeight() + slop);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317      }                                                                                                             </span>
<span  style=""> 318                                                                                                                    </span>
<span class="-7428141421266484859" onmouseenter="enter('-7428141421266484859');" onmouseout="out('-7428141421266484859');" style=""> 319      private static void initStatics(Context context) {                                                            </span>
<span class="7597797902441164085" onmouseenter="enter('7597797902441164085');" onmouseout="out('7597797902441164085');" style=""> 320          final Resources resources = context.getResources();                                                       </span>
<span class="5565293935619735218" onmouseenter="enter('5565293935619735218');" onmouseout="out('5565293935619735218');" style=""> 321          sIconWidth = sIconHeight = (int) resources.getDimension(R.dimen.app_icon_size);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322      }                                                                                                             </span>
<span  style=""> 323                                                                                                                    </span>
<span class="1887388638717136951" onmouseenter="enter('1887388638717136951');" onmouseout="out('1887388638717136951');" style=""> 324      public static void setIconSize(int widthPx) {                                                                 </span>
<span class="7934940689778386175" onmouseenter="enter('7934940689778386175');" onmouseout="out('7934940689778386175');" style=""> 325          sIconWidth = sIconHeight = widthPx;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326      }                                                                                                             </span>
<span  style=""> 327                                                                                                                    </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 328      public static void scaleRect(Rect r, float scale) {                                                           </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 329          if (scale != 1.0f) {                                                                                      </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 330              r.left = (int) (r.left * scale + 0.5f);                                                               </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 331              r.top = (int) (r.top * scale + 0.5f);                                                                 </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 332              r.right = (int) (r.right * scale + 0.5f);                                                             </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 333              r.bottom = (int) (r.bottom * scale + 0.5f);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335      }                                                                                                             </span>
<span  style=""> 336                                                                                                                    </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 337      public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                              </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 338          v0.getLocationInWindow(sLoc0);                                                                            </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 339          v1.getLocationInWindow(sLoc1);                                                                            </span>
<span  style=""> 340                                                                                                                    </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 341          sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                                 </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 342          sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                                </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 343          sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                                 </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 344          sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                                </span>
<span  style=""> 345                                                                                                                    </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 346          if (delta == null) {                                                                                      </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 347              delta = new int[2];                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348          }                                                                                                         </span>
<span  style=""> 349                                                                                                                    </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 350          delta[0] = sLoc1[0] - sLoc0[0];                                                                           </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 351          delta[1] = sLoc1[1] - sLoc0[1];                                                                           </span>
<span  style=""> 352                                                                                                                    </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 353          return delta;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354      }                                                                                                             </span>
<span  style=""> 355                                                                                                                    </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 356      public static void scaleRectAboutCenter(Rect r, float scale) {                                                </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 357          int cx = r.centerX();                                                                                     </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 358          int cy = r.centerY();                                                                                     </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 359          r.offset(-cx, -cy);                                                                                       </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 360          Utilities.scaleRect(r, scale);                                                                            </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 361          r.offset(cx, cy);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362      }                                                                                                             </span>
<span  style=""> 363                                                                                                                    </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 364      public static void startActivityForResultSafely(                                                              </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 365              Activity activity, Intent intent, int requestCode) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 366          try {                                                                                                     </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 367              activity.startActivityForResult(intent, requestCode);                                                 </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 368          } catch (ActivityNotFoundException e) {                                                                   </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 369              Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();                     </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 370          } catch (SecurityException e) {                                                                           </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 371              Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();                     </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 372              Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                              </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 373                      &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +                </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 374                      &quot;or use the exported attribute for this activity.&quot;, e);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376      }                                                                                                             </span>
<span  style=""> 377                                                                                                                    </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 378      static boolean isSystemApp(Context context, Intent intent) {                                                  </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 379          PackageManager pm = context.getPackageManager();                                                          </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 380          ComponentName cn = intent.getComponent();                                                                 </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 381          String packageName = null;                                                                                </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 382          if (cn == null) {                                                                                         </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 383              ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);                     </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 384              if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                                  </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 385                  packageName = info.activityInfo.packageName;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 387          } else {                                                                                                  </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 388              packageName = cn.getPackageName();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389          }                                                                                                         </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 390          if (packageName != null) {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 391              try {                                                                                                 </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 392                  PackageInfo info = pm.getPackageInfo(packageName, 0);                                             </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 393                  return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                                        </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 394                          ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);                        </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 395              } catch (NameNotFoundException e) {                                                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 396                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 398          } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 399              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401      }                                                                                                             </span>
<span  style=""> 402                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 403      /**                                                                                                           </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 404       * This picks a dominant color, looking for high-saturation, high-value, repeated hues.                       </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 405       * @param bitmap The bitmap to scan                                                                           </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 406       * @param samples The approximate max number of samples to use.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 407       */                                                                                                           </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 408      static int findDominantColorByHue(Bitmap bitmap, int samples) {                                               </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 409          final int height = bitmap.getHeight();                                                                    </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 410          final int width = bitmap.getWidth();                                                                      </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 411          int sampleStride = (int) Math.sqrt((height * width) / samples);                                           </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 412          if (sampleStride &lt; 1) {                                                                                   </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 413              sampleStride = 1;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414          }                                                                                                         </span>
<span  style=""> 415                                                                                                                    </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 416          // This is an out-param, for getting the hsv values for an rgb                                            </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 417          float[] hsv = new float[3];                                                                               </span>
<span  style=""> 418                                                                                                                    </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 419          // First get the best hue, by creating a histogram over 360 hue buckets,                                  </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 420          // where each pixel contributes a score weighted by saturation, value, and alpha.                         </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 421          float[] hueScoreHistogram = new float[360];                                                               </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 422          float highScore = -1;                                                                                     </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 423          int bestHue = -1;                                                                                         </span>
<span  style=""> 424                                                                                                                    </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 425          for (int y = 0; y &lt; height; y += sampleStride) {                                                          </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 426              for (int x = 0; x &lt; width; x += sampleStride) {                                                       </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 427                  int argb = bitmap.getPixel(x, y);                                                                 </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 428                  int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                                  </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 429                  if (alpha &lt; 0x80) {                                                                               </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 430                      // Drop mostly-transparent pixels.                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 431                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432                  }                                                                                                 </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 433                  // Remove the alpha channel.                                                                      </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 434                  int rgb = argb | 0xFF000000;                                                                      </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 435                  Color.colorToHSV(rgb, hsv);                                                                       </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 436                  // Bucket colors by the 360 integer hues.                                                         </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 437                  int hue = (int) hsv[0];                                                                           </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 438                  if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                                 </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 439                      // Defensively avoid array bounds violations.                                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 440                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441                  }                                                                                                 </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 442                  float score = hsv[1] * hsv[2];                                                                    </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 443                  hueScoreHistogram[hue] += score;                                                                  </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 444                  if (hueScoreHistogram[hue] &gt; highScore) {                                                         </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 445                      highScore = hueScoreHistogram[hue];                                                           </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 446                      bestHue = hue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449          }                                                                                                         </span>
<span  style=""> 450                                                                                                                    </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 451          SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                                  </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 452          int bestColor = 0xff000000;                                                                               </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 453          highScore = -1;                                                                                           </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 454          // Go back over the RGB colors that match the winning hue,                                                </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 455          // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                          </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 456          // The highest-scoring RGB color wins.                                                                    </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 457          for (int y = 0; y &lt; height; y += sampleStride) {                                                          </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 458              for (int x = 0; x &lt; width; x += sampleStride) {                                                       </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 459                  int rgb = bitmap.getPixel(x, y) | 0xff000000;                                                     </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 460                  Color.colorToHSV(rgb, hsv);                                                                       </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 461                  int hue = (int) hsv[0];                                                                           </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 462                  if (hue == bestHue) {                                                                             </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 463                      float s = hsv[1];                                                                             </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 464                      float v = hsv[2];                                                                             </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 465                      int bucket = (int) (s * 100) + (int) (v * 10000);                                             </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 466                      // Score by cumulative saturation * value.                                                    </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 467                      float score = s * v;                                                                          </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 468                      Float oldTotal = rgbScores.get(bucket);                                                       </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 469                      float newTotal = oldTotal == null ? score : oldTotal + score;                                 </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 470                      rgbScores.put(bucket, newTotal);                                                              </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 471                      if (newTotal &gt; highScore) {                                                                   </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 472                          highScore = newTotal;                                                                     </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 473                          // All the colors in the winning bucket are very similar. Last in wins.                   </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 474                          bestColor = rgb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 478          }                                                                                                         </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 479          return bestColor;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480      }                                                                                                             </span>
<span  style=""> 481                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 482      /*                                                                                                            </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 483       * Finds a system apk which had a broadcast receiver listening to a particular action.                        </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 484       * @param action intent action used to find the apk                                                           </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 485       * @return a pair of apk package name and the resources.                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 486       */                                                                                                           </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 487      static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                              </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 488          final Intent intent = new Intent(action);                                                                 </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 489          for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                          </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 490              if (info.activityInfo != null &amp;&amp;                                                                      </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 491                      (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {               </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 492                  final String packageName = info.activityInfo.packageName;                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 493                  try {                                                                                             </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 494                      final Resources res = pm.getResourcesForApplication(packageName);                             </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 495                      return Pair.create(packageName, res);                                                         </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 496                  } catch (NameNotFoundException e) {                                                               </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 497                      Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 501          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502      }                                                                                                             </span>
<span  style=""> 503                                                                                                                    </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 504      @TargetApi(Build.VERSION_CODES.KITKAT)                                                                        </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 505      public static boolean isViewAttachedToWindow(View v) {                                                        </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 506          if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                                </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 507              return v.isAttachedToWindow();                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 508          } else {                                                                                                  </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 509              // A proxy call which returns null, if the view is not attached to the window.                        </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 510              return v.getKeyDispatcherState() != null;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512      }                                                                                                             </span>
<span  style=""> 513                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 514      /**                                                                                                           </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 515       * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}                     </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 516       * provided by the same package which is set to be global search activity.                                    </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 517       * If widgetCategory is not supported, or no such widget is found, returns the first widget                   </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 518       * provided by the package.                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 519       */                                                                                                           </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 520      @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                                </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 521      public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                                </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 522          SearchManager searchManager =                                                                             </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 523                  (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                                 </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 524          ComponentName searchComponent = searchManager.getGlobalSearchActivity();                                  </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 525          if (searchComponent == null) return null;                                                                 </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 526          String providerPkg = searchComponent.getPackageName();                                                    </span>
<span  style=""> 527                                                                                                                    </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 528          AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                               </span>
<span  style=""> 529                                                                                                                    </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 530          AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                                </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 531          for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                             </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 532              if (info.provider.getPackageName().equals(providerPkg)) {                                             </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 533                  if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                                </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 534                      if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {           </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 535                          return info;                                                                              </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 536                      } else if (defaultWidgetForSearchPackage == null) {                                           </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 537                          defaultWidgetForSearchPackage = info;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 539                  } else {                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 540                      return info;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543          }                                                                                                         </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 544          return defaultWidgetForSearchPackage;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545      }                                                                                                             </span>
























































































































































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19  import android.annotation.TargetApi;                                                                              </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  20  import android.app.Activity;                                                                                      </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  21  import android.app.SearchManager;                                                                                 </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  22  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  23  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  24  import android.content.ActivityNotFoundException;                                                                 </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  25  import android.content.ComponentName;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27  import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import android.content.SharedPreferences;                                                                         </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  29  import android.content.pm.ApplicationInfo;                                                                        </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  30  import android.content.pm.PackageInfo;                                                                            </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  31  import android.content.pm.PackageManager;                                                                         </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  32  import android.content.pm.PackageManager.NameNotFoundException;                                                   </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  33  import android.content.pm.ResolveInfo;                                                                            </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  34  import android.content.res.Resources;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import android.database.Cursor;                                                                                   </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  36  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  37 +import android.graphics.BitmapFactory;                                                                            </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  38  import android.graphics.Canvas;                                                                                   </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  39  import android.graphics.Color;                                                                                    </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  40  import android.graphics.Matrix;                                                                                   </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  41  import android.graphics.Paint;                                                                                    </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  42  import android.graphics.PaintFlagsDrawFilter;                                                                     </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  43  import android.graphics.Rect;                                                                                     </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  44  import android.graphics.drawable.BitmapDrawable;                                                                  </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  45  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  46  import android.graphics.drawable.PaintDrawable;                                                                   </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  47  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  48 +import android.os.Bundle;                                                                                         </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  49 +import android.os.Process;                                                                                        </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  50 +import android.text.TextUtils;                                                                                    </span>
<span class="-8138675088784084481" onmouseenter="enter('-8138675088784084481');" onmouseout="out('-8138675088784084481');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  51 +import android.util.DisplayMetrics;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  52  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  53  import android.util.Pair;                                                                                         </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  54  import android.util.SparseArray;                                                                                  </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 +import android.util.TypedValue;                                                                                   </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  56  import android.view.View;                                                                                         </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  57  import android.widget.Toast;                                                                                      </span>
<span  style="">  58                                                                                                                    </span>
<span class="9184227348967602043" onmouseenter="enter('9184227348967602043');" onmouseout="out('9184227348967602043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +import java.io.ByteArrayOutputStream;                                                                             </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +import java.io.IOException;                                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  61  import java.util.ArrayList;                                                                                       </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  62 +import java.util.Locale;                                                                                          </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +import java.util.Set;                                                                                             </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +import java.util.regex.Matcher;                                                                                   </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +import java.util.regex.Pattern;                                                                                   </span>
<span  style="">  66                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  67  /**                                                                                                               </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  68   * Various utilities shared amongst the Launcher&#x27;s classes.                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69   */                                                                                                               </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  70  public final class Utilities {                                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +                                                                                                                  </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  72      private static final String TAG = &quot;Launcher.Utilities&quot;;                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  73 -                                                                                                                  </span>
<span class="-3285704012604926483" onmouseenter="enter('-3285704012604926483');" onmouseout="out('-3285704012604926483');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  74 -    private static int sIconWidth = -1;                                                                           </span>
<span class="-7368656921729638655" onmouseenter="enter('-7368656921729638655');" onmouseout="out('-7368656921729638655');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  75 -    private static int sIconHeight = -1;                                                                          </span>
<span  style="">  76                                                                                                                    </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  77      private static final Rect sOldBounds = new Rect();                                                            </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  78      private static final Canvas sCanvas = new Canvas();                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  79 +                                                                                                                  </span>
<span class="-1329756999223092373" onmouseenter="enter('-1329756999223092373');" onmouseout="out('-1329756999223092373');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  80 +    private static final Pattern sTrimPattern =                                                                   </span>
<span class="1309858825264038043" onmouseenter="enter('1309858825264038043');" onmouseout="out('1309858825264038043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  81 +            Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{javaSpaceChar}]*$&quot;);                          </span>
<span  style="">  82                                                                                                                    </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  83      static {                                                                                                      </span>
<span class="-626556356968599416" onmouseenter="enter('-626556356968599416');" onmouseout="out('-626556356968599416');" style="">  84          sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG,                                         </span>
<span class="-4527400598837595496" onmouseenter="enter('-4527400598837595496');" onmouseout="out('-4527400598837595496');" style="">  85                  Paint.FILTER_BITMAP_FLAG));                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86      }                                                                                                             </span>
<span class="-3555091970674166572" onmouseenter="enter('-3555091970674166572');" onmouseout="out('-3555091970674166572');" style="">  87      static int sColors[] = { 0xffff0000, 0xff00ff00, 0xff0000ff };                                                </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  88      static int sColorIndex = 0;                                                                                   </span>
<span  style="">  89                                                                                                                    </span>
<span class="6708108430116230940" onmouseenter="enter('6708108430116230940');" onmouseout="out('6708108430116230940');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  90 -    static int[] sLoc0 = new int[2];                                                                              </span>
<span class="-4655970674231262240" onmouseenter="enter('-4655970674231262240');" onmouseout="out('-4655970674231262240');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  91 -    static int[] sLoc1 = new int[2];                                                                              </span>
<span class="8969639251951816674" onmouseenter="enter('8969639251951816674');" onmouseout="out('8969639251951816674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +    private static final int[] sLoc0 = new int[2];                                                                </span>
<span class="-5113691339331042282" onmouseenter="enter('-5113691339331042282');" onmouseout="out('-5113691339331042282');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  93 +    private static final int[] sLoc1 = new int[2];                                                                </span>
<span  style="">  94                                                                                                                    </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  95      // To turn on these properties, type                                                                          </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  96      // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                               </span>
<span class="758972178103431168" onmouseenter="enter('758972178103431168');" onmouseout="out('758972178103431168');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  97 -    static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                                 </span>
<span class="3898605814208067124" onmouseenter="enter('3898605814208067124');" onmouseout="out('3898605814208067124');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  98 -    public static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  99 -                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 100 -    /**                                                                                                           </span>
<span class="3077507658421339996" onmouseenter="enter('3077507658421339996');" onmouseout="out('3077507658421339996');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 101 -     * Returns a FastBitmapDrawable with the icon, accurately sized.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 102 -     */                                                                                                           </span>
<span class="2837566124379999844" onmouseenter="enter('2837566124379999844');" onmouseout="out('2837566124379999844');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 103 -    public static FastBitmapDrawable createIconDrawable(Bitmap icon) {                                            </span>
<span class="-5160443570825674575" onmouseenter="enter('-5160443570825674575');" onmouseout="out('-5160443570825674575');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 104 -        FastBitmapDrawable d = new FastBitmapDrawable(icon);                                                      </span>
<span class="3447003701071424534" onmouseenter="enter('3447003701071424534');" onmouseout="out('3447003701071424534');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 105 -        d.setFilterBitmap(true);                                                                                  </span>
<span class="-5129661754691309397" onmouseenter="enter('-5129661754691309397');" onmouseout="out('-5129661754691309397');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 106 -        resizeIconDrawable(d);                                                                                    </span>
<span class="5307209598704100981" onmouseenter="enter('5307209598704100981');" onmouseout="out('5307209598704100981');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 107 -        return d;                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 108 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 109 -                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 110 -    /**                                                                                                           </span>
<span class="-6823557864322819203" onmouseenter="enter('-6823557864322819203');" onmouseout="out('-6823557864322819203');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 111 -     * Resizes an icon drawable to the correct icon size.                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 112 -     */                                                                                                           </span>
<span class="-2549186728118005702" onmouseenter="enter('-2549186728118005702');" onmouseout="out('-2549186728118005702');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 113 -    static void resizeIconDrawable(Drawable icon) {                                                               </span>
<span class="2607064405243787742" onmouseenter="enter('2607064405243787742');" onmouseout="out('2607064405243787742');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 114 -        icon.setBounds(0, 0, sIconWidth, sIconHeight);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 115 -    }                                                                                                             </span>
<span class="7534360217793993844" onmouseenter="enter('7534360217793993844');" onmouseout="out('7534360217793993844');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +    private static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                         </span>
<span class="6438249582362651183" onmouseenter="enter('6438249582362651183');" onmouseout="out('6438249582362651183');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +    private static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +                                                                                                                  </span>
<span class="-9073580014282388493" onmouseenter="enter('-9073580014282388493');" onmouseout="out('-9073580014282388493');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 119 +    public static final String ALLOW_ROTATION_PREFERENCE_KEY = &quot;pref_allowRotation&quot;;                              </span>
<span  style=""> 120                                                                                                                    </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style=""> 121      public static boolean isPropertyEnabled(String propertyName) {                                                </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style=""> 122          return Log.isLoggable(propertyName, Log.VERBOSE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123      }                                                                                                             </span>
<span  style=""> 124                                                                                                                    </span>
<span class="6216232423695788303" onmouseenter="enter('6216232423695788303');" onmouseout="out('6216232423695788303');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 125 -    public static boolean isRotationEnabled(Context c) {                                                          </span>
<span class="2777407435637451670" onmouseenter="enter('2777407435637451670');" onmouseout="out('2777407435637451670');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 126 -        boolean enableRotation = sForceEnableRotation ||                                                          </span>
<span class="2602357999956778814" onmouseenter="enter('2602357999956778814');" onmouseout="out('2602357999956778814');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 127 -                c.getResources().getBoolean(R.bool.allow_rotation);                                               </span>
<span class="-518478242812281738" onmouseenter="enter('-518478242812281738');" onmouseout="out('-518478242812281738');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 128 -        return enableRotation;                                                                                    </span>
<span class="6478873371162606731" onmouseenter="enter('6478873371162606731');" onmouseout="out('6478873371162606731');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 129 +    public static boolean isAllowRotationPrefEnabled(Context context, boolean multiProcess) {                     </span>
<span class="-2196846614400288078" onmouseenter="enter('-2196846614400288078');" onmouseout="out('-2196846614400288078');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 130 +        SharedPreferences sharedPrefs = context.getSharedPreferences(                                             </span>
<span class="1287283503969855027" onmouseenter="enter('1287283503969855027');" onmouseout="out('1287283503969855027');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 131 +                LauncherAppState.getSharedPreferencesKey(), Context.MODE_PRIVATE | (multiProcess ?                </span>
<span class="-636554800273789668" onmouseenter="enter('-636554800273789668');" onmouseout="out('-636554800273789668');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +                        Context.MODE_MULTI_PROCESS : 0));                                                         </span>
<span class="-8841982816110512528" onmouseenter="enter('-8841982816110512528');" onmouseout="out('-8841982816110512528');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +        boolean allowRotationPref = sharedPrefs.getBoolean(ALLOW_ROTATION_PREFERENCE_KEY, false);                 </span>
<span class="-8131727064279733470" onmouseenter="enter('-8131727064279733470');" onmouseout="out('-8131727064279733470');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +        return sForceEnableRotation || allowRotationPref;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +                                                                                                                  </span>
<span class="-6499659450313544780" onmouseenter="enter('-6499659450313544780');" onmouseout="out('-6499659450313544780');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 137 +    public static boolean isRotationAllowedForDevice(Context context) {                                           </span>
<span class="-1687812256733097905" onmouseenter="enter('-1687812256733097905');" onmouseout="out('-1687812256733097905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 138 +        return sForceEnableRotation || context.getResources().getBoolean(R.bool.allow_rotation);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139      }                                                                                                             </span>
<span  style=""> 140                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 141      /**                                                                                                           </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 142       * Indicates if the device is running LMP or higher.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 143       */                                                                                                           </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 144      public static boolean isLmpOrAbove() {                                                                        </span>
<span class="5395926800120604905" onmouseenter="enter('5395926800120604905');" onmouseout="out('5395926800120604905');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 145 -        return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.L;                                                    </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 146 +        return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 147 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 148 +                                                                                                                  </span>
<span class="8267304412893954240" onmouseenter="enter('8267304412893954240');" onmouseout="out('8267304412893954240');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +    public static boolean isLmpMR1OrAbove() {                                                                     </span>
<span class="-198173616463930288" onmouseenter="enter('-198173616463930288');" onmouseout="out('-198173616463930288');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 150 +        // TODO(adamcohen): update to Build.VERSION_CODES.LOLLIPOP_MR1 once building against 22;                  </span>
<span class="2386615924650555298" onmouseenter="enter('2386615924650555298');" onmouseout="out('2386615924650555298');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 151 +        return Build.VERSION.SDK_INT &gt;= 22;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 153 +                                                                                                                  </span>
<span class="-8604735062489042646" onmouseenter="enter('-8604735062489042646');" onmouseout="out('-8604735062489042646');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 154 +    public static boolean isLmpMR1() {                                                                            </span>
<span class="-198173616463930288" onmouseenter="enter('-198173616463930288');" onmouseout="out('-198173616463930288');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 155 +        // TODO(adamcohen): update to Build.VERSION_CODES.LOLLIPOP_MR1 once building against 22;                  </span>
<span class="-3182404196161427649" onmouseenter="enter('-3182404196161427649');" onmouseout="out('-3182404196161427649');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 156 +        return Build.VERSION.SDK_INT == 22;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 157 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 158 +                                                                                                                  </span>
<span class="8062060252944903878" onmouseenter="enter('8062060252944903878');" onmouseout="out('8062060252944903878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 159 +    public static Bitmap createIconBitmap(Cursor c, int iconIndex, Context context) {                             </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +        byte[] data = c.getBlob(iconIndex);                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 161 +        try {                                                                                                     </span>
<span class="-6494522703644265462" onmouseenter="enter('-6494522703644265462');" onmouseout="out('-6494522703644265462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 162 +            return createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 163 +        } catch (Exception e) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 164 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 165 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166      }                                                                                                             </span>
<span  style=""> 167                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 168      /**                                                                                                           </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 169       * Returns a bitmap suitable for the all apps view. If the package or the resource do not                     </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 170       * exist, it returns null.                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 171       */                                                                                                           </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 172 -    static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,                      </span>
<span class="7886363487578966295" onmouseenter="enter('7886363487578966295');" onmouseout="out('7886363487578966295');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +    public static Bitmap createIconBitmap(String packageName, String resourceName,                                </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 174              Context context) {                                                                                    </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 175          PackageManager packageManager = context.getPackageManager();                                              </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 176          // the resource                                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 177          try {                                                                                                     </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 178              Resources resources = packageManager.getResourcesForApplication(packageName);                         </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 179              if (resources != null) {                                                                              </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 180                  final int id = resources.getIdentifier(resourceName, null, null);                                 </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 181                  return createIconBitmap(                                                                          </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 182 -                        resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);                 </span>
<span class="7879136357573012600" onmouseenter="enter('7879136357573012600');" onmouseout="out('7879136357573012600');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 183 +                        resources.getDrawableForDensity(id, LauncherAppState.getInstance()                        </span>
<span class="3845650349866329979" onmouseenter="enter('3845650349866329979');" onmouseout="out('3845650349866329979');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 184 +                                .getInvariantDeviceProfile().fillResIconDpi), context);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 186          } catch (Exception e) {                                                                                   </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 187              // Icon not found.                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 189          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190      }                                                                                                             </span>
<span  style=""> 191                                                                                                                    </span>
<span class="-1980149402827349938" onmouseenter="enter('-1980149402827349938');" onmouseout="out('-1980149402827349938');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 192 +    private static int getIconBitmapSize() {                                                                      </span>
<span class="-796645866027437773" onmouseenter="enter('-796645866027437773');" onmouseout="out('-796645866027437773');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 193 +        return LauncherAppState.getInstance().getInvariantDeviceProfile().iconBitmapSize;                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 194 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 195 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 196      /**                                                                                                           </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 197       * Returns a bitmap which is of the appropriate size to be displayed as an icon                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 198       */                                                                                                           </span>
<span class="-6299654696161202613" onmouseenter="enter('-6299654696161202613');" onmouseout="out('-6299654696161202613');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 199 -    static Bitmap createIconBitmap(Bitmap icon, Context context) {                                                </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 200 -        synchronized (sCanvas) { // we share the statics :-(                                                      </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 201 -            if (sIconWidth == -1) {                                                                               </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 202 -                initStatics(context);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 203 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 204 -        }                                                                                                         </span>
<span class="-4889100653175284592" onmouseenter="enter('-4889100653175284592');" onmouseout="out('-4889100653175284592');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 205 -        if (sIconWidth == icon.getWidth() &amp;&amp; sIconHeight == icon.getHeight()) {                                   </span>
<span class="-2529226303201089113" onmouseenter="enter('-2529226303201089113');" onmouseout="out('-2529226303201089113');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 206 +    public static Bitmap createIconBitmap(Bitmap icon, Context context) {                                         </span>
<span class="-812758491164557381" onmouseenter="enter('-812758491164557381');" onmouseout="out('-812758491164557381');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 207 +        final int iconBitmapSize = getIconBitmapSize();                                                           </span>
<span class="5755596367918457571" onmouseenter="enter('5755596367918457571');" onmouseout="out('5755596367918457571');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 208 +        if (iconBitmapSize == icon.getWidth() &amp;&amp; iconBitmapSize == icon.getHeight()) {                            </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 209              return icon;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210          }                                                                                                         </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 211          return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212      }                                                                                                             </span>
<span  style=""> 213                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 214      /**                                                                                                           </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 215       * Returns a bitmap suitable for the all apps view.                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 216       */                                                                                                           </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 217      public static Bitmap createIconBitmap(Drawable icon, Context context) {                                       </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 218 -        synchronized (sCanvas) { // we share the statics :-(                                                      </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 219 -            if (sIconWidth == -1) {                                                                               </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 220 -                initStatics(context);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 221 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 222 -                                                                                                                  </span>
<span class="6470075157816962568" onmouseenter="enter('6470075157816962568');" onmouseout="out('6470075157816962568');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 223 -            int width = sIconWidth;                                                                               </span>
<span class="3986870078870645386" onmouseenter="enter('3986870078870645386');" onmouseout="out('3986870078870645386');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 224 -            int height = sIconHeight;                                                                             </span>
<span class="-8928451114088413132" onmouseenter="enter('-8928451114088413132');" onmouseout="out('-8928451114088413132');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 225 +        synchronized (sCanvas) {                                                                                  </span>
<span class="-812758491164557381" onmouseenter="enter('-812758491164557381');" onmouseout="out('-812758491164557381');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 226 +            final int iconBitmapSize = getIconBitmapSize();                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +                                                                                                                  </span>
<span class="-8808586281723900088" onmouseenter="enter('-8808586281723900088');" onmouseout="out('-8808586281723900088');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 228 +            int width = iconBitmapSize;                                                                           </span>
<span class="-4976368659165838766" onmouseenter="enter('-4976368659165838766');" onmouseout="out('-4976368659165838766');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 229 +            int height = iconBitmapSize;                                                                          </span>
<span  style=""> 230                                                                                                                    </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 231              if (icon instanceof PaintDrawable) {                                                                  </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 232                  PaintDrawable painter = (PaintDrawable) icon;                                                     </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 233                  painter.setIntrinsicWidth(width);                                                                 </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 234                  painter.setIntrinsicHeight(height);                                                               </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 235              } else if (icon instanceof BitmapDrawable) {                                                          </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 236                  // Ensure the bitmap has a density.                                                               </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 237                  BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                            </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 238                  Bitmap bitmap = bitmapDrawable.getBitmap();                                                       </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 239                  if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                                 </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 240                      bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242              }                                                                                                     </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 243              int sourceWidth = icon.getIntrinsicWidth();                                                           </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 244              int sourceHeight = icon.getIntrinsicHeight();                                                         </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 245              if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                            </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 246                  // Scale the icon proportionally to the icon dimensions                                           </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 247                  final float ratio = (float) sourceWidth / sourceHeight;                                           </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 248                  if (sourceWidth &gt; sourceHeight) {                                                                 </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 249                      height = (int) (width / ratio);                                                               </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 250                  } else if (sourceHeight &gt; sourceWidth) {                                                          </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 251                      width = (int) (height * ratio);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253              }                                                                                                     </span>
<span  style=""> 254                                                                                                                    </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 255              // no intrinsic size --&gt; use default size                                                             </span>
<span class="-2863116098807607090" onmouseenter="enter('-2863116098807607090');" onmouseout="out('-2863116098807607090');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 256 -            int textureWidth = sIconWidth;                                                                        </span>
<span class="7331988198270762201" onmouseenter="enter('7331988198270762201');" onmouseout="out('7331988198270762201');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 257 -            int textureHeight = sIconHeight;                                                                      </span>
<span class="-8413870914199027407" onmouseenter="enter('-8413870914199027407');" onmouseout="out('-8413870914199027407');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 258 +            int textureWidth = iconBitmapSize;                                                                    </span>
<span class="-1351255372366243626" onmouseenter="enter('-1351255372366243626');" onmouseout="out('-1351255372366243626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 259 +            int textureHeight = iconBitmapSize;                                                                   </span>
<span  style=""> 260                                                                                                                    </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 261              final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                                </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 262                      Bitmap.Config.ARGB_8888);                                                                     </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 263              final Canvas canvas = sCanvas;                                                                        </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 264              canvas.setBitmap(bitmap);                                                                             </span>
<span  style=""> 265                                                                                                                    </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 266              final int left = (textureWidth-width) / 2;                                                            </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 267              final int top = (textureHeight-height) / 2;                                                           </span>
<span  style=""> 268                                                                                                                    </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 269              @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                                </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 270              final boolean debug = false;                                                                          </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 271              if (debug) {                                                                                          </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 272                  // draw a big box for the icon for debugging                                                      </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 273                  canvas.drawColor(sColors[sColorIndex]);                                                           </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 274                  if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                             </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 275                  Paint debugPaint = new Paint();                                                                   </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 276                  debugPaint.setColor(0xffcccc00);                                                                  </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 277                  canvas.drawRect(left, top, left+width, top+height, debugPaint);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278              }                                                                                                     </span>
<span  style=""> 279                                                                                                                    </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 280              sOldBounds.set(icon.getBounds());                                                                     </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 281              icon.setBounds(left, top, left+width, top+height);                                                    </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 282              icon.draw(canvas);                                                                                    </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 283              icon.setBounds(sOldBounds);                                                                           </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 284              canvas.setBitmap(null);                                                                               </span>
<span  style=""> 285                                                                                                                    </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 286              return bitmap;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288      }                                                                                                             </span>
<span  style=""> 289                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 290      /**                                                                                                           </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 291       * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s                      </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 292       * coordinates.                                                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 293       *                                                                                                            </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 294       * @param descendant The descendant to which the passed coordinate is relative.                               </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 295       * @param root The root view to make the coordinates relative to.                                             </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 296       * @param coord The coordinate that we want mapped.                                                           </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 297       * @param includeRootScroll Whether or not to account for the scroll of the descendant:                       </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 298       *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.                     </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 299       * @return The factor by which this descendant is scaled relative to this DragLayer. Caution                  </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 300       *         this scale factor is assumed to be equal in X and Y, and so if at any point this                   </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 301       *         assumption fails, we will need to return a pair of scale factors.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 302       */                                                                                                           </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 303      public static float getDescendantCoordRelativeToParent(View descendant, View root,                            </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 304                                                             int[] coord, boolean includeRootScroll) {              </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 305          ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                                    </span>
<span  style=""> 306                                                                                                                    </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 307          float[] pt = {coord[0], coord[1]};                                                                        </span>
<span  style=""> 308                                                                                                                    </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 309          View v = descendant;                                                                                      </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 310          while(v != root &amp;&amp; v != null) {                                                                           </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 311              ancestorChain.add(v);                                                                                 </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 312              v = (View) v.getParent();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313          }                                                                                                         </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 314          ancestorChain.add(root);                                                                                  </span>
<span  style=""> 315                                                                                                                    </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 316          float scale = 1.0f;                                                                                       </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 317          int count = ancestorChain.size();                                                                         </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 318          for (int i = 0; i &lt; count; i++) {                                                                         </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 319              View v0 = ancestorChain.get(i);                                                                       </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 320              // For TextViews, scroll has a meaning which relates to the text position                             </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 321              // which is very strange... ignore the scroll.                                                        </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 322              if (v0 != descendant || includeRootScroll) {                                                          </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 323                  pt[0] -= v0.getScrollX();                                                                         </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 324                  pt[1] -= v0.getScrollY();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325              }                                                                                                     </span>
<span  style=""> 326                                                                                                                    </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 327              v0.getMatrix().mapPoints(pt);                                                                         </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 328              pt[0] += v0.getLeft();                                                                                </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 329              pt[1] += v0.getTop();                                                                                 </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 330              scale *= v0.getScaleX();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331          }                                                                                                         </span>
<span  style=""> 332                                                                                                                    </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 333          coord[0] = (int) Math.round(pt[0]);                                                                       </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 334          coord[1] = (int) Math.round(pt[1]);                                                                       </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 335          return scale;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336      }                                                                                                             </span>
<span  style=""> 337                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 338      /**                                                                                                           </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 339       * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 340       */                                                                                                           </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 341      public static float mapCoordInSelfToDescendent(View descendant, View root,                                    </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 342                                                     int[] coord) {                                                 </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 343          ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                                    </span>
<span  style=""> 344                                                                                                                    </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 345          float[] pt = {coord[0], coord[1]};                                                                        </span>
<span  style=""> 346                                                                                                                    </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 347          View v = descendant;                                                                                      </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 348          while(v != root) {                                                                                        </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 349              ancestorChain.add(v);                                                                                 </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 350              v = (View) v.getParent();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351          }                                                                                                         </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 352          ancestorChain.add(root);                                                                                  </span>
<span  style=""> 353                                                                                                                    </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 354          float scale = 1.0f;                                                                                       </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 355          Matrix inverse = new Matrix();                                                                            </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 356          int count = ancestorChain.size();                                                                         </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 357          for (int i = count - 1; i &gt;= 0; i--) {                                                                    </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 358              View ancestor = ancestorChain.get(i);                                                                 </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 359              View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                                    </span>
<span  style=""> 360                                                                                                                    </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 361              pt[0] += ancestor.getScrollX();                                                                       </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 362              pt[1] += ancestor.getScrollY();                                                                       </span>
<span  style=""> 363                                                                                                                    </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 364              if (next != null) {                                                                                   </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 365                  pt[0] -= next.getLeft();                                                                          </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 366                  pt[1] -= next.getTop();                                                                           </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 367                  next.getMatrix().invert(inverse);                                                                 </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 368                  inverse.mapPoints(pt);                                                                            </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 369                  scale *= next.getScaleX();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371          }                                                                                                         </span>
<span  style=""> 372                                                                                                                    </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 373          coord[0] = (int) Math.round(pt[0]);                                                                       </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 374          coord[1] = (int) Math.round(pt[1]);                                                                       </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 375          return scale;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376      }                                                                                                             </span>
<span  style=""> 377                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 378      /**                                                                                                           </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 379       * Utility method to determine whether the given point, in local coordinates,                                 </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 380       * is inside the view, where the area of the view is expanded by the slop factor.                             </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 381       * This method is called while processing touch-move events to determine if the event                         </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 382       * is still within the view.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 383       */                                                                                                           </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 384      public static boolean pointInView(View v, float localX, float localY, float slop) {                           </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 385          return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                            </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 386                  localY &lt; (v.getHeight() + slop);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 387 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 388 -                                                                                                                  </span>
<span class="-7428141421266484859" onmouseenter="enter('-7428141421266484859');" onmouseout="out('-7428141421266484859');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 389 -    private static void initStatics(Context context) {                                                            </span>
<span class="7597797902441164085" onmouseenter="enter('7597797902441164085');" onmouseout="out('7597797902441164085');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 390 -        final Resources resources = context.getResources();                                                       </span>
<span class="5565293935619735218" onmouseenter="enter('5565293935619735218');" onmouseout="out('5565293935619735218');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 391 -        sIconWidth = sIconHeight = (int) resources.getDimension(R.dimen.app_icon_size);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 392 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 393 -                                                                                                                  </span>
<span class="1887388638717136951" onmouseenter="enter('1887388638717136951');" onmouseout="out('1887388638717136951');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 394 -    public static void setIconSize(int widthPx) {                                                                 </span>
<span class="7934940689778386175" onmouseenter="enter('7934940689778386175');" onmouseout="out('7934940689778386175');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 395 -        sIconWidth = sIconHeight = widthPx;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396      }                                                                                                             </span>
<span  style=""> 397                                                                                                                    </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 398      public static void scaleRect(Rect r, float scale) {                                                           </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 399          if (scale != 1.0f) {                                                                                      </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 400              r.left = (int) (r.left * scale + 0.5f);                                                               </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 401              r.top = (int) (r.top * scale + 0.5f);                                                                 </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 402              r.right = (int) (r.right * scale + 0.5f);                                                             </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 403              r.bottom = (int) (r.bottom * scale + 0.5f);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405      }                                                                                                             </span>
<span  style=""> 406                                                                                                                    </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 407      public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                              </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 408          v0.getLocationInWindow(sLoc0);                                                                            </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 409          v1.getLocationInWindow(sLoc1);                                                                            </span>
<span  style=""> 410                                                                                                                    </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 411          sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                                 </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 412          sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                                </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 413          sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                                 </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 414          sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                                </span>
<span  style=""> 415                                                                                                                    </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 416          if (delta == null) {                                                                                      </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 417              delta = new int[2];                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418          }                                                                                                         </span>
<span  style=""> 419                                                                                                                    </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 420          delta[0] = sLoc1[0] - sLoc0[0];                                                                           </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 421          delta[1] = sLoc1[1] - sLoc0[1];                                                                           </span>
<span  style=""> 422                                                                                                                    </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 423          return delta;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424      }                                                                                                             </span>
<span  style=""> 425                                                                                                                    </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 426      public static void scaleRectAboutCenter(Rect r, float scale) {                                                </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 427          int cx = r.centerX();                                                                                     </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 428          int cy = r.centerY();                                                                                     </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 429          r.offset(-cx, -cy);                                                                                       </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 430          Utilities.scaleRect(r, scale);                                                                            </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 431          r.offset(cx, cy);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432      }                                                                                                             </span>
<span  style=""> 433                                                                                                                    </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 434      public static void startActivityForResultSafely(                                                              </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 435              Activity activity, Intent intent, int requestCode) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 436          try {                                                                                                     </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 437              activity.startActivityForResult(intent, requestCode);                                                 </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 438          } catch (ActivityNotFoundException e) {                                                                   </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 439              Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();                     </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 440          } catch (SecurityException e) {                                                                           </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 441              Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();                     </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 442              Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                              </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 443                      &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +                </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 444                      &quot;or use the exported attribute for this activity.&quot;, e);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446      }                                                                                                             </span>
<span  style=""> 447                                                                                                                    </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 448      static boolean isSystemApp(Context context, Intent intent) {                                                  </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 449          PackageManager pm = context.getPackageManager();                                                          </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 450          ComponentName cn = intent.getComponent();                                                                 </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 451          String packageName = null;                                                                                </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 452          if (cn == null) {                                                                                         </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 453              ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);                     </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 454              if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                                  </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 455                  packageName = info.activityInfo.packageName;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 457          } else {                                                                                                  </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 458              packageName = cn.getPackageName();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459          }                                                                                                         </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 460          if (packageName != null) {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 461              try {                                                                                                 </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 462                  PackageInfo info = pm.getPackageInfo(packageName, 0);                                             </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 463                  return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                                        </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 464                          ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);                        </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 465              } catch (NameNotFoundException e) {                                                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 466                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 468          } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 469              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471      }                                                                                                             </span>
<span  style=""> 472                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 473      /**                                                                                                           </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 474       * This picks a dominant color, looking for high-saturation, high-value, repeated hues.                       </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 475       * @param bitmap The bitmap to scan                                                                           </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 476       * @param samples The approximate max number of samples to use.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 477       */                                                                                                           </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 478      static int findDominantColorByHue(Bitmap bitmap, int samples) {                                               </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 479          final int height = bitmap.getHeight();                                                                    </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 480          final int width = bitmap.getWidth();                                                                      </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 481          int sampleStride = (int) Math.sqrt((height * width) / samples);                                           </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 482          if (sampleStride &lt; 1) {                                                                                   </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 483              sampleStride = 1;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484          }                                                                                                         </span>
<span  style=""> 485                                                                                                                    </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 486          // This is an out-param, for getting the hsv values for an rgb                                            </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 487          float[] hsv = new float[3];                                                                               </span>
<span  style=""> 488                                                                                                                    </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 489          // First get the best hue, by creating a histogram over 360 hue buckets,                                  </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 490          // where each pixel contributes a score weighted by saturation, value, and alpha.                         </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 491          float[] hueScoreHistogram = new float[360];                                                               </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 492          float highScore = -1;                                                                                     </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 493          int bestHue = -1;                                                                                         </span>
<span  style=""> 494                                                                                                                    </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 495          for (int y = 0; y &lt; height; y += sampleStride) {                                                          </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 496              for (int x = 0; x &lt; width; x += sampleStride) {                                                       </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 497                  int argb = bitmap.getPixel(x, y);                                                                 </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 498                  int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                                  </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 499                  if (alpha &lt; 0x80) {                                                                               </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 500                      // Drop mostly-transparent pixels.                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 501                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502                  }                                                                                                 </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 503                  // Remove the alpha channel.                                                                      </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 504                  int rgb = argb | 0xFF000000;                                                                      </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 505                  Color.colorToHSV(rgb, hsv);                                                                       </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 506                  // Bucket colors by the 360 integer hues.                                                         </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 507                  int hue = (int) hsv[0];                                                                           </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 508                  if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                                 </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 509                      // Defensively avoid array bounds violations.                                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 510                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511                  }                                                                                                 </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 512                  float score = hsv[1] * hsv[2];                                                                    </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 513                  hueScoreHistogram[hue] += score;                                                                  </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 514                  if (hueScoreHistogram[hue] &gt; highScore) {                                                         </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 515                      highScore = hueScoreHistogram[hue];                                                           </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 516                      bestHue = hue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519          }                                                                                                         </span>
<span  style=""> 520                                                                                                                    </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 521          SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                                  </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 522          int bestColor = 0xff000000;                                                                               </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 523          highScore = -1;                                                                                           </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 524          // Go back over the RGB colors that match the winning hue,                                                </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 525          // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                          </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 526          // The highest-scoring RGB color wins.                                                                    </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 527          for (int y = 0; y &lt; height; y += sampleStride) {                                                          </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 528              for (int x = 0; x &lt; width; x += sampleStride) {                                                       </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 529                  int rgb = bitmap.getPixel(x, y) | 0xff000000;                                                     </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 530                  Color.colorToHSV(rgb, hsv);                                                                       </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 531                  int hue = (int) hsv[0];                                                                           </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 532                  if (hue == bestHue) {                                                                             </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 533                      float s = hsv[1];                                                                             </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 534                      float v = hsv[2];                                                                             </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 535                      int bucket = (int) (s * 100) + (int) (v * 10000);                                             </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 536                      // Score by cumulative saturation * value.                                                    </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 537                      float score = s * v;                                                                          </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 538                      Float oldTotal = rgbScores.get(bucket);                                                       </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 539                      float newTotal = oldTotal == null ? score : oldTotal + score;                                 </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 540                      rgbScores.put(bucket, newTotal);                                                              </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 541                      if (newTotal &gt; highScore) {                                                                   </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 542                          highScore = newTotal;                                                                     </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 543                          // All the colors in the winning bucket are very similar. Last in wins.                   </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 544                          bestColor = rgb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548          }                                                                                                         </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 549          return bestColor;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550      }                                                                                                             </span>
<span  style=""> 551                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 552      /*                                                                                                            </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 553       * Finds a system apk which had a broadcast receiver listening to a particular action.                        </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 554       * @param action intent action used to find the apk                                                           </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 555       * @return a pair of apk package name and the resources.                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 556       */                                                                                                           </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 557      static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                              </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 558          final Intent intent = new Intent(action);                                                                 </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 559          for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                          </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 560              if (info.activityInfo != null &amp;&amp;                                                                      </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 561                      (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {               </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 562                  final String packageName = info.activityInfo.packageName;                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 563                  try {                                                                                             </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 564                      final Resources res = pm.getResourcesForApplication(packageName);                             </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 565                      return Pair.create(packageName, res);                                                         </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 566                  } catch (NameNotFoundException e) {                                                               </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 567                      Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 571          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572      }                                                                                                             </span>
<span  style=""> 573                                                                                                                    </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 574      @TargetApi(Build.VERSION_CODES.KITKAT)                                                                        </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 575      public static boolean isViewAttachedToWindow(View v) {                                                        </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 576          if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                                </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 577              return v.isAttachedToWindow();                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 578          } else {                                                                                                  </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 579              // A proxy call which returns null, if the view is not attached to the window.                        </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 580              return v.getKeyDispatcherState() != null;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 582      }                                                                                                             </span>
<span  style=""> 583                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 584      /**                                                                                                           </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 585       * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}                     </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 586       * provided by the same package which is set to be global search activity.                                    </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 587       * If widgetCategory is not supported, or no such widget is found, returns the first widget                   </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 588       * provided by the package.                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 589       */                                                                                                           </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 590      @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                                </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 591      public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                                </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 592          SearchManager searchManager =                                                                             </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 593                  (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                                 </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 594          ComponentName searchComponent = searchManager.getGlobalSearchActivity();                                  </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 595          if (searchComponent == null) return null;                                                                 </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 596          String providerPkg = searchComponent.getPackageName();                                                    </span>
<span  style=""> 597                                                                                                                    </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 598          AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                               </span>
<span  style=""> 599                                                                                                                    </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 600          AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                                </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 601          for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                             </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 602              if (info.provider.getPackageName().equals(providerPkg)) {                                             </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 603                  if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                                </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 604                      if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {           </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 605                          return info;                                                                              </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 606                      } else if (defaultWidgetForSearchPackage == null) {                                           </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 607                          defaultWidgetForSearchPackage = info;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 609                  } else {                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 610                      return info;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613          }                                                                                                         </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 614          return defaultWidgetForSearchPackage;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615      }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 616 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 617 +    /**                                                                                                           </span>
<span class="2890018962810146332" onmouseenter="enter('2890018962810146332');" onmouseout="out('2890018962810146332');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 618 +     * Compresses the bitmap to a byte array for serialization.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 619 +     */                                                                                                           </span>
<span class="3132902726257736313" onmouseenter="enter('3132902726257736313');" onmouseout="out('3132902726257736313');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 620 +    public static byte[] flattenBitmap(Bitmap bitmap) {                                                           </span>
<span class="-3581949580601242936" onmouseenter="enter('-3581949580601242936');" onmouseout="out('-3581949580601242936');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 621 +        // Try go guesstimate how much space the icon will take when serialized                                   </span>
<span class="6197194043750255949" onmouseenter="enter('6197194043750255949');" onmouseout="out('6197194043750255949');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 622 +        // to avoid unnecessary allocations/copies during the write.                                              </span>
<span class="-5093203174793348363" onmouseenter="enter('-5093203174793348363');" onmouseout="out('-5093203174793348363');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 623 +        int size = bitmap.getWidth() * bitmap.getHeight() * 4;                                                    </span>
<span class="-8739450248327170568" onmouseenter="enter('-8739450248327170568');" onmouseout="out('-8739450248327170568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 624 +        ByteArrayOutputStream out = new ByteArrayOutputStream(size);                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 625 +        try {                                                                                                     </span>
<span class="-4781087380346520352" onmouseenter="enter('-4781087380346520352');" onmouseout="out('-4781087380346520352');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 626 +            bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);                                                 </span>
<span class="1246699851317198176" onmouseenter="enter('1246699851317198176');" onmouseout="out('1246699851317198176');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 627 +            out.flush();                                                                                          </span>
<span class="5013182197958409712" onmouseenter="enter('5013182197958409712');" onmouseout="out('5013182197958409712');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 628 +            out.close();                                                                                          </span>
<span class="8673371338796072548" onmouseenter="enter('8673371338796072548');" onmouseout="out('8673371338796072548');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 629 +            return out.toByteArray();                                                                             </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 630 +        } catch (IOException e) {                                                                                 </span>
<span class="7956524499064355744" onmouseenter="enter('7956524499064355744');" onmouseout="out('7956524499064355744');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 631 +            Log.w(TAG, &quot;Could not write bitmap&quot;);                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 632 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 633 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 634 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 635 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 636 +    /**                                                                                                           </span>
<span class="-6588275908342394580" onmouseenter="enter('-6588275908342394580');" onmouseout="out('-6588275908342394580');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 637 +     * Find the first vacant cell, if there is one.                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 638 +     *                                                                                                            </span>
<span class="2503255600921964703" onmouseenter="enter('2503255600921964703');" onmouseout="out('2503255600921964703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 639 +     * @param vacant Holds the x and y coordinate of the vacant cell                                              </span>
<span class="4033827775756481154" onmouseenter="enter('4033827775756481154');" onmouseout="out('4033827775756481154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 640 +     * @param spanX Horizontal cell span.                                                                         </span>
<span class="-3449734233772247568" onmouseenter="enter('-3449734233772247568');" onmouseout="out('-3449734233772247568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 641 +     * @param spanY Vertical cell span.                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 642 +     *                                                                                                            </span>
<span class="-2520380867733543515" onmouseenter="enter('-2520380867733543515');" onmouseout="out('-2520380867733543515');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 643 +     * @return true if a vacant cell was found                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 644 +     */                                                                                                           </span>
<span class="-3795506891981893742" onmouseenter="enter('-3795506891981893742');" onmouseout="out('-3795506891981893742');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 645 +    public static boolean findVacantCell(int[] vacant, int spanX, int spanY,                                      </span>
<span class="-8783446296633863064" onmouseenter="enter('-8783446296633863064');" onmouseout="out('-8783446296633863064');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 646 +            int xCount, int yCount, boolean[][] occupied) {                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 647 +                                                                                                                  </span>
<span class="-4617149385103036509" onmouseenter="enter('-4617149385103036509');" onmouseout="out('-4617149385103036509');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 648 +        for (int y = 0; (y + spanY) &lt;= yCount; y++) {                                                             </span>
<span class="-2519246593487215950" onmouseenter="enter('-2519246593487215950');" onmouseout="out('-2519246593487215950');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 649 +            for (int x = 0; (x + spanX) &lt;= xCount; x++) {                                                         </span>
<span class="-6044475844747713215" onmouseenter="enter('-6044475844747713215');" onmouseout="out('-6044475844747713215');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 650 +                boolean available = !occupied[x][y];                                                              </span>
<span class="-4926761125313010055" onmouseenter="enter('-4926761125313010055');" onmouseout="out('-4926761125313010055');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 651 +                out:            for (int i = x; i &lt; x + spanX; i++) {                                             </span>
<span class="6140954715248440627" onmouseenter="enter('6140954715248440627');" onmouseout="out('6140954715248440627');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 652 +                    for (int j = y; j &lt; y + spanY; j++) {                                                         </span>
<span class="-4206239266210524684" onmouseenter="enter('-4206239266210524684');" onmouseout="out('-4206239266210524684');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 653 +                        available = available &amp;&amp; !occupied[i][j];                                                 </span>
<span class="6135105910559606383" onmouseenter="enter('6135105910559606383');" onmouseout="out('6135105910559606383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 654 +                        if (!available) break out;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 655 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 656 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 657 +                                                                                                                  </span>
<span class="-6409233339093248287" onmouseenter="enter('-6409233339093248287');" onmouseout="out('-6409233339093248287');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 658 +                if (available) {                                                                                  </span>
<span class="-5516420008230606067" onmouseenter="enter('-5516420008230606067');" onmouseout="out('-5516420008230606067');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 659 +                    vacant[0] = x;                                                                                </span>
<span class="-8126960887413790406" onmouseenter="enter('-8126960887413790406');" onmouseout="out('-8126960887413790406');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 660 +                    vacant[1] = y;                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 661 +                    return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 662 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 663 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 664 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 665 +                                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 666 +        return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 667 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 668 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 669 +    /**                                                                                                           </span>
<span class="8016895904140865359" onmouseenter="enter('8016895904140865359');" onmouseout="out('8016895904140865359');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 670 +     * Trims the string, removing all whitespace at the beginning and end of the string.                          </span>
<span class="-5493577797153084569" onmouseenter="enter('-5493577797153084569');" onmouseout="out('-5493577797153084569');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 671 +     * Non-breaking whitespaces are also removed.                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 672 +     */                                                                                                           </span>
<span class="-2226334911462083775" onmouseenter="enter('-2226334911462083775');" onmouseout="out('-2226334911462083775');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 673 +    public static String trim(CharSequence s) {                                                                   </span>
<span class="8207541066373211073" onmouseenter="enter('8207541066373211073');" onmouseout="out('8207541066373211073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 674 +        if (s == null) {                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 675 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 676 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 677 +                                                                                                                  </span>
<span class="6752452014249628571" onmouseenter="enter('6752452014249628571');" onmouseout="out('6752452014249628571');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 678 +        // Just strip any sequence of whitespace or java space characters from the beginning and end              </span>
<span class="5219283686268968354" onmouseenter="enter('5219283686268968354');" onmouseout="out('5219283686268968354');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 679 +        Matcher m = sTrimPattern.matcher(s);                                                                      </span>
<span class="-3983369353860878309" onmouseenter="enter('-3983369353860878309');" onmouseout="out('-3983369353860878309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 680 +        return m.replaceAll(&quot;$1&quot;);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 681 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 682 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 683 +    /**                                                                                                           </span>
<span class="-2988865143176305923" onmouseenter="enter('-2988865143176305923');" onmouseout="out('-2988865143176305923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 684 +     * Calculates the height of a given string at a specific text size.                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 685 +     */                                                                                                           </span>
<span class="3237069305992905572" onmouseenter="enter('3237069305992905572');" onmouseout="out('3237069305992905572');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 686 +    public static float calculateTextHeight(float textSizePx) {                                                   </span>
<span class="1999028099572700086" onmouseenter="enter('1999028099572700086');" onmouseout="out('1999028099572700086');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 687 +        Paint p = new Paint();                                                                                    </span>
<span class="917273269030490193" onmouseenter="enter('917273269030490193');" onmouseout="out('917273269030490193');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 688 +        p.setTextSize(textSizePx);                                                                                </span>
<span class="-8241169586934208490" onmouseenter="enter('-8241169586934208490');" onmouseout="out('-8241169586934208490');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 689 +        Paint.FontMetrics fm = p.getFontMetrics();                                                                </span>
<span class="-1517506744254696060" onmouseenter="enter('-1517506744254696060');" onmouseout="out('-1517506744254696060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 690 +        return -fm.top + fm.bottom;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 691 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 692 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 693 +    /**                                                                                                           </span>
<span class="6448536046662163494" onmouseenter="enter('6448536046662163494');" onmouseout="out('6448536046662163494');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 694 +     * Convenience println with multiple args.                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 695 +     */                                                                                                           </span>
<span class="-3661024453027515051" onmouseenter="enter('-3661024453027515051');" onmouseout="out('-3661024453027515051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 696 +    public static void println(String key, Object... args) {                                                      </span>
<span class="4224744888489149041" onmouseenter="enter('4224744888489149041');" onmouseout="out('4224744888489149041');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 697 +        StringBuilder b = new StringBuilder();                                                                    </span>
<span class="-6494571071398948190" onmouseenter="enter('-6494571071398948190');" onmouseout="out('-6494571071398948190');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 698 +        b.append(key);                                                                                            </span>
<span class="3149522492802233976" onmouseenter="enter('3149522492802233976');" onmouseout="out('3149522492802233976');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 699 +        b.append(&quot;: &quot;);                                                                                           </span>
<span class="-3867183354633138218" onmouseenter="enter('-3867183354633138218');" onmouseout="out('-3867183354633138218');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 700 +        boolean isFirstArgument = true;                                                                           </span>
<span class="4930952806349292087" onmouseenter="enter('4930952806349292087');" onmouseout="out('4930952806349292087');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 701 +        for (Object arg : args) {                                                                                 </span>
<span class="2611054600934311831" onmouseenter="enter('2611054600934311831');" onmouseout="out('2611054600934311831');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 702 +            if (isFirstArgument) {                                                                                </span>
<span class="-7008608319651418815" onmouseenter="enter('-7008608319651418815');" onmouseout="out('-7008608319651418815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 703 +                isFirstArgument = false;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 704 +            } else {                                                                                              </span>
<span class="7277933927684441937" onmouseenter="enter('7277933927684441937');" onmouseout="out('7277933927684441937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 705 +                b.append(&quot;, &quot;);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 706 +            }                                                                                                     </span>
<span class="-6918144193114510" onmouseenter="enter('-6918144193114510');" onmouseout="out('-6918144193114510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 707 +            b.append(arg);                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 708 +        }                                                                                                         </span>
<span class="6306736576653323559" onmouseenter="enter('6306736576653323559');" onmouseout="out('6306736576653323559');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 709 +        System.out.println(b.toString());                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 710 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 711 +                                                                                                                  </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 712 +    @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                                </span>
<span class="6706641044237115049" onmouseenter="enter('6706641044237115049');" onmouseout="out('6706641044237115049');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 713 +    public static boolean isRtl(Resources res) {                                                                  </span>
<span class="-3807300280994787598" onmouseenter="enter('-3807300280994787598');" onmouseout="out('-3807300280994787598');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 714 +        return (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &amp;&amp;                                   </span>
<span class="-6381041904087975678" onmouseenter="enter('-6381041904087975678');" onmouseout="out('-6381041904087975678');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 715 +                (res.getConfiguration().getLayoutDirection() == View.LAYOUT_DIRECTION_RTL);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 716 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 717 +                                                                                                                  </span>
<span class="7745027086805008166" onmouseenter="enter('7745027086805008166');" onmouseout="out('7745027086805008166');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 718 +    public static void assertWorkerThread() {                                                                     </span>
<span class="9134597883085590362" onmouseenter="enter('9134597883085590362');" onmouseout="out('9134597883085590362');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 719 +        if (LauncherAppState.isDogfoodBuild() &amp;&amp;                                                                  </span>
<span class="-6981789448421478045" onmouseenter="enter('-6981789448421478045');" onmouseout="out('-6981789448421478045');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 720 +                (LauncherModel.sWorkerThread.getThreadId() != Process.myTid())) {                                 </span>
<span class="9035044908675802484" onmouseenter="enter('9035044908675802484');" onmouseout="out('9035044908675802484');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 721 +            throw new IllegalStateException();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 722 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 723 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 724 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 725 +    /**                                                                                                           </span>
<span class="-1474801224471826037" onmouseenter="enter('-1474801224471826037');" onmouseout="out('-1474801224471826037');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 726 +     * Returns true if the intent is a valid launch intent for a launcher activity of an app.                     </span>
<span class="6585786963246605309" onmouseenter="enter('6585786963246605309');" onmouseout="out('6585786963246605309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 727 +     * This is used to identify shortcuts which are different from the ones exposed by the                        </span>
<span class="-4023082809467763476" onmouseenter="enter('-4023082809467763476');" onmouseout="out('-4023082809467763476');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 728 +     * applications&#x27; manifest file.                                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 729 +     *                                                                                                            </span>
<span class="-450668369620467316" onmouseenter="enter('-450668369620467316');" onmouseout="out('-450668369620467316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 730 +     * @param launchIntent The intent that will be launched when the shortcut is clicked.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 731 +     */                                                                                                           </span>
<span class="-2895511923085128680" onmouseenter="enter('-2895511923085128680');" onmouseout="out('-2895511923085128680');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 732 +    public static boolean isLauncherAppTarget(Intent launchIntent) {                                              </span>
<span class="-2387975119110806937" onmouseenter="enter('-2387975119110806937');" onmouseout="out('-2387975119110806937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 733 +        if (launchIntent != null                                                                                  </span>
<span class="5458468825391823724" onmouseenter="enter('5458468825391823724');" onmouseout="out('5458468825391823724');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 734 +                &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())                                            </span>
<span class="-8557547063293546194" onmouseenter="enter('-8557547063293546194');" onmouseout="out('-8557547063293546194');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 735 +                &amp;&amp; launchIntent.getComponent() != null                                                            </span>
<span class="1111365987588044694" onmouseenter="enter('1111365987588044694');" onmouseout="out('1111365987588044694');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 736 +                &amp;&amp; launchIntent.getCategories() != null                                                           </span>
<span class="8511800567412215627" onmouseenter="enter('8511800567412215627');" onmouseout="out('8511800567412215627');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 737 +                &amp;&amp; launchIntent.getCategories().size() == 1                                                       </span>
<span class="674036002274441191" onmouseenter="enter('674036002274441191');" onmouseout="out('674036002274441191');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 738 +                &amp;&amp; launchIntent.hasCategory(Intent.CATEGORY_LAUNCHER)                                             </span>
<span class="3608633544114930920" onmouseenter="enter('3608633544114930920');" onmouseout="out('3608633544114930920');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 739 +                &amp;&amp; TextUtils.isEmpty(launchIntent.getDataString())) {                                             </span>
<span class="-8928317571259330246" onmouseenter="enter('-8928317571259330246');" onmouseout="out('-8928317571259330246');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 740 +            // An app target can either have no extra or have ItemInfo.EXTRA_PROFILE.                             </span>
<span class="-7448063824548237845" onmouseenter="enter('-7448063824548237845');" onmouseout="out('-7448063824548237845');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 741 +            Bundle extras = launchIntent.getExtras();                                                             </span>
<span class="3231714309982698113" onmouseenter="enter('3231714309982698113');" onmouseout="out('3231714309982698113');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 742 +            if (extras == null) {                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 743 +                return true;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 744 +            } else {                                                                                              </span>
<span class="-5848873234981662305" onmouseenter="enter('-5848873234981662305');" onmouseout="out('-5848873234981662305');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 745 +                Set&lt;String&gt; keys = extras.keySet();                                                               </span>
<span class="-5856689159284471907" onmouseenter="enter('-5856689159284471907');" onmouseout="out('-5856689159284471907');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 746 +                return keys.size() == 1 &amp;&amp; keys.contains(ItemInfo.EXTRA_PROFILE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 747 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 748 +        };                                                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 749 +        return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 750 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 751 +                                                                                                                  </span>
<span class="6672516174829348824" onmouseenter="enter('6672516174829348824');" onmouseout="out('6672516174829348824');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 752 +    public static float dpiFromPx(int size, DisplayMetrics metrics){                                              </span>
<span class="1954388547550632323" onmouseenter="enter('1954388547550632323');" onmouseout="out('1954388547550632323');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 753 +        float densityRatio = (float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT;                         </span>
<span class="6040406764349731403" onmouseenter="enter('6040406764349731403');" onmouseout="out('6040406764349731403');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 754 +        return (size / densityRatio);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 755 +    }                                                                                                             </span>
<span class="4669549645205847924" onmouseenter="enter('4669549645205847924');" onmouseout="out('4669549645205847924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 756 +    public static int pxFromDp(float size, DisplayMetrics metrics) {                                              </span>
<span class="-6600010791620633138" onmouseenter="enter('-6600010791620633138');" onmouseout="out('-6600010791620633138');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 757 +        return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,                            </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 758 +                size, metrics));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 759 +    }                                                                                                             </span>
<span class="8174843599380599011" onmouseenter="enter('8174843599380599011');" onmouseout="out('8174843599380599011');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 760 +    public static int pxFromSp(float size, DisplayMetrics metrics) {                                              </span>
<span class="3954369763209540394" onmouseenter="enter('3954369763209540394');" onmouseout="out('3954369763209540394');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 761 +        return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP,                             </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 762 +                size, metrics));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 763 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 764 +                                                                                                                  </span>
<span class="8396926495000728032" onmouseenter="enter('8396926495000728032');" onmouseout="out('8396926495000728032');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 765 +    public static String createDbSelectionQuery(String columnName, Iterable&lt;?&gt; values) {                          </span>
<span class="-9051894453369877823" onmouseenter="enter('-9051894453369877823');" onmouseout="out('-9051894453369877823');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 766 +        return String.format(Locale.ENGLISH, &quot;%s IN (%s)&quot;, columnName, TextUtils.join(&quot;, &quot;, values));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 767 +    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            