<!DOCTYPE html>
<html lang="en">
          <head>
            <meta charset="utf-8">
            <title>142 chunks</title>
                <style>
                    #top {
                        height: 48vh;
                        overflow-y: auto;
                    }
                    #bottom {
                        height: 48vh;
                        overflow-y: auto;
                    }
                </style>
          </head>
          <body>
            <pre>[[{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;                boolean isCatalog = false;\n&#x27;
                         &#x27;                &#x27;
                         &#x27;if(&quot;embeddableCatalogTenantDiscriminator.catalogDiscriminator&quot;.equals(fieldName)){\n&#x27;
                         &#x27;                    fieldName = &#x27;
                         &#x27;solrHelperService.getCatalogFieldName();\n&#x27;
                         &#x27;                    isCatalog = true;\n&#x27;
                         &#x27;                    indexFieldTypes = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                    indexFieldTypes.add(new &#x27;
                         &#x27;IndexFieldTypeImpl());\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                if (indexFieldTypes.size() &gt; 0) {\n&#x27;
                         &#x27;                    Boolean translatable = &#x27;
                         &#x27;!isCatalog &amp;&amp; &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;
                         &#x27;                    List&lt;Locale&gt; allLocales;\n&#x27;
                         &#x27;                    if (translatable==null || &#x27;
                         &#x27;!translatable) {\n&#x27;
                         &#x27;                        allLocales = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                        LocaleImpl e = new &#x27;
                         &#x27;LocaleImpl();\n&#x27;
                         &#x27;                        e.setLocaleCode(&quot;&quot;);\n&#x27;
                         &#x27;                        allLocales.add(e);\n&#x27;
                         &#x27;                    } else {\n&#x27;
                         &#x27;                        allLocales = &#x27;
                         &#x27;localeService.findAllLocales();\n&#x27;
                         &#x27;                    }\n&#x27;
                         &#x27;                    List&lt;String&gt; tmpFilters = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                    String abbreviation = isCatalog &#x27;
                         &#x27;? &quot;&quot;: &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;
                         &#x27;                    for (Locale locale : allLocales) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;                        for (IndexFieldType &#x27;
                         &#x27;indexFieldType : indexFieldTypes) {\n&#x27;
                         &#x27;                            String type = isCatalog &#x27;
                         &#x27;? &quot;&quot; :indexFieldType.getFieldType().getType();\n&#x27;
                         &#x27;                            if (!isWildCardSearch || &#x27;
                         &#x27;FieldType.STRING.getType().equals(type) || &#x27;
                         &#x27;isCatalog) {\n&#x27;
                         &#x27;                                String prefix;\n&#x27;
                         &#x27;                                if &#x27;
                         &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) {\n&#x27;
                         &#x27;                                    prefix = &#x27;
                         &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                         &#x27;                                } else {\n&#x27;
                         &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                                String &#x27;
                         &#x27;indexFieldName = isCatalog ? fieldName : (prefix + &#x27;
                         &#x27;abbreviation + &quot;_&quot; + type);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;                if (indexFieldTypes.size() &gt; 0) {\n&#x27;
                           &#x27;                    Boolean translatable = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;
                           &#x27;                    List&lt;Locale&gt; allLocales;\n&#x27;
                           &#x27;                    if (translatable==null || &#x27;
                           &#x27;!translatable) {\n&#x27;
                           &#x27;                        allLocales = new &#x27;
                           &#x27;ArrayList&lt;&gt;();\n&#x27;
                           &#x27;                        LocaleImpl e = new &#x27;
                           &#x27;LocaleImpl();\n&#x27;
                           &#x27;                        e.setLocaleCode(&quot;&quot;);\n&#x27;
                           &#x27;                        allLocales.add(e);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        allLocales = &#x27;
                           &#x27;localeService.findAllLocales();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                    List&lt;String&gt; tmpFilters = new &#x27;
                           &#x27;ArrayList&lt;&gt;();\n&#x27;
                           &#x27;                    String abbreviation = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;
                           &#x27;                    for (Locale locale : &#x27;
                           &#x27;allLocales) {\n&#x27;
                           &#x27;                        for (IndexFieldType &#x27;
                           &#x27;indexFieldType : indexFieldTypes) {\n&#x27;
                           &#x27;                            String type = &#x27;
                           &#x27;indexFieldType.getFieldType().getType();\n&#x27;
                           &#x27;                            if (!isWildCardSearch &#x27;
                           &#x27;|| FieldType.STRING.getType().equals(type)) {\n&#x27;
                           &#x27;                                String prefix;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                    prefix = &#x27;
                           &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                           &#x27;                                } else {\n&#x27;
                           &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                                String &#x27;
                           &#x27;indexFieldName = prefix + abbreviation + &quot;_&quot; + &#x27;
                           &#x27;type;\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;                boolean isCatalog = false;\n&#x27;
                         &#x27;                &#x27;
                         &#x27;if(&quot;embeddableCatalogTenantDiscriminator.catalogDiscriminator&quot;.equals(fieldName)){\n&#x27;
                         &#x27;                    fieldName = &#x27;
                         &#x27;solrHelperService.getCatalogFieldName();\n&#x27;
                         &#x27;                    isCatalog = true;\n&#x27;
                         &#x27;                    indexFieldTypes = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                    indexFieldTypes.add(new &#x27;
                         &#x27;IndexFieldTypeImpl());\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                if (indexFieldTypes.size() &gt; 0) {\n&#x27;
                         &#x27;                    Boolean translatable = &#x27;
                         &#x27;!isCatalog &amp;&amp; &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;
                         &#x27;                    List&lt;Locale&gt; allLocales;\n&#x27;
                         &#x27;                    if (translatable==null || &#x27;
                         &#x27;!translatable) {\n&#x27;
                         &#x27;                        allLocales = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                        LocaleImpl e = new &#x27;
                         &#x27;LocaleImpl();\n&#x27;
                         &#x27;                        e.setLocaleCode(&quot;&quot;);\n&#x27;
                         &#x27;                        allLocales.add(e);\n&#x27;
                         &#x27;                    } else {\n&#x27;
                         &#x27;                        allLocales = &#x27;
                         &#x27;localeService.findAllLocales();\n&#x27;
                         &#x27;                    }\n&#x27;
                         &#x27;                    List&lt;String&gt; tmpFilters = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                    String abbreviation = isCatalog &#x27;
                         &#x27;? &quot;&quot;: &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;
                         &#x27;                    for (Locale locale : allLocales) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;                        for (IndexFieldType &#x27;
                         &#x27;indexFieldType : indexFieldTypes) {\n&#x27;
                         &#x27;                            String type = isCatalog &#x27;
                         &#x27;? &quot;&quot; :indexFieldType.getFieldType().getType();\n&#x27;
                         &#x27;                            if (!isWildCardSearch || &#x27;
                         &#x27;FieldType.STRING.getType().equals(type) || &#x27;
                         &#x27;isCatalog) {\n&#x27;
                         &#x27;                                String prefix;\n&#x27;
                         &#x27;                                if &#x27;
                         &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) {\n&#x27;
                         &#x27;                                    prefix = &#x27;
                         &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                         &#x27;                                } else {\n&#x27;
                         &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                                String &#x27;
                         &#x27;indexFieldName = isCatalog ? fieldName : (prefix + &#x27;
                         &#x27;abbreviation + &quot;_&quot; + type);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;                if (indexFieldTypes.size() &gt; 0) {\n&#x27;
                           &#x27;                    Boolean translatable = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;
                           &#x27;                    List&lt;Locale&gt; allLocales;\n&#x27;
                           &#x27;                    if (translatable==null || &#x27;
                           &#x27;!translatable) {\n&#x27;
                           &#x27;                        allLocales = new &#x27;
                           &#x27;ArrayList&lt;&gt;();\n&#x27;
                           &#x27;                        LocaleImpl e = new &#x27;
                           &#x27;LocaleImpl();\n&#x27;
                           &#x27;                        e.setLocaleCode(&quot;&quot;);\n&#x27;
                           &#x27;                        allLocales.add(e);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        allLocales = &#x27;
                           &#x27;localeService.findAllLocales();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                    List&lt;String&gt; tmpFilters = new &#x27;
                           &#x27;ArrayList&lt;&gt;();\n&#x27;
                           &#x27;                    String abbreviation = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;
                           &#x27;                    for (Locale locale : &#x27;
                           &#x27;allLocales) {\n&#x27;
                           &#x27;                        for (IndexFieldType &#x27;
                           &#x27;indexFieldType : indexFieldTypes) {\n&#x27;
                           &#x27;                            String type = &#x27;
                           &#x27;indexFieldType.getFieldType().getType();\n&#x27;
                           &#x27;                            if (!isWildCardSearch &#x27;
                           &#x27;|| FieldType.STRING.getType().equals(type)) {\n&#x27;
                           &#x27;                                String prefix;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                    prefix = &#x27;
                           &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                           &#x27;                                } else {\n&#x27;
                           &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                                String &#x27;
                           &#x27;indexFieldName = prefix + abbreviation + &quot;_&quot; + &#x27;
                           &#x27;type;\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;    // Expected Custom Field Rule Formats\n&#x27;
                         &#x27;    // Equals - &#x27;
                         &#x27;product.?getProductAttributes()[&quot;custom_field_name&quot;]==&quot;custom &#x27;
                         &#x27;field value&quot;\n&#x27;
                         &#x27;    // Contains - &#x27;
                         &#x27;MvelHelper.toUpperCase(product.?getProductAttributes()[&quot;custom_field_name&quot;]).contains(MvelHelper.toUpperCase(&quot;custom &#x27;
                         &#x27;field value&quot;))\n&#x27;
                         &#x27;    // Also supports string property contains, not &#x27;
                         &#x27;contains, starts with, ends with etc.\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;    // Expected Custom Field Rule Formats\n&#x27;
                           &#x27;    // Equals - &#x27;
                           &#x27;product.?getProductAttributes()[&quot;custom_field_name&quot;]==&quot;custom &#x27;
                           &#x27;field value&quot;\n&#x27;
                           &#x27;    // Contains - &#x27;
                           &#x27;MvelHelper.toUpperCase(product.?getProductAttributes()[&quot;custom_field_name&quot;]).contains(MvelHelper.toUpperCase(&quot;custom &#x27;
                           &#x27;field value&quot;))\n&#x27;
                           &#x27;    // Also supports string property contains, not &#x27;
                           &#x27;contains, starts with, ends with etc.\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;                    Boolean translatable = &#x27;
                         &#x27;!isCatalog &amp;&amp; &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;                    Boolean translatable = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;                    String abbreviation = isCatalog &#x27;
                         &#x27;? &quot;&quot;: &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;                    String abbreviation = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;                            String type = isCatalog &#x27;
                         &#x27;? &quot;&quot; :indexFieldType.getFieldType().getType();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;                String type = &#x27;
                           &#x27;indexFieldType.getFieldType().getType();\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;!isWildCardSearch || &#x27;
                         &#x27;FieldType.STRING.getType().equals(type) || &#x27;
                         &#x27;isCatalog\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;!isWildCardSearch || &#x27;
                           &#x27;FieldType.STRING.getType().equals(type)\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;{\n&#x27;
                         &#x27;            customFieldQuery = &quot;*:*&amp;fq=(&quot;;\n&#x27;
                         &#x27;            for (IndexFieldType indexFieldType : &#x27;
                         &#x27;indexFieldTypes) {\n&#x27;
                         &#x27;                String type = &#x27;
                         &#x27;indexFieldType.getFieldType().getType();\n&#x27;
                         &#x27;                String indexFieldName = &#x27;
                         &#x27;customFieldPropertyName + &quot;_&quot; + type;\n&#x27;
                         &#x27;                String indexFieldValue = &quot;\\&quot;&quot; + &#x27;
                         &#x27;customFieldValue + &quot;\\&quot;&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                if (!isFirstItem(customFieldQuery)) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;                    customFieldQuery += &quot; OR &quot;;\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                customFieldQuery += indexFieldName + &#x27;
                         &#x27;&quot;:&quot; + indexFieldValue;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            customFieldQuery += &quot;)&quot;;\n&#x27;
                         &#x27;        }\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                String prefix;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                    prefix = &#x27;
                           &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                           &#x27;                                } else {\n&#x27;
                           &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                                String &#x27;
                           &#x27;indexFieldName = prefix + abbreviation + &quot;_&quot; + &#x27;
                           &#x27;type;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                                // if this is a &#x27;
                           &#x27;wildcard search then we do not want to surround &#x27;
                           &#x27;the value with quotes\n&#x27;
                           &#x27;                                String &#x27;
                           &#x27;indexFieldValue = fieldValue;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(!isWildCardSearch &amp;&amp; !fieldValue.equals(&quot;null&quot;)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;if(fieldValue.contains(&quot;\\&quot;,\\&quot;&quot;)){\n&#x27;
                           &#x27;                                        &#x27;
                           &#x27;indexFieldValue = &quot;(\\&quot;&quot; + fieldValue + &quot;\\&quot;)&quot;;\n&#x27;
                           &#x27;                                    }else {\n&#x27;
                           &#x27;                                        &#x27;
                           &#x27;indexFieldValue = &quot;\\&quot;&quot; + fieldValue + &quot;\\&quot;&quot;;\n&#x27;
                           &#x27;                                    }\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                                String filter;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(indexFieldValue.equals(&quot;null&quot;)) {\n&#x27;
                           &#x27;                                    // this is for &#x27;
                           &#x27;checking if null or non-existent fields\n&#x27;
                           &#x27;                                    filter = &quot;(*:* &#x27;
                           &#x27;AND -&quot; + indexFieldName + &quot;:[* TO *])&quot;;\n&#x27;
                           &#x27;                                } else {\n&#x27;
                           &#x27;                                    filter = &#x27;
                           &#x27;indexFieldName + &quot;:&quot; + indexFieldValue;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                                if (exclude) {\n&#x27;
                           &#x27;                                    filter = &quot;NOT &#x27;
                           &#x27;&quot; + filter;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;tmpFilters.add(filter);\n&#x27;
                           &#x27;                            }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;                        s\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n                        s\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}}],
 [{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;                boolean isCatalog = false;\n&#x27;
                         &#x27;                &#x27;
                         &#x27;if(&quot;embeddableCatalogTenantDiscriminator.catalogDiscriminator&quot;.equals(fieldName)){\n&#x27;
                         &#x27;                    fieldName = &#x27;
                         &#x27;solrHelperService.getCatalogFieldName();\n&#x27;
                         &#x27;                    isCatalog = true;\n&#x27;
                         &#x27;                    indexFieldTypes = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                    indexFieldTypes.add(new &#x27;
                         &#x27;IndexFieldTypeImpl());\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                if (indexFieldTypes.size() &gt; 0) {\n&#x27;
                         &#x27;                    Boolean translatable = &#x27;
                         &#x27;!isCatalog &amp;&amp; &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;
                         &#x27;                    List&lt;Locale&gt; allLocales;\n&#x27;
                         &#x27;                    if (translatable==null || &#x27;
                         &#x27;!translatable) {\n&#x27;
                         &#x27;                        allLocales = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                        LocaleImpl e = new &#x27;
                         &#x27;LocaleImpl();\n&#x27;
                         &#x27;                        e.setLocaleCode(&quot;&quot;);\n&#x27;
                         &#x27;                        allLocales.add(e);\n&#x27;
                         &#x27;                    } else {\n&#x27;
                         &#x27;                        allLocales = &#x27;
                         &#x27;localeService.findAllLocales();\n&#x27;
                         &#x27;                    }\n&#x27;
                         &#x27;                    List&lt;String&gt; tmpFilters = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                    String abbreviation = isCatalog &#x27;
                         &#x27;? &quot;&quot;: &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;
                         &#x27;                    for (Locale locale : allLocales) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;                        for (IndexFieldType &#x27;
                         &#x27;indexFieldType : indexFieldTypes) {\n&#x27;
                         &#x27;                            String type = isCatalog &#x27;
                         &#x27;? &quot;&quot; :indexFieldType.getFieldType().getType();\n&#x27;
                         &#x27;                            if (!isWildCardSearch || &#x27;
                         &#x27;FieldType.STRING.getType().equals(type) || &#x27;
                         &#x27;isCatalog) {\n&#x27;
                         &#x27;                                String prefix;\n&#x27;
                         &#x27;                                if &#x27;
                         &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) {\n&#x27;
                         &#x27;                                    prefix = &#x27;
                         &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                         &#x27;                                } else {\n&#x27;
                         &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                                String &#x27;
                         &#x27;indexFieldName = isCatalog ? fieldName : (prefix + &#x27;
                         &#x27;abbreviation + &quot;_&quot; + type);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;                if (indexFieldTypes.size() &gt; 0) {\n&#x27;
                           &#x27;                    Boolean translatable = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;
                           &#x27;                    List&lt;Locale&gt; allLocales;\n&#x27;
                           &#x27;                    if (translatable==null || &#x27;
                           &#x27;!translatable) {\n&#x27;
                           &#x27;                        allLocales = new &#x27;
                           &#x27;ArrayList&lt;&gt;();\n&#x27;
                           &#x27;                        LocaleImpl e = new &#x27;
                           &#x27;LocaleImpl();\n&#x27;
                           &#x27;                        e.setLocaleCode(&quot;&quot;);\n&#x27;
                           &#x27;                        allLocales.add(e);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        allLocales = &#x27;
                           &#x27;localeService.findAllLocales();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                    List&lt;String&gt; tmpFilters = new &#x27;
                           &#x27;ArrayList&lt;&gt;();\n&#x27;
                           &#x27;                    String abbreviation = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;
                           &#x27;                    for (Locale locale : &#x27;
                           &#x27;allLocales) {\n&#x27;
                           &#x27;                        for (IndexFieldType &#x27;
                           &#x27;indexFieldType : indexFieldTypes) {\n&#x27;
                           &#x27;                            String type = &#x27;
                           &#x27;indexFieldType.getFieldType().getType();\n&#x27;
                           &#x27;                            if (!isWildCardSearch &#x27;
                           &#x27;|| FieldType.STRING.getType().equals(type)) {\n&#x27;
                           &#x27;                                String prefix;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                    prefix = &#x27;
                           &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                           &#x27;                                } else {\n&#x27;
                           &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                                String &#x27;
                           &#x27;indexFieldName = prefix + abbreviation + &quot;_&quot; + &#x27;
                           &#x27;type;\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;                boolean isCatalog = false;\n&#x27;
                         &#x27;                &#x27;
                         &#x27;if(&quot;embeddableCatalogTenantDiscriminator.catalogDiscriminator&quot;.equals(fieldName)){\n&#x27;
                         &#x27;                    fieldName = &#x27;
                         &#x27;solrHelperService.getCatalogFieldName();\n&#x27;
                         &#x27;                    isCatalog = true;\n&#x27;
                         &#x27;                    indexFieldTypes = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                    indexFieldTypes.add(new &#x27;
                         &#x27;IndexFieldTypeImpl());\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                if (indexFieldTypes.size() &gt; 0) {\n&#x27;
                         &#x27;                    Boolean translatable = &#x27;
                         &#x27;!isCatalog &amp;&amp; &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;
                         &#x27;                    List&lt;Locale&gt; allLocales;\n&#x27;
                         &#x27;                    if (translatable==null || &#x27;
                         &#x27;!translatable) {\n&#x27;
                         &#x27;                        allLocales = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                        LocaleImpl e = new &#x27;
                         &#x27;LocaleImpl();\n&#x27;
                         &#x27;                        e.setLocaleCode(&quot;&quot;);\n&#x27;
                         &#x27;                        allLocales.add(e);\n&#x27;
                         &#x27;                    } else {\n&#x27;
                         &#x27;                        allLocales = &#x27;
                         &#x27;localeService.findAllLocales();\n&#x27;
                         &#x27;                    }\n&#x27;
                         &#x27;                    List&lt;String&gt; tmpFilters = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;                    String abbreviation = isCatalog &#x27;
                         &#x27;? &quot;&quot;: &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;
                         &#x27;                    for (Locale locale : allLocales) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;                        for (IndexFieldType &#x27;
                         &#x27;indexFieldType : indexFieldTypes) {\n&#x27;
                         &#x27;                            String type = isCatalog &#x27;
                         &#x27;? &quot;&quot; :indexFieldType.getFieldType().getType();\n&#x27;
                         &#x27;                            if (!isWildCardSearch || &#x27;
                         &#x27;FieldType.STRING.getType().equals(type) || &#x27;
                         &#x27;isCatalog) {\n&#x27;
                         &#x27;                                String prefix;\n&#x27;
                         &#x27;                                if &#x27;
                         &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) {\n&#x27;
                         &#x27;                                    prefix = &#x27;
                         &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                         &#x27;                                } else {\n&#x27;
                         &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                                String &#x27;
                         &#x27;indexFieldName = isCatalog ? fieldName : (prefix + &#x27;
                         &#x27;abbreviation + &quot;_&quot; + type);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;                if (indexFieldTypes.size() &gt; 0) {\n&#x27;
                           &#x27;                    Boolean translatable = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;
                           &#x27;                    List&lt;Locale&gt; allLocales;\n&#x27;
                           &#x27;                    if (translatable==null || &#x27;
                           &#x27;!translatable) {\n&#x27;
                           &#x27;                        allLocales = new &#x27;
                           &#x27;ArrayList&lt;&gt;();\n&#x27;
                           &#x27;                        LocaleImpl e = new &#x27;
                           &#x27;LocaleImpl();\n&#x27;
                           &#x27;                        e.setLocaleCode(&quot;&quot;);\n&#x27;
                           &#x27;                        allLocales.add(e);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        allLocales = &#x27;
                           &#x27;localeService.findAllLocales();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                    List&lt;String&gt; tmpFilters = new &#x27;
                           &#x27;ArrayList&lt;&gt;();\n&#x27;
                           &#x27;                    String abbreviation = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;
                           &#x27;                    for (Locale locale : &#x27;
                           &#x27;allLocales) {\n&#x27;
                           &#x27;                        for (IndexFieldType &#x27;
                           &#x27;indexFieldType : indexFieldTypes) {\n&#x27;
                           &#x27;                            String type = &#x27;
                           &#x27;indexFieldType.getFieldType().getType();\n&#x27;
                           &#x27;                            if (!isWildCardSearch &#x27;
                           &#x27;|| FieldType.STRING.getType().equals(type)) {\n&#x27;
                           &#x27;                                String prefix;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                    prefix = &#x27;
                           &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                           &#x27;                                } else {\n&#x27;
                           &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                                String &#x27;
                           &#x27;indexFieldName = prefix + abbreviation + &quot;_&quot; + &#x27;
                           &#x27;type;\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;                    Boolean translatable = &#x27;
                         &#x27;!isCatalog &amp;&amp; &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;                    Boolean translatable = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getTranslatable();\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;                    String abbreviation = isCatalog &#x27;
                         &#x27;? &quot;&quot;: &#x27;
                         &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;                    String abbreviation = &#x27;
                           &#x27;indexFieldTypes.get(0).getIndexField().getField().getAbbreviation();\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;                            String type = isCatalog &#x27;
                         &#x27;? &quot;&quot; :indexFieldType.getFieldType().getType();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;                String type = &#x27;
                           &#x27;indexFieldType.getFieldType().getType();\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;!isWildCardSearch || &#x27;
                         &#x27;FieldType.STRING.getType().equals(type) || &#x27;
                         &#x27;isCatalog\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;!isWildCardSearch || &#x27;
                           &#x27;FieldType.STRING.getType().equals(type)\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;                        s\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n                        s\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;, &#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;    // Expected Custom Field Rule Formats\n&#x27;
                         &#x27;    // Equals - &#x27;
                         &#x27;product.?getProductAttributes()[&quot;custom_field_name&quot;]==&quot;custom &#x27;
                         &#x27;field value&quot;\n&#x27;
                         &#x27;    // Contains - &#x27;
                         &#x27;MvelHelper.toUpperCase(product.?getProductAttributes()[&quot;custom_field_name&quot;]).contains(MvelHelper.toUpperCase(&quot;custom &#x27;
                         &#x27;field value&quot;))\n&#x27;
                         &#x27;    // Also supports string property contains, not &#x27;
                         &#x27;contains, starts with, ends with etc.\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;    // Expected Custom Field Rule Formats\n&#x27;
                           &#x27;    // Equals - &#x27;
                           &#x27;product.?getProductAttributes()[&quot;custom_field_name&quot;]==&quot;custom &#x27;
                           &#x27;field value&quot;\n&#x27;
                           &#x27;    // Contains - &#x27;
                           &#x27;MvelHelper.toUpperCase(product.?getProductAttributes()[&quot;custom_field_name&quot;]).contains(MvelHelper.toUpperCase(&quot;custom &#x27;
                           &#x27;field value&quot;))\n&#x27;
                           &#x27;    // Also supports string property contains, not &#x27;
                           &#x27;contains, starts with, ends with etc.\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;{\n&#x27;
                         &#x27;            customFieldQuery = &quot;*:*&amp;fq=(&quot;;\n&#x27;
                         &#x27;            for (IndexFieldType indexFieldType : &#x27;
                         &#x27;indexFieldTypes) {\n&#x27;
                         &#x27;                String type = &#x27;
                         &#x27;indexFieldType.getFieldType().getType();\n&#x27;
                         &#x27;                String indexFieldName = &#x27;
                         &#x27;customFieldPropertyName + &quot;_&quot; + type;\n&#x27;
                         &#x27;                String indexFieldValue = &quot;\\&quot;&quot; + &#x27;
                         &#x27;customFieldValue + &quot;\\&quot;&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                if (!isFirstItem(customFieldQuery)) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;                    customFieldQuery += &quot; OR &quot;;\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                customFieldQuery += indexFieldName + &#x27;
                         &#x27;&quot;:&quot; + indexFieldValue;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            customFieldQuery += &quot;)&quot;;\n&#x27;
                         &#x27;        }\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                String prefix;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(StringUtils.isNotEmpty(locale.getLocaleCode())) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                    prefix = &#x27;
                           &#x27;locale.getLocaleCode() + &quot;_&quot;;\n&#x27;
                           &#x27;                                } else {\n&#x27;
                           &#x27;                                    prefix = &quot;&quot;;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                                String &#x27;
                           &#x27;indexFieldName = prefix + abbreviation + &quot;_&quot; + &#x27;
                           &#x27;type;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                                // if this is a &#x27;
                           &#x27;wildcard search then we do not want to surround &#x27;
                           &#x27;the value with quotes\n&#x27;
                           &#x27;                                String &#x27;
                           &#x27;indexFieldValue = fieldValue;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(!isWildCardSearch &amp;&amp; !fieldValue.equals(&quot;null&quot;)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;if(fieldValue.contains(&quot;\\&quot;,\\&quot;&quot;)){\n&#x27;
                           &#x27;                                        &#x27;
                           &#x27;indexFieldValue = &quot;(\\&quot;&quot; + fieldValue + &quot;\\&quot;)&quot;;\n&#x27;
                           &#x27;                                    }else {\n&#x27;
                           &#x27;                                        &#x27;
                           &#x27;indexFieldValue = &quot;\\&quot;&quot; + fieldValue + &quot;\\&quot;&quot;;\n&#x27;
                           &#x27;                                    }\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                                String filter;\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(indexFieldValue.equals(&quot;null&quot;)) {\n&#x27;
                           &#x27;                                    // this is for &#x27;
                           &#x27;checking if null or non-existent fields\n&#x27;
                           &#x27;                                    filter = &quot;(*:* &#x27;
                           &#x27;AND -&quot; + indexFieldName + &quot;:[* TO *])&quot;;\n&#x27;
                           &#x27;                                } else {\n&#x27;
                           &#x27;                                    filter = &#x27;
                           &#x27;indexFieldName + &quot;:&quot; + indexFieldValue;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                                if (exclude) {\n&#x27;
                           &#x27;                                    filter = &quot;NOT &#x27;
                           &#x27;&quot; + filter;\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;tmpFilters.add(filter);\n&#x27;
                           &#x27;                            }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;}}]]</pre>
          </body>
        </html>
        