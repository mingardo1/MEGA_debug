<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>500</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    500
                    <a href="499.html">prev</a>
                    <a href="501.html">next</a>
                    <a href="500_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_29923f5082093b6211894f49edc653c29b28d99b_WallpaperPicker/src/com/android/launcher3/WallpaperPickerActivity.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;29923f5082093b6211894f49edc653c29b28d99b:WallpaperPicker/src/com/android/launcher3/WallpaperPickerActivity.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;29923f5082093b6211894f49edc653c29b28d99b^1:WallpaperPicker/src/com/android/launcher3/WallpaperPickerActivity.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;29923f5082093b6211894f49edc653c29b28d99b^2:WallpaperPicker/src/com/android/launcher3/WallpaperPickerActivity.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;d6518c4b9569ddf9a8d66e4e60dc77c18e0ecb05:WallpaperPicker/src/com/android/launcher3/WallpaperPickerActivity.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="4969256359214059167" onmouseenter="enter('4969256359214059167');" onmouseout="out('4969256359214059167');" style="">   2  * Copyright (C) 2013 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-7391579724786615359" onmouseenter="enter('-7391579724786615359');" onmouseout="out('-7391579724786615359');" style="">  19 import android.animation.Animator;                                                                       </span>
<span class="8098692255261555192" onmouseenter="enter('8098692255261555192');" onmouseout="out('8098692255261555192');" style="">  20 import android.animation.LayoutTransition;                                                               </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  21 import android.annotation.TargetApi;                                                                     </span>
<span class="4319535404750690126" onmouseenter="enter('4319535404750690126');" onmouseout="out('4319535404750690126');" style="">  22 import android.app.ActionBar;                                                                            </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  23 import android.app.Activity;                                                                             </span>
<span class="951063033412864237" onmouseenter="enter('951063033412864237');" onmouseout="out('951063033412864237');" style="">  24 import android.app.WallpaperInfo;                                                                        </span>
<span class="676108227569676783" onmouseenter="enter('676108227569676783');" onmouseout="out('676108227569676783');" style="">  25 import android.app.WallpaperManager;                                                                     </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27 import android.content.Intent;                                                                           </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  28 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  29 import android.content.pm.PackageManager;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  30 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31 import android.database.Cursor;                                                                          </span>
<span class="5252578614911642988" onmouseenter="enter('5252578614911642988');" onmouseout="out('5252578614911642988');" style="">  32 import android.database.DataSetObserver;                                                                 </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  33 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  34 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  35 import android.graphics.Canvas;                                                                          </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  36 import android.graphics.Matrix;                                                                          </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  37 import android.graphics.Paint;                                                                           </span>
<span class="-3433483468941074901" onmouseenter="enter('-3433483468941074901');" onmouseout="out('-3433483468941074901');" style="">  38 import android.graphics.Point;                                                                           </span>
<span class="7353926919338897104" onmouseenter="enter('7353926919338897104');" onmouseout="out('7353926919338897104');" style="">  39 import android.graphics.PorterDuff;                                                                      </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  40 import android.graphics.Rect;                                                                            </span>
<span class="6159024636799649270" onmouseenter="enter('6159024636799649270');" onmouseout="out('6159024636799649270');" style="">  41 import android.graphics.RectF;                                                                           </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  42 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  43 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-4553352622911846323" onmouseenter="enter('-4553352622911846323');" onmouseout="out('-4553352622911846323');" style="">  44 import android.graphics.drawable.LevelListDrawable;                                                      </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  45 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  46 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  47 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  48 import android.os.Bundle;                                                                                </span>
<span class="4691360065241021834" onmouseenter="enter('4691360065241021834');" onmouseout="out('4691360065241021834');" style="">  49 import android.provider.MediaStore;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  50 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  51 import android.util.Pair;                                                                                </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  52 import android.view.ActionMode;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  53 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  54 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  55 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  56 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  57 import android.view.View;                                                                                </span>
<span class="-4070104819519100201" onmouseenter="enter('-4070104819519100201');" onmouseout="out('-4070104819519100201');" style="">  58 import android.view.View.OnClickListener;                                                                </span>
<span class="3981555454743051089" onmouseenter="enter('3981555454743051089');" onmouseout="out('3981555454743051089');" style="">  59 import android.view.View.OnLayoutChangeListener;                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  60 import android.view.ViewGroup;                                                                           </span>
<span class="2571204843522825307" onmouseenter="enter('2571204843522825307');" onmouseout="out('2571204843522825307');" style="">  61 import android.view.ViewPropertyAnimator;                                                                </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  62 import android.view.ViewTreeObserver;                                                                    </span>
<span class="1168424004905198318" onmouseenter="enter('1168424004905198318');" onmouseout="out('1168424004905198318');" style="">  63 import android.view.ViewTreeObserver.OnGlobalLayoutListener;                                             </span>
<span class="4293004276597960360" onmouseenter="enter('4293004276597960360');" onmouseout="out('4293004276597960360');" style="">  64 import android.view.animation.AccelerateInterpolator;                                                    </span>
<span class="-4330829166704003086" onmouseenter="enter('-4330829166704003086');" onmouseout="out('-4330829166704003086');" style="">  65 import android.view.animation.DecelerateInterpolator;                                                    </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="">  66 import android.widget.ArrayAdapter;                                                                      </span>
<span class="-1389926198978222011" onmouseenter="enter('-1389926198978222011');" onmouseout="out('-1389926198978222011');" style="">  67 import android.widget.BaseAdapter;                                                                       </span>
<span class="619404646788779253" onmouseenter="enter('619404646788779253');" onmouseout="out('619404646788779253');" style="">  68 import android.widget.FrameLayout;                                                                       </span>
<span class="1210679520679819328" onmouseenter="enter('1210679520679819328');" onmouseout="out('1210679520679819328');" style="">  69 import android.widget.HorizontalScrollView;                                                              </span>
<span class="-8478546344938881111" onmouseenter="enter('-8478546344938881111');" onmouseout="out('-8478546344938881111');" style="">  70 import android.widget.ImageView;                                                                         </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  71 import android.widget.LinearLayout;                                                                      </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  72 import android.widget.Toast;                                                                             </span>
<span  style="">  73                                                                                                          </span>
<span class="6533473271465139745" onmouseenter="enter('6533473271465139745');" onmouseout="out('6533473271465139745');" style="">  74 import com.android.photos.BitmapRegionTileSource;                                                        </span>
<span class="-6230463173033584865" onmouseenter="enter('-6230463173033584865');" onmouseout="out('-6230463173033584865');" style="">  75 import com.android.photos.BitmapRegionTileSource.BitmapSource;                                           </span>
<span  style="">  76                                                                                                          </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  77 import java.io.File;                                                                                     </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  78 import java.io.FileOutputStream;                                                                         </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  79 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  80 import java.util.ArrayList;                                                                              </span>
<span  style="">  81                                                                                                          </span>
<span class="-3479087503452779406" onmouseenter="enter('-3479087503452779406');" onmouseout="out('-3479087503452779406');" style="">  82 public class WallpaperPickerActivity extends WallpaperCropActivity {                                     </span>
<span class="-9207672248179223277" onmouseenter="enter('-9207672248179223277');" onmouseout="out('-9207672248179223277');" style="">  83     static final String TAG = &quot;Launcher.WallpaperPickerActivity&quot;;                                        </span>
<span  style="">  84                                                                                                          </span>
<span class="3742943605537861169" onmouseenter="enter('3742943605537861169');" onmouseout="out('3742943605537861169');" style="">  85     public static final int IMAGE_PICK = 5;                                                              </span>
<span class="6964368849625562410" onmouseenter="enter('6964368849625562410');" onmouseout="out('6964368849625562410');" style="">  86     public static final int PICK_WALLPAPER_THIRD_PARTY_ACTIVITY = 6;                                     </span>
<span class="-7093050771651663150" onmouseenter="enter('-7093050771651663150');" onmouseout="out('-7093050771651663150');" style="">  87     public static final int PICK_LIVE_WALLPAPER = 7;                                                     </span>
<span class="2002999604810079271" onmouseenter="enter('2002999604810079271');" onmouseout="out('2002999604810079271');" style="">  88     private static final String TEMP_WALLPAPER_TILES = &quot;TEMP_WALLPAPER_TILES&quot;;                           </span>
<span class="2369538557121393675" onmouseenter="enter('2369538557121393675');" onmouseout="out('2369538557121393675');" style="">  89     private static final String SELECTED_INDEX = &quot;SELECTED_INDEX&quot;;                                       </span>
<span class="8676512018192278738" onmouseenter="enter('8676512018192278738');" onmouseout="out('8676512018192278738');" style="">  90     private static final String OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME = &quot;default_thumb.jpg&quot;;          </span>
<span class="739407583494491877" onmouseenter="enter('739407583494491877');" onmouseout="out('739407583494491877');" style="">  91     private static final String DEFAULT_WALLPAPER_THUMBNAIL_FILENAME = &quot;default_thumb2.jpg&quot;;             </span>
<span  style="">  92                                                                                                          </span>
<span class="4390153378349048662" onmouseenter="enter('4390153378349048662');" onmouseout="out('4390153378349048662');" style="">  93     private View mSelectedTile;                                                                          </span>
<span class="-2897196063367166965" onmouseenter="enter('-2897196063367166965');" onmouseout="out('-2897196063367166965');" style="">  94     private View mSetWallpaperButton;                                                                    </span>
<span class="-7732371762175677472" onmouseenter="enter('-7732371762175677472');" onmouseout="out('-7732371762175677472');" style="">  95     private boolean mIgnoreNextTap;                                                                      </span>
<span class="3263742057015850528" onmouseenter="enter('3263742057015850528');" onmouseout="out('3263742057015850528');" style="">  96     private OnClickListener mThumbnailOnClickListener;                                                   </span>
<span  style="">  97                                                                                                          </span>
<span class="-283642594149471002" onmouseenter="enter('-283642594149471002');" onmouseout="out('-283642594149471002');" style="">  98     private LinearLayout mWallpapersView;                                                                </span>
<span class="-441519593320335252" onmouseenter="enter('-441519593320335252');" onmouseout="out('-441519593320335252');" style="">  99     private View mWallpaperStrip;                                                                        </span>
<span  style=""> 100                                                                                                          </span>
<span class="1128301058468039086" onmouseenter="enter('1128301058468039086');" onmouseout="out('1128301058468039086');" style=""> 101     private ActionMode.Callback mActionModeCallback;                                                     </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 102     private ActionMode mActionMode;                                                                      </span>
<span  style=""> 103                                                                                                          </span>
<span class="8486739019347078220" onmouseenter="enter('8486739019347078220');" onmouseout="out('8486739019347078220');" style=""> 104     private View.OnLongClickListener mLongClickListener;                                                 </span>
<span  style=""> 105                                                                                                          </span>
<span class="-4348434262230128417" onmouseenter="enter('-4348434262230128417');" onmouseout="out('-4348434262230128417');" style=""> 106     ArrayList&lt;Uri&gt; mTempWallpaperTiles = new ArrayList&lt;Uri&gt;();                                           </span>
<span class="7453258409125933365" onmouseenter="enter('7453258409125933365');" onmouseout="out('7453258409125933365');" style=""> 107     private SavedWallpaperImages mSavedImages;                                                           </span>
<span class="-2427071817986839025" onmouseenter="enter('-2427071817986839025');" onmouseout="out('-2427071817986839025');" style=""> 108     private WallpaperInfo mLiveWallpaperInfoOnPickerLaunch;                                              </span>
<span class="-1380647248738642471" onmouseenter="enter('-1380647248738642471');" onmouseout="out('-1380647248738642471');" style=""> 109     private int mSelectedIndex;                                                                          </span>
<span  style=""> 110                                                                                                          </span>
<span class="4075218350470872817" onmouseenter="enter('4075218350470872817');" onmouseout="out('4075218350470872817');" style=""> 111     public static abstract class WallpaperTileInfo {                                                     </span>
<span class="7550834803278421014" onmouseenter="enter('7550834803278421014');" onmouseout="out('7550834803278421014');" style=""> 112         protected View mView;                                                                            </span>
<span class="3164205720118928248" onmouseenter="enter('3164205720118928248');" onmouseout="out('3164205720118928248');" style=""> 113         public Drawable mThumb;                                                                          </span>
<span  style=""> 114                                                                                                          </span>
<span class="6316991849463108734" onmouseenter="enter('6316991849463108734');" onmouseout="out('6316991849463108734');" style=""> 115         public void setView(View v) {                                                                    </span>
<span class="-529347746759665505" onmouseenter="enter('-529347746759665505');" onmouseout="out('-529347746759665505');" style=""> 116             mView = v;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117         }                                                                                                </span>
<span class="-3695677448824564507" onmouseenter="enter('-3695677448824564507');" onmouseout="out('-3695677448824564507');" style=""> 118         public void onClick(WallpaperPickerActivity a) {}                                                </span>
<span class="-5126019138081524515" onmouseenter="enter('-5126019138081524515');" onmouseout="out('-5126019138081524515');" style=""> 119         public void onSave(WallpaperPickerActivity a) {}                                                 </span>
<span class="-7733232806592304896" onmouseenter="enter('-7733232806592304896');" onmouseout="out('-7733232806592304896');" style=""> 120         public void onDelete(WallpaperPickerActivity a) {}                                               </span>
<span class="6774579784381031072" onmouseenter="enter('6774579784381031072');" onmouseout="out('6774579784381031072');" style=""> 121         public boolean isSelectable() { return false; }                                                  </span>
<span class="5815845045888824629" onmouseenter="enter('5815845045888824629');" onmouseout="out('5815845045888824629');" style=""> 122         public boolean isNamelessWallpaper() { return false; }                                           </span>
<span class="-4275008082196176757" onmouseenter="enter('-4275008082196176757');" onmouseout="out('-4275008082196176757');" style=""> 123         public void onIndexUpdated(CharSequence label) {                                                 </span>
<span class="1066314433179649740" onmouseenter="enter('1066314433179649740');" onmouseout="out('1066314433179649740');" style=""> 124             if (isNamelessWallpaper()) {                                                                 </span>
<span class="8251992145347444102" onmouseenter="enter('8251992145347444102');" onmouseout="out('8251992145347444102');" style=""> 125                 mView.setContentDescription(label);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="8237636954076389639" onmouseenter="enter('8237636954076389639');" onmouseout="out('8237636954076389639');" style=""> 130     public static class PickImageInfo extends WallpaperTileInfo {                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 132         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="2089748537565408969" onmouseenter="enter('2089748537565408969');" onmouseout="out('2089748537565408969');" style=""> 133             Intent intent = new Intent(Intent.ACTION_GET_CONTENT);                                       </span>
<span class="-7445763452332816798" onmouseenter="enter('-7445763452332816798');" onmouseout="out('-7445763452332816798');" style=""> 134             intent.setType(&quot;image/*&quot;);                                                                   </span>
<span class="1585161910249024870" onmouseenter="enter('1585161910249024870');" onmouseout="out('1585161910249024870');" style=""> 135             a.startActivityForResultSafely(intent, IMAGE_PICK);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137     }                                                                                                    </span>
<span  style=""> 138                                                                                                          </span>
<span class="8509990706001469030" onmouseenter="enter('8509990706001469030');" onmouseout="out('8509990706001469030');" style=""> 139     public static class UriWallpaperInfo extends WallpaperTileInfo {                                     </span>
<span class="8004450152098447697" onmouseenter="enter('8004450152098447697');" onmouseout="out('8004450152098447697');" style=""> 140         private Uri mUri;                                                                                </span>
<span class="-1488686611326744898" onmouseenter="enter('-1488686611326744898');" onmouseout="out('-1488686611326744898');" style=""> 141         private boolean mFirstClick = true;                                                              </span>
<span class="6610185084821017470" onmouseenter="enter('6610185084821017470');" onmouseout="out('6610185084821017470');" style=""> 142         private BitmapRegionTileSource.UriBitmapSource mBitmapSource;                                    </span>
<span class="8610701194225596743" onmouseenter="enter('8610701194225596743');" onmouseout="out('8610701194225596743');" style=""> 143         public UriWallpaperInfo(Uri uri) {                                                               </span>
<span class="1271920698851316002" onmouseenter="enter('1271920698851316002');" onmouseout="out('1271920698851316002');" style=""> 144             mUri = uri;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 146         @Override                                                                                        </span>
<span class="4138358358495509302" onmouseenter="enter('4138358358495509302');" onmouseout="out('4138358358495509302');" style=""> 147         public void onClick(final WallpaperPickerActivity a) {                                           </span>
<span class="8679558832982190034" onmouseenter="enter('8679558832982190034');" onmouseout="out('8679558832982190034');" style=""> 148             final Runnable onLoad;                                                                       </span>
<span class="8795982501973046418" onmouseenter="enter('8795982501973046418');" onmouseout="out('8795982501973046418');" style=""> 149             if (!mFirstClick) {                                                                          </span>
<span class="-4660024005754338718" onmouseenter="enter('-4660024005754338718');" onmouseout="out('-4660024005754338718');" style=""> 150                 onLoad = null;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 151             } else {                                                                                     </span>
<span class="-47635291022464950" onmouseenter="enter('-47635291022464950');" onmouseout="out('-47635291022464950');" style=""> 152                 mFirstClick = false;                                                                     </span>
<span class="3093989317977997664" onmouseenter="enter('3093989317977997664');" onmouseout="out('3093989317977997664');" style=""> 153                 a.mSetWallpaperButton.setVisibility(View.INVISIBLE);                                     </span>
<span class="-2512757449438613240" onmouseenter="enter('-2512757449438613240');" onmouseout="out('-2512757449438613240');" style=""> 154                 onLoad = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 155                     public void run() {                                                                  </span>
<span class="-1092618589087535440" onmouseenter="enter('-1092618589087535440');" onmouseout="out('-1092618589087535440');" style=""> 156                         if (mBitmapSource != null &amp;&amp;                                                     </span>
<span class="-5646208940028184072" onmouseenter="enter('-5646208940028184072');" onmouseout="out('-5646208940028184072');" style=""> 157                                 mBitmapSource.getLoadingState() == BitmapSource.State.LOADED) {          </span>
<span class="-4435485402424028248" onmouseenter="enter('-4435485402424028248');" onmouseout="out('-4435485402424028248');" style=""> 158                             a.selectTile(mView);                                                         </span>
<span class="-1623980074559675149" onmouseenter="enter('-1623980074559675149');" onmouseout="out('-1623980074559675149');" style=""> 159                             a.mSetWallpaperButton.setVisibility(View.VISIBLE);                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 160                         } else {                                                                         </span>
<span class="-3511643828077608980" onmouseenter="enter('-3511643828077608980');" onmouseout="out('-3511643828077608980');" style=""> 161                             ViewGroup parent = (ViewGroup) mView.getParent();                            </span>
<span class="7363799700568464510" onmouseenter="enter('7363799700568464510');" onmouseout="out('7363799700568464510');" style=""> 162                             if (parent != null) {                                                        </span>
<span class="1125194709286705363" onmouseenter="enter('1125194709286705363');" onmouseout="out('1125194709286705363');" style=""> 163                                 parent.removeView(mView);                                                </span>
<span class="-5214654684933993939" onmouseenter="enter('-5214654684933993939');" onmouseout="out('-5214654684933993939');" style=""> 164                                 Toast.makeText(a,                                                        </span>
<span class="-2844570703353432216" onmouseenter="enter('-2844570703353432216');" onmouseout="out('-2844570703353432216');" style=""> 165                                         a.getString(R.string.image_load_fail),                           </span>
<span class="427556865284092623" onmouseenter="enter('427556865284092623');" onmouseout="out('427556865284092623');" style=""> 166                                         Toast.LENGTH_SHORT).show();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 170                 };                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171             }                                                                                            </span>
<span class="-8031841537067985347" onmouseenter="enter('-8031841537067985347');" onmouseout="out('-8031841537067985347');" style=""> 172             mBitmapSource = new BitmapRegionTileSource.UriBitmapSource(                                  </span>
<span class="-3332939544017123551" onmouseenter="enter('-3332939544017123551');" onmouseout="out('-3332939544017123551');" style=""> 173                     a, mUri, BitmapRegionTileSource.MAX_PREVIEW_SIZE);                                   </span>
<span class="-7148866754307262491" onmouseenter="enter('-7148866754307262491');" onmouseout="out('-7148866754307262491');" style=""> 174             a.setCropViewTileSource(mBitmapSource, true, false, onLoad);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 176         @Override                                                                                        </span>
<span class="-1898343559351992508" onmouseenter="enter('-1898343559351992508');" onmouseout="out('-1898343559351992508');" style=""> 177         public void onSave(final WallpaperPickerActivity a) {                                            </span>
<span class="2587024494847424214" onmouseenter="enter('2587024494847424214');" onmouseout="out('2587024494847424214');" style=""> 178             boolean finishActivityWhenDone = true;                                                       </span>
<span class="-5468975333283797562" onmouseenter="enter('-5468975333283797562');" onmouseout="out('-5468975333283797562');" style=""> 179             OnBitmapCroppedHandler h = new OnBitmapCroppedHandler() {                                    </span>
<span class="-2021142144081785590" onmouseenter="enter('-2021142144081785590');" onmouseout="out('-2021142144081785590');" style=""> 180                 public void onBitmapCropped(byte[] imageBytes) {                                         </span>
<span class="-3067422103108397582" onmouseenter="enter('-3067422103108397582');" onmouseout="out('-3067422103108397582');" style=""> 181                     Point thumbSize = getDefaultThumbnailSize(a.getResources());                         </span>
<span class="7862344698024253739" onmouseenter="enter('7862344698024253739');" onmouseout="out('7862344698024253739');" style=""> 182                     // rotation is set to 0 since imageBytes has already been correctly rotated          </span>
<span class="1725565692823650889" onmouseenter="enter('1725565692823650889');" onmouseout="out('1725565692823650889');" style=""> 183                     Bitmap thumb = createThumbnail(                                                      </span>
<span class="6073449064591225469" onmouseenter="enter('6073449064591225469');" onmouseout="out('6073449064591225469');" style=""> 184                             thumbSize, null, null, imageBytes, null, 0, 0, true);                        </span>
<span class="2596245612370871573" onmouseenter="enter('2596245612370871573');" onmouseout="out('2596245612370871573');" style=""> 185                     a.getSavedImages().writeImage(thumb, imageBytes);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 187             };                                                                                           </span>
<span class="-4894948951423183692" onmouseenter="enter('-4894948951423183692');" onmouseout="out('-4894948951423183692');" style=""> 188             a.cropImageAndSetWallpaper(mUri, h, finishActivityWhenDone);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 191         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 192             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 194         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 195         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 196             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198     }                                                                                                    </span>
<span  style=""> 199                                                                                                          </span>
<span class="-4190074108086167067" onmouseenter="enter('-4190074108086167067');" onmouseout="out('-4190074108086167067');" style=""> 200     public static class FileWallpaperInfo extends WallpaperTileInfo {                                    </span>
<span class="-7985382265690223755" onmouseenter="enter('-7985382265690223755');" onmouseout="out('-7985382265690223755');" style=""> 201         private File mFile;                                                                              </span>
<span  style=""> 202                                                                                                          </span>
<span class="-1741311432485362981" onmouseenter="enter('-1741311432485362981');" onmouseout="out('-1741311432485362981');" style=""> 203         public FileWallpaperInfo(File target, Drawable thumb) {                                          </span>
<span class="4814381598022211544" onmouseenter="enter('4814381598022211544');" onmouseout="out('4814381598022211544');" style=""> 204             mFile = target;                                                                              </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 205             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 207         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 208         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="-8750527241018834281" onmouseenter="enter('-8750527241018834281');" onmouseout="out('-8750527241018834281');" style=""> 209             BitmapRegionTileSource.UriBitmapSource bitmapSource =                                        </span>
<span class="2483734173143161809" onmouseenter="enter('2483734173143161809');" onmouseout="out('2483734173143161809');" style=""> 210                     new BitmapRegionTileSource.UriBitmapSource(a, Uri.fromFile(mFile), 1024);            </span>
<span class="-5075441127387044752" onmouseenter="enter('-5075441127387044752');" onmouseout="out('-5075441127387044752');" style=""> 211             a.setCropViewTileSource(bitmapSource, false, true, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 213         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 214         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="3801787756410673434" onmouseenter="enter('3801787756410673434');" onmouseout="out('3801787756410673434');" style=""> 215             a.setWallpaper(Uri.fromFile(mFile), true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 217         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 218         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 219             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 221         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 222         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 223             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225     }                                                                                                    </span>
<span  style=""> 226                                                                                                          </span>
<span class="4482520304290563098" onmouseenter="enter('4482520304290563098');" onmouseout="out('4482520304290563098');" style=""> 227     public static class ResourceWallpaperInfo extends WallpaperTileInfo {                                </span>
<span class="-4981714113555710279" onmouseenter="enter('-4981714113555710279');" onmouseout="out('-4981714113555710279');" style=""> 228         private Resources mResources;                                                                    </span>
<span class="739042083917827597" onmouseenter="enter('739042083917827597');" onmouseout="out('739042083917827597');" style=""> 229         private int mResId;                                                                              </span>
<span  style=""> 230                                                                                                          </span>
<span class="-3210764035307017816" onmouseenter="enter('-3210764035307017816');" onmouseout="out('-3210764035307017816');" style=""> 231         public ResourceWallpaperInfo(Resources res, int resId, Drawable thumb) {                         </span>
<span class="8738901641718599503" onmouseenter="enter('8738901641718599503');" onmouseout="out('8738901641718599503');" style=""> 232             mResources = res;                                                                            </span>
<span class="4654100838271737112" onmouseenter="enter('4654100838271737112');" onmouseout="out('4654100838271737112');" style=""> 233             mResId = resId;                                                                              </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 234             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 236         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 237         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="8895257418408392595" onmouseenter="enter('8895257418408392595');" onmouseout="out('8895257418408392595');" style=""> 238             BitmapRegionTileSource.ResourceBitmapSource bitmapSource =                                   </span>
<span class="3679932597957891792" onmouseenter="enter('3679932597957891792');" onmouseout="out('3679932597957891792');" style=""> 239                     new BitmapRegionTileSource.ResourceBitmapSource(                                     </span>
<span class="9115725956109139967" onmouseenter="enter('9115725956109139967');" onmouseout="out('9115725956109139967');" style=""> 240                             mResources, mResId, BitmapRegionTileSource.MAX_PREVIEW_SIZE);                </span>
<span class="2218452414014258741" onmouseenter="enter('2218452414014258741');" onmouseout="out('2218452414014258741');" style=""> 241             bitmapSource.loadInBackground();                                                             </span>
<span class="7058429795285354581" onmouseenter="enter('7058429795285354581');" onmouseout="out('7058429795285354581');" style=""> 242             BitmapRegionTileSource source = new BitmapRegionTileSource(a, bitmapSource);                 </span>
<span class="1481068659103378542" onmouseenter="enter('1481068659103378542');" onmouseout="out('1481068659103378542');" style=""> 243             CropView v = a.getCropView();                                                                </span>
<span class="7170858028895783855" onmouseenter="enter('7170858028895783855');" onmouseout="out('7170858028895783855');" style=""> 244             v.setTileSource(source, null);                                                               </span>
<span class="2334799634056328814" onmouseenter="enter('2334799634056328814');" onmouseout="out('2334799634056328814');" style=""> 245             Point wallpaperSize = WallpaperCropActivity.getDefaultWallpaperSize(                         </span>
<span class="-4580349435201294760" onmouseenter="enter('-4580349435201294760');" onmouseout="out('-4580349435201294760');" style=""> 246                     a.getResources(), a.getWindowManager());                                             </span>
<span class="1498400964848924986" onmouseenter="enter('1498400964848924986');" onmouseout="out('1498400964848924986');" style=""> 247             RectF crop = WallpaperCropActivity.getMaxCropRect(                                           </span>
<span class="5182456994402924347" onmouseenter="enter('5182456994402924347');" onmouseout="out('5182456994402924347');" style=""> 248                     source.getImageWidth(), source.getImageHeight(),                                     </span>
<span class="399667554211083958" onmouseenter="enter('399667554211083958');" onmouseout="out('399667554211083958');" style=""> 249                     wallpaperSize.x, wallpaperSize.y, false);                                            </span>
<span class="8890199765694503418" onmouseenter="enter('8890199765694503418');" onmouseout="out('8890199765694503418');" style=""> 250             v.setScale(wallpaperSize.x / crop.width());                                                  </span>
<span class="5781800255248373469" onmouseenter="enter('5781800255248373469');" onmouseout="out('5781800255248373469');" style=""> 251             v.setTouchEnabled(false);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 253         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 254         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="2587024494847424214" onmouseenter="enter('2587024494847424214');" onmouseout="out('2587024494847424214');" style=""> 255             boolean finishActivityWhenDone = true;                                                       </span>
<span class="870771120792411608" onmouseenter="enter('870771120792411608');" onmouseout="out('870771120792411608');" style=""> 256             a.cropImageAndSetWallpaper(mResources, mResId, finishActivityWhenDone);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 258         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 259         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 260             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 262         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 263         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 264             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266     }                                                                                                    </span>
<span  style=""> 267                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 268     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-529309049483586312" onmouseenter="enter('-529309049483586312');" onmouseout="out('-529309049483586312');" style=""> 269     public static class DefaultWallpaperInfo extends WallpaperTileInfo {                                 </span>
<span class="461095260062433386" onmouseenter="enter('461095260062433386');" onmouseout="out('461095260062433386');" style=""> 270         public DefaultWallpaperInfo(Drawable thumb) {                                                    </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 271             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 273         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 274         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="5819053214355424889" onmouseenter="enter('5819053214355424889');" onmouseout="out('5819053214355424889');" style=""> 275             CropView c = a.getCropView();                                                                </span>
<span  style=""> 276                                                                                                          </span>
<span class="-2729062430983653755" onmouseenter="enter('-2729062430983653755');" onmouseout="out('-2729062430983653755');" style=""> 277             Drawable defaultWallpaper = WallpaperManager.getInstance(a).getBuiltInDrawable(              </span>
<span class="-832213469176736512" onmouseenter="enter('-832213469176736512');" onmouseout="out('-832213469176736512');" style=""> 278                     c.getWidth(), c.getHeight(), false, 0.5f, 0.5f);                                     </span>
<span  style=""> 279                                                                                                          </span>
<span class="1391482188931535502" onmouseenter="enter('1391482188931535502');" onmouseout="out('1391482188931535502');" style=""> 280             c.setTileSource(                                                                             </span>
<span class="-7530257073534369499" onmouseenter="enter('-7530257073534369499');" onmouseout="out('-7530257073534369499');" style=""><abbr title=" 281                     new DrawableTileSource(a, defaultWallpaper, DrawableTileSource.MAX_PREVIEW_SIZE), null);"> 281                     new DrawableTileSource(a, defaultWallpaper, DrawableTileSource.MAX_PREVIEW_SIZE), nul</abbr></span>
<span class="7465943936877271880" onmouseenter="enter('7465943936877271880');" onmouseout="out('7465943936877271880');" style=""> 282             c.setScale(1f);                                                                              </span>
<span class="-2853419027579511743" onmouseenter="enter('-2853419027579511743');" onmouseout="out('-2853419027579511743');" style=""> 283             c.setTouchEnabled(false);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 285         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 286         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 287             try {                                                                                        </span>
<span class="7067546428920692022" onmouseenter="enter('7067546428920692022');" onmouseout="out('7067546428920692022');" style=""> 288                 WallpaperManager.getInstance(a).clear();                                                 </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 289             } catch (IOException e) {                                                                    </span>
<span class="5382996693541062495" onmouseenter="enter('5382996693541062495');" onmouseout="out('5382996693541062495');" style=""> 290                 Log.w(&quot;Setting wallpaper to default threw exception&quot;, e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291             }                                                                                            </span>
<span class="6929368672411603344" onmouseenter="enter('6929368672411603344');" onmouseout="out('6929368672411603344');" style=""> 292             a.finish();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 294         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 295         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 296             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 298         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 299         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 300             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302     }                                                                                                    </span>
<span  style=""> 303                                                                                                          </span>
<span class="-8802765780262582525" onmouseenter="enter('-8802765780262582525');" onmouseout="out('-8802765780262582525');" style=""> 304     public void setWallpaperStripYOffset(float offset) {                                                 </span>
<span class="3084906213280284447" onmouseenter="enter('3084906213280284447');" onmouseout="out('3084906213280284447');" style=""> 305         mWallpaperStrip.setPadding(0, 0, 0, (int) offset);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span  style=""> 307                                                                                                          </span>
<span class="5854257451777934287" onmouseenter="enter('5854257451777934287');" onmouseout="out('5854257451777934287');" style=""> 308     // called by onCreate; this is subclassed to overwrite WallpaperCropActivity                         </span>
<span class="-2182533896997661648" onmouseenter="enter('-2182533896997661648');" onmouseout="out('-2182533896997661648');" style=""> 309     protected void init() {                                                                              </span>
<span class="2979438704186700018" onmouseenter="enter('2979438704186700018');" onmouseout="out('2979438704186700018');" style=""> 310         setContentView(R.layout.wallpaper_picker);                                                       </span>
<span  style=""> 311                                                                                                          </span>
<span class="-1776232873259644844" onmouseenter="enter('-1776232873259644844');" onmouseout="out('-1776232873259644844');" style=""> 312         mCropView = (CropView) findViewById(R.id.cropView);                                              </span>
<span class="-2578053662916702311" onmouseenter="enter('-2578053662916702311');" onmouseout="out('-2578053662916702311');" style=""> 313         mWallpaperStrip = findViewById(R.id.wallpaper_strip);                                            </span>
<span class="8068618426611567623" onmouseenter="enter('8068618426611567623');" onmouseout="out('8068618426611567623');" style=""> 314         mCropView.setTouchCallback(new CropView.TouchCallback() {                                        </span>
<span class="-1035492205097680166" onmouseenter="enter('-1035492205097680166');" onmouseout="out('-1035492205097680166');" style=""> 315             ViewPropertyAnimator mAnim;                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 316             @Override                                                                                    </span>
<span class="1626698357951932531" onmouseenter="enter('1626698357951932531');" onmouseout="out('1626698357951932531');" style=""> 317             public void onTouchDown() {                                                                  </span>
<span class="-2973121909455018733" onmouseenter="enter('-2973121909455018733');" onmouseout="out('-2973121909455018733');" style=""> 318                 if (mAnim != null) {                                                                     </span>
<span class="-9205181203898657288" onmouseenter="enter('-9205181203898657288');" onmouseout="out('-9205181203898657288');" style=""> 319                     mAnim.cancel();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                 }                                                                                        </span>
<span class="3327382853992128006" onmouseenter="enter('3327382853992128006');" onmouseout="out('3327382853992128006');" style=""> 321                 if (mWallpaperStrip.getAlpha() == 1f) {                                                  </span>
<span class="-3956321380048081036" onmouseenter="enter('-3956321380048081036');" onmouseout="out('-3956321380048081036');" style=""> 322                     mIgnoreNextTap = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323                 }                                                                                        </span>
<span class="-6956982405463185167" onmouseenter="enter('-6956982405463185167');" onmouseout="out('-6956982405463185167');" style=""> 324                 mAnim = mWallpaperStrip.animate();                                                       </span>
<span class="-6791557412964356793" onmouseenter="enter('-6791557412964356793');" onmouseout="out('-6791557412964356793');" style=""> 325                 mAnim.alpha(0f)                                                                          </span>
<span class="-6026493296855862387" onmouseenter="enter('-6026493296855862387');" onmouseout="out('-6026493296855862387');" style=""> 326                     .setDuration(150)                                                                    </span>
<span class="-724010739576222770" onmouseenter="enter('-724010739576222770');" onmouseout="out('-724010739576222770');" style=""> 327                     .withEndAction(new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 328                         public void run() {                                                              </span>
<span class="5391643758310247109" onmouseenter="enter('5391643758310247109');" onmouseout="out('5391643758310247109');" style=""> 329                             mWallpaperStrip.setVisibility(View.INVISIBLE);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 331                     });                                                                                  </span>
<span class="4120717992136711655" onmouseenter="enter('4120717992136711655');" onmouseout="out('4120717992136711655');" style=""> 332                 mAnim.setInterpolator(new AccelerateInterpolator(0.75f));                                </span>
<span class="3184709938218096424" onmouseenter="enter('3184709938218096424');" onmouseout="out('3184709938218096424');" style=""> 333                 mAnim.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334             }                                                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 335             @Override                                                                                    </span>
<span class="-4028587905866202696" onmouseenter="enter('-4028587905866202696');" onmouseout="out('-4028587905866202696');" style=""> 336             public void onTouchUp() {                                                                    </span>
<span class="2725693883097632090" onmouseenter="enter('2725693883097632090');" onmouseout="out('2725693883097632090');" style=""> 337                 mIgnoreNextTap = false;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338             }                                                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 339             @Override                                                                                    </span>
<span class="-7758883269909585068" onmouseenter="enter('-7758883269909585068');" onmouseout="out('-7758883269909585068');" style=""> 340             public void onTap() {                                                                        </span>
<span class="6942313366430007213" onmouseenter="enter('6942313366430007213');" onmouseout="out('6942313366430007213');" style=""> 341                 boolean ignoreTap = mIgnoreNextTap;                                                      </span>
<span class="2725693883097632090" onmouseenter="enter('2725693883097632090');" onmouseout="out('2725693883097632090');" style=""> 342                 mIgnoreNextTap = false;                                                                  </span>
<span class="387446229183659648" onmouseenter="enter('387446229183659648');" onmouseout="out('387446229183659648');" style=""> 343                 if (!ignoreTap) {                                                                        </span>
<span class="-2973121909455018733" onmouseenter="enter('-2973121909455018733');" onmouseout="out('-2973121909455018733');" style=""> 344                     if (mAnim != null) {                                                                 </span>
<span class="-9205181203898657288" onmouseenter="enter('-9205181203898657288');" onmouseout="out('-9205181203898657288');" style=""> 345                         mAnim.cancel();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346                     }                                                                                    </span>
<span class="2849585250197552354" onmouseenter="enter('2849585250197552354');" onmouseout="out('2849585250197552354');" style=""> 347                     mWallpaperStrip.setVisibility(View.VISIBLE);                                         </span>
<span class="-6956982405463185167" onmouseenter="enter('-6956982405463185167');" onmouseout="out('-6956982405463185167');" style=""> 348                     mAnim = mWallpaperStrip.animate();                                                   </span>
<span class="-6529107894597579397" onmouseenter="enter('-6529107894597579397');" onmouseout="out('-6529107894597579397');" style=""> 349                     mAnim.alpha(1f)                                                                      </span>
<span class="-6026493296855862387" onmouseenter="enter('-6026493296855862387');" onmouseout="out('-6026493296855862387');" style=""> 350                          .setDuration(150)                                                               </span>
<span class="-6632446345541241704" onmouseenter="enter('-6632446345541241704');" onmouseout="out('-6632446345541241704');" style=""> 351                          .setInterpolator(new DecelerateInterpolator(0.75f));                            </span>
<span class="3184709938218096424" onmouseenter="enter('3184709938218096424');" onmouseout="out('3184709938218096424');" style=""> 352                     mAnim.start();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 355         });                                                                                              </span>
<span  style=""> 356                                                                                                          </span>
<span class="-773253411800983412" onmouseenter="enter('-773253411800983412');" onmouseout="out('-773253411800983412');" style=""> 357         mThumbnailOnClickListener = new OnClickListener() {                                              </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 358             public void onClick(View v) {                                                                </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 359                 if (mActionMode != null) {                                                               </span>
<span class="-7945425703771551193" onmouseenter="enter('-7945425703771551193');" onmouseout="out('-7945425703771551193');" style=""> 360                     // When CAB is up, clicking toggles the item instead                                 </span>
<span class="8281773320045926887" onmouseenter="enter('8281773320045926887');" onmouseout="out('8281773320045926887');" style=""> 361                     if (v.isLongClickable()) {                                                           </span>
<span class="-1009252700459954960" onmouseenter="enter('-1009252700459954960');" onmouseout="out('-1009252700459954960');" style=""> 362                         mLongClickListener.onLongClick(v);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363                     }                                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 364                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365                 }                                                                                        </span>
<span class="-5476934872896833292" onmouseenter="enter('-5476934872896833292');" onmouseout="out('-5476934872896833292');" style=""> 366                 WallpaperTileInfo info = (WallpaperTileInfo) v.getTag();                                 </span>
<span class="-5097416669740389956" onmouseenter="enter('-5097416669740389956');" onmouseout="out('-5097416669740389956');" style=""> 367                 if (info.isSelectable() &amp;&amp; v.getVisibility() == View.VISIBLE) {                          </span>
<span class="-4588532236714287793" onmouseenter="enter('-4588532236714287793');" onmouseout="out('-4588532236714287793');" style=""> 368                     selectTile(v);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369                 }                                                                                        </span>
<span class="8040467138641960798" onmouseenter="enter('8040467138641960798');" onmouseout="out('8040467138641960798');" style=""> 370                 info.onClick(WallpaperPickerActivity.this);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 372         };                                                                                               </span>
<span class="-8969101037229031036" onmouseenter="enter('-8969101037229031036');" onmouseout="out('-8969101037229031036');" style=""> 373         mLongClickListener = new View.OnLongClickListener() {                                            </span>
<span class="-5185673936905803234" onmouseenter="enter('-5185673936905803234');" onmouseout="out('-5185673936905803234');" style=""> 374             // Called when the user long-clicks on someView                                              </span>
<span class="4352920324548579969" onmouseenter="enter('4352920324548579969');" onmouseout="out('4352920324548579969');" style=""> 375             public boolean onLongClick(View view) {                                                      </span>
<span class="-7607400486566825959" onmouseenter="enter('-7607400486566825959');" onmouseout="out('-7607400486566825959');" style=""> 376                 CheckableFrameLayout c = (CheckableFrameLayout) view;                                    </span>
<span class="17729423456607520" onmouseenter="enter('17729423456607520');" onmouseout="out('17729423456607520');" style=""> 377                 c.toggle();                                                                              </span>
<span  style=""> 378                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 379                 if (mActionMode != null) {                                                               </span>
<span class="-102618795880011952" onmouseenter="enter('-102618795880011952');" onmouseout="out('-102618795880011952');" style=""> 380                     mActionMode.invalidate();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 381                 } else {                                                                                 </span>
<span class="-9026698002389905756" onmouseenter="enter('-9026698002389905756');" onmouseout="out('-9026698002389905756');" style=""> 382                     // Start the CAB using the ActionMode.Callback defined below                         </span>
<span class="-65256925409540847" onmouseenter="enter('-65256925409540847');" onmouseout="out('-65256925409540847');" style=""> 383                     mActionMode = startActionMode(mActionModeCallback);                                  </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 384                     int childCount = mWallpapersView.getChildCount();                                    </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 385                     for (int i = 0; i &lt; childCount; i++) {                                               </span>
<span class="8061120510894137201" onmouseenter="enter('8061120510894137201');" onmouseout="out('8061120510894137201');" style=""> 386                         mWallpapersView.getChildAt(i).setSelected(false);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 389                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 391         };                                                                                               </span>
<span  style=""> 392                                                                                                          </span>
<span class="5863981315080253557" onmouseenter="enter('5863981315080253557');" onmouseout="out('5863981315080253557');" style=""> 393         // Populate the built-in wallpapers                                                              </span>
<span class="-6274410391280341112" onmouseenter="enter('-6274410391280341112');" onmouseout="out('-6274410391280341112');" style=""> 394         ArrayList&lt;WallpaperTileInfo&gt; wallpapers = findBundledWallpapers();                               </span>
<span class="2526610556609193817" onmouseenter="enter('2526610556609193817');" onmouseout="out('2526610556609193817');" style=""> 395         mWallpapersView = (LinearLayout) findViewById(R.id.wallpaper_list);                              </span>
<span class="-2971214249397723609" onmouseenter="enter('-2971214249397723609');" onmouseout="out('-2971214249397723609');" style=""> 396         SimpleWallpapersAdapter ia = new SimpleWallpapersAdapter(this, wallpapers);                      </span>
<span class="1613737006506352436" onmouseenter="enter('1613737006506352436');" onmouseout="out('1613737006506352436');" style=""> 397         populateWallpapersFromAdapter(mWallpapersView, ia, false);                                       </span>
<span  style=""> 398                                                                                                          </span>
<span class="-6274271967551788045" onmouseenter="enter('-6274271967551788045');" onmouseout="out('-6274271967551788045');" style=""> 399         // Populate the saved wallpapers                                                                 </span>
<span class="-593929748363635247" onmouseenter="enter('-593929748363635247');" onmouseout="out('-593929748363635247');" style=""> 400         mSavedImages = new SavedWallpaperImages(this);                                                   </span>
<span class="-944718586241422514" onmouseenter="enter('-944718586241422514');" onmouseout="out('-944718586241422514');" style=""> 401         mSavedImages.loadThumbnailsAndImageIdList();                                                     </span>
<span class="3791789265677239077" onmouseenter="enter('3791789265677239077');" onmouseout="out('3791789265677239077');" style=""> 402         populateWallpapersFromAdapter(mWallpapersView, mSavedImages, true);                              </span>
<span  style=""> 403                                                                                                          </span>
<span class="-8704527322237514837" onmouseenter="enter('-8704527322237514837');" onmouseout="out('-8704527322237514837');" style=""> 404         // Populate the live wallpapers                                                                  </span>
<span class="-401644721260157166" onmouseenter="enter('-401644721260157166');" onmouseout="out('-401644721260157166');" style=""> 405         final LinearLayout liveWallpapersView =                                                          </span>
<span class="-885348281479887742" onmouseenter="enter('-885348281479887742');" onmouseout="out('-885348281479887742');" style=""> 406                 (LinearLayout) findViewById(R.id.live_wallpaper_list);                                   </span>
<span class="-8599704022634275072" onmouseenter="enter('-8599704022634275072');" onmouseout="out('-8599704022634275072');" style=""> 407         final LiveWallpaperListAdapter a = new LiveWallpaperListAdapter(this);                           </span>
<span class="7657389333195170209" onmouseenter="enter('7657389333195170209');" onmouseout="out('7657389333195170209');" style=""> 408         a.registerDataSetObserver(new DataSetObserver() {                                                </span>
<span class="2979494936249539834" onmouseenter="enter('2979494936249539834');" onmouseout="out('2979494936249539834');" style=""> 409             public void onChanged() {                                                                    </span>
<span class="-1492802084192978474" onmouseenter="enter('-1492802084192978474');" onmouseout="out('-1492802084192978474');" style=""> 410                 liveWallpapersView.removeAllViews();                                                     </span>
<span class="3875768049007720660" onmouseenter="enter('3875768049007720660');" onmouseout="out('3875768049007720660');" style=""> 411                 populateWallpapersFromAdapter(liveWallpapersView, a, false);                             </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style=""> 412                 initializeScrollForRtl();                                                                </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 413                 updateTileIndices();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 415         });                                                                                              </span>
<span  style=""> 416                                                                                                          </span>
<span class="-205780312699671492" onmouseenter="enter('-205780312699671492');" onmouseout="out('-205780312699671492');" style=""> 417         // Populate the third-party wallpaper pickers                                                    </span>
<span class="4179693282871188976" onmouseenter="enter('4179693282871188976');" onmouseout="out('4179693282871188976');" style=""> 418         final LinearLayout thirdPartyWallpapersView =                                                    </span>
<span class="5882843090694659663" onmouseenter="enter('5882843090694659663');" onmouseout="out('5882843090694659663');" style=""> 419                 (LinearLayout) findViewById(R.id.third_party_wallpaper_list);                            </span>
<span class="-8996746260612235963" onmouseenter="enter('-8996746260612235963');" onmouseout="out('-8996746260612235963');" style=""> 420         final ThirdPartyWallpaperPickerListAdapter ta =                                                  </span>
<span class="-3817734683852475238" onmouseenter="enter('-3817734683852475238');" onmouseout="out('-3817734683852475238');" style=""> 421                 new ThirdPartyWallpaperPickerListAdapter(this);                                          </span>
<span class="-7445625898420221963" onmouseenter="enter('-7445625898420221963');" onmouseout="out('-7445625898420221963');" style=""> 422         populateWallpapersFromAdapter(thirdPartyWallpapersView, ta, false);                              </span>
<span  style=""> 423                                                                                                          </span>
<span class="4527492266177887191" onmouseenter="enter('4527492266177887191');" onmouseout="out('4527492266177887191');" style=""> 424         // Add a tile for the Gallery                                                                    </span>
<span class="-1043783805889159162" onmouseenter="enter('-1043783805889159162');" onmouseout="out('-1043783805889159162');" style=""> 425         LinearLayout masterWallpaperList = (LinearLayout) findViewById(R.id.master_wallpaper_list);      </span>
<span class="-2892944612318584502" onmouseenter="enter('-2892944612318584502');" onmouseout="out('-2892944612318584502');" style=""> 426         FrameLayout pickImageTile = (FrameLayout) getLayoutInflater().                                   </span>
<span class="5850716178866842185" onmouseenter="enter('5850716178866842185');" onmouseout="out('5850716178866842185');" style=""> 427                 inflate(R.layout.wallpaper_picker_image_picker_item, masterWallpaperList, false);        </span>
<span class="2326204380171439497" onmouseenter="enter('2326204380171439497');" onmouseout="out('2326204380171439497');" style=""> 428         setWallpaperItemPaddingToZero(pickImageTile);                                                    </span>
<span class="-4838121476786006009" onmouseenter="enter('-4838121476786006009');" onmouseout="out('-4838121476786006009');" style=""> 429         masterWallpaperList.addView(pickImageTile, 0);                                                   </span>
<span  style=""> 430                                                                                                          </span>
<span class="-8054039016662892826" onmouseenter="enter('-8054039016662892826');" onmouseout="out('-8054039016662892826');" style=""> 431         // Make its background the last photo taken on external storage                                  </span>
<span class="5284589790222029877" onmouseenter="enter('5284589790222029877');" onmouseout="out('5284589790222029877');" style=""> 432         Bitmap lastPhoto = getThumbnailOfLastPhoto();                                                    </span>
<span class="8723279423157572309" onmouseenter="enter('8723279423157572309');" onmouseout="out('8723279423157572309');" style=""> 433         if (lastPhoto != null) {                                                                         </span>
<span class="-2542013877954624323" onmouseenter="enter('-2542013877954624323');" onmouseout="out('-2542013877954624323');" style=""> 434             ImageView galleryThumbnailBg =                                                               </span>
<span class="7337794319296943994" onmouseenter="enter('7337794319296943994');" onmouseout="out('7337794319296943994');" style=""> 435                     (ImageView) pickImageTile.findViewById(R.id.wallpaper_image);                        </span>
<span class="-9209586398559028294" onmouseenter="enter('-9209586398559028294');" onmouseout="out('-9209586398559028294');" style=""> 436             galleryThumbnailBg.setImageBitmap(getThumbnailOfLastPhoto());                                </span>
<span class="624469022368512634" onmouseenter="enter('624469022368512634');" onmouseout="out('624469022368512634');" style=""> 437             int colorOverlay = getResources().getColor(R.color.wallpaper_picker_translucent_gray);       </span>
<span class="5708377594966735596" onmouseenter="enter('5708377594966735596');" onmouseout="out('5708377594966735596');" style=""> 438             galleryThumbnailBg.setColorFilter(colorOverlay, PorterDuff.Mode.SRC_ATOP);                   </span>
<span  style=""> 439                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440         }                                                                                                </span>
<span  style=""> 441                                                                                                          </span>
<span class="-8315020353080803014" onmouseenter="enter('-8315020353080803014');" onmouseout="out('-8315020353080803014');" style=""> 442         PickImageInfo pickImageInfo = new PickImageInfo();                                               </span>
<span class="332578453689310385" onmouseenter="enter('332578453689310385');" onmouseout="out('332578453689310385');" style=""> 443         pickImageTile.setTag(pickImageInfo);                                                             </span>
<span class="341631545919556933" onmouseenter="enter('341631545919556933');" onmouseout="out('341631545919556933');" style=""> 444         pickImageInfo.setView(pickImageTile);                                                            </span>
<span class="-2769069389002591388" onmouseenter="enter('-2769069389002591388');" onmouseout="out('-2769069389002591388');" style=""> 445         pickImageTile.setOnClickListener(mThumbnailOnClickListener);                                     </span>
<span  style=""> 446                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 447 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 448 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 449                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 450                 if (mActionMode != null) {                                                               </span>
<span class="-102618795880011952" onmouseenter="enter('-102618795880011952');" onmouseout="out('-102618795880011952');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 451                     mActionMode.invalidate();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 452                 } else {                                                                                 </span>
<span class="-9026698002389905756" onmouseenter="enter('-9026698002389905756');" onmouseout="out('-9026698002389905756');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 453                     // Start the CAB using the ActionMode.Callback defined below                         </span>
<span class="-65256925409540847" onmouseenter="enter('-65256925409540847');" onmouseout="out('-65256925409540847');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 454                     mActionMode = startActionMode(mActionModeCallback);                                  </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 455                     int childCount = mWallpapersView.getChildCount();                                    </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 456                     for (int i = 0; i &lt; childCount; i++) {                                               </span>
<span class="8061120510894137201" onmouseenter="enter('8061120510894137201');" onmouseout="out('8061120510894137201');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 457                         mWallpapersView.getChildAt(i).setSelected(false);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 458                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 459                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 460                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 461             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 462         };                                                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 463                                                                                                          </span>
<span class="5863981315080253557" onmouseenter="enter('5863981315080253557');" onmouseout="out('5863981315080253557');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 464         // Populate the built-in wallpapers                                                              </span>
<span class="6500407248480550199" onmouseenter="enter('6500407248480550199');" onmouseout="out('6500407248480550199');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 465         ArrayList&lt;ResourceWallpaperInfo&gt; wallpapers = findBundledWallpapers();                           </span>
<span class="2526610556609193817" onmouseenter="enter('2526610556609193817');" onmouseout="out('2526610556609193817');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 466         mWallpapersView = (LinearLayout) findViewById(R.id.wallpaper_list);                              </span>
<span class="-1084816711772244491" onmouseenter="enter('-1084816711772244491');" onmouseout="out('-1084816711772244491');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 467         BuiltInWallpapersAdapter ia = new BuiltInWallpapersAdapter(this, wallpapers);                    </span>
<span class="1613737006506352436" onmouseenter="enter('1613737006506352436');" onmouseout="out('1613737006506352436');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 468         populateWallpapersFromAdapter(mWallpapersView, ia, false);                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 469                                                                                                          </span>
<span class="-6274271967551788045" onmouseenter="enter('-6274271967551788045');" onmouseout="out('-6274271967551788045');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 470         // Populate the saved wallpapers                                                                 </span>
<span class="-593929748363635247" onmouseenter="enter('-593929748363635247');" onmouseout="out('-593929748363635247');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 471         mSavedImages = new SavedWallpaperImages(this);                                                   </span>
<span class="-944718586241422514" onmouseenter="enter('-944718586241422514');" onmouseout="out('-944718586241422514');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 472         mSavedImages.loadThumbnailsAndImageIdList();                                                     </span>
<span class="3791789265677239077" onmouseenter="enter('3791789265677239077');" onmouseout="out('3791789265677239077');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 473         populateWallpapersFromAdapter(mWallpapersView, mSavedImages, true);                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 474                                                                                                          </span>
<span class="-8704527322237514837" onmouseenter="enter('-8704527322237514837');" onmouseout="out('-8704527322237514837');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 475         // Populate the live wallpapers                                                                  </span>
<span class="-401644721260157166" onmouseenter="enter('-401644721260157166');" onmouseout="out('-401644721260157166');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 476         final LinearLayout liveWallpapersView =                                                          </span>
<span class="-885348281479887742" onmouseenter="enter('-885348281479887742');" onmouseout="out('-885348281479887742');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 477                 (LinearLayout) findViewById(R.id.live_wallpaper_list);                                   </span>
<span class="-8599704022634275072" onmouseenter="enter('-8599704022634275072');" onmouseout="out('-8599704022634275072');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 478         final LiveWallpaperListAdapter a = new LiveWallpaperListAdapter(this);                           </span>
<span class="7657389333195170209" onmouseenter="enter('7657389333195170209');" onmouseout="out('7657389333195170209');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 479         a.registerDataSetObserver(new DataSetObserver() {                                                </span>
<span class="2979494936249539834" onmouseenter="enter('2979494936249539834');" onmouseout="out('2979494936249539834');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 480             public void onChanged() {                                                                    </span>
<span class="-1492802084192978474" onmouseenter="enter('-1492802084192978474');" onmouseout="out('-1492802084192978474');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 481                 liveWallpapersView.removeAllViews();                                                     </span>
<span class="3875768049007720660" onmouseenter="enter('3875768049007720660');" onmouseout="out('3875768049007720660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 482                 populateWallpapersFromAdapter(liveWallpapersView, a, false);                             </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 483                 initializeScrollForRtl();                                                                </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 484                 updateTileIndices();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 485             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 486         });                                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 487                                                                                                          </span>
<span class="-205780312699671492" onmouseenter="enter('-205780312699671492');" onmouseout="out('-205780312699671492');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 488         // Populate the third-party wallpaper pickers                                                    </span>
<span class="4179693282871188976" onmouseenter="enter('4179693282871188976');" onmouseout="out('4179693282871188976');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 489         final LinearLayout thirdPartyWallpapersView =                                                    </span>
<span class="5882843090694659663" onmouseenter="enter('5882843090694659663');" onmouseout="out('5882843090694659663');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 490                 (LinearLayout) findViewById(R.id.third_party_wallpaper_list);                            </span>
<span class="-8996746260612235963" onmouseenter="enter('-8996746260612235963');" onmouseout="out('-8996746260612235963');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 491         final ThirdPartyWallpaperPickerListAdapter ta =                                                  </span>
<span class="-3817734683852475238" onmouseenter="enter('-3817734683852475238');" onmouseout="out('-3817734683852475238');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 492                 new ThirdPartyWallpaperPickerListAdapter(this);                                          </span>
<span class="-7445625898420221963" onmouseenter="enter('-7445625898420221963');" onmouseout="out('-7445625898420221963');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 493         populateWallpapersFromAdapter(thirdPartyWallpapersView, ta, false);                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 494                                                                                                          </span>
<span class="4527492266177887191" onmouseenter="enter('4527492266177887191');" onmouseout="out('4527492266177887191');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 495         // Add a tile for the Gallery                                                                    </span>
<span class="-1043783805889159162" onmouseenter="enter('-1043783805889159162');" onmouseout="out('-1043783805889159162');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 496         LinearLayout masterWallpaperList = (LinearLayout) findViewById(R.id.master_wallpaper_list);      </span>
<span class="-2892944612318584502" onmouseenter="enter('-2892944612318584502');" onmouseout="out('-2892944612318584502');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 497         FrameLayout pickImageTile = (FrameLayout) getLayoutInflater().                                   </span>
<span class="5850716178866842185" onmouseenter="enter('5850716178866842185');" onmouseout="out('5850716178866842185');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 498                 inflate(R.layout.wallpaper_picker_image_picker_item, masterWallpaperList, false);        </span>
<span class="2326204380171439497" onmouseenter="enter('2326204380171439497');" onmouseout="out('2326204380171439497');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 499         setWallpaperItemPaddingToZero(pickImageTile);                                                    </span>
<span class="-4838121476786006009" onmouseenter="enter('-4838121476786006009');" onmouseout="out('-4838121476786006009');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 500         masterWallpaperList.addView(pickImageTile, 0);                                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 501                                                                                                          </span>
<span class="-8054039016662892826" onmouseenter="enter('-8054039016662892826');" onmouseout="out('-8054039016662892826');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 502         // Make its background the last photo taken on external storage                                  </span>
<span class="5284589790222029877" onmouseenter="enter('5284589790222029877');" onmouseout="out('5284589790222029877');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 503         Bitmap lastPhoto = getThumbnailOfLastPhoto();                                                    </span>
<span class="8723279423157572309" onmouseenter="enter('8723279423157572309');" onmouseout="out('8723279423157572309');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 504         if (lastPhoto != null) {                                                                         </span>
<span class="-2542013877954624323" onmouseenter="enter('-2542013877954624323');" onmouseout="out('-2542013877954624323');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 505             ImageView galleryThumbnailBg =                                                               </span>
<span class="7337794319296943994" onmouseenter="enter('7337794319296943994');" onmouseout="out('7337794319296943994');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 506                     (ImageView) pickImageTile.findViewById(R.id.wallpaper_image);                        </span>
<span class="-9209586398559028294" onmouseenter="enter('-9209586398559028294');" onmouseout="out('-9209586398559028294');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 507             galleryThumbnailBg.setImageBitmap(getThumbnailOfLastPhoto());                                </span>
<span class="624469022368512634" onmouseenter="enter('624469022368512634');" onmouseout="out('624469022368512634');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 508             int colorOverlay = getResources().getColor(R.color.wallpaper_picker_translucent_gray);       </span>
<span class="5708377594966735596" onmouseenter="enter('5708377594966735596');" onmouseout="out('5708377594966735596');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 509             galleryThumbnailBg.setColorFilter(colorOverlay, PorterDuff.Mode.SRC_ATOP);                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 510                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 511         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 512                                                                                                          </span>
<span class="-8315020353080803014" onmouseenter="enter('-8315020353080803014');" onmouseout="out('-8315020353080803014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 513         PickImageInfo pickImageInfo = new PickImageInfo();                                               </span>
<span class="332578453689310385" onmouseenter="enter('332578453689310385');" onmouseout="out('332578453689310385');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 514         pickImageTile.setTag(pickImageInfo);                                                             </span>
<span class="341631545919556933" onmouseenter="enter('341631545919556933');" onmouseout="out('341631545919556933');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 515         pickImageInfo.setView(pickImageTile);                                                            </span>
<span class="-2769069389002591388" onmouseenter="enter('-2769069389002591388');" onmouseout="out('-2769069389002591388');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 516         pickImageTile.setOnClickListener(mThumbnailOnClickListener);                                     </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 517                                                                                                          </span>
<span class="-6323124298703880370" onmouseenter="enter('-6323124298703880370');" onmouseout="out('-6323124298703880370');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 518         // Add a tile for the default wallpaper                                                          </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 519         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                       </span>
<span class="-8035104503087874539" onmouseenter="enter('-8035104503087874539');" onmouseout="out('-8035104503087874539');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 520             DefaultWallpaperInfo defaultWallpaperInfo = getDefaultWallpaper();                           </span>
<span class="-7974818341329769015" onmouseenter="enter('-7974818341329769015');" onmouseout="out('-7974818341329769015');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 521             if (defaultWallpaperInfo != null) {                                                          </span>
<span class="-4325253571427058789" onmouseenter="enter('-4325253571427058789');" onmouseout="out('-4325253571427058789');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 522                 FrameLayout defaultWallpaperTile = (FrameLayout) createImageTileView(                    </span>
<span class="-8899029130827292664" onmouseenter="enter('-8899029130827292664');" onmouseout="out('-8899029130827292664');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 523                         getLayoutInflater(), 0, null, mWallpapersView, defaultWallpaperInfo.mThumb);     </span>
<span class="-629728534688330447" onmouseenter="enter('-629728534688330447');" onmouseout="out('-629728534688330447');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 524                 setWallpaperItemPaddingToZero(defaultWallpaperTile);                                     </span>
<span class="-5979956798027861601" onmouseenter="enter('-5979956798027861601');" onmouseout="out('-5979956798027861601');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 525                 defaultWallpaperTile.setTag(defaultWallpaperInfo);                                       </span>
<span class="622777186220911912" onmouseenter="enter('622777186220911912');" onmouseout="out('622777186220911912');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 526                 mWallpapersView.addView(defaultWallpaperTile, 0);                                        </span>
<span class="-1284363967168502177" onmouseenter="enter('-1284363967168502177');" onmouseout="out('-1284363967168502177');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 527                 defaultWallpaperTile.setOnClickListener(mThumbnailOnClickListener);                      </span>
<span class="-3976171105652027808" onmouseenter="enter('-3976171105652027808');" onmouseout="out('-3976171105652027808');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 528                 defaultWallpaperInfo.setView(defaultWallpaperTile);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 529             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 530         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 531                                                                                                          </span>
<span class="-7723413543726583493" onmouseenter="enter('-7723413543726583493');" onmouseout="out('-7723413543726583493');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 532         // Select the first item; wait for a layout pass so that we initialize the dimensions of         </span>
<span class="-7132987448791092062" onmouseenter="enter('-7132987448791092062');" onmouseout="out('-7132987448791092062');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 533         // cropView or the defaultWallpaperView first                                                    </span>
<span class="-3578479520308771673" onmouseenter="enter('-3578479520308771673');" onmouseout="out('-3578479520308771673');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 534         mCropView.addOnLayoutChangeListener(new OnLayoutChangeListener() {                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 535             @Override                                                                                    </span>
<span class="591765389892742886" onmouseenter="enter('591765389892742886');" onmouseout="out('591765389892742886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 536             public void onLayoutChange(View v, int left, int top, int right, int bottom,                 </span>
<span class="-3173737103826844444" onmouseenter="enter('-3173737103826844444');" onmouseout="out('-3173737103826844444');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 537                     int oldLeft, int oldTop, int oldRight, int oldBottom) {                              </span>
<span class="-7279384040956130450" onmouseenter="enter('-7279384040956130450');" onmouseout="out('-7279384040956130450');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 538                 if ((right - left) &gt; 0 &amp;&amp; (bottom - top) &gt; 0) {                                          </span>
<span class="8533166584309198773" onmouseenter="enter('8533166584309198773');" onmouseout="out('8533166584309198773');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 539                     if (mSelectedIndex &gt;= 0 &amp;&amp; mSelectedIndex &lt; mWallpapersView.getChildCount()) {       </span>
<span class="3126649155980915533" onmouseenter="enter('3126649155980915533');" onmouseout="out('3126649155980915533');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 540                         mThumbnailOnClickListener.onClick(                                               </span>
<span class="7801074009986787853" onmouseenter="enter('7801074009986787853');" onmouseout="out('7801074009986787853');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 541                                 mWallpapersView.getChildAt(mSelectedIndex));                             </span>
<span class="-561940081499707422" onmouseenter="enter('-561940081499707422');" onmouseout="out('-561940081499707422');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 542                         setSystemWallpaperVisiblity(false);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 543                     }                                                                                    </span>
<span class="-3420549157427558140" onmouseenter="enter('-3420549157427558140');" onmouseout="out('-3420549157427558140');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 544                     v.removeOnLayoutChangeListener(this);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 545                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 546             }                                                                                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 547 =======                                                                                                  </span>
<span class="-6323124298703880370" onmouseenter="enter('-6323124298703880370');" onmouseout="out('-6323124298703880370');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 548         // Add a tile for the default wallpaper                                                          </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 549         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                       </span>
<span class="-8035104503087874539" onmouseenter="enter('-8035104503087874539');" onmouseout="out('-8035104503087874539');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 550             DefaultWallpaperInfo defaultWallpaperInfo = getDefaultWallpaper();                           </span>
<span class="-4325253571427058789" onmouseenter="enter('-4325253571427058789');" onmouseout="out('-4325253571427058789');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 551             FrameLayout defaultWallpaperTile = (FrameLayout) createImageTileView(                        </span>
<span class="-8899029130827292664" onmouseenter="enter('-8899029130827292664');" onmouseout="out('-8899029130827292664');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 552                     getLayoutInflater(), 0, null, mWallpapersView, defaultWallpaperInfo.mThumb);         </span>
<span class="-629728534688330447" onmouseenter="enter('-629728534688330447');" onmouseout="out('-629728534688330447');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 553             setWallpaperItemPaddingToZero(defaultWallpaperTile);                                         </span>
<span class="-5979956798027861601" onmouseenter="enter('-5979956798027861601');" onmouseout="out('-5979956798027861601');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 554             defaultWallpaperTile.setTag(defaultWallpaperInfo);                                           </span>
<span class="622777186220911912" onmouseenter="enter('622777186220911912');" onmouseout="out('622777186220911912');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 555             mWallpapersView.addView(defaultWallpaperTile, 0);                                            </span>
<span class="-1284363967168502177" onmouseenter="enter('-1284363967168502177');" onmouseout="out('-1284363967168502177');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 556             defaultWallpaperTile.setOnClickListener(mThumbnailOnClickListener);                          </span>
<span class="-3976171105652027808" onmouseenter="enter('-3976171105652027808');" onmouseout="out('-3976171105652027808');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 557             defaultWallpaperInfo.setView(defaultWallpaperTile);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 558         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 559                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 560 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-7723413543726583493" onmouseenter="enter('-7723413543726583493');" onmouseout="out('-7723413543726583493');" style=""> 561         // Select the first item; wait for a layout pass so that we initialize the dimensions of         </span>
<span class="-7132987448791092062" onmouseenter="enter('-7132987448791092062');" onmouseout="out('-7132987448791092062');" style=""> 562         // cropView or the defaultWallpaperView first                                                    </span>
<span class="-3578479520308771673" onmouseenter="enter('-3578479520308771673');" onmouseout="out('-3578479520308771673');" style=""> 563         mCropView.addOnLayoutChangeListener(new OnLayoutChangeListener() {                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 564             @Override                                                                                    </span>
<span class="591765389892742886" onmouseenter="enter('591765389892742886');" onmouseout="out('591765389892742886');" style=""> 565             public void onLayoutChange(View v, int left, int top, int right, int bottom,                 </span>
<span class="-3173737103826844444" onmouseenter="enter('-3173737103826844444');" onmouseout="out('-3173737103826844444');" style=""> 566                     int oldLeft, int oldTop, int oldRight, int oldBottom) {                              </span>
<span class="-7279384040956130450" onmouseenter="enter('-7279384040956130450');" onmouseout="out('-7279384040956130450');" style=""> 567                 if ((right - left) &gt; 0 &amp;&amp; (bottom - top) &gt; 0) {                                          </span>
<span class="8533166584309198773" onmouseenter="enter('8533166584309198773');" onmouseout="out('8533166584309198773');" style=""> 568                     if (mSelectedIndex &gt;= 0 &amp;&amp; mSelectedIndex &lt; mWallpapersView.getChildCount()) {       </span>
<span class="3126649155980915533" onmouseenter="enter('3126649155980915533');" onmouseout="out('3126649155980915533');" style=""> 569                         mThumbnailOnClickListener.onClick(                                               </span>
<span class="7801074009986787853" onmouseenter="enter('7801074009986787853');" onmouseout="out('7801074009986787853');" style=""> 570                                 mWallpapersView.getChildAt(mSelectedIndex));                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571                     }                                                                                    </span>
<span class="-3420549157427558140" onmouseenter="enter('-3420549157427558140');" onmouseout="out('-3420549157427558140');" style=""> 572                     v.removeOnLayoutChangeListener(this);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 575         });                                                                                              </span>
<span  style=""> 576                                                                                                          </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 577         updateTileIndices();                                                                             </span>
<span  style=""> 578                                                                                                          </span>
<span class="1759508296475864781" onmouseenter="enter('1759508296475864781');" onmouseout="out('1759508296475864781');" style=""> 579         // Update the scroll for RTL                                                                     </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style=""> 580         initializeScrollForRtl();                                                                        </span>
<span  style=""> 581                                                                                                          </span>
<span class="8754677635152392755" onmouseenter="enter('8754677635152392755');" onmouseout="out('8754677635152392755');" style=""> 582         // Create smooth layout transitions for when items are deleted                                   </span>
<span class="-4930329743174539782" onmouseenter="enter('-4930329743174539782');" onmouseout="out('-4930329743174539782');" style=""> 583         final LayoutTransition transitioner = new LayoutTransition();                                    </span>
<span class="1485581076488552999" onmouseenter="enter('1485581076488552999');" onmouseout="out('1485581076488552999');" style=""> 584         transitioner.setDuration(200);                                                                   </span>
<span class="-2061924607669327428" onmouseenter="enter('-2061924607669327428');" onmouseout="out('-2061924607669327428');" style=""> 585         transitioner.setStartDelay(LayoutTransition.CHANGE_DISAPPEARING, 0);                             </span>
<span class="-3369306044554735862" onmouseenter="enter('-3369306044554735862');" onmouseout="out('-3369306044554735862');" style=""> 586         transitioner.setAnimator(LayoutTransition.DISAPPEARING, null);                                   </span>
<span class="3452611492242513009" onmouseenter="enter('3452611492242513009');" onmouseout="out('3452611492242513009');" style=""> 587         mWallpapersView.setLayoutTransition(transitioner);                                               </span>
<span  style=""> 588                                                                                                          </span>
<span class="-6690949822417478966" onmouseenter="enter('-6690949822417478966');" onmouseout="out('-6690949822417478966');" style=""> 589         // Action bar                                                                                    </span>
<span class="-3883215512946619745" onmouseenter="enter('-3883215512946619745');" onmouseout="out('-3883215512946619745');" style=""> 590         // Show the custom action bar view                                                               </span>
<span class="-1117346380634877983" onmouseenter="enter('-1117346380634877983');" onmouseout="out('-1117346380634877983');" style=""> 591         final ActionBar actionBar = getActionBar();                                                      </span>
<span class="2297539018706653511" onmouseenter="enter('2297539018706653511');" onmouseout="out('2297539018706653511');" style=""> 592         actionBar.setCustomView(R.layout.actionbar_set_wallpaper);                                       </span>
<span class="-1240601639018603710" onmouseenter="enter('-1240601639018603710');" onmouseout="out('-1240601639018603710');" style=""> 593         actionBar.getCustomView().setOnClickListener(                                                    </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style=""> 594                 new View.OnClickListener() {                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 595                     @Override                                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 596                     public void onClick(View v) {                                                        </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 597                         if (mSelectedTile != null) {                                                     </span>
<span class="4798294102843957642" onmouseenter="enter('4798294102843957642');" onmouseout="out('4798294102843957642');" style=""> 598                             WallpaperTileInfo info = (WallpaperTileInfo) mSelectedTile.getTag();         </span>
<span class="8585600142234583597" onmouseenter="enter('8585600142234583597');" onmouseout="out('8585600142234583597');" style=""> 599                             info.onSave(WallpaperPickerActivity.this);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 602                 });                                                                                      </span>
<span class="-1738970073048232250" onmouseenter="enter('-1738970073048232250');" onmouseout="out('-1738970073048232250');" style=""> 603         mSetWallpaperButton = findViewById(R.id.set_wallpaper_button);                                   </span>
<span  style=""> 604                                                                                                          </span>
<span class="-4302888392572327731" onmouseenter="enter('-4302888392572327731');" onmouseout="out('-4302888392572327731');" style=""> 605         // CAB for deleting items                                                                        </span>
<span class="-127999484312805671" onmouseenter="enter('-127999484312805671');" onmouseout="out('-127999484312805671');" style=""> 606         mActionModeCallback = new ActionMode.Callback() {                                                </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 607             // Called when the action mode is created; startActionMode() was called                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 608             @Override                                                                                    </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 609             public boolean onCreateActionMode(ActionMode mode, Menu menu) {                              </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 610                 // Inflate a menu resource providing context menu items                                  </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 611                 MenuInflater inflater = mode.getMenuInflater();                                          </span>
<span class="-6388875521407758282" onmouseenter="enter('-6388875521407758282');" onmouseout="out('-6388875521407758282');" style=""> 612                 inflater.inflate(R.menu.cab_delete_wallpapers, menu);                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 613                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614             }                                                                                            </span>
<span  style=""> 615                                                                                                          </span>
<span class="870397737873592214" onmouseenter="enter('870397737873592214');" onmouseout="out('870397737873592214');" style=""> 616             private int numCheckedItems() {                                                              </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 617                 int childCount = mWallpapersView.getChildCount();                                        </span>
<span class="-6883723717821950794" onmouseenter="enter('-6883723717821950794');" onmouseout="out('-6883723717821950794');" style=""> 618                 int numCheckedItems = 0;                                                                 </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 619                 for (int i = 0; i &lt; childCount; i++) {                                                   </span>
<span class="-3282833298704710263" onmouseenter="enter('-3282833298704710263');" onmouseout="out('-3282833298704710263');" style=""> 620                     CheckableFrameLayout c = (CheckableFrameLayout) mWallpapersView.getChildAt(i);       </span>
<span class="-2798719840605914218" onmouseenter="enter('-2798719840605914218');" onmouseout="out('-2798719840605914218');" style=""> 621                     if (c.isChecked()) {                                                                 </span>
<span class="-1438188096822969363" onmouseenter="enter('-1438188096822969363');" onmouseout="out('-1438188096822969363');" style=""> 622                         numCheckedItems++;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                 }                                                                                        </span>
<span class="681861663930848334" onmouseenter="enter('681861663930848334');" onmouseout="out('681861663930848334');" style=""> 625                 return numCheckedItems;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626             }                                                                                            </span>
<span  style=""> 627                                                                                                          </span>
<span class="-4908427375201257296" onmouseenter="enter('-4908427375201257296');" onmouseout="out('-4908427375201257296');" style=""> 628             // Called each time the action mode is shown. Always called after onCreateActionMode,        </span>
<span class="9007433729996553145" onmouseenter="enter('9007433729996553145');" onmouseout="out('9007433729996553145');" style=""> 629             // but may be called multiple times if the mode is invalidated.                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 630             @Override                                                                                    </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 631             public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                             </span>
<span class="-5101330785437320191" onmouseenter="enter('-5101330785437320191');" onmouseout="out('-5101330785437320191');" style=""> 632                 int numCheckedItems = numCheckedItems();                                                 </span>
<span class="8659757951446504827" onmouseenter="enter('8659757951446504827');" onmouseout="out('8659757951446504827');" style=""> 633                 if (numCheckedItems == 0) {                                                              </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 634                     mode.finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 635                     return true;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 636                 } else {                                                                                 </span>
<span class="-2320150819220019446" onmouseenter="enter('-2320150819220019446');" onmouseout="out('-2320150819220019446');" style=""> 637                     mode.setTitle(getResources().getQuantityString(                                      </span>
<span class="3298697623442124911" onmouseenter="enter('3298697623442124911');" onmouseout="out('3298697623442124911');" style=""> 638                             R.plurals.number_of_items_selected, numCheckedItems, numCheckedItems));      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 639                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641             }                                                                                            </span>
<span  style=""> 642                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 643             // Called when the user selects a contextual menu item                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 644             @Override                                                                                    </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 645             public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                         </span>
<span class="-2371175833572540313" onmouseenter="enter('-2371175833572540313');" onmouseout="out('-2371175833572540313');" style=""> 646                 int itemId = item.getItemId();                                                           </span>
<span class="-5718447720547061668" onmouseenter="enter('-5718447720547061668');" onmouseout="out('-5718447720547061668');" style=""> 647                 if (itemId == R.id.menu_delete) {                                                        </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 648                     int childCount = mWallpapersView.getChildCount();                                    </span>
<span class="-7751152015140741745" onmouseenter="enter('-7751152015140741745');" onmouseout="out('-7751152015140741745');" style=""> 649                     ArrayList&lt;View&gt; viewsToRemove = new ArrayList&lt;View&gt;();                               </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 650                     for (int i = 0; i &lt; childCount; i++) {                                               </span>
<span class="7507653399143335627" onmouseenter="enter('7507653399143335627');" onmouseout="out('7507653399143335627');" style=""> 651                         CheckableFrameLayout c =                                                         </span>
<span class="3931690413303975782" onmouseenter="enter('3931690413303975782');" onmouseout="out('3931690413303975782');" style=""> 652                                 (CheckableFrameLayout) mWallpapersView.getChildAt(i);                    </span>
<span class="-2798719840605914218" onmouseenter="enter('-2798719840605914218');" onmouseout="out('-2798719840605914218');" style=""> 653                         if (c.isChecked()) {                                                             </span>
<span class="8039758652893746202" onmouseenter="enter('8039758652893746202');" onmouseout="out('8039758652893746202');" style=""> 654                             WallpaperTileInfo info = (WallpaperTileInfo) c.getTag();                     </span>
<span class="-5365064256543243978" onmouseenter="enter('-5365064256543243978');" onmouseout="out('-5365064256543243978');" style=""> 655                             info.onDelete(WallpaperPickerActivity.this);                                 </span>
<span class="7539132712862314960" onmouseenter="enter('7539132712862314960');" onmouseout="out('7539132712862314960');" style=""> 656                             viewsToRemove.add(c);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658                     }                                                                                    </span>
<span class="-2799961312229830756" onmouseenter="enter('-2799961312229830756');" onmouseout="out('-2799961312229830756');" style=""> 659                     for (View v : viewsToRemove) {                                                       </span>
<span class="5094713957757001442" onmouseenter="enter('5094713957757001442');" onmouseout="out('5094713957757001442');" style=""> 660                         mWallpapersView.removeView(v);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661                     }                                                                                    </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 662                     updateTileIndices();                                                                 </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 663                     mode.finish(); // Action picked, so close the CAB                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 664                     return true;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 665                 } else {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 666                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668             }                                                                                            </span>
<span  style=""> 669                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 670             // Called when the user exits the action mode                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 671             @Override                                                                                    </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 672             public void onDestroyActionMode(ActionMode mode) {                                           </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 673                 int childCount = mWallpapersView.getChildCount();                                        </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 674                 for (int i = 0; i &lt; childCount; i++) {                                                   </span>
<span class="-3282833298704710263" onmouseenter="enter('-3282833298704710263');" onmouseout="out('-3282833298704710263');" style=""> 675                     CheckableFrameLayout c = (CheckableFrameLayout) mWallpapersView.getChildAt(i);       </span>
<span class="1014221111310174159" onmouseenter="enter('1014221111310174159');" onmouseout="out('1014221111310174159');" style=""> 676                     c.setChecked(false);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677                 }                                                                                        </span>
<span class="9135117288134691920" onmouseenter="enter('9135117288134691920');" onmouseout="out('9135117288134691920');" style=""> 678                 mSelectedTile.setSelected(true);                                                         </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 679                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 681         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682     }                                                                                                    </span>
<span  style=""> 683                                                                                                          </span>
<span class="-1506115177228939080" onmouseenter="enter('-1506115177228939080');" onmouseout="out('-1506115177228939080');" style=""> 684     private void selectTile(View v) {                                                                    </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 685         if (mSelectedTile != null) {                                                                     </span>
<span class="-2066645340429178571" onmouseenter="enter('-2066645340429178571');" onmouseout="out('-2066645340429178571');" style=""> 686             mSelectedTile.setSelected(false);                                                            </span>
<span class="-5936001525760364202" onmouseenter="enter('-5936001525760364202');" onmouseout="out('-5936001525760364202');" style=""> 687             mSelectedTile = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688         }                                                                                                </span>
<span class="-416733230307533043" onmouseenter="enter('-416733230307533043');" onmouseout="out('-416733230307533043');" style=""> 689         mSelectedTile = v;                                                                               </span>
<span class="3995602257861476425" onmouseenter="enter('3995602257861476425');" onmouseout="out('3995602257861476425');" style=""> 690         v.setSelected(true);                                                                             </span>
<span class="-6325232721939244615" onmouseenter="enter('-6325232721939244615');" onmouseout="out('-6325232721939244615');" style=""> 691         mSelectedIndex = mWallpapersView.indexOfChild(v);                                                </span>
<span class="-7405161307855549247" onmouseenter="enter('-7405161307855549247');" onmouseout="out('-7405161307855549247');" style=""> 692         // TODO: Remove this once the accessibility framework and                                        </span>
<span class="-4753818808741308090" onmouseenter="enter('-4753818808741308090');" onmouseout="out('-4753818808741308090');" style=""> 693         // services have better support for selection state.                                             </span>
<span class="2204888622725665866" onmouseenter="enter('2204888622725665866');" onmouseout="out('2204888622725665866');" style=""> 694         v.announceForAccessibility(                                                                      </span>
<span class="2493998402613828012" onmouseenter="enter('2493998402613828012');" onmouseout="out('2493998402613828012');" style=""> 695                 getString(R.string.announce_selection, v.getContentDescription()));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696     }                                                                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="3613777925188016048" onmouseenter="enter('3613777925188016048');" onmouseout="out('3613777925188016048');" style=""> 698     private void initializeScrollForRtl() {                                                              </span>
<span class="-1273765683152014823" onmouseenter="enter('-1273765683152014823');" onmouseout="out('-1273765683152014823');" style=""> 699         final HorizontalScrollView scroll =                                                              </span>
<span class="-7037969170098618839" onmouseenter="enter('-7037969170098618839');" onmouseout="out('-7037969170098618839');" style=""> 700                 (HorizontalScrollView) findViewById(R.id.wallpaper_scroll_container);                    </span>
<span  style=""> 701                                                                                                          </span>
<span class="1955425449244494245" onmouseenter="enter('1955425449244494245');" onmouseout="out('1955425449244494245');" style=""> 702         if (scroll.getLayoutDirection() == View.LAYOUT_DIRECTION_RTL) {                                  </span>
<span class="-1890364990500798192" onmouseenter="enter('-1890364990500798192');" onmouseout="out('-1890364990500798192');" style=""> 703             final ViewTreeObserver observer = scroll.getViewTreeObserver();                              </span>
<span class="6394814703996271835" onmouseenter="enter('6394814703996271835');" onmouseout="out('6394814703996271835');" style=""> 704             observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {                            </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 705                 public void onGlobalLayout() {                                                           </span>
<span class="-62510142979053251" onmouseenter="enter('-62510142979053251');" onmouseout="out('-62510142979053251');" style=""> 706                     LinearLayout masterWallpaperList =                                                   </span>
<span class="149389540385452124" onmouseenter="enter('149389540385452124');" onmouseout="out('149389540385452124');" style=""> 707                             (LinearLayout) findViewById(R.id.master_wallpaper_list);                     </span>
<span class="-4254848503069544361" onmouseenter="enter('-4254848503069544361');" onmouseout="out('-4254848503069544361');" style=""> 708                     scroll.scrollTo(masterWallpaperList.getWidth(), 0);                                  </span>
<span class="358343610071411190" onmouseenter="enter('358343610071411190');" onmouseout="out('358343610071411190');" style=""> 709                     scroll.getViewTreeObserver().removeOnGlobalLayoutListener(this);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 711             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713     }                                                                                                    </span>
<span  style=""> 714                                                                                                          </span>
<span class="664193847003739221" onmouseenter="enter('664193847003739221');" onmouseout="out('664193847003739221');" style=""> 715     protected Bitmap getThumbnailOfLastPhoto() {                                                         </span>
<span class="-456509780661296989" onmouseenter="enter('-456509780661296989');" onmouseout="out('-456509780661296989');" style=""> 716         Cursor cursor = MediaStore.Images.Media.query(getContentResolver(),                              </span>
<span class="7103802485324583534" onmouseenter="enter('7103802485324583534');" onmouseout="out('7103802485324583534');" style=""> 717                 MediaStore.Images.Media.EXTERNAL_CONTENT_URI,                                            </span>
<span class="-6614818697721200540" onmouseenter="enter('-6614818697721200540');" onmouseout="out('-6614818697721200540');" style=""> 718                 new String[] { MediaStore.Images.ImageColumns._ID,                                       </span>
<span class="-9180764227414027069" onmouseenter="enter('-9180764227414027069');" onmouseout="out('-9180764227414027069');" style=""> 719                     MediaStore.Images.ImageColumns.DATE_TAKEN},                                          </span>
<span class="627696156117655587" onmouseenter="enter('627696156117655587');" onmouseout="out('627696156117655587');" style=""> 720                 null, null, MediaStore.Images.ImageColumns.DATE_TAKEN + &quot; DESC LIMIT 1&quot;);                </span>
<span  style=""> 721                                                                                                          </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style=""> 722         Bitmap thumb = null;                                                                             </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 723         if (cursor != null) {                                                                            </span>
<span class="-3461632027345581546" onmouseenter="enter('-3461632027345581546');" onmouseout="out('-3461632027345581546');" style=""> 724             if (cursor.moveToNext()) {                                                                   </span>
<span class="-1657892521407389619" onmouseenter="enter('-1657892521407389619');" onmouseout="out('-1657892521407389619');" style=""> 725                 int id = cursor.getInt(0);                                                               </span>
<span class="-1463225791006789159" onmouseenter="enter('-1463225791006789159');" onmouseout="out('-1463225791006789159');" style=""> 726                 thumb = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(),                  </span>
<span class="-3467727521120241070" onmouseenter="enter('-3467727521120241070');" onmouseout="out('-3467727521120241070');" style=""> 727                         id, MediaStore.Images.Thumbnails.MINI_KIND, null);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728             }                                                                                            </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 729             cursor.close();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730         }                                                                                                </span>
<span class="2989265115448010726" onmouseenter="enter('2989265115448010726');" onmouseout="out('2989265115448010726');" style=""> 731         return thumb;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732     }                                                                                                    </span>
<span  style=""> 733                                                                                                          </span>
<span class="-531063095242678892" onmouseenter="enter('-531063095242678892');" onmouseout="out('-531063095242678892');" style=""> 734     protected void onStop() {                                                                            </span>
<span class="-4376279779571809033" onmouseenter="enter('-4376279779571809033');" onmouseout="out('-4376279779571809033');" style=""> 735         super.onStop();                                                                                  </span>
<span class="-2578053662916702311" onmouseenter="enter('-2578053662916702311');" onmouseout="out('-2578053662916702311');" style=""> 736         mWallpaperStrip = findViewById(R.id.wallpaper_strip);                                            </span>
<span class="2061286900587029071" onmouseenter="enter('2061286900587029071');" onmouseout="out('2061286900587029071');" style=""> 737         if (mWallpaperStrip.getAlpha() &lt; 1f) {                                                           </span>
<span class="-7993736133733899989" onmouseenter="enter('-7993736133733899989');" onmouseout="out('-7993736133733899989');" style=""> 738             mWallpaperStrip.setAlpha(1f);                                                                </span>
<span class="2849585250197552354" onmouseenter="enter('2849585250197552354');" onmouseout="out('2849585250197552354');" style=""> 739             mWallpaperStrip.setVisibility(View.VISIBLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741     }                                                                                                    </span>
<span  style=""> 742                                                                                                          </span>
<span class="2923374410094392392" onmouseenter="enter('2923374410094392392');" onmouseout="out('2923374410094392392');" style=""> 743     protected void onSaveInstanceState(Bundle outState) {                                                </span>
<span class="5676996045526496118" onmouseenter="enter('5676996045526496118');" onmouseout="out('5676996045526496118');" style=""> 744         outState.putParcelableArrayList(TEMP_WALLPAPER_TILES, mTempWallpaperTiles);                      </span>
<span class="4842173451749245020" onmouseenter="enter('4842173451749245020');" onmouseout="out('4842173451749245020');" style=""> 745         outState.putInt(SELECTED_INDEX, mSelectedIndex);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746     }                                                                                                    </span>
<span  style=""> 747                                                                                                          </span>
<span class="-2094527111288901138" onmouseenter="enter('-2094527111288901138');" onmouseout="out('-2094527111288901138');" style=""> 748     protected void onRestoreInstanceState(Bundle savedInstanceState) {                                   </span>
<span class="9097341058798999924" onmouseenter="enter('9097341058798999924');" onmouseout="out('9097341058798999924');" style=""> 749         ArrayList&lt;Uri&gt; uris = savedInstanceState.getParcelableArrayList(TEMP_WALLPAPER_TILES);           </span>
<span class="882746572331317232" onmouseenter="enter('882746572331317232');" onmouseout="out('882746572331317232');" style=""> 750         for (Uri uri : uris) {                                                                           </span>
<span class="309442566935810090" onmouseenter="enter('309442566935810090');" onmouseout="out('309442566935810090');" style=""> 751             addTemporaryWallpaperTile(uri, true);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752         }                                                                                                </span>
<span class="-4189402847988360065" onmouseenter="enter('-4189402847988360065');" onmouseout="out('-4189402847988360065');" style=""> 753         mSelectedIndex = savedInstanceState.getInt(SELECTED_INDEX, 0);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754     }                                                                                                    </span>
<span  style=""> 755                                                                                                          </span>
<span class="-3395251471996624785" onmouseenter="enter('-3395251471996624785');" onmouseout="out('-3395251471996624785');" style=""> 756     private void populateWallpapersFromAdapter(ViewGroup parent, BaseAdapter adapter,                    </span>
<span class="-3888515017020188466" onmouseenter="enter('-3888515017020188466');" onmouseout="out('-3888515017020188466');" style=""> 757             boolean addLongPressHandler) {                                                               </span>
<span class="-4655808919273667933" onmouseenter="enter('-4655808919273667933');" onmouseout="out('-4655808919273667933');" style=""> 758         for (int i = 0; i &lt; adapter.getCount(); i++) {                                                   </span>
<span class="-1082551966183171247" onmouseenter="enter('-1082551966183171247');" onmouseout="out('-1082551966183171247');" style=""> 759             FrameLayout thumbnail = (FrameLayout) adapter.getView(i, null, parent);                      </span>
<span class="-2539369959542405754" onmouseenter="enter('-2539369959542405754');" onmouseout="out('-2539369959542405754');" style=""> 760             parent.addView(thumbnail, i);                                                                </span>
<span class="-8640688129381962578" onmouseenter="enter('-8640688129381962578');" onmouseout="out('-8640688129381962578');" style=""> 761             WallpaperTileInfo info = (WallpaperTileInfo) adapter.getItem(i);                             </span>
<span class="-8513774863936305691" onmouseenter="enter('-8513774863936305691');" onmouseout="out('-8513774863936305691');" style=""> 762             thumbnail.setTag(info);                                                                      </span>
<span class="835749422138936601" onmouseenter="enter('835749422138936601');" onmouseout="out('835749422138936601');" style=""> 763             info.setView(thumbnail);                                                                     </span>
<span class="-753060270538025028" onmouseenter="enter('-753060270538025028');" onmouseout="out('-753060270538025028');" style=""> 764             if (addLongPressHandler) {                                                                   </span>
<span class="-7973486700261140064" onmouseenter="enter('-7973486700261140064');" onmouseout="out('-7973486700261140064');" style=""> 765                 addLongPressHandler(thumbnail);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766             }                                                                                            </span>
<span class="2610544249132778797" onmouseenter="enter('2610544249132778797');" onmouseout="out('2610544249132778797');" style=""> 767             thumbnail.setOnClickListener(mThumbnailOnClickListener);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769     }                                                                                                    </span>
<span  style=""> 770                                                                                                          </span>
<span class="7174283580582519873" onmouseenter="enter('7174283580582519873');" onmouseout="out('7174283580582519873');" style=""> 771     private void updateTileIndices() {                                                                   </span>
<span class="-1043783805889159162" onmouseenter="enter('-1043783805889159162');" onmouseout="out('-1043783805889159162');" style=""> 772         LinearLayout masterWallpaperList = (LinearLayout) findViewById(R.id.master_wallpaper_list);      </span>
<span class="259886241860069923" onmouseenter="enter('259886241860069923');" onmouseout="out('259886241860069923');" style=""> 773         final int childCount = masterWallpaperList.getChildCount();                                      </span>
<span class="8480962759227506322" onmouseenter="enter('8480962759227506322');" onmouseout="out('8480962759227506322');" style=""> 774         final Resources res = getResources();                                                            </span>
<span  style=""> 775                                                                                                          </span>
<span class="3521054778015791399" onmouseenter="enter('3521054778015791399');" onmouseout="out('3521054778015791399');" style=""> 776         // Do two passes; the first pass gets the total number of tiles                                  </span>
<span class="5938103209458987108" onmouseenter="enter('5938103209458987108');" onmouseout="out('5938103209458987108');" style=""> 777         int numTiles = 0;                                                                                </span>
<span class="5019589255138395185" onmouseenter="enter('5019589255138395185');" onmouseout="out('5019589255138395185');" style=""> 778         for (int passNum = 0; passNum &lt; 2; passNum++) {                                                  </span>
<span class="1572996252094865016" onmouseenter="enter('1572996252094865016');" onmouseout="out('1572996252094865016');" style=""> 779             int tileIndex = 0;                                                                           </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 780             for (int i = 0; i &lt; childCount; i++) {                                                       </span>
<span class="4123953723067944503" onmouseenter="enter('4123953723067944503');" onmouseout="out('4123953723067944503');" style=""> 781                 View child = masterWallpaperList.getChildAt(i);                                          </span>
<span class="-5829345887602296444" onmouseenter="enter('-5829345887602296444');" onmouseout="out('-5829345887602296444');" style=""> 782                 LinearLayout subList;                                                                    </span>
<span  style=""> 783                                                                                                          </span>
<span class="3605475243255362068" onmouseenter="enter('3605475243255362068');" onmouseout="out('3605475243255362068');" style=""> 784                 int subListStart;                                                                        </span>
<span class="-8450536843674173357" onmouseenter="enter('-8450536843674173357');" onmouseout="out('-8450536843674173357');" style=""> 785                 int subListEnd;                                                                          </span>
<span class="6806008433574303890" onmouseenter="enter('6806008433574303890');" onmouseout="out('6806008433574303890');" style=""> 786                 if (child.getTag() instanceof WallpaperTileInfo) {                                       </span>
<span class="-5389769772346214913" onmouseenter="enter('-5389769772346214913');" onmouseout="out('-5389769772346214913');" style=""> 787                     subList = masterWallpaperList;                                                       </span>
<span class="5694298299445467842" onmouseenter="enter('5694298299445467842');" onmouseout="out('5694298299445467842');" style=""> 788                     subListStart = i;                                                                    </span>
<span class="775032750631300414" onmouseenter="enter('775032750631300414');" onmouseout="out('775032750631300414');" style=""> 789                     subListEnd = i + 1;                                                                  </span>
<span class="-1510097346886829055" onmouseenter="enter('-1510097346886829055');" onmouseout="out('-1510097346886829055');" style=""> 790                 } else { // if (child instanceof LinearLayout) {                                         </span>
<span class="7675569892434777627" onmouseenter="enter('7675569892434777627');" onmouseout="out('7675569892434777627');" style=""> 791                     subList = (LinearLayout) child;                                                      </span>
<span class="-788862889599952363" onmouseenter="enter('-788862889599952363');" onmouseout="out('-788862889599952363');" style=""> 792                     subListStart = 0;                                                                    </span>
<span class="-2292138033159846006" onmouseenter="enter('-2292138033159846006');" onmouseout="out('-2292138033159846006');" style=""> 793                     subListEnd = subList.getChildCount();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794                 }                                                                                        </span>
<span  style=""> 795                                                                                                          </span>
<span class="-3188102189745806183" onmouseenter="enter('-3188102189745806183');" onmouseout="out('-3188102189745806183');" style=""> 796                 for (int j = subListStart; j &lt; subListEnd; j++) {                                        </span>
<span class="-46452018360091707" onmouseenter="enter('-46452018360091707');" onmouseout="out('-46452018360091707');" style=""> 797                     WallpaperTileInfo info = (WallpaperTileInfo) subList.getChildAt(j).getTag();         </span>
<span class="-7564864828845128447" onmouseenter="enter('-7564864828845128447');" onmouseout="out('-7564864828845128447');" style=""> 798                     if (info.isNamelessWallpaper()) {                                                    </span>
<span class="-1910212611706289773" onmouseenter="enter('-1910212611706289773');" onmouseout="out('-1910212611706289773');" style=""> 799                         if (passNum == 0) {                                                              </span>
<span class="2002385288571403014" onmouseenter="enter('2002385288571403014');" onmouseout="out('2002385288571403014');" style=""> 800                             numTiles++;                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 801                         } else {                                                                         </span>
<span class="2118637819721096111" onmouseenter="enter('2118637819721096111');" onmouseout="out('2118637819721096111');" style=""> 802                             CharSequence label = res.getString(                                          </span>
<span class="-2397331067750563254" onmouseenter="enter('-2397331067750563254');" onmouseout="out('-2397331067750563254');" style=""> 803                                     R.string.wallpaper_accessibility_name, ++tileIndex, numTiles);       </span>
<span class="176872867902725227" onmouseenter="enter('176872867902725227');" onmouseout="out('176872867902725227');" style=""> 804                             info.onIndexUpdated(label);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810     }                                                                                                    </span>
<span  style=""> 811                                                                                                          </span>
<span class="2510156197068194941" onmouseenter="enter('2510156197068194941');" onmouseout="out('2510156197068194941');" style=""> 812     private static Point getDefaultThumbnailSize(Resources res) {                                        </span>
<span class="-6874335415328293767" onmouseenter="enter('-6874335415328293767');" onmouseout="out('-6874335415328293767');" style=""> 813         return new Point(res.getDimensionPixelSize(R.dimen.wallpaperThumbnailWidth),                     </span>
<span class="9213584837082607543" onmouseenter="enter('9213584837082607543');" onmouseout="out('9213584837082607543');" style=""> 814                 res.getDimensionPixelSize(R.dimen.wallpaperThumbnailHeight));                            </span>
<span  style=""> 815                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816     }                                                                                                    </span>
<span  style=""> 817                                                                                                          </span>
<span class="-2190537902917228056" onmouseenter="enter('-2190537902917228056');" onmouseout="out('-2190537902917228056');" style=""> 818     private static Bitmap createThumbnail(Point size, Context context, Uri uri, byte[] imageBytes,       </span>
<span class="1462494306554119473" onmouseenter="enter('1462494306554119473');" onmouseout="out('1462494306554119473');" style=""> 819             Resources res, int resId, int rotation, boolean leftAligned) {                               </span>
<span class="2197190995614732863" onmouseenter="enter('2197190995614732863');" onmouseout="out('2197190995614732863');" style=""> 820         int width = size.x;                                                                              </span>
<span class="1656572652603557172" onmouseenter="enter('1656572652603557172');" onmouseout="out('1656572652603557172');" style=""> 821         int height = size.y;                                                                             </span>
<span  style=""> 822                                                                                                          </span>
<span class="7349190684690785447" onmouseenter="enter('7349190684690785447');" onmouseout="out('7349190684690785447');" style=""> 823         BitmapCropTask cropTask;                                                                         </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style=""> 824         if (uri != null) {                                                                               </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 825             cropTask = new BitmapCropTask(                                                               </span>
<span class="8478899448975750390" onmouseenter="enter('8478899448975750390');" onmouseout="out('8478899448975750390');" style=""> 826                     context, uri, null, rotation, width, height, false, true, null);                     </span>
<span class="3032403540229941925" onmouseenter="enter('3032403540229941925');" onmouseout="out('3032403540229941925');" style=""> 827         } else if (imageBytes != null) {                                                                 </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 828             cropTask = new BitmapCropTask(                                                               </span>
<span class="4933078725267557507" onmouseenter="enter('4933078725267557507');" onmouseout="out('4933078725267557507');" style=""> 829                     imageBytes, null, rotation, width, height, false, true, null);                       </span>
<span class="-6240460135729763291" onmouseenter="enter('-6240460135729763291');" onmouseout="out('-6240460135729763291');" style=""> 830         }  else {                                                                                        </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 831             cropTask = new BitmapCropTask(                                                               </span>
<span class="8004600037434906454" onmouseenter="enter('8004600037434906454');" onmouseout="out('8004600037434906454');" style=""> 832                     context, res, resId, null, rotation, width, height, false, true, null);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833         }                                                                                                </span>
<span class="-6453579906380884917" onmouseenter="enter('-6453579906380884917');" onmouseout="out('-6453579906380884917');" style=""> 834         Point bounds = cropTask.getImageBounds();                                                        </span>
<span class="-3295188915583570787" onmouseenter="enter('-3295188915583570787');" onmouseout="out('-3295188915583570787');" style=""> 835         if (bounds == null || bounds.x == 0 || bounds.y == 0) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 836             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837         }                                                                                                </span>
<span  style=""> 838                                                                                                          </span>
<span class="6879132970877670755" onmouseenter="enter('6879132970877670755');" onmouseout="out('6879132970877670755');" style=""> 839         Matrix rotateMatrix = new Matrix();                                                              </span>
<span class="-6437688486507158764" onmouseenter="enter('-6437688486507158764');" onmouseout="out('-6437688486507158764');" style=""> 840         rotateMatrix.setRotate(rotation);                                                                </span>
<span class="1369286570105688669" onmouseenter="enter('1369286570105688669');" onmouseout="out('1369286570105688669');" style=""> 841         float[] rotatedBounds = new float[] { bounds.x, bounds.y };                                      </span>
<span class="9124648468601119627" onmouseenter="enter('9124648468601119627');" onmouseout="out('9124648468601119627');" style=""> 842         rotateMatrix.mapPoints(rotatedBounds);                                                           </span>
<span class="-4005609192970260775" onmouseenter="enter('-4005609192970260775');" onmouseout="out('-4005609192970260775');" style=""> 843         rotatedBounds[0] = Math.abs(rotatedBounds[0]);                                                   </span>
<span class="8902635337510419497" onmouseenter="enter('8902635337510419497');" onmouseout="out('8902635337510419497');" style=""> 844         rotatedBounds[1] = Math.abs(rotatedBounds[1]);                                                   </span>
<span  style=""> 845                                                                                                          </span>
<span class="6089223768568690792" onmouseenter="enter('6089223768568690792');" onmouseout="out('6089223768568690792');" style=""> 846         RectF cropRect = WallpaperCropActivity.getMaxCropRect(                                           </span>
<span class="1229429396446044184" onmouseenter="enter('1229429396446044184');" onmouseout="out('1229429396446044184');" style=""> 847                 (int) rotatedBounds[0], (int) rotatedBounds[1], width, height, leftAligned);             </span>
<span class="2176872110091109412" onmouseenter="enter('2176872110091109412');" onmouseout="out('2176872110091109412');" style=""> 848         cropTask.setCropBounds(cropRect);                                                                </span>
<span  style=""> 849                                                                                                          </span>
<span class="4092370609310845926" onmouseenter="enter('4092370609310845926');" onmouseout="out('4092370609310845926');" style=""> 850         if (cropTask.cropBitmap()) {                                                                     </span>
<span class="5327784893723541266" onmouseenter="enter('5327784893723541266');" onmouseout="out('5327784893723541266');" style=""> 851             return cropTask.getCroppedBitmap();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 852         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 853             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 854         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855     }                                                                                                    </span>
<span  style=""> 856                                                                                                          </span>
<span class="-1009224458959098214" onmouseenter="enter('-1009224458959098214');" onmouseout="out('-1009224458959098214');" style=""> 857     private void addTemporaryWallpaperTile(final Uri uri, boolean fromRestore) {                         </span>
<span class="-901651268089518848" onmouseenter="enter('-901651268089518848');" onmouseout="out('-901651268089518848');" style=""> 858         mTempWallpaperTiles.add(uri);                                                                    </span>
<span class="372124520658648675" onmouseenter="enter('372124520658648675');" onmouseout="out('372124520658648675');" style=""> 859         // Add a tile for the image picked from Gallery                                                  </span>
<span class="6770827460764873580" onmouseenter="enter('6770827460764873580');" onmouseout="out('6770827460764873580');" style=""> 860         final FrameLayout pickedImageThumbnail = (FrameLayout) getLayoutInflater().                      </span>
<span class="-2679323654422550151" onmouseenter="enter('-2679323654422550151');" onmouseout="out('-2679323654422550151');" style=""> 861                 inflate(R.layout.wallpaper_picker_item, mWallpapersView, false);                         </span>
<span class="4529673580196202338" onmouseenter="enter('4529673580196202338');" onmouseout="out('4529673580196202338');" style=""> 862         pickedImageThumbnail.setVisibility(View.GONE);                                                   </span>
<span class="2199584589147075372" onmouseenter="enter('2199584589147075372');" onmouseout="out('2199584589147075372');" style=""> 863         setWallpaperItemPaddingToZero(pickedImageThumbnail);                                             </span>
<span class="8928625334369603982" onmouseenter="enter('8928625334369603982');" onmouseout="out('8928625334369603982');" style=""> 864         mWallpapersView.addView(pickedImageThumbnail, 0);                                                </span>
<span  style=""> 865                                                                                                          </span>
<span class="9047526722691301900" onmouseenter="enter('9047526722691301900');" onmouseout="out('9047526722691301900');" style=""> 866         // Load the thumbnail                                                                            </span>
<span class="-1676864995125815185" onmouseenter="enter('-1676864995125815185');" onmouseout="out('-1676864995125815185');" style=""> 867         final ImageView image = (ImageView) pickedImageThumbnail.findViewById(R.id.wallpaper_image);     </span>
<span class="8129808656284289108" onmouseenter="enter('8129808656284289108');" onmouseout="out('8129808656284289108');" style=""> 868         final Point defaultSize = getDefaultThumbnailSize(this.getResources());                          </span>
<span class="-6676868420171838472" onmouseenter="enter('-6676868420171838472');" onmouseout="out('-6676868420171838472');" style=""> 869         final Context context = this;                                                                    </span>
<span class="8654405571332173016" onmouseenter="enter('8654405571332173016');" onmouseout="out('8654405571332173016');" style=""> 870         new AsyncTask&lt;Void, Bitmap, Bitmap&gt;() {                                                          </span>
<span class="7887219832922845066" onmouseenter="enter('7887219832922845066');" onmouseout="out('7887219832922845066');" style=""> 871             protected Bitmap doInBackground(Void...args) {                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 872                 try {                                                                                    </span>
<span class="-4769478897982771202" onmouseenter="enter('-4769478897982771202');" onmouseout="out('-4769478897982771202');" style=""> 873                     int rotation = WallpaperCropActivity.getRotationFromExif(context, uri);              </span>
<span class="2925909394733733403" onmouseenter="enter('2925909394733733403');" onmouseout="out('2925909394733733403');" style=""> 874                     return createThumbnail(defaultSize, context, uri, null, null, 0, rotation, false);   </span>
<span class="3778995444801704265" onmouseenter="enter('3778995444801704265');" onmouseout="out('3778995444801704265');" style=""> 875                 } catch (SecurityException securityException) {                                          </span>
<span class="7955105844901253678" onmouseenter="enter('7955105844901253678');" onmouseout="out('7955105844901253678');" style=""> 876                     if (isDestroyed()) {                                                                 </span>
<span class="3681517849090038589" onmouseenter="enter('3681517849090038589');" onmouseout="out('3681517849090038589');" style=""> 877                         // Temporarily granted permissions are revoked when the activity                 </span>
<span class="3864158554531561229" onmouseenter="enter('3864158554531561229');" onmouseout="out('3864158554531561229');" style=""> 878                         // finishes, potentially resulting in a SecurityException here.                  </span>
<span class="-438989399743409142" onmouseenter="enter('-438989399743409142');" onmouseout="out('-438989399743409142');" style=""> 879                         // Even though {@link #isDestroyed} might also return true in different          </span>
<span class="-973013658270767082" onmouseenter="enter('-973013658270767082');" onmouseout="out('-973013658270767082');" style=""> 880                         // situations where the configuration changes, we are fine with                  </span>
<span class="-5779086303897471336" onmouseenter="enter('-5779086303897471336');" onmouseout="out('-5779086303897471336');" style=""> 881                         // catching these cases here as well.                                            </span>
<span class="-1034870772393865893" onmouseenter="enter('-1034870772393865893');" onmouseout="out('-1034870772393865893');" style=""> 882                         cancel(false);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 883                     } else {                                                                             </span>
<span class="-5531102788746271445" onmouseenter="enter('-5531102788746271445');" onmouseout="out('-5531102788746271445');" style=""> 884                         // otherwise it had a different cause and we throw it further                    </span>
<span class="-970795541645443852" onmouseenter="enter('-970795541645443852');" onmouseout="out('-970795541645443852');" style=""> 885                         throw securityException;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886                     }                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 887                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889             }                                                                                            </span>
<span class="7796048425938803412" onmouseenter="enter('7796048425938803412');" onmouseout="out('7796048425938803412');" style=""> 890             protected void onPostExecute(Bitmap thumb) {                                                 </span>
<span class="1828997147583131577" onmouseenter="enter('1828997147583131577');" onmouseout="out('1828997147583131577');" style=""> 891                 if (!isCancelled() &amp;&amp; thumb != null) {                                                   </span>
<span class="-6059667076746804171" onmouseenter="enter('-6059667076746804171');" onmouseout="out('-6059667076746804171');" style=""> 892                     image.setImageBitmap(thumb);                                                         </span>
<span class="-1645377004023670491" onmouseenter="enter('-1645377004023670491');" onmouseout="out('-1645377004023670491');" style=""> 893                     Drawable thumbDrawable = image.getDrawable();                                        </span>
<span class="5749196251269587213" onmouseenter="enter('5749196251269587213');" onmouseout="out('5749196251269587213');" style=""> 894                     thumbDrawable.setDither(true);                                                       </span>
<span class="-2126867226419131669" onmouseenter="enter('-2126867226419131669');" onmouseout="out('-2126867226419131669');" style=""> 895                     pickedImageThumbnail.setVisibility(View.VISIBLE);                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 896                 } else {                                                                                 </span>
<span class="-2794690336414811741" onmouseenter="enter('-2794690336414811741');" onmouseout="out('-2794690336414811741');" style=""> 897                     Log.e(TAG, &quot;Error loading thumbnail for uri=&quot; + uri);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899             }                                                                                            </span>
<span class="3599702695275287338" onmouseenter="enter('3599702695275287338');" onmouseout="out('3599702695275287338');" style=""> 900         }.execute();                                                                                     </span>
<span  style=""> 901                                                                                                          </span>
<span class="8287492400642888670" onmouseenter="enter('8287492400642888670');" onmouseout="out('8287492400642888670');" style=""> 902         UriWallpaperInfo info = new UriWallpaperInfo(uri);                                               </span>
<span class="-3082078054294180702" onmouseenter="enter('-3082078054294180702');" onmouseout="out('-3082078054294180702');" style=""> 903         pickedImageThumbnail.setTag(info);                                                               </span>
<span class="-2197374997178845158" onmouseenter="enter('-2197374997178845158');" onmouseout="out('-2197374997178845158');" style=""> 904         info.setView(pickedImageThumbnail);                                                              </span>
<span class="7161653145395861506" onmouseenter="enter('7161653145395861506');" onmouseout="out('7161653145395861506');" style=""> 905         addLongPressHandler(pickedImageThumbnail);                                                       </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 906         updateTileIndices();                                                                             </span>
<span class="-4563567220370832798" onmouseenter="enter('-4563567220370832798');" onmouseout="out('-4563567220370832798');" style=""> 907         pickedImageThumbnail.setOnClickListener(mThumbnailOnClickListener);                              </span>
<span class="-2362441680778508255" onmouseenter="enter('-2362441680778508255');" onmouseout="out('-2362441680778508255');" style=""> 908         if (!fromRestore) {                                                                              </span>
<span class="1189035633112635276" onmouseenter="enter('1189035633112635276');" onmouseout="out('1189035633112635276');" style=""> 909             mThumbnailOnClickListener.onClick(pickedImageThumbnail);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911     }                                                                                                    </span>
<span  style=""> 912                                                                                                          </span>
<span class="-7749792035646111440" onmouseenter="enter('-7749792035646111440');" onmouseout="out('-7749792035646111440');" style=""> 913     protected void onActivityResult(int requestCode, int resultCode, Intent data) {                      </span>
<span class="-2724808358796038832" onmouseenter="enter('-2724808358796038832');" onmouseout="out('-2724808358796038832');" style=""> 914         if (requestCode == IMAGE_PICK &amp;&amp; resultCode == RESULT_OK) {                                      </span>
<span class="306921262128177819" onmouseenter="enter('306921262128177819');" onmouseout="out('306921262128177819');" style=""> 915             if (data != null &amp;&amp; data.getData() != null) {                                                </span>
<span class="-9060755014479801963" onmouseenter="enter('-9060755014479801963');" onmouseout="out('-9060755014479801963');" style=""> 916                 Uri uri = data.getData();                                                                </span>
<span class="287003757484083113" onmouseenter="enter('287003757484083113');" onmouseout="out('287003757484083113');" style=""> 917                 addTemporaryWallpaperTile(uri, false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918             }                                                                                            </span>
<span class="5194712518021502228" onmouseenter="enter('5194712518021502228');" onmouseout="out('5194712518021502228');" style=""> 919         } else if (requestCode == PICK_WALLPAPER_THIRD_PARTY_ACTIVITY) {                                 </span>
<span class="-7075511525703303023" onmouseenter="enter('-7075511525703303023');" onmouseout="out('-7075511525703303023');" style=""> 920             setResult(RESULT_OK);                                                                        </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 921             finish();                                                                                    </span>
<span class="-8956522334617839884" onmouseenter="enter('-8956522334617839884');" onmouseout="out('-8956522334617839884');" style=""> 922         } else if (requestCode == PICK_LIVE_WALLPAPER) {                                                 </span>
<span class="-7130090822814694896" onmouseenter="enter('-7130090822814694896');" onmouseout="out('-7130090822814694896');" style=""> 923             WallpaperManager wm = WallpaperManager.getInstance(this);                                    </span>
<span class="611509371565321110" onmouseenter="enter('611509371565321110');" onmouseout="out('611509371565321110');" style=""> 924             final WallpaperInfo oldLiveWallpaper = mLiveWallpaperInfoOnPickerLaunch;                     </span>
<span class="-5984340816262038900" onmouseenter="enter('-5984340816262038900');" onmouseout="out('-5984340816262038900');" style=""> 925             WallpaperInfo newLiveWallpaper = wm.getWallpaperInfo();                                      </span>
<span class="-1315611166116800128" onmouseenter="enter('-1315611166116800128');" onmouseout="out('-1315611166116800128');" style=""> 926             // Try to figure out if a live wallpaper was set;                                            </span>
<span class="-5751651415530774114" onmouseenter="enter('-5751651415530774114');" onmouseout="out('-5751651415530774114');" style=""> 927             if (newLiveWallpaper != null &amp;&amp;                                                              </span>
<span class="-3007430178749865718" onmouseenter="enter('-3007430178749865718');" onmouseout="out('-3007430178749865718');" style=""> 928                     (oldLiveWallpaper == null ||                                                         </span>
<span class="4903908304628163577" onmouseenter="enter('4903908304628163577');" onmouseout="out('4903908304628163577');" style=""> 929                     !oldLiveWallpaper.getComponent().equals(newLiveWallpaper.getComponent()))) {         </span>
<span class="-5964103275755574248" onmouseenter="enter('-5964103275755574248');" onmouseout="out('-5964103275755574248');" style=""> 930                 // Return if a live wallpaper was set                                                    </span>
<span class="-7075511525703303023" onmouseenter="enter('-7075511525703303023');" onmouseout="out('-7075511525703303023');" style=""> 931                 setResult(RESULT_OK);                                                                    </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 932                 finish();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935     }                                                                                                    </span>
<span  style=""> 936                                                                                                          </span>
<span class="-1414235871370289475" onmouseenter="enter('-1414235871370289475');" onmouseout="out('-1414235871370289475');" style=""> 937     static void setWallpaperItemPaddingToZero(FrameLayout frameLayout) {                                 </span>
<span class="-6763839741894246945" onmouseenter="enter('-6763839741894246945');" onmouseout="out('-6763839741894246945');" style=""> 938         frameLayout.setPadding(0, 0, 0, 0);                                                              </span>
<span class="3772652785637557334" onmouseenter="enter('3772652785637557334');" onmouseout="out('3772652785637557334');" style=""> 939         frameLayout.setForeground(new ZeroPaddingDrawable(frameLayout.getForeground()));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940     }                                                                                                    </span>
<span  style=""> 941                                                                                                          </span>
<span class="-3459179076532382610" onmouseenter="enter('-3459179076532382610');" onmouseout="out('-3459179076532382610');" style=""> 942     private void addLongPressHandler(View v) {                                                           </span>
<span class="1024606645498811389" onmouseenter="enter('1024606645498811389');" onmouseout="out('1024606645498811389');" style=""> 943         v.setOnLongClickListener(mLongClickListener);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944     }                                                                                                    </span>
<span  style=""> 945                                                                                                          </span>
<span class="-5506305661846963409" onmouseenter="enter('-5506305661846963409');" onmouseout="out('-5506305661846963409');" style=""> 946     private ArrayList&lt;WallpaperTileInfo&gt; findBundledWallpapers() {                                       </span>
<span class="5885920776779194905" onmouseenter="enter('5885920776779194905');" onmouseout="out('5885920776779194905');" style=""> 947         final PackageManager pm = getPackageManager();                                                   </span>
<span class="5871817832928179175" onmouseenter="enter('5871817832928179175');" onmouseout="out('5871817832928179175');" style=""> 948         final ArrayList&lt;WallpaperTileInfo&gt; bundled = new ArrayList&lt;WallpaperTileInfo&gt;(24);               </span>
<span  style=""> 949                                                                                                          </span>
<span class="-1246582649877799770" onmouseenter="enter('-1246582649877799770');" onmouseout="out('-1246582649877799770');" style=""> 950         Partner partner = Partner.get(pm);                                                               </span>
<span class="-9215364277253785969" onmouseenter="enter('-9215364277253785969');" onmouseout="out('-9215364277253785969');" style=""> 951         if (partner != null) {                                                                           </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style=""> 952             final Resources partnerRes = partner.getResources();                                         </span>
<span class="4677469002384058762" onmouseenter="enter('4677469002384058762');" onmouseout="out('4677469002384058762');" style=""> 953             final int resId = partnerRes.getIdentifier(Partner.RES_WALLPAPERS, &quot;array&quot;,                  </span>
<span class="6039973161596959762" onmouseenter="enter('6039973161596959762');" onmouseout="out('6039973161596959762');" style=""> 954                     partner.getPackageName());                                                           </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style=""> 955             if (resId != 0) {                                                                            </span>
<span class="-2118557433142396278" onmouseenter="enter('-2118557433142396278');" onmouseout="out('-2118557433142396278');" style=""> 956                 addWallpapers(bundled, partnerRes, partner.getPackageName(), resId);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957             }                                                                                            </span>
<span  style=""> 958                                                                                                          </span>
<span class="-4748120673698363377" onmouseenter="enter('-4748120673698363377');" onmouseout="out('-4748120673698363377');" style=""> 959             // Add system wallpapers                                                                     </span>
<span class="8829637239826637205" onmouseenter="enter('8829637239826637205');" onmouseout="out('8829637239826637205');" style=""> 960             File systemDir = partner.getWallpaperDirectory();                                            </span>
<span class="-4006927377325457741" onmouseenter="enter('-4006927377325457741');" onmouseout="out('-4006927377325457741');" style=""> 961             if (systemDir != null &amp;&amp; systemDir.isDirectory()) {                                          </span>
<span class="1549902003223839534" onmouseenter="enter('1549902003223839534');" onmouseout="out('1549902003223839534');" style=""> 962                 for (File file : systemDir.listFiles()) {                                                </span>
<span class="-1906617314955916866" onmouseenter="enter('-1906617314955916866');" onmouseout="out('-1906617314955916866');" style=""> 963                     if (!file.isFile()) {                                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 964                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965                     }                                                                                    </span>
<span class="-4447045704555381031" onmouseenter="enter('-4447045704555381031');" onmouseout="out('-4447045704555381031');" style=""> 966                     String name = file.getName();                                                        </span>
<span class="2642008582597801087" onmouseenter="enter('2642008582597801087');" onmouseout="out('2642008582597801087');" style=""> 967                     int dotPos = name.lastIndexOf(&#x27;.&#x27;);                                                  </span>
<span class="5596042441253906476" onmouseenter="enter('5596042441253906476');" onmouseout="out('5596042441253906476');" style=""> 968                     String extension = &quot;&quot;;                                                               </span>
<span class="8275483901110152452" onmouseenter="enter('8275483901110152452');" onmouseout="out('8275483901110152452');" style=""> 969                     if (dotPos &gt;= -1) {                                                                  </span>
<span class="5358735009623538448" onmouseenter="enter('5358735009623538448');" onmouseout="out('5358735009623538448');" style=""> 970                         extension = name.substring(dotPos);                                              </span>
<span class="-756743826621559391" onmouseenter="enter('-756743826621559391');" onmouseout="out('-756743826621559391');" style=""> 971                         name = name.substring(0, dotPos);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 972                     }                                                                                    </span>
<span  style=""> 973                                                                                                          </span>
<span class="-927337484625280418" onmouseenter="enter('-927337484625280418');" onmouseout="out('-927337484625280418');" style=""> 974                     if (name.endsWith(&quot;_small&quot;)) {                                                       </span>
<span class="-2832112970361767203" onmouseenter="enter('-2832112970361767203');" onmouseout="out('-2832112970361767203');" style=""> 975                         // it is a thumbnail                                                             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 976                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977                     }                                                                                    </span>
<span  style=""> 978                                                                                                          </span>
<span class="-3375184210124111054" onmouseenter="enter('-3375184210124111054');" onmouseout="out('-3375184210124111054');" style=""> 979                     File thumbnail = new File(systemDir, name + &quot;_small&quot; + extension);                   </span>
<span class="-3372803721501567410" onmouseenter="enter('-3372803721501567410');" onmouseout="out('-3372803721501567410');" style=""> 980                     Bitmap thumb = BitmapFactory.decodeFile(thumbnail.getAbsolutePath());                </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style=""> 981                     if (thumb != null) {                                                                 </span>
<span class="3695753775368890877" onmouseenter="enter('3695753775368890877');" onmouseout="out('3695753775368890877');" style=""> 982                         bundled.add(new FileWallpaperInfo(file, new BitmapDrawable(thumb)));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986         }                                                                                                </span>
<span  style=""> 987                                                                                                          </span>
<span class="2664071456778699283" onmouseenter="enter('2664071456778699283');" onmouseout="out('2664071456778699283');" style=""> 988         Pair&lt;ApplicationInfo, Integer&gt; r = getWallpaperArrayResourceId();                                </span>
<span class="-4447905625078087046" onmouseenter="enter('-4447905625078087046');" onmouseout="out('-4447905625078087046');" style=""> 989         if (r != null) {                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 990             try {                                                                                        </span>
<span class="-6573463770199130323" onmouseenter="enter('-6573463770199130323');" onmouseout="out('-6573463770199130323');" style=""> 991                 Resources wallpaperRes = getPackageManager().getResourcesForApplication(r.first);        </span>
<span class="-2554303152129460876" onmouseenter="enter('-2554303152129460876');" onmouseout="out('-2554303152129460876');" style=""> 992                 addWallpapers(bundled, wallpaperRes, r.first.packageName, r.second);                     </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style=""> 993             } catch (PackageManager.NameNotFoundException e) {                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 994             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995         }                                                                                                </span>
<span  style=""> 996                                                                                                          </span>
<span class="-1343467421379157050" onmouseenter="enter('-1343467421379157050');" onmouseout="out('-1343467421379157050');" style=""> 997         if (partner == null || !partner.hideDefaultWallpaper()) {                                        </span>
<span class="7034483189720629489" onmouseenter="enter('7034483189720629489');" onmouseout="out('7034483189720629489');" style=""> 998             // Add an entry for the default wallpaper (stored in system resources)                       </span>
<span class="-7386155032140038107" onmouseenter="enter('-7386155032140038107');" onmouseout="out('-7386155032140038107');" style=""> 999             WallpaperTileInfo defaultWallpaperInfo =                                                     </span>
<span class="-1530882610108412902" onmouseenter="enter('-1530882610108412902');" onmouseout="out('-1530882610108412902');" style="">1000                     (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.KITKAT)                                 </span>
<span class="-3549249310704668816" onmouseenter="enter('-3549249310704668816');" onmouseout="out('-3549249310704668816');" style="">1001                     ? getPreKKDefaultWallpaperInfo()                                                     </span>
<span class="197495415878705720" onmouseenter="enter('197495415878705720');" onmouseout="out('197495415878705720');" style="">1002                     : getDefaultWallpaper();                                                             </span>
<span class="-7974818341329769015" onmouseenter="enter('-7974818341329769015');" onmouseout="out('-7974818341329769015');" style="">1003             if (defaultWallpaperInfo != null) {                                                          </span>
<span class="7202846298285246873" onmouseenter="enter('7202846298285246873');" onmouseout="out('7202846298285246873');" style="">1004                 bundled.add(0, defaultWallpaperInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006         }                                                                                                </span>
<span class="3924493507316405252" onmouseenter="enter('3924493507316405252');" onmouseout="out('3924493507316405252');" style="">1007         return bundled;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1008     }                                                                                                    </span>
<span  style="">1009                                                                                                          </span>
<span class="-6595695538609845398" onmouseenter="enter('-6595695538609845398');" onmouseout="out('-6595695538609845398');" style="">1010     private boolean writeImageToFileAsJpeg(File f, Bitmap b) {                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1011         try {                                                                                            </span>
<span class="8722539090112199092" onmouseenter="enter('8722539090112199092');" onmouseout="out('8722539090112199092');" style="">1012             f.createNewFile();                                                                           </span>
<span class="3775180210190615739" onmouseenter="enter('3775180210190615739');" onmouseout="out('3775180210190615739');" style="">1013             FileOutputStream thumbFileStream =                                                           </span>
<span class="2198104288806315130" onmouseenter="enter('2198104288806315130');" onmouseout="out('2198104288806315130');" style="">1014                     openFileOutput(f.getName(), Context.MODE_PRIVATE);                                   </span>
<span class="2364901270506104115" onmouseenter="enter('2364901270506104115');" onmouseout="out('2364901270506104115');" style="">1015             b.compress(Bitmap.CompressFormat.JPEG, 95, thumbFileStream);                                 </span>
<span class="5768958253628177358" onmouseenter="enter('5768958253628177358');" onmouseout="out('5768958253628177358');" style="">1016             thumbFileStream.close();                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1017             return true;                                                                                 </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1018         } catch (IOException e) {                                                                        </span>
<span class="-4676604896942702598" onmouseenter="enter('-4676604896942702598');" onmouseout="out('-4676604896942702598');" style="">1019             Log.e(TAG, &quot;Error while writing bitmap to file &quot; + e);                                       </span>
<span class="7682989536937550366" onmouseenter="enter('7682989536937550366');" onmouseout="out('7682989536937550366');" style="">1020             f.delete();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1021         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1022         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1023     }                                                                                                    </span>
<span  style="">1024                                                                                                          </span>
<span class="-4823957996775296240" onmouseenter="enter('-4823957996775296240');" onmouseout="out('-4823957996775296240');" style="">1025     private File getDefaultThumbFile() {                                                                 </span>
<span class="158529430789897102" onmouseenter="enter('158529430789897102');" onmouseout="out('158529430789897102');" style="">1026         return new File(getFilesDir(), Build.VERSION.SDK_INT                                             </span>
<span class="-7890353788133211969" onmouseenter="enter('-7890353788133211969');" onmouseout="out('-7890353788133211969');" style="">1027                 + &quot;_&quot; + DEFAULT_WALLPAPER_THUMBNAIL_FILENAME);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028     }                                                                                                    </span>
<span  style="">1029                                                                                                          </span>
<span class="1227314529798978638" onmouseenter="enter('1227314529798978638');" onmouseout="out('1227314529798978638');" style="">1030     private boolean saveDefaultWallpaperThumb(Bitmap b) {                                                </span>
<span class="8263823508211107068" onmouseenter="enter('8263823508211107068');" onmouseout="out('8263823508211107068');" style="">1031         // Delete old thumbnails.                                                                        </span>
<span class="3567311882351013867" onmouseenter="enter('3567311882351013867');" onmouseout="out('3567311882351013867');" style="">1032         new File(getFilesDir(), OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                      </span>
<span class="-2276391661806453489" onmouseenter="enter('-2276391661806453489');" onmouseout="out('-2276391661806453489');" style="">1033         new File(getFilesDir(), DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                          </span>
<span  style="">1034                                                                                                          </span>
<span class="1808821527848952005" onmouseenter="enter('1808821527848952005');" onmouseout="out('1808821527848952005');" style="">1035         for (int i = Build.VERSION_CODES.JELLY_BEAN; i &lt; Build.VERSION.SDK_INT; i++) {                   </span>
<span class="7774392015068581640" onmouseenter="enter('7774392015068581640');" onmouseout="out('7774392015068581640');" style="">1036             new File(getFilesDir(), i + &quot;_&quot; + DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1037         }                                                                                                </span>
<span class="4686288793731739264" onmouseenter="enter('4686288793731739264');" onmouseout="out('4686288793731739264');" style="">1038         return writeImageToFileAsJpeg(getDefaultThumbFile(), b);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039     }                                                                                                    </span>
<span  style="">1040                                                                                                          </span>
<span class="-4877678771871800381" onmouseenter="enter('-4877678771871800381');" onmouseout="out('-4877678771871800381');" style="">1041     private ResourceWallpaperInfo getPreKKDefaultWallpaperInfo() {                                       </span>
<span class="5520181104510013397" onmouseenter="enter('5520181104510013397');" onmouseout="out('5520181104510013397');" style="">1042         Resources sysRes = Resources.getSystem();                                                        </span>
<span class="3223623880203196673" onmouseenter="enter('3223623880203196673');" onmouseout="out('3223623880203196673');" style="">1043         int resId = sysRes.getIdentifier(&quot;default_wallpaper&quot;, &quot;drawable&quot;, &quot;android&quot;);                    </span>
<span  style="">1044                                                                                                          </span>
<span class="-2700470529350012310" onmouseenter="enter('-2700470529350012310');" onmouseout="out('-2700470529350012310');" style="">1045         File defaultThumbFile = getDefaultThumbFile();                                                   </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style="">1046         Bitmap thumb = null;                                                                             </span>
<span class="3173128348719073493" onmouseenter="enter('3173128348719073493');" onmouseout="out('3173128348719073493');" style="">1047         boolean defaultWallpaperExists = false;                                                          </span>
<span class="769015314191339580" onmouseenter="enter('769015314191339580');" onmouseout="out('769015314191339580');" style="">1048         if (defaultThumbFile.exists()) {                                                                 </span>
<span class="145969986834765399" onmouseenter="enter('145969986834765399');" onmouseout="out('145969986834765399');" style="">1049             thumb = BitmapFactory.decodeFile(defaultThumbFile.getAbsolutePath());                        </span>
<span class="-3053675610106547889" onmouseenter="enter('-3053675610106547889');" onmouseout="out('-3053675610106547889');" style="">1050             defaultWallpaperExists = true;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1051         } else {                                                                                         </span>
<span class="8976545925819631954" onmouseenter="enter('8976545925819631954');" onmouseout="out('8976545925819631954');" style="">1052             Resources res = getResources();                                                              </span>
<span class="-5692402014536765414" onmouseenter="enter('-5692402014536765414');" onmouseout="out('-5692402014536765414');" style="">1053             Point defaultThumbSize = getDefaultThumbnailSize(res);                                       </span>
<span class="8688062696958133993" onmouseenter="enter('8688062696958133993');" onmouseout="out('8688062696958133993');" style="">1054             int rotation = WallpaperCropActivity.getRotationFromExif(res, resId);                        </span>
<span class="-164181572917895630" onmouseenter="enter('-164181572917895630');" onmouseout="out('-164181572917895630');" style="">1055             thumb = createThumbnail(                                                                     </span>
<span class="-534913579393144749" onmouseenter="enter('-534913579393144749');" onmouseout="out('-534913579393144749');" style="">1056                     defaultThumbSize, this, null, null, sysRes, resId, rotation, false);                 </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1057             if (thumb != null) {                                                                         </span>
<span class="4589895813778676518" onmouseenter="enter('4589895813778676518');" onmouseout="out('4589895813778676518');" style="">1058                 defaultWallpaperExists = saveDefaultWallpaperThumb(thumb);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060         }                                                                                                </span>
<span class="1877730711367989636" onmouseenter="enter('1877730711367989636');" onmouseout="out('1877730711367989636');" style="">1061         if (defaultWallpaperExists) {                                                                    </span>
<span class="-5406664625181933074" onmouseenter="enter('-5406664625181933074');" onmouseout="out('-5406664625181933074');" style="">1062             return new ResourceWallpaperInfo(sysRes, resId, new BitmapDrawable(thumb));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1064         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065     }                                                                                                    </span>
<span  style="">1066                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style="">1067     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-6050375207733295576" onmouseenter="enter('-6050375207733295576');" onmouseout="out('-6050375207733295576');" style="">1068     private DefaultWallpaperInfo getDefaultWallpaper() {                                                 </span>
<span class="-2700470529350012310" onmouseenter="enter('-2700470529350012310');" onmouseout="out('-2700470529350012310');" style="">1069         File defaultThumbFile = getDefaultThumbFile();                                                   </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style="">1070         Bitmap thumb = null;                                                                             </span>
<span class="3173128348719073493" onmouseenter="enter('3173128348719073493');" onmouseout="out('3173128348719073493');" style="">1071         boolean defaultWallpaperExists = false;                                                          </span>
<span class="769015314191339580" onmouseenter="enter('769015314191339580');" onmouseout="out('769015314191339580');" style="">1072         if (defaultThumbFile.exists()) {                                                                 </span>
<span class="145969986834765399" onmouseenter="enter('145969986834765399');" onmouseout="out('145969986834765399');" style="">1073             thumb = BitmapFactory.decodeFile(defaultThumbFile.getAbsolutePath());                        </span>
<span class="-3053675610106547889" onmouseenter="enter('-3053675610106547889');" onmouseout="out('-3053675610106547889');" style="">1074             defaultWallpaperExists = true;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1075         } else {                                                                                         </span>
<span class="8976545925819631954" onmouseenter="enter('8976545925819631954');" onmouseout="out('8976545925819631954');" style="">1076             Resources res = getResources();                                                              </span>
<span class="-5692402014536765414" onmouseenter="enter('-5692402014536765414');" onmouseout="out('-5692402014536765414');" style="">1077             Point defaultThumbSize = getDefaultThumbnailSize(res);                                       </span>
<span class="-3652113574132114284" onmouseenter="enter('-3652113574132114284');" onmouseout="out('-3652113574132114284');" style="">1078             Drawable wallpaperDrawable = WallpaperManager.getInstance(this).getBuiltInDrawable(          </span>
<span class="5013343709069618762" onmouseenter="enter('5013343709069618762');" onmouseout="out('5013343709069618762');" style="">1079                     defaultThumbSize.x, defaultThumbSize.y, true, 0.5f, 0.5f);                           </span>
<span class="7887239685465932583" onmouseenter="enter('7887239685465932583');" onmouseout="out('7887239685465932583');" style="">1080             if (wallpaperDrawable != null) {                                                             </span>
<span class="-5003097491286512046" onmouseenter="enter('-5003097491286512046');" onmouseout="out('-5003097491286512046');" style="">1081                 thumb = Bitmap.createBitmap(                                                             </span>
<span class="-5991438011041707161" onmouseenter="enter('-5991438011041707161');" onmouseout="out('-5991438011041707161');" style="">1082                         defaultThumbSize.x, defaultThumbSize.y, Bitmap.Config.ARGB_8888);                </span>
<span class="1166395082389141916" onmouseenter="enter('1166395082389141916');" onmouseout="out('1166395082389141916');" style="">1083                 Canvas c = new Canvas(thumb);                                                            </span>
<span class="8212113414976856971" onmouseenter="enter('8212113414976856971');" onmouseout="out('8212113414976856971');" style="">1084                 wallpaperDrawable.setBounds(0, 0, defaultThumbSize.x, defaultThumbSize.y);               </span>
<span class="-8788570621207906555" onmouseenter="enter('-8788570621207906555');" onmouseout="out('-8788570621207906555');" style="">1085                 wallpaperDrawable.draw(c);                                                               </span>
<span class="5675729563233531278" onmouseenter="enter('5675729563233531278');" onmouseout="out('5675729563233531278');" style="">1086                 c.setBitmap(null);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087             }                                                                                            </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1088             if (thumb != null) {                                                                         </span>
<span class="4589895813778676518" onmouseenter="enter('4589895813778676518');" onmouseout="out('4589895813778676518');" style="">1089                 defaultWallpaperExists = saveDefaultWallpaperThumb(thumb);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1090             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1091         }                                                                                                </span>
<span class="1877730711367989636" onmouseenter="enter('1877730711367989636');" onmouseout="out('1877730711367989636');" style="">1092         if (defaultWallpaperExists) {                                                                    </span>
<span class="-3728514137807666119" onmouseenter="enter('-3728514137807666119');" onmouseout="out('-3728514137807666119');" style="">1093             return new DefaultWallpaperInfo(new BitmapDrawable(thumb));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1095         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096     }                                                                                                    </span>
<span  style="">1097                                                                                                          </span>
<span class="-1742079203168766475" onmouseenter="enter('-1742079203168766475');" onmouseout="out('-1742079203168766475');" style="">1098     public Pair&lt;ApplicationInfo, Integer&gt; getWallpaperArrayResourceId() {                                </span>
<span class="-6161770320248569187" onmouseenter="enter('-6161770320248569187');" onmouseout="out('-6161770320248569187');" style="">1099         // Context.getPackageName() may return the &quot;original&quot; package name,                              </span>
<span class="-937325419486317119" onmouseenter="enter('-937325419486317119');" onmouseout="out('-937325419486317119');" style="">1100         // com.android.launcher3; Resources needs the real package name,                                 </span>
<span class="-2310146865144726197" onmouseenter="enter('-2310146865144726197');" onmouseout="out('-2310146865144726197');" style="">1101         // com.android.launcher3. So we ask Resources for what it thinks the                             </span>
<span class="-8519279543710902199" onmouseenter="enter('-8519279543710902199');" onmouseout="out('-8519279543710902199');" style="">1102         // package name should be.                                                                       </span>
<span class="1562477602934366037" onmouseenter="enter('1562477602934366037');" onmouseout="out('1562477602934366037');" style="">1103         final String packageName = getResources().getResourcePackageName(R.array.wallpapers);            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1104         try {                                                                                            </span>
<span class="793324406234855079" onmouseenter="enter('793324406234855079');" onmouseout="out('793324406234855079');" style="">1105             ApplicationInfo info = getPackageManager().getApplicationInfo(packageName, 0);               </span>
<span class="7900160984832850008" onmouseenter="enter('7900160984832850008');" onmouseout="out('7900160984832850008');" style="">1106             return new Pair&lt;ApplicationInfo, Integer&gt;(info, R.array.wallpapers);                         </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1107         } catch (PackageManager.NameNotFoundException e) {                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1108             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110     }                                                                                                    </span>
<span  style="">1111                                                                                                          </span>
<span class="-1243563933706295169" onmouseenter="enter('-1243563933706295169');" onmouseout="out('-1243563933706295169');" style="">1112     private void addWallpapers(ArrayList&lt;WallpaperTileInfo&gt; known, Resources res,                        </span>
<span class="5411865991738807592" onmouseenter="enter('5411865991738807592');" onmouseout="out('5411865991738807592');" style="">1113             String packageName, int listResId) {                                                         </span>
<span class="7110410272585510587" onmouseenter="enter('7110410272585510587');" onmouseout="out('7110410272585510587');" style="">1114         final String[] extras = res.getStringArray(listResId);                                           </span>
<span class="-8339999744341716205" onmouseenter="enter('-8339999744341716205');" onmouseout="out('-8339999744341716205');" style="">1115         for (String extra : extras) {                                                                    </span>
<span class="5117676898365713774" onmouseenter="enter('5117676898365713774');" onmouseout="out('5117676898365713774');" style="">1116             int resId = res.getIdentifier(extra, &quot;drawable&quot;, packageName);                               </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="">1117             if (resId != 0) {                                                                            </span>
<span class="-6623243265608892176" onmouseenter="enter('-6623243265608892176');" onmouseout="out('-6623243265608892176');" style="">1118                 final int thumbRes = res.getIdentifier(extra + &quot;_small&quot;, &quot;drawable&quot;, packageName);       </span>
<span  style="">1119                                                                                                          </span>
<span class="1395464033869972102" onmouseenter="enter('1395464033869972102');" onmouseout="out('1395464033869972102');" style="">1120                 if (thumbRes != 0) {                                                                     </span>
<span class="-6566842002354754523" onmouseenter="enter('-6566842002354754523');" onmouseout="out('-6566842002354754523');" style="">1121                     ResourceWallpaperInfo wallpaperInfo =                                                </span>
<span class="187140772166123482" onmouseenter="enter('187140772166123482');" onmouseout="out('187140772166123482');" style="">1122                             new ResourceWallpaperInfo(res, resId, res.getDrawable(thumbRes));            </span>
<span class="6489784602606278995" onmouseenter="enter('6489784602606278995');" onmouseout="out('6489784602606278995');" style="">1123                     known.add(wallpaperInfo);                                                            </span>
<span class="-1095979516758920685" onmouseenter="enter('-1095979516758920685');" onmouseout="out('-1095979516758920685');" style="">1124                     // Log.d(TAG, &quot;add: [&quot; + packageName + &quot;]: &quot; + extra + &quot; (&quot; + res + &quot;)&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1126             } else {                                                                                     </span>
<span class="-3254000057019390134" onmouseenter="enter('-3254000057019390134');" onmouseout="out('-3254000057019390134');" style="">1127                 Log.e(TAG, &quot;Couldn&#x27;t find wallpaper &quot; + extra);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130     }                                                                                                    </span>
<span  style="">1131                                                                                                          </span>
<span class="8798832263856618785" onmouseenter="enter('8798832263856618785');" onmouseout="out('8798832263856618785');" style="">1132     public CropView getCropView() {                                                                      </span>
<span class="-6704760201962962178" onmouseenter="enter('-6704760201962962178');" onmouseout="out('-6704760201962962178');" style="">1133         return mCropView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134     }                                                                                                    </span>
<span  style="">1135                                                                                                          </span>
<span class="1726384713613661855" onmouseenter="enter('1726384713613661855');" onmouseout="out('1726384713613661855');" style="">1136     public SavedWallpaperImages getSavedImages() {                                                       </span>
<span class="8561023406342667010" onmouseenter="enter('8561023406342667010');" onmouseout="out('8561023406342667010');" style="">1137         return mSavedImages;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138     }                                                                                                    </span>
<span  style="">1139                                                                                                          </span>
<span class="912114107866141543" onmouseenter="enter('912114107866141543');" onmouseout="out('912114107866141543');" style="">1140     public void onLiveWallpaperPickerLaunch() {                                                          </span>
<span class="1720419068305677284" onmouseenter="enter('1720419068305677284');" onmouseout="out('1720419068305677284');" style="">1141         mLiveWallpaperInfoOnPickerLaunch = WallpaperManager.getInstance(this).getWallpaperInfo();        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142     }                                                                                                    </span>
<span  style="">1143                                                                                                          </span>
<span class="-4292702971064588005" onmouseenter="enter('-4292702971064588005');" onmouseout="out('-4292702971064588005');" style="">1144     static class ZeroPaddingDrawable extends LevelListDrawable {                                         </span>
<span class="-1809245915530945544" onmouseenter="enter('-1809245915530945544');" onmouseout="out('-1809245915530945544');" style="">1145         public ZeroPaddingDrawable(Drawable d) {                                                         </span>
<span class="7209017336523601499" onmouseenter="enter('7209017336523601499');" onmouseout="out('7209017336523601499');" style="">1146             super();                                                                                     </span>
<span class="-9075562460261717781" onmouseenter="enter('-9075562460261717781');" onmouseout="out('-9075562460261717781');" style="">1147             addLevel(0, 0, d);                                                                           </span>
<span class="-8837866944625871288" onmouseenter="enter('-8837866944625871288');" onmouseout="out('-8837866944625871288');" style="">1148             setLevel(0);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149         }                                                                                                </span>
<span  style="">1150                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1151         @Override                                                                                        </span>
<span class="-4441500511158129295" onmouseenter="enter('-4441500511158129295');" onmouseout="out('-4441500511158129295');" style="">1152         public boolean getPadding(Rect padding) {                                                        </span>
<span class="-595144173525385315" onmouseenter="enter('-595144173525385315');" onmouseout="out('-595144173525385315');" style="">1153             padding.set(0, 0, 0, 0);                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1154             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1155         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1156     }                                                                                                    </span>
<span  style="">1157                                                                                                          </span>
<span class="-2937803399629319128" onmouseenter="enter('-2937803399629319128');" onmouseout="out('-2937803399629319128');" style="">1158     private static class SimpleWallpapersAdapter extends ArrayAdapter&lt;WallpaperTileInfo&gt; {               </span>
<span class="-8360437163581134323" onmouseenter="enter('-8360437163581134323');" onmouseout="out('-8360437163581134323');" style="">1159         private final LayoutInflater mLayoutInflater;                                                    </span>
<span  style="">1160                                                                                                          </span>
<span class="-4484594253025843931" onmouseenter="enter('-4484594253025843931');" onmouseout="out('-4484594253025843931');" style="">1161         SimpleWallpapersAdapter(Activity activity, ArrayList&lt;WallpaperTileInfo&gt; wallpapers) {            </span>
<span class="8653562979026841436" onmouseenter="enter('8653562979026841436');" onmouseout="out('8653562979026841436');" style="">1162             super(activity, R.layout.wallpaper_picker_item, wallpapers);                                 </span>
<span class="5318885258480438175" onmouseenter="enter('5318885258480438175');" onmouseout="out('5318885258480438175');" style="">1163             mLayoutInflater = activity.getLayoutInflater();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164         }                                                                                                </span>
<span  style="">1165                                                                                                          </span>
<span class="1084873981402571013" onmouseenter="enter('1084873981402571013');" onmouseout="out('1084873981402571013');" style="">1166         public View getView(int position, View convertView, ViewGroup parent) {                          </span>
<span class="2334288334628913507" onmouseenter="enter('2334288334628913507');" onmouseout="out('2334288334628913507');" style="">1167             Drawable thumb = getItem(position).mThumb;                                                   </span>
<span class="-4748570100733370001" onmouseenter="enter('-4748570100733370001');" onmouseout="out('-4748570100733370001');" style="">1168             if (thumb == null) {                                                                         </span>
<span class="-4942494812872156884" onmouseenter="enter('-4942494812872156884');" onmouseout="out('-4942494812872156884');" style="">1169                 Log.e(TAG, &quot;Error decoding thumbnail for wallpaper #&quot; + position);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170             }                                                                                            </span>
<span class="7911727622339877382" onmouseenter="enter('7911727622339877382');" onmouseout="out('7911727622339877382');" style="">1171             return createImageTileView(mLayoutInflater, convertView, parent, thumb);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173     }                                                                                                    </span>
<span  style="">1174                                                                                                          </span>
<span class="2531716121200619667" onmouseenter="enter('2531716121200619667');" onmouseout="out('2531716121200619667');" style="">1175     public static View createImageTileView(LayoutInflater layoutInflater,                                </span>
<span class="651868139846267065" onmouseenter="enter('651868139846267065');" onmouseout="out('651868139846267065');" style="">1176             View convertView, ViewGroup parent, Drawable thumb) {                                        </span>
<span class="-690381633676655047" onmouseenter="enter('-690381633676655047');" onmouseout="out('-690381633676655047');" style="">1177         View view;                                                                                       </span>
<span  style="">1178                                                                                                          </span>
<span class="4181524603843345875" onmouseenter="enter('4181524603843345875');" onmouseout="out('4181524603843345875');" style="">1179         if (convertView == null) {                                                                       </span>
<span class="-8962994358344247461" onmouseenter="enter('-8962994358344247461');" onmouseout="out('-8962994358344247461');" style="">1180             view = layoutInflater.inflate(R.layout.wallpaper_picker_item, parent, false);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1181         } else {                                                                                         </span>
<span class="-1165364525461896664" onmouseenter="enter('-1165364525461896664');" onmouseout="out('-1165364525461896664');" style="">1182             view = convertView;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183         }                                                                                                </span>
<span  style="">1184                                                                                                          </span>
<span class="-5796698656042939368" onmouseenter="enter('-5796698656042939368');" onmouseout="out('-5796698656042939368');" style="">1185         setWallpaperItemPaddingToZero((FrameLayout) view);                                               </span>
<span  style="">1186                                                                                                          </span>
<span class="-5880466984736486189" onmouseenter="enter('-5880466984736486189');" onmouseout="out('-5880466984736486189');" style="">1187         ImageView image = (ImageView) view.findViewById(R.id.wallpaper_image);                           </span>
<span  style="">1188                                                                                                          </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1189         if (thumb != null) {                                                                             </span>
<span class="-3973426726107986909" onmouseenter="enter('-3973426726107986909');" onmouseout="out('-3973426726107986909');" style="">1190             image.setImageDrawable(thumb);                                                               </span>
<span class="206035284699071082" onmouseenter="enter('206035284699071082');" onmouseout="out('206035284699071082');" style="">1191             thumb.setDither(true);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192         }                                                                                                </span>
<span  style="">1193                                                                                                          </span>
<span class="3345849580761087571" onmouseenter="enter('3345849580761087571');" onmouseout="out('3345849580761087571');" style="">1194         return view;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195     }                                                                                                    </span>
<span  style="">1196                                                                                                          </span>
<span class="-2975945065481865808" onmouseenter="enter('-2975945065481865808');" onmouseout="out('-2975945065481865808');" style="">1197     // In Launcher3, we override this with a method that catches exceptions                              </span>
<span class="-5274754236505393442" onmouseenter="enter('-5274754236505393442');" onmouseout="out('-5274754236505393442');" style="">1198     // from starting activities; didn&#x27;t want to copy and paste code into here                            </span>
<span class="744831245140937102" onmouseenter="enter('744831245140937102');" onmouseout="out('744831245140937102');" style="">1199     public void startActivityForResultSafely(Intent intent, int requestCode) {                           </span>
<span class="-1930681083273022971" onmouseenter="enter('-1930681083273022971');" onmouseout="out('-1930681083273022971');" style="">1200         startActivityForResult(intent, requestCode);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="4969256359214059167" onmouseenter="enter('4969256359214059167');" onmouseout="out('4969256359214059167');" style="">   2  * Copyright (C) 2013 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="8098692255261555192" onmouseenter="enter('8098692255261555192');" onmouseout="out('8098692255261555192');" style="">  19 import android.animation.LayoutTransition;                                                               </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  20 import android.annotation.TargetApi;                                                                     </span>
<span class="4319535404750690126" onmouseenter="enter('4319535404750690126');" onmouseout="out('4319535404750690126');" style="">  21 import android.app.ActionBar;                                                                            </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  22 import android.app.Activity;                                                                             </span>
<span class="951063033412864237" onmouseenter="enter('951063033412864237');" onmouseout="out('951063033412864237');" style="">  23 import android.app.WallpaperInfo;                                                                        </span>
<span class="676108227569676783" onmouseenter="enter('676108227569676783');" onmouseout="out('676108227569676783');" style="">  24 import android.app.WallpaperManager;                                                                     </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  25 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  26 import android.content.Intent;                                                                           </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  27 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  28 import android.content.pm.PackageManager;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  29 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  30 import android.database.Cursor;                                                                          </span>
<span class="5252578614911642988" onmouseenter="enter('5252578614911642988');" onmouseout="out('5252578614911642988');" style="">  31 import android.database.DataSetObserver;                                                                 </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  32 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  33 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  34 import android.graphics.Canvas;                                                                          </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  35 import android.graphics.Matrix;                                                                          </span>
<span class="-3433483468941074901" onmouseenter="enter('-3433483468941074901');" onmouseout="out('-3433483468941074901');" style="">  36 import android.graphics.Point;                                                                           </span>
<span class="7353926919338897104" onmouseenter="enter('7353926919338897104');" onmouseout="out('7353926919338897104');" style="">  37 import android.graphics.PorterDuff;                                                                      </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  38 import android.graphics.Rect;                                                                            </span>
<span class="6159024636799649270" onmouseenter="enter('6159024636799649270');" onmouseout="out('6159024636799649270');" style="">  39 import android.graphics.RectF;                                                                           </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  40 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  41 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-4553352622911846323" onmouseenter="enter('-4553352622911846323');" onmouseout="out('-4553352622911846323');" style="">  42 import android.graphics.drawable.LevelListDrawable;                                                      </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  43 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  44 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  45 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  46 import android.os.Bundle;                                                                                </span>
<span class="4691360065241021834" onmouseenter="enter('4691360065241021834');" onmouseout="out('4691360065241021834');" style="">  47 import android.provider.MediaStore;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  48 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  49 import android.util.Pair;                                                                                </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  50 import android.view.ActionMode;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  51 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  52 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  53 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  54 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  55 import android.view.View;                                                                                </span>
<span class="-4070104819519100201" onmouseenter="enter('-4070104819519100201');" onmouseout="out('-4070104819519100201');" style="">  56 import android.view.View.OnClickListener;                                                                </span>
<span class="3981555454743051089" onmouseenter="enter('3981555454743051089');" onmouseout="out('3981555454743051089');" style="">  57 import android.view.View.OnLayoutChangeListener;                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  58 import android.view.ViewGroup;                                                                           </span>
<span class="2571204843522825307" onmouseenter="enter('2571204843522825307');" onmouseout="out('2571204843522825307');" style="">  59 import android.view.ViewPropertyAnimator;                                                                </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  60 import android.view.ViewTreeObserver;                                                                    </span>
<span class="1168424004905198318" onmouseenter="enter('1168424004905198318');" onmouseout="out('1168424004905198318');" style="">  61 import android.view.ViewTreeObserver.OnGlobalLayoutListener;                                             </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="">  62 import android.view.WindowManager;                                                                       </span>
<span class="4293004276597960360" onmouseenter="enter('4293004276597960360');" onmouseout="out('4293004276597960360');" style="">  63 import android.view.animation.AccelerateInterpolator;                                                    </span>
<span class="-4330829166704003086" onmouseenter="enter('-4330829166704003086');" onmouseout="out('-4330829166704003086');" style="">  64 import android.view.animation.DecelerateInterpolator;                                                    </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="">  65 import android.widget.ArrayAdapter;                                                                      </span>
<span class="-1389926198978222011" onmouseenter="enter('-1389926198978222011');" onmouseout="out('-1389926198978222011');" style="">  66 import android.widget.BaseAdapter;                                                                       </span>
<span class="619404646788779253" onmouseenter="enter('619404646788779253');" onmouseout="out('619404646788779253');" style="">  67 import android.widget.FrameLayout;                                                                       </span>
<span class="1210679520679819328" onmouseenter="enter('1210679520679819328');" onmouseout="out('1210679520679819328');" style="">  68 import android.widget.HorizontalScrollView;                                                              </span>
<span class="-8478546344938881111" onmouseenter="enter('-8478546344938881111');" onmouseout="out('-8478546344938881111');" style="">  69 import android.widget.ImageView;                                                                         </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  70 import android.widget.LinearLayout;                                                                      </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  71 import android.widget.Toast;                                                                             </span>
<span  style="">  72                                                                                                          </span>
<span class="6533473271465139745" onmouseenter="enter('6533473271465139745');" onmouseout="out('6533473271465139745');" style="">  73 import com.android.photos.BitmapRegionTileSource;                                                        </span>
<span class="-6230463173033584865" onmouseenter="enter('-6230463173033584865');" onmouseout="out('-6230463173033584865');" style="">  74 import com.android.photos.BitmapRegionTileSource.BitmapSource;                                           </span>
<span  style="">  75                                                                                                          </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  76 import java.io.File;                                                                                     </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  77 import java.io.FileOutputStream;                                                                         </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  78 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  79 import java.util.ArrayList;                                                                              </span>
<span  style="">  80                                                                                                          </span>
<span class="-3479087503452779406" onmouseenter="enter('-3479087503452779406');" onmouseout="out('-3479087503452779406');" style="">  81 public class WallpaperPickerActivity extends WallpaperCropActivity {                                     </span>
<span class="-9207672248179223277" onmouseenter="enter('-9207672248179223277');" onmouseout="out('-9207672248179223277');" style="">  82     static final String TAG = &quot;Launcher.WallpaperPickerActivity&quot;;                                        </span>
<span  style="">  83                                                                                                          </span>
<span class="3742943605537861169" onmouseenter="enter('3742943605537861169');" onmouseout="out('3742943605537861169');" style="">  84     public static final int IMAGE_PICK = 5;                                                              </span>
<span class="6964368849625562410" onmouseenter="enter('6964368849625562410');" onmouseout="out('6964368849625562410');" style="">  85     public static final int PICK_WALLPAPER_THIRD_PARTY_ACTIVITY = 6;                                     </span>
<span class="-7093050771651663150" onmouseenter="enter('-7093050771651663150');" onmouseout="out('-7093050771651663150');" style="">  86     public static final int PICK_LIVE_WALLPAPER = 7;                                                     </span>
<span class="2002999604810079271" onmouseenter="enter('2002999604810079271');" onmouseout="out('2002999604810079271');" style="">  87     private static final String TEMP_WALLPAPER_TILES = &quot;TEMP_WALLPAPER_TILES&quot;;                           </span>
<span class="2369538557121393675" onmouseenter="enter('2369538557121393675');" onmouseout="out('2369538557121393675');" style="">  88     private static final String SELECTED_INDEX = &quot;SELECTED_INDEX&quot;;                                       </span>
<span class="8676512018192278738" onmouseenter="enter('8676512018192278738');" onmouseout="out('8676512018192278738');" style="">  89     private static final String OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME = &quot;default_thumb.jpg&quot;;          </span>
<span class="739407583494491877" onmouseenter="enter('739407583494491877');" onmouseout="out('739407583494491877');" style="">  90     private static final String DEFAULT_WALLPAPER_THUMBNAIL_FILENAME = &quot;default_thumb2.jpg&quot;;             </span>
<span class="-4006760574697076366" onmouseenter="enter('-4006760574697076366');" onmouseout="out('-4006760574697076366');" style="">  91     private static final int FLAG_POST_DELAY_MILLIS = 200;                                               </span>
<span  style="">  92                                                                                                          </span>
<span class="4390153378349048662" onmouseenter="enter('4390153378349048662');" onmouseout="out('4390153378349048662');" style="">  93     private View mSelectedTile;                                                                          </span>
<span class="-7732371762175677472" onmouseenter="enter('-7732371762175677472');" onmouseout="out('-7732371762175677472');" style="">  94     private boolean mIgnoreNextTap;                                                                      </span>
<span class="3263742057015850528" onmouseenter="enter('3263742057015850528');" onmouseout="out('3263742057015850528');" style="">  95     private OnClickListener mThumbnailOnClickListener;                                                   </span>
<span  style="">  96                                                                                                          </span>
<span class="-283642594149471002" onmouseenter="enter('-283642594149471002');" onmouseout="out('-283642594149471002');" style="">  97     private LinearLayout mWallpapersView;                                                                </span>
<span class="-441519593320335252" onmouseenter="enter('-441519593320335252');" onmouseout="out('-441519593320335252');" style="">  98     private View mWallpaperStrip;                                                                        </span>
<span  style="">  99                                                                                                          </span>
<span class="1128301058468039086" onmouseenter="enter('1128301058468039086');" onmouseout="out('1128301058468039086');" style=""> 100     private ActionMode.Callback mActionModeCallback;                                                     </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 101     private ActionMode mActionMode;                                                                      </span>
<span  style=""> 102                                                                                                          </span>
<span class="8486739019347078220" onmouseenter="enter('8486739019347078220');" onmouseout="out('8486739019347078220');" style=""> 103     private View.OnLongClickListener mLongClickListener;                                                 </span>
<span  style=""> 104                                                                                                          </span>
<span class="-4348434262230128417" onmouseenter="enter('-4348434262230128417');" onmouseout="out('-4348434262230128417');" style=""> 105     ArrayList&lt;Uri&gt; mTempWallpaperTiles = new ArrayList&lt;Uri&gt;();                                           </span>
<span class="7453258409125933365" onmouseenter="enter('7453258409125933365');" onmouseout="out('7453258409125933365');" style=""> 106     private SavedWallpaperImages mSavedImages;                                                           </span>
<span class="-2427071817986839025" onmouseenter="enter('-2427071817986839025');" onmouseout="out('-2427071817986839025');" style=""> 107     private WallpaperInfo mLiveWallpaperInfoOnPickerLaunch;                                              </span>
<span class="929971389778238645" onmouseenter="enter('929971389778238645');" onmouseout="out('929971389778238645');" style=""> 108     private int mSelectedIndex = -1;                                                                     </span>
<span class="4965621051566939005" onmouseenter="enter('4965621051566939005');" onmouseout="out('4965621051566939005');" style=""> 109     private WallpaperInfo mLastClickedLiveWallpaperInfo;                                                 </span>
<span  style=""> 110                                                                                                          </span>
<span class="4075218350470872817" onmouseenter="enter('4075218350470872817');" onmouseout="out('4075218350470872817');" style=""> 111     public static abstract class WallpaperTileInfo {                                                     </span>
<span class="7550834803278421014" onmouseenter="enter('7550834803278421014');" onmouseout="out('7550834803278421014');" style=""> 112         protected View mView;                                                                            </span>
<span class="3164205720118928248" onmouseenter="enter('3164205720118928248');" onmouseout="out('3164205720118928248');" style=""> 113         public Drawable mThumb;                                                                          </span>
<span  style=""> 114                                                                                                          </span>
<span class="6316991849463108734" onmouseenter="enter('6316991849463108734');" onmouseout="out('6316991849463108734');" style=""> 115         public void setView(View v) {                                                                    </span>
<span class="-529347746759665505" onmouseenter="enter('-529347746759665505');" onmouseout="out('-529347746759665505');" style=""> 116             mView = v;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117         }                                                                                                </span>
<span class="-3695677448824564507" onmouseenter="enter('-3695677448824564507');" onmouseout="out('-3695677448824564507');" style=""> 118         public void onClick(WallpaperPickerActivity a) {}                                                </span>
<span class="-5126019138081524515" onmouseenter="enter('-5126019138081524515');" onmouseout="out('-5126019138081524515');" style=""> 119         public void onSave(WallpaperPickerActivity a) {}                                                 </span>
<span class="-7733232806592304896" onmouseenter="enter('-7733232806592304896');" onmouseout="out('-7733232806592304896');" style=""> 120         public void onDelete(WallpaperPickerActivity a) {}                                               </span>
<span class="6774579784381031072" onmouseenter="enter('6774579784381031072');" onmouseout="out('6774579784381031072');" style=""> 121         public boolean isSelectable() { return false; }                                                  </span>
<span class="5815845045888824629" onmouseenter="enter('5815845045888824629');" onmouseout="out('5815845045888824629');" style=""> 122         public boolean isNamelessWallpaper() { return false; }                                           </span>
<span class="-4275008082196176757" onmouseenter="enter('-4275008082196176757');" onmouseout="out('-4275008082196176757');" style=""> 123         public void onIndexUpdated(CharSequence label) {                                                 </span>
<span class="1066314433179649740" onmouseenter="enter('1066314433179649740');" onmouseout="out('1066314433179649740');" style=""> 124             if (isNamelessWallpaper()) {                                                                 </span>
<span class="8251992145347444102" onmouseenter="enter('8251992145347444102');" onmouseout="out('8251992145347444102');" style=""> 125                 mView.setContentDescription(label);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="8237636954076389639" onmouseenter="enter('8237636954076389639');" onmouseout="out('8237636954076389639');" style=""> 130     public static class PickImageInfo extends WallpaperTileInfo {                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 132         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="2089748537565408969" onmouseenter="enter('2089748537565408969');" onmouseout="out('2089748537565408969');" style=""> 133             Intent intent = new Intent(Intent.ACTION_GET_CONTENT);                                       </span>
<span class="-7445763452332816798" onmouseenter="enter('-7445763452332816798');" onmouseout="out('-7445763452332816798');" style=""> 134             intent.setType(&quot;image/*&quot;);                                                                   </span>
<span class="1585161910249024870" onmouseenter="enter('1585161910249024870');" onmouseout="out('1585161910249024870');" style=""> 135             a.startActivityForResultSafely(intent, IMAGE_PICK);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137     }                                                                                                    </span>
<span  style=""> 138                                                                                                          </span>
<span class="8509990706001469030" onmouseenter="enter('8509990706001469030');" onmouseout="out('8509990706001469030');" style=""> 139     public static class UriWallpaperInfo extends WallpaperTileInfo {                                     </span>
<span class="8004450152098447697" onmouseenter="enter('8004450152098447697');" onmouseout="out('8004450152098447697');" style=""> 140         private Uri mUri;                                                                                </span>
<span class="-1488686611326744898" onmouseenter="enter('-1488686611326744898');" onmouseout="out('-1488686611326744898');" style=""> 141         private boolean mFirstClick = true;                                                              </span>
<span class="6610185084821017470" onmouseenter="enter('6610185084821017470');" onmouseout="out('6610185084821017470');" style=""> 142         private BitmapRegionTileSource.UriBitmapSource mBitmapSource;                                    </span>
<span class="8610701194225596743" onmouseenter="enter('8610701194225596743');" onmouseout="out('8610701194225596743');" style=""> 143         public UriWallpaperInfo(Uri uri) {                                                               </span>
<span class="1271920698851316002" onmouseenter="enter('1271920698851316002');" onmouseout="out('1271920698851316002');" style=""> 144             mUri = uri;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 146         @Override                                                                                        </span>
<span class="4138358358495509302" onmouseenter="enter('4138358358495509302');" onmouseout="out('4138358358495509302');" style=""> 147         public void onClick(final WallpaperPickerActivity a) {                                           </span>
<span class="8679558832982190034" onmouseenter="enter('8679558832982190034');" onmouseout="out('8679558832982190034');" style=""> 148             final Runnable onLoad;                                                                       </span>
<span class="8795982501973046418" onmouseenter="enter('8795982501973046418');" onmouseout="out('8795982501973046418');" style=""> 149             if (!mFirstClick) {                                                                          </span>
<span class="-4660024005754338718" onmouseenter="enter('-4660024005754338718');" onmouseout="out('-4660024005754338718');" style=""> 150                 onLoad = null;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 151             } else {                                                                                     </span>
<span class="-47635291022464950" onmouseenter="enter('-47635291022464950');" onmouseout="out('-47635291022464950');" style=""> 152                 mFirstClick = false;                                                                     </span>
<span class="2494714179697294181" onmouseenter="enter('2494714179697294181');" onmouseout="out('2494714179697294181');" style=""> 153                 a.mSetWallpaperButton.setEnabled(false);                                                 </span>
<span class="-2512757449438613240" onmouseenter="enter('-2512757449438613240');" onmouseout="out('-2512757449438613240');" style=""> 154                 onLoad = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 155                     public void run() {                                                                  </span>
<span class="-1092618589087535440" onmouseenter="enter('-1092618589087535440');" onmouseout="out('-1092618589087535440');" style=""> 156                         if (mBitmapSource != null &amp;&amp;                                                     </span>
<span class="-5646208940028184072" onmouseenter="enter('-5646208940028184072');" onmouseout="out('-5646208940028184072');" style=""> 157                                 mBitmapSource.getLoadingState() == BitmapSource.State.LOADED) {          </span>
<span class="-4435485402424028248" onmouseenter="enter('-4435485402424028248');" onmouseout="out('-4435485402424028248');" style=""> 158                             a.selectTile(mView);                                                         </span>
<span class="-7956748308294553331" onmouseenter="enter('-7956748308294553331');" onmouseout="out('-7956748308294553331');" style=""> 159                             a.mSetWallpaperButton.setEnabled(true);                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 160                         } else {                                                                         </span>
<span class="-3511643828077608980" onmouseenter="enter('-3511643828077608980');" onmouseout="out('-3511643828077608980');" style=""> 161                             ViewGroup parent = (ViewGroup) mView.getParent();                            </span>
<span class="7363799700568464510" onmouseenter="enter('7363799700568464510');" onmouseout="out('7363799700568464510');" style=""> 162                             if (parent != null) {                                                        </span>
<span class="1125194709286705363" onmouseenter="enter('1125194709286705363');" onmouseout="out('1125194709286705363');" style=""> 163                                 parent.removeView(mView);                                                </span>
<span class="-5214654684933993939" onmouseenter="enter('-5214654684933993939');" onmouseout="out('-5214654684933993939');" style=""> 164                                 Toast.makeText(a,                                                        </span>
<span class="-2844570703353432216" onmouseenter="enter('-2844570703353432216');" onmouseout="out('-2844570703353432216');" style=""> 165                                         a.getString(R.string.image_load_fail),                           </span>
<span class="427556865284092623" onmouseenter="enter('427556865284092623');" onmouseout="out('427556865284092623');" style=""> 166                                         Toast.LENGTH_SHORT).show();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 170                 };                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171             }                                                                                            </span>
<span class="-8031841537067985347" onmouseenter="enter('-8031841537067985347');" onmouseout="out('-8031841537067985347');" style=""> 172             mBitmapSource = new BitmapRegionTileSource.UriBitmapSource(                                  </span>
<span class="-3332939544017123551" onmouseenter="enter('-3332939544017123551');" onmouseout="out('-3332939544017123551');" style=""> 173                     a, mUri, BitmapRegionTileSource.MAX_PREVIEW_SIZE);                                   </span>
<span class="-7148866754307262491" onmouseenter="enter('-7148866754307262491');" onmouseout="out('-7148866754307262491');" style=""> 174             a.setCropViewTileSource(mBitmapSource, true, false, onLoad);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 176         @Override                                                                                        </span>
<span class="-1898343559351992508" onmouseenter="enter('-1898343559351992508');" onmouseout="out('-1898343559351992508');" style=""> 177         public void onSave(final WallpaperPickerActivity a) {                                            </span>
<span class="2587024494847424214" onmouseenter="enter('2587024494847424214');" onmouseout="out('2587024494847424214');" style=""> 178             boolean finishActivityWhenDone = true;                                                       </span>
<span class="-5468975333283797562" onmouseenter="enter('-5468975333283797562');" onmouseout="out('-5468975333283797562');" style=""> 179             OnBitmapCroppedHandler h = new OnBitmapCroppedHandler() {                                    </span>
<span class="-2021142144081785590" onmouseenter="enter('-2021142144081785590');" onmouseout="out('-2021142144081785590');" style=""> 180                 public void onBitmapCropped(byte[] imageBytes) {                                         </span>
<span class="-3067422103108397582" onmouseenter="enter('-3067422103108397582');" onmouseout="out('-3067422103108397582');" style=""> 181                     Point thumbSize = getDefaultThumbnailSize(a.getResources());                         </span>
<span class="7862344698024253739" onmouseenter="enter('7862344698024253739');" onmouseout="out('7862344698024253739');" style=""> 182                     // rotation is set to 0 since imageBytes has already been correctly rotated          </span>
<span class="1725565692823650889" onmouseenter="enter('1725565692823650889');" onmouseout="out('1725565692823650889');" style=""> 183                     Bitmap thumb = createThumbnail(                                                      </span>
<span class="6073449064591225469" onmouseenter="enter('6073449064591225469');" onmouseout="out('6073449064591225469');" style=""> 184                             thumbSize, null, null, imageBytes, null, 0, 0, true);                        </span>
<span class="2596245612370871573" onmouseenter="enter('2596245612370871573');" onmouseout="out('2596245612370871573');" style=""> 185                     a.getSavedImages().writeImage(thumb, imageBytes);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 187             };                                                                                           </span>
<span class="-4894948951423183692" onmouseenter="enter('-4894948951423183692');" onmouseout="out('-4894948951423183692');" style=""> 188             a.cropImageAndSetWallpaper(mUri, h, finishActivityWhenDone);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 191         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 192             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 194         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 195         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 196             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198     }                                                                                                    </span>
<span  style=""> 199                                                                                                          </span>
<span class="-4190074108086167067" onmouseenter="enter('-4190074108086167067');" onmouseout="out('-4190074108086167067');" style=""> 200     public static class FileWallpaperInfo extends WallpaperTileInfo {                                    </span>
<span class="-7985382265690223755" onmouseenter="enter('-7985382265690223755');" onmouseout="out('-7985382265690223755');" style=""> 201         private File mFile;                                                                              </span>
<span  style=""> 202                                                                                                          </span>
<span class="-1741311432485362981" onmouseenter="enter('-1741311432485362981');" onmouseout="out('-1741311432485362981');" style=""> 203         public FileWallpaperInfo(File target, Drawable thumb) {                                          </span>
<span class="4814381598022211544" onmouseenter="enter('4814381598022211544');" onmouseout="out('4814381598022211544');" style=""> 204             mFile = target;                                                                              </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 205             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 207         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 208         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="-8750527241018834281" onmouseenter="enter('-8750527241018834281');" onmouseout="out('-8750527241018834281');" style=""> 209             BitmapRegionTileSource.UriBitmapSource bitmapSource =                                        </span>
<span class="2483734173143161809" onmouseenter="enter('2483734173143161809');" onmouseout="out('2483734173143161809');" style=""> 210                     new BitmapRegionTileSource.UriBitmapSource(a, Uri.fromFile(mFile), 1024);            </span>
<span class="-5075441127387044752" onmouseenter="enter('-5075441127387044752');" onmouseout="out('-5075441127387044752');" style=""> 211             a.setCropViewTileSource(bitmapSource, false, true, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 213         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 214         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="3801787756410673434" onmouseenter="enter('3801787756410673434');" onmouseout="out('3801787756410673434');" style=""> 215             a.setWallpaper(Uri.fromFile(mFile), true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 217         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 218         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 219             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 221         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 222         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 223             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225     }                                                                                                    </span>
<span  style=""> 226                                                                                                          </span>
<span class="4482520304290563098" onmouseenter="enter('4482520304290563098');" onmouseout="out('4482520304290563098');" style=""> 227     public static class ResourceWallpaperInfo extends WallpaperTileInfo {                                </span>
<span class="-4981714113555710279" onmouseenter="enter('-4981714113555710279');" onmouseout="out('-4981714113555710279');" style=""> 228         private Resources mResources;                                                                    </span>
<span class="739042083917827597" onmouseenter="enter('739042083917827597');" onmouseout="out('739042083917827597');" style=""> 229         private int mResId;                                                                              </span>
<span  style=""> 230                                                                                                          </span>
<span class="-3210764035307017816" onmouseenter="enter('-3210764035307017816');" onmouseout="out('-3210764035307017816');" style=""> 231         public ResourceWallpaperInfo(Resources res, int resId, Drawable thumb) {                         </span>
<span class="8738901641718599503" onmouseenter="enter('8738901641718599503');" onmouseout="out('8738901641718599503');" style=""> 232             mResources = res;                                                                            </span>
<span class="4654100838271737112" onmouseenter="enter('4654100838271737112');" onmouseout="out('4654100838271737112');" style=""> 233             mResId = resId;                                                                              </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 234             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 236         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 237         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="8895257418408392595" onmouseenter="enter('8895257418408392595');" onmouseout="out('8895257418408392595');" style=""> 238             BitmapRegionTileSource.ResourceBitmapSource bitmapSource =                                   </span>
<span class="3679932597957891792" onmouseenter="enter('3679932597957891792');" onmouseout="out('3679932597957891792');" style=""> 239                     new BitmapRegionTileSource.ResourceBitmapSource(                                     </span>
<span class="9115725956109139967" onmouseenter="enter('9115725956109139967');" onmouseout="out('9115725956109139967');" style=""> 240                             mResources, mResId, BitmapRegionTileSource.MAX_PREVIEW_SIZE);                </span>
<span class="2218452414014258741" onmouseenter="enter('2218452414014258741');" onmouseout="out('2218452414014258741');" style=""> 241             bitmapSource.loadInBackground();                                                             </span>
<span class="7058429795285354581" onmouseenter="enter('7058429795285354581');" onmouseout="out('7058429795285354581');" style=""> 242             BitmapRegionTileSource source = new BitmapRegionTileSource(a, bitmapSource);                 </span>
<span class="1481068659103378542" onmouseenter="enter('1481068659103378542');" onmouseout="out('1481068659103378542');" style=""> 243             CropView v = a.getCropView();                                                                </span>
<span class="7170858028895783855" onmouseenter="enter('7170858028895783855');" onmouseout="out('7170858028895783855');" style=""> 244             v.setTileSource(source, null);                                                               </span>
<span class="2334799634056328814" onmouseenter="enter('2334799634056328814');" onmouseout="out('2334799634056328814');" style=""> 245             Point wallpaperSize = WallpaperCropActivity.getDefaultWallpaperSize(                         </span>
<span class="-4580349435201294760" onmouseenter="enter('-4580349435201294760');" onmouseout="out('-4580349435201294760');" style=""> 246                     a.getResources(), a.getWindowManager());                                             </span>
<span class="1498400964848924986" onmouseenter="enter('1498400964848924986');" onmouseout="out('1498400964848924986');" style=""> 247             RectF crop = WallpaperCropActivity.getMaxCropRect(                                           </span>
<span class="5182456994402924347" onmouseenter="enter('5182456994402924347');" onmouseout="out('5182456994402924347');" style=""> 248                     source.getImageWidth(), source.getImageHeight(),                                     </span>
<span class="399667554211083958" onmouseenter="enter('399667554211083958');" onmouseout="out('399667554211083958');" style=""> 249                     wallpaperSize.x, wallpaperSize.y, false);                                            </span>
<span class="8890199765694503418" onmouseenter="enter('8890199765694503418');" onmouseout="out('8890199765694503418');" style=""> 250             v.setScale(wallpaperSize.x / crop.width());                                                  </span>
<span class="5781800255248373469" onmouseenter="enter('5781800255248373469');" onmouseout="out('5781800255248373469');" style=""> 251             v.setTouchEnabled(false);                                                                    </span>
<span class="8306233968260689021" onmouseenter="enter('8306233968260689021');" onmouseout="out('8306233968260689021');" style=""> 252             a.setSystemWallpaperVisiblity(false);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 254         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 255         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="2587024494847424214" onmouseenter="enter('2587024494847424214');" onmouseout="out('2587024494847424214');" style=""> 256             boolean finishActivityWhenDone = true;                                                       </span>
<span class="870771120792411608" onmouseenter="enter('870771120792411608');" onmouseout="out('870771120792411608');" style=""> 257             a.cropImageAndSetWallpaper(mResources, mResId, finishActivityWhenDone);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 259         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 260         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 261             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 264         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 265             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267     }                                                                                                    </span>
<span  style=""> 268                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 269     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-529309049483586312" onmouseenter="enter('-529309049483586312');" onmouseout="out('-529309049483586312');" style=""> 270     public static class DefaultWallpaperInfo extends WallpaperTileInfo {                                 </span>
<span class="461095260062433386" onmouseenter="enter('461095260062433386');" onmouseout="out('461095260062433386');" style=""> 271         public DefaultWallpaperInfo(Drawable thumb) {                                                    </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 272             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 274         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 275         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="5819053214355424889" onmouseenter="enter('5819053214355424889');" onmouseout="out('5819053214355424889');" style=""> 276             CropView c = a.getCropView();                                                                </span>
<span  style=""> 277                                                                                                          </span>
<span class="-2729062430983653755" onmouseenter="enter('-2729062430983653755');" onmouseout="out('-2729062430983653755');" style=""> 278             Drawable defaultWallpaper = WallpaperManager.getInstance(a).getBuiltInDrawable(              </span>
<span class="-832213469176736512" onmouseenter="enter('-832213469176736512');" onmouseout="out('-832213469176736512');" style=""> 279                     c.getWidth(), c.getHeight(), false, 0.5f, 0.5f);                                     </span>
<span  style=""> 280                                                                                                          </span>
<span class="-2361710212545761200" onmouseenter="enter('-2361710212545761200');" onmouseout="out('-2361710212545761200');" style=""> 281             if (defaultWallpaper == null) {                                                              </span>
<span class="6243043845794415874" onmouseenter="enter('6243043845794415874');" onmouseout="out('6243043845794415874');" style=""> 282                 Log.w(TAG, &quot;Null default wallpaper encountered.&quot;);                                       </span>
<span class="-5029196267720010633" onmouseenter="enter('-5029196267720010633');" onmouseout="out('-5029196267720010633');" style=""> 283                 c.setTileSource(null, null);                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 284                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285             }                                                                                            </span>
<span  style=""> 286                                                                                                          </span>
<span class="1391482188931535502" onmouseenter="enter('1391482188931535502');" onmouseout="out('1391482188931535502');" style=""> 287             c.setTileSource(                                                                             </span>
<span class="-7530257073534369499" onmouseenter="enter('-7530257073534369499');" onmouseout="out('-7530257073534369499');" style=""><abbr title=" 288                     new DrawableTileSource(a, defaultWallpaper, DrawableTileSource.MAX_PREVIEW_SIZE), null);"> 288                     new DrawableTileSource(a, defaultWallpaper, DrawableTileSource.MAX_PREVIEW_SIZE), nul</abbr></span>
<span class="7465943936877271880" onmouseenter="enter('7465943936877271880');" onmouseout="out('7465943936877271880');" style=""> 289             c.setScale(1f);                                                                              </span>
<span class="-2853419027579511743" onmouseenter="enter('-2853419027579511743');" onmouseout="out('-2853419027579511743');" style=""> 290             c.setTouchEnabled(false);                                                                    </span>
<span class="8306233968260689021" onmouseenter="enter('8306233968260689021');" onmouseout="out('8306233968260689021');" style=""> 291             a.setSystemWallpaperVisiblity(false);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 293         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 294         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 295             try {                                                                                        </span>
<span class="7067546428920692022" onmouseenter="enter('7067546428920692022');" onmouseout="out('7067546428920692022');" style=""> 296                 WallpaperManager.getInstance(a).clear();                                                 </span>
<span class="-6231188240415860412" onmouseenter="enter('-6231188240415860412');" onmouseout="out('-6231188240415860412');" style=""> 297                 a.setResult(RESULT_OK);                                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 298             } catch (IOException e) {                                                                    </span>
<span class="5382996693541062495" onmouseenter="enter('5382996693541062495');" onmouseout="out('5382996693541062495');" style=""> 299                 Log.w(&quot;Setting wallpaper to default threw exception&quot;, e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300             }                                                                                            </span>
<span class="6929368672411603344" onmouseenter="enter('6929368672411603344');" onmouseout="out('6929368672411603344');" style=""> 301             a.finish();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 303         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 304         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 305             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306         }                                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 307         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 308         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 309             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311     }                                                                                                    </span>
<span  style=""> 312                                                                                                          </span>
<span class="-8802765780262582525" onmouseenter="enter('-8802765780262582525');" onmouseout="out('-8802765780262582525');" style=""> 313     public void setWallpaperStripYOffset(float offset) {                                                 </span>
<span class="3084906213280284447" onmouseenter="enter('3084906213280284447');" onmouseout="out('3084906213280284447');" style=""> 314         mWallpaperStrip.setPadding(0, 0, 0, (int) offset);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315     }                                                                                                    </span>
<span  style=""> 316                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 317     /**                                                                                                  </span>
<span class="-6795170733611954418" onmouseenter="enter('-6795170733611954418');" onmouseout="out('-6795170733611954418');" style=""> 318      * shows the system wallpaper behind the window and hides the {@link                                 </span>
<span class="6653510374782541379" onmouseenter="enter('6653510374782541379');" onmouseout="out('6653510374782541379');" style=""> 319      * #mCropView} if visible                                                                            </span>
<span class="-919436548065776589" onmouseenter="enter('-919436548065776589');" onmouseout="out('-919436548065776589');" style=""> 320      * @param visible should the system wallpaper be shown                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 321      */                                                                                                  </span>
<span class="8447968906987641681" onmouseenter="enter('8447968906987641681');" onmouseout="out('8447968906987641681');" style=""> 322     protected void setSystemWallpaperVisiblity(final boolean visible) {                                  </span>
<span class="-417710703620962362" onmouseenter="enter('-417710703620962362');" onmouseout="out('-417710703620962362');" style=""> 323         // hide our own wallpaper preview if necessary                                                   </span>
<span class="5885318085227755768" onmouseenter="enter('5885318085227755768');" onmouseout="out('5885318085227755768');" style=""> 324         if(!visible) {                                                                                   </span>
<span class="2194873949088634393" onmouseenter="enter('2194873949088634393');" onmouseout="out('2194873949088634393');" style=""> 325             mCropView.setVisibility(View.VISIBLE);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 326         } else {                                                                                         </span>
<span class="7308551084636696682" onmouseenter="enter('7308551084636696682');" onmouseout="out('7308551084636696682');" style=""> 327             changeWallpaperFlags(visible);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328         }                                                                                                </span>
<span class="1679109329919957838" onmouseenter="enter('1679109329919957838');" onmouseout="out('1679109329919957838');" style=""> 329         // the change of the flag must be delayed in order to avoid flickering,                          </span>
<span class="-5970233735028176128" onmouseenter="enter('-5970233735028176128');" onmouseout="out('-5970233735028176128');" style=""> 330         // a simple post / double post does not suffice here                                             </span>
<span class="-7176702322471341093" onmouseenter="enter('-7176702322471341093');" onmouseout="out('-7176702322471341093');" style=""> 331         mCropView.postDelayed(new Runnable() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 332             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 333             public void run() {                                                                          </span>
<span class="5885318085227755768" onmouseenter="enter('5885318085227755768');" onmouseout="out('5885318085227755768');" style=""> 334                 if(!visible) {                                                                           </span>
<span class="7308551084636696682" onmouseenter="enter('7308551084636696682');" onmouseout="out('7308551084636696682');" style=""> 335                     changeWallpaperFlags(visible);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 336                 } else {                                                                                 </span>
<span class="-3429704510316414264" onmouseenter="enter('-3429704510316414264');" onmouseout="out('-3429704510316414264');" style=""> 337                     mCropView.setVisibility(View.INVISIBLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339             }                                                                                            </span>
<span class="-8235668854014933241" onmouseenter="enter('-8235668854014933241');" onmouseout="out('-8235668854014933241');" style=""> 340         }, FLAG_POST_DELAY_MILLIS);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341     }                                                                                                    </span>
<span  style=""> 342                                                                                                          </span>
<span class="3592826325976819586" onmouseenter="enter('3592826325976819586');" onmouseout="out('3592826325976819586');" style=""> 343     private void changeWallpaperFlags(boolean visible) {                                                 </span>
<span class="-4776685467772035793" onmouseenter="enter('-4776685467772035793');" onmouseout="out('-4776685467772035793');" style=""> 344         int desiredWallpaperFlag = visible ? WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER : 0;         </span>
<span class="8691025336291682453" onmouseenter="enter('8691025336291682453');" onmouseout="out('8691025336291682453');" style=""> 345         int currentWallpaperFlag = getWindow().getAttributes().flags                                     </span>
<span class="8282067317873610301" onmouseenter="enter('8282067317873610301');" onmouseout="out('8282067317873610301');" style=""> 346                 &amp; WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER;                                        </span>
<span class="-1167218077091760817" onmouseenter="enter('-1167218077091760817');" onmouseout="out('-1167218077091760817');" style=""> 347         if (desiredWallpaperFlag != currentWallpaperFlag) {                                              </span>
<span class="2391614469750626890" onmouseenter="enter('2391614469750626890');" onmouseout="out('2391614469750626890');" style=""> 348             getWindow().setFlags(desiredWallpaperFlag,                                                   </span>
<span class="350679169211130451" onmouseenter="enter('350679169211130451');" onmouseout="out('350679169211130451');" style=""> 349                     WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351     }                                                                                                    </span>
<span  style=""> 352                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353     @Override                                                                                            </span>
<span class="1140607717618445838" onmouseenter="enter('1140607717618445838');" onmouseout="out('1140607717618445838');" style=""> 354     public void setCropViewTileSource(BitmapSource bitmapSource,                                         </span>
<span class="4950213883544597262" onmouseenter="enter('4950213883544597262');" onmouseout="out('4950213883544597262');" style=""> 355                                       boolean touchEnabled,                                              </span>
<span class="-6368270284124027023" onmouseenter="enter('-6368270284124027023');" onmouseout="out('-6368270284124027023');" style=""> 356                                       boolean moveToLeft,                                                </span>
<span class="177276617274926150" onmouseenter="enter('177276617274926150');" onmouseout="out('177276617274926150');" style=""> 357                                       final Runnable postExecute) {                                      </span>
<span class="-5291509537717890007" onmouseenter="enter('-5291509537717890007');" onmouseout="out('-5291509537717890007');" style=""> 358         // we also want to show our own wallpaper instead of the one in the background                   </span>
<span class="5047660510705185298" onmouseenter="enter('5047660510705185298');" onmouseout="out('5047660510705185298');" style=""> 359         Runnable showPostExecuteRunnable = new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 360             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 361             public void run() {                                                                          </span>
<span class="6334360039402158540" onmouseenter="enter('6334360039402158540');" onmouseout="out('6334360039402158540');" style=""> 362                 if(postExecute != null) {                                                                </span>
<span class="-8492134334118709687" onmouseenter="enter('-8492134334118709687');" onmouseout="out('-8492134334118709687');" style=""> 363                     postExecute.run();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                 }                                                                                        </span>
<span class="-561940081499707422" onmouseenter="enter('-561940081499707422');" onmouseout="out('-561940081499707422');" style=""> 365                 setSystemWallpaperVisiblity(false);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 367         };                                                                                               </span>
<span class="-4658752126328035538" onmouseenter="enter('-4658752126328035538');" onmouseout="out('-4658752126328035538');" style=""> 368         super.setCropViewTileSource(bitmapSource,                                                        </span>
<span class="5417365411554046888" onmouseenter="enter('5417365411554046888');" onmouseout="out('5417365411554046888');" style=""> 369                 touchEnabled,                                                                            </span>
<span class="4993650789095952145" onmouseenter="enter('4993650789095952145');" onmouseout="out('4993650789095952145');" style=""> 370                 moveToLeft,                                                                              </span>
<span class="5392505438861518590" onmouseenter="enter('5392505438861518590');" onmouseout="out('5392505438861518590');" style=""> 371                 showPostExecuteRunnable);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372     }                                                                                                    </span>
<span  style=""> 373                                                                                                          </span>
<span class="5854257451777934287" onmouseenter="enter('5854257451777934287');" onmouseout="out('5854257451777934287');" style=""> 374     // called by onCreate; this is subclassed to overwrite WallpaperCropActivity                         </span>
<span class="-2182533896997661648" onmouseenter="enter('-2182533896997661648');" onmouseout="out('-2182533896997661648');" style=""> 375     protected void init() {                                                                              </span>
<span class="2979438704186700018" onmouseenter="enter('2979438704186700018');" onmouseout="out('2979438704186700018');" style=""> 376         setContentView(R.layout.wallpaper_picker);                                                       </span>
<span  style=""> 377                                                                                                          </span>
<span class="-1776232873259644844" onmouseenter="enter('-1776232873259644844');" onmouseout="out('-1776232873259644844');" style=""> 378         mCropView = (CropView) findViewById(R.id.cropView);                                              </span>
<span class="-3429704510316414264" onmouseenter="enter('-3429704510316414264');" onmouseout="out('-3429704510316414264');" style=""> 379         mCropView.setVisibility(View.INVISIBLE);                                                         </span>
<span  style=""> 380                                                                                                          </span>
<span class="-2578053662916702311" onmouseenter="enter('-2578053662916702311');" onmouseout="out('-2578053662916702311');" style=""> 381         mWallpaperStrip = findViewById(R.id.wallpaper_strip);                                            </span>
<span class="8068618426611567623" onmouseenter="enter('8068618426611567623');" onmouseout="out('8068618426611567623');" style=""> 382         mCropView.setTouchCallback(new CropView.TouchCallback() {                                        </span>
<span class="-1035492205097680166" onmouseenter="enter('-1035492205097680166');" onmouseout="out('-1035492205097680166');" style=""> 383             ViewPropertyAnimator mAnim;                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384             @Override                                                                                    </span>
<span class="1626698357951932531" onmouseenter="enter('1626698357951932531');" onmouseout="out('1626698357951932531');" style=""> 385             public void onTouchDown() {                                                                  </span>
<span class="-2973121909455018733" onmouseenter="enter('-2973121909455018733');" onmouseout="out('-2973121909455018733');" style=""> 386                 if (mAnim != null) {                                                                     </span>
<span class="-9205181203898657288" onmouseenter="enter('-9205181203898657288');" onmouseout="out('-9205181203898657288');" style=""> 387                     mAnim.cancel();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388                 }                                                                                        </span>
<span class="3327382853992128006" onmouseenter="enter('3327382853992128006');" onmouseout="out('3327382853992128006');" style=""> 389                 if (mWallpaperStrip.getAlpha() == 1f) {                                                  </span>
<span class="-3956321380048081036" onmouseenter="enter('-3956321380048081036');" onmouseout="out('-3956321380048081036');" style=""> 390                     mIgnoreNextTap = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391                 }                                                                                        </span>
<span class="-6956982405463185167" onmouseenter="enter('-6956982405463185167');" onmouseout="out('-6956982405463185167');" style=""> 392                 mAnim = mWallpaperStrip.animate();                                                       </span>
<span class="-6791557412964356793" onmouseenter="enter('-6791557412964356793');" onmouseout="out('-6791557412964356793');" style=""> 393                 mAnim.alpha(0f)                                                                          </span>
<span class="-6026493296855862387" onmouseenter="enter('-6026493296855862387');" onmouseout="out('-6026493296855862387');" style=""> 394                     .setDuration(150)                                                                    </span>
<span class="-724010739576222770" onmouseenter="enter('-724010739576222770');" onmouseout="out('-724010739576222770');" style=""> 395                     .withEndAction(new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 396                         public void run() {                                                              </span>
<span class="5391643758310247109" onmouseenter="enter('5391643758310247109');" onmouseout="out('5391643758310247109');" style=""> 397                             mWallpaperStrip.setVisibility(View.INVISIBLE);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 399                     });                                                                                  </span>
<span class="4120717992136711655" onmouseenter="enter('4120717992136711655');" onmouseout="out('4120717992136711655');" style=""> 400                 mAnim.setInterpolator(new AccelerateInterpolator(0.75f));                                </span>
<span class="3184709938218096424" onmouseenter="enter('3184709938218096424');" onmouseout="out('3184709938218096424');" style=""> 401                 mAnim.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402             }                                                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 403             @Override                                                                                    </span>
<span class="-4028587905866202696" onmouseenter="enter('-4028587905866202696');" onmouseout="out('-4028587905866202696');" style=""> 404             public void onTouchUp() {                                                                    </span>
<span class="2725693883097632090" onmouseenter="enter('2725693883097632090');" onmouseout="out('2725693883097632090');" style=""> 405                 mIgnoreNextTap = false;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406             }                                                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 407             @Override                                                                                    </span>
<span class="-7758883269909585068" onmouseenter="enter('-7758883269909585068');" onmouseout="out('-7758883269909585068');" style=""> 408             public void onTap() {                                                                        </span>
<span class="6942313366430007213" onmouseenter="enter('6942313366430007213');" onmouseout="out('6942313366430007213');" style=""> 409                 boolean ignoreTap = mIgnoreNextTap;                                                      </span>
<span class="2725693883097632090" onmouseenter="enter('2725693883097632090');" onmouseout="out('2725693883097632090');" style=""> 410                 mIgnoreNextTap = false;                                                                  </span>
<span class="387446229183659648" onmouseenter="enter('387446229183659648');" onmouseout="out('387446229183659648');" style=""> 411                 if (!ignoreTap) {                                                                        </span>
<span class="-2973121909455018733" onmouseenter="enter('-2973121909455018733');" onmouseout="out('-2973121909455018733');" style=""> 412                     if (mAnim != null) {                                                                 </span>
<span class="-9205181203898657288" onmouseenter="enter('-9205181203898657288');" onmouseout="out('-9205181203898657288');" style=""> 413                         mAnim.cancel();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414                     }                                                                                    </span>
<span class="2849585250197552354" onmouseenter="enter('2849585250197552354');" onmouseout="out('2849585250197552354');" style=""> 415                     mWallpaperStrip.setVisibility(View.VISIBLE);                                         </span>
<span class="-6956982405463185167" onmouseenter="enter('-6956982405463185167');" onmouseout="out('-6956982405463185167');" style=""> 416                     mAnim = mWallpaperStrip.animate();                                                   </span>
<span class="-6529107894597579397" onmouseenter="enter('-6529107894597579397');" onmouseout="out('-6529107894597579397');" style=""> 417                     mAnim.alpha(1f)                                                                      </span>
<span class="-6026493296855862387" onmouseenter="enter('-6026493296855862387');" onmouseout="out('-6026493296855862387');" style=""> 418                          .setDuration(150)                                                               </span>
<span class="-6632446345541241704" onmouseenter="enter('-6632446345541241704');" onmouseout="out('-6632446345541241704');" style=""> 419                          .setInterpolator(new DecelerateInterpolator(0.75f));                            </span>
<span class="3184709938218096424" onmouseenter="enter('3184709938218096424');" onmouseout="out('3184709938218096424');" style=""> 420                     mAnim.start();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 423         });                                                                                              </span>
<span  style=""> 424                                                                                                          </span>
<span class="-773253411800983412" onmouseenter="enter('-773253411800983412');" onmouseout="out('-773253411800983412');" style=""> 425         mThumbnailOnClickListener = new OnClickListener() {                                              </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 426             public void onClick(View v) {                                                                </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 427                 if (mActionMode != null) {                                                               </span>
<span class="-7945425703771551193" onmouseenter="enter('-7945425703771551193');" onmouseout="out('-7945425703771551193');" style=""> 428                     // When CAB is up, clicking toggles the item instead                                 </span>
<span class="8281773320045926887" onmouseenter="enter('8281773320045926887');" onmouseout="out('8281773320045926887');" style=""> 429                     if (v.isLongClickable()) {                                                           </span>
<span class="-1009252700459954960" onmouseenter="enter('-1009252700459954960');" onmouseout="out('-1009252700459954960');" style=""> 430                         mLongClickListener.onLongClick(v);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431                     }                                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 432                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433                 }                                                                                        </span>
<span class="-5998802208600738538" onmouseenter="enter('-5998802208600738538');" onmouseout="out('-5998802208600738538');" style=""> 434                 mSetWallpaperButton.setEnabled(true);                                                    </span>
<span class="-5476934872896833292" onmouseenter="enter('-5476934872896833292');" onmouseout="out('-5476934872896833292');" style=""> 435                 WallpaperTileInfo info = (WallpaperTileInfo) v.getTag();                                 </span>
<span class="-5097416669740389956" onmouseenter="enter('-5097416669740389956');" onmouseout="out('-5097416669740389956');" style=""> 436                 if (info.isSelectable() &amp;&amp; v.getVisibility() == View.VISIBLE) {                          </span>
<span class="-4588532236714287793" onmouseenter="enter('-4588532236714287793');" onmouseout="out('-4588532236714287793');" style=""> 437                     selectTile(v);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438                 }                                                                                        </span>
<span class="8040467138641960798" onmouseenter="enter('8040467138641960798');" onmouseout="out('8040467138641960798');" style=""> 439                 info.onClick(WallpaperPickerActivity.this);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 441         };                                                                                               </span>
<span class="-8969101037229031036" onmouseenter="enter('-8969101037229031036');" onmouseout="out('-8969101037229031036');" style=""> 442         mLongClickListener = new View.OnLongClickListener() {                                            </span>
<span class="-5185673936905803234" onmouseenter="enter('-5185673936905803234');" onmouseout="out('-5185673936905803234');" style=""> 443             // Called when the user long-clicks on someView                                              </span>
<span class="4352920324548579969" onmouseenter="enter('4352920324548579969');" onmouseout="out('4352920324548579969');" style=""> 444             public boolean onLongClick(View view) {                                                      </span>
<span class="-7607400486566825959" onmouseenter="enter('-7607400486566825959');" onmouseout="out('-7607400486566825959');" style=""> 445                 CheckableFrameLayout c = (CheckableFrameLayout) view;                                    </span>
<span class="17729423456607520" onmouseenter="enter('17729423456607520');" onmouseout="out('17729423456607520');" style=""> 446                 c.toggle();                                                                              </span>
<span  style=""> 447                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 448                 if (mActionMode != null) {                                                               </span>
<span class="-102618795880011952" onmouseenter="enter('-102618795880011952');" onmouseout="out('-102618795880011952');" style=""> 449                     mActionMode.invalidate();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 450                 } else {                                                                                 </span>
<span class="-9026698002389905756" onmouseenter="enter('-9026698002389905756');" onmouseout="out('-9026698002389905756');" style=""> 451                     // Start the CAB using the ActionMode.Callback defined below                         </span>
<span class="-65256925409540847" onmouseenter="enter('-65256925409540847');" onmouseout="out('-65256925409540847');" style=""> 452                     mActionMode = startActionMode(mActionModeCallback);                                  </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 453                     int childCount = mWallpapersView.getChildCount();                                    </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 454                     for (int i = 0; i &lt; childCount; i++) {                                               </span>
<span class="8061120510894137201" onmouseenter="enter('8061120510894137201');" onmouseout="out('8061120510894137201');" style=""> 455                         mWallpapersView.getChildAt(i).setSelected(false);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 458                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 460         };                                                                                               </span>
<span  style=""> 461                                                                                                          </span>
<span class="5863981315080253557" onmouseenter="enter('5863981315080253557');" onmouseout="out('5863981315080253557');" style=""> 462         // Populate the built-in wallpapers                                                              </span>
<span class="-6274410391280341112" onmouseenter="enter('-6274410391280341112');" onmouseout="out('-6274410391280341112');" style=""> 463         ArrayList&lt;WallpaperTileInfo&gt; wallpapers = findBundledWallpapers();                               </span>
<span class="2526610556609193817" onmouseenter="enter('2526610556609193817');" onmouseout="out('2526610556609193817');" style=""> 464         mWallpapersView = (LinearLayout) findViewById(R.id.wallpaper_list);                              </span>
<span class="-2971214249397723609" onmouseenter="enter('-2971214249397723609');" onmouseout="out('-2971214249397723609');" style=""> 465         SimpleWallpapersAdapter ia = new SimpleWallpapersAdapter(this, wallpapers);                      </span>
<span class="1613737006506352436" onmouseenter="enter('1613737006506352436');" onmouseout="out('1613737006506352436');" style=""> 466         populateWallpapersFromAdapter(mWallpapersView, ia, false);                                       </span>
<span  style=""> 467                                                                                                          </span>
<span class="-6274271967551788045" onmouseenter="enter('-6274271967551788045');" onmouseout="out('-6274271967551788045');" style=""> 468         // Populate the saved wallpapers                                                                 </span>
<span class="-593929748363635247" onmouseenter="enter('-593929748363635247');" onmouseout="out('-593929748363635247');" style=""> 469         mSavedImages = new SavedWallpaperImages(this);                                                   </span>
<span class="-944718586241422514" onmouseenter="enter('-944718586241422514');" onmouseout="out('-944718586241422514');" style=""> 470         mSavedImages.loadThumbnailsAndImageIdList();                                                     </span>
<span class="3791789265677239077" onmouseenter="enter('3791789265677239077');" onmouseout="out('3791789265677239077');" style=""> 471         populateWallpapersFromAdapter(mWallpapersView, mSavedImages, true);                              </span>
<span  style=""> 472                                                                                                          </span>
<span class="-8704527322237514837" onmouseenter="enter('-8704527322237514837');" onmouseout="out('-8704527322237514837');" style=""> 473         // Populate the live wallpapers                                                                  </span>
<span class="-401644721260157166" onmouseenter="enter('-401644721260157166');" onmouseout="out('-401644721260157166');" style=""> 474         final LinearLayout liveWallpapersView =                                                          </span>
<span class="-885348281479887742" onmouseenter="enter('-885348281479887742');" onmouseout="out('-885348281479887742');" style=""> 475                 (LinearLayout) findViewById(R.id.live_wallpaper_list);                                   </span>
<span class="-8599704022634275072" onmouseenter="enter('-8599704022634275072');" onmouseout="out('-8599704022634275072');" style=""> 476         final LiveWallpaperListAdapter a = new LiveWallpaperListAdapter(this);                           </span>
<span class="7657389333195170209" onmouseenter="enter('7657389333195170209');" onmouseout="out('7657389333195170209');" style=""> 477         a.registerDataSetObserver(new DataSetObserver() {                                                </span>
<span class="2979494936249539834" onmouseenter="enter('2979494936249539834');" onmouseout="out('2979494936249539834');" style=""> 478             public void onChanged() {                                                                    </span>
<span class="-1492802084192978474" onmouseenter="enter('-1492802084192978474');" onmouseout="out('-1492802084192978474');" style=""> 479                 liveWallpapersView.removeAllViews();                                                     </span>
<span class="3875768049007720660" onmouseenter="enter('3875768049007720660');" onmouseout="out('3875768049007720660');" style=""> 480                 populateWallpapersFromAdapter(liveWallpapersView, a, false);                             </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style=""> 481                 initializeScrollForRtl();                                                                </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 482                 updateTileIndices();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 484         });                                                                                              </span>
<span  style=""> 485                                                                                                          </span>
<span class="-205780312699671492" onmouseenter="enter('-205780312699671492');" onmouseout="out('-205780312699671492');" style=""> 486         // Populate the third-party wallpaper pickers                                                    </span>
<span class="4179693282871188976" onmouseenter="enter('4179693282871188976');" onmouseout="out('4179693282871188976');" style=""> 487         final LinearLayout thirdPartyWallpapersView =                                                    </span>
<span class="5882843090694659663" onmouseenter="enter('5882843090694659663');" onmouseout="out('5882843090694659663');" style=""> 488                 (LinearLayout) findViewById(R.id.third_party_wallpaper_list);                            </span>
<span class="-8996746260612235963" onmouseenter="enter('-8996746260612235963');" onmouseout="out('-8996746260612235963');" style=""> 489         final ThirdPartyWallpaperPickerListAdapter ta =                                                  </span>
<span class="-3817734683852475238" onmouseenter="enter('-3817734683852475238');" onmouseout="out('-3817734683852475238');" style=""> 490                 new ThirdPartyWallpaperPickerListAdapter(this);                                          </span>
<span class="-7445625898420221963" onmouseenter="enter('-7445625898420221963');" onmouseout="out('-7445625898420221963');" style=""> 491         populateWallpapersFromAdapter(thirdPartyWallpapersView, ta, false);                              </span>
<span  style=""> 492                                                                                                          </span>
<span class="4527492266177887191" onmouseenter="enter('4527492266177887191');" onmouseout="out('4527492266177887191');" style=""> 493         // Add a tile for the Gallery                                                                    </span>
<span class="-1043783805889159162" onmouseenter="enter('-1043783805889159162');" onmouseout="out('-1043783805889159162');" style=""> 494         LinearLayout masterWallpaperList = (LinearLayout) findViewById(R.id.master_wallpaper_list);      </span>
<span class="-2892944612318584502" onmouseenter="enter('-2892944612318584502');" onmouseout="out('-2892944612318584502');" style=""> 495         FrameLayout pickImageTile = (FrameLayout) getLayoutInflater().                                   </span>
<span class="5850716178866842185" onmouseenter="enter('5850716178866842185');" onmouseout="out('5850716178866842185');" style=""> 496                 inflate(R.layout.wallpaper_picker_image_picker_item, masterWallpaperList, false);        </span>
<span class="2326204380171439497" onmouseenter="enter('2326204380171439497');" onmouseout="out('2326204380171439497');" style=""> 497         setWallpaperItemPaddingToZero(pickImageTile);                                                    </span>
<span class="-4838121476786006009" onmouseenter="enter('-4838121476786006009');" onmouseout="out('-4838121476786006009');" style=""> 498         masterWallpaperList.addView(pickImageTile, 0);                                                   </span>
<span  style=""> 499                                                                                                          </span>
<span class="-8054039016662892826" onmouseenter="enter('-8054039016662892826');" onmouseout="out('-8054039016662892826');" style=""> 500         // Make its background the last photo taken on external storage                                  </span>
<span class="5284589790222029877" onmouseenter="enter('5284589790222029877');" onmouseout="out('5284589790222029877');" style=""> 501         Bitmap lastPhoto = getThumbnailOfLastPhoto();                                                    </span>
<span class="8723279423157572309" onmouseenter="enter('8723279423157572309');" onmouseout="out('8723279423157572309');" style=""> 502         if (lastPhoto != null) {                                                                         </span>
<span class="-2542013877954624323" onmouseenter="enter('-2542013877954624323');" onmouseout="out('-2542013877954624323');" style=""> 503             ImageView galleryThumbnailBg =                                                               </span>
<span class="7337794319296943994" onmouseenter="enter('7337794319296943994');" onmouseout="out('7337794319296943994');" style=""> 504                     (ImageView) pickImageTile.findViewById(R.id.wallpaper_image);                        </span>
<span class="-9209586398559028294" onmouseenter="enter('-9209586398559028294');" onmouseout="out('-9209586398559028294');" style=""> 505             galleryThumbnailBg.setImageBitmap(getThumbnailOfLastPhoto());                                </span>
<span class="624469022368512634" onmouseenter="enter('624469022368512634');" onmouseout="out('624469022368512634');" style=""> 506             int colorOverlay = getResources().getColor(R.color.wallpaper_picker_translucent_gray);       </span>
<span class="5708377594966735596" onmouseenter="enter('5708377594966735596');" onmouseout="out('5708377594966735596');" style=""> 507             galleryThumbnailBg.setColorFilter(colorOverlay, PorterDuff.Mode.SRC_ATOP);                   </span>
<span  style=""> 508                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509         }                                                                                                </span>
<span  style=""> 510                                                                                                          </span>
<span class="-8315020353080803014" onmouseenter="enter('-8315020353080803014');" onmouseout="out('-8315020353080803014');" style=""> 511         PickImageInfo pickImageInfo = new PickImageInfo();                                               </span>
<span class="332578453689310385" onmouseenter="enter('332578453689310385');" onmouseout="out('332578453689310385');" style=""> 512         pickImageTile.setTag(pickImageInfo);                                                             </span>
<span class="341631545919556933" onmouseenter="enter('341631545919556933');" onmouseout="out('341631545919556933');" style=""> 513         pickImageInfo.setView(pickImageTile);                                                            </span>
<span class="-2769069389002591388" onmouseenter="enter('-2769069389002591388');" onmouseout="out('-2769069389002591388');" style=""> 514         pickImageTile.setOnClickListener(mThumbnailOnClickListener);                                     </span>
<span  style=""> 515                                                                                                          </span>
<span class="-7723413543726583493" onmouseenter="enter('-7723413543726583493');" onmouseout="out('-7723413543726583493');" style=""> 516         // Select the first item; wait for a layout pass so that we initialize the dimensions of         </span>
<span class="-7132987448791092062" onmouseenter="enter('-7132987448791092062');" onmouseout="out('-7132987448791092062');" style=""> 517         // cropView or the defaultWallpaperView first                                                    </span>
<span class="-3578479520308771673" onmouseenter="enter('-3578479520308771673');" onmouseout="out('-3578479520308771673');" style=""> 518         mCropView.addOnLayoutChangeListener(new OnLayoutChangeListener() {                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 519             @Override                                                                                    </span>
<span class="591765389892742886" onmouseenter="enter('591765389892742886');" onmouseout="out('591765389892742886');" style=""> 520             public void onLayoutChange(View v, int left, int top, int right, int bottom,                 </span>
<span class="-3173737103826844444" onmouseenter="enter('-3173737103826844444');" onmouseout="out('-3173737103826844444');" style=""> 521                     int oldLeft, int oldTop, int oldRight, int oldBottom) {                              </span>
<span class="-7279384040956130450" onmouseenter="enter('-7279384040956130450');" onmouseout="out('-7279384040956130450');" style=""> 522                 if ((right - left) &gt; 0 &amp;&amp; (bottom - top) &gt; 0) {                                          </span>
<span class="8533166584309198773" onmouseenter="enter('8533166584309198773');" onmouseout="out('8533166584309198773');" style=""> 523                     if (mSelectedIndex &gt;= 0 &amp;&amp; mSelectedIndex &lt; mWallpapersView.getChildCount()) {       </span>
<span class="3126649155980915533" onmouseenter="enter('3126649155980915533');" onmouseout="out('3126649155980915533');" style=""> 524                         mThumbnailOnClickListener.onClick(                                               </span>
<span class="7801074009986787853" onmouseenter="enter('7801074009986787853');" onmouseout="out('7801074009986787853');" style=""> 525                                 mWallpapersView.getChildAt(mSelectedIndex));                             </span>
<span class="-561940081499707422" onmouseenter="enter('-561940081499707422');" onmouseout="out('-561940081499707422');" style=""> 526                         setSystemWallpaperVisiblity(false);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527                     }                                                                                    </span>
<span class="-3420549157427558140" onmouseenter="enter('-3420549157427558140');" onmouseout="out('-3420549157427558140');" style=""> 528                     v.removeOnLayoutChangeListener(this);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 531         });                                                                                              </span>
<span  style=""> 532                                                                                                          </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 533         updateTileIndices();                                                                             </span>
<span  style=""> 534                                                                                                          </span>
<span class="1759508296475864781" onmouseenter="enter('1759508296475864781');" onmouseout="out('1759508296475864781');" style=""> 535         // Update the scroll for RTL                                                                     </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style=""> 536         initializeScrollForRtl();                                                                        </span>
<span  style=""> 537                                                                                                          </span>
<span class="8754677635152392755" onmouseenter="enter('8754677635152392755');" onmouseout="out('8754677635152392755');" style=""> 538         // Create smooth layout transitions for when items are deleted                                   </span>
<span class="-4930329743174539782" onmouseenter="enter('-4930329743174539782');" onmouseout="out('-4930329743174539782');" style=""> 539         final LayoutTransition transitioner = new LayoutTransition();                                    </span>
<span class="1485581076488552999" onmouseenter="enter('1485581076488552999');" onmouseout="out('1485581076488552999');" style=""> 540         transitioner.setDuration(200);                                                                   </span>
<span class="-2061924607669327428" onmouseenter="enter('-2061924607669327428');" onmouseout="out('-2061924607669327428');" style=""> 541         transitioner.setStartDelay(LayoutTransition.CHANGE_DISAPPEARING, 0);                             </span>
<span class="-3369306044554735862" onmouseenter="enter('-3369306044554735862');" onmouseout="out('-3369306044554735862');" style=""> 542         transitioner.setAnimator(LayoutTransition.DISAPPEARING, null);                                   </span>
<span class="3452611492242513009" onmouseenter="enter('3452611492242513009');" onmouseout="out('3452611492242513009');" style=""> 543         mWallpapersView.setLayoutTransition(transitioner);                                               </span>
<span  style=""> 544                                                                                                          </span>
<span class="-6690949822417478966" onmouseenter="enter('-6690949822417478966');" onmouseout="out('-6690949822417478966');" style=""> 545         // Action bar                                                                                    </span>
<span class="-3883215512946619745" onmouseenter="enter('-3883215512946619745');" onmouseout="out('-3883215512946619745');" style=""> 546         // Show the custom action bar view                                                               </span>
<span class="-1117346380634877983" onmouseenter="enter('-1117346380634877983');" onmouseout="out('-1117346380634877983');" style=""> 547         final ActionBar actionBar = getActionBar();                                                      </span>
<span class="2297539018706653511" onmouseenter="enter('2297539018706653511');" onmouseout="out('2297539018706653511');" style=""> 548         actionBar.setCustomView(R.layout.actionbar_set_wallpaper);                                       </span>
<span class="-1240601639018603710" onmouseenter="enter('-1240601639018603710');" onmouseout="out('-1240601639018603710');" style=""> 549         actionBar.getCustomView().setOnClickListener(                                                    </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style=""> 550                 new View.OnClickListener() {                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 551                     @Override                                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 552                     public void onClick(View v) {                                                        </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 553                         if (mSelectedTile != null) {                                                     </span>
<span class="4798294102843957642" onmouseenter="enter('4798294102843957642');" onmouseout="out('4798294102843957642');" style=""> 554                             WallpaperTileInfo info = (WallpaperTileInfo) mSelectedTile.getTag();         </span>
<span class="8585600142234583597" onmouseenter="enter('8585600142234583597');" onmouseout="out('8585600142234583597');" style=""> 555                             info.onSave(WallpaperPickerActivity.this);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 556                         } else {                                                                         </span>
<span class="-2325831004577352356" onmouseenter="enter('-2325831004577352356');" onmouseout="out('-2325831004577352356');" style=""> 557                             // no tile was selected, so we just finish the activity and go back          </span>
<span class="1247430566664665360" onmouseenter="enter('1247430566664665360');" onmouseout="out('1247430566664665360');" style=""> 558                             setResult(Activity.RESULT_OK);                                               </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 559                             finish();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 562                 });                                                                                      </span>
<span class="-1738970073048232250" onmouseenter="enter('-1738970073048232250');" onmouseout="out('-1738970073048232250');" style=""> 563         mSetWallpaperButton = findViewById(R.id.set_wallpaper_button);                                   </span>
<span  style=""> 564                                                                                                          </span>
<span class="-4302888392572327731" onmouseenter="enter('-4302888392572327731');" onmouseout="out('-4302888392572327731');" style=""> 565         // CAB for deleting items                                                                        </span>
<span class="-127999484312805671" onmouseenter="enter('-127999484312805671');" onmouseout="out('-127999484312805671');" style=""> 566         mActionModeCallback = new ActionMode.Callback() {                                                </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 567             // Called when the action mode is created; startActionMode() was called                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 568             @Override                                                                                    </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 569             public boolean onCreateActionMode(ActionMode mode, Menu menu) {                              </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 570                 // Inflate a menu resource providing context menu items                                  </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 571                 MenuInflater inflater = mode.getMenuInflater();                                          </span>
<span class="-6388875521407758282" onmouseenter="enter('-6388875521407758282');" onmouseout="out('-6388875521407758282');" style=""> 572                 inflater.inflate(R.menu.cab_delete_wallpapers, menu);                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 573                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574             }                                                                                            </span>
<span  style=""> 575                                                                                                          </span>
<span class="870397737873592214" onmouseenter="enter('870397737873592214');" onmouseout="out('870397737873592214');" style=""> 576             private int numCheckedItems() {                                                              </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 577                 int childCount = mWallpapersView.getChildCount();                                        </span>
<span class="-6883723717821950794" onmouseenter="enter('-6883723717821950794');" onmouseout="out('-6883723717821950794');" style=""> 578                 int numCheckedItems = 0;                                                                 </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 579                 for (int i = 0; i &lt; childCount; i++) {                                                   </span>
<span class="-3282833298704710263" onmouseenter="enter('-3282833298704710263');" onmouseout="out('-3282833298704710263');" style=""> 580                     CheckableFrameLayout c = (CheckableFrameLayout) mWallpapersView.getChildAt(i);       </span>
<span class="-2798719840605914218" onmouseenter="enter('-2798719840605914218');" onmouseout="out('-2798719840605914218');" style=""> 581                     if (c.isChecked()) {                                                                 </span>
<span class="-1438188096822969363" onmouseenter="enter('-1438188096822969363');" onmouseout="out('-1438188096822969363');" style=""> 582                         numCheckedItems++;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                 }                                                                                        </span>
<span class="681861663930848334" onmouseenter="enter('681861663930848334');" onmouseout="out('681861663930848334');" style=""> 585                 return numCheckedItems;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586             }                                                                                            </span>
<span  style=""> 587                                                                                                          </span>
<span class="-4908427375201257296" onmouseenter="enter('-4908427375201257296');" onmouseout="out('-4908427375201257296');" style=""> 588             // Called each time the action mode is shown. Always called after onCreateActionMode,        </span>
<span class="9007433729996553145" onmouseenter="enter('9007433729996553145');" onmouseout="out('9007433729996553145');" style=""> 589             // but may be called multiple times if the mode is invalidated.                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 590             @Override                                                                                    </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 591             public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                             </span>
<span class="-5101330785437320191" onmouseenter="enter('-5101330785437320191');" onmouseout="out('-5101330785437320191');" style=""> 592                 int numCheckedItems = numCheckedItems();                                                 </span>
<span class="8659757951446504827" onmouseenter="enter('8659757951446504827');" onmouseout="out('8659757951446504827');" style=""> 593                 if (numCheckedItems == 0) {                                                              </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 594                     mode.finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 595                     return true;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 596                 } else {                                                                                 </span>
<span class="-2320150819220019446" onmouseenter="enter('-2320150819220019446');" onmouseout="out('-2320150819220019446');" style=""> 597                     mode.setTitle(getResources().getQuantityString(                                      </span>
<span class="3298697623442124911" onmouseenter="enter('3298697623442124911');" onmouseout="out('3298697623442124911');" style=""> 598                             R.plurals.number_of_items_selected, numCheckedItems, numCheckedItems));      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 599                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601             }                                                                                            </span>
<span  style=""> 602                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 603             // Called when the user selects a contextual menu item                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 604             @Override                                                                                    </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 605             public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                         </span>
<span class="-2371175833572540313" onmouseenter="enter('-2371175833572540313');" onmouseout="out('-2371175833572540313');" style=""> 606                 int itemId = item.getItemId();                                                           </span>
<span class="-5718447720547061668" onmouseenter="enter('-5718447720547061668');" onmouseout="out('-5718447720547061668');" style=""> 607                 if (itemId == R.id.menu_delete) {                                                        </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 608                     int childCount = mWallpapersView.getChildCount();                                    </span>
<span class="-7751152015140741745" onmouseenter="enter('-7751152015140741745');" onmouseout="out('-7751152015140741745');" style=""> 609                     ArrayList&lt;View&gt; viewsToRemove = new ArrayList&lt;View&gt;();                               </span>
<span class="1584722444517724282" onmouseenter="enter('1584722444517724282');" onmouseout="out('1584722444517724282');" style=""> 610                     boolean selectedTileRemoved = false;                                                 </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 611                     for (int i = 0; i &lt; childCount; i++) {                                               </span>
<span class="7507653399143335627" onmouseenter="enter('7507653399143335627');" onmouseout="out('7507653399143335627');" style=""> 612                         CheckableFrameLayout c =                                                         </span>
<span class="3931690413303975782" onmouseenter="enter('3931690413303975782');" onmouseout="out('3931690413303975782');" style=""> 613                                 (CheckableFrameLayout) mWallpapersView.getChildAt(i);                    </span>
<span class="-2798719840605914218" onmouseenter="enter('-2798719840605914218');" onmouseout="out('-2798719840605914218');" style=""> 614                         if (c.isChecked()) {                                                             </span>
<span class="8039758652893746202" onmouseenter="enter('8039758652893746202');" onmouseout="out('8039758652893746202');" style=""> 615                             WallpaperTileInfo info = (WallpaperTileInfo) c.getTag();                     </span>
<span class="-5365064256543243978" onmouseenter="enter('-5365064256543243978');" onmouseout="out('-5365064256543243978');" style=""> 616                             info.onDelete(WallpaperPickerActivity.this);                                 </span>
<span class="7539132712862314960" onmouseenter="enter('7539132712862314960');" onmouseout="out('7539132712862314960');" style=""> 617                             viewsToRemove.add(c);                                                        </span>
<span class="3452999234966632783" onmouseenter="enter('3452999234966632783');" onmouseout="out('3452999234966632783');" style=""> 618                             if (i == mSelectedIndex) {                                                   </span>
<span class="4038374084094048370" onmouseenter="enter('4038374084094048370');" onmouseout="out('4038374084094048370');" style=""> 619                                 selectedTileRemoved = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622                     }                                                                                    </span>
<span class="-2799961312229830756" onmouseenter="enter('-2799961312229830756');" onmouseout="out('-2799961312229830756');" style=""> 623                     for (View v : viewsToRemove) {                                                       </span>
<span class="5094713957757001442" onmouseenter="enter('5094713957757001442');" onmouseout="out('5094713957757001442');" style=""> 624                         mWallpapersView.removeView(v);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625                     }                                                                                    </span>
<span class="-3217878254483945199" onmouseenter="enter('-3217878254483945199');" onmouseout="out('-3217878254483945199');" style=""> 626                     if (selectedTileRemoved) {                                                           </span>
<span class="-7240011280640645397" onmouseenter="enter('-7240011280640645397');" onmouseout="out('-7240011280640645397');" style=""> 627                         mSelectedIndex = -1;                                                             </span>
<span class="-5936001525760364202" onmouseenter="enter('-5936001525760364202');" onmouseout="out('-5936001525760364202');" style=""> 628                         mSelectedTile = null;                                                            </span>
<span class="125091680216115960" onmouseenter="enter('125091680216115960');" onmouseout="out('125091680216115960');" style=""> 629                         setSystemWallpaperVisiblity(true);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630                     }                                                                                    </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 631                     updateTileIndices();                                                                 </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 632                     mode.finish(); // Action picked, so close the CAB                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 633                     return true;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 634                 } else {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 635                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637             }                                                                                            </span>
<span  style=""> 638                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 639             // Called when the user exits the action mode                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 640             @Override                                                                                    </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 641             public void onDestroyActionMode(ActionMode mode) {                                           </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 642                 int childCount = mWallpapersView.getChildCount();                                        </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 643                 for (int i = 0; i &lt; childCount; i++) {                                                   </span>
<span class="-3282833298704710263" onmouseenter="enter('-3282833298704710263');" onmouseout="out('-3282833298704710263');" style=""> 644                     CheckableFrameLayout c = (CheckableFrameLayout) mWallpapersView.getChildAt(i);       </span>
<span class="1014221111310174159" onmouseenter="enter('1014221111310174159');" onmouseout="out('1014221111310174159');" style=""> 645                     c.setChecked(false);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646                 }                                                                                        </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 647                 if (mSelectedTile != null) {                                                             </span>
<span class="9135117288134691920" onmouseenter="enter('9135117288134691920');" onmouseout="out('9135117288134691920');" style=""> 648                     mSelectedTile.setSelected(true);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649                 }                                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 650                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 652         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653     }                                                                                                    </span>
<span  style=""> 654                                                                                                          </span>
<span class="-1506115177228939080" onmouseenter="enter('-1506115177228939080');" onmouseout="out('-1506115177228939080');" style=""> 655     private void selectTile(View v) {                                                                    </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 656         if (mSelectedTile != null) {                                                                     </span>
<span class="-2066645340429178571" onmouseenter="enter('-2066645340429178571');" onmouseout="out('-2066645340429178571');" style=""> 657             mSelectedTile.setSelected(false);                                                            </span>
<span class="-5936001525760364202" onmouseenter="enter('-5936001525760364202');" onmouseout="out('-5936001525760364202');" style=""> 658             mSelectedTile = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659         }                                                                                                </span>
<span class="-416733230307533043" onmouseenter="enter('-416733230307533043');" onmouseout="out('-416733230307533043');" style=""> 660         mSelectedTile = v;                                                                               </span>
<span class="3995602257861476425" onmouseenter="enter('3995602257861476425');" onmouseout="out('3995602257861476425');" style=""> 661         v.setSelected(true);                                                                             </span>
<span class="-6325232721939244615" onmouseenter="enter('-6325232721939244615');" onmouseout="out('-6325232721939244615');" style=""> 662         mSelectedIndex = mWallpapersView.indexOfChild(v);                                                </span>
<span class="-7405161307855549247" onmouseenter="enter('-7405161307855549247');" onmouseout="out('-7405161307855549247');" style=""> 663         // TODO: Remove this once the accessibility framework and                                        </span>
<span class="-4753818808741308090" onmouseenter="enter('-4753818808741308090');" onmouseout="out('-4753818808741308090');" style=""> 664         // services have better support for selection state.                                             </span>
<span class="2204888622725665866" onmouseenter="enter('2204888622725665866');" onmouseout="out('2204888622725665866');" style=""> 665         v.announceForAccessibility(                                                                      </span>
<span class="2493998402613828012" onmouseenter="enter('2493998402613828012');" onmouseout="out('2493998402613828012');" style=""> 666                 getString(R.string.announce_selection, v.getContentDescription()));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667     }                                                                                                    </span>
<span  style=""> 668                                                                                                          </span>
<span class="3613777925188016048" onmouseenter="enter('3613777925188016048');" onmouseout="out('3613777925188016048');" style=""> 669     private void initializeScrollForRtl() {                                                              </span>
<span class="-1273765683152014823" onmouseenter="enter('-1273765683152014823');" onmouseout="out('-1273765683152014823');" style=""> 670         final HorizontalScrollView scroll =                                                              </span>
<span class="-7037969170098618839" onmouseenter="enter('-7037969170098618839');" onmouseout="out('-7037969170098618839');" style=""> 671                 (HorizontalScrollView) findViewById(R.id.wallpaper_scroll_container);                    </span>
<span  style=""> 672                                                                                                          </span>
<span class="1955425449244494245" onmouseenter="enter('1955425449244494245');" onmouseout="out('1955425449244494245');" style=""> 673         if (scroll.getLayoutDirection() == View.LAYOUT_DIRECTION_RTL) {                                  </span>
<span class="-1890364990500798192" onmouseenter="enter('-1890364990500798192');" onmouseout="out('-1890364990500798192');" style=""> 674             final ViewTreeObserver observer = scroll.getViewTreeObserver();                              </span>
<span class="6394814703996271835" onmouseenter="enter('6394814703996271835');" onmouseout="out('6394814703996271835');" style=""> 675             observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {                            </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 676                 public void onGlobalLayout() {                                                           </span>
<span class="-62510142979053251" onmouseenter="enter('-62510142979053251');" onmouseout="out('-62510142979053251');" style=""> 677                     LinearLayout masterWallpaperList =                                                   </span>
<span class="149389540385452124" onmouseenter="enter('149389540385452124');" onmouseout="out('149389540385452124');" style=""> 678                             (LinearLayout) findViewById(R.id.master_wallpaper_list);                     </span>
<span class="-4254848503069544361" onmouseenter="enter('-4254848503069544361');" onmouseout="out('-4254848503069544361');" style=""> 679                     scroll.scrollTo(masterWallpaperList.getWidth(), 0);                                  </span>
<span class="358343610071411190" onmouseenter="enter('358343610071411190');" onmouseout="out('358343610071411190');" style=""> 680                     scroll.getViewTreeObserver().removeOnGlobalLayoutListener(this);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 682             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684     }                                                                                                    </span>
<span  style=""> 685                                                                                                          </span>
<span class="664193847003739221" onmouseenter="enter('664193847003739221');" onmouseout="out('664193847003739221');" style=""> 686     protected Bitmap getThumbnailOfLastPhoto() {                                                         </span>
<span class="-456509780661296989" onmouseenter="enter('-456509780661296989');" onmouseout="out('-456509780661296989');" style=""> 687         Cursor cursor = MediaStore.Images.Media.query(getContentResolver(),                              </span>
<span class="7103802485324583534" onmouseenter="enter('7103802485324583534');" onmouseout="out('7103802485324583534');" style=""> 688                 MediaStore.Images.Media.EXTERNAL_CONTENT_URI,                                            </span>
<span class="-6614818697721200540" onmouseenter="enter('-6614818697721200540');" onmouseout="out('-6614818697721200540');" style=""> 689                 new String[] { MediaStore.Images.ImageColumns._ID,                                       </span>
<span class="-9180764227414027069" onmouseenter="enter('-9180764227414027069');" onmouseout="out('-9180764227414027069');" style=""> 690                     MediaStore.Images.ImageColumns.DATE_TAKEN},                                          </span>
<span class="627696156117655587" onmouseenter="enter('627696156117655587');" onmouseout="out('627696156117655587');" style=""> 691                 null, null, MediaStore.Images.ImageColumns.DATE_TAKEN + &quot; DESC LIMIT 1&quot;);                </span>
<span  style=""> 692                                                                                                          </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style=""> 693         Bitmap thumb = null;                                                                             </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 694         if (cursor != null) {                                                                            </span>
<span class="-3461632027345581546" onmouseenter="enter('-3461632027345581546');" onmouseout="out('-3461632027345581546');" style=""> 695             if (cursor.moveToNext()) {                                                                   </span>
<span class="-1657892521407389619" onmouseenter="enter('-1657892521407389619');" onmouseout="out('-1657892521407389619');" style=""> 696                 int id = cursor.getInt(0);                                                               </span>
<span class="-1463225791006789159" onmouseenter="enter('-1463225791006789159');" onmouseout="out('-1463225791006789159');" style=""> 697                 thumb = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(),                  </span>
<span class="-3467727521120241070" onmouseenter="enter('-3467727521120241070');" onmouseout="out('-3467727521120241070');" style=""> 698                         id, MediaStore.Images.Thumbnails.MINI_KIND, null);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699             }                                                                                            </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 700             cursor.close();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701         }                                                                                                </span>
<span class="2989265115448010726" onmouseenter="enter('2989265115448010726');" onmouseout="out('2989265115448010726');" style=""> 702         return thumb;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703     }                                                                                                    </span>
<span  style=""> 704                                                                                                          </span>
<span class="-531063095242678892" onmouseenter="enter('-531063095242678892');" onmouseout="out('-531063095242678892');" style=""> 705     protected void onStop() {                                                                            </span>
<span class="-4376279779571809033" onmouseenter="enter('-4376279779571809033');" onmouseout="out('-4376279779571809033');" style=""> 706         super.onStop();                                                                                  </span>
<span class="-2578053662916702311" onmouseenter="enter('-2578053662916702311');" onmouseout="out('-2578053662916702311');" style=""> 707         mWallpaperStrip = findViewById(R.id.wallpaper_strip);                                            </span>
<span class="2061286900587029071" onmouseenter="enter('2061286900587029071');" onmouseout="out('2061286900587029071');" style=""> 708         if (mWallpaperStrip.getAlpha() &lt; 1f) {                                                           </span>
<span class="-7993736133733899989" onmouseenter="enter('-7993736133733899989');" onmouseout="out('-7993736133733899989');" style=""> 709             mWallpaperStrip.setAlpha(1f);                                                                </span>
<span class="2849585250197552354" onmouseenter="enter('2849585250197552354');" onmouseout="out('2849585250197552354');" style=""> 710             mWallpaperStrip.setVisibility(View.VISIBLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712     }                                                                                                    </span>
<span  style=""> 713                                                                                                          </span>
<span class="2923374410094392392" onmouseenter="enter('2923374410094392392');" onmouseout="out('2923374410094392392');" style=""> 714     protected void onSaveInstanceState(Bundle outState) {                                                </span>
<span class="5676996045526496118" onmouseenter="enter('5676996045526496118');" onmouseout="out('5676996045526496118');" style=""> 715         outState.putParcelableArrayList(TEMP_WALLPAPER_TILES, mTempWallpaperTiles);                      </span>
<span class="4842173451749245020" onmouseenter="enter('4842173451749245020');" onmouseout="out('4842173451749245020');" style=""> 716         outState.putInt(SELECTED_INDEX, mSelectedIndex);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717     }                                                                                                    </span>
<span  style=""> 718                                                                                                          </span>
<span class="-2094527111288901138" onmouseenter="enter('-2094527111288901138');" onmouseout="out('-2094527111288901138');" style=""> 719     protected void onRestoreInstanceState(Bundle savedInstanceState) {                                   </span>
<span class="9097341058798999924" onmouseenter="enter('9097341058798999924');" onmouseout="out('9097341058798999924');" style=""> 720         ArrayList&lt;Uri&gt; uris = savedInstanceState.getParcelableArrayList(TEMP_WALLPAPER_TILES);           </span>
<span class="882746572331317232" onmouseenter="enter('882746572331317232');" onmouseout="out('882746572331317232');" style=""> 721         for (Uri uri : uris) {                                                                           </span>
<span class="309442566935810090" onmouseenter="enter('309442566935810090');" onmouseout="out('309442566935810090');" style=""> 722             addTemporaryWallpaperTile(uri, true);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723         }                                                                                                </span>
<span class="2728496215931290524" onmouseenter="enter('2728496215931290524');" onmouseout="out('2728496215931290524');" style=""> 724         mSelectedIndex = savedInstanceState.getInt(SELECTED_INDEX, -1);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725     }                                                                                                    </span>
<span  style=""> 726                                                                                                          </span>
<span class="-3395251471996624785" onmouseenter="enter('-3395251471996624785');" onmouseout="out('-3395251471996624785');" style=""> 727     private void populateWallpapersFromAdapter(ViewGroup parent, BaseAdapter adapter,                    </span>
<span class="-3888515017020188466" onmouseenter="enter('-3888515017020188466');" onmouseout="out('-3888515017020188466');" style=""> 728             boolean addLongPressHandler) {                                                               </span>
<span class="-4655808919273667933" onmouseenter="enter('-4655808919273667933');" onmouseout="out('-4655808919273667933');" style=""> 729         for (int i = 0; i &lt; adapter.getCount(); i++) {                                                   </span>
<span class="-1082551966183171247" onmouseenter="enter('-1082551966183171247');" onmouseout="out('-1082551966183171247');" style=""> 730             FrameLayout thumbnail = (FrameLayout) adapter.getView(i, null, parent);                      </span>
<span class="-2539369959542405754" onmouseenter="enter('-2539369959542405754');" onmouseout="out('-2539369959542405754');" style=""> 731             parent.addView(thumbnail, i);                                                                </span>
<span class="-8640688129381962578" onmouseenter="enter('-8640688129381962578');" onmouseout="out('-8640688129381962578');" style=""> 732             WallpaperTileInfo info = (WallpaperTileInfo) adapter.getItem(i);                             </span>
<span class="-8513774863936305691" onmouseenter="enter('-8513774863936305691');" onmouseout="out('-8513774863936305691');" style=""> 733             thumbnail.setTag(info);                                                                      </span>
<span class="835749422138936601" onmouseenter="enter('835749422138936601');" onmouseout="out('835749422138936601');" style=""> 734             info.setView(thumbnail);                                                                     </span>
<span class="-753060270538025028" onmouseenter="enter('-753060270538025028');" onmouseout="out('-753060270538025028');" style=""> 735             if (addLongPressHandler) {                                                                   </span>
<span class="-7973486700261140064" onmouseenter="enter('-7973486700261140064');" onmouseout="out('-7973486700261140064');" style=""> 736                 addLongPressHandler(thumbnail);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737             }                                                                                            </span>
<span class="2610544249132778797" onmouseenter="enter('2610544249132778797');" onmouseout="out('2610544249132778797');" style=""> 738             thumbnail.setOnClickListener(mThumbnailOnClickListener);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740     }                                                                                                    </span>
<span  style=""> 741                                                                                                          </span>
<span class="7174283580582519873" onmouseenter="enter('7174283580582519873');" onmouseout="out('7174283580582519873');" style=""> 742     private void updateTileIndices() {                                                                   </span>
<span class="-1043783805889159162" onmouseenter="enter('-1043783805889159162');" onmouseout="out('-1043783805889159162');" style=""> 743         LinearLayout masterWallpaperList = (LinearLayout) findViewById(R.id.master_wallpaper_list);      </span>
<span class="259886241860069923" onmouseenter="enter('259886241860069923');" onmouseout="out('259886241860069923');" style=""> 744         final int childCount = masterWallpaperList.getChildCount();                                      </span>
<span class="8480962759227506322" onmouseenter="enter('8480962759227506322');" onmouseout="out('8480962759227506322');" style=""> 745         final Resources res = getResources();                                                            </span>
<span  style=""> 746                                                                                                          </span>
<span class="3521054778015791399" onmouseenter="enter('3521054778015791399');" onmouseout="out('3521054778015791399');" style=""> 747         // Do two passes; the first pass gets the total number of tiles                                  </span>
<span class="5938103209458987108" onmouseenter="enter('5938103209458987108');" onmouseout="out('5938103209458987108');" style=""> 748         int numTiles = 0;                                                                                </span>
<span class="5019589255138395185" onmouseenter="enter('5019589255138395185');" onmouseout="out('5019589255138395185');" style=""> 749         for (int passNum = 0; passNum &lt; 2; passNum++) {                                                  </span>
<span class="1572996252094865016" onmouseenter="enter('1572996252094865016');" onmouseout="out('1572996252094865016');" style=""> 750             int tileIndex = 0;                                                                           </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 751             for (int i = 0; i &lt; childCount; i++) {                                                       </span>
<span class="4123953723067944503" onmouseenter="enter('4123953723067944503');" onmouseout="out('4123953723067944503');" style=""> 752                 View child = masterWallpaperList.getChildAt(i);                                          </span>
<span class="-5829345887602296444" onmouseenter="enter('-5829345887602296444');" onmouseout="out('-5829345887602296444');" style=""> 753                 LinearLayout subList;                                                                    </span>
<span  style=""> 754                                                                                                          </span>
<span class="3605475243255362068" onmouseenter="enter('3605475243255362068');" onmouseout="out('3605475243255362068');" style=""> 755                 int subListStart;                                                                        </span>
<span class="-8450536843674173357" onmouseenter="enter('-8450536843674173357');" onmouseout="out('-8450536843674173357');" style=""> 756                 int subListEnd;                                                                          </span>
<span class="6806008433574303890" onmouseenter="enter('6806008433574303890');" onmouseout="out('6806008433574303890');" style=""> 757                 if (child.getTag() instanceof WallpaperTileInfo) {                                       </span>
<span class="-5389769772346214913" onmouseenter="enter('-5389769772346214913');" onmouseout="out('-5389769772346214913');" style=""> 758                     subList = masterWallpaperList;                                                       </span>
<span class="5694298299445467842" onmouseenter="enter('5694298299445467842');" onmouseout="out('5694298299445467842');" style=""> 759                     subListStart = i;                                                                    </span>
<span class="775032750631300414" onmouseenter="enter('775032750631300414');" onmouseout="out('775032750631300414');" style=""> 760                     subListEnd = i + 1;                                                                  </span>
<span class="-1510097346886829055" onmouseenter="enter('-1510097346886829055');" onmouseout="out('-1510097346886829055');" style=""> 761                 } else { // if (child instanceof LinearLayout) {                                         </span>
<span class="7675569892434777627" onmouseenter="enter('7675569892434777627');" onmouseout="out('7675569892434777627');" style=""> 762                     subList = (LinearLayout) child;                                                      </span>
<span class="-788862889599952363" onmouseenter="enter('-788862889599952363');" onmouseout="out('-788862889599952363');" style=""> 763                     subListStart = 0;                                                                    </span>
<span class="-2292138033159846006" onmouseenter="enter('-2292138033159846006');" onmouseout="out('-2292138033159846006');" style=""> 764                     subListEnd = subList.getChildCount();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765                 }                                                                                        </span>
<span  style=""> 766                                                                                                          </span>
<span class="-3188102189745806183" onmouseenter="enter('-3188102189745806183');" onmouseout="out('-3188102189745806183');" style=""> 767                 for (int j = subListStart; j &lt; subListEnd; j++) {                                        </span>
<span class="-46452018360091707" onmouseenter="enter('-46452018360091707');" onmouseout="out('-46452018360091707');" style=""> 768                     WallpaperTileInfo info = (WallpaperTileInfo) subList.getChildAt(j).getTag();         </span>
<span class="-7564864828845128447" onmouseenter="enter('-7564864828845128447');" onmouseout="out('-7564864828845128447');" style=""> 769                     if (info.isNamelessWallpaper()) {                                                    </span>
<span class="-1910212611706289773" onmouseenter="enter('-1910212611706289773');" onmouseout="out('-1910212611706289773');" style=""> 770                         if (passNum == 0) {                                                              </span>
<span class="2002385288571403014" onmouseenter="enter('2002385288571403014');" onmouseout="out('2002385288571403014');" style=""> 771                             numTiles++;                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 772                         } else {                                                                         </span>
<span class="2118637819721096111" onmouseenter="enter('2118637819721096111');" onmouseout="out('2118637819721096111');" style=""> 773                             CharSequence label = res.getString(                                          </span>
<span class="-2397331067750563254" onmouseenter="enter('-2397331067750563254');" onmouseout="out('-2397331067750563254');" style=""> 774                                     R.string.wallpaper_accessibility_name, ++tileIndex, numTiles);       </span>
<span class="176872867902725227" onmouseenter="enter('176872867902725227');" onmouseout="out('176872867902725227');" style=""> 775                             info.onIndexUpdated(label);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781     }                                                                                                    </span>
<span  style=""> 782                                                                                                          </span>
<span class="2510156197068194941" onmouseenter="enter('2510156197068194941');" onmouseout="out('2510156197068194941');" style=""> 783     private static Point getDefaultThumbnailSize(Resources res) {                                        </span>
<span class="-6874335415328293767" onmouseenter="enter('-6874335415328293767');" onmouseout="out('-6874335415328293767');" style=""> 784         return new Point(res.getDimensionPixelSize(R.dimen.wallpaperThumbnailWidth),                     </span>
<span class="9213584837082607543" onmouseenter="enter('9213584837082607543');" onmouseout="out('9213584837082607543');" style=""> 785                 res.getDimensionPixelSize(R.dimen.wallpaperThumbnailHeight));                            </span>
<span  style=""> 786                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787     }                                                                                                    </span>
<span  style=""> 788                                                                                                          </span>
<span class="-2190537902917228056" onmouseenter="enter('-2190537902917228056');" onmouseout="out('-2190537902917228056');" style=""> 789     private static Bitmap createThumbnail(Point size, Context context, Uri uri, byte[] imageBytes,       </span>
<span class="1462494306554119473" onmouseenter="enter('1462494306554119473');" onmouseout="out('1462494306554119473');" style=""> 790             Resources res, int resId, int rotation, boolean leftAligned) {                               </span>
<span class="2197190995614732863" onmouseenter="enter('2197190995614732863');" onmouseout="out('2197190995614732863');" style=""> 791         int width = size.x;                                                                              </span>
<span class="1656572652603557172" onmouseenter="enter('1656572652603557172');" onmouseout="out('1656572652603557172');" style=""> 792         int height = size.y;                                                                             </span>
<span  style=""> 793                                                                                                          </span>
<span class="7349190684690785447" onmouseenter="enter('7349190684690785447');" onmouseout="out('7349190684690785447');" style=""> 794         BitmapCropTask cropTask;                                                                         </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style=""> 795         if (uri != null) {                                                                               </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 796             cropTask = new BitmapCropTask(                                                               </span>
<span class="8478899448975750390" onmouseenter="enter('8478899448975750390');" onmouseout="out('8478899448975750390');" style=""> 797                     context, uri, null, rotation, width, height, false, true, null);                     </span>
<span class="3032403540229941925" onmouseenter="enter('3032403540229941925');" onmouseout="out('3032403540229941925');" style=""> 798         } else if (imageBytes != null) {                                                                 </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 799             cropTask = new BitmapCropTask(                                                               </span>
<span class="4933078725267557507" onmouseenter="enter('4933078725267557507');" onmouseout="out('4933078725267557507');" style=""> 800                     imageBytes, null, rotation, width, height, false, true, null);                       </span>
<span class="-6240460135729763291" onmouseenter="enter('-6240460135729763291');" onmouseout="out('-6240460135729763291');" style=""> 801         }  else {                                                                                        </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 802             cropTask = new BitmapCropTask(                                                               </span>
<span class="8004600037434906454" onmouseenter="enter('8004600037434906454');" onmouseout="out('8004600037434906454');" style=""> 803                     context, res, resId, null, rotation, width, height, false, true, null);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804         }                                                                                                </span>
<span class="-6453579906380884917" onmouseenter="enter('-6453579906380884917');" onmouseout="out('-6453579906380884917');" style=""> 805         Point bounds = cropTask.getImageBounds();                                                        </span>
<span class="-3295188915583570787" onmouseenter="enter('-3295188915583570787');" onmouseout="out('-3295188915583570787');" style=""> 806         if (bounds == null || bounds.x == 0 || bounds.y == 0) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 807             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808         }                                                                                                </span>
<span  style=""> 809                                                                                                          </span>
<span class="6879132970877670755" onmouseenter="enter('6879132970877670755');" onmouseout="out('6879132970877670755');" style=""> 810         Matrix rotateMatrix = new Matrix();                                                              </span>
<span class="-6437688486507158764" onmouseenter="enter('-6437688486507158764');" onmouseout="out('-6437688486507158764');" style=""> 811         rotateMatrix.setRotate(rotation);                                                                </span>
<span class="1369286570105688669" onmouseenter="enter('1369286570105688669');" onmouseout="out('1369286570105688669');" style=""> 812         float[] rotatedBounds = new float[] { bounds.x, bounds.y };                                      </span>
<span class="9124648468601119627" onmouseenter="enter('9124648468601119627');" onmouseout="out('9124648468601119627');" style=""> 813         rotateMatrix.mapPoints(rotatedBounds);                                                           </span>
<span class="-4005609192970260775" onmouseenter="enter('-4005609192970260775');" onmouseout="out('-4005609192970260775');" style=""> 814         rotatedBounds[0] = Math.abs(rotatedBounds[0]);                                                   </span>
<span class="8902635337510419497" onmouseenter="enter('8902635337510419497');" onmouseout="out('8902635337510419497');" style=""> 815         rotatedBounds[1] = Math.abs(rotatedBounds[1]);                                                   </span>
<span  style=""> 816                                                                                                          </span>
<span class="6089223768568690792" onmouseenter="enter('6089223768568690792');" onmouseout="out('6089223768568690792');" style=""> 817         RectF cropRect = WallpaperCropActivity.getMaxCropRect(                                           </span>
<span class="1229429396446044184" onmouseenter="enter('1229429396446044184');" onmouseout="out('1229429396446044184');" style=""> 818                 (int) rotatedBounds[0], (int) rotatedBounds[1], width, height, leftAligned);             </span>
<span class="2176872110091109412" onmouseenter="enter('2176872110091109412');" onmouseout="out('2176872110091109412');" style=""> 819         cropTask.setCropBounds(cropRect);                                                                </span>
<span  style=""> 820                                                                                                          </span>
<span class="4092370609310845926" onmouseenter="enter('4092370609310845926');" onmouseout="out('4092370609310845926');" style=""> 821         if (cropTask.cropBitmap()) {                                                                     </span>
<span class="5327784893723541266" onmouseenter="enter('5327784893723541266');" onmouseout="out('5327784893723541266');" style=""> 822             return cropTask.getCroppedBitmap();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 823         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 824             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826     }                                                                                                    </span>
<span  style=""> 827                                                                                                          </span>
<span class="-1009224458959098214" onmouseenter="enter('-1009224458959098214');" onmouseout="out('-1009224458959098214');" style=""> 828     private void addTemporaryWallpaperTile(final Uri uri, boolean fromRestore) {                         </span>
<span class="-901651268089518848" onmouseenter="enter('-901651268089518848');" onmouseout="out('-901651268089518848');" style=""> 829         mTempWallpaperTiles.add(uri);                                                                    </span>
<span class="372124520658648675" onmouseenter="enter('372124520658648675');" onmouseout="out('372124520658648675');" style=""> 830         // Add a tile for the image picked from Gallery                                                  </span>
<span class="6770827460764873580" onmouseenter="enter('6770827460764873580');" onmouseout="out('6770827460764873580');" style=""> 831         final FrameLayout pickedImageThumbnail = (FrameLayout) getLayoutInflater().                      </span>
<span class="-2679323654422550151" onmouseenter="enter('-2679323654422550151');" onmouseout="out('-2679323654422550151');" style=""> 832                 inflate(R.layout.wallpaper_picker_item, mWallpapersView, false);                         </span>
<span class="4529673580196202338" onmouseenter="enter('4529673580196202338');" onmouseout="out('4529673580196202338');" style=""> 833         pickedImageThumbnail.setVisibility(View.GONE);                                                   </span>
<span class="2199584589147075372" onmouseenter="enter('2199584589147075372');" onmouseout="out('2199584589147075372');" style=""> 834         setWallpaperItemPaddingToZero(pickedImageThumbnail);                                             </span>
<span class="8928625334369603982" onmouseenter="enter('8928625334369603982');" onmouseout="out('8928625334369603982');" style=""> 835         mWallpapersView.addView(pickedImageThumbnail, 0);                                                </span>
<span  style=""> 836                                                                                                          </span>
<span class="9047526722691301900" onmouseenter="enter('9047526722691301900');" onmouseout="out('9047526722691301900');" style=""> 837         // Load the thumbnail                                                                            </span>
<span class="-1676864995125815185" onmouseenter="enter('-1676864995125815185');" onmouseout="out('-1676864995125815185');" style=""> 838         final ImageView image = (ImageView) pickedImageThumbnail.findViewById(R.id.wallpaper_image);     </span>
<span class="8129808656284289108" onmouseenter="enter('8129808656284289108');" onmouseout="out('8129808656284289108');" style=""> 839         final Point defaultSize = getDefaultThumbnailSize(this.getResources());                          </span>
<span class="-6676868420171838472" onmouseenter="enter('-6676868420171838472');" onmouseout="out('-6676868420171838472');" style=""> 840         final Context context = this;                                                                    </span>
<span class="8654405571332173016" onmouseenter="enter('8654405571332173016');" onmouseout="out('8654405571332173016');" style=""> 841         new AsyncTask&lt;Void, Bitmap, Bitmap&gt;() {                                                          </span>
<span class="7887219832922845066" onmouseenter="enter('7887219832922845066');" onmouseout="out('7887219832922845066');" style=""> 842             protected Bitmap doInBackground(Void...args) {                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 843                 try {                                                                                    </span>
<span class="-4769478897982771202" onmouseenter="enter('-4769478897982771202');" onmouseout="out('-4769478897982771202');" style=""> 844                     int rotation = WallpaperCropActivity.getRotationFromExif(context, uri);              </span>
<span class="2925909394733733403" onmouseenter="enter('2925909394733733403');" onmouseout="out('2925909394733733403');" style=""> 845                     return createThumbnail(defaultSize, context, uri, null, null, 0, rotation, false);   </span>
<span class="3778995444801704265" onmouseenter="enter('3778995444801704265');" onmouseout="out('3778995444801704265');" style=""> 846                 } catch (SecurityException securityException) {                                          </span>
<span class="7955105844901253678" onmouseenter="enter('7955105844901253678');" onmouseout="out('7955105844901253678');" style=""> 847                     if (isDestroyed()) {                                                                 </span>
<span class="3681517849090038589" onmouseenter="enter('3681517849090038589');" onmouseout="out('3681517849090038589');" style=""> 848                         // Temporarily granted permissions are revoked when the activity                 </span>
<span class="3864158554531561229" onmouseenter="enter('3864158554531561229');" onmouseout="out('3864158554531561229');" style=""> 849                         // finishes, potentially resulting in a SecurityException here.                  </span>
<span class="-438989399743409142" onmouseenter="enter('-438989399743409142');" onmouseout="out('-438989399743409142');" style=""> 850                         // Even though {@link #isDestroyed} might also return true in different          </span>
<span class="-973013658270767082" onmouseenter="enter('-973013658270767082');" onmouseout="out('-973013658270767082');" style=""> 851                         // situations where the configuration changes, we are fine with                  </span>
<span class="-5779086303897471336" onmouseenter="enter('-5779086303897471336');" onmouseout="out('-5779086303897471336');" style=""> 852                         // catching these cases here as well.                                            </span>
<span class="-1034870772393865893" onmouseenter="enter('-1034870772393865893');" onmouseout="out('-1034870772393865893');" style=""> 853                         cancel(false);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 854                     } else {                                                                             </span>
<span class="-5531102788746271445" onmouseenter="enter('-5531102788746271445');" onmouseout="out('-5531102788746271445');" style=""> 855                         // otherwise it had a different cause and we throw it further                    </span>
<span class="-970795541645443852" onmouseenter="enter('-970795541645443852');" onmouseout="out('-970795541645443852');" style=""> 856                         throw securityException;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857                     }                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 858                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 860             }                                                                                            </span>
<span class="7796048425938803412" onmouseenter="enter('7796048425938803412');" onmouseout="out('7796048425938803412');" style=""> 861             protected void onPostExecute(Bitmap thumb) {                                                 </span>
<span class="1828997147583131577" onmouseenter="enter('1828997147583131577');" onmouseout="out('1828997147583131577');" style=""> 862                 if (!isCancelled() &amp;&amp; thumb != null) {                                                   </span>
<span class="-6059667076746804171" onmouseenter="enter('-6059667076746804171');" onmouseout="out('-6059667076746804171');" style=""> 863                     image.setImageBitmap(thumb);                                                         </span>
<span class="-1645377004023670491" onmouseenter="enter('-1645377004023670491');" onmouseout="out('-1645377004023670491');" style=""> 864                     Drawable thumbDrawable = image.getDrawable();                                        </span>
<span class="5749196251269587213" onmouseenter="enter('5749196251269587213');" onmouseout="out('5749196251269587213');" style=""> 865                     thumbDrawable.setDither(true);                                                       </span>
<span class="-2126867226419131669" onmouseenter="enter('-2126867226419131669');" onmouseout="out('-2126867226419131669');" style=""> 866                     pickedImageThumbnail.setVisibility(View.VISIBLE);                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 867                 } else {                                                                                 </span>
<span class="-2794690336414811741" onmouseenter="enter('-2794690336414811741');" onmouseout="out('-2794690336414811741');" style=""> 868                     Log.e(TAG, &quot;Error loading thumbnail for uri=&quot; + uri);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870             }                                                                                            </span>
<span class="3599702695275287338" onmouseenter="enter('3599702695275287338');" onmouseout="out('3599702695275287338');" style=""> 871         }.execute();                                                                                     </span>
<span  style=""> 872                                                                                                          </span>
<span class="8287492400642888670" onmouseenter="enter('8287492400642888670');" onmouseout="out('8287492400642888670');" style=""> 873         UriWallpaperInfo info = new UriWallpaperInfo(uri);                                               </span>
<span class="-3082078054294180702" onmouseenter="enter('-3082078054294180702');" onmouseout="out('-3082078054294180702');" style=""> 874         pickedImageThumbnail.setTag(info);                                                               </span>
<span class="-2197374997178845158" onmouseenter="enter('-2197374997178845158');" onmouseout="out('-2197374997178845158');" style=""> 875         info.setView(pickedImageThumbnail);                                                              </span>
<span class="7161653145395861506" onmouseenter="enter('7161653145395861506');" onmouseout="out('7161653145395861506');" style=""> 876         addLongPressHandler(pickedImageThumbnail);                                                       </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 877         updateTileIndices();                                                                             </span>
<span class="-4563567220370832798" onmouseenter="enter('-4563567220370832798');" onmouseout="out('-4563567220370832798');" style=""> 878         pickedImageThumbnail.setOnClickListener(mThumbnailOnClickListener);                              </span>
<span class="-2362441680778508255" onmouseenter="enter('-2362441680778508255');" onmouseout="out('-2362441680778508255');" style=""> 879         if (!fromRestore) {                                                                              </span>
<span class="1189035633112635276" onmouseenter="enter('1189035633112635276');" onmouseout="out('1189035633112635276');" style=""> 880             mThumbnailOnClickListener.onClick(pickedImageThumbnail);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 882     }                                                                                                    </span>
<span  style=""> 883                                                                                                          </span>
<span class="-7749792035646111440" onmouseenter="enter('-7749792035646111440');" onmouseout="out('-7749792035646111440');" style=""> 884     protected void onActivityResult(int requestCode, int resultCode, Intent data) {                      </span>
<span class="-2724808358796038832" onmouseenter="enter('-2724808358796038832');" onmouseout="out('-2724808358796038832');" style=""> 885         if (requestCode == IMAGE_PICK &amp;&amp; resultCode == RESULT_OK) {                                      </span>
<span class="306921262128177819" onmouseenter="enter('306921262128177819');" onmouseout="out('306921262128177819');" style=""> 886             if (data != null &amp;&amp; data.getData() != null) {                                                </span>
<span class="-9060755014479801963" onmouseenter="enter('-9060755014479801963');" onmouseout="out('-9060755014479801963');" style=""> 887                 Uri uri = data.getData();                                                                </span>
<span class="287003757484083113" onmouseenter="enter('287003757484083113');" onmouseout="out('287003757484083113');" style=""> 888                 addTemporaryWallpaperTile(uri, false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889             }                                                                                            </span>
<span class="5194712518021502228" onmouseenter="enter('5194712518021502228');" onmouseout="out('5194712518021502228');" style=""> 890         } else if (requestCode == PICK_WALLPAPER_THIRD_PARTY_ACTIVITY) {                                 </span>
<span class="-7075511525703303023" onmouseenter="enter('-7075511525703303023');" onmouseout="out('-7075511525703303023');" style=""> 891             setResult(RESULT_OK);                                                                        </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 892             finish();                                                                                    </span>
<span class="-8956522334617839884" onmouseenter="enter('-8956522334617839884');" onmouseout="out('-8956522334617839884');" style=""> 893         } else if (requestCode == PICK_LIVE_WALLPAPER) {                                                 </span>
<span class="-7130090822814694896" onmouseenter="enter('-7130090822814694896');" onmouseout="out('-7130090822814694896');" style=""> 894             WallpaperManager wm = WallpaperManager.getInstance(this);                                    </span>
<span class="611509371565321110" onmouseenter="enter('611509371565321110');" onmouseout="out('611509371565321110');" style=""> 895             final WallpaperInfo oldLiveWallpaper = mLiveWallpaperInfoOnPickerLaunch;                     </span>
<span class="-5816036629249953738" onmouseenter="enter('-5816036629249953738');" onmouseout="out('-5816036629249953738');" style=""> 896             final WallpaperInfo clickedWallpaper = mLastClickedLiveWallpaperInfo;                        </span>
<span class="-5984340816262038900" onmouseenter="enter('-5984340816262038900');" onmouseout="out('-5984340816262038900');" style=""> 897             WallpaperInfo newLiveWallpaper = wm.getWallpaperInfo();                                      </span>
<span class="-1315611166116800128" onmouseenter="enter('-1315611166116800128');" onmouseout="out('-1315611166116800128');" style=""> 898             // Try to figure out if a live wallpaper was set;                                            </span>
<span class="-5751651415530774114" onmouseenter="enter('-5751651415530774114');" onmouseout="out('-5751651415530774114');" style=""> 899             if (newLiveWallpaper != null &amp;&amp;                                                              </span>
<span class="-6163620997787911288" onmouseenter="enter('-6163620997787911288');" onmouseout="out('-6163620997787911288');" style=""> 900                     (oldLiveWallpaper == null                                                            </span>
<span class="2215677215918080758" onmouseenter="enter('2215677215918080758');" onmouseout="out('2215677215918080758');" style=""> 901                             || !oldLiveWallpaper.getComponent()                                          </span>
<span class="542702349949316499" onmouseenter="enter('542702349949316499');" onmouseout="out('542702349949316499');" style=""> 902                                     .equals(newLiveWallpaper.getComponent())                             </span>
<span class="-2241986207758144205" onmouseenter="enter('-2241986207758144205');" onmouseout="out('-2241986207758144205');" style=""> 903                             || clickedWallpaper.getComponent()                                           </span>
<span class="9151075727256116472" onmouseenter="enter('9151075727256116472');" onmouseout="out('9151075727256116472');" style=""> 904                                     .equals(oldLiveWallpaper.getComponent()))) {                         </span>
<span class="-5964103275755574248" onmouseenter="enter('-5964103275755574248');" onmouseout="out('-5964103275755574248');" style=""> 905                 // Return if a live wallpaper was set                                                    </span>
<span class="-7075511525703303023" onmouseenter="enter('-7075511525703303023');" onmouseout="out('-7075511525703303023');" style=""> 906                 setResult(RESULT_OK);                                                                    </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 907                 finish();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910     }                                                                                                    </span>
<span  style=""> 911                                                                                                          </span>
<span class="-1414235871370289475" onmouseenter="enter('-1414235871370289475');" onmouseout="out('-1414235871370289475');" style=""> 912     static void setWallpaperItemPaddingToZero(FrameLayout frameLayout) {                                 </span>
<span class="-6763839741894246945" onmouseenter="enter('-6763839741894246945');" onmouseout="out('-6763839741894246945');" style=""> 913         frameLayout.setPadding(0, 0, 0, 0);                                                              </span>
<span class="3772652785637557334" onmouseenter="enter('3772652785637557334');" onmouseout="out('3772652785637557334');" style=""> 914         frameLayout.setForeground(new ZeroPaddingDrawable(frameLayout.getForeground()));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915     }                                                                                                    </span>
<span  style=""> 916                                                                                                          </span>
<span class="-3459179076532382610" onmouseenter="enter('-3459179076532382610');" onmouseout="out('-3459179076532382610');" style=""> 917     private void addLongPressHandler(View v) {                                                           </span>
<span class="1024606645498811389" onmouseenter="enter('1024606645498811389');" onmouseout="out('1024606645498811389');" style=""> 918         v.setOnLongClickListener(mLongClickListener);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919     }                                                                                                    </span>
<span  style=""> 920                                                                                                          </span>
<span class="-5506305661846963409" onmouseenter="enter('-5506305661846963409');" onmouseout="out('-5506305661846963409');" style=""> 921     private ArrayList&lt;WallpaperTileInfo&gt; findBundledWallpapers() {                                       </span>
<span class="5885920776779194905" onmouseenter="enter('5885920776779194905');" onmouseout="out('5885920776779194905');" style=""> 922         final PackageManager pm = getPackageManager();                                                   </span>
<span class="5871817832928179175" onmouseenter="enter('5871817832928179175');" onmouseout="out('5871817832928179175');" style=""> 923         final ArrayList&lt;WallpaperTileInfo&gt; bundled = new ArrayList&lt;WallpaperTileInfo&gt;(24);               </span>
<span  style=""> 924                                                                                                          </span>
<span class="-1246582649877799770" onmouseenter="enter('-1246582649877799770');" onmouseout="out('-1246582649877799770');" style=""> 925         Partner partner = Partner.get(pm);                                                               </span>
<span class="-9215364277253785969" onmouseenter="enter('-9215364277253785969');" onmouseout="out('-9215364277253785969');" style=""> 926         if (partner != null) {                                                                           </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style=""> 927             final Resources partnerRes = partner.getResources();                                         </span>
<span class="4677469002384058762" onmouseenter="enter('4677469002384058762');" onmouseout="out('4677469002384058762');" style=""> 928             final int resId = partnerRes.getIdentifier(Partner.RES_WALLPAPERS, &quot;array&quot;,                  </span>
<span class="6039973161596959762" onmouseenter="enter('6039973161596959762');" onmouseout="out('6039973161596959762');" style=""> 929                     partner.getPackageName());                                                           </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style=""> 930             if (resId != 0) {                                                                            </span>
<span class="-2118557433142396278" onmouseenter="enter('-2118557433142396278');" onmouseout="out('-2118557433142396278');" style=""> 931                 addWallpapers(bundled, partnerRes, partner.getPackageName(), resId);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932             }                                                                                            </span>
<span  style=""> 933                                                                                                          </span>
<span class="-4748120673698363377" onmouseenter="enter('-4748120673698363377');" onmouseout="out('-4748120673698363377');" style=""> 934             // Add system wallpapers                                                                     </span>
<span class="8829637239826637205" onmouseenter="enter('8829637239826637205');" onmouseout="out('8829637239826637205');" style=""> 935             File systemDir = partner.getWallpaperDirectory();                                            </span>
<span class="-4006927377325457741" onmouseenter="enter('-4006927377325457741');" onmouseout="out('-4006927377325457741');" style=""> 936             if (systemDir != null &amp;&amp; systemDir.isDirectory()) {                                          </span>
<span class="1549902003223839534" onmouseenter="enter('1549902003223839534');" onmouseout="out('1549902003223839534');" style=""> 937                 for (File file : systemDir.listFiles()) {                                                </span>
<span class="-1906617314955916866" onmouseenter="enter('-1906617314955916866');" onmouseout="out('-1906617314955916866');" style=""> 938                     if (!file.isFile()) {                                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 939                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940                     }                                                                                    </span>
<span class="-4447045704555381031" onmouseenter="enter('-4447045704555381031');" onmouseout="out('-4447045704555381031');" style=""> 941                     String name = file.getName();                                                        </span>
<span class="2642008582597801087" onmouseenter="enter('2642008582597801087');" onmouseout="out('2642008582597801087');" style=""> 942                     int dotPos = name.lastIndexOf(&#x27;.&#x27;);                                                  </span>
<span class="5596042441253906476" onmouseenter="enter('5596042441253906476');" onmouseout="out('5596042441253906476');" style=""> 943                     String extension = &quot;&quot;;                                                               </span>
<span class="8275483901110152452" onmouseenter="enter('8275483901110152452');" onmouseout="out('8275483901110152452');" style=""> 944                     if (dotPos &gt;= -1) {                                                                  </span>
<span class="5358735009623538448" onmouseenter="enter('5358735009623538448');" onmouseout="out('5358735009623538448');" style=""> 945                         extension = name.substring(dotPos);                                              </span>
<span class="-756743826621559391" onmouseenter="enter('-756743826621559391');" onmouseout="out('-756743826621559391');" style=""> 946                         name = name.substring(0, dotPos);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947                     }                                                                                    </span>
<span  style=""> 948                                                                                                          </span>
<span class="-927337484625280418" onmouseenter="enter('-927337484625280418');" onmouseout="out('-927337484625280418');" style=""> 949                     if (name.endsWith(&quot;_small&quot;)) {                                                       </span>
<span class="-2832112970361767203" onmouseenter="enter('-2832112970361767203');" onmouseout="out('-2832112970361767203');" style=""> 950                         // it is a thumbnail                                                             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 951                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952                     }                                                                                    </span>
<span  style=""> 953                                                                                                          </span>
<span class="-3375184210124111054" onmouseenter="enter('-3375184210124111054');" onmouseout="out('-3375184210124111054');" style=""> 954                     File thumbnail = new File(systemDir, name + &quot;_small&quot; + extension);                   </span>
<span class="-3372803721501567410" onmouseenter="enter('-3372803721501567410');" onmouseout="out('-3372803721501567410');" style=""> 955                     Bitmap thumb = BitmapFactory.decodeFile(thumbnail.getAbsolutePath());                </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style=""> 956                     if (thumb != null) {                                                                 </span>
<span class="3695753775368890877" onmouseenter="enter('3695753775368890877');" onmouseout="out('3695753775368890877');" style=""> 957                         bundled.add(new FileWallpaperInfo(file, new BitmapDrawable(thumb)));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 961         }                                                                                                </span>
<span  style=""> 962                                                                                                          </span>
<span class="2664071456778699283" onmouseenter="enter('2664071456778699283');" onmouseout="out('2664071456778699283');" style=""> 963         Pair&lt;ApplicationInfo, Integer&gt; r = getWallpaperArrayResourceId();                                </span>
<span class="-4447905625078087046" onmouseenter="enter('-4447905625078087046');" onmouseout="out('-4447905625078087046');" style=""> 964         if (r != null) {                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 965             try {                                                                                        </span>
<span class="-6573463770199130323" onmouseenter="enter('-6573463770199130323');" onmouseout="out('-6573463770199130323');" style=""> 966                 Resources wallpaperRes = getPackageManager().getResourcesForApplication(r.first);        </span>
<span class="-2554303152129460876" onmouseenter="enter('-2554303152129460876');" onmouseout="out('-2554303152129460876');" style=""> 967                 addWallpapers(bundled, wallpaperRes, r.first.packageName, r.second);                     </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style=""> 968             } catch (PackageManager.NameNotFoundException e) {                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 970         }                                                                                                </span>
<span  style=""> 971                                                                                                          </span>
<span class="-1343467421379157050" onmouseenter="enter('-1343467421379157050');" onmouseout="out('-1343467421379157050');" style=""> 972         if (partner == null || !partner.hideDefaultWallpaper()) {                                        </span>
<span class="7034483189720629489" onmouseenter="enter('7034483189720629489');" onmouseout="out('7034483189720629489');" style=""> 973             // Add an entry for the default wallpaper (stored in system resources)                       </span>
<span class="-7386155032140038107" onmouseenter="enter('-7386155032140038107');" onmouseout="out('-7386155032140038107');" style=""> 974             WallpaperTileInfo defaultWallpaperInfo =                                                     </span>
<span class="-1530882610108412902" onmouseenter="enter('-1530882610108412902');" onmouseout="out('-1530882610108412902');" style=""> 975                     (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.KITKAT)                                 </span>
<span class="-3549249310704668816" onmouseenter="enter('-3549249310704668816');" onmouseout="out('-3549249310704668816');" style=""> 976                     ? getPreKKDefaultWallpaperInfo()                                                     </span>
<span class="197495415878705720" onmouseenter="enter('197495415878705720');" onmouseout="out('197495415878705720');" style=""> 977                     : getDefaultWallpaper();                                                             </span>
<span class="-7974818341329769015" onmouseenter="enter('-7974818341329769015');" onmouseout="out('-7974818341329769015');" style=""> 978             if (defaultWallpaperInfo != null) {                                                          </span>
<span class="7202846298285246873" onmouseenter="enter('7202846298285246873');" onmouseout="out('7202846298285246873');" style=""> 979                 bundled.add(0, defaultWallpaperInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981         }                                                                                                </span>
<span class="3924493507316405252" onmouseenter="enter('3924493507316405252');" onmouseout="out('3924493507316405252');" style=""> 982         return bundled;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983     }                                                                                                    </span>
<span  style=""> 984                                                                                                          </span>
<span class="-6595695538609845398" onmouseenter="enter('-6595695538609845398');" onmouseout="out('-6595695538609845398');" style=""> 985     private boolean writeImageToFileAsJpeg(File f, Bitmap b) {                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 986         try {                                                                                            </span>
<span class="8722539090112199092" onmouseenter="enter('8722539090112199092');" onmouseout="out('8722539090112199092');" style=""> 987             f.createNewFile();                                                                           </span>
<span class="3775180210190615739" onmouseenter="enter('3775180210190615739');" onmouseout="out('3775180210190615739');" style=""> 988             FileOutputStream thumbFileStream =                                                           </span>
<span class="2198104288806315130" onmouseenter="enter('2198104288806315130');" onmouseout="out('2198104288806315130');" style=""> 989                     openFileOutput(f.getName(), Context.MODE_PRIVATE);                                   </span>
<span class="2364901270506104115" onmouseenter="enter('2364901270506104115');" onmouseout="out('2364901270506104115');" style=""> 990             b.compress(Bitmap.CompressFormat.JPEG, 95, thumbFileStream);                                 </span>
<span class="5768958253628177358" onmouseenter="enter('5768958253628177358');" onmouseout="out('5768958253628177358');" style=""> 991             thumbFileStream.close();                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 992             return true;                                                                                 </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 993         } catch (IOException e) {                                                                        </span>
<span class="-4676604896942702598" onmouseenter="enter('-4676604896942702598');" onmouseout="out('-4676604896942702598');" style=""> 994             Log.e(TAG, &quot;Error while writing bitmap to file &quot; + e);                                       </span>
<span class="7682989536937550366" onmouseenter="enter('7682989536937550366');" onmouseout="out('7682989536937550366');" style=""> 995             f.delete();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 996         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 997         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998     }                                                                                                    </span>
<span  style=""> 999                                                                                                          </span>
<span class="-4823957996775296240" onmouseenter="enter('-4823957996775296240');" onmouseout="out('-4823957996775296240');" style="">1000     private File getDefaultThumbFile() {                                                                 </span>
<span class="158529430789897102" onmouseenter="enter('158529430789897102');" onmouseout="out('158529430789897102');" style="">1001         return new File(getFilesDir(), Build.VERSION.SDK_INT                                             </span>
<span class="-7890353788133211969" onmouseenter="enter('-7890353788133211969');" onmouseout="out('-7890353788133211969');" style="">1002                 + &quot;_&quot; + DEFAULT_WALLPAPER_THUMBNAIL_FILENAME);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003     }                                                                                                    </span>
<span  style="">1004                                                                                                          </span>
<span class="1227314529798978638" onmouseenter="enter('1227314529798978638');" onmouseout="out('1227314529798978638');" style="">1005     private boolean saveDefaultWallpaperThumb(Bitmap b) {                                                </span>
<span class="8263823508211107068" onmouseenter="enter('8263823508211107068');" onmouseout="out('8263823508211107068');" style="">1006         // Delete old thumbnails.                                                                        </span>
<span class="3567311882351013867" onmouseenter="enter('3567311882351013867');" onmouseout="out('3567311882351013867');" style="">1007         new File(getFilesDir(), OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                      </span>
<span class="-2276391661806453489" onmouseenter="enter('-2276391661806453489');" onmouseout="out('-2276391661806453489');" style="">1008         new File(getFilesDir(), DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                          </span>
<span  style="">1009                                                                                                          </span>
<span class="1808821527848952005" onmouseenter="enter('1808821527848952005');" onmouseout="out('1808821527848952005');" style="">1010         for (int i = Build.VERSION_CODES.JELLY_BEAN; i &lt; Build.VERSION.SDK_INT; i++) {                   </span>
<span class="7774392015068581640" onmouseenter="enter('7774392015068581640');" onmouseout="out('7774392015068581640');" style="">1011             new File(getFilesDir(), i + &quot;_&quot; + DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012         }                                                                                                </span>
<span class="4686288793731739264" onmouseenter="enter('4686288793731739264');" onmouseout="out('4686288793731739264');" style="">1013         return writeImageToFileAsJpeg(getDefaultThumbFile(), b);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1014     }                                                                                                    </span>
<span  style="">1015                                                                                                          </span>
<span class="-4877678771871800381" onmouseenter="enter('-4877678771871800381');" onmouseout="out('-4877678771871800381');" style="">1016     private ResourceWallpaperInfo getPreKKDefaultWallpaperInfo() {                                       </span>
<span class="5520181104510013397" onmouseenter="enter('5520181104510013397');" onmouseout="out('5520181104510013397');" style="">1017         Resources sysRes = Resources.getSystem();                                                        </span>
<span class="3223623880203196673" onmouseenter="enter('3223623880203196673');" onmouseout="out('3223623880203196673');" style="">1018         int resId = sysRes.getIdentifier(&quot;default_wallpaper&quot;, &quot;drawable&quot;, &quot;android&quot;);                    </span>
<span  style="">1019                                                                                                          </span>
<span class="-2700470529350012310" onmouseenter="enter('-2700470529350012310');" onmouseout="out('-2700470529350012310');" style="">1020         File defaultThumbFile = getDefaultThumbFile();                                                   </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style="">1021         Bitmap thumb = null;                                                                             </span>
<span class="3173128348719073493" onmouseenter="enter('3173128348719073493');" onmouseout="out('3173128348719073493');" style="">1022         boolean defaultWallpaperExists = false;                                                          </span>
<span class="769015314191339580" onmouseenter="enter('769015314191339580');" onmouseout="out('769015314191339580');" style="">1023         if (defaultThumbFile.exists()) {                                                                 </span>
<span class="145969986834765399" onmouseenter="enter('145969986834765399');" onmouseout="out('145969986834765399');" style="">1024             thumb = BitmapFactory.decodeFile(defaultThumbFile.getAbsolutePath());                        </span>
<span class="-3053675610106547889" onmouseenter="enter('-3053675610106547889');" onmouseout="out('-3053675610106547889');" style="">1025             defaultWallpaperExists = true;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1026         } else {                                                                                         </span>
<span class="8976545925819631954" onmouseenter="enter('8976545925819631954');" onmouseout="out('8976545925819631954');" style="">1027             Resources res = getResources();                                                              </span>
<span class="-5692402014536765414" onmouseenter="enter('-5692402014536765414');" onmouseout="out('-5692402014536765414');" style="">1028             Point defaultThumbSize = getDefaultThumbnailSize(res);                                       </span>
<span class="8688062696958133993" onmouseenter="enter('8688062696958133993');" onmouseout="out('8688062696958133993');" style="">1029             int rotation = WallpaperCropActivity.getRotationFromExif(res, resId);                        </span>
<span class="-164181572917895630" onmouseenter="enter('-164181572917895630');" onmouseout="out('-164181572917895630');" style="">1030             thumb = createThumbnail(                                                                     </span>
<span class="-534913579393144749" onmouseenter="enter('-534913579393144749');" onmouseout="out('-534913579393144749');" style="">1031                     defaultThumbSize, this, null, null, sysRes, resId, rotation, false);                 </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1032             if (thumb != null) {                                                                         </span>
<span class="4589895813778676518" onmouseenter="enter('4589895813778676518');" onmouseout="out('4589895813778676518');" style="">1033                 defaultWallpaperExists = saveDefaultWallpaperThumb(thumb);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1034             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035         }                                                                                                </span>
<span class="1877730711367989636" onmouseenter="enter('1877730711367989636');" onmouseout="out('1877730711367989636');" style="">1036         if (defaultWallpaperExists) {                                                                    </span>
<span class="-5406664625181933074" onmouseenter="enter('-5406664625181933074');" onmouseout="out('-5406664625181933074');" style="">1037             return new ResourceWallpaperInfo(sysRes, resId, new BitmapDrawable(thumb));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1039         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1040     }                                                                                                    </span>
<span  style="">1041                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style="">1042     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-6050375207733295576" onmouseenter="enter('-6050375207733295576');" onmouseout="out('-6050375207733295576');" style="">1043     private DefaultWallpaperInfo getDefaultWallpaper() {                                                 </span>
<span class="-2700470529350012310" onmouseenter="enter('-2700470529350012310');" onmouseout="out('-2700470529350012310');" style="">1044         File defaultThumbFile = getDefaultThumbFile();                                                   </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style="">1045         Bitmap thumb = null;                                                                             </span>
<span class="3173128348719073493" onmouseenter="enter('3173128348719073493');" onmouseout="out('3173128348719073493');" style="">1046         boolean defaultWallpaperExists = false;                                                          </span>
<span class="769015314191339580" onmouseenter="enter('769015314191339580');" onmouseout="out('769015314191339580');" style="">1047         if (defaultThumbFile.exists()) {                                                                 </span>
<span class="145969986834765399" onmouseenter="enter('145969986834765399');" onmouseout="out('145969986834765399');" style="">1048             thumb = BitmapFactory.decodeFile(defaultThumbFile.getAbsolutePath());                        </span>
<span class="-3053675610106547889" onmouseenter="enter('-3053675610106547889');" onmouseout="out('-3053675610106547889');" style="">1049             defaultWallpaperExists = true;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1050         } else {                                                                                         </span>
<span class="8976545925819631954" onmouseenter="enter('8976545925819631954');" onmouseout="out('8976545925819631954');" style="">1051             Resources res = getResources();                                                              </span>
<span class="-5692402014536765414" onmouseenter="enter('-5692402014536765414');" onmouseout="out('-5692402014536765414');" style="">1052             Point defaultThumbSize = getDefaultThumbnailSize(res);                                       </span>
<span class="-3652113574132114284" onmouseenter="enter('-3652113574132114284');" onmouseout="out('-3652113574132114284');" style="">1053             Drawable wallpaperDrawable = WallpaperManager.getInstance(this).getBuiltInDrawable(          </span>
<span class="5013343709069618762" onmouseenter="enter('5013343709069618762');" onmouseout="out('5013343709069618762');" style="">1054                     defaultThumbSize.x, defaultThumbSize.y, true, 0.5f, 0.5f);                           </span>
<span class="7887239685465932583" onmouseenter="enter('7887239685465932583');" onmouseout="out('7887239685465932583');" style="">1055             if (wallpaperDrawable != null) {                                                             </span>
<span class="-5003097491286512046" onmouseenter="enter('-5003097491286512046');" onmouseout="out('-5003097491286512046');" style="">1056                 thumb = Bitmap.createBitmap(                                                             </span>
<span class="-5991438011041707161" onmouseenter="enter('-5991438011041707161');" onmouseout="out('-5991438011041707161');" style="">1057                         defaultThumbSize.x, defaultThumbSize.y, Bitmap.Config.ARGB_8888);                </span>
<span class="1166395082389141916" onmouseenter="enter('1166395082389141916');" onmouseout="out('1166395082389141916');" style="">1058                 Canvas c = new Canvas(thumb);                                                            </span>
<span class="8212113414976856971" onmouseenter="enter('8212113414976856971');" onmouseout="out('8212113414976856971');" style="">1059                 wallpaperDrawable.setBounds(0, 0, defaultThumbSize.x, defaultThumbSize.y);               </span>
<span class="-8788570621207906555" onmouseenter="enter('-8788570621207906555');" onmouseout="out('-8788570621207906555');" style="">1060                 wallpaperDrawable.draw(c);                                                               </span>
<span class="5675729563233531278" onmouseenter="enter('5675729563233531278');" onmouseout="out('5675729563233531278');" style="">1061                 c.setBitmap(null);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062             }                                                                                            </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1063             if (thumb != null) {                                                                         </span>
<span class="4589895813778676518" onmouseenter="enter('4589895813778676518');" onmouseout="out('4589895813778676518');" style="">1064                 defaultWallpaperExists = saveDefaultWallpaperThumb(thumb);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066         }                                                                                                </span>
<span class="1877730711367989636" onmouseenter="enter('1877730711367989636');" onmouseout="out('1877730711367989636');" style="">1067         if (defaultWallpaperExists) {                                                                    </span>
<span class="-3728514137807666119" onmouseenter="enter('-3728514137807666119');" onmouseout="out('-3728514137807666119');" style="">1068             return new DefaultWallpaperInfo(new BitmapDrawable(thumb));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1070         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1071     }                                                                                                    </span>
<span  style="">1072                                                                                                          </span>
<span class="-1742079203168766475" onmouseenter="enter('-1742079203168766475');" onmouseout="out('-1742079203168766475');" style="">1073     public Pair&lt;ApplicationInfo, Integer&gt; getWallpaperArrayResourceId() {                                </span>
<span class="-6161770320248569187" onmouseenter="enter('-6161770320248569187');" onmouseout="out('-6161770320248569187');" style="">1074         // Context.getPackageName() may return the &quot;original&quot; package name,                              </span>
<span class="-937325419486317119" onmouseenter="enter('-937325419486317119');" onmouseout="out('-937325419486317119');" style="">1075         // com.android.launcher3; Resources needs the real package name,                                 </span>
<span class="-2310146865144726197" onmouseenter="enter('-2310146865144726197');" onmouseout="out('-2310146865144726197');" style="">1076         // com.android.launcher3. So we ask Resources for what it thinks the                             </span>
<span class="-8519279543710902199" onmouseenter="enter('-8519279543710902199');" onmouseout="out('-8519279543710902199');" style="">1077         // package name should be.                                                                       </span>
<span class="1562477602934366037" onmouseenter="enter('1562477602934366037');" onmouseout="out('1562477602934366037');" style="">1078         final String packageName = getResources().getResourcePackageName(R.array.wallpapers);            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1079         try {                                                                                            </span>
<span class="793324406234855079" onmouseenter="enter('793324406234855079');" onmouseout="out('793324406234855079');" style="">1080             ApplicationInfo info = getPackageManager().getApplicationInfo(packageName, 0);               </span>
<span class="7900160984832850008" onmouseenter="enter('7900160984832850008');" onmouseout="out('7900160984832850008');" style="">1081             return new Pair&lt;ApplicationInfo, Integer&gt;(info, R.array.wallpapers);                         </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1082         } catch (PackageManager.NameNotFoundException e) {                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1083             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085     }                                                                                                    </span>
<span  style="">1086                                                                                                          </span>
<span class="-1243563933706295169" onmouseenter="enter('-1243563933706295169');" onmouseout="out('-1243563933706295169');" style="">1087     private void addWallpapers(ArrayList&lt;WallpaperTileInfo&gt; known, Resources res,                        </span>
<span class="5411865991738807592" onmouseenter="enter('5411865991738807592');" onmouseout="out('5411865991738807592');" style="">1088             String packageName, int listResId) {                                                         </span>
<span class="7110410272585510587" onmouseenter="enter('7110410272585510587');" onmouseout="out('7110410272585510587');" style="">1089         final String[] extras = res.getStringArray(listResId);                                           </span>
<span class="-8339999744341716205" onmouseenter="enter('-8339999744341716205');" onmouseout="out('-8339999744341716205');" style="">1090         for (String extra : extras) {                                                                    </span>
<span class="5117676898365713774" onmouseenter="enter('5117676898365713774');" onmouseout="out('5117676898365713774');" style="">1091             int resId = res.getIdentifier(extra, &quot;drawable&quot;, packageName);                               </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="">1092             if (resId != 0) {                                                                            </span>
<span class="-6623243265608892176" onmouseenter="enter('-6623243265608892176');" onmouseout="out('-6623243265608892176');" style="">1093                 final int thumbRes = res.getIdentifier(extra + &quot;_small&quot;, &quot;drawable&quot;, packageName);       </span>
<span  style="">1094                                                                                                          </span>
<span class="1395464033869972102" onmouseenter="enter('1395464033869972102');" onmouseout="out('1395464033869972102');" style="">1095                 if (thumbRes != 0) {                                                                     </span>
<span class="-6566842002354754523" onmouseenter="enter('-6566842002354754523');" onmouseout="out('-6566842002354754523');" style="">1096                     ResourceWallpaperInfo wallpaperInfo =                                                </span>
<span class="187140772166123482" onmouseenter="enter('187140772166123482');" onmouseout="out('187140772166123482');" style="">1097                             new ResourceWallpaperInfo(res, resId, res.getDrawable(thumbRes));            </span>
<span class="6489784602606278995" onmouseenter="enter('6489784602606278995');" onmouseout="out('6489784602606278995');" style="">1098                     known.add(wallpaperInfo);                                                            </span>
<span class="-1095979516758920685" onmouseenter="enter('-1095979516758920685');" onmouseout="out('-1095979516758920685');" style="">1099                     // Log.d(TAG, &quot;add: [&quot; + packageName + &quot;]: &quot; + extra + &quot; (&quot; + res + &quot;)&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1101             } else {                                                                                     </span>
<span class="-3254000057019390134" onmouseenter="enter('-3254000057019390134');" onmouseout="out('-3254000057019390134');" style="">1102                 Log.e(TAG, &quot;Couldn&#x27;t find wallpaper &quot; + extra);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1103             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105     }                                                                                                    </span>
<span  style="">1106                                                                                                          </span>
<span class="8798832263856618785" onmouseenter="enter('8798832263856618785');" onmouseout="out('8798832263856618785');" style="">1107     public CropView getCropView() {                                                                      </span>
<span class="-6704760201962962178" onmouseenter="enter('-6704760201962962178');" onmouseout="out('-6704760201962962178');" style="">1108         return mCropView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109     }                                                                                                    </span>
<span  style="">1110                                                                                                          </span>
<span class="1726384713613661855" onmouseenter="enter('1726384713613661855');" onmouseout="out('1726384713613661855');" style="">1111     public SavedWallpaperImages getSavedImages() {                                                       </span>
<span class="8561023406342667010" onmouseenter="enter('8561023406342667010');" onmouseout="out('8561023406342667010');" style="">1112         return mSavedImages;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113     }                                                                                                    </span>
<span  style="">1114                                                                                                          </span>
<span class="-1282370188250350949" onmouseenter="enter('-1282370188250350949');" onmouseout="out('-1282370188250350949');" style="">1115     public void onLiveWallpaperPickerLaunch(WallpaperInfo info) {                                        </span>
<span class="957063298317837878" onmouseenter="enter('957063298317837878');" onmouseout="out('957063298317837878');" style="">1116         mLastClickedLiveWallpaperInfo = info;                                                            </span>
<span class="1720419068305677284" onmouseenter="enter('1720419068305677284');" onmouseout="out('1720419068305677284');" style="">1117         mLiveWallpaperInfoOnPickerLaunch = WallpaperManager.getInstance(this).getWallpaperInfo();        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1118     }                                                                                                    </span>
<span  style="">1119                                                                                                          </span>
<span class="-4292702971064588005" onmouseenter="enter('-4292702971064588005');" onmouseout="out('-4292702971064588005');" style="">1120     static class ZeroPaddingDrawable extends LevelListDrawable {                                         </span>
<span class="-1809245915530945544" onmouseenter="enter('-1809245915530945544');" onmouseout="out('-1809245915530945544');" style="">1121         public ZeroPaddingDrawable(Drawable d) {                                                         </span>
<span class="7209017336523601499" onmouseenter="enter('7209017336523601499');" onmouseout="out('7209017336523601499');" style="">1122             super();                                                                                     </span>
<span class="-9075562460261717781" onmouseenter="enter('-9075562460261717781');" onmouseout="out('-9075562460261717781');" style="">1123             addLevel(0, 0, d);                                                                           </span>
<span class="-8837866944625871288" onmouseenter="enter('-8837866944625871288');" onmouseout="out('-8837866944625871288');" style="">1124             setLevel(0);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125         }                                                                                                </span>
<span  style="">1126                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1127         @Override                                                                                        </span>
<span class="-4441500511158129295" onmouseenter="enter('-4441500511158129295');" onmouseout="out('-4441500511158129295');" style="">1128         public boolean getPadding(Rect padding) {                                                        </span>
<span class="-595144173525385315" onmouseenter="enter('-595144173525385315');" onmouseout="out('-595144173525385315');" style="">1129             padding.set(0, 0, 0, 0);                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1130             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132     }                                                                                                    </span>
<span  style="">1133                                                                                                          </span>
<span class="-2937803399629319128" onmouseenter="enter('-2937803399629319128');" onmouseout="out('-2937803399629319128');" style="">1134     private static class SimpleWallpapersAdapter extends ArrayAdapter&lt;WallpaperTileInfo&gt; {               </span>
<span class="-8360437163581134323" onmouseenter="enter('-8360437163581134323');" onmouseout="out('-8360437163581134323');" style="">1135         private final LayoutInflater mLayoutInflater;                                                    </span>
<span  style="">1136                                                                                                          </span>
<span class="-4484594253025843931" onmouseenter="enter('-4484594253025843931');" onmouseout="out('-4484594253025843931');" style="">1137         SimpleWallpapersAdapter(Activity activity, ArrayList&lt;WallpaperTileInfo&gt; wallpapers) {            </span>
<span class="8653562979026841436" onmouseenter="enter('8653562979026841436');" onmouseout="out('8653562979026841436');" style="">1138             super(activity, R.layout.wallpaper_picker_item, wallpapers);                                 </span>
<span class="5318885258480438175" onmouseenter="enter('5318885258480438175');" onmouseout="out('5318885258480438175');" style="">1139             mLayoutInflater = activity.getLayoutInflater();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140         }                                                                                                </span>
<span  style="">1141                                                                                                          </span>
<span class="1084873981402571013" onmouseenter="enter('1084873981402571013');" onmouseout="out('1084873981402571013');" style="">1142         public View getView(int position, View convertView, ViewGroup parent) {                          </span>
<span class="2334288334628913507" onmouseenter="enter('2334288334628913507');" onmouseout="out('2334288334628913507');" style="">1143             Drawable thumb = getItem(position).mThumb;                                                   </span>
<span class="-4748570100733370001" onmouseenter="enter('-4748570100733370001');" onmouseout="out('-4748570100733370001');" style="">1144             if (thumb == null) {                                                                         </span>
<span class="-4942494812872156884" onmouseenter="enter('-4942494812872156884');" onmouseout="out('-4942494812872156884');" style="">1145                 Log.e(TAG, &quot;Error decoding thumbnail for wallpaper #&quot; + position);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146             }                                                                                            </span>
<span class="7911727622339877382" onmouseenter="enter('7911727622339877382');" onmouseout="out('7911727622339877382');" style="">1147             return createImageTileView(mLayoutInflater, convertView, parent, thumb);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149     }                                                                                                    </span>
<span  style="">1150                                                                                                          </span>
<span class="2531716121200619667" onmouseenter="enter('2531716121200619667');" onmouseout="out('2531716121200619667');" style="">1151     public static View createImageTileView(LayoutInflater layoutInflater,                                </span>
<span class="651868139846267065" onmouseenter="enter('651868139846267065');" onmouseout="out('651868139846267065');" style="">1152             View convertView, ViewGroup parent, Drawable thumb) {                                        </span>
<span class="-690381633676655047" onmouseenter="enter('-690381633676655047');" onmouseout="out('-690381633676655047');" style="">1153         View view;                                                                                       </span>
<span  style="">1154                                                                                                          </span>
<span class="4181524603843345875" onmouseenter="enter('4181524603843345875');" onmouseout="out('4181524603843345875');" style="">1155         if (convertView == null) {                                                                       </span>
<span class="-8962994358344247461" onmouseenter="enter('-8962994358344247461');" onmouseout="out('-8962994358344247461');" style="">1156             view = layoutInflater.inflate(R.layout.wallpaper_picker_item, parent, false);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1157         } else {                                                                                         </span>
<span class="-1165364525461896664" onmouseenter="enter('-1165364525461896664');" onmouseout="out('-1165364525461896664');" style="">1158             view = convertView;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159         }                                                                                                </span>
<span  style="">1160                                                                                                          </span>
<span class="-5796698656042939368" onmouseenter="enter('-5796698656042939368');" onmouseout="out('-5796698656042939368');" style="">1161         setWallpaperItemPaddingToZero((FrameLayout) view);                                               </span>
<span  style="">1162                                                                                                          </span>
<span class="-5880466984736486189" onmouseenter="enter('-5880466984736486189');" onmouseout="out('-5880466984736486189');" style="">1163         ImageView image = (ImageView) view.findViewById(R.id.wallpaper_image);                           </span>
<span  style="">1164                                                                                                          </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1165         if (thumb != null) {                                                                             </span>
<span class="-3973426726107986909" onmouseenter="enter('-3973426726107986909');" onmouseout="out('-3973426726107986909');" style="">1166             image.setImageDrawable(thumb);                                                               </span>
<span class="206035284699071082" onmouseenter="enter('206035284699071082');" onmouseout="out('206035284699071082');" style="">1167             thumb.setDither(true);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168         }                                                                                                </span>
<span  style="">1169                                                                                                          </span>
<span class="3345849580761087571" onmouseenter="enter('3345849580761087571');" onmouseout="out('3345849580761087571');" style="">1170         return view;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171     }                                                                                                    </span>
<span  style="">1172                                                                                                          </span>
<span class="-2975945065481865808" onmouseenter="enter('-2975945065481865808');" onmouseout="out('-2975945065481865808');" style="">1173     // In Launcher3, we override this with a method that catches exceptions                              </span>
<span class="-5274754236505393442" onmouseenter="enter('-5274754236505393442');" onmouseout="out('-5274754236505393442');" style="">1174     // from starting activities; didn&#x27;t want to copy and paste code into here                            </span>
<span class="744831245140937102" onmouseenter="enter('744831245140937102');" onmouseout="out('744831245140937102');" style="">1175     public void startActivityForResultSafely(Intent intent, int requestCode) {                           </span>
<span class="-1930681083273022971" onmouseenter="enter('-1930681083273022971');" onmouseout="out('-1930681083273022971');" style="">1176         startActivityForResult(intent, requestCode);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1178 }                                                                                                        </span>






















</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="4969256359214059167" onmouseenter="enter('4969256359214059167');" onmouseout="out('4969256359214059167');" style="">   2  * Copyright (C) 2013 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="8098692255261555192" onmouseenter="enter('8098692255261555192');" onmouseout="out('8098692255261555192');" style="">  18 import android.animation.LayoutTransition;                                                               </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19 import android.annotation.TargetApi;                                                                     </span>
<span class="4319535404750690126" onmouseenter="enter('4319535404750690126');" onmouseout="out('4319535404750690126');" style="">  20 import android.app.ActionBar;                                                                            </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  21 import android.app.Activity;                                                                             </span>
<span class="951063033412864237" onmouseenter="enter('951063033412864237');" onmouseout="out('951063033412864237');" style="">  22 import android.app.WallpaperInfo;                                                                        </span>
<span class="676108227569676783" onmouseenter="enter('676108227569676783');" onmouseout="out('676108227569676783');" style="">  23 import android.app.WallpaperManager;                                                                     </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  24 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  25 import android.content.Intent;                                                                           </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  26 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  27 import android.content.pm.PackageManager;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  28 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  29 import android.database.Cursor;                                                                          </span>
<span class="5252578614911642988" onmouseenter="enter('5252578614911642988');" onmouseout="out('5252578614911642988');" style="">  30 import android.database.DataSetObserver;                                                                 </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  31 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  32 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  33 import android.graphics.Canvas;                                                                          </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  34 import android.graphics.Matrix;                                                                          </span>
<span class="-3433483468941074901" onmouseenter="enter('-3433483468941074901');" onmouseout="out('-3433483468941074901');" style="">  35 import android.graphics.Point;                                                                           </span>
<span class="7353926919338897104" onmouseenter="enter('7353926919338897104');" onmouseout="out('7353926919338897104');" style="">  36 import android.graphics.PorterDuff;                                                                      </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  37 import android.graphics.Rect;                                                                            </span>
<span class="6159024636799649270" onmouseenter="enter('6159024636799649270');" onmouseout="out('6159024636799649270');" style="">  38 import android.graphics.RectF;                                                                           </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  39 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  40 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-4553352622911846323" onmouseenter="enter('-4553352622911846323');" onmouseout="out('-4553352622911846323');" style="">  41 import android.graphics.drawable.LevelListDrawable;                                                      </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  42 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  43 import android.os.AsyncTask;                                                                             </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  44 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  45 import android.os.Bundle;                                                                                </span>
<span class="4691360065241021834" onmouseenter="enter('4691360065241021834');" onmouseout="out('4691360065241021834');" style="">  46 import android.provider.MediaStore;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  47 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  48 import android.util.Pair;                                                                                </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  49 import android.view.ActionMode;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  50 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  51 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  52 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  53 import android.view.MenuItem;                                                                            </span>
<span class="-4070104819519100201" onmouseenter="enter('-4070104819519100201');" onmouseout="out('-4070104819519100201');" style="">  54 import android.view.View.OnClickListener;                                                                </span>
<span class="3981555454743051089" onmouseenter="enter('3981555454743051089');" onmouseout="out('3981555454743051089');" style="">  55 import android.view.View.OnLayoutChangeListener;                                                         </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  56 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  57 import android.view.ViewGroup;                                                                           </span>
<span class="2571204843522825307" onmouseenter="enter('2571204843522825307');" onmouseout="out('2571204843522825307');" style="">  58 import android.view.ViewPropertyAnimator;                                                                </span>
<span class="1168424004905198318" onmouseenter="enter('1168424004905198318');" onmouseout="out('1168424004905198318');" style="">  59 import android.view.ViewTreeObserver.OnGlobalLayoutListener;                                             </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  60 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="">  61 import android.view.WindowManager;                                                                       </span>
<span class="4293004276597960360" onmouseenter="enter('4293004276597960360');" onmouseout="out('4293004276597960360');" style="">  62 import android.view.animation.AccelerateInterpolator;                                                    </span>
<span class="-4330829166704003086" onmouseenter="enter('-4330829166704003086');" onmouseout="out('-4330829166704003086');" style="">  63 import android.view.animation.DecelerateInterpolator;                                                    </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="">  64 import android.widget.ArrayAdapter;                                                                      </span>
<span class="-1389926198978222011" onmouseenter="enter('-1389926198978222011');" onmouseout="out('-1389926198978222011');" style="">  65 import android.widget.BaseAdapter;                                                                       </span>
<span class="619404646788779253" onmouseenter="enter('619404646788779253');" onmouseout="out('619404646788779253');" style="">  66 import android.widget.FrameLayout;                                                                       </span>
<span class="1210679520679819328" onmouseenter="enter('1210679520679819328');" onmouseout="out('1210679520679819328');" style="">  67 import android.widget.HorizontalScrollView;                                                              </span>
<span class="-8478546344938881111" onmouseenter="enter('-8478546344938881111');" onmouseout="out('-8478546344938881111');" style="">  68 import android.widget.ImageView;                                                                         </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  69 import android.widget.LinearLayout;                                                                      </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  70 import android.widget.Toast;                                                                             </span>
<span class="-6230463173033584865" onmouseenter="enter('-6230463173033584865');" onmouseout="out('-6230463173033584865');" style="">  71 import com.android.photos.BitmapRegionTileSource.BitmapSource;                                           </span>
<span class="6533473271465139745" onmouseenter="enter('6533473271465139745');" onmouseout="out('6533473271465139745');" style="">  72 import com.android.photos.BitmapRegionTileSource;                                                        </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  73 import java.io.File;                                                                                     </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  74 import java.io.FileOutputStream;                                                                         </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  75 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  76 import java.util.ArrayList;                                                                              </span>
<span  style="">  77                                                                                                          </span>
<span  style="">  78                                                                                                          </span>
<span class="-3479087503452779406" onmouseenter="enter('-3479087503452779406');" onmouseout="out('-3479087503452779406');" style="">  79 public class WallpaperPickerActivity extends WallpaperCropActivity {                                     </span>
<span class="-9207672248179223277" onmouseenter="enter('-9207672248179223277');" onmouseout="out('-9207672248179223277');" style="">  80     static final String TAG = &quot;Launcher.WallpaperPickerActivity&quot;;                                        </span>
<span  style="">  81                                                                                                          </span>
<span class="3742943605537861169" onmouseenter="enter('3742943605537861169');" onmouseout="out('3742943605537861169');" style="">  82     public static final int IMAGE_PICK = 5;                                                              </span>
<span  style="">  83                                                                                                          </span>
<span class="6964368849625562410" onmouseenter="enter('6964368849625562410');" onmouseout="out('6964368849625562410');" style="">  84     public static final int PICK_WALLPAPER_THIRD_PARTY_ACTIVITY = 6;                                     </span>
<span  style="">  85                                                                                                          </span>
<span class="-7093050771651663150" onmouseenter="enter('-7093050771651663150');" onmouseout="out('-7093050771651663150');" style="">  86     public static final int PICK_LIVE_WALLPAPER = 7;                                                     </span>
<span  style="">  87                                                                                                          </span>
<span class="2002999604810079271" onmouseenter="enter('2002999604810079271');" onmouseout="out('2002999604810079271');" style="">  88     private static final String TEMP_WALLPAPER_TILES = &quot;TEMP_WALLPAPER_TILES&quot;;                           </span>
<span  style="">  89                                                                                                          </span>
<span class="2369538557121393675" onmouseenter="enter('2369538557121393675');" onmouseout="out('2369538557121393675');" style="">  90     private static final String SELECTED_INDEX = &quot;SELECTED_INDEX&quot;;                                       </span>
<span  style="">  91                                                                                                          </span>
<span class="8676512018192278738" onmouseenter="enter('8676512018192278738');" onmouseout="out('8676512018192278738');" style="">  92     private static final String OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME = &quot;default_thumb.jpg&quot;;          </span>
<span  style="">  93                                                                                                          </span>
<span class="739407583494491877" onmouseenter="enter('739407583494491877');" onmouseout="out('739407583494491877');" style="">  94     private static final String DEFAULT_WALLPAPER_THUMBNAIL_FILENAME = &quot;default_thumb2.jpg&quot;;             </span>
<span  style="">  95                                                                                                          </span>
<span class="-4006760574697076366" onmouseenter="enter('-4006760574697076366');" onmouseout="out('-4006760574697076366');" style="">  96     private static final int FLAG_POST_DELAY_MILLIS = 200;                                               </span>
<span  style="">  97                                                                                                          </span>
<span class="4390153378349048662" onmouseenter="enter('4390153378349048662');" onmouseout="out('4390153378349048662');" style="">  98     private View mSelectedTile;                                                                          </span>
<span  style="">  99                                                                                                          </span>
<span class="-7732371762175677472" onmouseenter="enter('-7732371762175677472');" onmouseout="out('-7732371762175677472');" style=""> 100     private boolean mIgnoreNextTap;                                                                      </span>
<span  style=""> 101                                                                                                          </span>
<span class="3263742057015850528" onmouseenter="enter('3263742057015850528');" onmouseout="out('3263742057015850528');" style=""> 102     private OnClickListener mThumbnailOnClickListener;                                                   </span>
<span  style=""> 103                                                                                                          </span>
<span class="-283642594149471002" onmouseenter="enter('-283642594149471002');" onmouseout="out('-283642594149471002');" style=""> 104     private LinearLayout mWallpapersView;                                                                </span>
<span  style=""> 105                                                                                                          </span>
<span class="-441519593320335252" onmouseenter="enter('-441519593320335252');" onmouseout="out('-441519593320335252');" style=""> 106     private View mWallpaperStrip;                                                                        </span>
<span  style=""> 107                                                                                                          </span>
<span class="1128301058468039086" onmouseenter="enter('1128301058468039086');" onmouseout="out('1128301058468039086');" style=""> 108     private ActionMode.Callback mActionModeCallback;                                                     </span>
<span  style=""> 109                                                                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 110     private ActionMode mActionMode;                                                                      </span>
<span  style=""> 111                                                                                                          </span>
<span class="8486739019347078220" onmouseenter="enter('8486739019347078220');" onmouseout="out('8486739019347078220');" style=""> 112     private View.OnLongClickListener mLongClickListener;                                                 </span>
<span  style=""> 113                                                                                                          </span>
<span class="-4348434262230128417" onmouseenter="enter('-4348434262230128417');" onmouseout="out('-4348434262230128417');" style=""> 114     ArrayList&lt;Uri&gt; mTempWallpaperTiles = new ArrayList&lt;Uri&gt;();                                           </span>
<span  style=""> 115                                                                                                          </span>
<span class="7453258409125933365" onmouseenter="enter('7453258409125933365');" onmouseout="out('7453258409125933365');" style=""> 116     private SavedWallpaperImages mSavedImages;                                                           </span>
<span  style=""> 117                                                                                                          </span>
<span class="-2427071817986839025" onmouseenter="enter('-2427071817986839025');" onmouseout="out('-2427071817986839025');" style=""> 118     private WallpaperInfo mLiveWallpaperInfoOnPickerLaunch;                                              </span>
<span  style=""> 119                                                                                                          </span>
<span class="929971389778238645" onmouseenter="enter('929971389778238645');" onmouseout="out('929971389778238645');" style=""> 120     private int mSelectedIndex = -1;                                                                     </span>
<span  style=""> 121                                                                                                          </span>
<span class="4965621051566939005" onmouseenter="enter('4965621051566939005');" onmouseout="out('4965621051566939005');" style=""> 122     private WallpaperInfo mLastClickedLiveWallpaperInfo;                                                 </span>
<span  style=""> 123                                                                                                          </span>
<span class="1552117815876792450" onmouseenter="enter('1552117815876792450');" onmouseout="out('1552117815876792450');" style=""> 124     public abstract static class WallpaperTileInfo {                                                     </span>
<span class="7550834803278421014" onmouseenter="enter('7550834803278421014');" onmouseout="out('7550834803278421014');" style=""> 125         protected View mView;                                                                            </span>
<span  style=""> 126                                                                                                          </span>
<span class="3164205720118928248" onmouseenter="enter('3164205720118928248');" onmouseout="out('3164205720118928248');" style=""> 127         public Drawable mThumb;                                                                          </span>
<span  style=""> 128                                                                                                          </span>
<span class="6316991849463108734" onmouseenter="enter('6316991849463108734');" onmouseout="out('6316991849463108734');" style=""> 129         public void setView(View v) {                                                                    </span>
<span class="-529347746759665505" onmouseenter="enter('-529347746759665505');" onmouseout="out('-529347746759665505');" style=""> 130             mView = v;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131         }                                                                                                </span>
<span  style=""> 132                                                                                                          </span>
<span class="-3695677448824564507" onmouseenter="enter('-3695677448824564507');" onmouseout="out('-3695677448824564507');" style=""> 133         public void onClick(WallpaperPickerActivity a) {}                                                </span>
<span  style=""> 134                                                                                                          </span>
<span class="-5126019138081524515" onmouseenter="enter('-5126019138081524515');" onmouseout="out('-5126019138081524515');" style=""> 135         public void onSave(WallpaperPickerActivity a) {}                                                 </span>
<span  style=""> 136                                                                                                          </span>
<span class="-7733232806592304896" onmouseenter="enter('-7733232806592304896');" onmouseout="out('-7733232806592304896');" style=""> 137         public void onDelete(WallpaperPickerActivity a) {}                                               </span>
<span  style=""> 138                                                                                                          </span>
<span class="6774579784381031072" onmouseenter="enter('6774579784381031072');" onmouseout="out('6774579784381031072');" style=""> 139         public boolean isSelectable() { return false; }                                                  </span>
<span  style=""> 140                                                                                                          </span>
<span class="5815845045888824629" onmouseenter="enter('5815845045888824629');" onmouseout="out('5815845045888824629');" style=""> 141         public boolean isNamelessWallpaper() { return false; }                                           </span>
<span  style=""> 142                                                                                                          </span>
<span class="-4275008082196176757" onmouseenter="enter('-4275008082196176757');" onmouseout="out('-4275008082196176757');" style=""> 143         public void onIndexUpdated(CharSequence label) {                                                 </span>
<span class="1066314433179649740" onmouseenter="enter('1066314433179649740');" onmouseout="out('1066314433179649740');" style=""> 144             if (isNamelessWallpaper()) {                                                                 </span>
<span class="8251992145347444102" onmouseenter="enter('8251992145347444102');" onmouseout="out('8251992145347444102');" style=""> 145                 mView.setContentDescription(label);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148     }                                                                                                    </span>
<span  style=""> 149                                                                                                          </span>
<span class="8237636954076389639" onmouseenter="enter('8237636954076389639');" onmouseout="out('8237636954076389639');" style=""> 150     public static class PickImageInfo extends WallpaperTileInfo {                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 151         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 152         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="2089748537565408969" onmouseenter="enter('2089748537565408969');" onmouseout="out('2089748537565408969');" style=""> 153             Intent intent = new Intent(Intent.ACTION_GET_CONTENT);                                       </span>
<span class="-7445763452332816798" onmouseenter="enter('-7445763452332816798');" onmouseout="out('-7445763452332816798');" style=""> 154             intent.setType(&quot;image/*&quot;);                                                                   </span>
<span class="1585161910249024870" onmouseenter="enter('1585161910249024870');" onmouseout="out('1585161910249024870');" style=""> 155             a.startActivityForResultSafely(intent, IMAGE_PICK);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="8509990706001469030" onmouseenter="enter('8509990706001469030');" onmouseout="out('8509990706001469030');" style=""> 159     public static class UriWallpaperInfo extends WallpaperTileInfo {                                     </span>
<span class="8004450152098447697" onmouseenter="enter('8004450152098447697');" onmouseout="out('8004450152098447697');" style=""> 160         private Uri mUri;                                                                                </span>
<span  style=""> 161                                                                                                          </span>
<span class="-1488686611326744898" onmouseenter="enter('-1488686611326744898');" onmouseout="out('-1488686611326744898');" style=""> 162         private boolean mFirstClick = true;                                                              </span>
<span  style=""> 163                                                                                                          </span>
<span class="6610185084821017470" onmouseenter="enter('6610185084821017470');" onmouseout="out('6610185084821017470');" style=""> 164         private BitmapRegionTileSource.UriBitmapSource mBitmapSource;                                    </span>
<span  style=""> 165                                                                                                          </span>
<span class="8610701194225596743" onmouseenter="enter('8610701194225596743');" onmouseout="out('8610701194225596743');" style=""> 166         public UriWallpaperInfo(Uri uri) {                                                               </span>
<span class="1271920698851316002" onmouseenter="enter('1271920698851316002');" onmouseout="out('1271920698851316002');" style=""> 167             mUri = uri;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168         }                                                                                                </span>
<span  style=""> 169                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170         @Override                                                                                        </span>
<span class="4138358358495509302" onmouseenter="enter('4138358358495509302');" onmouseout="out('4138358358495509302');" style=""> 171         public void onClick(final WallpaperPickerActivity a) {                                           </span>
<span class="8679558832982190034" onmouseenter="enter('8679558832982190034');" onmouseout="out('8679558832982190034');" style=""> 172             final Runnable onLoad;                                                                       </span>
<span class="8795982501973046418" onmouseenter="enter('8795982501973046418');" onmouseout="out('8795982501973046418');" style=""> 173             if (!mFirstClick) {                                                                          </span>
<span class="-4660024005754338718" onmouseenter="enter('-4660024005754338718');" onmouseout="out('-4660024005754338718');" style=""> 174                 onLoad = null;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 175             } else {                                                                                     </span>
<span class="-47635291022464950" onmouseenter="enter('-47635291022464950');" onmouseout="out('-47635291022464950');" style=""> 176                 mFirstClick = false;                                                                     </span>
<span class="2494714179697294181" onmouseenter="enter('2494714179697294181');" onmouseout="out('2494714179697294181');" style=""> 177                 a.mSetWallpaperButton.setEnabled(false);                                                 </span>
<span class="-2512757449438613240" onmouseenter="enter('-2512757449438613240');" onmouseout="out('-2512757449438613240');" style=""> 178                 onLoad = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 179                     public void run() {                                                                  </span>
<span class="-2827205266240872064" onmouseenter="enter('-2827205266240872064');" onmouseout="out('-2827205266240872064');" style=""><abbr title=" 180                         if ((mBitmapSource != null) &amp;&amp; (mBitmapSource.getLoadingState() == BitmapSource.State.LOADED)) {"> 180                         if ((mBitmapSource != null) &amp;&amp; (mBitmapSource.getLoadingState() == BitmapSource.S</abbr></span>
<span class="-4435485402424028248" onmouseenter="enter('-4435485402424028248');" onmouseout="out('-4435485402424028248');" style=""> 181                             a.selectTile(mView);                                                         </span>
<span class="-7956748308294553331" onmouseenter="enter('-7956748308294553331');" onmouseout="out('-7956748308294553331');" style=""> 182                             a.mSetWallpaperButton.setEnabled(true);                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 183                         } else {                                                                         </span>
<span class="-825818031470475396" onmouseenter="enter('-825818031470475396');" onmouseout="out('-825818031470475396');" style=""> 184                             ViewGroup parent = ((ViewGroup) (mView.getParent()));                        </span>
<span class="7363799700568464510" onmouseenter="enter('7363799700568464510');" onmouseout="out('7363799700568464510');" style=""> 185                             if (parent != null) {                                                        </span>
<span class="1125194709286705363" onmouseenter="enter('1125194709286705363');" onmouseout="out('1125194709286705363');" style=""> 186                                 parent.removeView(mView);                                                </span>
<span class="-4095925823848964002" onmouseenter="enter('-4095925823848964002');" onmouseout="out('-4095925823848964002');" style=""><abbr title=" 187                                 Toast.makeText(a, a.getString(R.string.image_load_fail), Toast.LENGTH_SHORT).show();"> 187                                 Toast.makeText(a, a.getString(R.string.image_load_fail), Toast.LENGTH_SHO</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 191                 };                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192             }                                                                                            </span>
<span class="-2917083171405460996" onmouseenter="enter('-2917083171405460996');" onmouseout="out('-2917083171405460996');" style=""><abbr title=" 193             mBitmapSource = new BitmapRegionTileSource.UriBitmapSource(a, mUri, BitmapRegionTileSource.MAX_PREVIEW_SIZE);"> 193             mBitmapSource = new BitmapRegionTileSource.UriBitmapSource(a, mUri, BitmapRegionTileSource.MA</abbr></span>
<span class="-7148866754307262491" onmouseenter="enter('-7148866754307262491');" onmouseout="out('-7148866754307262491');" style=""> 194             a.setCropViewTileSource(mBitmapSource, true, false, onLoad);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195         }                                                                                                </span>
<span  style=""> 196                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 197         @Override                                                                                        </span>
<span class="-1898343559351992508" onmouseenter="enter('-1898343559351992508');" onmouseout="out('-1898343559351992508');" style=""> 198         public void onSave(final WallpaperPickerActivity a) {                                            </span>
<span class="2587024494847424214" onmouseenter="enter('2587024494847424214');" onmouseout="out('2587024494847424214');" style=""> 199             boolean finishActivityWhenDone = true;                                                       </span>
<span class="-5468975333283797562" onmouseenter="enter('-5468975333283797562');" onmouseout="out('-5468975333283797562');" style=""> 200             OnBitmapCroppedHandler h = new OnBitmapCroppedHandler() {                                    </span>
<span class="-2021142144081785590" onmouseenter="enter('-2021142144081785590');" onmouseout="out('-2021142144081785590');" style=""> 201                 public void onBitmapCropped(byte[] imageBytes) {                                         </span>
<span class="-3067422103108397582" onmouseenter="enter('-3067422103108397582');" onmouseout="out('-3067422103108397582');" style=""> 202                     Point thumbSize = getDefaultThumbnailSize(a.getResources());                         </span>
<span class="7862344698024253739" onmouseenter="enter('7862344698024253739');" onmouseout="out('7862344698024253739');" style=""> 203                     // rotation is set to 0 since imageBytes has already been correctly rotated          </span>
<span class="1725565692823650889" onmouseenter="enter('1725565692823650889');" onmouseout="out('1725565692823650889');" style=""> 204                     Bitmap thumb = createThumbnail(                                                      </span>
<span class="6073449064591225469" onmouseenter="enter('6073449064591225469');" onmouseout="out('6073449064591225469');" style=""> 205                             thumbSize, null, null, imageBytes, null, 0, 0, true);                        </span>
<span class="2596245612370871573" onmouseenter="enter('2596245612370871573');" onmouseout="out('2596245612370871573');" style=""> 206                     a.getSavedImages().writeImage(thumb, imageBytes);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 208             };                                                                                           </span>
<span class="-4894948951423183692" onmouseenter="enter('-4894948951423183692');" onmouseout="out('-4894948951423183692');" style=""> 209             a.cropImageAndSetWallpaper(mUri, h, finishActivityWhenDone);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210         }                                                                                                </span>
<span  style=""> 211                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 212         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 213         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 214             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215         }                                                                                                </span>
<span  style=""> 216                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 217         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 218         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 219             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221     }                                                                                                    </span>
<span  style=""> 222                                                                                                          </span>
<span class="-4190074108086167067" onmouseenter="enter('-4190074108086167067');" onmouseout="out('-4190074108086167067');" style=""> 223     public static class FileWallpaperInfo extends WallpaperTileInfo {                                    </span>
<span class="-7985382265690223755" onmouseenter="enter('-7985382265690223755');" onmouseout="out('-7985382265690223755');" style=""> 224         private File mFile;                                                                              </span>
<span  style=""> 225                                                                                                          </span>
<span class="-1741311432485362981" onmouseenter="enter('-1741311432485362981');" onmouseout="out('-1741311432485362981');" style=""> 226         public FileWallpaperInfo(File target, Drawable thumb) {                                          </span>
<span class="4814381598022211544" onmouseenter="enter('4814381598022211544');" onmouseout="out('4814381598022211544');" style=""> 227             mFile = target;                                                                              </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 228             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229         }                                                                                                </span>
<span  style=""> 230                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 231         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 232         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="-8750527241018834281" onmouseenter="enter('-8750527241018834281');" onmouseout="out('-8750527241018834281');" style=""> 233             BitmapRegionTileSource.UriBitmapSource bitmapSource =                                        </span>
<span class="2483734173143161809" onmouseenter="enter('2483734173143161809');" onmouseout="out('2483734173143161809');" style=""> 234                     new BitmapRegionTileSource.UriBitmapSource(a, Uri.fromFile(mFile), 1024);            </span>
<span class="-5075441127387044752" onmouseenter="enter('-5075441127387044752');" onmouseout="out('-5075441127387044752');" style=""> 235             a.setCropViewTileSource(bitmapSource, false, true, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236         }                                                                                                </span>
<span  style=""> 237                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 238         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 239         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="3801787756410673434" onmouseenter="enter('3801787756410673434');" onmouseout="out('3801787756410673434');" style=""> 240             a.setWallpaper(Uri.fromFile(mFile), true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241         }                                                                                                </span>
<span  style=""> 242                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 243         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 244         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 245             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246         }                                                                                                </span>
<span  style=""> 247                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 248         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 249         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 250             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252     }                                                                                                    </span>
<span  style=""> 253                                                                                                          </span>
<span class="4482520304290563098" onmouseenter="enter('4482520304290563098');" onmouseout="out('4482520304290563098');" style=""> 254     public static class ResourceWallpaperInfo extends WallpaperTileInfo {                                </span>
<span class="-4981714113555710279" onmouseenter="enter('-4981714113555710279');" onmouseout="out('-4981714113555710279');" style=""> 255         private Resources mResources;                                                                    </span>
<span  style=""> 256                                                                                                          </span>
<span class="739042083917827597" onmouseenter="enter('739042083917827597');" onmouseout="out('739042083917827597');" style=""> 257         private int mResId;                                                                              </span>
<span  style=""> 258                                                                                                          </span>
<span class="-3210764035307017816" onmouseenter="enter('-3210764035307017816');" onmouseout="out('-3210764035307017816');" style=""> 259         public ResourceWallpaperInfo(Resources res, int resId, Drawable thumb) {                         </span>
<span class="8738901641718599503" onmouseenter="enter('8738901641718599503');" onmouseout="out('8738901641718599503');" style=""> 260             mResources = res;                                                                            </span>
<span class="4654100838271737112" onmouseenter="enter('4654100838271737112');" onmouseout="out('4654100838271737112');" style=""> 261             mResId = resId;                                                                              </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 262             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263         }                                                                                                </span>
<span  style=""> 264                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 265         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 266         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="1712051513930711332" onmouseenter="enter('1712051513930711332');" onmouseout="out('1712051513930711332');" style=""><abbr title=" 267             BitmapRegionTileSource.ResourceBitmapSource bitmapSource = new BitmapRegionTileSource.ResourceBitmapSource(mResources, mResId, BitmapRegionTileSource.MAX_PREVIEW_SIZE);"> 267             BitmapRegionTileSource.ResourceBitmapSource bitmapSource = new BitmapRegionTileSource.Resourc</abbr></span>
<span class="2218452414014258741" onmouseenter="enter('2218452414014258741');" onmouseout="out('2218452414014258741');" style=""> 268             bitmapSource.loadInBackground();                                                             </span>
<span class="7058429795285354581" onmouseenter="enter('7058429795285354581');" onmouseout="out('7058429795285354581');" style=""> 269             BitmapRegionTileSource source = new BitmapRegionTileSource(a, bitmapSource);                 </span>
<span class="1481068659103378542" onmouseenter="enter('1481068659103378542');" onmouseout="out('1481068659103378542');" style=""> 270             CropView v = a.getCropView();                                                                </span>
<span class="7170858028895783855" onmouseenter="enter('7170858028895783855');" onmouseout="out('7170858028895783855');" style=""> 271             v.setTileSource(source, null);                                                               </span>
<span class="-2685605678754689153" onmouseenter="enter('-2685605678754689153');" onmouseout="out('-2685605678754689153');" style=""><abbr title=" 272             Point wallpaperSize = WallpaperCropActivity.getDefaultWallpaperSize(a.getResources(), a.getWindowManager());"> 272             Point wallpaperSize = WallpaperCropActivity.getDefaultWallpaperSize(a.getResources(), a.getWi</abbr></span>
<span class="-8385603959850838437" onmouseenter="enter('-8385603959850838437');" onmouseout="out('-8385603959850838437');" style=""><abbr title=" 273             RectF crop = WallpaperCropActivity.getMaxCropRect(source.getImageWidth(), source.getImageHeight(), wallpaperSize.x, wallpaperSize.y, false);"> 273             RectF crop = WallpaperCropActivity.getMaxCropRect(source.getImageWidth(), source.getImageHeig</abbr></span>
<span class="8890199765694503418" onmouseenter="enter('8890199765694503418');" onmouseout="out('8890199765694503418');" style=""> 274             v.setScale(wallpaperSize.x / crop.width());                                                  </span>
<span class="5781800255248373469" onmouseenter="enter('5781800255248373469');" onmouseout="out('5781800255248373469');" style=""> 275             v.setTouchEnabled(false);                                                                    </span>
<span class="8306233968260689021" onmouseenter="enter('8306233968260689021');" onmouseout="out('8306233968260689021');" style=""> 276             a.setSystemWallpaperVisiblity(false);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277         }                                                                                                </span>
<span  style=""> 278                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 279         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 280         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="2587024494847424214" onmouseenter="enter('2587024494847424214');" onmouseout="out('2587024494847424214');" style=""> 281             boolean finishActivityWhenDone = true;                                                       </span>
<span class="870771120792411608" onmouseenter="enter('870771120792411608');" onmouseout="out('870771120792411608');" style=""> 282             a.cropImageAndSetWallpaper(mResources, mResId, finishActivityWhenDone);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283         }                                                                                                </span>
<span  style=""> 284                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 285         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 286         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 287             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288         }                                                                                                </span>
<span  style=""> 289                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 290         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 291         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 292             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294     }                                                                                                    </span>
<span  style=""> 295                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 296     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-529309049483586312" onmouseenter="enter('-529309049483586312');" onmouseout="out('-529309049483586312');" style=""> 297     public static class DefaultWallpaperInfo extends WallpaperTileInfo {                                 </span>
<span class="461095260062433386" onmouseenter="enter('461095260062433386');" onmouseout="out('461095260062433386');" style=""> 298         public DefaultWallpaperInfo(Drawable thumb) {                                                    </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 299             mThumb = thumb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300         }                                                                                                </span>
<span  style=""> 301                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 302         @Override                                                                                        </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 303         public void onClick(WallpaperPickerActivity a) {                                                 </span>
<span class="5819053214355424889" onmouseenter="enter('5819053214355424889');" onmouseout="out('5819053214355424889');" style=""> 304             CropView c = a.getCropView();                                                                </span>
<span class="-8293983021083281940" onmouseenter="enter('-8293983021083281940');" onmouseout="out('-8293983021083281940');" style=""><abbr title=" 305             Drawable defaultWallpaper = WallpaperManager.getInstance(a).getBuiltInDrawable(c.getWidth(), c.getHeight(), false, 0.5F, 0.5F);"> 305             Drawable defaultWallpaper = WallpaperManager.getInstance(a).getBuiltInDrawable(c.getWidth(), </abbr></span>
<span class="-2361710212545761200" onmouseenter="enter('-2361710212545761200');" onmouseout="out('-2361710212545761200');" style=""> 306             if (defaultWallpaper == null) {                                                              </span>
<span class="6243043845794415874" onmouseenter="enter('6243043845794415874');" onmouseout="out('6243043845794415874');" style=""> 307                 Log.w(TAG, &quot;Null default wallpaper encountered.&quot;);                                       </span>
<span class="-5029196267720010633" onmouseenter="enter('-5029196267720010633');" onmouseout="out('-5029196267720010633');" style=""> 308                 c.setTileSource(null, null);                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 309                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310             }                                                                                            </span>
<span class="7470614931242067756" onmouseenter="enter('7470614931242067756');" onmouseout="out('7470614931242067756');" style=""><abbr title=" 311             c.setTileSource(new DrawableTileSource(a, defaultWallpaper, DrawableTileSource.MAX_PREVIEW_SIZE), null);"> 311             c.setTileSource(new DrawableTileSource(a, defaultWallpaper, DrawableTileSource.MAX_PREVIEW_SI</abbr></span>
<span class="9190962997951783113" onmouseenter="enter('9190962997951783113');" onmouseout="out('9190962997951783113');" style=""> 312             c.setScale(1.0F);                                                                            </span>
<span class="-2853419027579511743" onmouseenter="enter('-2853419027579511743');" onmouseout="out('-2853419027579511743');" style=""> 313             c.setTouchEnabled(false);                                                                    </span>
<span class="8306233968260689021" onmouseenter="enter('8306233968260689021');" onmouseout="out('8306233968260689021');" style=""> 314             a.setSystemWallpaperVisiblity(false);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315         }                                                                                                </span>
<span  style=""> 316                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 317         @Override                                                                                        </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 318         public void onSave(WallpaperPickerActivity a) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 319             try {                                                                                        </span>
<span class="7067546428920692022" onmouseenter="enter('7067546428920692022');" onmouseout="out('7067546428920692022');" style=""> 320                 WallpaperManager.getInstance(a).clear();                                                 </span>
<span class="-6231188240415860412" onmouseenter="enter('-6231188240415860412');" onmouseout="out('-6231188240415860412');" style=""> 321                 a.setResult(RESULT_OK);                                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 322             } catch (IOException e) {                                                                    </span>
<span class="5382996693541062495" onmouseenter="enter('5382996693541062495');" onmouseout="out('5382996693541062495');" style=""> 323                 Log.w(&quot;Setting wallpaper to default threw exception&quot;, e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324             }                                                                                            </span>
<span class="6929368672411603344" onmouseenter="enter('6929368672411603344');" onmouseout="out('6929368672411603344');" style=""> 325             a.finish();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326         }                                                                                                </span>
<span  style=""> 327                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 328         @Override                                                                                        </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 329         public boolean isSelectable() {                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 330             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331         }                                                                                                </span>
<span  style=""> 332                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 333         @Override                                                                                        </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 334         public boolean isNamelessWallpaper() {                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 335             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337     }                                                                                                    </span>
<span  style=""> 338                                                                                                          </span>
<span class="-8802765780262582525" onmouseenter="enter('-8802765780262582525');" onmouseout="out('-8802765780262582525');" style=""> 339     public void setWallpaperStripYOffset(float offset) {                                                 </span>
<span class="3084906213280284447" onmouseenter="enter('3084906213280284447');" onmouseout="out('3084906213280284447');" style=""> 340         mWallpaperStrip.setPadding(0, 0, 0, (int) offset);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341     }                                                                                                    </span>
<span  style=""> 342                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 343     /**                                                                                                  </span>
<span class="-6795170733611954418" onmouseenter="enter('-6795170733611954418');" onmouseout="out('-6795170733611954418');" style=""> 344      * shows the system wallpaper behind the window and hides the {@link                                 </span>
<span class="6653510374782541379" onmouseenter="enter('6653510374782541379');" onmouseout="out('6653510374782541379');" style=""> 345      * #mCropView} if visible                                                                            </span>
<span class="-919436548065776589" onmouseenter="enter('-919436548065776589');" onmouseout="out('-919436548065776589');" style=""> 346      * @param visible should the system wallpaper be shown                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 347      */                                                                                                  </span>
<span class="8447968906987641681" onmouseenter="enter('8447968906987641681');" onmouseout="out('8447968906987641681');" style=""> 348     protected void setSystemWallpaperVisiblity(final boolean visible) {                                  </span>
<span class="-417710703620962362" onmouseenter="enter('-417710703620962362');" onmouseout="out('-417710703620962362');" style=""> 349         // hide our own wallpaper preview if necessary                                                   </span>
<span class="5885318085227755768" onmouseenter="enter('5885318085227755768');" onmouseout="out('5885318085227755768');" style=""> 350         if(!visible) {                                                                                   </span>
<span class="2194873949088634393" onmouseenter="enter('2194873949088634393');" onmouseout="out('2194873949088634393');" style=""> 351             mCropView.setVisibility(View.VISIBLE);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 352         } else {                                                                                         </span>
<span class="7308551084636696682" onmouseenter="enter('7308551084636696682');" onmouseout="out('7308551084636696682');" style=""> 353             changeWallpaperFlags(visible);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354         }                                                                                                </span>
<span class="1679109329919957838" onmouseenter="enter('1679109329919957838');" onmouseout="out('1679109329919957838');" style=""> 355         // the change of the flag must be delayed in order to avoid flickering,                          </span>
<span class="-5970233735028176128" onmouseenter="enter('-5970233735028176128');" onmouseout="out('-5970233735028176128');" style=""> 356         // a simple post / double post does not suffice here                                             </span>
<span class="-7176702322471341093" onmouseenter="enter('-7176702322471341093');" onmouseout="out('-7176702322471341093');" style=""> 357         mCropView.postDelayed(new Runnable() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 358             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 359             public void run() {                                                                          </span>
<span class="5885318085227755768" onmouseenter="enter('5885318085227755768');" onmouseout="out('5885318085227755768');" style=""> 360                 if(!visible) {                                                                           </span>
<span class="7308551084636696682" onmouseenter="enter('7308551084636696682');" onmouseout="out('7308551084636696682');" style=""> 361                     changeWallpaperFlags(visible);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 362                 } else {                                                                                 </span>
<span class="-3429704510316414264" onmouseenter="enter('-3429704510316414264');" onmouseout="out('-3429704510316414264');" style=""> 363                     mCropView.setVisibility(View.INVISIBLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365             }                                                                                            </span>
<span class="-8235668854014933241" onmouseenter="enter('-8235668854014933241');" onmouseout="out('-8235668854014933241');" style=""> 366         }, FLAG_POST_DELAY_MILLIS);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367     }                                                                                                    </span>
<span  style=""> 368                                                                                                          </span>
<span class="3592826325976819586" onmouseenter="enter('3592826325976819586');" onmouseout="out('3592826325976819586');" style=""> 369     private void changeWallpaperFlags(boolean visible) {                                                 </span>
<span class="-4776685467772035793" onmouseenter="enter('-4776685467772035793');" onmouseout="out('-4776685467772035793');" style=""> 370         int desiredWallpaperFlag = visible ? WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER : 0;         </span>
<span class="8691025336291682453" onmouseenter="enter('8691025336291682453');" onmouseout="out('8691025336291682453');" style=""> 371         int currentWallpaperFlag = getWindow().getAttributes().flags                                     </span>
<span class="8282067317873610301" onmouseenter="enter('8282067317873610301');" onmouseout="out('8282067317873610301');" style=""> 372                 &amp; WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER;                                        </span>
<span class="-1167218077091760817" onmouseenter="enter('-1167218077091760817');" onmouseout="out('-1167218077091760817');" style=""> 373         if (desiredWallpaperFlag != currentWallpaperFlag) {                                              </span>
<span class="2391614469750626890" onmouseenter="enter('2391614469750626890');" onmouseout="out('2391614469750626890');" style=""> 374             getWindow().setFlags(desiredWallpaperFlag,                                                   </span>
<span class="350679169211130451" onmouseenter="enter('350679169211130451');" onmouseout="out('350679169211130451');" style=""> 375                     WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377     }                                                                                                    </span>
<span  style=""> 378                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 379     @Override                                                                                            </span>
<span class="1140607717618445838" onmouseenter="enter('1140607717618445838');" onmouseout="out('1140607717618445838');" style=""> 380     public void setCropViewTileSource(BitmapSource bitmapSource,                                         </span>
<span class="4950213883544597262" onmouseenter="enter('4950213883544597262');" onmouseout="out('4950213883544597262');" style=""> 381                                       boolean touchEnabled,                                              </span>
<span class="-6368270284124027023" onmouseenter="enter('-6368270284124027023');" onmouseout="out('-6368270284124027023');" style=""> 382                                       boolean moveToLeft,                                                </span>
<span class="177276617274926150" onmouseenter="enter('177276617274926150');" onmouseout="out('177276617274926150');" style=""> 383                                       final Runnable postExecute) {                                      </span>
<span class="-5291509537717890007" onmouseenter="enter('-5291509537717890007');" onmouseout="out('-5291509537717890007');" style=""> 384         // we also want to show our own wallpaper instead of the one in the background                   </span>
<span class="5047660510705185298" onmouseenter="enter('5047660510705185298');" onmouseout="out('5047660510705185298');" style=""> 385         Runnable showPostExecuteRunnable = new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 386             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 387             public void run() {                                                                          </span>
<span class="6334360039402158540" onmouseenter="enter('6334360039402158540');" onmouseout="out('6334360039402158540');" style=""> 388                 if(postExecute != null) {                                                                </span>
<span class="-8492134334118709687" onmouseenter="enter('-8492134334118709687');" onmouseout="out('-8492134334118709687');" style=""> 389                     postExecute.run();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390                 }                                                                                        </span>
<span class="-561940081499707422" onmouseenter="enter('-561940081499707422');" onmouseout="out('-561940081499707422');" style=""> 391                 setSystemWallpaperVisiblity(false);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 393         };                                                                                               </span>
<span class="-4658752126328035538" onmouseenter="enter('-4658752126328035538');" onmouseout="out('-4658752126328035538');" style=""> 394         super.setCropViewTileSource(bitmapSource,                                                        </span>
<span class="5417365411554046888" onmouseenter="enter('5417365411554046888');" onmouseout="out('5417365411554046888');" style=""> 395                 touchEnabled,                                                                            </span>
<span class="4993650789095952145" onmouseenter="enter('4993650789095952145');" onmouseout="out('4993650789095952145');" style=""> 396                 moveToLeft,                                                                              </span>
<span class="5392505438861518590" onmouseenter="enter('5392505438861518590');" onmouseout="out('5392505438861518590');" style=""> 397                 showPostExecuteRunnable);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398     }                                                                                                    </span>
<span  style=""> 399                                                                                                          </span>
<span class="5854257451777934287" onmouseenter="enter('5854257451777934287');" onmouseout="out('5854257451777934287');" style=""> 400     // called by onCreate; this is subclassed to overwrite WallpaperCropActivity                         </span>
<span class="-2182533896997661648" onmouseenter="enter('-2182533896997661648');" onmouseout="out('-2182533896997661648');" style=""> 401     protected void init() {                                                                              </span>
<span class="2979438704186700018" onmouseenter="enter('2979438704186700018');" onmouseout="out('2979438704186700018');" style=""> 402         setContentView(R.layout.wallpaper_picker);                                                       </span>
<span class="-931040194435069162" onmouseenter="enter('-931040194435069162');" onmouseout="out('-931040194435069162');" style=""> 403         mCropView = ((CropView) (findViewById(R.id.cropView)));                                          </span>
<span class="-3429704510316414264" onmouseenter="enter('-3429704510316414264');" onmouseout="out('-3429704510316414264');" style=""> 404         mCropView.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-2578053662916702311" onmouseenter="enter('-2578053662916702311');" onmouseout="out('-2578053662916702311');" style=""> 405         mWallpaperStrip = findViewById(R.id.wallpaper_strip);                                            </span>
<span class="8068618426611567623" onmouseenter="enter('8068618426611567623');" onmouseout="out('8068618426611567623');" style=""> 406         mCropView.setTouchCallback(new CropView.TouchCallback() {                                        </span>
<span class="-1035492205097680166" onmouseenter="enter('-1035492205097680166');" onmouseout="out('-1035492205097680166');" style=""> 407             ViewPropertyAnimator mAnim;                                                                  </span>
<span  style=""> 408                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 409             @Override                                                                                    </span>
<span class="1626698357951932531" onmouseenter="enter('1626698357951932531');" onmouseout="out('1626698357951932531');" style=""> 410             public void onTouchDown() {                                                                  </span>
<span class="-2973121909455018733" onmouseenter="enter('-2973121909455018733');" onmouseout="out('-2973121909455018733');" style=""> 411                 if (mAnim != null) {                                                                     </span>
<span class="-9205181203898657288" onmouseenter="enter('-9205181203898657288');" onmouseout="out('-9205181203898657288');" style=""> 412                     mAnim.cancel();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413                 }                                                                                        </span>
<span class="-5760385739078408551" onmouseenter="enter('-5760385739078408551');" onmouseout="out('-5760385739078408551');" style=""> 414                 if (mWallpaperStrip.getAlpha() == 1.0F) {                                                </span>
<span class="-3956321380048081036" onmouseenter="enter('-3956321380048081036');" onmouseout="out('-3956321380048081036');" style=""> 415                     mIgnoreNextTap = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416                 }                                                                                        </span>
<span class="-6956982405463185167" onmouseenter="enter('-6956982405463185167');" onmouseout="out('-6956982405463185167');" style=""> 417                 mAnim = mWallpaperStrip.animate();                                                       </span>
<span class="2905213122733825699" onmouseenter="enter('2905213122733825699');" onmouseout="out('2905213122733825699');" style=""> 418                 mAnim.alpha(0.0F).setDuration(150).withEndAction(new Runnable() {                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 419                     public void run() {                                                                  </span>
<span class="5391643758310247109" onmouseenter="enter('5391643758310247109');" onmouseout="out('5391643758310247109');" style=""> 420                         mWallpaperStrip.setVisibility(View.INVISIBLE);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 422                 });                                                                                      </span>
<span class="2865894063015719982" onmouseenter="enter('2865894063015719982');" onmouseout="out('2865894063015719982');" style=""> 423                 mAnim.setInterpolator(new AccelerateInterpolator(0.75F));                                </span>
<span class="3184709938218096424" onmouseenter="enter('3184709938218096424');" onmouseout="out('3184709938218096424');" style=""> 424                 mAnim.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425             }                                                                                            </span>
<span  style=""> 426                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 427             @Override                                                                                    </span>
<span class="-4028587905866202696" onmouseenter="enter('-4028587905866202696');" onmouseout="out('-4028587905866202696');" style=""> 428             public void onTouchUp() {                                                                    </span>
<span class="2725693883097632090" onmouseenter="enter('2725693883097632090');" onmouseout="out('2725693883097632090');" style=""> 429                 mIgnoreNextTap = false;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430             }                                                                                            </span>
<span  style=""> 431                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 432             @Override                                                                                    </span>
<span class="-7758883269909585068" onmouseenter="enter('-7758883269909585068');" onmouseout="out('-7758883269909585068');" style=""> 433             public void onTap() {                                                                        </span>
<span class="6942313366430007213" onmouseenter="enter('6942313366430007213');" onmouseout="out('6942313366430007213');" style=""> 434                 boolean ignoreTap = mIgnoreNextTap;                                                      </span>
<span class="2725693883097632090" onmouseenter="enter('2725693883097632090');" onmouseout="out('2725693883097632090');" style=""> 435                 mIgnoreNextTap = false;                                                                  </span>
<span class="387446229183659648" onmouseenter="enter('387446229183659648');" onmouseout="out('387446229183659648');" style=""> 436                 if (!ignoreTap) {                                                                        </span>
<span class="-2973121909455018733" onmouseenter="enter('-2973121909455018733');" onmouseout="out('-2973121909455018733');" style=""> 437                     if (mAnim != null) {                                                                 </span>
<span class="-9205181203898657288" onmouseenter="enter('-9205181203898657288');" onmouseout="out('-9205181203898657288');" style=""> 438                         mAnim.cancel();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439                     }                                                                                    </span>
<span class="2849585250197552354" onmouseenter="enter('2849585250197552354');" onmouseout="out('2849585250197552354');" style=""> 440                     mWallpaperStrip.setVisibility(View.VISIBLE);                                         </span>
<span class="-6956982405463185167" onmouseenter="enter('-6956982405463185167');" onmouseout="out('-6956982405463185167');" style=""> 441                     mAnim = mWallpaperStrip.animate();                                                   </span>
<span class="-6153550558078330513" onmouseenter="enter('-6153550558078330513');" onmouseout="out('-6153550558078330513');" style=""><abbr title=" 442                     mAnim.alpha(1.0F).setDuration(150).setInterpolator(new DecelerateInterpolator(0.75F));"> 442                     mAnim.alpha(1.0F).setDuration(150).setInterpolator(new DecelerateInterpolator(0.75F))</abbr></span>
<span class="3184709938218096424" onmouseenter="enter('3184709938218096424');" onmouseout="out('3184709938218096424');" style=""> 443                     mAnim.start();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 446         });                                                                                              </span>
<span class="-773253411800983412" onmouseenter="enter('-773253411800983412');" onmouseout="out('-773253411800983412');" style=""> 447         mThumbnailOnClickListener = new OnClickListener() {                                              </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 448             public void onClick(View v) {                                                                </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 449                 if (mActionMode != null) {                                                               </span>
<span class="-7945425703771551193" onmouseenter="enter('-7945425703771551193');" onmouseout="out('-7945425703771551193');" style=""> 450                     // When CAB is up, clicking toggles the item instead                                 </span>
<span class="8281773320045926887" onmouseenter="enter('8281773320045926887');" onmouseout="out('8281773320045926887');" style=""> 451                     if (v.isLongClickable()) {                                                           </span>
<span class="-1009252700459954960" onmouseenter="enter('-1009252700459954960');" onmouseout="out('-1009252700459954960');" style=""> 452                         mLongClickListener.onLongClick(v);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453                     }                                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 454                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455                 }                                                                                        </span>
<span class="-5998802208600738538" onmouseenter="enter('-5998802208600738538');" onmouseout="out('-5998802208600738538');" style=""> 456                 mSetWallpaperButton.setEnabled(true);                                                    </span>
<span class="-7948636395986712724" onmouseenter="enter('-7948636395986712724');" onmouseout="out('-7948636395986712724');" style=""> 457                 WallpaperTileInfo info = ((WallpaperTileInfo) (v.getTag()));                             </span>
<span class="-1219578607521931242" onmouseenter="enter('-1219578607521931242');" onmouseout="out('-1219578607521931242');" style=""> 458                 if (info.isSelectable() &amp;&amp; (v.getVisibility() == View.VISIBLE)) {                        </span>
<span class="-4588532236714287793" onmouseenter="enter('-4588532236714287793');" onmouseout="out('-4588532236714287793');" style=""> 459                     selectTile(v);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                 }                                                                                        </span>
<span class="8040467138641960798" onmouseenter="enter('8040467138641960798');" onmouseout="out('8040467138641960798');" style=""> 461                 info.onClick(WallpaperPickerActivity.this);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 463         };                                                                                               </span>
<span class="-8969101037229031036" onmouseenter="enter('-8969101037229031036');" onmouseout="out('-8969101037229031036');" style=""> 464         mLongClickListener = new View.OnLongClickListener() {                                            </span>
<span class="-5185673936905803234" onmouseenter="enter('-5185673936905803234');" onmouseout="out('-5185673936905803234');" style=""> 465             // Called when the user long-clicks on someView                                              </span>
<span class="4352920324548579969" onmouseenter="enter('4352920324548579969');" onmouseout="out('4352920324548579969');" style=""> 466             public boolean onLongClick(View view) {                                                      </span>
<span class="2455328089369153673" onmouseenter="enter('2455328089369153673');" onmouseout="out('2455328089369153673');" style=""> 467                 CheckableFrameLayout c = ((CheckableFrameLayout) (view));                                </span>
<span class="17729423456607520" onmouseenter="enter('17729423456607520');" onmouseout="out('17729423456607520');" style=""> 468                 c.toggle();                                                                              </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 469                 if (mActionMode != null) {                                                               </span>
<span class="-102618795880011952" onmouseenter="enter('-102618795880011952');" onmouseout="out('-102618795880011952');" style=""> 470                     mActionMode.invalidate();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 471                 } else {                                                                                 </span>
<span class="-9026698002389905756" onmouseenter="enter('-9026698002389905756');" onmouseout="out('-9026698002389905756');" style=""> 472                     // Start the CAB using the ActionMode.Callback defined below                         </span>
<span class="-65256925409540847" onmouseenter="enter('-65256925409540847');" onmouseout="out('-65256925409540847');" style=""> 473                     mActionMode = startActionMode(mActionModeCallback);                                  </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 474                     int childCount = mWallpapersView.getChildCount();                                    </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 475                     for (int i = 0; i &lt; childCount; i++) {                                               </span>
<span class="8061120510894137201" onmouseenter="enter('8061120510894137201');" onmouseout="out('8061120510894137201');" style=""> 476                         mWallpapersView.getChildAt(i).setSelected(false);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 478                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 479                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 481         };                                                                                               </span>
<span class="5863981315080253557" onmouseenter="enter('5863981315080253557');" onmouseout="out('5863981315080253557');" style=""> 482         // Populate the built-in wallpapers                                                              </span>
<span class="-6274410391280341112" onmouseenter="enter('-6274410391280341112');" onmouseout="out('-6274410391280341112');" style=""> 483         ArrayList&lt;WallpaperTileInfo&gt; wallpapers = findBundledWallpapers();                               </span>
<span class="7569625928446244544" onmouseenter="enter('7569625928446244544');" onmouseout="out('7569625928446244544');" style=""> 484         mWallpapersView = ((LinearLayout) (findViewById(R.id.wallpaper_list)));                          </span>
<span class="-2971214249397723609" onmouseenter="enter('-2971214249397723609');" onmouseout="out('-2971214249397723609');" style=""> 485         SimpleWallpapersAdapter ia = new SimpleWallpapersAdapter(this, wallpapers);                      </span>
<span class="1613737006506352436" onmouseenter="enter('1613737006506352436');" onmouseout="out('1613737006506352436');" style=""> 486         populateWallpapersFromAdapter(mWallpapersView, ia, false);                                       </span>
<span class="-6274271967551788045" onmouseenter="enter('-6274271967551788045');" onmouseout="out('-6274271967551788045');" style=""> 487         // Populate the saved wallpapers                                                                 </span>
<span class="-593929748363635247" onmouseenter="enter('-593929748363635247');" onmouseout="out('-593929748363635247');" style=""> 488         mSavedImages = new SavedWallpaperImages(this);                                                   </span>
<span class="-944718586241422514" onmouseenter="enter('-944718586241422514');" onmouseout="out('-944718586241422514');" style=""> 489         mSavedImages.loadThumbnailsAndImageIdList();                                                     </span>
<span class="3791789265677239077" onmouseenter="enter('3791789265677239077');" onmouseout="out('3791789265677239077');" style=""> 490         populateWallpapersFromAdapter(mWallpapersView, mSavedImages, true);                              </span>
<span class="-8704527322237514837" onmouseenter="enter('-8704527322237514837');" onmouseout="out('-8704527322237514837');" style=""> 491         // Populate the live wallpapers                                                                  </span>
<span class="-4248693169493543059" onmouseenter="enter('-4248693169493543059');" onmouseout="out('-4248693169493543059');" style=""><abbr title=" 492         final LinearLayout liveWallpapersView = ((LinearLayout) (findViewById(R.id.live_wallpaper_list)));"> 492         final LinearLayout liveWallpapersView = ((LinearLayout) (findViewById(R.id.live_wallpaper_list)))</abbr></span>
<span class="-8599704022634275072" onmouseenter="enter('-8599704022634275072');" onmouseout="out('-8599704022634275072');" style=""> 493         final LiveWallpaperListAdapter a = new LiveWallpaperListAdapter(this);                           </span>
<span class="7657389333195170209" onmouseenter="enter('7657389333195170209');" onmouseout="out('7657389333195170209');" style=""> 494         a.registerDataSetObserver(new DataSetObserver() {                                                </span>
<span class="2979494936249539834" onmouseenter="enter('2979494936249539834');" onmouseout="out('2979494936249539834');" style=""> 495             public void onChanged() {                                                                    </span>
<span class="-1492802084192978474" onmouseenter="enter('-1492802084192978474');" onmouseout="out('-1492802084192978474');" style=""> 496                 liveWallpapersView.removeAllViews();                                                     </span>
<span class="3875768049007720660" onmouseenter="enter('3875768049007720660');" onmouseout="out('3875768049007720660');" style=""> 497                 populateWallpapersFromAdapter(liveWallpapersView, a, false);                             </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style=""> 498                 initializeScrollForRtl();                                                                </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 499                 updateTileIndices();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 501         });                                                                                              </span>
<span class="-205780312699671492" onmouseenter="enter('-205780312699671492');" onmouseout="out('-205780312699671492');" style=""> 502         // Populate the third-party wallpaper pickers                                                    </span>
<span class="-6657375884004433576" onmouseenter="enter('-6657375884004433576');" onmouseout="out('-6657375884004433576');" style=""><abbr title=" 503         final LinearLayout thirdPartyWallpapersView = ((LinearLayout) (findViewById(R.id.third_party_wallpaper_list)));"> 503         final LinearLayout thirdPartyWallpapersView = ((LinearLayout) (findViewById(R.id.third_party_wall</abbr></span>
<span class="-8163966489981589023" onmouseenter="enter('-8163966489981589023');" onmouseout="out('-8163966489981589023');" style=""> 504         final ThirdPartyWallpaperPickerListAdapter ta = new ThirdPartyWallpaperPickerListAdapter(this);  </span>
<span class="-7445625898420221963" onmouseenter="enter('-7445625898420221963');" onmouseout="out('-7445625898420221963');" style=""> 505         populateWallpapersFromAdapter(thirdPartyWallpapersView, ta, false);                              </span>
<span class="4527492266177887191" onmouseenter="enter('4527492266177887191');" onmouseout="out('4527492266177887191');" style=""> 506         // Add a tile for the Gallery                                                                    </span>
<span class="-8566127496010530933" onmouseenter="enter('-8566127496010530933');" onmouseout="out('-8566127496010530933');" style=""> 507         LinearLayout masterWallpaperList = ((LinearLayout) (findViewById(R.id.master_wallpaper_list)));  </span>
<span class="-9615167839790529" onmouseenter="enter('-9615167839790529');" onmouseout="out('-9615167839790529');" style=""><abbr title=" 508         FrameLayout pickImageTile = ((FrameLayout) (getLayoutInflater().inflate(R.layout.wallpaper_picker_image_picker_item, masterWallpaperList, false)));"> 508         FrameLayout pickImageTile = ((FrameLayout) (getLayoutInflater().inflate(R.layout.wallpaper_picker</abbr></span>
<span class="2326204380171439497" onmouseenter="enter('2326204380171439497');" onmouseout="out('2326204380171439497');" style=""> 509         setWallpaperItemPaddingToZero(pickImageTile);                                                    </span>
<span class="-4838121476786006009" onmouseenter="enter('-4838121476786006009');" onmouseout="out('-4838121476786006009');" style=""> 510         masterWallpaperList.addView(pickImageTile, 0);                                                   </span>
<span class="-8054039016662892826" onmouseenter="enter('-8054039016662892826');" onmouseout="out('-8054039016662892826');" style=""> 511         // Make its background the last photo taken on external storage                                  </span>
<span class="5284589790222029877" onmouseenter="enter('5284589790222029877');" onmouseout="out('5284589790222029877');" style=""> 512         Bitmap lastPhoto = getThumbnailOfLastPhoto();                                                    </span>
<span class="8723279423157572309" onmouseenter="enter('8723279423157572309');" onmouseout="out('8723279423157572309');" style=""> 513         if (lastPhoto != null) {                                                                         </span>
<span class="-6758845153172590374" onmouseenter="enter('-6758845153172590374');" onmouseout="out('-6758845153172590374');" style=""><abbr title=" 514             ImageView galleryThumbnailBg = ((ImageView) (pickImageTile.findViewById(R.id.wallpaper_image)));"> 514             ImageView galleryThumbnailBg = ((ImageView) (pickImageTile.findViewById(R.id.wallpaper_image)</abbr></span>
<span class="-9209586398559028294" onmouseenter="enter('-9209586398559028294');" onmouseout="out('-9209586398559028294');" style=""> 515             galleryThumbnailBg.setImageBitmap(getThumbnailOfLastPhoto());                                </span>
<span class="624469022368512634" onmouseenter="enter('624469022368512634');" onmouseout="out('624469022368512634');" style=""> 516             int colorOverlay = getResources().getColor(R.color.wallpaper_picker_translucent_gray);       </span>
<span class="5708377594966735596" onmouseenter="enter('5708377594966735596');" onmouseout="out('5708377594966735596');" style=""> 517             galleryThumbnailBg.setColorFilter(colorOverlay, PorterDuff.Mode.SRC_ATOP);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518         }                                                                                                </span>
<span class="-8315020353080803014" onmouseenter="enter('-8315020353080803014');" onmouseout="out('-8315020353080803014');" style=""> 519         PickImageInfo pickImageInfo = new PickImageInfo();                                               </span>
<span class="332578453689310385" onmouseenter="enter('332578453689310385');" onmouseout="out('332578453689310385');" style=""> 520         pickImageTile.setTag(pickImageInfo);                                                             </span>
<span class="341631545919556933" onmouseenter="enter('341631545919556933');" onmouseout="out('341631545919556933');" style=""> 521         pickImageInfo.setView(pickImageTile);                                                            </span>
<span class="-2769069389002591388" onmouseenter="enter('-2769069389002591388');" onmouseout="out('-2769069389002591388');" style=""> 522         pickImageTile.setOnClickListener(mThumbnailOnClickListener);                                     </span>
<span class="-7723413543726583493" onmouseenter="enter('-7723413543726583493');" onmouseout="out('-7723413543726583493');" style=""> 523         // Select the first item; wait for a layout pass so that we initialize the dimensions of         </span>
<span class="-7132987448791092062" onmouseenter="enter('-7132987448791092062');" onmouseout="out('-7132987448791092062');" style=""> 524         // cropView or the defaultWallpaperView first                                                    </span>
<span class="-3578479520308771673" onmouseenter="enter('-3578479520308771673');" onmouseout="out('-3578479520308771673');" style=""> 525         mCropView.addOnLayoutChangeListener(new OnLayoutChangeListener() {                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 526             @Override                                                                                    </span>
<span class="-6476193515219414113" onmouseenter="enter('-6476193515219414113');" onmouseout="out('-6476193515219414113');" style=""><abbr title=" 527             public void onLayoutChange(View v, int left, int top, int right, int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {"> 527             public void onLayoutChange(View v, int left, int top, int right, int bottom, int oldLeft, int</abbr></span>
<span class="4141442229690514363" onmouseenter="enter('4141442229690514363');" onmouseout="out('4141442229690514363');" style=""> 528                 if (((right - left) &gt; 0) &amp;&amp; ((bottom - top) &gt; 0)) {                                      </span>
<span class="-261206733953220726" onmouseenter="enter('-261206733953220726');" onmouseout="out('-261206733953220726');" style=""> 529                     if ((mSelectedIndex &gt;= 0) &amp;&amp; (mSelectedIndex &lt; mWallpapersView.getChildCount())) {   </span>
<span class="-8233369509953511573" onmouseenter="enter('-8233369509953511573');" onmouseout="out('-8233369509953511573');" style=""> 530                         mThumbnailOnClickListener.onClick(mWallpapersView.getChildAt(mSelectedIndex));   </span>
<span class="-561940081499707422" onmouseenter="enter('-561940081499707422');" onmouseout="out('-561940081499707422');" style=""> 531                         setSystemWallpaperVisiblity(false);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532                     }                                                                                    </span>
<span class="-3420549157427558140" onmouseenter="enter('-3420549157427558140');" onmouseout="out('-3420549157427558140');" style=""> 533                     v.removeOnLayoutChangeListener(this);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 536         });                                                                                              </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 537         updateTileIndices();                                                                             </span>
<span class="1759508296475864781" onmouseenter="enter('1759508296475864781');" onmouseout="out('1759508296475864781');" style=""> 538         // Update the scroll for RTL                                                                     </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style=""> 539         initializeScrollForRtl();                                                                        </span>
<span class="8754677635152392755" onmouseenter="enter('8754677635152392755');" onmouseout="out('8754677635152392755');" style=""> 540         // Create smooth layout transitions for when items are deleted                                   </span>
<span class="-4930329743174539782" onmouseenter="enter('-4930329743174539782');" onmouseout="out('-4930329743174539782');" style=""> 541         final LayoutTransition transitioner = new LayoutTransition();                                    </span>
<span class="1485581076488552999" onmouseenter="enter('1485581076488552999');" onmouseout="out('1485581076488552999');" style=""> 542         transitioner.setDuration(200);                                                                   </span>
<span class="-2061924607669327428" onmouseenter="enter('-2061924607669327428');" onmouseout="out('-2061924607669327428');" style=""> 543         transitioner.setStartDelay(LayoutTransition.CHANGE_DISAPPEARING, 0);                             </span>
<span class="-3369306044554735862" onmouseenter="enter('-3369306044554735862');" onmouseout="out('-3369306044554735862');" style=""> 544         transitioner.setAnimator(LayoutTransition.DISAPPEARING, null);                                   </span>
<span class="3452611492242513009" onmouseenter="enter('3452611492242513009');" onmouseout="out('3452611492242513009');" style=""> 545         mWallpapersView.setLayoutTransition(transitioner);                                               </span>
<span class="-6690949822417478966" onmouseenter="enter('-6690949822417478966');" onmouseout="out('-6690949822417478966');" style=""> 546         // Action bar                                                                                    </span>
<span class="-3883215512946619745" onmouseenter="enter('-3883215512946619745');" onmouseout="out('-3883215512946619745');" style=""> 547         // Show the custom action bar view                                                               </span>
<span class="-1117346380634877983" onmouseenter="enter('-1117346380634877983');" onmouseout="out('-1117346380634877983');" style=""> 548         final ActionBar actionBar = getActionBar();                                                      </span>
<span class="2297539018706653511" onmouseenter="enter('2297539018706653511');" onmouseout="out('2297539018706653511');" style=""> 549         actionBar.setCustomView(R.layout.actionbar_set_wallpaper);                                       </span>
<span class="2850337775649424904" onmouseenter="enter('2850337775649424904');" onmouseout="out('2850337775649424904');" style=""> 550         actionBar.getCustomView().setOnClickListener(new View.OnClickListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 551             @Override                                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 552             public void onClick(View v) {                                                                </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 553                 if (mSelectedTile != null) {                                                             </span>
<span class="-2267077613316589917" onmouseenter="enter('-2267077613316589917');" onmouseout="out('-2267077613316589917');" style=""> 554                     WallpaperTileInfo info = ((WallpaperTileInfo) (mSelectedTile.getTag()));             </span>
<span class="8585600142234583597" onmouseenter="enter('8585600142234583597');" onmouseout="out('8585600142234583597');" style=""> 555                     info.onSave(WallpaperPickerActivity.this);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 556                 } else {                                                                                 </span>
<span class="-2325831004577352356" onmouseenter="enter('-2325831004577352356');" onmouseout="out('-2325831004577352356');" style=""> 557                     // no tile was selected, so we just finish the activity and go back                  </span>
<span class="1247430566664665360" onmouseenter="enter('1247430566664665360');" onmouseout="out('1247430566664665360');" style=""> 558                     setResult(Activity.RESULT_OK);                                                       </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 559                     finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 562         });                                                                                              </span>
<span class="-1738970073048232250" onmouseenter="enter('-1738970073048232250');" onmouseout="out('-1738970073048232250');" style=""> 563         mSetWallpaperButton = findViewById(R.id.set_wallpaper_button);                                   </span>
<span class="-4302888392572327731" onmouseenter="enter('-4302888392572327731');" onmouseout="out('-4302888392572327731');" style=""> 564         // CAB for deleting items                                                                        </span>
<span class="-127999484312805671" onmouseenter="enter('-127999484312805671');" onmouseout="out('-127999484312805671');" style=""> 565         mActionModeCallback = new ActionMode.Callback() {                                                </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 566             // Called when the action mode is created; startActionMode() was called                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 567             @Override                                                                                    </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 568             public boolean onCreateActionMode(ActionMode mode, Menu menu) {                              </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 569                 // Inflate a menu resource providing context menu items                                  </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 570                 MenuInflater inflater = mode.getMenuInflater();                                          </span>
<span class="-6388875521407758282" onmouseenter="enter('-6388875521407758282');" onmouseout="out('-6388875521407758282');" style=""> 571                 inflater.inflate(R.menu.cab_delete_wallpapers, menu);                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 572                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573             }                                                                                            </span>
<span  style=""> 574                                                                                                          </span>
<span class="870397737873592214" onmouseenter="enter('870397737873592214');" onmouseout="out('870397737873592214');" style=""> 575             private int numCheckedItems() {                                                              </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 576                 int childCount = mWallpapersView.getChildCount();                                        </span>
<span class="-6883723717821950794" onmouseenter="enter('-6883723717821950794');" onmouseout="out('-6883723717821950794');" style=""> 577                 int numCheckedItems = 0;                                                                 </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 578                 for (int i = 0; i &lt; childCount; i++) {                                                   </span>
<span class="-3282833298704710263" onmouseenter="enter('-3282833298704710263');" onmouseout="out('-3282833298704710263');" style=""> 579                     CheckableFrameLayout c = (CheckableFrameLayout) mWallpapersView.getChildAt(i);       </span>
<span class="-2798719840605914218" onmouseenter="enter('-2798719840605914218');" onmouseout="out('-2798719840605914218');" style=""> 580                     if (c.isChecked()) {                                                                 </span>
<span class="-1438188096822969363" onmouseenter="enter('-1438188096822969363');" onmouseout="out('-1438188096822969363');" style=""> 581                         numCheckedItems++;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 582                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583                 }                                                                                        </span>
<span class="681861663930848334" onmouseenter="enter('681861663930848334');" onmouseout="out('681861663930848334');" style=""> 584                 return numCheckedItems;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585             }                                                                                            </span>
<span  style=""> 586                                                                                                          </span>
<span class="-4908427375201257296" onmouseenter="enter('-4908427375201257296');" onmouseout="out('-4908427375201257296');" style=""> 587             // Called each time the action mode is shown. Always called after onCreateActionMode,        </span>
<span class="9007433729996553145" onmouseenter="enter('9007433729996553145');" onmouseout="out('9007433729996553145');" style=""> 588             // but may be called multiple times if the mode is invalidated.                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 589             @Override                                                                                    </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 590             public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                             </span>
<span class="-5101330785437320191" onmouseenter="enter('-5101330785437320191');" onmouseout="out('-5101330785437320191');" style=""> 591                 int numCheckedItems = numCheckedItems();                                                 </span>
<span class="8659757951446504827" onmouseenter="enter('8659757951446504827');" onmouseout="out('8659757951446504827');" style=""> 592                 if (numCheckedItems == 0) {                                                              </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 593                     mode.finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 594                     return true;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 595                 } else {                                                                                 </span>
<span class="-2320150819220019446" onmouseenter="enter('-2320150819220019446');" onmouseout="out('-2320150819220019446');" style=""> 596                     mode.setTitle(getResources().getQuantityString(                                      </span>
<span class="3298697623442124911" onmouseenter="enter('3298697623442124911');" onmouseout="out('3298697623442124911');" style=""> 597                             R.plurals.number_of_items_selected, numCheckedItems, numCheckedItems));      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 598                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600             }                                                                                            </span>
<span  style=""> 601                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 602             // Called when the user selects a contextual menu item                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 603             @Override                                                                                    </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 604             public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                         </span>
<span class="-2371175833572540313" onmouseenter="enter('-2371175833572540313');" onmouseout="out('-2371175833572540313');" style=""> 605                 int itemId = item.getItemId();                                                           </span>
<span class="-5718447720547061668" onmouseenter="enter('-5718447720547061668');" onmouseout="out('-5718447720547061668');" style=""> 606                 if (itemId == R.id.menu_delete) {                                                        </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 607                     int childCount = mWallpapersView.getChildCount();                                    </span>
<span class="-7751152015140741745" onmouseenter="enter('-7751152015140741745');" onmouseout="out('-7751152015140741745');" style=""> 608                     ArrayList&lt;View&gt; viewsToRemove = new ArrayList&lt;View&gt;();                               </span>
<span class="1584722444517724282" onmouseenter="enter('1584722444517724282');" onmouseout="out('1584722444517724282');" style=""> 609                     boolean selectedTileRemoved = false;                                                 </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 610                     for (int i = 0; i &lt; childCount; i++) {                                               </span>
<span class="1179773572626457742" onmouseenter="enter('1179773572626457742');" onmouseout="out('1179773572626457742');" style=""><abbr title=" 611                         CheckableFrameLayout c = ((CheckableFrameLayout) (mWallpapersView.getChildAt(i)));"> 611                         CheckableFrameLayout c = ((CheckableFrameLayout) (mWallpapersView.getChildAt(i)))</abbr></span>
<span class="-2798719840605914218" onmouseenter="enter('-2798719840605914218');" onmouseout="out('-2798719840605914218');" style=""> 612                         if (c.isChecked()) {                                                             </span>
<span class="7166502241997068899" onmouseenter="enter('7166502241997068899');" onmouseout="out('7166502241997068899');" style=""> 613                             WallpaperTileInfo info = ((WallpaperTileInfo) (c.getTag()));                 </span>
<span class="-5365064256543243978" onmouseenter="enter('-5365064256543243978');" onmouseout="out('-5365064256543243978');" style=""> 614                             info.onDelete(WallpaperPickerActivity.this);                                 </span>
<span class="7539132712862314960" onmouseenter="enter('7539132712862314960');" onmouseout="out('7539132712862314960');" style=""> 615                             viewsToRemove.add(c);                                                        </span>
<span class="3452999234966632783" onmouseenter="enter('3452999234966632783');" onmouseout="out('3452999234966632783');" style=""> 616                             if (i == mSelectedIndex) {                                                   </span>
<span class="4038374084094048370" onmouseenter="enter('4038374084094048370');" onmouseout="out('4038374084094048370');" style=""> 617                                 selectedTileRemoved = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620                     }                                                                                    </span>
<span class="-2799961312229830756" onmouseenter="enter('-2799961312229830756');" onmouseout="out('-2799961312229830756');" style=""> 621                     for (View v : viewsToRemove) {                                                       </span>
<span class="5094713957757001442" onmouseenter="enter('5094713957757001442');" onmouseout="out('5094713957757001442');" style=""> 622                         mWallpapersView.removeView(v);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                     }                                                                                    </span>
<span class="-3217878254483945199" onmouseenter="enter('-3217878254483945199');" onmouseout="out('-3217878254483945199');" style=""> 624                     if (selectedTileRemoved) {                                                           </span>
<span class="-7240011280640645397" onmouseenter="enter('-7240011280640645397');" onmouseout="out('-7240011280640645397');" style=""> 625                         mSelectedIndex = -1;                                                             </span>
<span class="-5936001525760364202" onmouseenter="enter('-5936001525760364202');" onmouseout="out('-5936001525760364202');" style=""> 626                         mSelectedTile = null;                                                            </span>
<span class="125091680216115960" onmouseenter="enter('125091680216115960');" onmouseout="out('125091680216115960');" style=""> 627                         setSystemWallpaperVisiblity(true);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628                     }                                                                                    </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 629                     updateTileIndices();                                                                 </span>
<span class="1437018376781324775" onmouseenter="enter('1437018376781324775');" onmouseout="out('1437018376781324775');" style=""> 630                     mode.finish();// Action picked, so close the CAB                                     </span>
<span  style=""> 631                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 632                     return true;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 633                 } else {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 634                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636             }                                                                                            </span>
<span  style=""> 637                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 638             // Called when the user exits the action mode                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 639             @Override                                                                                    </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 640             public void onDestroyActionMode(ActionMode mode) {                                           </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 641                 int childCount = mWallpapersView.getChildCount();                                        </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 642                 for (int i = 0; i &lt; childCount; i++) {                                                   </span>
<span class="1179773572626457742" onmouseenter="enter('1179773572626457742');" onmouseout="out('1179773572626457742');" style=""> 643                     CheckableFrameLayout c = ((CheckableFrameLayout) (mWallpapersView.getChildAt(i)));   </span>
<span class="1014221111310174159" onmouseenter="enter('1014221111310174159');" onmouseout="out('1014221111310174159');" style=""> 644                     c.setChecked(false);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645                 }                                                                                        </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 646                 if (mSelectedTile != null) {                                                             </span>
<span class="9135117288134691920" onmouseenter="enter('9135117288134691920');" onmouseout="out('9135117288134691920');" style=""> 647                     mSelectedTile.setSelected(true);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648                 }                                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 649                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 651         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652     }                                                                                                    </span>
<span  style=""> 653                                                                                                          </span>
<span class="-1506115177228939080" onmouseenter="enter('-1506115177228939080');" onmouseout="out('-1506115177228939080');" style=""> 654     private void selectTile(View v) {                                                                    </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 655         if (mSelectedTile != null) {                                                                     </span>
<span class="-2066645340429178571" onmouseenter="enter('-2066645340429178571');" onmouseout="out('-2066645340429178571');" style=""> 656             mSelectedTile.setSelected(false);                                                            </span>
<span class="-5936001525760364202" onmouseenter="enter('-5936001525760364202');" onmouseout="out('-5936001525760364202');" style=""> 657             mSelectedTile = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658         }                                                                                                </span>
<span class="-416733230307533043" onmouseenter="enter('-416733230307533043');" onmouseout="out('-416733230307533043');" style=""> 659         mSelectedTile = v;                                                                               </span>
<span class="3995602257861476425" onmouseenter="enter('3995602257861476425');" onmouseout="out('3995602257861476425');" style=""> 660         v.setSelected(true);                                                                             </span>
<span class="-6325232721939244615" onmouseenter="enter('-6325232721939244615');" onmouseout="out('-6325232721939244615');" style=""> 661         mSelectedIndex = mWallpapersView.indexOfChild(v);                                                </span>
<span class="-7405161307855549247" onmouseenter="enter('-7405161307855549247');" onmouseout="out('-7405161307855549247');" style=""> 662         // TODO: Remove this once the accessibility framework and                                        </span>
<span class="-4753818808741308090" onmouseenter="enter('-4753818808741308090');" onmouseout="out('-4753818808741308090');" style=""> 663         // services have better support for selection state.                                             </span>
<span class="2204888622725665866" onmouseenter="enter('2204888622725665866');" onmouseout="out('2204888622725665866');" style=""> 664         v.announceForAccessibility(                                                                      </span>
<span class="2493998402613828012" onmouseenter="enter('2493998402613828012');" onmouseout="out('2493998402613828012');" style=""> 665                 getString(R.string.announce_selection, v.getContentDescription()));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666     }                                                                                                    </span>
<span  style=""> 667                                                                                                          </span>
<span class="3613777925188016048" onmouseenter="enter('3613777925188016048');" onmouseout="out('3613777925188016048');" style=""> 668     private void initializeScrollForRtl() {                                                              </span>
<span class="-1273765683152014823" onmouseenter="enter('-1273765683152014823');" onmouseout="out('-1273765683152014823');" style=""> 669         final HorizontalScrollView scroll =                                                              </span>
<span class="-7037969170098618839" onmouseenter="enter('-7037969170098618839');" onmouseout="out('-7037969170098618839');" style=""> 670                 (HorizontalScrollView) findViewById(R.id.wallpaper_scroll_container);                    </span>
<span  style=""> 671                                                                                                          </span>
<span class="1955425449244494245" onmouseenter="enter('1955425449244494245');" onmouseout="out('1955425449244494245');" style=""> 672         if (scroll.getLayoutDirection() == View.LAYOUT_DIRECTION_RTL) {                                  </span>
<span class="-1890364990500798192" onmouseenter="enter('-1890364990500798192');" onmouseout="out('-1890364990500798192');" style=""> 673             final ViewTreeObserver observer = scroll.getViewTreeObserver();                              </span>
<span class="6394814703996271835" onmouseenter="enter('6394814703996271835');" onmouseout="out('6394814703996271835');" style=""> 674             observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {                            </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 675                 public void onGlobalLayout() {                                                           </span>
<span class="-62510142979053251" onmouseenter="enter('-62510142979053251');" onmouseout="out('-62510142979053251');" style=""> 676                     LinearLayout masterWallpaperList =                                                   </span>
<span class="149389540385452124" onmouseenter="enter('149389540385452124');" onmouseout="out('149389540385452124');" style=""> 677                             (LinearLayout) findViewById(R.id.master_wallpaper_list);                     </span>
<span class="-4254848503069544361" onmouseenter="enter('-4254848503069544361');" onmouseout="out('-4254848503069544361');" style=""> 678                     scroll.scrollTo(masterWallpaperList.getWidth(), 0);                                  </span>
<span class="358343610071411190" onmouseenter="enter('358343610071411190');" onmouseout="out('358343610071411190');" style=""> 679                     scroll.getViewTreeObserver().removeOnGlobalLayoutListener(this);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 681             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683     }                                                                                                    </span>
<span  style=""> 684                                                                                                          </span>
<span class="664193847003739221" onmouseenter="enter('664193847003739221');" onmouseout="out('664193847003739221');" style=""> 685     protected Bitmap getThumbnailOfLastPhoto() {                                                         </span>
<span class="4229234176972825350" onmouseenter="enter('4229234176972825350');" onmouseout="out('4229234176972825350');" style=""><abbr title=" 686         Cursor cursor = MediaStore.Images.Media.query(getContentResolver(), MediaStore.Images.Media.EXTERNAL_CONTENT_URI, new String[]{ MediaStore.Images.ImageColumns._ID, MediaStore.Images.ImageColumns.DATE_TAKEN }, null, null, MediaStore.Images.ImageColumns.DATE_TAKEN + &quot; DESC LIMIT 1&quot;);"> 686         Cursor cursor = MediaStore.Images.Media.query(getContentResolver(), MediaStore.Images.Media.EXTER</abbr></span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style=""> 687         Bitmap thumb = null;                                                                             </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 688         if (cursor != null) {                                                                            </span>
<span class="-3461632027345581546" onmouseenter="enter('-3461632027345581546');" onmouseout="out('-3461632027345581546');" style=""> 689             if (cursor.moveToNext()) {                                                                   </span>
<span class="-1657892521407389619" onmouseenter="enter('-1657892521407389619');" onmouseout="out('-1657892521407389619');" style=""> 690                 int id = cursor.getInt(0);                                                               </span>
<span class="3755674519474250446" onmouseenter="enter('3755674519474250446');" onmouseout="out('3755674519474250446');" style=""><abbr title=" 691                 thumb = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(), id, MediaStore.Images.Thumbnails.MINI_KIND, null);"> 691                 thumb = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(), id, MediaStore.Im</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692             }                                                                                            </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 693             cursor.close();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694         }                                                                                                </span>
<span class="2989265115448010726" onmouseenter="enter('2989265115448010726');" onmouseout="out('2989265115448010726');" style=""> 695         return thumb;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696     }                                                                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="-531063095242678892" onmouseenter="enter('-531063095242678892');" onmouseout="out('-531063095242678892');" style=""> 698     protected void onStop() {                                                                            </span>
<span class="-4376279779571809033" onmouseenter="enter('-4376279779571809033');" onmouseout="out('-4376279779571809033');" style=""> 699         super.onStop();                                                                                  </span>
<span class="-2578053662916702311" onmouseenter="enter('-2578053662916702311');" onmouseout="out('-2578053662916702311');" style=""> 700         mWallpaperStrip = findViewById(R.id.wallpaper_strip);                                            </span>
<span class="2061286900587029071" onmouseenter="enter('2061286900587029071');" onmouseout="out('2061286900587029071');" style=""> 701         if (mWallpaperStrip.getAlpha() &lt; 1f) {                                                           </span>
<span class="-7993736133733899989" onmouseenter="enter('-7993736133733899989');" onmouseout="out('-7993736133733899989');" style=""> 702             mWallpaperStrip.setAlpha(1f);                                                                </span>
<span class="2849585250197552354" onmouseenter="enter('2849585250197552354');" onmouseout="out('2849585250197552354');" style=""> 703             mWallpaperStrip.setVisibility(View.VISIBLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705     }                                                                                                    </span>
<span  style=""> 706                                                                                                          </span>
<span class="2923374410094392392" onmouseenter="enter('2923374410094392392');" onmouseout="out('2923374410094392392');" style=""> 707     protected void onSaveInstanceState(Bundle outState) {                                                </span>
<span class="5676996045526496118" onmouseenter="enter('5676996045526496118');" onmouseout="out('5676996045526496118');" style=""> 708         outState.putParcelableArrayList(TEMP_WALLPAPER_TILES, mTempWallpaperTiles);                      </span>
<span class="4842173451749245020" onmouseenter="enter('4842173451749245020');" onmouseout="out('4842173451749245020');" style=""> 709         outState.putInt(SELECTED_INDEX, mSelectedIndex);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710     }                                                                                                    </span>
<span  style=""> 711                                                                                                          </span>
<span class="-2094527111288901138" onmouseenter="enter('-2094527111288901138');" onmouseout="out('-2094527111288901138');" style=""> 712     protected void onRestoreInstanceState(Bundle savedInstanceState) {                                   </span>
<span class="9097341058798999924" onmouseenter="enter('9097341058798999924');" onmouseout="out('9097341058798999924');" style=""> 713         ArrayList&lt;Uri&gt; uris = savedInstanceState.getParcelableArrayList(TEMP_WALLPAPER_TILES);           </span>
<span class="882746572331317232" onmouseenter="enter('882746572331317232');" onmouseout="out('882746572331317232');" style=""> 714         for (Uri uri : uris) {                                                                           </span>
<span class="309442566935810090" onmouseenter="enter('309442566935810090');" onmouseout="out('309442566935810090');" style=""> 715             addTemporaryWallpaperTile(uri, true);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716         }                                                                                                </span>
<span class="2728496215931290524" onmouseenter="enter('2728496215931290524');" onmouseout="out('2728496215931290524');" style=""> 717         mSelectedIndex = savedInstanceState.getInt(SELECTED_INDEX, -1);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718     }                                                                                                    </span>
<span  style=""> 719                                                                                                          </span>
<span class="-3395251471996624785" onmouseenter="enter('-3395251471996624785');" onmouseout="out('-3395251471996624785');" style=""> 720     private void populateWallpapersFromAdapter(ViewGroup parent, BaseAdapter adapter,                    </span>
<span class="-3888515017020188466" onmouseenter="enter('-3888515017020188466');" onmouseout="out('-3888515017020188466');" style=""> 721             boolean addLongPressHandler) {                                                               </span>
<span class="-4655808919273667933" onmouseenter="enter('-4655808919273667933');" onmouseout="out('-4655808919273667933');" style=""> 722         for (int i = 0; i &lt; adapter.getCount(); i++) {                                                   </span>
<span class="-1082551966183171247" onmouseenter="enter('-1082551966183171247');" onmouseout="out('-1082551966183171247');" style=""> 723             FrameLayout thumbnail = (FrameLayout) adapter.getView(i, null, parent);                      </span>
<span class="-2539369959542405754" onmouseenter="enter('-2539369959542405754');" onmouseout="out('-2539369959542405754');" style=""> 724             parent.addView(thumbnail, i);                                                                </span>
<span class="-8640688129381962578" onmouseenter="enter('-8640688129381962578');" onmouseout="out('-8640688129381962578');" style=""> 725             WallpaperTileInfo info = (WallpaperTileInfo) adapter.getItem(i);                             </span>
<span class="-8513774863936305691" onmouseenter="enter('-8513774863936305691');" onmouseout="out('-8513774863936305691');" style=""> 726             thumbnail.setTag(info);                                                                      </span>
<span class="835749422138936601" onmouseenter="enter('835749422138936601');" onmouseout="out('835749422138936601');" style=""> 727             info.setView(thumbnail);                                                                     </span>
<span class="-753060270538025028" onmouseenter="enter('-753060270538025028');" onmouseout="out('-753060270538025028');" style=""> 728             if (addLongPressHandler) {                                                                   </span>
<span class="-7973486700261140064" onmouseenter="enter('-7973486700261140064');" onmouseout="out('-7973486700261140064');" style=""> 729                 addLongPressHandler(thumbnail);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730             }                                                                                            </span>
<span class="2610544249132778797" onmouseenter="enter('2610544249132778797');" onmouseout="out('2610544249132778797');" style=""> 731             thumbnail.setOnClickListener(mThumbnailOnClickListener);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733     }                                                                                                    </span>
<span  style=""> 734                                                                                                          </span>
<span class="7174283580582519873" onmouseenter="enter('7174283580582519873');" onmouseout="out('7174283580582519873');" style=""> 735     private void updateTileIndices() {                                                                   </span>
<span class="-1043783805889159162" onmouseenter="enter('-1043783805889159162');" onmouseout="out('-1043783805889159162');" style=""> 736         LinearLayout masterWallpaperList = (LinearLayout) findViewById(R.id.master_wallpaper_list);      </span>
<span class="259886241860069923" onmouseenter="enter('259886241860069923');" onmouseout="out('259886241860069923');" style=""> 737         final int childCount = masterWallpaperList.getChildCount();                                      </span>
<span class="8480962759227506322" onmouseenter="enter('8480962759227506322');" onmouseout="out('8480962759227506322');" style=""> 738         final Resources res = getResources();                                                            </span>
<span  style=""> 739                                                                                                          </span>
<span class="3521054778015791399" onmouseenter="enter('3521054778015791399');" onmouseout="out('3521054778015791399');" style=""> 740         // Do two passes; the first pass gets the total number of tiles                                  </span>
<span class="5938103209458987108" onmouseenter="enter('5938103209458987108');" onmouseout="out('5938103209458987108');" style=""> 741         int numTiles = 0;                                                                                </span>
<span class="5019589255138395185" onmouseenter="enter('5019589255138395185');" onmouseout="out('5019589255138395185');" style=""> 742         for (int passNum = 0; passNum &lt; 2; passNum++) {                                                  </span>
<span class="1572996252094865016" onmouseenter="enter('1572996252094865016');" onmouseout="out('1572996252094865016');" style=""> 743             int tileIndex = 0;                                                                           </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 744             for (int i = 0; i &lt; childCount; i++) {                                                       </span>
<span class="4123953723067944503" onmouseenter="enter('4123953723067944503');" onmouseout="out('4123953723067944503');" style=""> 745                 View child = masterWallpaperList.getChildAt(i);                                          </span>
<span class="-5829345887602296444" onmouseenter="enter('-5829345887602296444');" onmouseout="out('-5829345887602296444');" style=""> 746                 LinearLayout subList;                                                                    </span>
<span  style=""> 747                                                                                                          </span>
<span class="3605475243255362068" onmouseenter="enter('3605475243255362068');" onmouseout="out('3605475243255362068');" style=""> 748                 int subListStart;                                                                        </span>
<span class="-8450536843674173357" onmouseenter="enter('-8450536843674173357');" onmouseout="out('-8450536843674173357');" style=""> 749                 int subListEnd;                                                                          </span>
<span class="6806008433574303890" onmouseenter="enter('6806008433574303890');" onmouseout="out('6806008433574303890');" style=""> 750                 if (child.getTag() instanceof WallpaperTileInfo) {                                       </span>
<span class="-5389769772346214913" onmouseenter="enter('-5389769772346214913');" onmouseout="out('-5389769772346214913');" style=""> 751                     subList = masterWallpaperList;                                                       </span>
<span class="5694298299445467842" onmouseenter="enter('5694298299445467842');" onmouseout="out('5694298299445467842');" style=""> 752                     subListStart = i;                                                                    </span>
<span class="775032750631300414" onmouseenter="enter('775032750631300414');" onmouseout="out('775032750631300414');" style=""> 753                     subListEnd = i + 1;                                                                  </span>
<span class="-1510097346886829055" onmouseenter="enter('-1510097346886829055');" onmouseout="out('-1510097346886829055');" style=""> 754                 } else { // if (child instanceof LinearLayout) {                                         </span>
<span class="7675569892434777627" onmouseenter="enter('7675569892434777627');" onmouseout="out('7675569892434777627');" style=""> 755                     subList = (LinearLayout) child;                                                      </span>
<span class="-788862889599952363" onmouseenter="enter('-788862889599952363');" onmouseout="out('-788862889599952363');" style=""> 756                     subListStart = 0;                                                                    </span>
<span class="-2292138033159846006" onmouseenter="enter('-2292138033159846006');" onmouseout="out('-2292138033159846006');" style=""> 757                     subListEnd = subList.getChildCount();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758                 }                                                                                        </span>
<span  style=""> 759                                                                                                          </span>
<span class="-3188102189745806183" onmouseenter="enter('-3188102189745806183');" onmouseout="out('-3188102189745806183');" style=""> 760                 for (int j = subListStart; j &lt; subListEnd; j++) {                                        </span>
<span class="-46452018360091707" onmouseenter="enter('-46452018360091707');" onmouseout="out('-46452018360091707');" style=""> 761                     WallpaperTileInfo info = (WallpaperTileInfo) subList.getChildAt(j).getTag();         </span>
<span class="-7564864828845128447" onmouseenter="enter('-7564864828845128447');" onmouseout="out('-7564864828845128447');" style=""> 762                     if (info.isNamelessWallpaper()) {                                                    </span>
<span class="-1910212611706289773" onmouseenter="enter('-1910212611706289773');" onmouseout="out('-1910212611706289773');" style=""> 763                         if (passNum == 0) {                                                              </span>
<span class="2002385288571403014" onmouseenter="enter('2002385288571403014');" onmouseout="out('2002385288571403014');" style=""> 764                             numTiles++;                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 765                         } else {                                                                         </span>
<span class="2118637819721096111" onmouseenter="enter('2118637819721096111');" onmouseout="out('2118637819721096111');" style=""> 766                             CharSequence label = res.getString(                                          </span>
<span class="-2397331067750563254" onmouseenter="enter('-2397331067750563254');" onmouseout="out('-2397331067750563254');" style=""> 767                                     R.string.wallpaper_accessibility_name, ++tileIndex, numTiles);       </span>
<span class="176872867902725227" onmouseenter="enter('176872867902725227');" onmouseout="out('176872867902725227');" style=""> 768                             info.onIndexUpdated(label);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774     }                                                                                                    </span>
<span  style=""> 775                                                                                                          </span>
<span class="2510156197068194941" onmouseenter="enter('2510156197068194941');" onmouseout="out('2510156197068194941');" style=""> 776     private static Point getDefaultThumbnailSize(Resources res) {                                        </span>
<span class="-6874335415328293767" onmouseenter="enter('-6874335415328293767');" onmouseout="out('-6874335415328293767');" style=""> 777         return new Point(res.getDimensionPixelSize(R.dimen.wallpaperThumbnailWidth),                     </span>
<span class="9213584837082607543" onmouseenter="enter('9213584837082607543');" onmouseout="out('9213584837082607543');" style=""> 778                 res.getDimensionPixelSize(R.dimen.wallpaperThumbnailHeight));                            </span>
<span  style=""> 779                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780     }                                                                                                    </span>
<span  style=""> 781                                                                                                          </span>
<span class="-2190537902917228056" onmouseenter="enter('-2190537902917228056');" onmouseout="out('-2190537902917228056');" style=""> 782     private static Bitmap createThumbnail(Point size, Context context, Uri uri, byte[] imageBytes,       </span>
<span class="1462494306554119473" onmouseenter="enter('1462494306554119473');" onmouseout="out('1462494306554119473');" style=""> 783             Resources res, int resId, int rotation, boolean leftAligned) {                               </span>
<span class="2197190995614732863" onmouseenter="enter('2197190995614732863');" onmouseout="out('2197190995614732863');" style=""> 784         int width = size.x;                                                                              </span>
<span class="1656572652603557172" onmouseenter="enter('1656572652603557172');" onmouseout="out('1656572652603557172');" style=""> 785         int height = size.y;                                                                             </span>
<span  style=""> 786                                                                                                          </span>
<span class="7349190684690785447" onmouseenter="enter('7349190684690785447');" onmouseout="out('7349190684690785447');" style=""> 787         BitmapCropTask cropTask;                                                                         </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style=""> 788         if (uri != null) {                                                                               </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 789             cropTask = new BitmapCropTask(                                                               </span>
<span class="8478899448975750390" onmouseenter="enter('8478899448975750390');" onmouseout="out('8478899448975750390');" style=""> 790                     context, uri, null, rotation, width, height, false, true, null);                     </span>
<span class="3032403540229941925" onmouseenter="enter('3032403540229941925');" onmouseout="out('3032403540229941925');" style=""> 791         } else if (imageBytes != null) {                                                                 </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 792             cropTask = new BitmapCropTask(                                                               </span>
<span class="4933078725267557507" onmouseenter="enter('4933078725267557507');" onmouseout="out('4933078725267557507');" style=""> 793                     imageBytes, null, rotation, width, height, false, true, null);                       </span>
<span class="-6240460135729763291" onmouseenter="enter('-6240460135729763291');" onmouseout="out('-6240460135729763291');" style=""> 794         }  else {                                                                                        </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 795             cropTask = new BitmapCropTask(                                                               </span>
<span class="8004600037434906454" onmouseenter="enter('8004600037434906454');" onmouseout="out('8004600037434906454');" style=""> 796                     context, res, resId, null, rotation, width, height, false, true, null);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797         }                                                                                                </span>
<span class="-6453579906380884917" onmouseenter="enter('-6453579906380884917');" onmouseout="out('-6453579906380884917');" style=""> 798         Point bounds = cropTask.getImageBounds();                                                        </span>
<span class="-3295188915583570787" onmouseenter="enter('-3295188915583570787');" onmouseout="out('-3295188915583570787');" style=""> 799         if (bounds == null || bounds.x == 0 || bounds.y == 0) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 800             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801         }                                                                                                </span>
<span  style=""> 802                                                                                                          </span>
<span class="6879132970877670755" onmouseenter="enter('6879132970877670755');" onmouseout="out('6879132970877670755');" style=""> 803         Matrix rotateMatrix = new Matrix();                                                              </span>
<span class="-6437688486507158764" onmouseenter="enter('-6437688486507158764');" onmouseout="out('-6437688486507158764');" style=""> 804         rotateMatrix.setRotate(rotation);                                                                </span>
<span class="1369286570105688669" onmouseenter="enter('1369286570105688669');" onmouseout="out('1369286570105688669');" style=""> 805         float[] rotatedBounds = new float[] { bounds.x, bounds.y };                                      </span>
<span class="9124648468601119627" onmouseenter="enter('9124648468601119627');" onmouseout="out('9124648468601119627');" style=""> 806         rotateMatrix.mapPoints(rotatedBounds);                                                           </span>
<span class="-4005609192970260775" onmouseenter="enter('-4005609192970260775');" onmouseout="out('-4005609192970260775');" style=""> 807         rotatedBounds[0] = Math.abs(rotatedBounds[0]);                                                   </span>
<span class="8902635337510419497" onmouseenter="enter('8902635337510419497');" onmouseout="out('8902635337510419497');" style=""> 808         rotatedBounds[1] = Math.abs(rotatedBounds[1]);                                                   </span>
<span  style=""> 809                                                                                                          </span>
<span class="6089223768568690792" onmouseenter="enter('6089223768568690792');" onmouseout="out('6089223768568690792');" style=""> 810         RectF cropRect = WallpaperCropActivity.getMaxCropRect(                                           </span>
<span class="1229429396446044184" onmouseenter="enter('1229429396446044184');" onmouseout="out('1229429396446044184');" style=""> 811                 (int) rotatedBounds[0], (int) rotatedBounds[1], width, height, leftAligned);             </span>
<span class="2176872110091109412" onmouseenter="enter('2176872110091109412');" onmouseout="out('2176872110091109412');" style=""> 812         cropTask.setCropBounds(cropRect);                                                                </span>
<span  style=""> 813                                                                                                          </span>
<span class="4092370609310845926" onmouseenter="enter('4092370609310845926');" onmouseout="out('4092370609310845926');" style=""> 814         if (cropTask.cropBitmap()) {                                                                     </span>
<span class="5327784893723541266" onmouseenter="enter('5327784893723541266');" onmouseout="out('5327784893723541266');" style=""> 815             return cropTask.getCroppedBitmap();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 816         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 817             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819     }                                                                                                    </span>
<span  style=""> 820                                                                                                          </span>
<span class="-1009224458959098214" onmouseenter="enter('-1009224458959098214');" onmouseout="out('-1009224458959098214');" style=""> 821     private void addTemporaryWallpaperTile(final Uri uri, boolean fromRestore) {                         </span>
<span class="-901651268089518848" onmouseenter="enter('-901651268089518848');" onmouseout="out('-901651268089518848');" style=""> 822         mTempWallpaperTiles.add(uri);                                                                    </span>
<span class="372124520658648675" onmouseenter="enter('372124520658648675');" onmouseout="out('372124520658648675');" style=""> 823         // Add a tile for the image picked from Gallery                                                  </span>
<span class="7271820790549542869" onmouseenter="enter('7271820790549542869');" onmouseout="out('7271820790549542869');" style=""><abbr title=" 824         final FrameLayout pickedImageThumbnail = ((FrameLayout) (getLayoutInflater().inflate(R.layout.wallpaper_picker_item, mWallpapersView, false)));"> 824         final FrameLayout pickedImageThumbnail = ((FrameLayout) (getLayoutInflater().inflate(R.layout.wal</abbr></span>
<span class="4529673580196202338" onmouseenter="enter('4529673580196202338');" onmouseout="out('4529673580196202338');" style=""> 825         pickedImageThumbnail.setVisibility(View.GONE);                                                   </span>
<span class="2199584589147075372" onmouseenter="enter('2199584589147075372');" onmouseout="out('2199584589147075372');" style=""> 826         setWallpaperItemPaddingToZero(pickedImageThumbnail);                                             </span>
<span class="8928625334369603982" onmouseenter="enter('8928625334369603982');" onmouseout="out('8928625334369603982');" style=""> 827         mWallpapersView.addView(pickedImageThumbnail, 0);                                                </span>
<span class="9047526722691301900" onmouseenter="enter('9047526722691301900');" onmouseout="out('9047526722691301900');" style=""> 828         // Load the thumbnail                                                                            </span>
<span class="6675849209278675135" onmouseenter="enter('6675849209278675135');" onmouseout="out('6675849209278675135');" style=""> 829         final ImageView image = ((ImageView) (pickedImageThumbnail.findViewById(R.id.wallpaper_image))); </span>
<span class="8129808656284289108" onmouseenter="enter('8129808656284289108');" onmouseout="out('8129808656284289108');" style=""> 830         final Point defaultSize = getDefaultThumbnailSize(this.getResources());                          </span>
<span class="-6676868420171838472" onmouseenter="enter('-6676868420171838472');" onmouseout="out('-6676868420171838472');" style=""> 831         final Context context = this;                                                                    </span>
<span class="8654405571332173016" onmouseenter="enter('8654405571332173016');" onmouseout="out('8654405571332173016');" style=""> 832         new AsyncTask&lt;Void, Bitmap, Bitmap&gt;() {                                                          </span>
<span class="-4344457333213017373" onmouseenter="enter('-4344457333213017373');" onmouseout="out('-4344457333213017373');" style=""> 833             protected Bitmap doInBackground(Void... args) {                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 834                 try {                                                                                    </span>
<span class="-4769478897982771202" onmouseenter="enter('-4769478897982771202');" onmouseout="out('-4769478897982771202');" style=""> 835                     int rotation = WallpaperCropActivity.getRotationFromExif(context, uri);              </span>
<span class="2925909394733733403" onmouseenter="enter('2925909394733733403');" onmouseout="out('2925909394733733403');" style=""> 836                     return createThumbnail(defaultSize, context, uri, null, null, 0, rotation, false);   </span>
<span class="-6365265622466743571" onmouseenter="enter('-6365265622466743571');" onmouseout="out('-6365265622466743571');" style=""> 837                 } catch (java.lang.SecurityException securityException) {                                </span>
<span class="7955105844901253678" onmouseenter="enter('7955105844901253678');" onmouseout="out('7955105844901253678');" style=""> 838                     if (isDestroyed()) {                                                                 </span>
<span class="3681517849090038589" onmouseenter="enter('3681517849090038589');" onmouseout="out('3681517849090038589');" style=""> 839                         // Temporarily granted permissions are revoked when the activity                 </span>
<span class="3864158554531561229" onmouseenter="enter('3864158554531561229');" onmouseout="out('3864158554531561229');" style=""> 840                         // finishes, potentially resulting in a SecurityException here.                  </span>
<span class="-438989399743409142" onmouseenter="enter('-438989399743409142');" onmouseout="out('-438989399743409142');" style=""> 841                         // Even though {@link #isDestroyed} might also return true in different          </span>
<span class="-973013658270767082" onmouseenter="enter('-973013658270767082');" onmouseout="out('-973013658270767082');" style=""> 842                         // situations where the configuration changes, we are fine with                  </span>
<span class="-5779086303897471336" onmouseenter="enter('-5779086303897471336');" onmouseout="out('-5779086303897471336');" style=""> 843                         // catching these cases here as well.                                            </span>
<span class="-1034870772393865893" onmouseenter="enter('-1034870772393865893');" onmouseout="out('-1034870772393865893');" style=""> 844                         cancel(false);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 845                     } else {                                                                             </span>
<span class="-5531102788746271445" onmouseenter="enter('-5531102788746271445');" onmouseout="out('-5531102788746271445');" style=""> 846                         // otherwise it had a different cause and we throw it further                    </span>
<span class="-970795541645443852" onmouseenter="enter('-970795541645443852');" onmouseout="out('-970795541645443852');" style=""> 847                         throw securityException;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848                     }                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 849                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 850                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851             }                                                                                            </span>
<span  style=""> 852                                                                                                          </span>
<span class="7796048425938803412" onmouseenter="enter('7796048425938803412');" onmouseout="out('7796048425938803412');" style=""> 853             protected void onPostExecute(Bitmap thumb) {                                                 </span>
<span class="2453939820421547914" onmouseenter="enter('2453939820421547914');" onmouseout="out('2453939820421547914');" style=""> 854                 if ((!isCancelled()) &amp;&amp; (thumb != null)) {                                               </span>
<span class="-6059667076746804171" onmouseenter="enter('-6059667076746804171');" onmouseout="out('-6059667076746804171');" style=""> 855                     image.setImageBitmap(thumb);                                                         </span>
<span class="-1645377004023670491" onmouseenter="enter('-1645377004023670491');" onmouseout="out('-1645377004023670491');" style=""> 856                     Drawable thumbDrawable = image.getDrawable();                                        </span>
<span class="5749196251269587213" onmouseenter="enter('5749196251269587213');" onmouseout="out('5749196251269587213');" style=""> 857                     thumbDrawable.setDither(true);                                                       </span>
<span class="-2126867226419131669" onmouseenter="enter('-2126867226419131669');" onmouseout="out('-2126867226419131669');" style=""> 858                     pickedImageThumbnail.setVisibility(View.VISIBLE);                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 859                 } else {                                                                                 </span>
<span class="-2794690336414811741" onmouseenter="enter('-2794690336414811741');" onmouseout="out('-2794690336414811741');" style=""> 860                     Log.e(TAG, &quot;Error loading thumbnail for uri=&quot; + uri);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862             }                                                                                            </span>
<span class="3599702695275287338" onmouseenter="enter('3599702695275287338');" onmouseout="out('3599702695275287338');" style=""> 863         }.execute();                                                                                     </span>
<span class="8287492400642888670" onmouseenter="enter('8287492400642888670');" onmouseout="out('8287492400642888670');" style=""> 864         UriWallpaperInfo info = new UriWallpaperInfo(uri);                                               </span>
<span class="-3082078054294180702" onmouseenter="enter('-3082078054294180702');" onmouseout="out('-3082078054294180702');" style=""> 865         pickedImageThumbnail.setTag(info);                                                               </span>
<span class="-2197374997178845158" onmouseenter="enter('-2197374997178845158');" onmouseout="out('-2197374997178845158');" style=""> 866         info.setView(pickedImageThumbnail);                                                              </span>
<span class="7161653145395861506" onmouseenter="enter('7161653145395861506');" onmouseout="out('7161653145395861506');" style=""> 867         addLongPressHandler(pickedImageThumbnail);                                                       </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 868         updateTileIndices();                                                                             </span>
<span class="-4563567220370832798" onmouseenter="enter('-4563567220370832798');" onmouseout="out('-4563567220370832798');" style=""> 869         pickedImageThumbnail.setOnClickListener(mThumbnailOnClickListener);                              </span>
<span class="-2362441680778508255" onmouseenter="enter('-2362441680778508255');" onmouseout="out('-2362441680778508255');" style=""> 870         if (!fromRestore) {                                                                              </span>
<span class="1189035633112635276" onmouseenter="enter('1189035633112635276');" onmouseout="out('1189035633112635276');" style=""> 871             mThumbnailOnClickListener.onClick(pickedImageThumbnail);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 872         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873     }                                                                                                    </span>
<span  style=""> 874                                                                                                          </span>
<span class="-7749792035646111440" onmouseenter="enter('-7749792035646111440');" onmouseout="out('-7749792035646111440');" style=""> 875     protected void onActivityResult(int requestCode, int resultCode, Intent data) {                      </span>
<span class="-4208996293247625482" onmouseenter="enter('-4208996293247625482');" onmouseout="out('-4208996293247625482');" style=""> 876         if ((requestCode == IMAGE_PICK) &amp;&amp; (resultCode == RESULT_OK)) {                                  </span>
<span class="-7908028078270824753" onmouseenter="enter('-7908028078270824753');" onmouseout="out('-7908028078270824753');" style=""> 877             if ((data != null) &amp;&amp; (data.getData() != null)) {                                            </span>
<span class="-9060755014479801963" onmouseenter="enter('-9060755014479801963');" onmouseout="out('-9060755014479801963');" style=""> 878                 Uri uri = data.getData();                                                                </span>
<span class="287003757484083113" onmouseenter="enter('287003757484083113');" onmouseout="out('287003757484083113');" style=""> 879                 addTemporaryWallpaperTile(uri, false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880             }                                                                                            </span>
<span class="5194712518021502228" onmouseenter="enter('5194712518021502228');" onmouseout="out('5194712518021502228');" style=""> 881         } else if (requestCode == PICK_WALLPAPER_THIRD_PARTY_ACTIVITY) {                                 </span>
<span class="-7075511525703303023" onmouseenter="enter('-7075511525703303023');" onmouseout="out('-7075511525703303023');" style=""> 882             setResult(RESULT_OK);                                                                        </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 883             finish();                                                                                    </span>
<span class="-8956522334617839884" onmouseenter="enter('-8956522334617839884');" onmouseout="out('-8956522334617839884');" style=""> 884         } else if (requestCode == PICK_LIVE_WALLPAPER) {                                                 </span>
<span class="-7130090822814694896" onmouseenter="enter('-7130090822814694896');" onmouseout="out('-7130090822814694896');" style=""> 885             WallpaperManager wm = WallpaperManager.getInstance(this);                                    </span>
<span class="611509371565321110" onmouseenter="enter('611509371565321110');" onmouseout="out('611509371565321110');" style=""> 886             final WallpaperInfo oldLiveWallpaper = mLiveWallpaperInfoOnPickerLaunch;                     </span>
<span class="-5816036629249953738" onmouseenter="enter('-5816036629249953738');" onmouseout="out('-5816036629249953738');" style=""> 887             final WallpaperInfo clickedWallpaper = mLastClickedLiveWallpaperInfo;                        </span>
<span class="-5984340816262038900" onmouseenter="enter('-5984340816262038900');" onmouseout="out('-5984340816262038900');" style=""> 888             WallpaperInfo newLiveWallpaper = wm.getWallpaperInfo();                                      </span>
<span class="-1315611166116800128" onmouseenter="enter('-1315611166116800128');" onmouseout="out('-1315611166116800128');" style=""> 889             // Try to figure out if a live wallpaper was set;                                            </span>
<span class="-8377868439413142546" onmouseenter="enter('-8377868439413142546');" onmouseout="out('-8377868439413142546');" style=""><abbr title=" 890             if ((newLiveWallpaper != null) &amp;&amp; (((oldLiveWallpaper == null) || (!oldLiveWallpaper.getComponent().equals(newLiveWallpaper.getComponent()))) || clickedWallpaper.getComponent().equals(oldLiveWallpaper.getComponent()))) {"> 890             if ((newLiveWallpaper != null) &amp;&amp; (((oldLiveWallpaper == null) || (!oldLiveWallpaper.getCompo</abbr></span>
<span class="-5964103275755574248" onmouseenter="enter('-5964103275755574248');" onmouseout="out('-5964103275755574248');" style=""> 891                 // Return if a live wallpaper was set                                                    </span>
<span class="-7075511525703303023" onmouseenter="enter('-7075511525703303023');" onmouseout="out('-7075511525703303023');" style=""> 892                 setResult(RESULT_OK);                                                                    </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 893                 finish();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896     }                                                                                                    </span>
<span  style=""> 897                                                                                                          </span>
<span class="-1414235871370289475" onmouseenter="enter('-1414235871370289475');" onmouseout="out('-1414235871370289475');" style=""> 898     static void setWallpaperItemPaddingToZero(FrameLayout frameLayout) {                                 </span>
<span class="-6763839741894246945" onmouseenter="enter('-6763839741894246945');" onmouseout="out('-6763839741894246945');" style=""> 899         frameLayout.setPadding(0, 0, 0, 0);                                                              </span>
<span class="3772652785637557334" onmouseenter="enter('3772652785637557334');" onmouseout="out('3772652785637557334');" style=""> 900         frameLayout.setForeground(new ZeroPaddingDrawable(frameLayout.getForeground()));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901     }                                                                                                    </span>
<span  style=""> 902                                                                                                          </span>
<span class="-3459179076532382610" onmouseenter="enter('-3459179076532382610');" onmouseout="out('-3459179076532382610');" style=""> 903     private void addLongPressHandler(View v) {                                                           </span>
<span class="1024606645498811389" onmouseenter="enter('1024606645498811389');" onmouseout="out('1024606645498811389');" style=""> 904         v.setOnLongClickListener(mLongClickListener);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905     }                                                                                                    </span>
<span  style=""> 906                                                                                                          </span>
<span class="-5506305661846963409" onmouseenter="enter('-5506305661846963409');" onmouseout="out('-5506305661846963409');" style=""> 907     private ArrayList&lt;WallpaperTileInfo&gt; findBundledWallpapers() {                                       </span>
<span class="5885920776779194905" onmouseenter="enter('5885920776779194905');" onmouseout="out('5885920776779194905');" style=""> 908         final PackageManager pm = getPackageManager();                                                   </span>
<span class="5871817832928179175" onmouseenter="enter('5871817832928179175');" onmouseout="out('5871817832928179175');" style=""> 909         final ArrayList&lt;WallpaperTileInfo&gt; bundled = new ArrayList&lt;WallpaperTileInfo&gt;(24);               </span>
<span class="-1246582649877799770" onmouseenter="enter('-1246582649877799770');" onmouseout="out('-1246582649877799770');" style=""> 910         Partner partner = Partner.get(pm);                                                               </span>
<span class="-9215364277253785969" onmouseenter="enter('-9215364277253785969');" onmouseout="out('-9215364277253785969');" style=""> 911         if (partner != null) {                                                                           </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style=""> 912             final Resources partnerRes = partner.getResources();                                         </span>
<span class="6058094032617479696" onmouseenter="enter('6058094032617479696');" onmouseout="out('6058094032617479696');" style=""><abbr title=" 913             final int resId = partnerRes.getIdentifier(Partner.RES_WALLPAPERS, &quot;array&quot;, partner.getPackageName());"> 913             final int resId = partnerRes.getIdentifier(Partner.RES_WALLPAPERS, &quot;array&quot;, partner.getPackag</abbr></span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style=""> 914             if (resId != 0) {                                                                            </span>
<span class="-2118557433142396278" onmouseenter="enter('-2118557433142396278');" onmouseout="out('-2118557433142396278');" style=""> 915                 addWallpapers(bundled, partnerRes, partner.getPackageName(), resId);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916             }                                                                                            </span>
<span class="-4748120673698363377" onmouseenter="enter('-4748120673698363377');" onmouseout="out('-4748120673698363377');" style=""> 917             // Add system wallpapers                                                                     </span>
<span class="8829637239826637205" onmouseenter="enter('8829637239826637205');" onmouseout="out('8829637239826637205');" style=""> 918             File systemDir = partner.getWallpaperDirectory();                                            </span>
<span class="2399410353631539911" onmouseenter="enter('2399410353631539911');" onmouseout="out('2399410353631539911');" style=""> 919             if ((systemDir != null) &amp;&amp; systemDir.isDirectory()) {                                        </span>
<span class="1549902003223839534" onmouseenter="enter('1549902003223839534');" onmouseout="out('1549902003223839534');" style=""> 920                 for (File file : systemDir.listFiles()) {                                                </span>
<span class="-1906617314955916866" onmouseenter="enter('-1906617314955916866');" onmouseout="out('-1906617314955916866');" style=""> 921                     if (!file.isFile()) {                                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 922                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923                     }                                                                                    </span>
<span class="-4447045704555381031" onmouseenter="enter('-4447045704555381031');" onmouseout="out('-4447045704555381031');" style=""> 924                     String name = file.getName();                                                        </span>
<span class="2642008582597801087" onmouseenter="enter('2642008582597801087');" onmouseout="out('2642008582597801087');" style=""> 925                     int dotPos = name.lastIndexOf(&#x27;.&#x27;);                                                  </span>
<span class="5596042441253906476" onmouseenter="enter('5596042441253906476');" onmouseout="out('5596042441253906476');" style=""> 926                     String extension = &quot;&quot;;                                                               </span>
<span class="2779348235882599231" onmouseenter="enter('2779348235882599231');" onmouseout="out('2779348235882599231');" style=""> 927                     if (dotPos &gt;= (-1)) {                                                                </span>
<span class="5358735009623538448" onmouseenter="enter('5358735009623538448');" onmouseout="out('5358735009623538448');" style=""> 928                         extension = name.substring(dotPos);                                              </span>
<span class="-756743826621559391" onmouseenter="enter('-756743826621559391');" onmouseout="out('-756743826621559391');" style=""> 929                         name = name.substring(0, dotPos);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 930                     }                                                                                    </span>
<span class="-927337484625280418" onmouseenter="enter('-927337484625280418');" onmouseout="out('-927337484625280418');" style=""> 931                     if (name.endsWith(&quot;_small&quot;)) {                                                       </span>
<span class="-2832112970361767203" onmouseenter="enter('-2832112970361767203');" onmouseout="out('-2832112970361767203');" style=""> 932                         // it is a thumbnail                                                             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 933                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934                     }                                                                                    </span>
<span class="-8253614778131365119" onmouseenter="enter('-8253614778131365119');" onmouseout="out('-8253614778131365119');" style=""> 935                     File thumbnail = new File(systemDir, (name + &quot;_small&quot;) + extension);                 </span>
<span class="-3372803721501567410" onmouseenter="enter('-3372803721501567410');" onmouseout="out('-3372803721501567410');" style=""> 936                     Bitmap thumb = BitmapFactory.decodeFile(thumbnail.getAbsolutePath());                </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style=""> 937                     if (thumb != null) {                                                                 </span>
<span class="3695753775368890877" onmouseenter="enter('3695753775368890877');" onmouseout="out('3695753775368890877');" style=""> 938                         bundled.add(new FileWallpaperInfo(file, new BitmapDrawable(thumb)));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 942         }                                                                                                </span>
<span class="2664071456778699283" onmouseenter="enter('2664071456778699283');" onmouseout="out('2664071456778699283');" style=""> 943         Pair&lt;ApplicationInfo, Integer&gt; r = getWallpaperArrayResourceId();                                </span>
<span class="-4447905625078087046" onmouseenter="enter('-4447905625078087046');" onmouseout="out('-4447905625078087046');" style=""> 944         if (r != null) {                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 945             try {                                                                                        </span>
<span class="-6573463770199130323" onmouseenter="enter('-6573463770199130323');" onmouseout="out('-6573463770199130323');" style=""> 946                 Resources wallpaperRes = getPackageManager().getResourcesForApplication(r.first);        </span>
<span class="-2554303152129460876" onmouseenter="enter('-2554303152129460876');" onmouseout="out('-2554303152129460876');" style=""> 947                 addWallpapers(bundled, wallpaperRes, r.first.packageName, r.second);                     </span>
<span class="1662440237380033096" onmouseenter="enter('1662440237380033096');" onmouseout="out('1662440237380033096');" style=""> 948             } catch (PackageManager e) {                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 950         }                                                                                                </span>
<span class="-5194698231019789510" onmouseenter="enter('-5194698231019789510');" onmouseout="out('-5194698231019789510');" style=""> 951         if ((partner == null) || (!partner.hideDefaultWallpaper())) {                                    </span>
<span class="7034483189720629489" onmouseenter="enter('7034483189720629489');" onmouseout="out('7034483189720629489');" style=""> 952             // Add an entry for the default wallpaper (stored in system resources)                       </span>
<span class="-1302706568017147430" onmouseenter="enter('-1302706568017147430');" onmouseout="out('-1302706568017147430');" style=""><abbr title=" 953             WallpaperTileInfo defaultWallpaperInfo = (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.KITKAT) ? getPreKKDefaultWallpaperInfo() : getDefaultWallpaper();"> 953             WallpaperTileInfo defaultWallpaperInfo = (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.KITKAT)</abbr></span>
<span class="-7974818341329769015" onmouseenter="enter('-7974818341329769015');" onmouseout="out('-7974818341329769015');" style=""> 954             if (defaultWallpaperInfo != null) {                                                          </span>
<span class="7202846298285246873" onmouseenter="enter('7202846298285246873');" onmouseout="out('7202846298285246873');" style=""> 955                 bundled.add(0, defaultWallpaperInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957         }                                                                                                </span>
<span class="3924493507316405252" onmouseenter="enter('3924493507316405252');" onmouseout="out('3924493507316405252');" style=""> 958         return bundled;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959     }                                                                                                    </span>
<span  style=""> 960                                                                                                          </span>
<span class="-6595695538609845398" onmouseenter="enter('-6595695538609845398');" onmouseout="out('-6595695538609845398');" style=""> 961     private boolean writeImageToFileAsJpeg(File f, Bitmap b) {                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 962         try {                                                                                            </span>
<span class="8722539090112199092" onmouseenter="enter('8722539090112199092');" onmouseout="out('8722539090112199092');" style=""> 963             f.createNewFile();                                                                           </span>
<span class="3775180210190615739" onmouseenter="enter('3775180210190615739');" onmouseout="out('3775180210190615739');" style=""> 964             FileOutputStream thumbFileStream =                                                           </span>
<span class="2198104288806315130" onmouseenter="enter('2198104288806315130');" onmouseout="out('2198104288806315130');" style=""> 965                     openFileOutput(f.getName(), Context.MODE_PRIVATE);                                   </span>
<span class="2364901270506104115" onmouseenter="enter('2364901270506104115');" onmouseout="out('2364901270506104115');" style=""> 966             b.compress(Bitmap.CompressFormat.JPEG, 95, thumbFileStream);                                 </span>
<span class="5768958253628177358" onmouseenter="enter('5768958253628177358');" onmouseout="out('5768958253628177358');" style=""> 967             thumbFileStream.close();                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 968             return true;                                                                                 </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 969         } catch (IOException e) {                                                                        </span>
<span class="-4676604896942702598" onmouseenter="enter('-4676604896942702598');" onmouseout="out('-4676604896942702598');" style=""> 970             Log.e(TAG, &quot;Error while writing bitmap to file &quot; + e);                                       </span>
<span class="7682989536937550366" onmouseenter="enter('7682989536937550366');" onmouseout="out('7682989536937550366');" style=""> 971             f.delete();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 972         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 973         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974     }                                                                                                    </span>
<span  style=""> 975                                                                                                          </span>
<span class="-4823957996775296240" onmouseenter="enter('-4823957996775296240');" onmouseout="out('-4823957996775296240');" style=""> 976     private File getDefaultThumbFile() {                                                                 </span>
<span class="-8320244696572088072" onmouseenter="enter('-8320244696572088072');" onmouseout="out('-8320244696572088072');" style=""><abbr title=" 977         return new File(getFilesDir(), (Build.VERSION.SDK_INT + &quot;_&quot;) + DEFAULT_WALLPAPER_THUMBNAIL_FILENAME);"> 977         return new File(getFilesDir(), (Build.VERSION.SDK_INT + &quot;_&quot;) + DEFAULT_WALLPAPER_THUMBNAIL_FILENA</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 978     }                                                                                                    </span>
<span  style=""> 979                                                                                                          </span>
<span class="1227314529798978638" onmouseenter="enter('1227314529798978638');" onmouseout="out('1227314529798978638');" style=""> 980     private boolean saveDefaultWallpaperThumb(Bitmap b) {                                                </span>
<span class="8263823508211107068" onmouseenter="enter('8263823508211107068');" onmouseout="out('8263823508211107068');" style=""> 981         // Delete old thumbnails.                                                                        </span>
<span class="3567311882351013867" onmouseenter="enter('3567311882351013867');" onmouseout="out('3567311882351013867');" style=""> 982         new File(getFilesDir(), OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                      </span>
<span class="-2276391661806453489" onmouseenter="enter('-2276391661806453489');" onmouseout="out('-2276391661806453489');" style=""> 983         new File(getFilesDir(), DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                          </span>
<span class="1808821527848952005" onmouseenter="enter('1808821527848952005');" onmouseout="out('1808821527848952005');" style=""> 984         for (int i = Build.VERSION_CODES.JELLY_BEAN; i &lt; Build.VERSION.SDK_INT; i++) {                   </span>
<span class="5785624109142113136" onmouseenter="enter('5785624109142113136');" onmouseout="out('5785624109142113136');" style=""> 985             new File(getFilesDir(), (i + &quot;_&quot;) + DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986         }                                                                                                </span>
<span class="4686288793731739264" onmouseenter="enter('4686288793731739264');" onmouseout="out('4686288793731739264');" style=""> 987         return writeImageToFileAsJpeg(getDefaultThumbFile(), b);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988     }                                                                                                    </span>
<span  style=""> 989                                                                                                          </span>
<span class="-4877678771871800381" onmouseenter="enter('-4877678771871800381');" onmouseout="out('-4877678771871800381');" style=""> 990     private ResourceWallpaperInfo getPreKKDefaultWallpaperInfo() {                                       </span>
<span class="5520181104510013397" onmouseenter="enter('5520181104510013397');" onmouseout="out('5520181104510013397');" style=""> 991         Resources sysRes = Resources.getSystem();                                                        </span>
<span class="3223623880203196673" onmouseenter="enter('3223623880203196673');" onmouseout="out('3223623880203196673');" style=""> 992         int resId = sysRes.getIdentifier(&quot;default_wallpaper&quot;, &quot;drawable&quot;, &quot;android&quot;);                    </span>
<span class="-2700470529350012310" onmouseenter="enter('-2700470529350012310');" onmouseout="out('-2700470529350012310');" style=""> 993         File defaultThumbFile = getDefaultThumbFile();                                                   </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style=""> 994         Bitmap thumb = null;                                                                             </span>
<span class="3173128348719073493" onmouseenter="enter('3173128348719073493');" onmouseout="out('3173128348719073493');" style=""> 995         boolean defaultWallpaperExists = false;                                                          </span>
<span class="769015314191339580" onmouseenter="enter('769015314191339580');" onmouseout="out('769015314191339580');" style=""> 996         if (defaultThumbFile.exists()) {                                                                 </span>
<span class="145969986834765399" onmouseenter="enter('145969986834765399');" onmouseout="out('145969986834765399');" style=""> 997             thumb = BitmapFactory.decodeFile(defaultThumbFile.getAbsolutePath());                        </span>
<span class="-3053675610106547889" onmouseenter="enter('-3053675610106547889');" onmouseout="out('-3053675610106547889');" style=""> 998             defaultWallpaperExists = true;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 999         } else {                                                                                         </span>
<span class="8976545925819631954" onmouseenter="enter('8976545925819631954');" onmouseout="out('8976545925819631954');" style="">1000             Resources res = getResources();                                                              </span>
<span class="-5692402014536765414" onmouseenter="enter('-5692402014536765414');" onmouseout="out('-5692402014536765414');" style="">1001             Point defaultThumbSize = getDefaultThumbnailSize(res);                                       </span>
<span class="8688062696958133993" onmouseenter="enter('8688062696958133993');" onmouseout="out('8688062696958133993');" style="">1002             int rotation = WallpaperCropActivity.getRotationFromExif(res, resId);                        </span>
<span class="1390616075984498961" onmouseenter="enter('1390616075984498961');" onmouseout="out('1390616075984498961');" style="">1003             thumb = createThumbnail(defaultThumbSize, this, null, null, sysRes, resId, rotation, false); </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1004             if (thumb != null) {                                                                         </span>
<span class="4589895813778676518" onmouseenter="enter('4589895813778676518');" onmouseout="out('4589895813778676518');" style="">1005                 defaultWallpaperExists = saveDefaultWallpaperThumb(thumb);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1007         }                                                                                                </span>
<span class="1877730711367989636" onmouseenter="enter('1877730711367989636');" onmouseout="out('1877730711367989636');" style="">1008         if (defaultWallpaperExists) {                                                                    </span>
<span class="-5406664625181933074" onmouseenter="enter('-5406664625181933074');" onmouseout="out('-5406664625181933074');" style="">1009             return new ResourceWallpaperInfo(sysRes, resId, new BitmapDrawable(thumb));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1011         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012     }                                                                                                    </span>
<span  style="">1013                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style="">1014     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-6050375207733295576" onmouseenter="enter('-6050375207733295576');" onmouseout="out('-6050375207733295576');" style="">1015     private DefaultWallpaperInfo getDefaultWallpaper() {                                                 </span>
<span class="-2700470529350012310" onmouseenter="enter('-2700470529350012310');" onmouseout="out('-2700470529350012310');" style="">1016         File defaultThumbFile = getDefaultThumbFile();                                                   </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style="">1017         Bitmap thumb = null;                                                                             </span>
<span class="3173128348719073493" onmouseenter="enter('3173128348719073493');" onmouseout="out('3173128348719073493');" style="">1018         boolean defaultWallpaperExists = false;                                                          </span>
<span class="769015314191339580" onmouseenter="enter('769015314191339580');" onmouseout="out('769015314191339580');" style="">1019         if (defaultThumbFile.exists()) {                                                                 </span>
<span class="145969986834765399" onmouseenter="enter('145969986834765399');" onmouseout="out('145969986834765399');" style="">1020             thumb = BitmapFactory.decodeFile(defaultThumbFile.getAbsolutePath());                        </span>
<span class="-3053675610106547889" onmouseenter="enter('-3053675610106547889');" onmouseout="out('-3053675610106547889');" style="">1021             defaultWallpaperExists = true;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1022         } else {                                                                                         </span>
<span class="8976545925819631954" onmouseenter="enter('8976545925819631954');" onmouseout="out('8976545925819631954');" style="">1023             Resources res = getResources();                                                              </span>
<span class="-5692402014536765414" onmouseenter="enter('-5692402014536765414');" onmouseout="out('-5692402014536765414');" style="">1024             Point defaultThumbSize = getDefaultThumbnailSize(res);                                       </span>
<span class="5936660361826986129" onmouseenter="enter('5936660361826986129');" onmouseout="out('5936660361826986129');" style=""><abbr title="1025             Drawable wallpaperDrawable = WallpaperManager.getInstance(this).getBuiltInDrawable(defaultThumbSize.x, defaultThumbSize.y, true, 0.5F, 0.5F);">1025             Drawable wallpaperDrawable = WallpaperManager.getInstance(this).getBuiltInDrawable(defaultThu</abbr></span>
<span class="7887239685465932583" onmouseenter="enter('7887239685465932583');" onmouseout="out('7887239685465932583');" style="">1026             if (wallpaperDrawable != null) {                                                             </span>
<span class="4198939774442728354" onmouseenter="enter('4198939774442728354');" onmouseout="out('4198939774442728354');" style=""><abbr title="1027                 thumb = Bitmap.createBitmap(defaultThumbSize.x, defaultThumbSize.y, Bitmap.Config.ARGB_8888);">1027                 thumb = Bitmap.createBitmap(defaultThumbSize.x, defaultThumbSize.y, Bitmap.Config.ARGB_88</abbr></span>
<span class="1166395082389141916" onmouseenter="enter('1166395082389141916');" onmouseout="out('1166395082389141916');" style="">1028                 Canvas c = new Canvas(thumb);                                                            </span>
<span class="8212113414976856971" onmouseenter="enter('8212113414976856971');" onmouseout="out('8212113414976856971');" style="">1029                 wallpaperDrawable.setBounds(0, 0, defaultThumbSize.x, defaultThumbSize.y);               </span>
<span class="-8788570621207906555" onmouseenter="enter('-8788570621207906555');" onmouseout="out('-8788570621207906555');" style="">1030                 wallpaperDrawable.draw(c);                                                               </span>
<span class="5675729563233531278" onmouseenter="enter('5675729563233531278');" onmouseout="out('5675729563233531278');" style="">1031                 c.setBitmap(null);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032             }                                                                                            </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1033             if (thumb != null) {                                                                         </span>
<span class="4589895813778676518" onmouseenter="enter('4589895813778676518');" onmouseout="out('4589895813778676518');" style="">1034                 defaultWallpaperExists = saveDefaultWallpaperThumb(thumb);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1036         }                                                                                                </span>
<span class="1877730711367989636" onmouseenter="enter('1877730711367989636');" onmouseout="out('1877730711367989636');" style="">1037         if (defaultWallpaperExists) {                                                                    </span>
<span class="-3728514137807666119" onmouseenter="enter('-3728514137807666119');" onmouseout="out('-3728514137807666119');" style="">1038             return new DefaultWallpaperInfo(new BitmapDrawable(thumb));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1040         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041     }                                                                                                    </span>
<span  style="">1042                                                                                                          </span>
<span class="-1742079203168766475" onmouseenter="enter('-1742079203168766475');" onmouseout="out('-1742079203168766475');" style="">1043     public Pair&lt;ApplicationInfo, Integer&gt; getWallpaperArrayResourceId() {                                </span>
<span class="-6161770320248569187" onmouseenter="enter('-6161770320248569187');" onmouseout="out('-6161770320248569187');" style="">1044         // Context.getPackageName() may return the &quot;original&quot; package name,                              </span>
<span class="-937325419486317119" onmouseenter="enter('-937325419486317119');" onmouseout="out('-937325419486317119');" style="">1045         // com.android.launcher3; Resources needs the real package name,                                 </span>
<span class="-2310146865144726197" onmouseenter="enter('-2310146865144726197');" onmouseout="out('-2310146865144726197');" style="">1046         // com.android.launcher3. So we ask Resources for what it thinks the                             </span>
<span class="-8519279543710902199" onmouseenter="enter('-8519279543710902199');" onmouseout="out('-8519279543710902199');" style="">1047         // package name should be.                                                                       </span>
<span class="1562477602934366037" onmouseenter="enter('1562477602934366037');" onmouseout="out('1562477602934366037');" style="">1048         final String packageName = getResources().getResourcePackageName(R.array.wallpapers);            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1049         try {                                                                                            </span>
<span class="793324406234855079" onmouseenter="enter('793324406234855079');" onmouseout="out('793324406234855079');" style="">1050             ApplicationInfo info = getPackageManager().getApplicationInfo(packageName, 0);               </span>
<span class="7900160984832850008" onmouseenter="enter('7900160984832850008');" onmouseout="out('7900160984832850008');" style="">1051             return new Pair&lt;ApplicationInfo, Integer&gt;(info, R.array.wallpapers);                         </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1052         } catch (PackageManager.NameNotFoundException e) {                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1053             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1054         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055     }                                                                                                    </span>
<span  style="">1056                                                                                                          </span>
<span class="-2284415869168437439" onmouseenter="enter('-2284415869168437439');" onmouseout="out('-2284415869168437439');" style=""><abbr title="1057     private void addWallpapers(ArrayList&lt;WallpaperTileInfo&gt; known, Resources res, String packageName, int listResId) {">1057     private void addWallpapers(ArrayList&lt;WallpaperTileInfo&gt; known, Resources res, String packageName, int</abbr></span>
<span class="7110410272585510587" onmouseenter="enter('7110410272585510587');" onmouseout="out('7110410272585510587');" style="">1058         final String[] extras = res.getStringArray(listResId);                                           </span>
<span class="-8339999744341716205" onmouseenter="enter('-8339999744341716205');" onmouseout="out('-8339999744341716205');" style="">1059         for (String extra : extras) {                                                                    </span>
<span class="5117676898365713774" onmouseenter="enter('5117676898365713774');" onmouseout="out('5117676898365713774');" style="">1060             int resId = res.getIdentifier(extra, &quot;drawable&quot;, packageName);                               </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="">1061             if (resId != 0) {                                                                            </span>
<span class="-6623243265608892176" onmouseenter="enter('-6623243265608892176');" onmouseout="out('-6623243265608892176');" style="">1062                 final int thumbRes = res.getIdentifier(extra + &quot;_small&quot;, &quot;drawable&quot;, packageName);       </span>
<span class="1395464033869972102" onmouseenter="enter('1395464033869972102');" onmouseout="out('1395464033869972102');" style="">1063                 if (thumbRes != 0) {                                                                     </span>
<span class="-8065710553206349435" onmouseenter="enter('-8065710553206349435');" onmouseout="out('-8065710553206349435');" style=""><abbr title="1064                     ResourceWallpaperInfo wallpaperInfo = new ResourceWallpaperInfo(res, resId, res.getDrawable(thumbRes));">1064                     ResourceWallpaperInfo wallpaperInfo = new ResourceWallpaperInfo(res, resId, res.getDr</abbr></span>
<span class="6489784602606278995" onmouseenter="enter('6489784602606278995');" onmouseout="out('6489784602606278995');" style="">1065                     known.add(wallpaperInfo);                                                            </span>
<span class="-1095979516758920685" onmouseenter="enter('-1095979516758920685');" onmouseout="out('-1095979516758920685');" style="">1066                     // Log.d(TAG, &quot;add: [&quot; + packageName + &quot;]: &quot; + extra + &quot; (&quot; + res + &quot;)&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1068             } else {                                                                                     </span>
<span class="-3254000057019390134" onmouseenter="enter('-3254000057019390134');" onmouseout="out('-3254000057019390134');" style="">1069                 Log.e(TAG, &quot;Couldn&#x27;t find wallpaper &quot; + extra);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1071         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072     }                                                                                                    </span>
<span  style="">1073                                                                                                          </span>
<span class="8798832263856618785" onmouseenter="enter('8798832263856618785');" onmouseout="out('8798832263856618785');" style="">1074     public CropView getCropView() {                                                                      </span>
<span class="-6704760201962962178" onmouseenter="enter('-6704760201962962178');" onmouseout="out('-6704760201962962178');" style="">1075         return mCropView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076     }                                                                                                    </span>
<span  style="">1077                                                                                                          </span>
<span class="1726384713613661855" onmouseenter="enter('1726384713613661855');" onmouseout="out('1726384713613661855');" style="">1078     public SavedWallpaperImages getSavedImages() {                                                       </span>
<span class="8561023406342667010" onmouseenter="enter('8561023406342667010');" onmouseout="out('8561023406342667010');" style="">1079         return mSavedImages;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080     }                                                                                                    </span>
<span  style="">1081                                                                                                          </span>
<span class="-1282370188250350949" onmouseenter="enter('-1282370188250350949');" onmouseout="out('-1282370188250350949');" style="">1082     public void onLiveWallpaperPickerLaunch(WallpaperInfo info) {                                        </span>
<span class="957063298317837878" onmouseenter="enter('957063298317837878');" onmouseout="out('957063298317837878');" style="">1083         mLastClickedLiveWallpaperInfo = info;                                                            </span>
<span class="1720419068305677284" onmouseenter="enter('1720419068305677284');" onmouseout="out('1720419068305677284');" style="">1084         mLiveWallpaperInfoOnPickerLaunch = WallpaperManager.getInstance(this).getWallpaperInfo();        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085     }                                                                                                    </span>
<span  style="">1086                                                                                                          </span>
<span class="-4292702971064588005" onmouseenter="enter('-4292702971064588005');" onmouseout="out('-4292702971064588005');" style="">1087     static class ZeroPaddingDrawable extends LevelListDrawable {                                         </span>
<span class="-1809245915530945544" onmouseenter="enter('-1809245915530945544');" onmouseout="out('-1809245915530945544');" style="">1088         public ZeroPaddingDrawable(Drawable d) {                                                         </span>
<span class="7209017336523601499" onmouseenter="enter('7209017336523601499');" onmouseout="out('7209017336523601499');" style="">1089             super();                                                                                     </span>
<span class="-9075562460261717781" onmouseenter="enter('-9075562460261717781');" onmouseout="out('-9075562460261717781');" style="">1090             addLevel(0, 0, d);                                                                           </span>
<span class="-8837866944625871288" onmouseenter="enter('-8837866944625871288');" onmouseout="out('-8837866944625871288');" style="">1091             setLevel(0);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092         }                                                                                                </span>
<span  style="">1093                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1094         @Override                                                                                        </span>
<span class="-4441500511158129295" onmouseenter="enter('-4441500511158129295');" onmouseout="out('-4441500511158129295');" style="">1095         public boolean getPadding(Rect padding) {                                                        </span>
<span class="-595144173525385315" onmouseenter="enter('-595144173525385315');" onmouseout="out('-595144173525385315');" style="">1096             padding.set(0, 0, 0, 0);                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1097             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099     }                                                                                                    </span>
<span  style="">1100                                                                                                          </span>
<span class="-2937803399629319128" onmouseenter="enter('-2937803399629319128');" onmouseout="out('-2937803399629319128');" style="">1101     private static class SimpleWallpapersAdapter extends ArrayAdapter&lt;WallpaperTileInfo&gt; {               </span>
<span class="-8360437163581134323" onmouseenter="enter('-8360437163581134323');" onmouseout="out('-8360437163581134323');" style="">1102         private final LayoutInflater mLayoutInflater;                                                    </span>
<span  style="">1103                                                                                                          </span>
<span class="-4484594253025843931" onmouseenter="enter('-4484594253025843931');" onmouseout="out('-4484594253025843931');" style="">1104         SimpleWallpapersAdapter(Activity activity, ArrayList&lt;WallpaperTileInfo&gt; wallpapers) {            </span>
<span class="8653562979026841436" onmouseenter="enter('8653562979026841436');" onmouseout="out('8653562979026841436');" style="">1105             super(activity, R.layout.wallpaper_picker_item, wallpapers);                                 </span>
<span class="5318885258480438175" onmouseenter="enter('5318885258480438175');" onmouseout="out('5318885258480438175');" style="">1106             mLayoutInflater = activity.getLayoutInflater();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107         }                                                                                                </span>
<span  style="">1108                                                                                                          </span>
<span class="1084873981402571013" onmouseenter="enter('1084873981402571013');" onmouseout="out('1084873981402571013');" style="">1109         public View getView(int position, View convertView, ViewGroup parent) {                          </span>
<span class="2334288334628913507" onmouseenter="enter('2334288334628913507');" onmouseout="out('2334288334628913507');" style="">1110             Drawable thumb = getItem(position).mThumb;                                                   </span>
<span class="-4748570100733370001" onmouseenter="enter('-4748570100733370001');" onmouseout="out('-4748570100733370001');" style="">1111             if (thumb == null) {                                                                         </span>
<span class="-4942494812872156884" onmouseenter="enter('-4942494812872156884');" onmouseout="out('-4942494812872156884');" style="">1112                 Log.e(TAG, &quot;Error decoding thumbnail for wallpaper #&quot; + position);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113             }                                                                                            </span>
<span class="7911727622339877382" onmouseenter="enter('7911727622339877382');" onmouseout="out('7911727622339877382');" style="">1114             return createImageTileView(mLayoutInflater, convertView, parent, thumb);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116     }                                                                                                    </span>
<span  style="">1117                                                                                                          </span>
<span class="-486747090905136954" onmouseenter="enter('-486747090905136954');" onmouseout="out('-486747090905136954');" style=""><abbr title="1118     public static View createImageTileView(LayoutInflater layoutInflater, View convertView, ViewGroup parent, Drawable thumb) {">1118     public static View createImageTileView(LayoutInflater layoutInflater, View convertView, ViewGroup par</abbr></span>
<span class="-690381633676655047" onmouseenter="enter('-690381633676655047');" onmouseout="out('-690381633676655047');" style="">1119         View view;                                                                                       </span>
<span class="4181524603843345875" onmouseenter="enter('4181524603843345875');" onmouseout="out('4181524603843345875');" style="">1120         if (convertView == null) {                                                                       </span>
<span class="-8962994358344247461" onmouseenter="enter('-8962994358344247461');" onmouseout="out('-8962994358344247461');" style="">1121             view = layoutInflater.inflate(R.layout.wallpaper_picker_item, parent, false);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1122         } else {                                                                                         </span>
<span class="-1165364525461896664" onmouseenter="enter('-1165364525461896664');" onmouseout="out('-1165364525461896664');" style="">1123             view = convertView;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124         }                                                                                                </span>
<span class="4226202554801550438" onmouseenter="enter('4226202554801550438');" onmouseout="out('4226202554801550438');" style="">1125         setWallpaperItemPaddingToZero(((FrameLayout) (view)));                                           </span>
<span class="-4613258961805976074" onmouseenter="enter('-4613258961805976074');" onmouseout="out('-4613258961805976074');" style="">1126         ImageView image = ((ImageView) (view.findViewById(R.id.wallpaper_image)));                       </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1127         if (thumb != null) {                                                                             </span>
<span class="-3973426726107986909" onmouseenter="enter('-3973426726107986909');" onmouseout="out('-3973426726107986909');" style="">1128             image.setImageDrawable(thumb);                                                               </span>
<span class="206035284699071082" onmouseenter="enter('206035284699071082');" onmouseout="out('206035284699071082');" style="">1129             thumb.setDither(true);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130         }                                                                                                </span>
<span class="3345849580761087571" onmouseenter="enter('3345849580761087571');" onmouseout="out('3345849580761087571');" style="">1131         return view;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132     }                                                                                                    </span>
<span  style="">1133                                                                                                          </span>
<span class="-2975945065481865808" onmouseenter="enter('-2975945065481865808');" onmouseout="out('-2975945065481865808');" style="">1134     // In Launcher3, we override this with a method that catches exceptions                              </span>
<span class="-5274754236505393442" onmouseenter="enter('-5274754236505393442');" onmouseout="out('-5274754236505393442');" style="">1135     // from starting activities; didn&#x27;t want to copy and paste code into here                            </span>
<span class="744831245140937102" onmouseenter="enter('744831245140937102');" onmouseout="out('744831245140937102');" style="">1136     public void startActivityForResultSafely(Intent intent, int requestCode) {                           </span>
<span class="-1930681083273022971" onmouseenter="enter('-1930681083273022971');" onmouseout="out('-1930681083273022971');" style="">1137         startActivityForResult(intent, requestCode);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139 }                                                                                                        </span>





























































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="4969256359214059167" onmouseenter="enter('4969256359214059167');" onmouseout="out('4969256359214059167');" style="">   2   * Copyright (C) 2013 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-7391579724786615359" onmouseenter="enter('-7391579724786615359');" onmouseout="out('-7391579724786615359');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  19 -import android.animation.Animator;                                                                                </span>
<span class="8098692255261555192" onmouseenter="enter('8098692255261555192');" onmouseout="out('8098692255261555192');" style="">  20  import android.animation.LayoutTransition;                                                                        </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  21 +import android.annotation.TargetApi;                                                                              </span>
<span class="4319535404750690126" onmouseenter="enter('4319535404750690126');" onmouseout="out('4319535404750690126');" style="">  22  import android.app.ActionBar;                                                                                     </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  23  import android.app.Activity;                                                                                      </span>
<span class="951063033412864237" onmouseenter="enter('951063033412864237');" onmouseout="out('951063033412864237');" style="">  24  import android.app.WallpaperInfo;                                                                                 </span>
<span class="676108227569676783" onmouseenter="enter('676108227569676783');" onmouseout="out('676108227569676783');" style="">  25  import android.app.WallpaperManager;                                                                              </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27  import android.content.Intent;                                                                                    </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  28  import android.content.pm.ApplicationInfo;                                                                        </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  29  import android.content.pm.PackageManager;                                                                         </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  30  import android.content.res.Resources;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31  import android.database.Cursor;                                                                                   </span>
<span class="5252578614911642988" onmouseenter="enter('5252578614911642988');" onmouseout="out('5252578614911642988');" style="">  32  import android.database.DataSetObserver;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  33  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  34  import android.graphics.BitmapFactory;                                                                            </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  35  import android.graphics.Canvas;                                                                                   </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  36  import android.graphics.Matrix;                                                                                   </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  37 -import android.graphics.Paint;                                                                                    </span>
<span class="-3433483468941074901" onmouseenter="enter('-3433483468941074901');" onmouseout="out('-3433483468941074901');" style="">  38  import android.graphics.Point;                                                                                    </span>
<span class="7353926919338897104" onmouseenter="enter('7353926919338897104');" onmouseout="out('7353926919338897104');" style="">  39  import android.graphics.PorterDuff;                                                                               </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  40  import android.graphics.Rect;                                                                                     </span>
<span class="6159024636799649270" onmouseenter="enter('6159024636799649270');" onmouseout="out('6159024636799649270');" style="">  41  import android.graphics.RectF;                                                                                    </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  42  import android.graphics.drawable.BitmapDrawable;                                                                  </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  43  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-4553352622911846323" onmouseenter="enter('-4553352622911846323');" onmouseout="out('-4553352622911846323');" style="">  44  import android.graphics.drawable.LevelListDrawable;                                                               </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  45  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  46  import android.os.AsyncTask;                                                                                      </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  47  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  48  import android.os.Bundle;                                                                                         </span>
<span class="4691360065241021834" onmouseenter="enter('4691360065241021834');" onmouseout="out('4691360065241021834');" style="">  49  import android.provider.MediaStore;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  50  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  51  import android.util.Pair;                                                                                         </span>
<span class="-153541495165582031" onmouseenter="enter('-153541495165582031');" onmouseout="out('-153541495165582031');" style="">  52  import android.view.ActionMode;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  53  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  54  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  55  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  56  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  57  import android.view.View;                                                                                         </span>
<span class="-4070104819519100201" onmouseenter="enter('-4070104819519100201');" onmouseout="out('-4070104819519100201');" style="">  58  import android.view.View.OnClickListener;                                                                         </span>
<span class="3981555454743051089" onmouseenter="enter('3981555454743051089');" onmouseout="out('3981555454743051089');" style="">  59  import android.view.View.OnLayoutChangeListener;                                                                  </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  60  import android.view.ViewGroup;                                                                                    </span>
<span class="2571204843522825307" onmouseenter="enter('2571204843522825307');" onmouseout="out('2571204843522825307');" style="">  61  import android.view.ViewPropertyAnimator;                                                                         </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  62  import android.view.ViewTreeObserver;                                                                             </span>
<span class="1168424004905198318" onmouseenter="enter('1168424004905198318');" onmouseout="out('1168424004905198318');" style="">  63  import android.view.ViewTreeObserver.OnGlobalLayoutListener;                                                      </span>
<span class="-3054355229537475035" onmouseenter="enter('-3054355229537475035');" onmouseout="out('-3054355229537475035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +import android.view.WindowManager;                                                                                </span>
<span class="4293004276597960360" onmouseenter="enter('4293004276597960360');" onmouseout="out('4293004276597960360');" style="">  65  import android.view.animation.AccelerateInterpolator;                                                             </span>
<span class="-4330829166704003086" onmouseenter="enter('-4330829166704003086');" onmouseout="out('-4330829166704003086');" style="">  66  import android.view.animation.DecelerateInterpolator;                                                             </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  67 +import android.widget.ArrayAdapter;                                                                               </span>
<span class="-1389926198978222011" onmouseenter="enter('-1389926198978222011');" onmouseout="out('-1389926198978222011');" style="">  68  import android.widget.BaseAdapter;                                                                                </span>
<span class="619404646788779253" onmouseenter="enter('619404646788779253');" onmouseout="out('619404646788779253');" style="">  69  import android.widget.FrameLayout;                                                                                </span>
<span class="1210679520679819328" onmouseenter="enter('1210679520679819328');" onmouseout="out('1210679520679819328');" style="">  70  import android.widget.HorizontalScrollView;                                                                       </span>
<span class="-8478546344938881111" onmouseenter="enter('-8478546344938881111');" onmouseout="out('-8478546344938881111');" style="">  71  import android.widget.ImageView;                                                                                  </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  72  import android.widget.LinearLayout;                                                                               </span>
<span class="6118019645448811466" onmouseenter="enter('6118019645448811466');" onmouseout="out('6118019645448811466');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  73 -import android.widget.ListAdapter;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  74  import android.widget.Toast;                                                                                      </span>
<span  style="">  75                                                                                                                    </span>
<span class="6533473271465139745" onmouseenter="enter('6533473271465139745');" onmouseout="out('6533473271465139745');" style="">  76  import com.android.photos.BitmapRegionTileSource;                                                                 </span>
<span class="-6230463173033584865" onmouseenter="enter('-6230463173033584865');" onmouseout="out('-6230463173033584865');" style="">  77  import com.android.photos.BitmapRegionTileSource.BitmapSource;                                                    </span>
<span  style="">  78                                                                                                                    </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  79  import java.io.File;                                                                                              </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  80  import java.io.FileOutputStream;                                                                                  </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  81  import java.io.IOException;                                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  82  import java.util.ArrayList;                                                                                       </span>
<span  style="">  83                                                                                                                    </span>
<span class="-3479087503452779406" onmouseenter="enter('-3479087503452779406');" onmouseout="out('-3479087503452779406');" style="">  84  public class WallpaperPickerActivity extends WallpaperCropActivity {                                              </span>
<span class="-9207672248179223277" onmouseenter="enter('-9207672248179223277');" onmouseout="out('-9207672248179223277');" style="">  85      static final String TAG = &quot;Launcher.WallpaperPickerActivity&quot;;                                                 </span>
<span  style="">  86                                                                                                                    </span>
<span class="3742943605537861169" onmouseenter="enter('3742943605537861169');" onmouseout="out('3742943605537861169');" style="">  87      public static final int IMAGE_PICK = 5;                                                                       </span>
<span class="6964368849625562410" onmouseenter="enter('6964368849625562410');" onmouseout="out('6964368849625562410');" style="">  88      public static final int PICK_WALLPAPER_THIRD_PARTY_ACTIVITY = 6;                                              </span>
<span class="-7093050771651663150" onmouseenter="enter('-7093050771651663150');" onmouseout="out('-7093050771651663150');" style="">  89      public static final int PICK_LIVE_WALLPAPER = 7;                                                              </span>
<span class="2002999604810079271" onmouseenter="enter('2002999604810079271');" onmouseout="out('2002999604810079271');" style="">  90      private static final String TEMP_WALLPAPER_TILES = &quot;TEMP_WALLPAPER_TILES&quot;;                                    </span>
<span class="2369538557121393675" onmouseenter="enter('2369538557121393675');" onmouseout="out('2369538557121393675');" style="">  91      private static final String SELECTED_INDEX = &quot;SELECTED_INDEX&quot;;                                                </span>
<span class="8676512018192278738" onmouseenter="enter('8676512018192278738');" onmouseout="out('8676512018192278738');" style="">  92      private static final String OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME = &quot;default_thumb.jpg&quot;;                   </span>
<span class="739407583494491877" onmouseenter="enter('739407583494491877');" onmouseout="out('739407583494491877');" style="">  93      private static final String DEFAULT_WALLPAPER_THUMBNAIL_FILENAME = &quot;default_thumb2.jpg&quot;;                      </span>
<span class="-4006760574697076366" onmouseenter="enter('-4006760574697076366');" onmouseout="out('-4006760574697076366');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  94 +    private static final int FLAG_POST_DELAY_MILLIS = 200;                                                        </span>
<span  style="">  95                                                                                                                    </span>
<span class="4390153378349048662" onmouseenter="enter('4390153378349048662');" onmouseout="out('4390153378349048662');" style="">  96      private View mSelectedTile;                                                                                   </span>
<span class="-2897196063367166965" onmouseenter="enter('-2897196063367166965');" onmouseout="out('-2897196063367166965');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  97 -    private View mSetWallpaperButton;                                                                             </span>
<span class="-7732371762175677472" onmouseenter="enter('-7732371762175677472');" onmouseout="out('-7732371762175677472');" style="">  98      private boolean mIgnoreNextTap;                                                                               </span>
<span class="3263742057015850528" onmouseenter="enter('3263742057015850528');" onmouseout="out('3263742057015850528');" style="">  99      private OnClickListener mThumbnailOnClickListener;                                                            </span>
<span  style=""> 100                                                                                                                    </span>
<span class="-283642594149471002" onmouseenter="enter('-283642594149471002');" onmouseout="out('-283642594149471002');" style=""> 101      private LinearLayout mWallpapersView;                                                                         </span>
<span class="-441519593320335252" onmouseenter="enter('-441519593320335252');" onmouseout="out('-441519593320335252');" style=""> 102      private View mWallpaperStrip;                                                                                 </span>
<span  style=""> 103                                                                                                                    </span>
<span class="1128301058468039086" onmouseenter="enter('1128301058468039086');" onmouseout="out('1128301058468039086');" style=""> 104      private ActionMode.Callback mActionModeCallback;                                                              </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 105      private ActionMode mActionMode;                                                                               </span>
<span  style=""> 106                                                                                                                    </span>
<span class="8486739019347078220" onmouseenter="enter('8486739019347078220');" onmouseout="out('8486739019347078220');" style=""> 107      private View.OnLongClickListener mLongClickListener;                                                          </span>
<span  style=""> 108                                                                                                                    </span>
<span class="-4348434262230128417" onmouseenter="enter('-4348434262230128417');" onmouseout="out('-4348434262230128417');" style=""> 109      ArrayList&lt;Uri&gt; mTempWallpaperTiles = new ArrayList&lt;Uri&gt;();                                                    </span>
<span class="7453258409125933365" onmouseenter="enter('7453258409125933365');" onmouseout="out('7453258409125933365');" style=""> 110      private SavedWallpaperImages mSavedImages;                                                                    </span>
<span class="-2427071817986839025" onmouseenter="enter('-2427071817986839025');" onmouseout="out('-2427071817986839025');" style=""> 111      private WallpaperInfo mLiveWallpaperInfoOnPickerLaunch;                                                       </span>
<span class="-1380647248738642471" onmouseenter="enter('-1380647248738642471');" onmouseout="out('-1380647248738642471');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 112 -    private int mSelectedIndex;                                                                                   </span>
<span class="929971389778238645" onmouseenter="enter('929971389778238645');" onmouseout="out('929971389778238645');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 113 +    private int mSelectedIndex = -1;                                                                              </span>
<span class="4965621051566939005" onmouseenter="enter('4965621051566939005');" onmouseout="out('4965621051566939005');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 114 +    private WallpaperInfo mLastClickedLiveWallpaperInfo;                                                          </span>
<span  style=""> 115                                                                                                                    </span>
<span class="4075218350470872817" onmouseenter="enter('4075218350470872817');" onmouseout="out('4075218350470872817');" style=""> 116      public static abstract class WallpaperTileInfo {                                                              </span>
<span class="7550834803278421014" onmouseenter="enter('7550834803278421014');" onmouseout="out('7550834803278421014');" style=""> 117          protected View mView;                                                                                     </span>
<span class="3164205720118928248" onmouseenter="enter('3164205720118928248');" onmouseout="out('3164205720118928248');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +        public Drawable mThumb;                                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 119 +                                                                                                                  </span>
<span class="6316991849463108734" onmouseenter="enter('6316991849463108734');" onmouseout="out('6316991849463108734');" style=""> 120          public void setView(View v) {                                                                             </span>
<span class="-529347746759665505" onmouseenter="enter('-529347746759665505');" onmouseout="out('-529347746759665505');" style=""> 121              mView = v;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122          }                                                                                                         </span>
<span class="-3695677448824564507" onmouseenter="enter('-3695677448824564507');" onmouseout="out('-3695677448824564507');" style=""> 123          public void onClick(WallpaperPickerActivity a) {}                                                         </span>
<span class="-5126019138081524515" onmouseenter="enter('-5126019138081524515');" onmouseout="out('-5126019138081524515');" style=""> 124          public void onSave(WallpaperPickerActivity a) {}                                                          </span>
<span class="-7733232806592304896" onmouseenter="enter('-7733232806592304896');" onmouseout="out('-7733232806592304896');" style=""> 125          public void onDelete(WallpaperPickerActivity a) {}                                                        </span>
<span class="6774579784381031072" onmouseenter="enter('6774579784381031072');" onmouseout="out('6774579784381031072');" style=""> 126          public boolean isSelectable() { return false; }                                                           </span>
<span class="5815845045888824629" onmouseenter="enter('5815845045888824629');" onmouseout="out('5815845045888824629');" style=""> 127          public boolean isNamelessWallpaper() { return false; }                                                    </span>
<span class="-4275008082196176757" onmouseenter="enter('-4275008082196176757');" onmouseout="out('-4275008082196176757');" style=""> 128          public void onIndexUpdated(CharSequence label) {                                                          </span>
<span class="1066314433179649740" onmouseenter="enter('1066314433179649740');" onmouseout="out('1066314433179649740');" style=""> 129              if (isNamelessWallpaper()) {                                                                          </span>
<span class="8251992145347444102" onmouseenter="enter('8251992145347444102');" onmouseout="out('8251992145347444102');" style=""> 130                  mView.setContentDescription(label);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133      }                                                                                                             </span>
<span  style=""> 134                                                                                                                    </span>
<span class="8237636954076389639" onmouseenter="enter('8237636954076389639');" onmouseout="out('8237636954076389639');" style=""> 135      public static class PickImageInfo extends WallpaperTileInfo {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 136          @Override                                                                                                 </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 137          public void onClick(WallpaperPickerActivity a) {                                                          </span>
<span class="2089748537565408969" onmouseenter="enter('2089748537565408969');" onmouseout="out('2089748537565408969');" style=""> 138              Intent intent = new Intent(Intent.ACTION_GET_CONTENT);                                                </span>
<span class="-7445763452332816798" onmouseenter="enter('-7445763452332816798');" onmouseout="out('-7445763452332816798');" style=""> 139              intent.setType(&quot;image/*&quot;);                                                                            </span>
<span class="1585161910249024870" onmouseenter="enter('1585161910249024870');" onmouseout="out('1585161910249024870');" style=""> 140              a.startActivityForResultSafely(intent, IMAGE_PICK);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142      }                                                                                                             </span>
<span  style=""> 143                                                                                                                    </span>
<span class="8509990706001469030" onmouseenter="enter('8509990706001469030');" onmouseout="out('8509990706001469030');" style=""> 144      public static class UriWallpaperInfo extends WallpaperTileInfo {                                              </span>
<span class="8004450152098447697" onmouseenter="enter('8004450152098447697');" onmouseout="out('8004450152098447697');" style=""> 145          private Uri mUri;                                                                                         </span>
<span class="-1488686611326744898" onmouseenter="enter('-1488686611326744898');" onmouseout="out('-1488686611326744898');" style=""> 146          private boolean mFirstClick = true;                                                                       </span>
<span class="6610185084821017470" onmouseenter="enter('6610185084821017470');" onmouseout="out('6610185084821017470');" style=""> 147          private BitmapRegionTileSource.UriBitmapSource mBitmapSource;                                             </span>
<span class="8610701194225596743" onmouseenter="enter('8610701194225596743');" onmouseout="out('8610701194225596743');" style=""> 148          public UriWallpaperInfo(Uri uri) {                                                                        </span>
<span class="1271920698851316002" onmouseenter="enter('1271920698851316002');" onmouseout="out('1271920698851316002');" style=""> 149              mUri = uri;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 151          @Override                                                                                                 </span>
<span class="4138358358495509302" onmouseenter="enter('4138358358495509302');" onmouseout="out('4138358358495509302');" style=""> 152          public void onClick(final WallpaperPickerActivity a) {                                                    </span>
<span class="8679558832982190034" onmouseenter="enter('8679558832982190034');" onmouseout="out('8679558832982190034');" style=""> 153              final Runnable onLoad;                                                                                </span>
<span class="8795982501973046418" onmouseenter="enter('8795982501973046418');" onmouseout="out('8795982501973046418');" style=""> 154              if (!mFirstClick) {                                                                                   </span>
<span class="-4660024005754338718" onmouseenter="enter('-4660024005754338718');" onmouseout="out('-4660024005754338718');" style=""> 155                  onLoad = null;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 156              } else {                                                                                              </span>
<span class="-47635291022464950" onmouseenter="enter('-47635291022464950');" onmouseout="out('-47635291022464950');" style=""> 157                  mFirstClick = false;                                                                              </span>
<span class="3093989317977997664" onmouseenter="enter('3093989317977997664');" onmouseout="out('3093989317977997664');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 158 -                a.mSetWallpaperButton.setVisibility(View.INVISIBLE);                                              </span>
<span class="2494714179697294181" onmouseenter="enter('2494714179697294181');" onmouseout="out('2494714179697294181');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 159 +                a.mSetWallpaperButton.setEnabled(false);                                                          </span>
<span class="-2512757449438613240" onmouseenter="enter('-2512757449438613240');" onmouseout="out('-2512757449438613240');" style=""> 160                  onLoad = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 161                      public void run() {                                                                           </span>
<span class="-1092618589087535440" onmouseenter="enter('-1092618589087535440');" onmouseout="out('-1092618589087535440');" style=""> 162                          if (mBitmapSource != null &amp;&amp;                                                              </span>
<span class="-5646208940028184072" onmouseenter="enter('-5646208940028184072');" onmouseout="out('-5646208940028184072');" style=""> 163                                  mBitmapSource.getLoadingState() == BitmapSource.State.LOADED) {                   </span>
<span class="-4435485402424028248" onmouseenter="enter('-4435485402424028248');" onmouseout="out('-4435485402424028248');" style=""> 164                              a.selectTile(mView);                                                                  </span>
<span class="-1623980074559675149" onmouseenter="enter('-1623980074559675149');" onmouseout="out('-1623980074559675149');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 165 -                            a.mSetWallpaperButton.setVisibility(View.VISIBLE);                                    </span>
<span class="-7956748308294553331" onmouseenter="enter('-7956748308294553331');" onmouseout="out('-7956748308294553331');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +                            a.mSetWallpaperButton.setEnabled(true);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 167                          } else {                                                                                  </span>
<span class="-3511643828077608980" onmouseenter="enter('-3511643828077608980');" onmouseout="out('-3511643828077608980');" style=""> 168                              ViewGroup parent = (ViewGroup) mView.getParent();                                     </span>
<span class="7363799700568464510" onmouseenter="enter('7363799700568464510');" onmouseout="out('7363799700568464510');" style=""> 169                              if (parent != null) {                                                                 </span>
<span class="1125194709286705363" onmouseenter="enter('1125194709286705363');" onmouseout="out('1125194709286705363');" style=""> 170                                  parent.removeView(mView);                                                         </span>
<span class="-5214654684933993939" onmouseenter="enter('-5214654684933993939');" onmouseout="out('-5214654684933993939');" style=""> 171                                  Toast.makeText(a,                                                                 </span>
<span class="-2844570703353432216" onmouseenter="enter('-2844570703353432216');" onmouseout="out('-2844570703353432216');" style=""> 172                                          a.getString(R.string.image_load_fail),                                    </span>
<span class="427556865284092623" onmouseenter="enter('427556865284092623');" onmouseout="out('427556865284092623');" style=""> 173                                          Toast.LENGTH_SHORT).show();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 177                  };                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178              }                                                                                                     </span>
<span class="-8031841537067985347" onmouseenter="enter('-8031841537067985347');" onmouseout="out('-8031841537067985347');" style=""> 179              mBitmapSource = new BitmapRegionTileSource.UriBitmapSource(                                           </span>
<span class="-3332939544017123551" onmouseenter="enter('-3332939544017123551');" onmouseout="out('-3332939544017123551');" style=""> 180                      a, mUri, BitmapRegionTileSource.MAX_PREVIEW_SIZE);                                            </span>
<span class="-7148866754307262491" onmouseenter="enter('-7148866754307262491');" onmouseout="out('-7148866754307262491');" style=""> 181              a.setCropViewTileSource(mBitmapSource, true, false, onLoad);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 183          @Override                                                                                                 </span>
<span class="-1898343559351992508" onmouseenter="enter('-1898343559351992508');" onmouseout="out('-1898343559351992508');" style=""> 184          public void onSave(final WallpaperPickerActivity a) {                                                     </span>
<span class="2587024494847424214" onmouseenter="enter('2587024494847424214');" onmouseout="out('2587024494847424214');" style=""> 185              boolean finishActivityWhenDone = true;                                                                </span>
<span class="-5468975333283797562" onmouseenter="enter('-5468975333283797562');" onmouseout="out('-5468975333283797562');" style=""> 186              OnBitmapCroppedHandler h = new OnBitmapCroppedHandler() {                                             </span>
<span class="-2021142144081785590" onmouseenter="enter('-2021142144081785590');" onmouseout="out('-2021142144081785590');" style=""> 187                  public void onBitmapCropped(byte[] imageBytes) {                                                  </span>
<span class="-3067422103108397582" onmouseenter="enter('-3067422103108397582');" onmouseout="out('-3067422103108397582');" style=""> 188                      Point thumbSize = getDefaultThumbnailSize(a.getResources());                                  </span>
<span class="7862344698024253739" onmouseenter="enter('7862344698024253739');" onmouseout="out('7862344698024253739');" style=""> 189                      // rotation is set to 0 since imageBytes has already been correctly rotated                   </span>
<span class="1725565692823650889" onmouseenter="enter('1725565692823650889');" onmouseout="out('1725565692823650889');" style=""> 190                      Bitmap thumb = createThumbnail(                                                               </span>
<span class="6073449064591225469" onmouseenter="enter('6073449064591225469');" onmouseout="out('6073449064591225469');" style=""> 191                              thumbSize, null, null, imageBytes, null, 0, 0, true);                                 </span>
<span class="2596245612370871573" onmouseenter="enter('2596245612370871573');" onmouseout="out('2596245612370871573');" style=""> 192                      a.getSavedImages().writeImage(thumb, imageBytes);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 194              };                                                                                                    </span>
<span class="-4894948951423183692" onmouseenter="enter('-4894948951423183692');" onmouseout="out('-4894948951423183692');" style=""> 195              a.cropImageAndSetWallpaper(mUri, h, finishActivityWhenDone);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 197          @Override                                                                                                 </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 198          public boolean isSelectable() {                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 199              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 201          @Override                                                                                                 </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 202          public boolean isNamelessWallpaper() {                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 203              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205      }                                                                                                             </span>
<span  style=""> 206                                                                                                                    </span>
<span class="-4190074108086167067" onmouseenter="enter('-4190074108086167067');" onmouseout="out('-4190074108086167067');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 207 +    public static class FileWallpaperInfo extends WallpaperTileInfo {                                             </span>
<span class="-7985382265690223755" onmouseenter="enter('-7985382265690223755');" onmouseout="out('-7985382265690223755');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 208 +        private File mFile;                                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 209 +                                                                                                                  </span>
<span class="-1741311432485362981" onmouseenter="enter('-1741311432485362981');" onmouseout="out('-1741311432485362981');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 210 +        public FileWallpaperInfo(File target, Drawable thumb) {                                                   </span>
<span class="4814381598022211544" onmouseenter="enter('4814381598022211544');" onmouseout="out('4814381598022211544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 211 +            mFile = target;                                                                                       </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 212 +            mThumb = thumb;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 213 +        }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 214 +        @Override                                                                                                 </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 215 +        public void onClick(WallpaperPickerActivity a) {                                                          </span>
<span class="-8750527241018834281" onmouseenter="enter('-8750527241018834281');" onmouseout="out('-8750527241018834281');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +            BitmapRegionTileSource.UriBitmapSource bitmapSource =                                                 </span>
<span class="2483734173143161809" onmouseenter="enter('2483734173143161809');" onmouseout="out('2483734173143161809');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 217 +                    new BitmapRegionTileSource.UriBitmapSource(a, Uri.fromFile(mFile), 1024);                     </span>
<span class="-5075441127387044752" onmouseenter="enter('-5075441127387044752');" onmouseout="out('-5075441127387044752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 218 +            a.setCropViewTileSource(bitmapSource, false, true, null);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 219 +        }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 220 +        @Override                                                                                                 </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 221 +        public void onSave(WallpaperPickerActivity a) {                                                           </span>
<span class="3801787756410673434" onmouseenter="enter('3801787756410673434');" onmouseout="out('3801787756410673434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 222 +            a.setWallpaper(Uri.fromFile(mFile), true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 223 +        }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 224 +        @Override                                                                                                 </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 225 +        public boolean isSelectable() {                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 226 +            return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +        }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 228 +        @Override                                                                                                 </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 229 +        public boolean isNamelessWallpaper() {                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 230 +            return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 231 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 232 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 233 +                                                                                                                  </span>
<span class="4482520304290563098" onmouseenter="enter('4482520304290563098');" onmouseout="out('4482520304290563098');" style=""> 234      public static class ResourceWallpaperInfo extends WallpaperTileInfo {                                         </span>
<span class="-4981714113555710279" onmouseenter="enter('-4981714113555710279');" onmouseout="out('-4981714113555710279');" style=""> 235          private Resources mResources;                                                                             </span>
<span class="739042083917827597" onmouseenter="enter('739042083917827597');" onmouseout="out('739042083917827597');" style=""> 236          private int mResId;                                                                                       </span>
<span class="5604086013152487955" onmouseenter="enter('5604086013152487955');" onmouseout="out('5604086013152487955');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 237 -        private Drawable mThumb;                                                                                  </span>
<span  style=""> 238                                                                                                                    </span>
<span class="-3210764035307017816" onmouseenter="enter('-3210764035307017816');" onmouseout="out('-3210764035307017816');" style=""> 239          public ResourceWallpaperInfo(Resources res, int resId, Drawable thumb) {                                  </span>
<span class="8738901641718599503" onmouseenter="enter('8738901641718599503');" onmouseout="out('8738901641718599503');" style=""> 240              mResources = res;                                                                                     </span>
<span class="4654100838271737112" onmouseenter="enter('4654100838271737112');" onmouseout="out('4654100838271737112');" style=""> 241              mResId = resId;                                                                                       </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 242              mThumb = thumb;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 244          @Override                                                                                                 </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 245          public void onClick(WallpaperPickerActivity a) {                                                          </span>
<span class="8895257418408392595" onmouseenter="enter('8895257418408392595');" onmouseout="out('8895257418408392595');" style=""> 246              BitmapRegionTileSource.ResourceBitmapSource bitmapSource =                                            </span>
<span class="3679932597957891792" onmouseenter="enter('3679932597957891792');" onmouseout="out('3679932597957891792');" style=""> 247                      new BitmapRegionTileSource.ResourceBitmapSource(                                              </span>
<span class="9115725956109139967" onmouseenter="enter('9115725956109139967');" onmouseout="out('9115725956109139967');" style=""> 248                              mResources, mResId, BitmapRegionTileSource.MAX_PREVIEW_SIZE);                         </span>
<span class="2218452414014258741" onmouseenter="enter('2218452414014258741');" onmouseout="out('2218452414014258741');" style=""> 249              bitmapSource.loadInBackground();                                                                      </span>
<span class="7058429795285354581" onmouseenter="enter('7058429795285354581');" onmouseout="out('7058429795285354581');" style=""> 250              BitmapRegionTileSource source = new BitmapRegionTileSource(a, bitmapSource);                          </span>
<span class="1481068659103378542" onmouseenter="enter('1481068659103378542');" onmouseout="out('1481068659103378542');" style=""> 251              CropView v = a.getCropView();                                                                         </span>
<span class="7170858028895783855" onmouseenter="enter('7170858028895783855');" onmouseout="out('7170858028895783855');" style=""> 252              v.setTileSource(source, null);                                                                        </span>
<span class="2334799634056328814" onmouseenter="enter('2334799634056328814');" onmouseout="out('2334799634056328814');" style=""> 253              Point wallpaperSize = WallpaperCropActivity.getDefaultWallpaperSize(                                  </span>
<span class="-4580349435201294760" onmouseenter="enter('-4580349435201294760');" onmouseout="out('-4580349435201294760');" style=""> 254                      a.getResources(), a.getWindowManager());                                                      </span>
<span class="1498400964848924986" onmouseenter="enter('1498400964848924986');" onmouseout="out('1498400964848924986');" style=""> 255              RectF crop = WallpaperCropActivity.getMaxCropRect(                                                    </span>
<span class="5182456994402924347" onmouseenter="enter('5182456994402924347');" onmouseout="out('5182456994402924347');" style=""> 256                      source.getImageWidth(), source.getImageHeight(),                                              </span>
<span class="399667554211083958" onmouseenter="enter('399667554211083958');" onmouseout="out('399667554211083958');" style=""> 257                      wallpaperSize.x, wallpaperSize.y, false);                                                     </span>
<span class="8890199765694503418" onmouseenter="enter('8890199765694503418');" onmouseout="out('8890199765694503418');" style=""> 258              v.setScale(wallpaperSize.x / crop.width());                                                           </span>
<span class="5781800255248373469" onmouseenter="enter('5781800255248373469');" onmouseout="out('5781800255248373469');" style=""> 259              v.setTouchEnabled(false);                                                                             </span>
<span class="8306233968260689021" onmouseenter="enter('8306233968260689021');" onmouseout="out('8306233968260689021');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 260 +            a.setSystemWallpaperVisiblity(false);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 262          @Override                                                                                                 </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 263          public void onSave(WallpaperPickerActivity a) {                                                           </span>
<span class="2587024494847424214" onmouseenter="enter('2587024494847424214');" onmouseout="out('2587024494847424214');" style=""> 264              boolean finishActivityWhenDone = true;                                                                </span>
<span class="870771120792411608" onmouseenter="enter('870771120792411608');" onmouseout="out('870771120792411608');" style=""> 265              a.cropImageAndSetWallpaper(mResources, mResId, finishActivityWhenDone);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 267          @Override                                                                                                 </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 268          public boolean isSelectable() {                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 269              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 271          @Override                                                                                                 </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 272          public boolean isNamelessWallpaper() {                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 273              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275      }                                                                                                             </span>
<span  style=""> 276                                                                                                                    </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 277 +    @TargetApi(Build.VERSION_CODES.KITKAT)                                                                        </span>
<span class="-529309049483586312" onmouseenter="enter('-529309049483586312');" onmouseout="out('-529309049483586312');" style=""> 278      public static class DefaultWallpaperInfo extends WallpaperTileInfo {                                          </span>
<span class="3164205720118928248" onmouseenter="enter('3164205720118928248');" onmouseout="out('3164205720118928248');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 279 -        public Drawable mThumb;                                                                                   </span>
<span class="461095260062433386" onmouseenter="enter('461095260062433386');" onmouseout="out('461095260062433386');" style=""> 280          public DefaultWallpaperInfo(Drawable thumb) {                                                             </span>
<span class="-268334448376395887" onmouseenter="enter('-268334448376395887');" onmouseout="out('-268334448376395887');" style=""> 281              mThumb = thumb;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 283          @Override                                                                                                 </span>
<span class="3345556985989916578" onmouseenter="enter('3345556985989916578');" onmouseout="out('3345556985989916578');" style=""> 284          public void onClick(WallpaperPickerActivity a) {                                                          </span>
<span class="5819053214355424889" onmouseenter="enter('5819053214355424889');" onmouseout="out('5819053214355424889');" style=""> 285              CropView c = a.getCropView();                                                                         </span>
<span  style=""> 286                                                                                                                    </span>
<span class="-2729062430983653755" onmouseenter="enter('-2729062430983653755');" onmouseout="out('-2729062430983653755');" style=""> 287              Drawable defaultWallpaper = WallpaperManager.getInstance(a).getBuiltInDrawable(                       </span>
<span class="-832213469176736512" onmouseenter="enter('-832213469176736512');" onmouseout="out('-832213469176736512');" style=""> 288                      c.getWidth(), c.getHeight(), false, 0.5f, 0.5f);                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 289 +                                                                                                                  </span>
<span class="-2361710212545761200" onmouseenter="enter('-2361710212545761200');" onmouseout="out('-2361710212545761200');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 290 +            if (defaultWallpaper == null) {                                                                       </span>
<span class="6243043845794415874" onmouseenter="enter('6243043845794415874');" onmouseout="out('6243043845794415874');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 291 +                Log.w(TAG, &quot;Null default wallpaper encountered.&quot;);                                                </span>
<span class="-5029196267720010633" onmouseenter="enter('-5029196267720010633');" onmouseout="out('-5029196267720010633');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 292 +                c.setTileSource(null, null);                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 293 +                return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 294 +            }                                                                                                     </span>
<span  style=""> 295                                                                                                                    </span>
<span class="1391482188931535502" onmouseenter="enter('1391482188931535502');" onmouseout="out('1391482188931535502');" style=""> 296              c.setTileSource(                                                                                      </span>
<span class="-7530257073534369499" onmouseenter="enter('-7530257073534369499');" onmouseout="out('-7530257073534369499');" style=""> 297                      new DrawableTileSource(a, defaultWallpaper, DrawableTileSource.MAX_PREVIEW_SIZE), null);      </span>
<span class="7465943936877271880" onmouseenter="enter('7465943936877271880');" onmouseout="out('7465943936877271880');" style=""> 298              c.setScale(1f);                                                                                       </span>
<span class="-2853419027579511743" onmouseenter="enter('-2853419027579511743');" onmouseout="out('-2853419027579511743');" style=""> 299              c.setTouchEnabled(false);                                                                             </span>
<span class="8306233968260689021" onmouseenter="enter('8306233968260689021');" onmouseout="out('8306233968260689021');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 300 +            a.setSystemWallpaperVisiblity(false);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 302          @Override                                                                                                 </span>
<span class="-6458859359001161446" onmouseenter="enter('-6458859359001161446');" onmouseout="out('-6458859359001161446');" style=""> 303          public void onSave(WallpaperPickerActivity a) {                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 304              try {                                                                                                 </span>
<span class="7067546428920692022" onmouseenter="enter('7067546428920692022');" onmouseout="out('7067546428920692022');" style=""> 305                  WallpaperManager.getInstance(a).clear();                                                          </span>
<span class="-6231188240415860412" onmouseenter="enter('-6231188240415860412');" onmouseout="out('-6231188240415860412');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 306 +                a.setResult(RESULT_OK);                                                                           </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 307              } catch (IOException e) {                                                                             </span>
<span class="5382996693541062495" onmouseenter="enter('5382996693541062495');" onmouseout="out('5382996693541062495');" style=""> 308                  Log.w(&quot;Setting wallpaper to default threw exception&quot;, e);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309              }                                                                                                     </span>
<span class="6929368672411603344" onmouseenter="enter('6929368672411603344');" onmouseout="out('6929368672411603344');" style=""> 310              a.finish();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 312          @Override                                                                                                 </span>
<span class="-3651747032253752349" onmouseenter="enter('-3651747032253752349');" onmouseout="out('-3651747032253752349');" style=""> 313          public boolean isSelectable() {                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 314              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315          }                                                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 316          @Override                                                                                                 </span>
<span class="1193478286260005063" onmouseenter="enter('1193478286260005063');" onmouseout="out('1193478286260005063');" style=""> 317          public boolean isNamelessWallpaper() {                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 318              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320      }                                                                                                             </span>
<span  style=""> 321                                                                                                                    </span>
<span class="-8802765780262582525" onmouseenter="enter('-8802765780262582525');" onmouseout="out('-8802765780262582525');" style=""> 322      public void setWallpaperStripYOffset(float offset) {                                                          </span>
<span class="3084906213280284447" onmouseenter="enter('3084906213280284447');" onmouseout="out('3084906213280284447');" style=""> 323          mWallpaperStrip.setPadding(0, 0, 0, (int) offset);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 324 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 326 +    /**                                                                                                           </span>
<span class="-6795170733611954418" onmouseenter="enter('-6795170733611954418');" onmouseout="out('-6795170733611954418');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 327 +     * shows the system wallpaper behind the window and hides the {@link                                          </span>
<span class="6653510374782541379" onmouseenter="enter('6653510374782541379');" onmouseout="out('6653510374782541379');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 328 +     * #mCropView} if visible                                                                                     </span>
<span class="-919436548065776589" onmouseenter="enter('-919436548065776589');" onmouseout="out('-919436548065776589');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 329 +     * @param visible should the system wallpaper be shown                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 330 +     */                                                                                                           </span>
<span class="8447968906987641681" onmouseenter="enter('8447968906987641681');" onmouseout="out('8447968906987641681');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 331 +    protected void setSystemWallpaperVisiblity(final boolean visible) {                                           </span>
<span class="-417710703620962362" onmouseenter="enter('-417710703620962362');" onmouseout="out('-417710703620962362');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 332 +        // hide our own wallpaper preview if necessary                                                            </span>
<span class="5885318085227755768" onmouseenter="enter('5885318085227755768');" onmouseout="out('5885318085227755768');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 333 +        if(!visible) {                                                                                            </span>
<span class="2194873949088634393" onmouseenter="enter('2194873949088634393');" onmouseout="out('2194873949088634393');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 334 +            mCropView.setVisibility(View.VISIBLE);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 335 +        } else {                                                                                                  </span>
<span class="7308551084636696682" onmouseenter="enter('7308551084636696682');" onmouseout="out('7308551084636696682');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 336 +            changeWallpaperFlags(visible);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 337 +        }                                                                                                         </span>
<span class="1679109329919957838" onmouseenter="enter('1679109329919957838');" onmouseout="out('1679109329919957838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 338 +        // the change of the flag must be delayed in order to avoid flickering,                                   </span>
<span class="-5970233735028176128" onmouseenter="enter('-5970233735028176128');" onmouseout="out('-5970233735028176128');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 339 +        // a simple post / double post does not suffice here                                                      </span>
<span class="-7176702322471341093" onmouseenter="enter('-7176702322471341093');" onmouseout="out('-7176702322471341093');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 340 +        mCropView.postDelayed(new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 341 +            @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 342 +            public void run() {                                                                                   </span>
<span class="5885318085227755768" onmouseenter="enter('5885318085227755768');" onmouseout="out('5885318085227755768');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 343 +                if(!visible) {                                                                                    </span>
<span class="7308551084636696682" onmouseenter="enter('7308551084636696682');" onmouseout="out('7308551084636696682');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 344 +                    changeWallpaperFlags(visible);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 345 +                } else {                                                                                          </span>
<span class="-3429704510316414264" onmouseenter="enter('-3429704510316414264');" onmouseout="out('-3429704510316414264');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 346 +                    mCropView.setVisibility(View.INVISIBLE);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 347 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 348 +            }                                                                                                     </span>
<span class="-8235668854014933241" onmouseenter="enter('-8235668854014933241');" onmouseout="out('-8235668854014933241');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 349 +        }, FLAG_POST_DELAY_MILLIS);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 350 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 351 +                                                                                                                  </span>
<span class="3592826325976819586" onmouseenter="enter('3592826325976819586');" onmouseout="out('3592826325976819586');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 352 +    private void changeWallpaperFlags(boolean visible) {                                                          </span>
<span class="-4776685467772035793" onmouseenter="enter('-4776685467772035793');" onmouseout="out('-4776685467772035793');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 353 +        int desiredWallpaperFlag = visible ? WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER : 0;                  </span>
<span class="8691025336291682453" onmouseenter="enter('8691025336291682453');" onmouseout="out('8691025336291682453');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 354 +        int currentWallpaperFlag = getWindow().getAttributes().flags                                              </span>
<span class="8282067317873610301" onmouseenter="enter('8282067317873610301');" onmouseout="out('8282067317873610301');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 355 +                &amp; WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER;                                                 </span>
<span class="-1167218077091760817" onmouseenter="enter('-1167218077091760817');" onmouseout="out('-1167218077091760817');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 356 +        if (desiredWallpaperFlag != currentWallpaperFlag) {                                                       </span>
<span class="2391614469750626890" onmouseenter="enter('2391614469750626890');" onmouseout="out('2391614469750626890');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 357 +            getWindow().setFlags(desiredWallpaperFlag,                                                            </span>
<span class="350679169211130451" onmouseenter="enter('350679169211130451');" onmouseout="out('350679169211130451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 358 +                    WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 359 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 360 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 361 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +    @Override                                                                                                     </span>
<span class="1140607717618445838" onmouseenter="enter('1140607717618445838');" onmouseout="out('1140607717618445838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 363 +    public void setCropViewTileSource(BitmapSource bitmapSource,                                                  </span>
<span class="4950213883544597262" onmouseenter="enter('4950213883544597262');" onmouseout="out('4950213883544597262');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 364 +                                      boolean touchEnabled,                                                       </span>
<span class="-6368270284124027023" onmouseenter="enter('-6368270284124027023');" onmouseout="out('-6368270284124027023');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 365 +                                      boolean moveToLeft,                                                         </span>
<span class="177276617274926150" onmouseenter="enter('177276617274926150');" onmouseout="out('177276617274926150');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 366 +                                      final Runnable postExecute) {                                               </span>
<span class="-5291509537717890007" onmouseenter="enter('-5291509537717890007');" onmouseout="out('-5291509537717890007');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 367 +        // we also want to show our own wallpaper instead of the one in the background                            </span>
<span class="5047660510705185298" onmouseenter="enter('5047660510705185298');" onmouseout="out('5047660510705185298');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 368 +        Runnable showPostExecuteRunnable = new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 369 +            @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 370 +            public void run() {                                                                                   </span>
<span class="6334360039402158540" onmouseenter="enter('6334360039402158540');" onmouseout="out('6334360039402158540');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 371 +                if(postExecute != null) {                                                                         </span>
<span class="-8492134334118709687" onmouseenter="enter('-8492134334118709687');" onmouseout="out('-8492134334118709687');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 372 +                    postExecute.run();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 373 +                }                                                                                                 </span>
<span class="-561940081499707422" onmouseenter="enter('-561940081499707422');" onmouseout="out('-561940081499707422');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 374 +                setSystemWallpaperVisiblity(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 375 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 376 +        };                                                                                                        </span>
<span class="-4658752126328035538" onmouseenter="enter('-4658752126328035538');" onmouseout="out('-4658752126328035538');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 377 +        super.setCropViewTileSource(bitmapSource,                                                                 </span>
<span class="5417365411554046888" onmouseenter="enter('5417365411554046888');" onmouseout="out('5417365411554046888');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 378 +                touchEnabled,                                                                                     </span>
<span class="4993650789095952145" onmouseenter="enter('4993650789095952145');" onmouseout="out('4993650789095952145');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 379 +                moveToLeft,                                                                                       </span>
<span class="5392505438861518590" onmouseenter="enter('5392505438861518590');" onmouseout="out('5392505438861518590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 380 +                showPostExecuteRunnable);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381      }                                                                                                             </span>
<span  style=""> 382                                                                                                                    </span>
<span class="5854257451777934287" onmouseenter="enter('5854257451777934287');" onmouseout="out('5854257451777934287');" style=""> 383      // called by onCreate; this is subclassed to overwrite WallpaperCropActivity                                  </span>
<span class="-2182533896997661648" onmouseenter="enter('-2182533896997661648');" onmouseout="out('-2182533896997661648');" style=""> 384      protected void init() {                                                                                       </span>
<span class="2979438704186700018" onmouseenter="enter('2979438704186700018');" onmouseout="out('2979438704186700018');" style=""> 385          setContentView(R.layout.wallpaper_picker);                                                                </span>
<span  style=""> 386                                                                                                                    </span>
<span class="-1776232873259644844" onmouseenter="enter('-1776232873259644844');" onmouseout="out('-1776232873259644844');" style=""> 387          mCropView = (CropView) findViewById(R.id.cropView);                                                       </span>
<span class="-3429704510316414264" onmouseenter="enter('-3429704510316414264');" onmouseout="out('-3429704510316414264');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 388 +        mCropView.setVisibility(View.INVISIBLE);                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 389 +                                                                                                                  </span>
<span class="-2578053662916702311" onmouseenter="enter('-2578053662916702311');" onmouseout="out('-2578053662916702311');" style=""> 390          mWallpaperStrip = findViewById(R.id.wallpaper_strip);                                                     </span>
<span class="8068618426611567623" onmouseenter="enter('8068618426611567623');" onmouseout="out('8068618426611567623');" style=""> 391          mCropView.setTouchCallback(new CropView.TouchCallback() {                                                 </span>
<span class="-1035492205097680166" onmouseenter="enter('-1035492205097680166');" onmouseout="out('-1035492205097680166');" style=""> 392              ViewPropertyAnimator mAnim;                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 393              @Override                                                                                             </span>
<span class="1626698357951932531" onmouseenter="enter('1626698357951932531');" onmouseout="out('1626698357951932531');" style=""> 394              public void onTouchDown() {                                                                           </span>
<span class="-2973121909455018733" onmouseenter="enter('-2973121909455018733');" onmouseout="out('-2973121909455018733');" style=""> 395                  if (mAnim != null) {                                                                              </span>
<span class="-9205181203898657288" onmouseenter="enter('-9205181203898657288');" onmouseout="out('-9205181203898657288');" style=""> 396                      mAnim.cancel();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397                  }                                                                                                 </span>
<span class="3327382853992128006" onmouseenter="enter('3327382853992128006');" onmouseout="out('3327382853992128006');" style=""> 398                  if (mWallpaperStrip.getAlpha() == 1f) {                                                           </span>
<span class="-3956321380048081036" onmouseenter="enter('-3956321380048081036');" onmouseout="out('-3956321380048081036');" style=""> 399                      mIgnoreNextTap = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400                  }                                                                                                 </span>
<span class="-6956982405463185167" onmouseenter="enter('-6956982405463185167');" onmouseout="out('-6956982405463185167');" style=""> 401                  mAnim = mWallpaperStrip.animate();                                                                </span>
<span class="-6791557412964356793" onmouseenter="enter('-6791557412964356793');" onmouseout="out('-6791557412964356793');" style=""> 402                  mAnim.alpha(0f)                                                                                   </span>
<span class="-6026493296855862387" onmouseenter="enter('-6026493296855862387');" onmouseout="out('-6026493296855862387');" style=""> 403                      .setDuration(150)                                                                             </span>
<span class="-724010739576222770" onmouseenter="enter('-724010739576222770');" onmouseout="out('-724010739576222770');" style=""> 404                      .withEndAction(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 405                          public void run() {                                                                       </span>
<span class="5391643758310247109" onmouseenter="enter('5391643758310247109');" onmouseout="out('5391643758310247109');" style=""> 406                              mWallpaperStrip.setVisibility(View.INVISIBLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 408                      });                                                                                           </span>
<span class="4120717992136711655" onmouseenter="enter('4120717992136711655');" onmouseout="out('4120717992136711655');" style=""> 409                  mAnim.setInterpolator(new AccelerateInterpolator(0.75f));                                         </span>
<span class="3184709938218096424" onmouseenter="enter('3184709938218096424');" onmouseout="out('3184709938218096424');" style=""> 410                  mAnim.start();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411              }                                                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 412              @Override                                                                                             </span>
<span class="-4028587905866202696" onmouseenter="enter('-4028587905866202696');" onmouseout="out('-4028587905866202696');" style=""> 413              public void onTouchUp() {                                                                             </span>
<span class="2725693883097632090" onmouseenter="enter('2725693883097632090');" onmouseout="out('2725693883097632090');" style=""> 414                  mIgnoreNextTap = false;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415              }                                                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 416              @Override                                                                                             </span>
<span class="-7758883269909585068" onmouseenter="enter('-7758883269909585068');" onmouseout="out('-7758883269909585068');" style=""> 417              public void onTap() {                                                                                 </span>
<span class="6942313366430007213" onmouseenter="enter('6942313366430007213');" onmouseout="out('6942313366430007213');" style=""> 418                  boolean ignoreTap = mIgnoreNextTap;                                                               </span>
<span class="2725693883097632090" onmouseenter="enter('2725693883097632090');" onmouseout="out('2725693883097632090');" style=""> 419                  mIgnoreNextTap = false;                                                                           </span>
<span class="387446229183659648" onmouseenter="enter('387446229183659648');" onmouseout="out('387446229183659648');" style=""> 420                  if (!ignoreTap) {                                                                                 </span>
<span class="-2973121909455018733" onmouseenter="enter('-2973121909455018733');" onmouseout="out('-2973121909455018733');" style=""> 421                      if (mAnim != null) {                                                                          </span>
<span class="-9205181203898657288" onmouseenter="enter('-9205181203898657288');" onmouseout="out('-9205181203898657288');" style=""> 422                          mAnim.cancel();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                      }                                                                                             </span>
<span class="2849585250197552354" onmouseenter="enter('2849585250197552354');" onmouseout="out('2849585250197552354');" style=""> 424                      mWallpaperStrip.setVisibility(View.VISIBLE);                                                  </span>
<span class="-6956982405463185167" onmouseenter="enter('-6956982405463185167');" onmouseout="out('-6956982405463185167');" style=""> 425                      mAnim = mWallpaperStrip.animate();                                                            </span>
<span class="-6529107894597579397" onmouseenter="enter('-6529107894597579397');" onmouseout="out('-6529107894597579397');" style=""> 426                      mAnim.alpha(1f)                                                                               </span>
<span class="-6026493296855862387" onmouseenter="enter('-6026493296855862387');" onmouseout="out('-6026493296855862387');" style=""> 427                           .setDuration(150)                                                                        </span>
<span class="-6632446345541241704" onmouseenter="enter('-6632446345541241704');" onmouseout="out('-6632446345541241704');" style=""> 428                           .setInterpolator(new DecelerateInterpolator(0.75f));                                     </span>
<span class="3184709938218096424" onmouseenter="enter('3184709938218096424');" onmouseout="out('3184709938218096424');" style=""> 429                      mAnim.start();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 432          });                                                                                                       </span>
<span  style=""> 433                                                                                                                    </span>
<span class="-773253411800983412" onmouseenter="enter('-773253411800983412');" onmouseout="out('-773253411800983412');" style=""> 434          mThumbnailOnClickListener = new OnClickListener() {                                                       </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 435              public void onClick(View v) {                                                                         </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 436                  if (mActionMode != null) {                                                                        </span>
<span class="-7945425703771551193" onmouseenter="enter('-7945425703771551193');" onmouseout="out('-7945425703771551193');" style=""> 437                      // When CAB is up, clicking toggles the item instead                                          </span>
<span class="8281773320045926887" onmouseenter="enter('8281773320045926887');" onmouseout="out('8281773320045926887');" style=""> 438                      if (v.isLongClickable()) {                                                                    </span>
<span class="-1009252700459954960" onmouseenter="enter('-1009252700459954960');" onmouseout="out('-1009252700459954960');" style=""> 439                          mLongClickListener.onLongClick(v);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440                      }                                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 441                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442                  }                                                                                                 </span>
<span class="-5998802208600738538" onmouseenter="enter('-5998802208600738538');" onmouseout="out('-5998802208600738538');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 443 +                mSetWallpaperButton.setEnabled(true);                                                             </span>
<span class="-5476934872896833292" onmouseenter="enter('-5476934872896833292');" onmouseout="out('-5476934872896833292');" style=""> 444                  WallpaperTileInfo info = (WallpaperTileInfo) v.getTag();                                          </span>
<span class="-5097416669740389956" onmouseenter="enter('-5097416669740389956');" onmouseout="out('-5097416669740389956');" style=""> 445                  if (info.isSelectable() &amp;&amp; v.getVisibility() == View.VISIBLE) {                                   </span>
<span class="-4588532236714287793" onmouseenter="enter('-4588532236714287793');" onmouseout="out('-4588532236714287793');" style=""> 446                      selectTile(v);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447                  }                                                                                                 </span>
<span class="8040467138641960798" onmouseenter="enter('8040467138641960798');" onmouseout="out('8040467138641960798');" style=""> 448                  info.onClick(WallpaperPickerActivity.this);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 450          };                                                                                                        </span>
<span class="-8969101037229031036" onmouseenter="enter('-8969101037229031036');" onmouseout="out('-8969101037229031036');" style=""> 451          mLongClickListener = new View.OnLongClickListener() {                                                     </span>
<span class="-5185673936905803234" onmouseenter="enter('-5185673936905803234');" onmouseout="out('-5185673936905803234');" style=""> 452              // Called when the user long-clicks on someView                                                       </span>
<span class="4352920324548579969" onmouseenter="enter('4352920324548579969');" onmouseout="out('4352920324548579969');" style=""> 453              public boolean onLongClick(View view) {                                                               </span>
<span class="-7607400486566825959" onmouseenter="enter('-7607400486566825959');" onmouseout="out('-7607400486566825959');" style=""> 454                  CheckableFrameLayout c = (CheckableFrameLayout) view;                                             </span>
<span class="17729423456607520" onmouseenter="enter('17729423456607520');" onmouseout="out('17729423456607520');" style=""> 455                  c.toggle();                                                                                       </span>
<span  style=""> 456                                                                                                                    </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 457                  if (mActionMode != null) {                                                                        </span>
<span class="-102618795880011952" onmouseenter="enter('-102618795880011952');" onmouseout="out('-102618795880011952');" style=""> 458                      mActionMode.invalidate();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 459                  } else {                                                                                          </span>
<span class="-9026698002389905756" onmouseenter="enter('-9026698002389905756');" onmouseout="out('-9026698002389905756');" style=""> 460                      // Start the CAB using the ActionMode.Callback defined below                                  </span>
<span class="-65256925409540847" onmouseenter="enter('-65256925409540847');" onmouseout="out('-65256925409540847');" style=""> 461                      mActionMode = startActionMode(mActionModeCallback);                                           </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 462                      int childCount = mWallpapersView.getChildCount();                                             </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 463                      for (int i = 0; i &lt; childCount; i++) {                                                        </span>
<span class="8061120510894137201" onmouseenter="enter('8061120510894137201');" onmouseout="out('8061120510894137201');" style=""> 464                          mWallpapersView.getChildAt(i).setSelected(false);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 467                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 469          };                                                                                                        </span>
<span  style=""> 470                                                                                                                    </span>
<span class="5863981315080253557" onmouseenter="enter('5863981315080253557');" onmouseout="out('5863981315080253557');" style=""> 471          // Populate the built-in wallpapers                                                                       </span>
<span class="6500407248480550199" onmouseenter="enter('6500407248480550199');" onmouseout="out('6500407248480550199');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 472 -        ArrayList&lt;ResourceWallpaperInfo&gt; wallpapers = findBundledWallpapers();                                    </span>
<span class="-6274410391280341112" onmouseenter="enter('-6274410391280341112');" onmouseout="out('-6274410391280341112');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 473 +        ArrayList&lt;WallpaperTileInfo&gt; wallpapers = findBundledWallpapers();                                        </span>
<span class="2526610556609193817" onmouseenter="enter('2526610556609193817');" onmouseout="out('2526610556609193817');" style=""> 474          mWallpapersView = (LinearLayout) findViewById(R.id.wallpaper_list);                                       </span>
<span class="-1084816711772244491" onmouseenter="enter('-1084816711772244491');" onmouseout="out('-1084816711772244491');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 475 -        BuiltInWallpapersAdapter ia = new BuiltInWallpapersAdapter(this, wallpapers);                             </span>
<span class="-2971214249397723609" onmouseenter="enter('-2971214249397723609');" onmouseout="out('-2971214249397723609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 476 +        SimpleWallpapersAdapter ia = new SimpleWallpapersAdapter(this, wallpapers);                               </span>
<span class="1613737006506352436" onmouseenter="enter('1613737006506352436');" onmouseout="out('1613737006506352436');" style=""> 477          populateWallpapersFromAdapter(mWallpapersView, ia, false);                                                </span>
<span  style=""> 478                                                                                                                    </span>
<span class="-6274271967551788045" onmouseenter="enter('-6274271967551788045');" onmouseout="out('-6274271967551788045');" style=""> 479          // Populate the saved wallpapers                                                                          </span>
<span class="-593929748363635247" onmouseenter="enter('-593929748363635247');" onmouseout="out('-593929748363635247');" style=""> 480          mSavedImages = new SavedWallpaperImages(this);                                                            </span>
<span class="-944718586241422514" onmouseenter="enter('-944718586241422514');" onmouseout="out('-944718586241422514');" style=""> 481          mSavedImages.loadThumbnailsAndImageIdList();                                                              </span>
<span class="3791789265677239077" onmouseenter="enter('3791789265677239077');" onmouseout="out('3791789265677239077');" style=""> 482          populateWallpapersFromAdapter(mWallpapersView, mSavedImages, true);                                       </span>
<span  style=""> 483                                                                                                                    </span>
<span class="-8704527322237514837" onmouseenter="enter('-8704527322237514837');" onmouseout="out('-8704527322237514837');" style=""> 484          // Populate the live wallpapers                                                                           </span>
<span class="-401644721260157166" onmouseenter="enter('-401644721260157166');" onmouseout="out('-401644721260157166');" style=""> 485          final LinearLayout liveWallpapersView =                                                                   </span>
<span class="-885348281479887742" onmouseenter="enter('-885348281479887742');" onmouseout="out('-885348281479887742');" style=""> 486                  (LinearLayout) findViewById(R.id.live_wallpaper_list);                                            </span>
<span class="-8599704022634275072" onmouseenter="enter('-8599704022634275072');" onmouseout="out('-8599704022634275072');" style=""> 487          final LiveWallpaperListAdapter a = new LiveWallpaperListAdapter(this);                                    </span>
<span class="7657389333195170209" onmouseenter="enter('7657389333195170209');" onmouseout="out('7657389333195170209');" style=""> 488          a.registerDataSetObserver(new DataSetObserver() {                                                         </span>
<span class="2979494936249539834" onmouseenter="enter('2979494936249539834');" onmouseout="out('2979494936249539834');" style=""> 489              public void onChanged() {                                                                             </span>
<span class="-1492802084192978474" onmouseenter="enter('-1492802084192978474');" onmouseout="out('-1492802084192978474');" style=""> 490                  liveWallpapersView.removeAllViews();                                                              </span>
<span class="3875768049007720660" onmouseenter="enter('3875768049007720660');" onmouseout="out('3875768049007720660');" style=""> 491                  populateWallpapersFromAdapter(liveWallpapersView, a, false);                                      </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style=""> 492                  initializeScrollForRtl();                                                                         </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 493                  updateTileIndices();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 495          });                                                                                                       </span>
<span  style=""> 496                                                                                                                    </span>
<span class="-205780312699671492" onmouseenter="enter('-205780312699671492');" onmouseout="out('-205780312699671492');" style=""> 497          // Populate the third-party wallpaper pickers                                                             </span>
<span class="4179693282871188976" onmouseenter="enter('4179693282871188976');" onmouseout="out('4179693282871188976');" style=""> 498          final LinearLayout thirdPartyWallpapersView =                                                             </span>
<span class="5882843090694659663" onmouseenter="enter('5882843090694659663');" onmouseout="out('5882843090694659663');" style=""> 499                  (LinearLayout) findViewById(R.id.third_party_wallpaper_list);                                     </span>
<span class="-8996746260612235963" onmouseenter="enter('-8996746260612235963');" onmouseout="out('-8996746260612235963');" style=""> 500          final ThirdPartyWallpaperPickerListAdapter ta =                                                           </span>
<span class="-3817734683852475238" onmouseenter="enter('-3817734683852475238');" onmouseout="out('-3817734683852475238');" style=""> 501                  new ThirdPartyWallpaperPickerListAdapter(this);                                                   </span>
<span class="-7445625898420221963" onmouseenter="enter('-7445625898420221963');" onmouseout="out('-7445625898420221963');" style=""> 502          populateWallpapersFromAdapter(thirdPartyWallpapersView, ta, false);                                       </span>
<span  style=""> 503                                                                                                                    </span>
<span class="4527492266177887191" onmouseenter="enter('4527492266177887191');" onmouseout="out('4527492266177887191');" style=""> 504          // Add a tile for the Gallery                                                                             </span>
<span class="-1043783805889159162" onmouseenter="enter('-1043783805889159162');" onmouseout="out('-1043783805889159162');" style=""> 505          LinearLayout masterWallpaperList = (LinearLayout) findViewById(R.id.master_wallpaper_list);               </span>
<span class="-2892944612318584502" onmouseenter="enter('-2892944612318584502');" onmouseout="out('-2892944612318584502');" style=""> 506          FrameLayout pickImageTile = (FrameLayout) getLayoutInflater().                                            </span>
<span class="5850716178866842185" onmouseenter="enter('5850716178866842185');" onmouseout="out('5850716178866842185');" style=""> 507                  inflate(R.layout.wallpaper_picker_image_picker_item, masterWallpaperList, false);                 </span>
<span class="2326204380171439497" onmouseenter="enter('2326204380171439497');" onmouseout="out('2326204380171439497');" style=""> 508          setWallpaperItemPaddingToZero(pickImageTile);                                                             </span>
<span class="-4838121476786006009" onmouseenter="enter('-4838121476786006009');" onmouseout="out('-4838121476786006009');" style=""> 509          masterWallpaperList.addView(pickImageTile, 0);                                                            </span>
<span  style=""> 510                                                                                                                    </span>
<span class="-8054039016662892826" onmouseenter="enter('-8054039016662892826');" onmouseout="out('-8054039016662892826');" style=""> 511          // Make its background the last photo taken on external storage                                           </span>
<span class="5284589790222029877" onmouseenter="enter('5284589790222029877');" onmouseout="out('5284589790222029877');" style=""> 512          Bitmap lastPhoto = getThumbnailOfLastPhoto();                                                             </span>
<span class="8723279423157572309" onmouseenter="enter('8723279423157572309');" onmouseout="out('8723279423157572309');" style=""> 513          if (lastPhoto != null) {                                                                                  </span>
<span class="-2542013877954624323" onmouseenter="enter('-2542013877954624323');" onmouseout="out('-2542013877954624323');" style=""> 514              ImageView galleryThumbnailBg =                                                                        </span>
<span class="7337794319296943994" onmouseenter="enter('7337794319296943994');" onmouseout="out('7337794319296943994');" style=""> 515                      (ImageView) pickImageTile.findViewById(R.id.wallpaper_image);                                 </span>
<span class="-9209586398559028294" onmouseenter="enter('-9209586398559028294');" onmouseout="out('-9209586398559028294');" style=""> 516              galleryThumbnailBg.setImageBitmap(getThumbnailOfLastPhoto());                                         </span>
<span class="624469022368512634" onmouseenter="enter('624469022368512634');" onmouseout="out('624469022368512634');" style=""> 517              int colorOverlay = getResources().getColor(R.color.wallpaper_picker_translucent_gray);                </span>
<span class="5708377594966735596" onmouseenter="enter('5708377594966735596');" onmouseout="out('5708377594966735596');" style=""> 518              galleryThumbnailBg.setColorFilter(colorOverlay, PorterDuff.Mode.SRC_ATOP);                            </span>
<span  style=""> 519                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520          }                                                                                                         </span>
<span  style=""> 521                                                                                                                    </span>
<span class="-8315020353080803014" onmouseenter="enter('-8315020353080803014');" onmouseout="out('-8315020353080803014');" style=""> 522          PickImageInfo pickImageInfo = new PickImageInfo();                                                        </span>
<span class="332578453689310385" onmouseenter="enter('332578453689310385');" onmouseout="out('332578453689310385');" style=""> 523          pickImageTile.setTag(pickImageInfo);                                                                      </span>
<span class="341631545919556933" onmouseenter="enter('341631545919556933');" onmouseout="out('341631545919556933');" style=""> 524          pickImageInfo.setView(pickImageTile);                                                                     </span>
<span class="-2769069389002591388" onmouseenter="enter('-2769069389002591388');" onmouseout="out('-2769069389002591388');" style=""> 525          pickImageTile.setOnClickListener(mThumbnailOnClickListener);                                              </span>
<span  style=""> 526                                                                                                                    </span>
<span class="-6323124298703880370" onmouseenter="enter('-6323124298703880370');" onmouseout="out('-6323124298703880370');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 527 -        // Add a tile for the default wallpaper                                                                   </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 528 -        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                                </span>
<span class="-8035104503087874539" onmouseenter="enter('-8035104503087874539');" onmouseout="out('-8035104503087874539');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 529 -            DefaultWallpaperInfo defaultWallpaperInfo = getDefaultWallpaper();                                    </span>
<span class="-4325253571427058789" onmouseenter="enter('-4325253571427058789');" onmouseout="out('-4325253571427058789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 530 -            FrameLayout defaultWallpaperTile = (FrameLayout) createImageTileView(                                 </span>
<span class="-8899029130827292664" onmouseenter="enter('-8899029130827292664');" onmouseout="out('-8899029130827292664');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 531 -                    getLayoutInflater(), 0, null, mWallpapersView, defaultWallpaperInfo.mThumb);                  </span>
<span class="-629728534688330447" onmouseenter="enter('-629728534688330447');" onmouseout="out('-629728534688330447');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 532 -            setWallpaperItemPaddingToZero(defaultWallpaperTile);                                                  </span>
<span class="-5979956798027861601" onmouseenter="enter('-5979956798027861601');" onmouseout="out('-5979956798027861601');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 533 -            defaultWallpaperTile.setTag(defaultWallpaperInfo);                                                    </span>
<span class="622777186220911912" onmouseenter="enter('622777186220911912');" onmouseout="out('622777186220911912');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 534 -            mWallpapersView.addView(defaultWallpaperTile, 0);                                                     </span>
<span class="-1284363967168502177" onmouseenter="enter('-1284363967168502177');" onmouseout="out('-1284363967168502177');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 535 -            defaultWallpaperTile.setOnClickListener(mThumbnailOnClickListener);                                   </span>
<span class="-3976171105652027808" onmouseenter="enter('-3976171105652027808');" onmouseout="out('-3976171105652027808');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 536 -            defaultWallpaperInfo.setView(defaultWallpaperTile);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 537 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 538 -                                                                                                                  </span>
<span class="-7723413543726583493" onmouseenter="enter('-7723413543726583493');" onmouseout="out('-7723413543726583493');" style=""> 539          // Select the first item; wait for a layout pass so that we initialize the dimensions of                  </span>
<span class="-7132987448791092062" onmouseenter="enter('-7132987448791092062');" onmouseout="out('-7132987448791092062');" style=""> 540          // cropView or the defaultWallpaperView first                                                             </span>
<span class="-3578479520308771673" onmouseenter="enter('-3578479520308771673');" onmouseout="out('-3578479520308771673');" style=""> 541          mCropView.addOnLayoutChangeListener(new OnLayoutChangeListener() {                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 542              @Override                                                                                             </span>
<span class="591765389892742886" onmouseenter="enter('591765389892742886');" onmouseout="out('591765389892742886');" style=""> 543              public void onLayoutChange(View v, int left, int top, int right, int bottom,                          </span>
<span class="-3173737103826844444" onmouseenter="enter('-3173737103826844444');" onmouseout="out('-3173737103826844444');" style=""> 544                      int oldLeft, int oldTop, int oldRight, int oldBottom) {                                       </span>
<span class="-7279384040956130450" onmouseenter="enter('-7279384040956130450');" onmouseout="out('-7279384040956130450');" style=""> 545                  if ((right - left) &gt; 0 &amp;&amp; (bottom - top) &gt; 0) {                                                   </span>
<span class="8533166584309198773" onmouseenter="enter('8533166584309198773');" onmouseout="out('8533166584309198773');" style=""> 546                      if (mSelectedIndex &gt;= 0 &amp;&amp; mSelectedIndex &lt; mWallpapersView.getChildCount()) {                </span>
<span class="3126649155980915533" onmouseenter="enter('3126649155980915533');" onmouseout="out('3126649155980915533');" style=""> 547                          mThumbnailOnClickListener.onClick(                                                        </span>
<span class="7801074009986787853" onmouseenter="enter('7801074009986787853');" onmouseout="out('7801074009986787853');" style=""> 548                                  mWallpapersView.getChildAt(mSelectedIndex));                                      </span>
<span class="-561940081499707422" onmouseenter="enter('-561940081499707422');" onmouseout="out('-561940081499707422');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 549 +                        setSystemWallpaperVisiblity(false);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550                      }                                                                                             </span>
<span class="-3420549157427558140" onmouseenter="enter('-3420549157427558140');" onmouseout="out('-3420549157427558140');" style=""> 551                      v.removeOnLayoutChangeListener(this);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 554          });                                                                                                       </span>
<span  style=""> 555                                                                                                                    </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 556          updateTileIndices();                                                                                      </span>
<span  style=""> 557                                                                                                                    </span>
<span class="1759508296475864781" onmouseenter="enter('1759508296475864781');" onmouseout="out('1759508296475864781');" style=""> 558          // Update the scroll for RTL                                                                              </span>
<span class="-4281514053962341678" onmouseenter="enter('-4281514053962341678');" onmouseout="out('-4281514053962341678');" style=""> 559          initializeScrollForRtl();                                                                                 </span>
<span  style=""> 560                                                                                                                    </span>
<span class="8754677635152392755" onmouseenter="enter('8754677635152392755');" onmouseout="out('8754677635152392755');" style=""> 561          // Create smooth layout transitions for when items are deleted                                            </span>
<span class="-4930329743174539782" onmouseenter="enter('-4930329743174539782');" onmouseout="out('-4930329743174539782');" style=""> 562          final LayoutTransition transitioner = new LayoutTransition();                                             </span>
<span class="1485581076488552999" onmouseenter="enter('1485581076488552999');" onmouseout="out('1485581076488552999');" style=""> 563          transitioner.setDuration(200);                                                                            </span>
<span class="-2061924607669327428" onmouseenter="enter('-2061924607669327428');" onmouseout="out('-2061924607669327428');" style=""> 564          transitioner.setStartDelay(LayoutTransition.CHANGE_DISAPPEARING, 0);                                      </span>
<span class="-3369306044554735862" onmouseenter="enter('-3369306044554735862');" onmouseout="out('-3369306044554735862');" style=""> 565          transitioner.setAnimator(LayoutTransition.DISAPPEARING, null);                                            </span>
<span class="3452611492242513009" onmouseenter="enter('3452611492242513009');" onmouseout="out('3452611492242513009');" style=""> 566          mWallpapersView.setLayoutTransition(transitioner);                                                        </span>
<span  style=""> 567                                                                                                                    </span>
<span class="-6690949822417478966" onmouseenter="enter('-6690949822417478966');" onmouseout="out('-6690949822417478966');" style=""> 568          // Action bar                                                                                             </span>
<span class="-3883215512946619745" onmouseenter="enter('-3883215512946619745');" onmouseout="out('-3883215512946619745');" style=""> 569          // Show the custom action bar view                                                                        </span>
<span class="-1117346380634877983" onmouseenter="enter('-1117346380634877983');" onmouseout="out('-1117346380634877983');" style=""> 570          final ActionBar actionBar = getActionBar();                                                               </span>
<span class="2297539018706653511" onmouseenter="enter('2297539018706653511');" onmouseout="out('2297539018706653511');" style=""> 571          actionBar.setCustomView(R.layout.actionbar_set_wallpaper);                                                </span>
<span class="-1240601639018603710" onmouseenter="enter('-1240601639018603710');" onmouseout="out('-1240601639018603710');" style=""> 572          actionBar.getCustomView().setOnClickListener(                                                             </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style=""> 573                  new View.OnClickListener() {                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 574                      @Override                                                                                     </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style=""> 575                      public void onClick(View v) {                                                                 </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 576                          if (mSelectedTile != null) {                                                              </span>
<span class="4798294102843957642" onmouseenter="enter('4798294102843957642');" onmouseout="out('4798294102843957642');" style=""> 577                              WallpaperTileInfo info = (WallpaperTileInfo) mSelectedTile.getTag();                  </span>
<span class="8585600142234583597" onmouseenter="enter('8585600142234583597');" onmouseout="out('8585600142234583597');" style=""> 578                              info.onSave(WallpaperPickerActivity.this);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 579 +                        } else {                                                                                  </span>
<span class="-2325831004577352356" onmouseenter="enter('-2325831004577352356');" onmouseout="out('-2325831004577352356');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 580 +                            // no tile was selected, so we just finish the activity and go back                   </span>
<span class="1247430566664665360" onmouseenter="enter('1247430566664665360');" onmouseout="out('1247430566664665360');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 581 +                            setResult(Activity.RESULT_OK);                                                        </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 582 +                            finish();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 585                  });                                                                                               </span>
<span class="-1738970073048232250" onmouseenter="enter('-1738970073048232250');" onmouseout="out('-1738970073048232250');" style=""> 586          mSetWallpaperButton = findViewById(R.id.set_wallpaper_button);                                            </span>
<span  style=""> 587                                                                                                                    </span>
<span class="-4302888392572327731" onmouseenter="enter('-4302888392572327731');" onmouseout="out('-4302888392572327731');" style=""> 588          // CAB for deleting items                                                                                 </span>
<span class="-127999484312805671" onmouseenter="enter('-127999484312805671');" onmouseout="out('-127999484312805671');" style=""> 589          mActionModeCallback = new ActionMode.Callback() {                                                         </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 590              // Called when the action mode is created; startActionMode() was called                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 591              @Override                                                                                             </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 592              public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                       </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 593                  // Inflate a menu resource providing context menu items                                           </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 594                  MenuInflater inflater = mode.getMenuInflater();                                                   </span>
<span class="-6388875521407758282" onmouseenter="enter('-6388875521407758282');" onmouseout="out('-6388875521407758282');" style=""> 595                  inflater.inflate(R.menu.cab_delete_wallpapers, menu);                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 596                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597              }                                                                                                     </span>
<span  style=""> 598                                                                                                                    </span>
<span class="870397737873592214" onmouseenter="enter('870397737873592214');" onmouseout="out('870397737873592214');" style=""> 599              private int numCheckedItems() {                                                                       </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 600                  int childCount = mWallpapersView.getChildCount();                                                 </span>
<span class="-6883723717821950794" onmouseenter="enter('-6883723717821950794');" onmouseout="out('-6883723717821950794');" style=""> 601                  int numCheckedItems = 0;                                                                          </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 602                  for (int i = 0; i &lt; childCount; i++) {                                                            </span>
<span class="-3282833298704710263" onmouseenter="enter('-3282833298704710263');" onmouseout="out('-3282833298704710263');" style=""> 603                      CheckableFrameLayout c = (CheckableFrameLayout) mWallpapersView.getChildAt(i);                </span>
<span class="-2798719840605914218" onmouseenter="enter('-2798719840605914218');" onmouseout="out('-2798719840605914218');" style=""> 604                      if (c.isChecked()) {                                                                          </span>
<span class="-1438188096822969363" onmouseenter="enter('-1438188096822969363');" onmouseout="out('-1438188096822969363');" style=""> 605                          numCheckedItems++;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607                  }                                                                                                 </span>
<span class="681861663930848334" onmouseenter="enter('681861663930848334');" onmouseout="out('681861663930848334');" style=""> 608                  return numCheckedItems;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609              }                                                                                                     </span>
<span  style=""> 610                                                                                                                    </span>
<span class="-4908427375201257296" onmouseenter="enter('-4908427375201257296');" onmouseout="out('-4908427375201257296');" style=""> 611              // Called each time the action mode is shown. Always called after onCreateActionMode,                 </span>
<span class="9007433729996553145" onmouseenter="enter('9007433729996553145');" onmouseout="out('9007433729996553145');" style=""> 612              // but may be called multiple times if the mode is invalidated.                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 613              @Override                                                                                             </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 614              public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                      </span>
<span class="-5101330785437320191" onmouseenter="enter('-5101330785437320191');" onmouseout="out('-5101330785437320191');" style=""> 615                  int numCheckedItems = numCheckedItems();                                                          </span>
<span class="8659757951446504827" onmouseenter="enter('8659757951446504827');" onmouseout="out('8659757951446504827');" style=""> 616                  if (numCheckedItems == 0) {                                                                       </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 617                      mode.finish();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 618                      return true;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 619                  } else {                                                                                          </span>
<span class="-2320150819220019446" onmouseenter="enter('-2320150819220019446');" onmouseout="out('-2320150819220019446');" style=""> 620                      mode.setTitle(getResources().getQuantityString(                                               </span>
<span class="3298697623442124911" onmouseenter="enter('3298697623442124911');" onmouseout="out('3298697623442124911');" style=""> 621                              R.plurals.number_of_items_selected, numCheckedItems, numCheckedItems));               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 622                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624              }                                                                                                     </span>
<span  style=""> 625                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 626              // Called when the user selects a contextual menu item                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 627              @Override                                                                                             </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 628              public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                  </span>
<span class="-2371175833572540313" onmouseenter="enter('-2371175833572540313');" onmouseout="out('-2371175833572540313');" style=""> 629                  int itemId = item.getItemId();                                                                    </span>
<span class="-5718447720547061668" onmouseenter="enter('-5718447720547061668');" onmouseout="out('-5718447720547061668');" style=""> 630                  if (itemId == R.id.menu_delete) {                                                                 </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 631                      int childCount = mWallpapersView.getChildCount();                                             </span>
<span class="-7751152015140741745" onmouseenter="enter('-7751152015140741745');" onmouseout="out('-7751152015140741745');" style=""> 632                      ArrayList&lt;View&gt; viewsToRemove = new ArrayList&lt;View&gt;();                                        </span>
<span class="1584722444517724282" onmouseenter="enter('1584722444517724282');" onmouseout="out('1584722444517724282');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 633 +                    boolean selectedTileRemoved = false;                                                          </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 634                      for (int i = 0; i &lt; childCount; i++) {                                                        </span>
<span class="7507653399143335627" onmouseenter="enter('7507653399143335627');" onmouseout="out('7507653399143335627');" style=""> 635                          CheckableFrameLayout c =                                                                  </span>
<span class="3931690413303975782" onmouseenter="enter('3931690413303975782');" onmouseout="out('3931690413303975782');" style=""> 636                                  (CheckableFrameLayout) mWallpapersView.getChildAt(i);                             </span>
<span class="-2798719840605914218" onmouseenter="enter('-2798719840605914218');" onmouseout="out('-2798719840605914218');" style=""> 637                          if (c.isChecked()) {                                                                      </span>
<span class="8039758652893746202" onmouseenter="enter('8039758652893746202');" onmouseout="out('8039758652893746202');" style=""> 638                              WallpaperTileInfo info = (WallpaperTileInfo) c.getTag();                              </span>
<span class="-5365064256543243978" onmouseenter="enter('-5365064256543243978');" onmouseout="out('-5365064256543243978');" style=""> 639                              info.onDelete(WallpaperPickerActivity.this);                                          </span>
<span class="7539132712862314960" onmouseenter="enter('7539132712862314960');" onmouseout="out('7539132712862314960');" style=""> 640                              viewsToRemove.add(c);                                                                 </span>
<span class="3452999234966632783" onmouseenter="enter('3452999234966632783');" onmouseout="out('3452999234966632783');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 641 +                            if (i == mSelectedIndex) {                                                            </span>
<span class="4038374084094048370" onmouseenter="enter('4038374084094048370');" onmouseout="out('4038374084094048370');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 642 +                                selectedTileRemoved = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 643 +                            }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645                      }                                                                                             </span>
<span class="-2799961312229830756" onmouseenter="enter('-2799961312229830756');" onmouseout="out('-2799961312229830756');" style=""> 646                      for (View v : viewsToRemove) {                                                                </span>
<span class="5094713957757001442" onmouseenter="enter('5094713957757001442');" onmouseout="out('5094713957757001442');" style=""> 647                          mWallpapersView.removeView(v);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 648 +                    }                                                                                             </span>
<span class="-3217878254483945199" onmouseenter="enter('-3217878254483945199');" onmouseout="out('-3217878254483945199');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 649 +                    if (selectedTileRemoved) {                                                                    </span>
<span class="-7240011280640645397" onmouseenter="enter('-7240011280640645397');" onmouseout="out('-7240011280640645397');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 650 +                        mSelectedIndex = -1;                                                                      </span>
<span class="-5936001525760364202" onmouseenter="enter('-5936001525760364202');" onmouseout="out('-5936001525760364202');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 651 +                        mSelectedTile = null;                                                                     </span>
<span class="125091680216115960" onmouseenter="enter('125091680216115960');" onmouseout="out('125091680216115960');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 652 +                        setSystemWallpaperVisiblity(true);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653                      }                                                                                             </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 654                      updateTileIndices();                                                                          </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 655                      mode.finish(); // Action picked, so close the CAB                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 656                      return true;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 657                  } else {                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 658                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660              }                                                                                                     </span>
<span  style=""> 661                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 662              // Called when the user exits the action mode                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 663              @Override                                                                                             </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 664              public void onDestroyActionMode(ActionMode mode) {                                                    </span>
<span class="1956448763626025048" onmouseenter="enter('1956448763626025048');" onmouseout="out('1956448763626025048');" style=""> 665                  int childCount = mWallpapersView.getChildCount();                                                 </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 666                  for (int i = 0; i &lt; childCount; i++) {                                                            </span>
<span class="-3282833298704710263" onmouseenter="enter('-3282833298704710263');" onmouseout="out('-3282833298704710263');" style=""> 667                      CheckableFrameLayout c = (CheckableFrameLayout) mWallpapersView.getChildAt(i);                </span>
<span class="1014221111310174159" onmouseenter="enter('1014221111310174159');" onmouseout="out('1014221111310174159');" style=""> 668                      c.setChecked(false);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669                  }                                                                                                 </span>
<span class="9135117288134691920" onmouseenter="enter('9135117288134691920');" onmouseout="out('9135117288134691920');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 670 -                mSelectedTile.setSelected(true);                                                                  </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 671 +                if (mSelectedTile != null) {                                                                      </span>
<span class="9135117288134691920" onmouseenter="enter('9135117288134691920');" onmouseout="out('9135117288134691920');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 672 +                    mSelectedTile.setSelected(true);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 673 +                }                                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 674                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 676          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677      }                                                                                                             </span>
<span  style=""> 678                                                                                                                    </span>
<span class="-1506115177228939080" onmouseenter="enter('-1506115177228939080');" onmouseout="out('-1506115177228939080');" style=""> 679      private void selectTile(View v) {                                                                             </span>
<span class="-9067239148356313290" onmouseenter="enter('-9067239148356313290');" onmouseout="out('-9067239148356313290');" style=""> 680          if (mSelectedTile != null) {                                                                              </span>
<span class="-2066645340429178571" onmouseenter="enter('-2066645340429178571');" onmouseout="out('-2066645340429178571');" style=""> 681              mSelectedTile.setSelected(false);                                                                     </span>
<span class="-5936001525760364202" onmouseenter="enter('-5936001525760364202');" onmouseout="out('-5936001525760364202');" style=""> 682              mSelectedTile = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683          }                                                                                                         </span>
<span class="-416733230307533043" onmouseenter="enter('-416733230307533043');" onmouseout="out('-416733230307533043');" style=""> 684          mSelectedTile = v;                                                                                        </span>
<span class="3995602257861476425" onmouseenter="enter('3995602257861476425');" onmouseout="out('3995602257861476425');" style=""> 685          v.setSelected(true);                                                                                      </span>
<span class="-6325232721939244615" onmouseenter="enter('-6325232721939244615');" onmouseout="out('-6325232721939244615');" style=""> 686          mSelectedIndex = mWallpapersView.indexOfChild(v);                                                         </span>
<span class="-7405161307855549247" onmouseenter="enter('-7405161307855549247');" onmouseout="out('-7405161307855549247');" style=""> 687          // TODO: Remove this once the accessibility framework and                                                 </span>
<span class="-4753818808741308090" onmouseenter="enter('-4753818808741308090');" onmouseout="out('-4753818808741308090');" style=""> 688          // services have better support for selection state.                                                      </span>
<span class="2204888622725665866" onmouseenter="enter('2204888622725665866');" onmouseout="out('2204888622725665866');" style=""> 689          v.announceForAccessibility(                                                                               </span>
<span class="2493998402613828012" onmouseenter="enter('2493998402613828012');" onmouseout="out('2493998402613828012');" style=""> 690                  getString(R.string.announce_selection, v.getContentDescription()));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691      }                                                                                                             </span>
<span  style=""> 692                                                                                                                    </span>
<span class="3613777925188016048" onmouseenter="enter('3613777925188016048');" onmouseout="out('3613777925188016048');" style=""> 693      private void initializeScrollForRtl() {                                                                       </span>
<span class="-1273765683152014823" onmouseenter="enter('-1273765683152014823');" onmouseout="out('-1273765683152014823');" style=""> 694          final HorizontalScrollView scroll =                                                                       </span>
<span class="-7037969170098618839" onmouseenter="enter('-7037969170098618839');" onmouseout="out('-7037969170098618839');" style=""> 695                  (HorizontalScrollView) findViewById(R.id.wallpaper_scroll_container);                             </span>
<span  style=""> 696                                                                                                                    </span>
<span class="1955425449244494245" onmouseenter="enter('1955425449244494245');" onmouseout="out('1955425449244494245');" style=""> 697          if (scroll.getLayoutDirection() == View.LAYOUT_DIRECTION_RTL) {                                           </span>
<span class="-1890364990500798192" onmouseenter="enter('-1890364990500798192');" onmouseout="out('-1890364990500798192');" style=""> 698              final ViewTreeObserver observer = scroll.getViewTreeObserver();                                       </span>
<span class="6394814703996271835" onmouseenter="enter('6394814703996271835');" onmouseout="out('6394814703996271835');" style=""> 699              observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {                                     </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 700                  public void onGlobalLayout() {                                                                    </span>
<span class="-62510142979053251" onmouseenter="enter('-62510142979053251');" onmouseout="out('-62510142979053251');" style=""> 701                      LinearLayout masterWallpaperList =                                                            </span>
<span class="149389540385452124" onmouseenter="enter('149389540385452124');" onmouseout="out('149389540385452124');" style=""> 702                              (LinearLayout) findViewById(R.id.master_wallpaper_list);                              </span>
<span class="-4254848503069544361" onmouseenter="enter('-4254848503069544361');" onmouseout="out('-4254848503069544361');" style=""> 703                      scroll.scrollTo(masterWallpaperList.getWidth(), 0);                                           </span>
<span class="358343610071411190" onmouseenter="enter('358343610071411190');" onmouseout="out('358343610071411190');" style=""> 704                      scroll.getViewTreeObserver().removeOnGlobalLayoutListener(this);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 706              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 708      }                                                                                                             </span>
<span  style=""> 709                                                                                                                    </span>
<span class="664193847003739221" onmouseenter="enter('664193847003739221');" onmouseout="out('664193847003739221');" style=""> 710      protected Bitmap getThumbnailOfLastPhoto() {                                                                  </span>
<span class="-456509780661296989" onmouseenter="enter('-456509780661296989');" onmouseout="out('-456509780661296989');" style=""> 711          Cursor cursor = MediaStore.Images.Media.query(getContentResolver(),                                       </span>
<span class="7103802485324583534" onmouseenter="enter('7103802485324583534');" onmouseout="out('7103802485324583534');" style=""> 712                  MediaStore.Images.Media.EXTERNAL_CONTENT_URI,                                                     </span>
<span class="-6614818697721200540" onmouseenter="enter('-6614818697721200540');" onmouseout="out('-6614818697721200540');" style=""> 713                  new String[] { MediaStore.Images.ImageColumns._ID,                                                </span>
<span class="-9180764227414027069" onmouseenter="enter('-9180764227414027069');" onmouseout="out('-9180764227414027069');" style=""> 714                      MediaStore.Images.ImageColumns.DATE_TAKEN},                                                   </span>
<span class="627696156117655587" onmouseenter="enter('627696156117655587');" onmouseout="out('627696156117655587');" style=""> 715                  null, null, MediaStore.Images.ImageColumns.DATE_TAKEN + &quot; DESC LIMIT 1&quot;);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 716 +                                                                                                                  </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style=""> 717          Bitmap thumb = null;                                                                                      </span>
<span class="-3461632027345581546" onmouseenter="enter('-3461632027345581546');" onmouseout="out('-3461632027345581546');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 718 -        if (cursor.moveToNext()) {                                                                                </span>
<span class="-1657892521407389619" onmouseenter="enter('-1657892521407389619');" onmouseout="out('-1657892521407389619');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 719 -            int id = cursor.getInt(0);                                                                            </span>
<span class="-1463225791006789159" onmouseenter="enter('-1463225791006789159');" onmouseout="out('-1463225791006789159');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 720 -            thumb = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(),                               </span>
<span class="-3467727521120241070" onmouseenter="enter('-3467727521120241070');" onmouseout="out('-3467727521120241070');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 721 -                    id, MediaStore.Images.Thumbnails.MINI_KIND, null);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 722 -        }                                                                                                         </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 723 -        cursor.close();                                                                                           </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 724 +        if (cursor != null) {                                                                                     </span>
<span class="-3461632027345581546" onmouseenter="enter('-3461632027345581546');" onmouseout="out('-3461632027345581546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 725 +            if (cursor.moveToNext()) {                                                                            </span>
<span class="-1657892521407389619" onmouseenter="enter('-1657892521407389619');" onmouseout="out('-1657892521407389619');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 726 +                int id = cursor.getInt(0);                                                                        </span>
<span class="-1463225791006789159" onmouseenter="enter('-1463225791006789159');" onmouseout="out('-1463225791006789159');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 727 +                thumb = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(),                           </span>
<span class="-3467727521120241070" onmouseenter="enter('-3467727521120241070');" onmouseout="out('-3467727521120241070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 728 +                        id, MediaStore.Images.Thumbnails.MINI_KIND, null);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 729 +            }                                                                                                     </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 730 +            cursor.close();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 731 +        }                                                                                                         </span>
<span class="2989265115448010726" onmouseenter="enter('2989265115448010726');" onmouseout="out('2989265115448010726');" style=""> 732          return thumb;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733      }                                                                                                             </span>
<span  style=""> 734                                                                                                                    </span>
<span class="-531063095242678892" onmouseenter="enter('-531063095242678892');" onmouseout="out('-531063095242678892');" style=""> 735      protected void onStop() {                                                                                     </span>
<span class="-4376279779571809033" onmouseenter="enter('-4376279779571809033');" onmouseout="out('-4376279779571809033');" style=""> 736          super.onStop();                                                                                           </span>
<span class="-2578053662916702311" onmouseenter="enter('-2578053662916702311');" onmouseout="out('-2578053662916702311');" style=""> 737          mWallpaperStrip = findViewById(R.id.wallpaper_strip);                                                     </span>
<span class="2061286900587029071" onmouseenter="enter('2061286900587029071');" onmouseout="out('2061286900587029071');" style=""> 738          if (mWallpaperStrip.getAlpha() &lt; 1f) {                                                                    </span>
<span class="-7993736133733899989" onmouseenter="enter('-7993736133733899989');" onmouseout="out('-7993736133733899989');" style=""> 739              mWallpaperStrip.setAlpha(1f);                                                                         </span>
<span class="2849585250197552354" onmouseenter="enter('2849585250197552354');" onmouseout="out('2849585250197552354');" style=""> 740              mWallpaperStrip.setVisibility(View.VISIBLE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742      }                                                                                                             </span>
<span  style=""> 743                                                                                                                    </span>
<span class="2923374410094392392" onmouseenter="enter('2923374410094392392');" onmouseout="out('2923374410094392392');" style=""> 744      protected void onSaveInstanceState(Bundle outState) {                                                         </span>
<span class="5676996045526496118" onmouseenter="enter('5676996045526496118');" onmouseout="out('5676996045526496118');" style=""> 745          outState.putParcelableArrayList(TEMP_WALLPAPER_TILES, mTempWallpaperTiles);                               </span>
<span class="4842173451749245020" onmouseenter="enter('4842173451749245020');" onmouseout="out('4842173451749245020');" style=""> 746          outState.putInt(SELECTED_INDEX, mSelectedIndex);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747      }                                                                                                             </span>
<span  style=""> 748                                                                                                                    </span>
<span class="-2094527111288901138" onmouseenter="enter('-2094527111288901138');" onmouseout="out('-2094527111288901138');" style=""> 749      protected void onRestoreInstanceState(Bundle savedInstanceState) {                                            </span>
<span class="9097341058798999924" onmouseenter="enter('9097341058798999924');" onmouseout="out('9097341058798999924');" style=""> 750          ArrayList&lt;Uri&gt; uris = savedInstanceState.getParcelableArrayList(TEMP_WALLPAPER_TILES);                    </span>
<span class="882746572331317232" onmouseenter="enter('882746572331317232');" onmouseout="out('882746572331317232');" style=""> 751          for (Uri uri : uris) {                                                                                    </span>
<span class="309442566935810090" onmouseenter="enter('309442566935810090');" onmouseout="out('309442566935810090');" style=""> 752              addTemporaryWallpaperTile(uri, true);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753          }                                                                                                         </span>
<span class="-4189402847988360065" onmouseenter="enter('-4189402847988360065');" onmouseout="out('-4189402847988360065');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 754 -        mSelectedIndex = savedInstanceState.getInt(SELECTED_INDEX, 0);                                            </span>
<span class="2728496215931290524" onmouseenter="enter('2728496215931290524');" onmouseout="out('2728496215931290524');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 755 +        mSelectedIndex = savedInstanceState.getInt(SELECTED_INDEX, -1);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 756      }                                                                                                             </span>
<span  style=""> 757                                                                                                                    </span>
<span class="-3395251471996624785" onmouseenter="enter('-3395251471996624785');" onmouseout="out('-3395251471996624785');" style=""> 758      private void populateWallpapersFromAdapter(ViewGroup parent, BaseAdapter adapter,                             </span>
<span class="-3888515017020188466" onmouseenter="enter('-3888515017020188466');" onmouseout="out('-3888515017020188466');" style=""> 759              boolean addLongPressHandler) {                                                                        </span>
<span class="-4655808919273667933" onmouseenter="enter('-4655808919273667933');" onmouseout="out('-4655808919273667933');" style=""> 760          for (int i = 0; i &lt; adapter.getCount(); i++) {                                                            </span>
<span class="-1082551966183171247" onmouseenter="enter('-1082551966183171247');" onmouseout="out('-1082551966183171247');" style=""> 761              FrameLayout thumbnail = (FrameLayout) adapter.getView(i, null, parent);                               </span>
<span class="-2539369959542405754" onmouseenter="enter('-2539369959542405754');" onmouseout="out('-2539369959542405754');" style=""> 762              parent.addView(thumbnail, i);                                                                         </span>
<span class="-8640688129381962578" onmouseenter="enter('-8640688129381962578');" onmouseout="out('-8640688129381962578');" style=""> 763              WallpaperTileInfo info = (WallpaperTileInfo) adapter.getItem(i);                                      </span>
<span class="-8513774863936305691" onmouseenter="enter('-8513774863936305691');" onmouseout="out('-8513774863936305691');" style=""> 764              thumbnail.setTag(info);                                                                               </span>
<span class="835749422138936601" onmouseenter="enter('835749422138936601');" onmouseout="out('835749422138936601');" style=""> 765              info.setView(thumbnail);                                                                              </span>
<span class="-753060270538025028" onmouseenter="enter('-753060270538025028');" onmouseout="out('-753060270538025028');" style=""> 766              if (addLongPressHandler) {                                                                            </span>
<span class="-7973486700261140064" onmouseenter="enter('-7973486700261140064');" onmouseout="out('-7973486700261140064');" style=""> 767                  addLongPressHandler(thumbnail);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768              }                                                                                                     </span>
<span class="2610544249132778797" onmouseenter="enter('2610544249132778797');" onmouseout="out('2610544249132778797');" style=""> 769              thumbnail.setOnClickListener(mThumbnailOnClickListener);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771      }                                                                                                             </span>
<span  style=""> 772                                                                                                                    </span>
<span class="7174283580582519873" onmouseenter="enter('7174283580582519873');" onmouseout="out('7174283580582519873');" style=""> 773      private void updateTileIndices() {                                                                            </span>
<span class="-1043783805889159162" onmouseenter="enter('-1043783805889159162');" onmouseout="out('-1043783805889159162');" style=""> 774          LinearLayout masterWallpaperList = (LinearLayout) findViewById(R.id.master_wallpaper_list);               </span>
<span class="259886241860069923" onmouseenter="enter('259886241860069923');" onmouseout="out('259886241860069923');" style=""> 775          final int childCount = masterWallpaperList.getChildCount();                                               </span>
<span class="8480962759227506322" onmouseenter="enter('8480962759227506322');" onmouseout="out('8480962759227506322');" style=""> 776          final Resources res = getResources();                                                                     </span>
<span  style=""> 777                                                                                                                    </span>
<span class="3521054778015791399" onmouseenter="enter('3521054778015791399');" onmouseout="out('3521054778015791399');" style=""> 778          // Do two passes; the first pass gets the total number of tiles                                           </span>
<span class="5938103209458987108" onmouseenter="enter('5938103209458987108');" onmouseout="out('5938103209458987108');" style=""> 779          int numTiles = 0;                                                                                         </span>
<span class="5019589255138395185" onmouseenter="enter('5019589255138395185');" onmouseout="out('5019589255138395185');" style=""> 780          for (int passNum = 0; passNum &lt; 2; passNum++) {                                                           </span>
<span class="1572996252094865016" onmouseenter="enter('1572996252094865016');" onmouseout="out('1572996252094865016');" style=""> 781              int tileIndex = 0;                                                                                    </span>
<span class="-7119626881530790788" onmouseenter="enter('-7119626881530790788');" onmouseout="out('-7119626881530790788');" style=""> 782              for (int i = 0; i &lt; childCount; i++) {                                                                </span>
<span class="4123953723067944503" onmouseenter="enter('4123953723067944503');" onmouseout="out('4123953723067944503');" style=""> 783                  View child = masterWallpaperList.getChildAt(i);                                                   </span>
<span class="-5829345887602296444" onmouseenter="enter('-5829345887602296444');" onmouseout="out('-5829345887602296444');" style=""> 784                  LinearLayout subList;                                                                             </span>
<span  style=""> 785                                                                                                                    </span>
<span class="3605475243255362068" onmouseenter="enter('3605475243255362068');" onmouseout="out('3605475243255362068');" style=""> 786                  int subListStart;                                                                                 </span>
<span class="-8450536843674173357" onmouseenter="enter('-8450536843674173357');" onmouseout="out('-8450536843674173357');" style=""> 787                  int subListEnd;                                                                                   </span>
<span class="6806008433574303890" onmouseenter="enter('6806008433574303890');" onmouseout="out('6806008433574303890');" style=""> 788                  if (child.getTag() instanceof WallpaperTileInfo) {                                                </span>
<span class="-5389769772346214913" onmouseenter="enter('-5389769772346214913');" onmouseout="out('-5389769772346214913');" style=""> 789                      subList = masterWallpaperList;                                                                </span>
<span class="5694298299445467842" onmouseenter="enter('5694298299445467842');" onmouseout="out('5694298299445467842');" style=""> 790                      subListStart = i;                                                                             </span>
<span class="775032750631300414" onmouseenter="enter('775032750631300414');" onmouseout="out('775032750631300414');" style=""> 791                      subListEnd = i + 1;                                                                           </span>
<span class="-1510097346886829055" onmouseenter="enter('-1510097346886829055');" onmouseout="out('-1510097346886829055');" style=""> 792                  } else { // if (child instanceof LinearLayout) {                                                  </span>
<span class="7675569892434777627" onmouseenter="enter('7675569892434777627');" onmouseout="out('7675569892434777627');" style=""> 793                      subList = (LinearLayout) child;                                                               </span>
<span class="-788862889599952363" onmouseenter="enter('-788862889599952363');" onmouseout="out('-788862889599952363');" style=""> 794                      subListStart = 0;                                                                             </span>
<span class="-2292138033159846006" onmouseenter="enter('-2292138033159846006');" onmouseout="out('-2292138033159846006');" style=""> 795                      subListEnd = subList.getChildCount();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796                  }                                                                                                 </span>
<span  style=""> 797                                                                                                                    </span>
<span class="-3188102189745806183" onmouseenter="enter('-3188102189745806183');" onmouseout="out('-3188102189745806183');" style=""> 798                  for (int j = subListStart; j &lt; subListEnd; j++) {                                                 </span>
<span class="-46452018360091707" onmouseenter="enter('-46452018360091707');" onmouseout="out('-46452018360091707');" style=""> 799                      WallpaperTileInfo info = (WallpaperTileInfo) subList.getChildAt(j).getTag();                  </span>
<span class="-7564864828845128447" onmouseenter="enter('-7564864828845128447');" onmouseout="out('-7564864828845128447');" style=""> 800                      if (info.isNamelessWallpaper()) {                                                             </span>
<span class="-1910212611706289773" onmouseenter="enter('-1910212611706289773');" onmouseout="out('-1910212611706289773');" style=""> 801                          if (passNum == 0) {                                                                       </span>
<span class="2002385288571403014" onmouseenter="enter('2002385288571403014');" onmouseout="out('2002385288571403014');" style=""> 802                              numTiles++;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 803                          } else {                                                                                  </span>
<span class="2118637819721096111" onmouseenter="enter('2118637819721096111');" onmouseout="out('2118637819721096111');" style=""> 804                              CharSequence label = res.getString(                                                   </span>
<span class="-2397331067750563254" onmouseenter="enter('-2397331067750563254');" onmouseout="out('-2397331067750563254');" style=""> 805                                      R.string.wallpaper_accessibility_name, ++tileIndex, numTiles);                </span>
<span class="176872867902725227" onmouseenter="enter('176872867902725227');" onmouseout="out('176872867902725227');" style=""> 806                              info.onIndexUpdated(label);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812      }                                                                                                             </span>
<span  style=""> 813                                                                                                                    </span>
<span class="2510156197068194941" onmouseenter="enter('2510156197068194941');" onmouseout="out('2510156197068194941');" style=""> 814      private static Point getDefaultThumbnailSize(Resources res) {                                                 </span>
<span class="-6874335415328293767" onmouseenter="enter('-6874335415328293767');" onmouseout="out('-6874335415328293767');" style=""> 815          return new Point(res.getDimensionPixelSize(R.dimen.wallpaperThumbnailWidth),                              </span>
<span class="9213584837082607543" onmouseenter="enter('9213584837082607543');" onmouseout="out('9213584837082607543');" style=""> 816                  res.getDimensionPixelSize(R.dimen.wallpaperThumbnailHeight));                                     </span>
<span  style=""> 817                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818      }                                                                                                             </span>
<span  style=""> 819                                                                                                                    </span>
<span class="-2190537902917228056" onmouseenter="enter('-2190537902917228056');" onmouseout="out('-2190537902917228056');" style=""> 820      private static Bitmap createThumbnail(Point size, Context context, Uri uri, byte[] imageBytes,                </span>
<span class="1462494306554119473" onmouseenter="enter('1462494306554119473');" onmouseout="out('1462494306554119473');" style=""> 821              Resources res, int resId, int rotation, boolean leftAligned) {                                        </span>
<span class="2197190995614732863" onmouseenter="enter('2197190995614732863');" onmouseout="out('2197190995614732863');" style=""> 822          int width = size.x;                                                                                       </span>
<span class="1656572652603557172" onmouseenter="enter('1656572652603557172');" onmouseout="out('1656572652603557172');" style=""> 823          int height = size.y;                                                                                      </span>
<span  style=""> 824                                                                                                                    </span>
<span class="7349190684690785447" onmouseenter="enter('7349190684690785447');" onmouseout="out('7349190684690785447');" style=""> 825          BitmapCropTask cropTask;                                                                                  </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style=""> 826          if (uri != null) {                                                                                        </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 827              cropTask = new BitmapCropTask(                                                                        </span>
<span class="8478899448975750390" onmouseenter="enter('8478899448975750390');" onmouseout="out('8478899448975750390');" style=""> 828                      context, uri, null, rotation, width, height, false, true, null);                              </span>
<span class="3032403540229941925" onmouseenter="enter('3032403540229941925');" onmouseout="out('3032403540229941925');" style=""> 829          } else if (imageBytes != null) {                                                                          </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 830              cropTask = new BitmapCropTask(                                                                        </span>
<span class="4933078725267557507" onmouseenter="enter('4933078725267557507');" onmouseout="out('4933078725267557507');" style=""> 831                      imageBytes, null, rotation, width, height, false, true, null);                                </span>
<span class="-6240460135729763291" onmouseenter="enter('-6240460135729763291');" onmouseout="out('-6240460135729763291');" style=""> 832          }  else {                                                                                                 </span>
<span class="-7471194336739237371" onmouseenter="enter('-7471194336739237371');" onmouseout="out('-7471194336739237371');" style=""> 833              cropTask = new BitmapCropTask(                                                                        </span>
<span class="8004600037434906454" onmouseenter="enter('8004600037434906454');" onmouseout="out('8004600037434906454');" style=""> 834                      context, res, resId, null, rotation, width, height, false, true, null);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 835          }                                                                                                         </span>
<span class="-6453579906380884917" onmouseenter="enter('-6453579906380884917');" onmouseout="out('-6453579906380884917');" style=""> 836          Point bounds = cropTask.getImageBounds();                                                                 </span>
<span class="-3295188915583570787" onmouseenter="enter('-3295188915583570787');" onmouseout="out('-3295188915583570787');" style=""> 837          if (bounds == null || bounds.x == 0 || bounds.y == 0) {                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 838              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839          }                                                                                                         </span>
<span  style=""> 840                                                                                                                    </span>
<span class="6879132970877670755" onmouseenter="enter('6879132970877670755');" onmouseout="out('6879132970877670755');" style=""> 841          Matrix rotateMatrix = new Matrix();                                                                       </span>
<span class="-6437688486507158764" onmouseenter="enter('-6437688486507158764');" onmouseout="out('-6437688486507158764');" style=""> 842          rotateMatrix.setRotate(rotation);                                                                         </span>
<span class="1369286570105688669" onmouseenter="enter('1369286570105688669');" onmouseout="out('1369286570105688669');" style=""> 843          float[] rotatedBounds = new float[] { bounds.x, bounds.y };                                               </span>
<span class="9124648468601119627" onmouseenter="enter('9124648468601119627');" onmouseout="out('9124648468601119627');" style=""> 844          rotateMatrix.mapPoints(rotatedBounds);                                                                    </span>
<span class="-4005609192970260775" onmouseenter="enter('-4005609192970260775');" onmouseout="out('-4005609192970260775');" style=""> 845          rotatedBounds[0] = Math.abs(rotatedBounds[0]);                                                            </span>
<span class="8902635337510419497" onmouseenter="enter('8902635337510419497');" onmouseout="out('8902635337510419497');" style=""> 846          rotatedBounds[1] = Math.abs(rotatedBounds[1]);                                                            </span>
<span  style=""> 847                                                                                                                    </span>
<span class="6089223768568690792" onmouseenter="enter('6089223768568690792');" onmouseout="out('6089223768568690792');" style=""> 848          RectF cropRect = WallpaperCropActivity.getMaxCropRect(                                                    </span>
<span class="1229429396446044184" onmouseenter="enter('1229429396446044184');" onmouseout="out('1229429396446044184');" style=""> 849                  (int) rotatedBounds[0], (int) rotatedBounds[1], width, height, leftAligned);                      </span>
<span class="2176872110091109412" onmouseenter="enter('2176872110091109412');" onmouseout="out('2176872110091109412');" style=""> 850          cropTask.setCropBounds(cropRect);                                                                         </span>
<span  style=""> 851                                                                                                                    </span>
<span class="4092370609310845926" onmouseenter="enter('4092370609310845926');" onmouseout="out('4092370609310845926');" style=""> 852          if (cropTask.cropBitmap()) {                                                                              </span>
<span class="5327784893723541266" onmouseenter="enter('5327784893723541266');" onmouseout="out('5327784893723541266');" style=""> 853              return cropTask.getCroppedBitmap();                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 854          } else {                                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 855              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 856          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857      }                                                                                                             </span>
<span  style=""> 858                                                                                                                    </span>
<span class="-1009224458959098214" onmouseenter="enter('-1009224458959098214');" onmouseout="out('-1009224458959098214');" style=""> 859      private void addTemporaryWallpaperTile(final Uri uri, boolean fromRestore) {                                  </span>
<span class="-901651268089518848" onmouseenter="enter('-901651268089518848');" onmouseout="out('-901651268089518848');" style=""> 860          mTempWallpaperTiles.add(uri);                                                                             </span>
<span class="372124520658648675" onmouseenter="enter('372124520658648675');" onmouseout="out('372124520658648675');" style=""> 861          // Add a tile for the image picked from Gallery                                                           </span>
<span class="6770827460764873580" onmouseenter="enter('6770827460764873580');" onmouseout="out('6770827460764873580');" style=""> 862          final FrameLayout pickedImageThumbnail = (FrameLayout) getLayoutInflater().                               </span>
<span class="-2679323654422550151" onmouseenter="enter('-2679323654422550151');" onmouseout="out('-2679323654422550151');" style=""> 863                  inflate(R.layout.wallpaper_picker_item, mWallpapersView, false);                                  </span>
<span class="4529673580196202338" onmouseenter="enter('4529673580196202338');" onmouseout="out('4529673580196202338');" style=""> 864          pickedImageThumbnail.setVisibility(View.GONE);                                                            </span>
<span class="2199584589147075372" onmouseenter="enter('2199584589147075372');" onmouseout="out('2199584589147075372');" style=""> 865          setWallpaperItemPaddingToZero(pickedImageThumbnail);                                                      </span>
<span class="8928625334369603982" onmouseenter="enter('8928625334369603982');" onmouseout="out('8928625334369603982');" style=""> 866          mWallpapersView.addView(pickedImageThumbnail, 0);                                                         </span>
<span  style=""> 867                                                                                                                    </span>
<span class="9047526722691301900" onmouseenter="enter('9047526722691301900');" onmouseout="out('9047526722691301900');" style=""> 868          // Load the thumbnail                                                                                     </span>
<span class="-1676864995125815185" onmouseenter="enter('-1676864995125815185');" onmouseout="out('-1676864995125815185');" style=""> 869          final ImageView image = (ImageView) pickedImageThumbnail.findViewById(R.id.wallpaper_image);              </span>
<span class="8129808656284289108" onmouseenter="enter('8129808656284289108');" onmouseout="out('8129808656284289108');" style=""> 870          final Point defaultSize = getDefaultThumbnailSize(this.getResources());                                   </span>
<span class="-6676868420171838472" onmouseenter="enter('-6676868420171838472');" onmouseout="out('-6676868420171838472');" style=""> 871          final Context context = this;                                                                             </span>
<span class="8654405571332173016" onmouseenter="enter('8654405571332173016');" onmouseout="out('8654405571332173016');" style=""> 872          new AsyncTask&lt;Void, Bitmap, Bitmap&gt;() {                                                                   </span>
<span class="7887219832922845066" onmouseenter="enter('7887219832922845066');" onmouseout="out('7887219832922845066');" style=""> 873              protected Bitmap doInBackground(Void...args) {                                                        </span>
<span class="-4769478897982771202" onmouseenter="enter('-4769478897982771202');" onmouseout="out('-4769478897982771202');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 874 -                int rotation = WallpaperCropActivity.getRotationFromExif(context, uri);                           </span>
<span class="2925909394733733403" onmouseenter="enter('2925909394733733403');" onmouseout="out('2925909394733733403');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 875 -                return createThumbnail(defaultSize, context, uri, null, null, 0, rotation, false);                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 876 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 877 +                try {                                                                                             </span>
<span class="-4769478897982771202" onmouseenter="enter('-4769478897982771202');" onmouseout="out('-4769478897982771202');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 878 +                    int rotation = WallpaperCropActivity.getRotationFromExif(context, uri);                       </span>
<span class="2925909394733733403" onmouseenter="enter('2925909394733733403');" onmouseout="out('2925909394733733403');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 879 +                    return createThumbnail(defaultSize, context, uri, null, null, 0, rotation, false);            </span>
<span class="3778995444801704265" onmouseenter="enter('3778995444801704265');" onmouseout="out('3778995444801704265');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 880 +                } catch (SecurityException securityException) {                                                   </span>
<span class="7955105844901253678" onmouseenter="enter('7955105844901253678');" onmouseout="out('7955105844901253678');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 881 +                    if (isDestroyed()) {                                                                          </span>
<span class="3681517849090038589" onmouseenter="enter('3681517849090038589');" onmouseout="out('3681517849090038589');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 882 +                        // Temporarily granted permissions are revoked when the activity                          </span>
<span class="3864158554531561229" onmouseenter="enter('3864158554531561229');" onmouseout="out('3864158554531561229');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 883 +                        // finishes, potentially resulting in a SecurityException here.                           </span>
<span class="-438989399743409142" onmouseenter="enter('-438989399743409142');" onmouseout="out('-438989399743409142');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 884 +                        // Even though {@link #isDestroyed} might also return true in different                   </span>
<span class="-973013658270767082" onmouseenter="enter('-973013658270767082');" onmouseout="out('-973013658270767082');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 885 +                        // situations where the configuration changes, we are fine with                           </span>
<span class="-5779086303897471336" onmouseenter="enter('-5779086303897471336');" onmouseout="out('-5779086303897471336');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 886 +                        // catching these cases here as well.                                                     </span>
<span class="-1034870772393865893" onmouseenter="enter('-1034870772393865893');" onmouseout="out('-1034870772393865893');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 887 +                        cancel(false);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 888 +                    } else {                                                                                      </span>
<span class="-5531102788746271445" onmouseenter="enter('-5531102788746271445');" onmouseout="out('-5531102788746271445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 889 +                        // otherwise it had a different cause and we throw it further                             </span>
<span class="-970795541645443852" onmouseenter="enter('-970795541645443852');" onmouseout="out('-970795541645443852');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 890 +                        throw securityException;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 891 +                    }                                                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 892 +                    return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 893 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894              }                                                                                                     </span>
<span class="7796048425938803412" onmouseenter="enter('7796048425938803412');" onmouseout="out('7796048425938803412');" style=""> 895              protected void onPostExecute(Bitmap thumb) {                                                          </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 896 -                if (thumb != null) {                                                                              </span>
<span class="1828997147583131577" onmouseenter="enter('1828997147583131577');" onmouseout="out('1828997147583131577');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 897 +                if (!isCancelled() &amp;&amp; thumb != null) {                                                            </span>
<span class="-6059667076746804171" onmouseenter="enter('-6059667076746804171');" onmouseout="out('-6059667076746804171');" style=""> 898                      image.setImageBitmap(thumb);                                                                  </span>
<span class="-1645377004023670491" onmouseenter="enter('-1645377004023670491');" onmouseout="out('-1645377004023670491');" style=""> 899                      Drawable thumbDrawable = image.getDrawable();                                                 </span>
<span class="5749196251269587213" onmouseenter="enter('5749196251269587213');" onmouseout="out('5749196251269587213');" style=""> 900                      thumbDrawable.setDither(true);                                                                </span>
<span class="-2126867226419131669" onmouseenter="enter('-2126867226419131669');" onmouseout="out('-2126867226419131669');" style=""> 901                      pickedImageThumbnail.setVisibility(View.VISIBLE);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 902                  } else {                                                                                          </span>
<span class="-2794690336414811741" onmouseenter="enter('-2794690336414811741');" onmouseout="out('-2794690336414811741');" style=""> 903                      Log.e(TAG, &quot;Error loading thumbnail for uri=&quot; + uri);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 904                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905              }                                                                                                     </span>
<span class="3599702695275287338" onmouseenter="enter('3599702695275287338');" onmouseout="out('3599702695275287338');" style=""> 906          }.execute();                                                                                              </span>
<span  style=""> 907                                                                                                                    </span>
<span class="8287492400642888670" onmouseenter="enter('8287492400642888670');" onmouseout="out('8287492400642888670');" style=""> 908          UriWallpaperInfo info = new UriWallpaperInfo(uri);                                                        </span>
<span class="-3082078054294180702" onmouseenter="enter('-3082078054294180702');" onmouseout="out('-3082078054294180702');" style=""> 909          pickedImageThumbnail.setTag(info);                                                                        </span>
<span class="-2197374997178845158" onmouseenter="enter('-2197374997178845158');" onmouseout="out('-2197374997178845158');" style=""> 910          info.setView(pickedImageThumbnail);                                                                       </span>
<span class="7161653145395861506" onmouseenter="enter('7161653145395861506');" onmouseout="out('7161653145395861506');" style=""> 911          addLongPressHandler(pickedImageThumbnail);                                                                </span>
<span class="5562597467858376861" onmouseenter="enter('5562597467858376861');" onmouseout="out('5562597467858376861');" style=""> 912          updateTileIndices();                                                                                      </span>
<span class="-4563567220370832798" onmouseenter="enter('-4563567220370832798');" onmouseout="out('-4563567220370832798');" style=""> 913          pickedImageThumbnail.setOnClickListener(mThumbnailOnClickListener);                                       </span>
<span class="-2362441680778508255" onmouseenter="enter('-2362441680778508255');" onmouseout="out('-2362441680778508255');" style=""> 914          if (!fromRestore) {                                                                                       </span>
<span class="1189035633112635276" onmouseenter="enter('1189035633112635276');" onmouseout="out('1189035633112635276');" style=""> 915              mThumbnailOnClickListener.onClick(pickedImageThumbnail);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917      }                                                                                                             </span>
<span  style=""> 918                                                                                                                    </span>
<span class="-7749792035646111440" onmouseenter="enter('-7749792035646111440');" onmouseout="out('-7749792035646111440');" style=""> 919      protected void onActivityResult(int requestCode, int resultCode, Intent data) {                               </span>
<span class="-2724808358796038832" onmouseenter="enter('-2724808358796038832');" onmouseout="out('-2724808358796038832');" style=""> 920          if (requestCode == IMAGE_PICK &amp;&amp; resultCode == RESULT_OK) {                                               </span>
<span class="306921262128177819" onmouseenter="enter('306921262128177819');" onmouseout="out('306921262128177819');" style=""> 921              if (data != null &amp;&amp; data.getData() != null) {                                                         </span>
<span class="-9060755014479801963" onmouseenter="enter('-9060755014479801963');" onmouseout="out('-9060755014479801963');" style=""> 922                  Uri uri = data.getData();                                                                         </span>
<span class="287003757484083113" onmouseenter="enter('287003757484083113');" onmouseout="out('287003757484083113');" style=""> 923                  addTemporaryWallpaperTile(uri, false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924              }                                                                                                     </span>
<span class="5194712518021502228" onmouseenter="enter('5194712518021502228');" onmouseout="out('5194712518021502228');" style=""> 925          } else if (requestCode == PICK_WALLPAPER_THIRD_PARTY_ACTIVITY) {                                          </span>
<span class="-7075511525703303023" onmouseenter="enter('-7075511525703303023');" onmouseout="out('-7075511525703303023');" style=""> 926              setResult(RESULT_OK);                                                                                 </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 927              finish();                                                                                             </span>
<span class="-8956522334617839884" onmouseenter="enter('-8956522334617839884');" onmouseout="out('-8956522334617839884');" style=""> 928          } else if (requestCode == PICK_LIVE_WALLPAPER) {                                                          </span>
<span class="-7130090822814694896" onmouseenter="enter('-7130090822814694896');" onmouseout="out('-7130090822814694896');" style=""> 929              WallpaperManager wm = WallpaperManager.getInstance(this);                                             </span>
<span class="611509371565321110" onmouseenter="enter('611509371565321110');" onmouseout="out('611509371565321110');" style=""> 930              final WallpaperInfo oldLiveWallpaper = mLiveWallpaperInfoOnPickerLaunch;                              </span>
<span class="-5816036629249953738" onmouseenter="enter('-5816036629249953738');" onmouseout="out('-5816036629249953738');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 931 +            final WallpaperInfo clickedWallpaper = mLastClickedLiveWallpaperInfo;                                 </span>
<span class="-5984340816262038900" onmouseenter="enter('-5984340816262038900');" onmouseout="out('-5984340816262038900');" style=""> 932              WallpaperInfo newLiveWallpaper = wm.getWallpaperInfo();                                               </span>
<span class="-1315611166116800128" onmouseenter="enter('-1315611166116800128');" onmouseout="out('-1315611166116800128');" style=""> 933              // Try to figure out if a live wallpaper was set;                                                     </span>
<span class="-5751651415530774114" onmouseenter="enter('-5751651415530774114');" onmouseout="out('-5751651415530774114');" style=""> 934              if (newLiveWallpaper != null &amp;&amp;                                                                       </span>
<span class="-3007430178749865718" onmouseenter="enter('-3007430178749865718');" onmouseout="out('-3007430178749865718');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 935 -                    (oldLiveWallpaper == null ||                                                                  </span>
<span class="4903908304628163577" onmouseenter="enter('4903908304628163577');" onmouseout="out('4903908304628163577');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 936 -                    !oldLiveWallpaper.getComponent().equals(newLiveWallpaper.getComponent()))) {                  </span>
<span class="-6163620997787911288" onmouseenter="enter('-6163620997787911288');" onmouseout="out('-6163620997787911288');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 937 +                    (oldLiveWallpaper == null                                                                     </span>
<span class="2215677215918080758" onmouseenter="enter('2215677215918080758');" onmouseout="out('2215677215918080758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 938 +                            || !oldLiveWallpaper.getComponent()                                                   </span>
<span class="542702349949316499" onmouseenter="enter('542702349949316499');" onmouseout="out('542702349949316499');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 939 +                                    .equals(newLiveWallpaper.getComponent())                                      </span>
<span class="-2241986207758144205" onmouseenter="enter('-2241986207758144205');" onmouseout="out('-2241986207758144205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 940 +                            || clickedWallpaper.getComponent()                                                    </span>
<span class="9151075727256116472" onmouseenter="enter('9151075727256116472');" onmouseout="out('9151075727256116472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 941 +                                    .equals(oldLiveWallpaper.getComponent()))) {                                  </span>
<span class="-5964103275755574248" onmouseenter="enter('-5964103275755574248');" onmouseout="out('-5964103275755574248');" style=""> 942                  // Return if a live wallpaper was set                                                             </span>
<span class="-7075511525703303023" onmouseenter="enter('-7075511525703303023');" onmouseout="out('-7075511525703303023');" style=""> 943                  setResult(RESULT_OK);                                                                             </span>
<span class="4919593796336381990" onmouseenter="enter('4919593796336381990');" onmouseout="out('4919593796336381990');" style=""> 944                  finish();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947      }                                                                                                             </span>
<span  style=""> 948                                                                                                                    </span>
<span class="-1414235871370289475" onmouseenter="enter('-1414235871370289475');" onmouseout="out('-1414235871370289475');" style=""> 949      static void setWallpaperItemPaddingToZero(FrameLayout frameLayout) {                                          </span>
<span class="-6763839741894246945" onmouseenter="enter('-6763839741894246945');" onmouseout="out('-6763839741894246945');" style=""> 950          frameLayout.setPadding(0, 0, 0, 0);                                                                       </span>
<span class="3772652785637557334" onmouseenter="enter('3772652785637557334');" onmouseout="out('3772652785637557334');" style=""> 951          frameLayout.setForeground(new ZeroPaddingDrawable(frameLayout.getForeground()));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952      }                                                                                                             </span>
<span  style=""> 953                                                                                                                    </span>
<span class="-3459179076532382610" onmouseenter="enter('-3459179076532382610');" onmouseout="out('-3459179076532382610');" style=""> 954      private void addLongPressHandler(View v) {                                                                    </span>
<span class="1024606645498811389" onmouseenter="enter('1024606645498811389');" onmouseout="out('1024606645498811389');" style=""> 955          v.setOnLongClickListener(mLongClickListener);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956      }                                                                                                             </span>
<span  style=""> 957                                                                                                                    </span>
<span class="-4247523152430062995" onmouseenter="enter('-4247523152430062995');" onmouseout="out('-4247523152430062995');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 958 -    private ArrayList&lt;ResourceWallpaperInfo&gt; findBundledWallpapers() {                                            </span>
<span class="-1154952956947565938" onmouseenter="enter('-1154952956947565938');" onmouseout="out('-1154952956947565938');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 959 -        ArrayList&lt;ResourceWallpaperInfo&gt; bundledWallpapers =                                                      </span>
<span class="-8754632937055088420" onmouseenter="enter('-8754632937055088420');" onmouseout="out('-8754632937055088420');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 960 -                new ArrayList&lt;ResourceWallpaperInfo&gt;(24);                                                         </span>
<span class="-5506305661846963409" onmouseenter="enter('-5506305661846963409');" onmouseout="out('-5506305661846963409');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 961 +    private ArrayList&lt;WallpaperTileInfo&gt; findBundledWallpapers() {                                                </span>
<span class="5885920776779194905" onmouseenter="enter('5885920776779194905');" onmouseout="out('5885920776779194905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 962 +        final PackageManager pm = getPackageManager();                                                            </span>
<span class="5871817832928179175" onmouseenter="enter('5871817832928179175');" onmouseout="out('5871817832928179175');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 963 +        final ArrayList&lt;WallpaperTileInfo&gt; bundled = new ArrayList&lt;WallpaperTileInfo&gt;(24);                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 964 +                                                                                                                  </span>
<span class="-1246582649877799770" onmouseenter="enter('-1246582649877799770');" onmouseout="out('-1246582649877799770');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 965 +        Partner partner = Partner.get(pm);                                                                        </span>
<span class="-9215364277253785969" onmouseenter="enter('-9215364277253785969');" onmouseout="out('-9215364277253785969');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 966 +        if (partner != null) {                                                                                    </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 967 +            final Resources partnerRes = partner.getResources();                                                  </span>
<span class="4677469002384058762" onmouseenter="enter('4677469002384058762');" onmouseout="out('4677469002384058762');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 968 +            final int resId = partnerRes.getIdentifier(Partner.RES_WALLPAPERS, &quot;array&quot;,                           </span>
<span class="6039973161596959762" onmouseenter="enter('6039973161596959762');" onmouseout="out('6039973161596959762');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 969 +                    partner.getPackageName());                                                                    </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 970 +            if (resId != 0) {                                                                                     </span>
<span class="-2118557433142396278" onmouseenter="enter('-2118557433142396278');" onmouseout="out('-2118557433142396278');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 971 +                addWallpapers(bundled, partnerRes, partner.getPackageName(), resId);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 972 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 973 +                                                                                                                  </span>
<span class="-4748120673698363377" onmouseenter="enter('-4748120673698363377');" onmouseout="out('-4748120673698363377');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 974 +            // Add system wallpapers                                                                              </span>
<span class="8829637239826637205" onmouseenter="enter('8829637239826637205');" onmouseout="out('8829637239826637205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 975 +            File systemDir = partner.getWallpaperDirectory();                                                     </span>
<span class="-4006927377325457741" onmouseenter="enter('-4006927377325457741');" onmouseout="out('-4006927377325457741');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 976 +            if (systemDir != null &amp;&amp; systemDir.isDirectory()) {                                                   </span>
<span class="1549902003223839534" onmouseenter="enter('1549902003223839534');" onmouseout="out('1549902003223839534');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 977 +                for (File file : systemDir.listFiles()) {                                                         </span>
<span class="-1906617314955916866" onmouseenter="enter('-1906617314955916866');" onmouseout="out('-1906617314955916866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 978 +                    if (!file.isFile()) {                                                                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 979 +                        continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 980 +                    }                                                                                             </span>
<span class="-4447045704555381031" onmouseenter="enter('-4447045704555381031');" onmouseout="out('-4447045704555381031');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 981 +                    String name = file.getName();                                                                 </span>
<span class="2642008582597801087" onmouseenter="enter('2642008582597801087');" onmouseout="out('2642008582597801087');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 982 +                    int dotPos = name.lastIndexOf(&#x27;.&#x27;);                                                           </span>
<span class="5596042441253906476" onmouseenter="enter('5596042441253906476');" onmouseout="out('5596042441253906476');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 983 +                    String extension = &quot;&quot;;                                                                        </span>
<span class="8275483901110152452" onmouseenter="enter('8275483901110152452');" onmouseout="out('8275483901110152452');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 984 +                    if (dotPos &gt;= -1) {                                                                           </span>
<span class="5358735009623538448" onmouseenter="enter('5358735009623538448');" onmouseout="out('5358735009623538448');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 985 +                        extension = name.substring(dotPos);                                                       </span>
<span class="-756743826621559391" onmouseenter="enter('-756743826621559391');" onmouseout="out('-756743826621559391');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 986 +                        name = name.substring(0, dotPos);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 987 +                    }                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 988 +                                                                                                                  </span>
<span class="-927337484625280418" onmouseenter="enter('-927337484625280418');" onmouseout="out('-927337484625280418');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 989 +                    if (name.endsWith(&quot;_small&quot;)) {                                                                </span>
<span class="-2832112970361767203" onmouseenter="enter('-2832112970361767203');" onmouseout="out('-2832112970361767203');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 990 +                        // it is a thumbnail                                                                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 991 +                        continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 992 +                    }                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 993 +                                                                                                                  </span>
<span class="-3375184210124111054" onmouseenter="enter('-3375184210124111054');" onmouseout="out('-3375184210124111054');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 994 +                    File thumbnail = new File(systemDir, name + &quot;_small&quot; + extension);                            </span>
<span class="-3372803721501567410" onmouseenter="enter('-3372803721501567410');" onmouseout="out('-3372803721501567410');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 995 +                    Bitmap thumb = BitmapFactory.decodeFile(thumbnail.getAbsolutePath());                         </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 996 +                    if (thumb != null) {                                                                          </span>
<span class="3695753775368890877" onmouseenter="enter('3695753775368890877');" onmouseout="out('3695753775368890877');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 997 +                        bundled.add(new FileWallpaperInfo(file, new BitmapDrawable(thumb)));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 998 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 999 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1000 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1001 +        }                                                                                                         </span>
<span  style="">1002                                                                                                                    </span>
<span class="2664071456778699283" onmouseenter="enter('2664071456778699283');" onmouseout="out('2664071456778699283');" style="">1003          Pair&lt;ApplicationInfo, Integer&gt; r = getWallpaperArrayResourceId();                                         </span>
<span class="-4447905625078087046" onmouseenter="enter('-4447905625078087046');" onmouseout="out('-4447905625078087046');" style="">1004          if (r != null) {                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1005              try {                                                                                                 </span>
<span class="-6573463770199130323" onmouseenter="enter('-6573463770199130323');" onmouseout="out('-6573463770199130323');" style="">1006                  Resources wallpaperRes = getPackageManager().getResourcesForApplication(r.first);                 </span>
<span class="1423349577766596757" onmouseenter="enter('1423349577766596757');" onmouseout="out('1423349577766596757');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1007 -                bundledWallpapers = addWallpapers(wallpaperRes, r.first.packageName, r.second);                   </span>
<span class="-2554303152129460876" onmouseenter="enter('-2554303152129460876');" onmouseout="out('-2554303152129460876');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1008 +                addWallpapers(bundled, wallpaperRes, r.first.packageName, r.second);                              </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1009              } catch (PackageManager.NameNotFoundException e) {                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011          }                                                                                                         </span>
<span  style="">1012                                                                                                                    </span>
<span class="7034483189720629489" onmouseenter="enter('7034483189720629489');" onmouseout="out('7034483189720629489');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1013 -        // Add an entry for the default wallpaper (stored in system resources)                                    </span>
<span class="8269945594512177434" onmouseenter="enter('8269945594512177434');" onmouseout="out('8269945594512177434');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1014 -        if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.KITKAT) {                                                 </span>
<span class="3888461879089402600" onmouseenter="enter('3888461879089402600');" onmouseout="out('3888461879089402600');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1015 -            ResourceWallpaperInfo defaultWallpaperInfo = getPreKKDefaultWallpaperInfo();                          </span>
<span class="-1343467421379157050" onmouseenter="enter('-1343467421379157050');" onmouseout="out('-1343467421379157050');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1016 +        if (partner == null || !partner.hideDefaultWallpaper()) {                                                 </span>
<span class="7034483189720629489" onmouseenter="enter('7034483189720629489');" onmouseout="out('7034483189720629489');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1017 +            // Add an entry for the default wallpaper (stored in system resources)                                </span>
<span class="-7386155032140038107" onmouseenter="enter('-7386155032140038107');" onmouseout="out('-7386155032140038107');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1018 +            WallpaperTileInfo defaultWallpaperInfo =                                                              </span>
<span class="-1530882610108412902" onmouseenter="enter('-1530882610108412902');" onmouseout="out('-1530882610108412902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1019 +                    (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.KITKAT)                                          </span>
<span class="-3549249310704668816" onmouseenter="enter('-3549249310704668816');" onmouseout="out('-3549249310704668816');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1020 +                    ? getPreKKDefaultWallpaperInfo()                                                              </span>
<span class="197495415878705720" onmouseenter="enter('197495415878705720');" onmouseout="out('197495415878705720');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1021 +                    : getDefaultWallpaper();                                                                      </span>
<span class="-7974818341329769015" onmouseenter="enter('-7974818341329769015');" onmouseout="out('-7974818341329769015');" style="">1022              if (defaultWallpaperInfo != null) {                                                                   </span>
<span class="7408242500415411229" onmouseenter="enter('7408242500415411229');" onmouseout="out('7408242500415411229');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1023 -                bundledWallpapers.add(0, defaultWallpaperInfo);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1024 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1025 -        }                                                                                                         </span>
<span class="-8449913752497022700" onmouseenter="enter('-8449913752497022700');" onmouseout="out('-8449913752497022700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1026 -        return bundledWallpapers;                                                                                 </span>
<span class="7202846298285246873" onmouseenter="enter('7202846298285246873');" onmouseout="out('7202846298285246873');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1027 +                bundled.add(0, defaultWallpaperInfo);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1028 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1029 +        }                                                                                                         </span>
<span class="3924493507316405252" onmouseenter="enter('3924493507316405252');" onmouseout="out('3924493507316405252');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1030 +        return bundled;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1031      }                                                                                                             </span>
<span  style="">1032                                                                                                                    </span>
<span class="-6595695538609845398" onmouseenter="enter('-6595695538609845398');" onmouseout="out('-6595695538609845398');" style="">1033      private boolean writeImageToFileAsJpeg(File f, Bitmap b) {                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1034          try {                                                                                                     </span>
<span class="8722539090112199092" onmouseenter="enter('8722539090112199092');" onmouseout="out('8722539090112199092');" style="">1035              f.createNewFile();                                                                                    </span>
<span class="3775180210190615739" onmouseenter="enter('3775180210190615739');" onmouseout="out('3775180210190615739');" style="">1036              FileOutputStream thumbFileStream =                                                                    </span>
<span class="2198104288806315130" onmouseenter="enter('2198104288806315130');" onmouseout="out('2198104288806315130');" style="">1037                      openFileOutput(f.getName(), Context.MODE_PRIVATE);                                            </span>
<span class="2364901270506104115" onmouseenter="enter('2364901270506104115');" onmouseout="out('2364901270506104115');" style="">1038              b.compress(Bitmap.CompressFormat.JPEG, 95, thumbFileStream);                                          </span>
<span class="5768958253628177358" onmouseenter="enter('5768958253628177358');" onmouseout="out('5768958253628177358');" style="">1039              thumbFileStream.close();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1040              return true;                                                                                          </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1041          } catch (IOException e) {                                                                                 </span>
<span class="-4676604896942702598" onmouseenter="enter('-4676604896942702598');" onmouseout="out('-4676604896942702598');" style="">1042              Log.e(TAG, &quot;Error while writing bitmap to file &quot; + e);                                                </span>
<span class="7682989536937550366" onmouseenter="enter('7682989536937550366');" onmouseout="out('7682989536937550366');" style="">1043              f.delete();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1045          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046      }                                                                                                             </span>
<span  style="">1047                                                                                                                    </span>
<span class="-4823957996775296240" onmouseenter="enter('-4823957996775296240');" onmouseout="out('-4823957996775296240');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1048 +    private File getDefaultThumbFile() {                                                                          </span>
<span class="158529430789897102" onmouseenter="enter('158529430789897102');" onmouseout="out('158529430789897102');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1049 +        return new File(getFilesDir(), Build.VERSION.SDK_INT                                                      </span>
<span class="-7890353788133211969" onmouseenter="enter('-7890353788133211969');" onmouseout="out('-7890353788133211969');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1050 +                + &quot;_&quot; + DEFAULT_WALLPAPER_THUMBNAIL_FILENAME);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1051 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1052 +                                                                                                                  </span>
<span class="1227314529798978638" onmouseenter="enter('1227314529798978638');" onmouseout="out('1227314529798978638');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1053 +    private boolean saveDefaultWallpaperThumb(Bitmap b) {                                                         </span>
<span class="8263823508211107068" onmouseenter="enter('8263823508211107068');" onmouseout="out('8263823508211107068');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1054 +        // Delete old thumbnails.                                                                                 </span>
<span class="3567311882351013867" onmouseenter="enter('3567311882351013867');" onmouseout="out('3567311882351013867');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1055 +        new File(getFilesDir(), OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                               </span>
<span class="-2276391661806453489" onmouseenter="enter('-2276391661806453489');" onmouseout="out('-2276391661806453489');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1056 +        new File(getFilesDir(), DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1057 +                                                                                                                  </span>
<span class="1808821527848952005" onmouseenter="enter('1808821527848952005');" onmouseout="out('1808821527848952005');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1058 +        for (int i = Build.VERSION_CODES.JELLY_BEAN; i &lt; Build.VERSION.SDK_INT; i++) {                            </span>
<span class="7774392015068581640" onmouseenter="enter('7774392015068581640');" onmouseout="out('7774392015068581640');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1059 +            new File(getFilesDir(), i + &quot;_&quot; + DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1060 +        }                                                                                                         </span>
<span class="4686288793731739264" onmouseenter="enter('4686288793731739264');" onmouseout="out('4686288793731739264');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1061 +        return writeImageToFileAsJpeg(getDefaultThumbFile(), b);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1062 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1063 +                                                                                                                  </span>
<span class="-4877678771871800381" onmouseenter="enter('-4877678771871800381');" onmouseout="out('-4877678771871800381');" style="">1064      private ResourceWallpaperInfo getPreKKDefaultWallpaperInfo() {                                                </span>
<span class="5520181104510013397" onmouseenter="enter('5520181104510013397');" onmouseout="out('5520181104510013397');" style="">1065          Resources sysRes = Resources.getSystem();                                                                 </span>
<span class="3223623880203196673" onmouseenter="enter('3223623880203196673');" onmouseout="out('3223623880203196673');" style="">1066          int resId = sysRes.getIdentifier(&quot;default_wallpaper&quot;, &quot;drawable&quot;, &quot;android&quot;);                             </span>
<span  style="">1067                                                                                                                    </span>
<span class="-6842570305902007274" onmouseenter="enter('-6842570305902007274');" onmouseout="out('-6842570305902007274');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1068 -        File defaultThumbFile = new File(getFilesDir(), DEFAULT_WALLPAPER_THUMBNAIL_FILENAME);                    </span>
<span class="-2700470529350012310" onmouseenter="enter('-2700470529350012310');" onmouseout="out('-2700470529350012310');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1069 +        File defaultThumbFile = getDefaultThumbFile();                                                            </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style="">1070          Bitmap thumb = null;                                                                                      </span>
<span class="3173128348719073493" onmouseenter="enter('3173128348719073493');" onmouseout="out('3173128348719073493');" style="">1071          boolean defaultWallpaperExists = false;                                                                   </span>
<span class="769015314191339580" onmouseenter="enter('769015314191339580');" onmouseout="out('769015314191339580');" style="">1072          if (defaultThumbFile.exists()) {                                                                          </span>
<span class="145969986834765399" onmouseenter="enter('145969986834765399');" onmouseout="out('145969986834765399');" style="">1073              thumb = BitmapFactory.decodeFile(defaultThumbFile.getAbsolutePath());                                 </span>
<span class="-3053675610106547889" onmouseenter="enter('-3053675610106547889');" onmouseout="out('-3053675610106547889');" style="">1074              defaultWallpaperExists = true;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1075          } else {                                                                                                  </span>
<span class="8976545925819631954" onmouseenter="enter('8976545925819631954');" onmouseout="out('8976545925819631954');" style="">1076              Resources res = getResources();                                                                       </span>
<span class="-5692402014536765414" onmouseenter="enter('-5692402014536765414');" onmouseout="out('-5692402014536765414');" style="">1077              Point defaultThumbSize = getDefaultThumbnailSize(res);                                                </span>
<span class="8688062696958133993" onmouseenter="enter('8688062696958133993');" onmouseout="out('8688062696958133993');" style="">1078              int rotation = WallpaperCropActivity.getRotationFromExif(res, resId);                                 </span>
<span class="-164181572917895630" onmouseenter="enter('-164181572917895630');" onmouseout="out('-164181572917895630');" style="">1079              thumb = createThumbnail(                                                                              </span>
<span class="-534913579393144749" onmouseenter="enter('-534913579393144749');" onmouseout="out('-534913579393144749');" style="">1080                      defaultThumbSize, this, null, null, sysRes, resId, rotation, false);                          </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1081              if (thumb != null) {                                                                                  </span>
<span class="7035528461983212654" onmouseenter="enter('7035528461983212654');" onmouseout="out('7035528461983212654');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1082 -                defaultWallpaperExists = writeImageToFileAsJpeg(defaultThumbFile, thumb);                         </span>
<span class="4589895813778676518" onmouseenter="enter('4589895813778676518');" onmouseout="out('4589895813778676518');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1083 +                defaultWallpaperExists = saveDefaultWallpaperThumb(thumb);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085          }                                                                                                         </span>
<span class="1877730711367989636" onmouseenter="enter('1877730711367989636');" onmouseout="out('1877730711367989636');" style="">1086          if (defaultWallpaperExists) {                                                                             </span>
<span class="-5406664625181933074" onmouseenter="enter('-5406664625181933074');" onmouseout="out('-5406664625181933074');" style="">1087              return new ResourceWallpaperInfo(sysRes, resId, new BitmapDrawable(thumb));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1089          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1090      }                                                                                                             </span>
<span  style="">1091                                                                                                                    </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1092 +    @TargetApi(Build.VERSION_CODES.KITKAT)                                                                        </span>
<span class="-6050375207733295576" onmouseenter="enter('-6050375207733295576');" onmouseout="out('-6050375207733295576');" style="">1093      private DefaultWallpaperInfo getDefaultWallpaper() {                                                          </span>
<span class="-6842570305902007274" onmouseenter="enter('-6842570305902007274');" onmouseout="out('-6842570305902007274');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1094 -        File defaultThumbFile = new File(getFilesDir(), DEFAULT_WALLPAPER_THUMBNAIL_FILENAME);                    </span>
<span class="-2700470529350012310" onmouseenter="enter('-2700470529350012310');" onmouseout="out('-2700470529350012310');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1095 +        File defaultThumbFile = getDefaultThumbFile();                                                            </span>
<span class="-3136380405132973813" onmouseenter="enter('-3136380405132973813');" onmouseout="out('-3136380405132973813');" style="">1096          Bitmap thumb = null;                                                                                      </span>
<span class="3173128348719073493" onmouseenter="enter('3173128348719073493');" onmouseout="out('3173128348719073493');" style="">1097          boolean defaultWallpaperExists = false;                                                                   </span>
<span class="769015314191339580" onmouseenter="enter('769015314191339580');" onmouseout="out('769015314191339580');" style="">1098          if (defaultThumbFile.exists()) {                                                                          </span>
<span class="145969986834765399" onmouseenter="enter('145969986834765399');" onmouseout="out('145969986834765399');" style="">1099              thumb = BitmapFactory.decodeFile(defaultThumbFile.getAbsolutePath());                                 </span>
<span class="-3053675610106547889" onmouseenter="enter('-3053675610106547889');" onmouseout="out('-3053675610106547889');" style="">1100              defaultWallpaperExists = true;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1101          } else {                                                                                                  </span>
<span class="-4011527685513193832" onmouseenter="enter('-4011527685513193832');" onmouseout="out('-4011527685513193832');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1102 -            // Delete old thumbnail file, since we had a bug where the thumbnail wasn&#x27;t being drawn               </span>
<span class="6620780917038886630" onmouseenter="enter('6620780917038886630');" onmouseout="out('6620780917038886630');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1103 -            // before                                                                                             </span>
<span class="3567311882351013867" onmouseenter="enter('3567311882351013867');" onmouseout="out('3567311882351013867');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1104 -            new File(getFilesDir(), OLD_DEFAULT_WALLPAPER_THUMBNAIL_FILENAME).delete();                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1105 -                                                                                                                  </span>
<span class="8976545925819631954" onmouseenter="enter('8976545925819631954');" onmouseout="out('8976545925819631954');" style="">1106              Resources res = getResources();                                                                       </span>
<span class="-5692402014536765414" onmouseenter="enter('-5692402014536765414');" onmouseout="out('-5692402014536765414');" style="">1107              Point defaultThumbSize = getDefaultThumbnailSize(res);                                                </span>
<span class="-3652113574132114284" onmouseenter="enter('-3652113574132114284');" onmouseout="out('-3652113574132114284');" style="">1108              Drawable wallpaperDrawable = WallpaperManager.getInstance(this).getBuiltInDrawable(                   </span>
<span class="5013343709069618762" onmouseenter="enter('5013343709069618762');" onmouseout="out('5013343709069618762');" style="">1109                      defaultThumbSize.x, defaultThumbSize.y, true, 0.5f, 0.5f);                                    </span>
<span class="7887239685465932583" onmouseenter="enter('7887239685465932583');" onmouseout="out('7887239685465932583');" style="">1110              if (wallpaperDrawable != null) {                                                                      </span>
<span class="-5003097491286512046" onmouseenter="enter('-5003097491286512046');" onmouseout="out('-5003097491286512046');" style="">1111                  thumb = Bitmap.createBitmap(                                                                      </span>
<span class="-5991438011041707161" onmouseenter="enter('-5991438011041707161');" onmouseout="out('-5991438011041707161');" style="">1112                          defaultThumbSize.x, defaultThumbSize.y, Bitmap.Config.ARGB_8888);                         </span>
<span class="1166395082389141916" onmouseenter="enter('1166395082389141916');" onmouseout="out('1166395082389141916');" style="">1113                  Canvas c = new Canvas(thumb);                                                                     </span>
<span class="8212113414976856971" onmouseenter="enter('8212113414976856971');" onmouseout="out('8212113414976856971');" style="">1114                  wallpaperDrawable.setBounds(0, 0, defaultThumbSize.x, defaultThumbSize.y);                        </span>
<span class="-8788570621207906555" onmouseenter="enter('-8788570621207906555');" onmouseout="out('-8788570621207906555');" style="">1115                  wallpaperDrawable.draw(c);                                                                        </span>
<span class="5675729563233531278" onmouseenter="enter('5675729563233531278');" onmouseout="out('5675729563233531278');" style="">1116                  c.setBitmap(null);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1117              }                                                                                                     </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1118              if (thumb != null) {                                                                                  </span>
<span class="7035528461983212654" onmouseenter="enter('7035528461983212654');" onmouseout="out('7035528461983212654');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1119 -                defaultWallpaperExists = writeImageToFileAsJpeg(defaultThumbFile, thumb);                         </span>
<span class="4589895813778676518" onmouseenter="enter('4589895813778676518');" onmouseout="out('4589895813778676518');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1120 +                defaultWallpaperExists = saveDefaultWallpaperThumb(thumb);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122          }                                                                                                         </span>
<span class="1877730711367989636" onmouseenter="enter('1877730711367989636');" onmouseout="out('1877730711367989636');" style="">1123          if (defaultWallpaperExists) {                                                                             </span>
<span class="-3728514137807666119" onmouseenter="enter('-3728514137807666119');" onmouseout="out('-3728514137807666119');" style="">1124              return new DefaultWallpaperInfo(new BitmapDrawable(thumb));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1126          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1127      }                                                                                                             </span>
<span  style="">1128                                                                                                                    </span>
<span class="-1742079203168766475" onmouseenter="enter('-1742079203168766475');" onmouseout="out('-1742079203168766475');" style="">1129      public Pair&lt;ApplicationInfo, Integer&gt; getWallpaperArrayResourceId() {                                         </span>
<span class="-6161770320248569187" onmouseenter="enter('-6161770320248569187');" onmouseout="out('-6161770320248569187');" style="">1130          // Context.getPackageName() may return the &quot;original&quot; package name,                                       </span>
<span class="-937325419486317119" onmouseenter="enter('-937325419486317119');" onmouseout="out('-937325419486317119');" style="">1131          // com.android.launcher3; Resources needs the real package name,                                          </span>
<span class="-2310146865144726197" onmouseenter="enter('-2310146865144726197');" onmouseout="out('-2310146865144726197');" style="">1132          // com.android.launcher3. So we ask Resources for what it thinks the                                      </span>
<span class="-8519279543710902199" onmouseenter="enter('-8519279543710902199');" onmouseout="out('-8519279543710902199');" style="">1133          // package name should be.                                                                                </span>
<span class="1562477602934366037" onmouseenter="enter('1562477602934366037');" onmouseout="out('1562477602934366037');" style="">1134          final String packageName = getResources().getResourcePackageName(R.array.wallpapers);                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1135          try {                                                                                                     </span>
<span class="793324406234855079" onmouseenter="enter('793324406234855079');" onmouseout="out('793324406234855079');" style="">1136              ApplicationInfo info = getPackageManager().getApplicationInfo(packageName, 0);                        </span>
<span class="7900160984832850008" onmouseenter="enter('7900160984832850008');" onmouseout="out('7900160984832850008');" style="">1137              return new Pair&lt;ApplicationInfo, Integer&gt;(info, R.array.wallpapers);                                  </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1138          } catch (PackageManager.NameNotFoundException e) {                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1139              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141      }                                                                                                             </span>
<span  style="">1142                                                                                                                    </span>
<span class="-2462790020163835093" onmouseenter="enter('-2462790020163835093');" onmouseout="out('-2462790020163835093');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1143 -    private ArrayList&lt;ResourceWallpaperInfo&gt; addWallpapers(                                                       </span>
<span class="3187861213952326026" onmouseenter="enter('3187861213952326026');" onmouseout="out('3187861213952326026');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1144 -            Resources res, String packageName, int listResId) {                                                   </span>
<span class="-1154952956947565938" onmouseenter="enter('-1154952956947565938');" onmouseout="out('-1154952956947565938');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1145 -        ArrayList&lt;ResourceWallpaperInfo&gt; bundledWallpapers =                                                      </span>
<span class="-8754632937055088420" onmouseenter="enter('-8754632937055088420');" onmouseout="out('-8754632937055088420');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1146 -                new ArrayList&lt;ResourceWallpaperInfo&gt;(24);                                                         </span>
<span class="-1243563933706295169" onmouseenter="enter('-1243563933706295169');" onmouseout="out('-1243563933706295169');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1147 +    private void addWallpapers(ArrayList&lt;WallpaperTileInfo&gt; known, Resources res,                                 </span>
<span class="5411865991738807592" onmouseenter="enter('5411865991738807592');" onmouseout="out('5411865991738807592');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1148 +            String packageName, int listResId) {                                                                  </span>
<span class="7110410272585510587" onmouseenter="enter('7110410272585510587');" onmouseout="out('7110410272585510587');" style="">1149          final String[] extras = res.getStringArray(listResId);                                                    </span>
<span class="-8339999744341716205" onmouseenter="enter('-8339999744341716205');" onmouseout="out('-8339999744341716205');" style="">1150          for (String extra : extras) {                                                                             </span>
<span class="5117676898365713774" onmouseenter="enter('5117676898365713774');" onmouseout="out('5117676898365713774');" style="">1151              int resId = res.getIdentifier(extra, &quot;drawable&quot;, packageName);                                        </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="">1152              if (resId != 0) {                                                                                     </span>
<span class="-6623243265608892176" onmouseenter="enter('-6623243265608892176');" onmouseout="out('-6623243265608892176');" style="">1153                  final int thumbRes = res.getIdentifier(extra + &quot;_small&quot;, &quot;drawable&quot;, packageName);                </span>
<span  style="">1154                                                                                                                    </span>
<span class="1395464033869972102" onmouseenter="enter('1395464033869972102');" onmouseout="out('1395464033869972102');" style="">1155                  if (thumbRes != 0) {                                                                              </span>
<span class="-6566842002354754523" onmouseenter="enter('-6566842002354754523');" onmouseout="out('-6566842002354754523');" style="">1156                      ResourceWallpaperInfo wallpaperInfo =                                                         </span>
<span class="187140772166123482" onmouseenter="enter('187140772166123482');" onmouseout="out('187140772166123482');" style="">1157                              new ResourceWallpaperInfo(res, resId, res.getDrawable(thumbRes));                     </span>
<span class="-4229722520451889307" onmouseenter="enter('-4229722520451889307');" onmouseout="out('-4229722520451889307');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1158 -                    bundledWallpapers.add(wallpaperInfo);                                                         </span>
<span class="6489784602606278995" onmouseenter="enter('6489784602606278995');" onmouseout="out('6489784602606278995');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1159 +                    known.add(wallpaperInfo);                                                                     </span>
<span class="-1095979516758920685" onmouseenter="enter('-1095979516758920685');" onmouseout="out('-1095979516758920685');" style="">1160                      // Log.d(TAG, &quot;add: [&quot; + packageName + &quot;]: &quot; + extra + &quot; (&quot; + res + &quot;)&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1161                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1162              } else {                                                                                              </span>
<span class="-3254000057019390134" onmouseenter="enter('-3254000057019390134');" onmouseout="out('-3254000057019390134');" style="">1163                  Log.e(TAG, &quot;Couldn&#x27;t find wallpaper &quot; + extra);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165          }                                                                                                         </span>
<span class="-8449913752497022700" onmouseenter="enter('-8449913752497022700');" onmouseout="out('-8449913752497022700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1166 -        return bundledWallpapers;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1167      }                                                                                                             </span>
<span  style="">1168                                                                                                                    </span>
<span class="8798832263856618785" onmouseenter="enter('8798832263856618785');" onmouseout="out('8798832263856618785');" style="">1169      public CropView getCropView() {                                                                               </span>
<span class="-6704760201962962178" onmouseenter="enter('-6704760201962962178');" onmouseout="out('-6704760201962962178');" style="">1170          return mCropView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171      }                                                                                                             </span>
<span  style="">1172                                                                                                                    </span>
<span class="1726384713613661855" onmouseenter="enter('1726384713613661855');" onmouseout="out('1726384713613661855');" style="">1173      public SavedWallpaperImages getSavedImages() {                                                                </span>
<span class="8561023406342667010" onmouseenter="enter('8561023406342667010');" onmouseout="out('8561023406342667010');" style="">1174          return mSavedImages;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175      }                                                                                                             </span>
<span  style="">1176                                                                                                                    </span>
<span class="912114107866141543" onmouseenter="enter('912114107866141543');" onmouseout="out('912114107866141543');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1177 -    public void onLiveWallpaperPickerLaunch() {                                                                   </span>
<span class="-1282370188250350949" onmouseenter="enter('-1282370188250350949');" onmouseout="out('-1282370188250350949');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1178 +    public void onLiveWallpaperPickerLaunch(WallpaperInfo info) {                                                 </span>
<span class="957063298317837878" onmouseenter="enter('957063298317837878');" onmouseout="out('957063298317837878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1179 +        mLastClickedLiveWallpaperInfo = info;                                                                     </span>
<span class="1720419068305677284" onmouseenter="enter('1720419068305677284');" onmouseout="out('1720419068305677284');" style="">1180          mLiveWallpaperInfoOnPickerLaunch = WallpaperManager.getInstance(this).getWallpaperInfo();                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181      }                                                                                                             </span>
<span  style="">1182                                                                                                                    </span>
<span class="-4292702971064588005" onmouseenter="enter('-4292702971064588005');" onmouseout="out('-4292702971064588005');" style="">1183      static class ZeroPaddingDrawable extends LevelListDrawable {                                                  </span>
<span class="-1809245915530945544" onmouseenter="enter('-1809245915530945544');" onmouseout="out('-1809245915530945544');" style="">1184          public ZeroPaddingDrawable(Drawable d) {                                                                  </span>
<span class="7209017336523601499" onmouseenter="enter('7209017336523601499');" onmouseout="out('7209017336523601499');" style="">1185              super();                                                                                              </span>
<span class="-9075562460261717781" onmouseenter="enter('-9075562460261717781');" onmouseout="out('-9075562460261717781');" style="">1186              addLevel(0, 0, d);                                                                                    </span>
<span class="-8837866944625871288" onmouseenter="enter('-8837866944625871288');" onmouseout="out('-8837866944625871288');" style="">1187              setLevel(0);                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188          }                                                                                                         </span>
<span  style="">1189                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1190          @Override                                                                                                 </span>
<span class="-4441500511158129295" onmouseenter="enter('-4441500511158129295');" onmouseout="out('-4441500511158129295');" style="">1191          public boolean getPadding(Rect padding) {                                                                 </span>
<span class="-595144173525385315" onmouseenter="enter('-595144173525385315');" onmouseout="out('-595144173525385315');" style="">1192              padding.set(0, 0, 0, 0);                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1193              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195      }                                                                                                             </span>
<span  style="">1196                                                                                                                    </span>
<span class="-499616691925250850" onmouseenter="enter('-499616691925250850');" onmouseout="out('-499616691925250850');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1197 -    private static class BuiltInWallpapersAdapter extends BaseAdapter implements ListAdapter {                    </span>
<span class="7221328415105851214" onmouseenter="enter('7221328415105851214');" onmouseout="out('7221328415105851214');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1198 -        private LayoutInflater mLayoutInflater;                                                                   </span>
<span class="-2954627038684209669" onmouseenter="enter('-2954627038684209669');" onmouseout="out('-2954627038684209669');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1199 -        private ArrayList&lt;ResourceWallpaperInfo&gt; mWallpapers;                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1200 -                                                                                                                  </span>
<span class="7789632682494591096" onmouseenter="enter('7789632682494591096');" onmouseout="out('7789632682494591096');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1201 -        BuiltInWallpapersAdapter(Activity activity, ArrayList&lt;ResourceWallpaperInfo&gt; wallpapers) {                </span>
<span class="-2937803399629319128" onmouseenter="enter('-2937803399629319128');" onmouseout="out('-2937803399629319128');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1202 +    private static class SimpleWallpapersAdapter extends ArrayAdapter&lt;WallpaperTileInfo&gt; {                        </span>
<span class="-8360437163581134323" onmouseenter="enter('-8360437163581134323');" onmouseout="out('-8360437163581134323');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1203 +        private final LayoutInflater mLayoutInflater;                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1204 +                                                                                                                  </span>
<span class="-4484594253025843931" onmouseenter="enter('-4484594253025843931');" onmouseout="out('-4484594253025843931');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1205 +        SimpleWallpapersAdapter(Activity activity, ArrayList&lt;WallpaperTileInfo&gt; wallpapers) {                     </span>
<span class="8653562979026841436" onmouseenter="enter('8653562979026841436');" onmouseout="out('8653562979026841436');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1206 +            super(activity, R.layout.wallpaper_picker_item, wallpapers);                                          </span>
<span class="5318885258480438175" onmouseenter="enter('5318885258480438175');" onmouseout="out('5318885258480438175');" style="">1207              mLayoutInflater = activity.getLayoutInflater();                                                       </span>
<span class="-4833017942983878964" onmouseenter="enter('-4833017942983878964');" onmouseout="out('-4833017942983878964');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1208 -            mWallpapers = wallpapers;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1209 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1210 -                                                                                                                  </span>
<span class="2479053523464623410" onmouseenter="enter('2479053523464623410');" onmouseout="out('2479053523464623410');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1211 -        public int getCount() {                                                                                   </span>
<span class="-6485595122273657301" onmouseenter="enter('-6485595122273657301');" onmouseout="out('-6485595122273657301');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1212 -            return mWallpapers.size();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1213 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1214 -                                                                                                                  </span>
<span class="2465580035775819064" onmouseenter="enter('2465580035775819064');" onmouseout="out('2465580035775819064');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1215 -        public ResourceWallpaperInfo getItem(int position) {                                                      </span>
<span class="-32063425151234857" onmouseenter="enter('-32063425151234857');" onmouseout="out('-32063425151234857');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1216 -            return mWallpapers.get(position);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1217 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1218 -                                                                                                                  </span>
<span class="-5788832406764502852" onmouseenter="enter('-5788832406764502852');" onmouseout="out('-5788832406764502852');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1219 -        public long getItemId(int position) {                                                                     </span>
<span class="8628030614565729529" onmouseenter="enter('8628030614565729529');" onmouseout="out('8628030614565729529');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1220 -            return position;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221          }                                                                                                         </span>
<span  style="">1222                                                                                                                    </span>
<span class="1084873981402571013" onmouseenter="enter('1084873981402571013');" onmouseout="out('1084873981402571013');" style="">1223          public View getView(int position, View convertView, ViewGroup parent) {                                   </span>
<span class="3530794126153696407" onmouseenter="enter('3530794126153696407');" onmouseout="out('3530794126153696407');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1224 -            Drawable thumb = mWallpapers.get(position).mThumb;                                                    </span>
<span class="2334288334628913507" onmouseenter="enter('2334288334628913507');" onmouseout="out('2334288334628913507');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1225 +            Drawable thumb = getItem(position).mThumb;                                                            </span>
<span class="-4748570100733370001" onmouseenter="enter('-4748570100733370001');" onmouseout="out('-4748570100733370001');" style="">1226              if (thumb == null) {                                                                                  </span>
<span class="-4942494812872156884" onmouseenter="enter('-4942494812872156884');" onmouseout="out('-4942494812872156884');" style="">1227                  Log.e(TAG, &quot;Error decoding thumbnail for wallpaper #&quot; + position);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228              }                                                                                                     </span>
<span class="-5192345876068176682" onmouseenter="enter('-5192345876068176682');" onmouseout="out('-5192345876068176682');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1229 -            return createImageTileView(mLayoutInflater, position, convertView, parent, thumb);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1230 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1231 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1232 -                                                                                                                  </span>
<span class="480032886486165290" onmouseenter="enter('480032886486165290');" onmouseout="out('480032886486165290');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1233 -    public static View createImageTileView(LayoutInflater layoutInflater, int position,                           </span>
<span class="7911727622339877382" onmouseenter="enter('7911727622339877382');" onmouseout="out('7911727622339877382');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1234 +            return createImageTileView(mLayoutInflater, convertView, parent, thumb);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1235 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1236 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1237 +                                                                                                                  </span>
<span class="2531716121200619667" onmouseenter="enter('2531716121200619667');" onmouseout="out('2531716121200619667');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1238 +    public static View createImageTileView(LayoutInflater layoutInflater,                                         </span>
<span class="651868139846267065" onmouseenter="enter('651868139846267065');" onmouseout="out('651868139846267065');" style="">1239              View convertView, ViewGroup parent, Drawable thumb) {                                                 </span>
<span class="-690381633676655047" onmouseenter="enter('-690381633676655047');" onmouseout="out('-690381633676655047');" style="">1240          View view;                                                                                                </span>
<span  style="">1241                                                                                                                    </span>
<span class="4181524603843345875" onmouseenter="enter('4181524603843345875');" onmouseout="out('4181524603843345875');" style="">1242          if (convertView == null) {                                                                                </span>
<span class="-8962994358344247461" onmouseenter="enter('-8962994358344247461');" onmouseout="out('-8962994358344247461');" style="">1243              view = layoutInflater.inflate(R.layout.wallpaper_picker_item, parent, false);                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1244          } else {                                                                                                  </span>
<span class="-1165364525461896664" onmouseenter="enter('-1165364525461896664');" onmouseout="out('-1165364525461896664');" style="">1245              view = convertView;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246          }                                                                                                         </span>
<span  style="">1247                                                                                                                    </span>
<span class="-5796698656042939368" onmouseenter="enter('-5796698656042939368');" onmouseout="out('-5796698656042939368');" style="">1248          setWallpaperItemPaddingToZero((FrameLayout) view);                                                        </span>
<span  style="">1249                                                                                                                    </span>
<span class="-5880466984736486189" onmouseenter="enter('-5880466984736486189');" onmouseout="out('-5880466984736486189');" style="">1250          ImageView image = (ImageView) view.findViewById(R.id.wallpaper_image);                                    </span>
<span  style="">1251                                                                                                                    </span>
<span class="5163002773324448230" onmouseenter="enter('5163002773324448230');" onmouseout="out('5163002773324448230');" style="">1252          if (thumb != null) {                                                                                      </span>
<span class="-3973426726107986909" onmouseenter="enter('-3973426726107986909');" onmouseout="out('-3973426726107986909');" style="">1253              image.setImageDrawable(thumb);                                                                        </span>
<span class="206035284699071082" onmouseenter="enter('206035284699071082');" onmouseout="out('206035284699071082');" style="">1254              thumb.setDither(true);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255          }                                                                                                         </span>
<span  style="">1256                                                                                                                    </span>
<span class="3345849580761087571" onmouseenter="enter('3345849580761087571');" onmouseout="out('3345849580761087571');" style="">1257          return view;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258      }                                                                                                             </span>
<span  style="">1259                                                                                                                    </span>
<span class="-2975945065481865808" onmouseenter="enter('-2975945065481865808');" onmouseout="out('-2975945065481865808');" style="">1260      // In Launcher3, we override this with a method that catches exceptions                                       </span>
<span class="-5274754236505393442" onmouseenter="enter('-5274754236505393442');" onmouseout="out('-5274754236505393442');" style="">1261      // from starting activities; didn&#x27;t want to copy and paste code into here                                     </span>
<span class="744831245140937102" onmouseenter="enter('744831245140937102');" onmouseout="out('744831245140937102');" style="">1262      public void startActivityForResultSafely(Intent intent, int requestCode) {                                    </span>
<span class="-1930681083273022971" onmouseenter="enter('-1930681083273022971');" onmouseout="out('-1930681083273022971');" style="">1263          startActivityForResult(intent, requestCode);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1264      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265  }                                                                                                                 </span></pre></td>
                            <td><pre></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            